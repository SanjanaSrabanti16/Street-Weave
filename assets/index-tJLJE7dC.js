(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();var y6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var b6={exports:{}},q$={},_6={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_=Symbol.for("react.element"),Mae=Symbol.for("react.portal"),zae=Symbol.for("react.fragment"),qae=Symbol.for("react.strict_mode"),jae=Symbol.for("react.profiler"),Uae=Symbol.for("react.provider"),Bae=Symbol.for("react.context"),Vae=Symbol.for("react.forward_ref"),Wae=Symbol.for("react.suspense"),Gae=Symbol.for("react.memo"),Hae=Symbol.for("react.lazy"),Bz=Symbol.iterator;function Yae(e){return e===null||typeof e!="object"?null:(e=Bz&&e[Bz]||e["@@iterator"],typeof e=="function"?e:null)}var x6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w6=Object.assign,k6={};function Sm(e,t,n){this.props=e,this.context=t,this.refs=k6,this.updater=n||x6}Sm.prototype.isReactComponent={};Sm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $6(){}$6.prototype=Sm.prototype;function rI(e,t,n){this.props=e,this.context=t,this.refs=k6,this.updater=n||x6}var oI=rI.prototype=new $6;oI.constructor=rI;w6(oI,Sm.prototype);oI.isPureReactComponent=!0;var Vz=Array.isArray,E6=Object.prototype.hasOwnProperty,sI={current:null},S6={key:!0,ref:!0,__self:!0,__source:!0};function T6(e,t,n){var i,a={},r=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)E6.call(t,i)&&!S6.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)a[i]===void 0&&(a[i]=s[i]);return{$$typeof:I_,type:e,key:r,ref:o,props:a,_owner:sI.current}}function Xae(e,t){return{$$typeof:I_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lI(e){return typeof e=="object"&&e!==null&&e.$$typeof===I_}function Zae(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Wz=/\/+/g;function BS(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Zae(""+e.key):t.toString(36)}function $1(e,t,n,i,a){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case I_:case Mae:o=!0}}if(o)return o=e,a=a(o),e=i===""?"."+BS(o,0):i,Vz(a)?(n="",e!=null&&(n=e.replace(Wz,"$&/")+"/"),$1(a,t,n,"",function(u){return u})):a!=null&&(lI(a)&&(a=Xae(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Wz,"$&/")+"/")+e)),t.push(a)),1;if(o=0,i=i===""?".":i+":",Vz(e))for(var s=0;s<e.length;s++){r=e[s];var l=i+BS(r,s);o+=$1(r,t,n,l,a)}else if(l=Yae(e),typeof l=="function")for(e=l.call(e),s=0;!(r=e.next()).done;)r=r.value,l=i+BS(r,s++),o+=$1(r,t,n,l,a);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function rx(e,t,n){if(e==null)return e;var i=[],a=0;return $1(e,i,"","",function(r){return t.call(n,r,a++)}),i}function Jae(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ha={current:null},E1={transition:null},Kae={ReactCurrentDispatcher:Ha,ReactCurrentBatchConfig:E1,ReactCurrentOwner:sI};function A6(){throw Error("act(...) is not supported in production builds of React.")}wt.Children={map:rx,forEach:function(e,t,n){rx(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return rx(e,function(){t++}),t},toArray:function(e){return rx(e,function(t){return t})||[]},only:function(e){if(!lI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};wt.Component=Sm;wt.Fragment=zae;wt.Profiler=jae;wt.PureComponent=rI;wt.StrictMode=qae;wt.Suspense=Wae;wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kae;wt.act=A6;wt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=w6({},e.props),a=e.key,r=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=sI.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)E6.call(t,l)&&!S6.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];i.children=s}return{$$typeof:I_,type:e.type,key:a,ref:r,props:i,_owner:o}};wt.createContext=function(e){return e={$$typeof:Bae,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Uae,_context:e},e.Consumer=e};wt.createElement=T6;wt.createFactory=function(e){var t=T6.bind(null,e);return t.type=e,t};wt.createRef=function(){return{current:null}};wt.forwardRef=function(e){return{$$typeof:Vae,render:e}};wt.isValidElement=lI;wt.lazy=function(e){return{$$typeof:Hae,_payload:{_status:-1,_result:e},_init:Jae}};wt.memo=function(e,t){return{$$typeof:Gae,type:e,compare:t===void 0?null:t}};wt.startTransition=function(e){var t=E1.transition;E1.transition={};try{e()}finally{E1.transition=t}};wt.unstable_act=A6;wt.useCallback=function(e,t){return Ha.current.useCallback(e,t)};wt.useContext=function(e){return Ha.current.useContext(e)};wt.useDebugValue=function(){};wt.useDeferredValue=function(e){return Ha.current.useDeferredValue(e)};wt.useEffect=function(e,t){return Ha.current.useEffect(e,t)};wt.useId=function(){return Ha.current.useId()};wt.useImperativeHandle=function(e,t,n){return Ha.current.useImperativeHandle(e,t,n)};wt.useInsertionEffect=function(e,t){return Ha.current.useInsertionEffect(e,t)};wt.useLayoutEffect=function(e,t){return Ha.current.useLayoutEffect(e,t)};wt.useMemo=function(e,t){return Ha.current.useMemo(e,t)};wt.useReducer=function(e,t,n){return Ha.current.useReducer(e,t,n)};wt.useRef=function(e){return Ha.current.useRef(e)};wt.useState=function(e){return Ha.current.useState(e)};wt.useSyncExternalStore=function(e,t,n){return Ha.current.useSyncExternalStore(e,t,n)};wt.useTransition=function(){return Ha.current.useTransition()};wt.version="18.3.1";_6.exports=wt;var gi=_6.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qae=gi,ere=Symbol.for("react.element"),tre=Symbol.for("react.fragment"),nre=Object.prototype.hasOwnProperty,ire=Qae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,are={key:!0,ref:!0,__self:!0,__source:!0};function O6(e,t,n){var i,a={},r=null,o=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)nre.call(t,i)&&!are.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:ere,type:e,key:r,ref:o,props:a,_owner:ire.current}}q$.Fragment=tre;q$.jsx=O6;q$.jsxs=O6;b6.exports=q$;var Li=b6.exports,D6={exports:{}},Zr={},C6={exports:{}},R6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ee,oe){var Y=ee.length;ee.push(oe);e:for(;0<Y;){var Z=Y-1>>>1,ae=ee[Z];if(0<a(ae,oe))ee[Z]=oe,ee[Y]=ae,Y=Z;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var oe=ee[0],Y=ee.pop();if(Y!==oe){ee[0]=Y;e:for(var Z=0,ae=ee.length,ne=ae>>>1;Z<ne;){var U=2*(Z+1)-1,X=ee[U],ue=U+1,Ce=ee[ue];if(0>a(X,Y))ue<ae&&0>a(Ce,X)?(ee[Z]=Ce,ee[ue]=Y,Z=ue):(ee[Z]=X,ee[U]=Y,Z=U);else if(ue<ae&&0>a(Ce,Y))ee[Z]=Ce,ee[ue]=Y,Z=ue;else break e}}return oe}function a(ee,oe){var Y=ee.sortIndex-oe.sortIndex;return Y!==0?Y:ee.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],d=1,c=null,g=3,v=!1,b=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(ee){for(var oe=n(u);oe!==null;){if(oe.callback===null)i(u);else if(oe.startTime<=ee)i(u),oe.sortIndex=oe.expirationTime,t(l,oe);else break;oe=n(u)}}function O(ee){if(x=!1,T(ee),!b)if(n(l)!==null)b=!0,K(D);else{var oe=n(u);oe!==null&&se(O,oe.startTime-ee)}}function D(ee,oe){b=!1,x&&(x=!1,w(M),M=-1),v=!0;var Y=g;try{for(T(oe),c=n(l);c!==null&&(!(c.expirationTime>oe)||ee&&!z());){var Z=c.callback;if(typeof Z=="function"){c.callback=null,g=c.priorityLevel;var ae=Z(c.expirationTime<=oe);oe=e.unstable_now(),typeof ae=="function"?c.callback=ae:c===n(l)&&i(l),T(oe)}else i(l);c=n(l)}if(c!==null)var ne=!0;else{var U=n(u);U!==null&&se(O,U.startTime-oe),ne=!1}return ne}finally{c=null,g=Y,v=!1}}var P=!1,R=null,M=-1,q=5,H=-1;function z(){return!(e.unstable_now()-H<q)}function Q(){if(R!==null){var ee=e.unstable_now();H=ee;var oe=!0;try{oe=R(!0,ee)}finally{oe?te():(P=!1,R=null)}}else P=!1}var te;if(typeof E=="function")te=function(){E(Q)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,j=W.port2;W.port1.onmessage=Q,te=function(){j.postMessage(null)}}else te=function(){k(Q,0)};function K(ee){R=ee,P||(P=!0,te())}function se(ee,oe){M=k(function(){ee(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,K(D))},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(ee){switch(g){case 1:case 2:case 3:var oe=3;break;default:oe=g}var Y=g;g=oe;try{return ee()}finally{g=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ee,oe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Y=g;g=ee;try{return oe()}finally{g=Y}},e.unstable_scheduleCallback=function(ee,oe,Y){var Z=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,ee){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Y+ae,ee={id:d++,callback:oe,priorityLevel:ee,startTime:Y,expirationTime:ae,sortIndex:-1},Y>Z?(ee.sortIndex=Y,t(u,ee),n(l)===null&&ee===n(u)&&(x?(w(M),M=-1):x=!0,se(O,Y-Z))):(ee.sortIndex=ae,t(l,ee),b||v||(b=!0,K(D))),ee},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(ee){var oe=g;return function(){var Y=g;g=oe;try{return ee.apply(this,arguments)}finally{g=Y}}}})(R6);C6.exports=R6;var rre=C6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ore=gi,Vr=rre;function Ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I6=new Set,Cb={};function Fh(e,t){Dg(e,t),Dg(e+"Capture",t)}function Dg(e,t){for(Cb[e]=t,e=0;e<t.length;e++)I6.add(t[e])}var Pu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xO=Object.prototype.hasOwnProperty,sre=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gz={},Hz={};function lre(e){return xO.call(Hz,e)?!0:xO.call(Gz,e)?!1:sre.test(e)?Hz[e]=!0:(Gz[e]=!0,!1)}function ure(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function dre(e,t,n,i){if(t===null||typeof t>"u"||ure(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ya(e,t,n,i,a,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var Hi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Hi[e]=new Ya(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Hi[t]=new Ya(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Hi[e]=new Ya(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Hi[e]=new Ya(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Hi[e]=new Ya(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Hi[e]=new Ya(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Hi[e]=new Ya(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Hi[e]=new Ya(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Hi[e]=new Ya(e,5,!1,e.toLowerCase(),null,!1,!1)});var uI=/[\-:]([a-z])/g;function dI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(uI,dI);Hi[t]=new Ya(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(uI,dI);Hi[t]=new Ya(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(uI,dI);Hi[t]=new Ya(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Hi[e]=new Ya(e,1,!1,e.toLowerCase(),null,!1,!1)});Hi.xlinkHref=new Ya("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Hi[e]=new Ya(e,1,!1,e.toLowerCase(),null,!0,!0)});function fI(e,t,n,i){var a=Hi.hasOwnProperty(t)?Hi[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(dre(t,n,a,i)&&(n=null),i||a===null?lre(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,i=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Yu=ore.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ox=Symbol.for("react.element"),Gp=Symbol.for("react.portal"),Hp=Symbol.for("react.fragment"),cI=Symbol.for("react.strict_mode"),wO=Symbol.for("react.profiler"),P6=Symbol.for("react.provider"),F6=Symbol.for("react.context"),hI=Symbol.for("react.forward_ref"),kO=Symbol.for("react.suspense"),$O=Symbol.for("react.suspense_list"),pI=Symbol.for("react.memo"),Td=Symbol.for("react.lazy"),N6=Symbol.for("react.offscreen"),Yz=Symbol.iterator;function Ny(e){return e===null||typeof e!="object"?null:(e=Yz&&e[Yz]||e["@@iterator"],typeof e=="function"?e:null)}var Dn=Object.assign,VS;function yv(e){if(VS===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);VS=t&&t[1]||""}return`
`+VS+e}var WS=!1;function GS(e,t){if(!e||WS)return"";WS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),r=i.stack.split(`
`),o=a.length-1,s=r.length-1;1<=o&&0<=s&&a[o]!==r[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==r[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==r[s]){var l=`
`+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{WS=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?yv(e):""}function fre(e){switch(e.tag){case 5:return yv(e.type);case 16:return yv("Lazy");case 13:return yv("Suspense");case 19:return yv("SuspenseList");case 0:case 2:case 15:return e=GS(e.type,!1),e;case 11:return e=GS(e.type.render,!1),e;case 1:return e=GS(e.type,!0),e;default:return""}}function EO(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hp:return"Fragment";case Gp:return"Portal";case wO:return"Profiler";case cI:return"StrictMode";case kO:return"Suspense";case $O:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case F6:return(e.displayName||"Context")+".Consumer";case P6:return(e._context.displayName||"Context")+".Provider";case hI:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pI:return t=e.displayName||null,t!==null?t:EO(e.type)||"Memo";case Td:t=e._payload,e=e._init;try{return EO(e(t))}catch{}}return null}function cre(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return EO(t);case 8:return t===cI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hf(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function L6(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hre(e){var t=L6(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sx(e){e._valueTracker||(e._valueTracker=hre(e))}function M6(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=L6(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function bw(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function SO(e,t){var n=t.checked;return Dn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xz(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=hf(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function z6(e,t){t=t.checked,t!=null&&fI(e,"checked",t,!1)}function TO(e,t){z6(e,t);var n=hf(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?AO(e,t.type,n):t.hasOwnProperty("defaultValue")&&AO(e,t.type,hf(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zz(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function AO(e,t,n){(t!=="number"||bw(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var vv=Array.isArray;function fg(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+hf(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function OO(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return Dn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jz(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ae(92));if(vv(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:hf(n)}}function q6(e,t){var n=hf(t.value),i=hf(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Kz(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function j6(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function DO(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?j6(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var lx,U6=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(lx=lx||document.createElement("div"),lx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rb(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var eb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pre=["Webkit","ms","Moz","O"];Object.keys(eb).forEach(function(e){pre.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),eb[t]=eb[e]})});function B6(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||eb.hasOwnProperty(e)&&eb[e]?(""+t).trim():t+"px"}function V6(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=B6(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}var gre=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function CO(e,t){if(t){if(gre[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ae(62))}}function RO(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IO=null;function gI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var PO=null,cg=null,hg=null;function Qz(e){if(e=N_(e)){if(typeof PO!="function")throw Error(Ae(280));var t=e.stateNode;t&&(t=W$(t),PO(e.stateNode,e.type,t))}}function W6(e){cg?hg?hg.push(e):hg=[e]:cg=e}function G6(){if(cg){var e=cg,t=hg;if(hg=cg=null,Qz(e),t)for(e=0;e<t.length;e++)Qz(t[e])}}function H6(e,t){return e(t)}function Y6(){}var HS=!1;function X6(e,t,n){if(HS)return e(t,n);HS=!0;try{return H6(e,t,n)}finally{HS=!1,(cg!==null||hg!==null)&&(Y6(),G6())}}function Ib(e,t){var n=e.stateNode;if(n===null)return null;var i=W$(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ae(231,t,typeof n));return n}var FO=!1;if(Pu)try{var Ly={};Object.defineProperty(Ly,"passive",{get:function(){FO=!0}}),window.addEventListener("test",Ly,Ly),window.removeEventListener("test",Ly,Ly)}catch{FO=!1}function mre(e,t,n,i,a,r,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var tb=!1,_w=null,xw=!1,NO=null,yre={onError:function(e){tb=!0,_w=e}};function vre(e,t,n,i,a,r,o,s,l){tb=!1,_w=null,mre.apply(yre,arguments)}function bre(e,t,n,i,a,r,o,s,l){if(vre.apply(this,arguments),tb){if(tb){var u=_w;tb=!1,_w=null}else throw Error(Ae(198));xw||(xw=!0,NO=u)}}function Nh(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Z6(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function e5(e){if(Nh(e)!==e)throw Error(Ae(188))}function _re(e){var t=e.alternate;if(!t){if(t=Nh(e),t===null)throw Error(Ae(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var r=a.alternate;if(r===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===r.child){for(r=a.child;r;){if(r===n)return e5(a),e;if(r===i)return e5(a),t;r=r.sibling}throw Error(Ae(188))}if(n.return!==i.return)n=a,i=r;else{for(var o=!1,s=a.child;s;){if(s===n){o=!0,n=a,i=r;break}if(s===i){o=!0,i=a,n=r;break}s=s.sibling}if(!o){for(s=r.child;s;){if(s===n){o=!0,n=r,i=a;break}if(s===i){o=!0,i=r,n=a;break}s=s.sibling}if(!o)throw Error(Ae(189))}}if(n.alternate!==i)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?e:t}function J6(e){return e=_re(e),e!==null?K6(e):null}function K6(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=K6(e);if(t!==null)return t;e=e.sibling}return null}var Q6=Vr.unstable_scheduleCallback,t5=Vr.unstable_cancelCallback,xre=Vr.unstable_shouldYield,wre=Vr.unstable_requestPaint,Bn=Vr.unstable_now,kre=Vr.unstable_getCurrentPriorityLevel,mI=Vr.unstable_ImmediatePriority,e8=Vr.unstable_UserBlockingPriority,ww=Vr.unstable_NormalPriority,$re=Vr.unstable_LowPriority,t8=Vr.unstable_IdlePriority,j$=null,hl=null;function Ere(e){if(hl&&typeof hl.onCommitFiberRoot=="function")try{hl.onCommitFiberRoot(j$,e,void 0,(e.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:Are,Sre=Math.log,Tre=Math.LN2;function Are(e){return e>>>=0,e===0?32:31-(Sre(e)/Tre|0)|0}var ux=64,dx=4194304;function bv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function kw(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,a=e.suspendedLanes,r=e.pingedLanes,o=n&268435455;if(o!==0){var s=o&~a;s!==0?i=bv(s):(r&=o,r!==0&&(i=bv(r)))}else o=n&~a,o!==0?i=bv(o):r!==0&&(i=bv(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,r=t&-t,a>=r||a===16&&(r&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-hs(t),a=1<<n,i|=e[n],t&=~a;return i}function Ore(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dre(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,r=e.pendingLanes;0<r;){var o=31-hs(r),s=1<<o,l=a[o];l===-1?(!(s&n)||s&i)&&(a[o]=Ore(s,t)):l<=t&&(e.expiredLanes|=s),r&=~s}}function LO(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function n8(){var e=ux;return ux<<=1,!(ux&4194240)&&(ux=64),e}function YS(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function P_(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hs(t),e[t]=n}function Cre(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-hs(n),r=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~r}}function yI(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-hs(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var Xt=0;function i8(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var a8,vI,r8,o8,s8,MO=!1,fx=[],Zd=null,Jd=null,Kd=null,Pb=new Map,Fb=new Map,Fd=[],Rre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n5(e,t){switch(e){case"focusin":case"focusout":Zd=null;break;case"dragenter":case"dragleave":Jd=null;break;case"mouseover":case"mouseout":Kd=null;break;case"pointerover":case"pointerout":Pb.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fb.delete(t.pointerId)}}function My(e,t,n,i,a,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[a]},t!==null&&(t=N_(t),t!==null&&vI(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Ire(e,t,n,i,a){switch(t){case"focusin":return Zd=My(Zd,e,t,n,i,a),!0;case"dragenter":return Jd=My(Jd,e,t,n,i,a),!0;case"mouseover":return Kd=My(Kd,e,t,n,i,a),!0;case"pointerover":var r=a.pointerId;return Pb.set(r,My(Pb.get(r)||null,e,t,n,i,a)),!0;case"gotpointercapture":return r=a.pointerId,Fb.set(r,My(Fb.get(r)||null,e,t,n,i,a)),!0}return!1}function l8(e){var t=zc(e.target);if(t!==null){var n=Nh(t);if(n!==null){if(t=n.tag,t===13){if(t=Z6(n),t!==null){e.blockedOn=t,s8(e.priority,function(){r8(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function S1(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zO(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);IO=i,n.target.dispatchEvent(i),IO=null}else return t=N_(n),t!==null&&vI(t),e.blockedOn=n,!1;t.shift()}return!0}function i5(e,t,n){S1(e)&&n.delete(t)}function Pre(){MO=!1,Zd!==null&&S1(Zd)&&(Zd=null),Jd!==null&&S1(Jd)&&(Jd=null),Kd!==null&&S1(Kd)&&(Kd=null),Pb.forEach(i5),Fb.forEach(i5)}function zy(e,t){e.blockedOn===t&&(e.blockedOn=null,MO||(MO=!0,Vr.unstable_scheduleCallback(Vr.unstable_NormalPriority,Pre)))}function Nb(e){function t(a){return zy(a,e)}if(0<fx.length){zy(fx[0],e);for(var n=1;n<fx.length;n++){var i=fx[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Zd!==null&&zy(Zd,e),Jd!==null&&zy(Jd,e),Kd!==null&&zy(Kd,e),Pb.forEach(t),Fb.forEach(t),n=0;n<Fd.length;n++)i=Fd[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Fd.length&&(n=Fd[0],n.blockedOn===null);)l8(n),n.blockedOn===null&&Fd.shift()}var pg=Yu.ReactCurrentBatchConfig,$w=!0;function Fre(e,t,n,i){var a=Xt,r=pg.transition;pg.transition=null;try{Xt=1,bI(e,t,n,i)}finally{Xt=a,pg.transition=r}}function Nre(e,t,n,i){var a=Xt,r=pg.transition;pg.transition=null;try{Xt=4,bI(e,t,n,i)}finally{Xt=a,pg.transition=r}}function bI(e,t,n,i){if($w){var a=zO(e,t,n,i);if(a===null)aT(e,t,i,Ew,n),n5(e,i);else if(Ire(a,e,t,n,i))i.stopPropagation();else if(n5(e,i),t&4&&-1<Rre.indexOf(e)){for(;a!==null;){var r=N_(a);if(r!==null&&a8(r),r=zO(e,t,n,i),r===null&&aT(e,t,i,Ew,n),r===a)break;a=r}a!==null&&i.stopPropagation()}else aT(e,t,i,null,n)}}var Ew=null;function zO(e,t,n,i){if(Ew=null,e=gI(i),e=zc(e),e!==null)if(t=Nh(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Z6(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ew=e,null}function u8(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kre()){case mI:return 1;case e8:return 4;case ww:case $re:return 16;case t8:return 536870912;default:return 16}default:return 16}}var Md=null,_I=null,T1=null;function d8(){if(T1)return T1;var e,t=_I,n=t.length,i,a="value"in Md?Md.value:Md.textContent,r=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===a[r-i];i++);return T1=a.slice(e,1<i?1-i:void 0)}function A1(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cx(){return!0}function a5(){return!1}function Jr(e){function t(n,i,a,r,o){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(r):r[s]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?cx:a5,this.isPropagationStopped=a5,this}return Dn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cx)},persist:function(){},isPersistent:cx}),t}var Tm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xI=Jr(Tm),F_=Dn({},Tm,{view:0,detail:0}),Lre=Jr(F_),XS,ZS,qy,U$=Dn({},F_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qy&&(qy&&e.type==="mousemove"?(XS=e.screenX-qy.screenX,ZS=e.screenY-qy.screenY):ZS=XS=0,qy=e),XS)},movementY:function(e){return"movementY"in e?e.movementY:ZS}}),r5=Jr(U$),Mre=Dn({},U$,{dataTransfer:0}),zre=Jr(Mre),qre=Dn({},F_,{relatedTarget:0}),JS=Jr(qre),jre=Dn({},Tm,{animationName:0,elapsedTime:0,pseudoElement:0}),Ure=Jr(jre),Bre=Dn({},Tm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vre=Jr(Bre),Wre=Dn({},Tm,{data:0}),o5=Jr(Wre),Gre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xre(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yre[e])?!!t[e]:!1}function wI(){return Xre}var Zre=Dn({},F_,{key:function(e){if(e.key){var t=Gre[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=A1(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hre[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wI,charCode:function(e){return e.type==="keypress"?A1(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?A1(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jre=Jr(Zre),Kre=Dn({},U$,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s5=Jr(Kre),Qre=Dn({},F_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wI}),eoe=Jr(Qre),toe=Dn({},Tm,{propertyName:0,elapsedTime:0,pseudoElement:0}),noe=Jr(toe),ioe=Dn({},U$,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aoe=Jr(ioe),roe=[9,13,27,32],kI=Pu&&"CompositionEvent"in window,nb=null;Pu&&"documentMode"in document&&(nb=document.documentMode);var ooe=Pu&&"TextEvent"in window&&!nb,f8=Pu&&(!kI||nb&&8<nb&&11>=nb),l5=" ",u5=!1;function c8(e,t){switch(e){case"keyup":return roe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h8(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yp=!1;function soe(e,t){switch(e){case"compositionend":return h8(t);case"keypress":return t.which!==32?null:(u5=!0,l5);case"textInput":return e=t.data,e===l5&&u5?null:e;default:return null}}function loe(e,t){if(Yp)return e==="compositionend"||!kI&&c8(e,t)?(e=d8(),T1=_I=Md=null,Yp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return f8&&t.locale!=="ko"?null:t.data;default:return null}}var uoe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uoe[e.type]:t==="textarea"}function p8(e,t,n,i){W6(i),t=Sw(t,"onChange"),0<t.length&&(n=new xI("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ib=null,Lb=null;function doe(e){E8(e,0)}function B$(e){var t=Jp(e);if(M6(t))return e}function foe(e,t){if(e==="change")return t}var g8=!1;if(Pu){var KS;if(Pu){var QS="oninput"in document;if(!QS){var f5=document.createElement("div");f5.setAttribute("oninput","return;"),QS=typeof f5.oninput=="function"}KS=QS}else KS=!1;g8=KS&&(!document.documentMode||9<document.documentMode)}function c5(){ib&&(ib.detachEvent("onpropertychange",m8),Lb=ib=null)}function m8(e){if(e.propertyName==="value"&&B$(Lb)){var t=[];p8(t,Lb,e,gI(e)),X6(doe,t)}}function coe(e,t,n){e==="focusin"?(c5(),ib=t,Lb=n,ib.attachEvent("onpropertychange",m8)):e==="focusout"&&c5()}function hoe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return B$(Lb)}function poe(e,t){if(e==="click")return B$(t)}function goe(e,t){if(e==="input"||e==="change")return B$(t)}function moe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vs=typeof Object.is=="function"?Object.is:moe;function Mb(e,t){if(vs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!xO.call(t,a)||!vs(e[a],t[a]))return!1}return!0}function h5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function p5(e,t){var n=h5(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=h5(n)}}function y8(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?y8(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function v8(){for(var e=window,t=bw();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bw(e.document)}return t}function $I(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yoe(e){var t=v8(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&y8(n.ownerDocument.documentElement,n)){if(i!==null&&$I(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,r=Math.min(i.start,a);i=i.end===void 0?r:Math.min(i.end,a),!e.extend&&r>i&&(a=i,i=r,r=a),a=p5(n,r);var o=p5(n,i);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),r>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var voe=Pu&&"documentMode"in document&&11>=document.documentMode,Xp=null,qO=null,ab=null,jO=!1;function g5(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jO||Xp==null||Xp!==bw(i)||(i=Xp,"selectionStart"in i&&$I(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ab&&Mb(ab,i)||(ab=i,i=Sw(qO,"onSelect"),0<i.length&&(t=new xI("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Xp)))}function hx(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zp={animationend:hx("Animation","AnimationEnd"),animationiteration:hx("Animation","AnimationIteration"),animationstart:hx("Animation","AnimationStart"),transitionend:hx("Transition","TransitionEnd")},eT={},b8={};Pu&&(b8=document.createElement("div").style,"AnimationEvent"in window||(delete Zp.animationend.animation,delete Zp.animationiteration.animation,delete Zp.animationstart.animation),"TransitionEvent"in window||delete Zp.transitionend.transition);function V$(e){if(eT[e])return eT[e];if(!Zp[e])return e;var t=Zp[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in b8)return eT[e]=t[n];return e}var _8=V$("animationend"),x8=V$("animationiteration"),w8=V$("animationstart"),k8=V$("transitionend"),$8=new Map,m5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Df(e,t){$8.set(e,t),Fh(t,[e])}for(var tT=0;tT<m5.length;tT++){var nT=m5[tT],boe=nT.toLowerCase(),_oe=nT[0].toUpperCase()+nT.slice(1);Df(boe,"on"+_oe)}Df(_8,"onAnimationEnd");Df(x8,"onAnimationIteration");Df(w8,"onAnimationStart");Df("dblclick","onDoubleClick");Df("focusin","onFocus");Df("focusout","onBlur");Df(k8,"onTransitionEnd");Dg("onMouseEnter",["mouseout","mouseover"]);Dg("onMouseLeave",["mouseout","mouseover"]);Dg("onPointerEnter",["pointerout","pointerover"]);Dg("onPointerLeave",["pointerout","pointerover"]);Fh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _v="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xoe=new Set("cancel close invalid load scroll toggle".split(" ").concat(_v));function y5(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,bre(i,t,void 0,e),e.currentTarget=null}function E8(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var s=i[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==r&&a.isPropagationStopped())break e;y5(a,s,u),r=l}else for(o=0;o<i.length;o++){if(s=i[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==r&&a.isPropagationStopped())break e;y5(a,s,u),r=l}}}if(xw)throw e=NO,xw=!1,NO=null,e}function dn(e,t){var n=t[GO];n===void 0&&(n=t[GO]=new Set);var i=e+"__bubble";n.has(i)||(S8(t,e,2,!1),n.add(i))}function iT(e,t,n){var i=0;t&&(i|=4),S8(n,e,i,t)}var px="_reactListening"+Math.random().toString(36).slice(2);function zb(e){if(!e[px]){e[px]=!0,I6.forEach(function(n){n!=="selectionchange"&&(xoe.has(n)||iT(n,!1,e),iT(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[px]||(t[px]=!0,iT("selectionchange",!1,t))}}function S8(e,t,n,i){switch(u8(t)){case 1:var a=Fre;break;case 4:a=Nre;break;default:a=bI}n=a.bind(null,t,n,e),a=void 0,!FO||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function aT(e,t,n,i,a){var r=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var s=i.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=zc(s),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}s=s.parentNode}}i=i.return}X6(function(){var u=r,d=gI(n),c=[];e:{var g=$8.get(e);if(g!==void 0){var v=xI,b=e;switch(e){case"keypress":if(A1(n)===0)break e;case"keydown":case"keyup":v=Jre;break;case"focusin":b="focus",v=JS;break;case"focusout":b="blur",v=JS;break;case"beforeblur":case"afterblur":v=JS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=r5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=zre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=eoe;break;case _8:case x8:case w8:v=Ure;break;case k8:v=noe;break;case"scroll":v=Lre;break;case"wheel":v=aoe;break;case"copy":case"cut":case"paste":v=Vre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=s5}var x=(t&4)!==0,k=!x&&e==="scroll",w=x?g!==null?g+"Capture":null:g;x=[];for(var E=u,T;E!==null;){T=E;var O=T.stateNode;if(T.tag===5&&O!==null&&(T=O,w!==null&&(O=Ib(E,w),O!=null&&x.push(qb(E,O,T)))),k)break;E=E.return}0<x.length&&(g=new v(g,b,null,n,d),c.push({event:g,listeners:x}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==IO&&(b=n.relatedTarget||n.fromElement)&&(zc(b)||b[Fu]))break e;if((v||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=u,b=b?zc(b):null,b!==null&&(k=Nh(b),b!==k||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=u),v!==b)){if(x=r5,O="onMouseLeave",w="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(x=s5,O="onPointerLeave",w="onPointerEnter",E="pointer"),k=v==null?g:Jp(v),T=b==null?g:Jp(b),g=new x(O,E+"leave",v,n,d),g.target=k,g.relatedTarget=T,O=null,zc(d)===u&&(x=new x(w,E+"enter",b,n,d),x.target=T,x.relatedTarget=k,O=x),k=O,v&&b)t:{for(x=v,w=b,E=0,T=x;T;T=Ep(T))E++;for(T=0,O=w;O;O=Ep(O))T++;for(;0<E-T;)x=Ep(x),E--;for(;0<T-E;)w=Ep(w),T--;for(;E--;){if(x===w||w!==null&&x===w.alternate)break t;x=Ep(x),w=Ep(w)}x=null}else x=null;v!==null&&v5(c,g,v,x,!1),b!==null&&k!==null&&v5(c,k,b,x,!0)}}e:{if(g=u?Jp(u):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var D=foe;else if(d5(g))if(g8)D=goe;else{D=hoe;var P=coe}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=poe);if(D&&(D=D(e,u))){p8(c,D,n,d);break e}P&&P(e,g,u),e==="focusout"&&(P=g._wrapperState)&&P.controlled&&g.type==="number"&&AO(g,"number",g.value)}switch(P=u?Jp(u):window,e){case"focusin":(d5(P)||P.contentEditable==="true")&&(Xp=P,qO=u,ab=null);break;case"focusout":ab=qO=Xp=null;break;case"mousedown":jO=!0;break;case"contextmenu":case"mouseup":case"dragend":jO=!1,g5(c,n,d);break;case"selectionchange":if(voe)break;case"keydown":case"keyup":g5(c,n,d)}var R;if(kI)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Yp?c8(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(f8&&n.locale!=="ko"&&(Yp||M!=="onCompositionStart"?M==="onCompositionEnd"&&Yp&&(R=d8()):(Md=d,_I="value"in Md?Md.value:Md.textContent,Yp=!0)),P=Sw(u,M),0<P.length&&(M=new o5(M,e,null,n,d),c.push({event:M,listeners:P}),R?M.data=R:(R=h8(n),R!==null&&(M.data=R)))),(R=ooe?soe(e,n):loe(e,n))&&(u=Sw(u,"onBeforeInput"),0<u.length&&(d=new o5("onBeforeInput","beforeinput",null,n,d),c.push({event:d,listeners:u}),d.data=R))}E8(c,t)})}function qb(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Sw(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,r=a.stateNode;a.tag===5&&r!==null&&(a=r,r=Ib(e,n),r!=null&&i.unshift(qb(e,r,a)),r=Ib(e,t),r!=null&&i.push(qb(e,r,a))),e=e.return}return i}function Ep(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function v5(e,t,n,i,a){for(var r=t._reactName,o=[];n!==null&&n!==i;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===i)break;s.tag===5&&u!==null&&(s=u,a?(l=Ib(n,r),l!=null&&o.unshift(qb(n,l,s))):a||(l=Ib(n,r),l!=null&&o.push(qb(n,l,s)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var woe=/\r\n?/g,koe=/\u0000|\uFFFD/g;function b5(e){return(typeof e=="string"?e:""+e).replace(woe,`
`).replace(koe,"")}function gx(e,t,n){if(t=b5(t),b5(e)!==t&&n)throw Error(Ae(425))}function Tw(){}var UO=null,BO=null;function VO(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var WO=typeof setTimeout=="function"?setTimeout:void 0,$oe=typeof clearTimeout=="function"?clearTimeout:void 0,_5=typeof Promise=="function"?Promise:void 0,Eoe=typeof queueMicrotask=="function"?queueMicrotask:typeof _5<"u"?function(e){return _5.resolve(null).then(e).catch(Soe)}:WO;function Soe(e){setTimeout(function(){throw e})}function rT(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){e.removeChild(a),Nb(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);Nb(t)}function Qd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function x5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Am=Math.random().toString(36).slice(2),nl="__reactFiber$"+Am,jb="__reactProps$"+Am,Fu="__reactContainer$"+Am,GO="__reactEvents$"+Am,Toe="__reactListeners$"+Am,Aoe="__reactHandles$"+Am;function zc(e){var t=e[nl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fu]||n[nl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=x5(e);e!==null;){if(n=e[nl])return n;e=x5(e)}return t}e=n,n=e.parentNode}return null}function N_(e){return e=e[nl]||e[Fu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ae(33))}function W$(e){return e[jb]||null}var HO=[],Kp=-1;function Cf(e){return{current:e}}function gn(e){0>Kp||(e.current=HO[Kp],HO[Kp]=null,Kp--)}function on(e,t){Kp++,HO[Kp]=e.current,e.current=t}var pf={},va=Cf(pf),pr=Cf(!1),ih=pf;function Cg(e,t){var n=e.type.contextTypes;if(!n)return pf;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},r;for(r in n)a[r]=t[r];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function gr(e){return e=e.childContextTypes,e!=null}function Aw(){gn(pr),gn(va)}function w5(e,t,n){if(va.current!==pf)throw Error(Ae(168));on(va,t),on(pr,n)}function T8(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(Ae(108,cre(e)||"Unknown",a));return Dn({},n,i)}function Ow(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pf,ih=va.current,on(va,e),on(pr,pr.current),!0}function k5(e,t,n){var i=e.stateNode;if(!i)throw Error(Ae(169));n?(e=T8(e,t,ih),i.__reactInternalMemoizedMergedChildContext=e,gn(pr),gn(va),on(va,e)):gn(pr),on(pr,n)}var lu=null,G$=!1,oT=!1;function A8(e){lu===null?lu=[e]:lu.push(e)}function Ooe(e){G$=!0,A8(e)}function Rf(){if(!oT&&lu!==null){oT=!0;var e=0,t=Xt;try{var n=lu;for(Xt=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}lu=null,G$=!1}catch(a){throw lu!==null&&(lu=lu.slice(e+1)),Q6(mI,Rf),a}finally{Xt=t,oT=!1}}return null}var Qp=[],eg=0,Dw=null,Cw=0,po=[],go=0,ah=null,pu=1,gu="";function Sc(e,t){Qp[eg++]=Cw,Qp[eg++]=Dw,Dw=e,Cw=t}function O8(e,t,n){po[go++]=pu,po[go++]=gu,po[go++]=ah,ah=e;var i=pu;e=gu;var a=32-hs(i)-1;i&=~(1<<a),n+=1;var r=32-hs(t)+a;if(30<r){var o=a-a%5;r=(i&(1<<o)-1).toString(32),i>>=o,a-=o,pu=1<<32-hs(t)+a|n<<a|i,gu=r+e}else pu=1<<r|n<<a|i,gu=e}function EI(e){e.return!==null&&(Sc(e,1),O8(e,1,0))}function SI(e){for(;e===Dw;)Dw=Qp[--eg],Qp[eg]=null,Cw=Qp[--eg],Qp[eg]=null;for(;e===ah;)ah=po[--go],po[go]=null,gu=po[--go],po[go]=null,pu=po[--go],po[go]=null}var qr=null,Nr=null,vn=!1,is=null;function D8(e,t){var n=bo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function $5(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qr=e,Nr=Qd(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qr=e,Nr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ah!==null?{id:pu,overflow:gu}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qr=e,Nr=null,!0):!1;default:return!1}}function YO(e){return(e.mode&1)!==0&&(e.flags&128)===0}function XO(e){if(vn){var t=Nr;if(t){var n=t;if(!$5(e,t)){if(YO(e))throw Error(Ae(418));t=Qd(n.nextSibling);var i=qr;t&&$5(e,t)?D8(i,n):(e.flags=e.flags&-4097|2,vn=!1,qr=e)}}else{if(YO(e))throw Error(Ae(418));e.flags=e.flags&-4097|2,vn=!1,qr=e}}}function E5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qr=e}function mx(e){if(e!==qr)return!1;if(!vn)return E5(e),vn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!VO(e.type,e.memoizedProps)),t&&(t=Nr)){if(YO(e))throw C8(),Error(Ae(418));for(;t;)D8(e,t),t=Qd(t.nextSibling)}if(E5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Nr=Qd(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Nr=null}}else Nr=qr?Qd(e.stateNode.nextSibling):null;return!0}function C8(){for(var e=Nr;e;)e=Qd(e.nextSibling)}function Rg(){Nr=qr=null,vn=!1}function TI(e){is===null?is=[e]:is.push(e)}var Doe=Yu.ReactCurrentBatchConfig;function jy(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var i=n.stateNode}if(!i)throw Error(Ae(147,e));var a=i,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var s=a.refs;o===null?delete s[r]:s[r]=o},t._stringRef=r,t)}if(typeof e!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,e))}return e}function yx(e,t){throw e=Object.prototype.toString.call(t),Error(Ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function S5(e){var t=e._init;return t(e._payload)}function R8(e){function t(w,E){if(e){var T=w.deletions;T===null?(w.deletions=[E],w.flags|=16):T.push(E)}}function n(w,E){if(!e)return null;for(;E!==null;)t(w,E),E=E.sibling;return null}function i(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function a(w,E){return w=af(w,E),w.index=0,w.sibling=null,w}function r(w,E,T){return w.index=T,e?(T=w.alternate,T!==null?(T=T.index,T<E?(w.flags|=2,E):T):(w.flags|=2,E)):(w.flags|=1048576,E)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function s(w,E,T,O){return E===null||E.tag!==6?(E=hT(T,w.mode,O),E.return=w,E):(E=a(E,T),E.return=w,E)}function l(w,E,T,O){var D=T.type;return D===Hp?d(w,E,T.props.children,O,T.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Td&&S5(D)===E.type)?(O=a(E,T.props),O.ref=jy(w,E,T),O.return=w,O):(O=F1(T.type,T.key,T.props,null,w.mode,O),O.ref=jy(w,E,T),O.return=w,O)}function u(w,E,T,O){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=pT(T,w.mode,O),E.return=w,E):(E=a(E,T.children||[]),E.return=w,E)}function d(w,E,T,O,D){return E===null||E.tag!==7?(E=Hc(T,w.mode,O,D),E.return=w,E):(E=a(E,T),E.return=w,E)}function c(w,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=hT(""+E,w.mode,T),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ox:return T=F1(E.type,E.key,E.props,null,w.mode,T),T.ref=jy(w,null,E),T.return=w,T;case Gp:return E=pT(E,w.mode,T),E.return=w,E;case Td:var O=E._init;return c(w,O(E._payload),T)}if(vv(E)||Ny(E))return E=Hc(E,w.mode,T,null),E.return=w,E;yx(w,E)}return null}function g(w,E,T,O){var D=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return D!==null?null:s(w,E,""+T,O);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ox:return T.key===D?l(w,E,T,O):null;case Gp:return T.key===D?u(w,E,T,O):null;case Td:return D=T._init,g(w,E,D(T._payload),O)}if(vv(T)||Ny(T))return D!==null?null:d(w,E,T,O,null);yx(w,T)}return null}function v(w,E,T,O,D){if(typeof O=="string"&&O!==""||typeof O=="number")return w=w.get(T)||null,s(E,w,""+O,D);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ox:return w=w.get(O.key===null?T:O.key)||null,l(E,w,O,D);case Gp:return w=w.get(O.key===null?T:O.key)||null,u(E,w,O,D);case Td:var P=O._init;return v(w,E,T,P(O._payload),D)}if(vv(O)||Ny(O))return w=w.get(T)||null,d(E,w,O,D,null);yx(E,O)}return null}function b(w,E,T,O){for(var D=null,P=null,R=E,M=E=0,q=null;R!==null&&M<T.length;M++){R.index>M?(q=R,R=null):q=R.sibling;var H=g(w,R,T[M],O);if(H===null){R===null&&(R=q);break}e&&R&&H.alternate===null&&t(w,R),E=r(H,E,M),P===null?D=H:P.sibling=H,P=H,R=q}if(M===T.length)return n(w,R),vn&&Sc(w,M),D;if(R===null){for(;M<T.length;M++)R=c(w,T[M],O),R!==null&&(E=r(R,E,M),P===null?D=R:P.sibling=R,P=R);return vn&&Sc(w,M),D}for(R=i(w,R);M<T.length;M++)q=v(R,w,M,T[M],O),q!==null&&(e&&q.alternate!==null&&R.delete(q.key===null?M:q.key),E=r(q,E,M),P===null?D=q:P.sibling=q,P=q);return e&&R.forEach(function(z){return t(w,z)}),vn&&Sc(w,M),D}function x(w,E,T,O){var D=Ny(T);if(typeof D!="function")throw Error(Ae(150));if(T=D.call(T),T==null)throw Error(Ae(151));for(var P=D=null,R=E,M=E=0,q=null,H=T.next();R!==null&&!H.done;M++,H=T.next()){R.index>M?(q=R,R=null):q=R.sibling;var z=g(w,R,H.value,O);if(z===null){R===null&&(R=q);break}e&&R&&z.alternate===null&&t(w,R),E=r(z,E,M),P===null?D=z:P.sibling=z,P=z,R=q}if(H.done)return n(w,R),vn&&Sc(w,M),D;if(R===null){for(;!H.done;M++,H=T.next())H=c(w,H.value,O),H!==null&&(E=r(H,E,M),P===null?D=H:P.sibling=H,P=H);return vn&&Sc(w,M),D}for(R=i(w,R);!H.done;M++,H=T.next())H=v(R,w,M,H.value,O),H!==null&&(e&&H.alternate!==null&&R.delete(H.key===null?M:H.key),E=r(H,E,M),P===null?D=H:P.sibling=H,P=H);return e&&R.forEach(function(Q){return t(w,Q)}),vn&&Sc(w,M),D}function k(w,E,T,O){if(typeof T=="object"&&T!==null&&T.type===Hp&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ox:e:{for(var D=T.key,P=E;P!==null;){if(P.key===D){if(D=T.type,D===Hp){if(P.tag===7){n(w,P.sibling),E=a(P,T.props.children),E.return=w,w=E;break e}}else if(P.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Td&&S5(D)===P.type){n(w,P.sibling),E=a(P,T.props),E.ref=jy(w,P,T),E.return=w,w=E;break e}n(w,P);break}else t(w,P);P=P.sibling}T.type===Hp?(E=Hc(T.props.children,w.mode,O,T.key),E.return=w,w=E):(O=F1(T.type,T.key,T.props,null,w.mode,O),O.ref=jy(w,E,T),O.return=w,w=O)}return o(w);case Gp:e:{for(P=T.key;E!==null;){if(E.key===P)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(w,E.sibling),E=a(E,T.children||[]),E.return=w,w=E;break e}else{n(w,E);break}else t(w,E);E=E.sibling}E=pT(T,w.mode,O),E.return=w,w=E}return o(w);case Td:return P=T._init,k(w,E,P(T._payload),O)}if(vv(T))return b(w,E,T,O);if(Ny(T))return x(w,E,T,O);yx(w,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(w,E.sibling),E=a(E,T),E.return=w,w=E):(n(w,E),E=hT(T,w.mode,O),E.return=w,w=E),o(w)):n(w,E)}return k}var Ig=R8(!0),I8=R8(!1),Rw=Cf(null),Iw=null,tg=null,AI=null;function OI(){AI=tg=Iw=null}function DI(e){var t=Rw.current;gn(Rw),e._currentValue=t}function ZO(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function gg(e,t){Iw=e,AI=tg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fr=!0),e.firstContext=null)}function Oo(e){var t=e._currentValue;if(AI!==e)if(e={context:e,memoizedValue:t,next:null},tg===null){if(Iw===null)throw Error(Ae(308));tg=e,Iw.dependencies={lanes:0,firstContext:e}}else tg=tg.next=e;return t}var qc=null;function CI(e){qc===null?qc=[e]:qc.push(e)}function P8(e,t,n,i){var a=t.interleaved;return a===null?(n.next=n,CI(t)):(n.next=a.next,a.next=n),t.interleaved=n,Nu(e,i)}function Nu(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ad=!1;function RI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function F8(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ef(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ct&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Nu(e,n)}return a=i.interleaved,a===null?(t.next=t,CI(i)):(t.next=a.next,a.next=t),i.interleaved=t,Nu(e,n)}function O1(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,yI(e,n)}}function T5(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?a=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?a=r=t:r=r.next=t}else a=r=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pw(e,t,n,i){var a=e.updateQueue;Ad=!1;var r=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?r=u:o.next=u,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==o&&(s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=l))}if(r!==null){var c=a.baseState;o=0,d=u=l=null,s=r;do{var g=s.lane,v=s.eventTime;if((i&g)===g){d!==null&&(d=d.next={eventTime:v,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var b=e,x=s;switch(g=t,v=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){c=b.call(v,c,g);break e}c=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,g=typeof b=="function"?b.call(v,c,g):b,g==null)break e;c=Dn({},c,g);break e;case 2:Ad=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,g=a.effects,g===null?a.effects=[s]:g.push(s))}else v={eventTime:v,lane:g,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(u=d=v,l=c):d=d.next=v,o|=g;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;g=s,s=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);if(d===null&&(l=c),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else r===null&&(a.shared.lanes=0);oh|=o,e.lanes=o,e.memoizedState=c}}function A5(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(Ae(191,a));a.call(i)}}}var L_={},pl=Cf(L_),Ub=Cf(L_),Bb=Cf(L_);function jc(e){if(e===L_)throw Error(Ae(174));return e}function II(e,t){switch(on(Bb,t),on(Ub,e),on(pl,L_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:DO(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=DO(t,e)}gn(pl),on(pl,t)}function Pg(){gn(pl),gn(Ub),gn(Bb)}function N8(e){jc(Bb.current);var t=jc(pl.current),n=DO(t,e.type);t!==n&&(on(Ub,e),on(pl,n))}function PI(e){Ub.current===e&&(gn(pl),gn(Ub))}var $n=Cf(0);function Fw(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sT=[];function FI(){for(var e=0;e<sT.length;e++)sT[e]._workInProgressVersionPrimary=null;sT.length=0}var D1=Yu.ReactCurrentDispatcher,lT=Yu.ReactCurrentBatchConfig,rh=0,On=null,ei=null,mi=null,Nw=!1,rb=!1,Vb=0,Coe=0;function Ji(){throw Error(Ae(321))}function NI(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vs(e[n],t[n]))return!1;return!0}function LI(e,t,n,i,a,r){if(rh=r,On=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D1.current=e===null||e.memoizedState===null?Foe:Noe,e=n(i,a),rb){r=0;do{if(rb=!1,Vb=0,25<=r)throw Error(Ae(301));r+=1,mi=ei=null,t.updateQueue=null,D1.current=Loe,e=n(i,a)}while(rb)}if(D1.current=Lw,t=ei!==null&&ei.next!==null,rh=0,mi=ei=On=null,Nw=!1,t)throw Error(Ae(300));return e}function MI(){var e=Vb!==0;return Vb=0,e}function Js(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?On.memoizedState=mi=e:mi=mi.next=e,mi}function Do(){if(ei===null){var e=On.alternate;e=e!==null?e.memoizedState:null}else e=ei.next;var t=mi===null?On.memoizedState:mi.next;if(t!==null)mi=t,ei=e;else{if(e===null)throw Error(Ae(310));ei=e,e={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},mi===null?On.memoizedState=mi=e:mi=mi.next=e}return mi}function Wb(e,t){return typeof t=="function"?t(e):t}function uT(e){var t=Do(),n=t.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=e;var i=ei,a=i.baseQueue,r=n.pending;if(r!==null){if(a!==null){var o=a.next;a.next=r.next,r.next=o}i.baseQueue=a=r,n.pending=null}if(a!==null){r=a.next,i=i.baseState;var s=o=null,l=null,u=r;do{var d=u.lane;if((rh&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=c,o=i):l=l.next=c,On.lanes|=d,oh|=d}u=u.next}while(u!==null&&u!==r);l===null?o=i:l.next=s,vs(i,t.memoizedState)||(fr=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,n.lastRenderedState=i}if(e=n.interleaved,e!==null){a=e;do r=a.lane,On.lanes|=r,oh|=r,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function dT(e){var t=Do(),n=t.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,r=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do r=e(r,o.action),o=o.next;while(o!==a);vs(r,t.memoizedState)||(fr=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function L8(){}function M8(e,t){var n=On,i=Do(),a=t(),r=!vs(i.memoizedState,a);if(r&&(i.memoizedState=a,fr=!0),i=i.queue,zI(j8.bind(null,n,i,e),[e]),i.getSnapshot!==t||r||mi!==null&&mi.memoizedState.tag&1){if(n.flags|=2048,Gb(9,q8.bind(null,n,i,a,t),void 0,null),Ei===null)throw Error(Ae(349));rh&30||z8(n,t,a)}return a}function z8(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=On.updateQueue,t===null?(t={lastEffect:null,stores:null},On.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function q8(e,t,n,i){t.value=n,t.getSnapshot=i,U8(t)&&B8(e)}function j8(e,t,n){return n(function(){U8(t)&&B8(e)})}function U8(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vs(e,n)}catch{return!0}}function B8(e){var t=Nu(e,1);t!==null&&ps(t,e,1,-1)}function O5(e){var t=Js();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wb,lastRenderedState:e},t.queue=e,e=e.dispatch=Poe.bind(null,On,e),[t.memoizedState,e]}function Gb(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=On.updateQueue,t===null?(t={lastEffect:null,stores:null},On.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function V8(){return Do().memoizedState}function C1(e,t,n,i){var a=Js();On.flags|=e,a.memoizedState=Gb(1|t,n,void 0,i===void 0?null:i)}function H$(e,t,n,i){var a=Do();i=i===void 0?null:i;var r=void 0;if(ei!==null){var o=ei.memoizedState;if(r=o.destroy,i!==null&&NI(i,o.deps)){a.memoizedState=Gb(t,n,r,i);return}}On.flags|=e,a.memoizedState=Gb(1|t,n,r,i)}function D5(e,t){return C1(8390656,8,e,t)}function zI(e,t){return H$(2048,8,e,t)}function W8(e,t){return H$(4,2,e,t)}function G8(e,t){return H$(4,4,e,t)}function H8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Y8(e,t,n){return n=n!=null?n.concat([e]):null,H$(4,4,H8.bind(null,t,e),n)}function qI(){}function X8(e,t){var n=Do();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&NI(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Z8(e,t){var n=Do();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&NI(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function J8(e,t,n){return rh&21?(vs(n,t)||(n=n8(),On.lanes|=n,oh|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fr=!0),e.memoizedState=n)}function Roe(e,t){var n=Xt;Xt=n!==0&&4>n?n:4,e(!0);var i=lT.transition;lT.transition={};try{e(!1),t()}finally{Xt=n,lT.transition=i}}function K8(){return Do().memoizedState}function Ioe(e,t,n){var i=nf(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Q8(e))eV(t,n);else if(n=P8(e,t,n,i),n!==null){var a=ja();ps(n,e,i,a),tV(n,t,i)}}function Poe(e,t,n){var i=nf(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Q8(e))eV(t,a);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,s=r(o,n);if(a.hasEagerState=!0,a.eagerState=s,vs(s,o)){var l=t.interleaved;l===null?(a.next=a,CI(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}n=P8(e,t,a,i),n!==null&&(a=ja(),ps(n,e,i,a),tV(n,t,i))}}function Q8(e){var t=e.alternate;return e===On||t!==null&&t===On}function eV(e,t){rb=Nw=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tV(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,yI(e,n)}}var Lw={readContext:Oo,useCallback:Ji,useContext:Ji,useEffect:Ji,useImperativeHandle:Ji,useInsertionEffect:Ji,useLayoutEffect:Ji,useMemo:Ji,useReducer:Ji,useRef:Ji,useState:Ji,useDebugValue:Ji,useDeferredValue:Ji,useTransition:Ji,useMutableSource:Ji,useSyncExternalStore:Ji,useId:Ji,unstable_isNewReconciler:!1},Foe={readContext:Oo,useCallback:function(e,t){return Js().memoizedState=[e,t===void 0?null:t],e},useContext:Oo,useEffect:D5,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,C1(4194308,4,H8.bind(null,t,e),n)},useLayoutEffect:function(e,t){return C1(4194308,4,e,t)},useInsertionEffect:function(e,t){return C1(4,2,e,t)},useMemo:function(e,t){var n=Js();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Js();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ioe.bind(null,On,e),[i.memoizedState,e]},useRef:function(e){var t=Js();return e={current:e},t.memoizedState=e},useState:O5,useDebugValue:qI,useDeferredValue:function(e){return Js().memoizedState=e},useTransition:function(){var e=O5(!1),t=e[0];return e=Roe.bind(null,e[1]),Js().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=On,a=Js();if(vn){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=t(),Ei===null)throw Error(Ae(349));rh&30||z8(i,t,n)}a.memoizedState=n;var r={value:n,getSnapshot:t};return a.queue=r,D5(j8.bind(null,i,r,e),[e]),i.flags|=2048,Gb(9,q8.bind(null,i,r,n,t),void 0,null),n},useId:function(){var e=Js(),t=Ei.identifierPrefix;if(vn){var n=gu,i=pu;n=(i&~(1<<32-hs(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Vb++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Coe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Noe={readContext:Oo,useCallback:X8,useContext:Oo,useEffect:zI,useImperativeHandle:Y8,useInsertionEffect:W8,useLayoutEffect:G8,useMemo:Z8,useReducer:uT,useRef:V8,useState:function(){return uT(Wb)},useDebugValue:qI,useDeferredValue:function(e){var t=Do();return J8(t,ei.memoizedState,e)},useTransition:function(){var e=uT(Wb)[0],t=Do().memoizedState;return[e,t]},useMutableSource:L8,useSyncExternalStore:M8,useId:K8,unstable_isNewReconciler:!1},Loe={readContext:Oo,useCallback:X8,useContext:Oo,useEffect:zI,useImperativeHandle:Y8,useInsertionEffect:W8,useLayoutEffect:G8,useMemo:Z8,useReducer:dT,useRef:V8,useState:function(){return dT(Wb)},useDebugValue:qI,useDeferredValue:function(e){var t=Do();return ei===null?t.memoizedState=e:J8(t,ei.memoizedState,e)},useTransition:function(){var e=dT(Wb)[0],t=Do().memoizedState;return[e,t]},useMutableSource:L8,useSyncExternalStore:M8,useId:K8,unstable_isNewReconciler:!1};function Qo(e,t){if(e&&e.defaultProps){t=Dn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function JO(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Dn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Y$={isMounted:function(e){return(e=e._reactInternals)?Nh(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ja(),a=nf(e),r=wu(i,a);r.payload=t,n!=null&&(r.callback=n),t=ef(e,r,a),t!==null&&(ps(t,e,a,i),O1(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ja(),a=nf(e),r=wu(i,a);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=ef(e,r,a),t!==null&&(ps(t,e,a,i),O1(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ja(),i=nf(e),a=wu(n,i);a.tag=2,t!=null&&(a.callback=t),t=ef(e,a,i),t!==null&&(ps(t,e,i,n),O1(t,e,i))}};function C5(e,t,n,i,a,r,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!Mb(n,i)||!Mb(a,r):!0}function nV(e,t,n){var i=!1,a=pf,r=t.contextType;return typeof r=="object"&&r!==null?r=Oo(r):(a=gr(t)?ih:va.current,i=t.contextTypes,r=(i=i!=null)?Cg(e,a):pf),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Y$,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=r),t}function R5(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Y$.enqueueReplaceState(t,t.state,null)}function KO(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},RI(e);var r=t.contextType;typeof r=="object"&&r!==null?a.context=Oo(r):(r=gr(t)?ih:va.current,a.context=Cg(e,r)),a.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(JO(e,t,r,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Y$.enqueueReplaceState(a,a.state,null),Pw(e,n,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Fg(e,t){try{var n="",i=t;do n+=fre(i),i=i.return;while(i);var a=n}catch(r){a=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:a,digest:null}}function fT(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function QO(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Moe=typeof WeakMap=="function"?WeakMap:Map;function iV(e,t,n){n=wu(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){zw||(zw=!0,uD=i),QO(e,t)},n}function aV(e,t,n){n=wu(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){QO(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){QO(e,t),typeof i!="function"&&(tf===null?tf=new Set([this]):tf.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function I5(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Moe;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=Koe.bind(null,e,t,n),t.then(e,e))}function P5(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function F5(e,t,n,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wu(-1,1),t.tag=2,ef(n,t,1))),n.lanes|=1),e)}var zoe=Yu.ReactCurrentOwner,fr=!1;function Ra(e,t,n,i){t.child=e===null?I8(t,null,n,i):Ig(t,e.child,n,i)}function N5(e,t,n,i,a){n=n.render;var r=t.ref;return gg(t,a),i=LI(e,t,n,i,r,a),n=MI(),e!==null&&!fr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Lu(e,t,a)):(vn&&n&&EI(t),t.flags|=1,Ra(e,t,i,a),t.child)}function L5(e,t,n,i,a){if(e===null){var r=n.type;return typeof r=="function"&&!YI(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,rV(e,t,r,i,a)):(e=F1(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&a)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:Mb,n(o,i)&&e.ref===t.ref)return Lu(e,t,a)}return t.flags|=1,e=af(r,i),e.ref=t.ref,e.return=t,t.child=e}function rV(e,t,n,i,a){if(e!==null){var r=e.memoizedProps;if(Mb(r,i)&&e.ref===t.ref)if(fr=!1,t.pendingProps=i=r,(e.lanes&a)!==0)e.flags&131072&&(fr=!0);else return t.lanes=e.lanes,Lu(e,t,a)}return eD(e,t,n,i,a)}function oV(e,t,n){var i=t.pendingProps,a=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(ig,Rr),Rr|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,on(ig,Rr),Rr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,on(ig,Rr),Rr|=i}else r!==null?(i=r.baseLanes|n,t.memoizedState=null):i=n,on(ig,Rr),Rr|=i;return Ra(e,t,a,n),t.child}function sV(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function eD(e,t,n,i,a){var r=gr(n)?ih:va.current;return r=Cg(t,r),gg(t,a),n=LI(e,t,n,i,r,a),i=MI(),e!==null&&!fr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Lu(e,t,a)):(vn&&i&&EI(t),t.flags|=1,Ra(e,t,n,a),t.child)}function M5(e,t,n,i,a){if(gr(n)){var r=!0;Ow(t)}else r=!1;if(gg(t,a),t.stateNode===null)R1(e,t),nV(t,n,i),KO(t,n,i,a),i=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Oo(u):(u=gr(n)?ih:va.current,u=Cg(t,u));var d=n.getDerivedStateFromProps,c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==i||l!==u)&&R5(t,o,i,u),Ad=!1;var g=t.memoizedState;o.state=g,Pw(t,i,o,a),l=t.memoizedState,s!==i||g!==l||pr.current||Ad?(typeof d=="function"&&(JO(t,n,d,i),l=t.memoizedState),(s=Ad||C5(t,n,s,i,g,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=u,i=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,F8(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Qo(t.type,s),o.props=u,c=t.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Oo(l):(l=gr(n)?ih:va.current,l=Cg(t,l));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==c||g!==l)&&R5(t,o,i,l),Ad=!1,g=t.memoizedState,o.state=g,Pw(t,i,o,a);var b=t.memoizedState;s!==c||g!==b||pr.current||Ad?(typeof v=="function"&&(JO(t,n,v,i),b=t.memoizedState),(u=Ad||C5(t,n,u,i,g,b,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,b,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=b),o.props=i,o.state=b,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),i=!1)}return tD(e,t,n,i,r,a)}function tD(e,t,n,i,a,r){sV(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return a&&k5(t,n,!1),Lu(e,t,r);i=t.stateNode,zoe.current=t;var s=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=Ig(t,e.child,null,r),t.child=Ig(t,null,s,r)):Ra(e,t,s,r),t.memoizedState=i.state,a&&k5(t,n,!0),t.child}function lV(e){var t=e.stateNode;t.pendingContext?w5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&w5(e,t.context,!1),II(e,t.containerInfo)}function z5(e,t,n,i,a){return Rg(),TI(a),t.flags|=256,Ra(e,t,n,i),t.child}var nD={dehydrated:null,treeContext:null,retryLane:0};function iD(e){return{baseLanes:e,cachePool:null,transitions:null}}function uV(e,t,n){var i=t.pendingProps,a=$n.current,r=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),on($n,a&1),e===null)return XO(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=J$(o,i,0,null),e=Hc(e,i,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=iD(n),t.memoizedState=nD,e):jI(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return qoe(e,t,o,i,s,a,n);if(r){r=i.fallback,o=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=af(a,l),i.subtreeFlags=a.subtreeFlags&14680064),s!==null?r=af(s,r):(r=Hc(r,o,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=e.child.memoizedState,o=o===null?iD(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=e.childLanes&~n,t.memoizedState=nD,i}return r=e.child,e=r.sibling,i=af(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function jI(e,t){return t=J$({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vx(e,t,n,i){return i!==null&&TI(i),Ig(t,e.child,null,n),e=jI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qoe(e,t,n,i,a,r,o){if(n)return t.flags&256?(t.flags&=-257,i=fT(Error(Ae(422))),vx(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=i.fallback,a=t.mode,i=J$({mode:"visible",children:i.children},a,0,null),r=Hc(r,a,o,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&Ig(t,e.child,null,o),t.child.memoizedState=iD(o),t.memoizedState=nD,r);if(!(t.mode&1))return vx(e,t,o,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var s=i.dgst;return i=s,r=Error(Ae(419)),i=fT(r,i,void 0),vx(e,t,o,i)}if(s=(o&e.childLanes)!==0,fr||s){if(i=Ei,i!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|o)?0:a,a!==0&&a!==r.retryLane&&(r.retryLane=a,Nu(e,a),ps(i,e,a,-1))}return HI(),i=fT(Error(Ae(421))),vx(e,t,o,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Qoe.bind(null,e),a._reactRetry=t,null):(e=r.treeContext,Nr=Qd(a.nextSibling),qr=t,vn=!0,is=null,e!==null&&(po[go++]=pu,po[go++]=gu,po[go++]=ah,pu=e.id,gu=e.overflow,ah=t),t=jI(t,i.children),t.flags|=4096,t)}function q5(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),ZO(e.return,t,n)}function cT(e,t,n,i,a){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=a)}function dV(e,t,n){var i=t.pendingProps,a=i.revealOrder,r=i.tail;if(Ra(e,t,i.children,n),i=$n.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&q5(e,n,t);else if(e.tag===19)q5(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(on($n,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Fw(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),cT(t,!1,a,n,r);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Fw(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}cT(t,!0,n,null,r);break;case"together":cT(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function R1(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Lu(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),oh|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ae(153));if(t.child!==null){for(e=t.child,n=af(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=af(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function joe(e,t,n){switch(t.tag){case 3:lV(t),Rg();break;case 5:N8(t);break;case 1:gr(t.type)&&Ow(t);break;case 4:II(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;on(Rw,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(on($n,$n.current&1),t.flags|=128,null):n&t.child.childLanes?uV(e,t,n):(on($n,$n.current&1),e=Lu(e,t,n),e!==null?e.sibling:null);on($n,$n.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return dV(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),on($n,$n.current),i)break;return null;case 22:case 23:return t.lanes=0,oV(e,t,n)}return Lu(e,t,n)}var fV,aD,cV,hV;fV=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};aD=function(){};cV=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,jc(pl.current);var r=null;switch(n){case"input":a=SO(e,a),i=SO(e,i),r=[];break;case"select":a=Dn({},a,{value:void 0}),i=Dn({},i,{value:void 0}),r=[];break;case"textarea":a=OO(e,a),i=OO(e,i),r=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Tw)}CO(n,i);var o;n=null;for(u in a)if(!i.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cb.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var l=i[u];if(s=a!=null?a[u]:void 0,i.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cb.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&dn("scroll",e),r||s===l||(r=[])):(r=r||[]).push(u,l))}n&&(r=r||[]).push("style",n);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};hV=function(e,t,n,i){n!==i&&(t.flags|=4)};function Uy(e,t){if(!vn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ki(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Uoe(e,t,n){var i=t.pendingProps;switch(SI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ki(t),null;case 1:return gr(t.type)&&Aw(),Ki(t),null;case 3:return i=t.stateNode,Pg(),gn(pr),gn(va),FI(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(mx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,is!==null&&(cD(is),is=null))),aD(e,t),Ki(t),null;case 5:PI(t);var a=jc(Bb.current);if(n=t.type,e!==null&&t.stateNode!=null)cV(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ae(166));return Ki(t),null}if(e=jc(pl.current),mx(t)){i=t.stateNode,n=t.type;var r=t.memoizedProps;switch(i[nl]=t,i[jb]=r,e=(t.mode&1)!==0,n){case"dialog":dn("cancel",i),dn("close",i);break;case"iframe":case"object":case"embed":dn("load",i);break;case"video":case"audio":for(a=0;a<_v.length;a++)dn(_v[a],i);break;case"source":dn("error",i);break;case"img":case"image":case"link":dn("error",i),dn("load",i);break;case"details":dn("toggle",i);break;case"input":Xz(i,r),dn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},dn("invalid",i);break;case"textarea":Jz(i,r),dn("invalid",i)}CO(n,r),a=null;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];o==="children"?typeof s=="string"?i.textContent!==s&&(r.suppressHydrationWarning!==!0&&gx(i.textContent,s,e),a=["children",s]):typeof s=="number"&&i.textContent!==""+s&&(r.suppressHydrationWarning!==!0&&gx(i.textContent,s,e),a=["children",""+s]):Cb.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&dn("scroll",i)}switch(n){case"input":sx(i),Zz(i,r,!0);break;case"textarea":sx(i),Kz(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Tw)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=j6(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(n,{is:i.is}):(e=o.createElement(n),n==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,n),e[nl]=t,e[jb]=i,fV(e,t,!1,!1),t.stateNode=e;e:{switch(o=RO(n,i),n){case"dialog":dn("cancel",e),dn("close",e),a=i;break;case"iframe":case"object":case"embed":dn("load",e),a=i;break;case"video":case"audio":for(a=0;a<_v.length;a++)dn(_v[a],e);a=i;break;case"source":dn("error",e),a=i;break;case"img":case"image":case"link":dn("error",e),dn("load",e),a=i;break;case"details":dn("toggle",e),a=i;break;case"input":Xz(e,i),a=SO(e,i),dn("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=Dn({},i,{value:void 0}),dn("invalid",e);break;case"textarea":Jz(e,i),a=OO(e,i),dn("invalid",e);break;default:a=i}CO(n,a),s=a;for(r in s)if(s.hasOwnProperty(r)){var l=s[r];r==="style"?V6(e,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&U6(e,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Rb(e,l):typeof l=="number"&&Rb(e,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Cb.hasOwnProperty(r)?l!=null&&r==="onScroll"&&dn("scroll",e):l!=null&&fI(e,r,l,o))}switch(n){case"input":sx(e),Zz(e,i,!1);break;case"textarea":sx(e),Kz(e);break;case"option":i.value!=null&&e.setAttribute("value",""+hf(i.value));break;case"select":e.multiple=!!i.multiple,r=i.value,r!=null?fg(e,!!i.multiple,r,!1):i.defaultValue!=null&&fg(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Tw)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ki(t),null;case 6:if(e&&t.stateNode!=null)hV(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ae(166));if(n=jc(Bb.current),jc(pl.current),mx(t)){if(i=t.stateNode,n=t.memoizedProps,i[nl]=t,(r=i.nodeValue!==n)&&(e=qr,e!==null))switch(e.tag){case 3:gx(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gx(i.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[nl]=t,t.stateNode=i}return Ki(t),null;case 13:if(gn($n),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vn&&Nr!==null&&t.mode&1&&!(t.flags&128))C8(),Rg(),t.flags|=98560,r=!1;else if(r=mx(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(Ae(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Ae(317));r[nl]=t}else Rg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ki(t),r=!1}else is!==null&&(cD(is),is=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||$n.current&1?ai===0&&(ai=3):HI())),t.updateQueue!==null&&(t.flags|=4),Ki(t),null);case 4:return Pg(),aD(e,t),e===null&&zb(t.stateNode.containerInfo),Ki(t),null;case 10:return DI(t.type._context),Ki(t),null;case 17:return gr(t.type)&&Aw(),Ki(t),null;case 19:if(gn($n),r=t.memoizedState,r===null)return Ki(t),null;if(i=(t.flags&128)!==0,o=r.rendering,o===null)if(i)Uy(r,!1);else{if(ai!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Fw(e),o!==null){for(t.flags|=128,Uy(r,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)r=n,e=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,e=o.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return on($n,$n.current&1|2),t.child}e=e.sibling}r.tail!==null&&Bn()>Ng&&(t.flags|=128,i=!0,Uy(r,!1),t.lanes=4194304)}else{if(!i)if(e=Fw(o),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Uy(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!vn)return Ki(t),null}else 2*Bn()-r.renderingStartTime>Ng&&n!==1073741824&&(t.flags|=128,i=!0,Uy(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(n=r.last,n!==null?n.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Bn(),t.sibling=null,n=$n.current,on($n,i?n&1|2:n&1),t):(Ki(t),null);case 22:case 23:return GI(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Rr&1073741824&&(Ki(t),t.subtreeFlags&6&&(t.flags|=8192)):Ki(t),null;case 24:return null;case 25:return null}throw Error(Ae(156,t.tag))}function Boe(e,t){switch(SI(t),t.tag){case 1:return gr(t.type)&&Aw(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pg(),gn(pr),gn(va),FI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return PI(t),null;case 13:if(gn($n),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ae(340));Rg()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gn($n),null;case 4:return Pg(),null;case 10:return DI(t.type._context),null;case 22:case 23:return GI(),null;case 24:return null;default:return null}}var bx=!1,sa=!1,Voe=typeof WeakSet=="function"?WeakSet:Set,je=null;function ng(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ln(e,t,i)}else n.current=null}function rD(e,t,n){try{n()}catch(i){Ln(e,t,i)}}var j5=!1;function Woe(e,t){if(UO=$w,e=v8(),$I(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,d=0,c=e,g=null;t:for(;;){for(var v;c!==n||a!==0&&c.nodeType!==3||(s=o+a),c!==r||i!==0&&c.nodeType!==3||(l=o+i),c.nodeType===3&&(o+=c.nodeValue.length),(v=c.firstChild)!==null;)g=c,c=v;for(;;){if(c===e)break t;if(g===n&&++u===a&&(s=o),g===r&&++d===i&&(l=o),(v=c.nextSibling)!==null)break;c=g,g=c.parentNode}c=v}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(BO={focusedElem:e,selectionRange:n},$w=!1,je=t;je!==null;)if(t=je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,je=e;else for(;je!==null;){t=je;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,k=b.memoizedState,w=t.stateNode,E=w.getSnapshotBeforeUpdate(t.elementType===t.type?x:Qo(t.type,x),k);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(O){Ln(t,t.return,O)}if(e=t.sibling,e!==null){e.return=t.return,je=e;break}je=t.return}return b=j5,j5=!1,b}function ob(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var r=a.destroy;a.destroy=void 0,r!==void 0&&rD(t,n,r)}a=a.next}while(a!==i)}}function X$(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function oD(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function pV(e){var t=e.alternate;t!==null&&(e.alternate=null,pV(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nl],delete t[jb],delete t[GO],delete t[Toe],delete t[Aoe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gV(e){return e.tag===5||e.tag===3||e.tag===4}function U5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gV(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sD(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Tw));else if(i!==4&&(e=e.child,e!==null))for(sD(e,t,n),e=e.sibling;e!==null;)sD(e,t,n),e=e.sibling}function lD(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(lD(e,t,n),e=e.sibling;e!==null;)lD(e,t,n),e=e.sibling}var Fi=null,es=!1;function vd(e,t,n){for(n=n.child;n!==null;)mV(e,t,n),n=n.sibling}function mV(e,t,n){if(hl&&typeof hl.onCommitFiberUnmount=="function")try{hl.onCommitFiberUnmount(j$,n)}catch{}switch(n.tag){case 5:sa||ng(n,t);case 6:var i=Fi,a=es;Fi=null,vd(e,t,n),Fi=i,es=a,Fi!==null&&(es?(e=Fi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Fi.removeChild(n.stateNode));break;case 18:Fi!==null&&(es?(e=Fi,n=n.stateNode,e.nodeType===8?rT(e.parentNode,n):e.nodeType===1&&rT(e,n),Nb(e)):rT(Fi,n.stateNode));break;case 4:i=Fi,a=es,Fi=n.stateNode.containerInfo,es=!0,vd(e,t,n),Fi=i,es=a;break;case 0:case 11:case 14:case 15:if(!sa&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var r=a,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&rD(n,t,o),a=a.next}while(a!==i)}vd(e,t,n);break;case 1:if(!sa&&(ng(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Ln(n,t,s)}vd(e,t,n);break;case 21:vd(e,t,n);break;case 22:n.mode&1?(sa=(i=sa)||n.memoizedState!==null,vd(e,t,n),sa=i):vd(e,t,n);break;default:vd(e,t,n)}}function B5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Voe),t.forEach(function(i){var a=ese.bind(null,e,i);n.has(i)||(n.add(i),i.then(a,a))})}}function Ho(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var r=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:Fi=s.stateNode,es=!1;break e;case 3:Fi=s.stateNode.containerInfo,es=!0;break e;case 4:Fi=s.stateNode.containerInfo,es=!0;break e}s=s.return}if(Fi===null)throw Error(Ae(160));mV(r,o,a),Fi=null,es=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){Ln(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yV(t,e),t=t.sibling}function yV(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ho(t,e),Hs(e),i&4){try{ob(3,e,e.return),X$(3,e)}catch(x){Ln(e,e.return,x)}try{ob(5,e,e.return)}catch(x){Ln(e,e.return,x)}}break;case 1:Ho(t,e),Hs(e),i&512&&n!==null&&ng(n,n.return);break;case 5:if(Ho(t,e),Hs(e),i&512&&n!==null&&ng(n,n.return),e.flags&32){var a=e.stateNode;try{Rb(a,"")}catch(x){Ln(e,e.return,x)}}if(i&4&&(a=e.stateNode,a!=null)){var r=e.memoizedProps,o=n!==null?n.memoizedProps:r,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&r.type==="radio"&&r.name!=null&&z6(a,r),RO(s,o);var u=RO(s,r);for(o=0;o<l.length;o+=2){var d=l[o],c=l[o+1];d==="style"?V6(a,c):d==="dangerouslySetInnerHTML"?U6(a,c):d==="children"?Rb(a,c):fI(a,d,c,u)}switch(s){case"input":TO(a,r);break;case"textarea":q6(a,r);break;case"select":var g=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!r.multiple;var v=r.value;v!=null?fg(a,!!r.multiple,v,!1):g!==!!r.multiple&&(r.defaultValue!=null?fg(a,!!r.multiple,r.defaultValue,!0):fg(a,!!r.multiple,r.multiple?[]:"",!1))}a[jb]=r}catch(x){Ln(e,e.return,x)}}break;case 6:if(Ho(t,e),Hs(e),i&4){if(e.stateNode===null)throw Error(Ae(162));a=e.stateNode,r=e.memoizedProps;try{a.nodeValue=r}catch(x){Ln(e,e.return,x)}}break;case 3:if(Ho(t,e),Hs(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Nb(t.containerInfo)}catch(x){Ln(e,e.return,x)}break;case 4:Ho(t,e),Hs(e);break;case 13:Ho(t,e),Hs(e),a=e.child,a.flags&8192&&(r=a.memoizedState!==null,a.stateNode.isHidden=r,!r||a.alternate!==null&&a.alternate.memoizedState!==null||(VI=Bn())),i&4&&B5(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(sa=(u=sa)||d,Ho(t,e),sa=u):Ho(t,e),Hs(e),i&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(je=e,d=e.child;d!==null;){for(c=je=d;je!==null;){switch(g=je,v=g.child,g.tag){case 0:case 11:case 14:case 15:ob(4,g,g.return);break;case 1:ng(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){i=g,n=g.return;try{t=i,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(x){Ln(i,n,x)}}break;case 5:ng(g,g.return);break;case 22:if(g.memoizedState!==null){W5(c);continue}}v!==null?(v.return=g,je=v):W5(c)}d=d.sibling}e:for(d=null,c=e;;){if(c.tag===5){if(d===null){d=c;try{a=c.stateNode,u?(r=a.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(s=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=B6("display",o))}catch(x){Ln(e,e.return,x)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(x){Ln(e,e.return,x)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Ho(t,e),Hs(e),i&4&&B5(e);break;case 21:break;default:Ho(t,e),Hs(e)}}function Hs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(gV(n)){var i=n;break e}n=n.return}throw Error(Ae(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(Rb(a,""),i.flags&=-33);var r=U5(e);lD(e,r,a);break;case 3:case 4:var o=i.stateNode.containerInfo,s=U5(e);sD(e,s,o);break;default:throw Error(Ae(161))}}catch(l){Ln(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Goe(e,t,n){je=e,vV(e)}function vV(e,t,n){for(var i=(e.mode&1)!==0;je!==null;){var a=je,r=a.child;if(a.tag===22&&i){var o=a.memoizedState!==null||bx;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||sa;s=bx;var u=sa;if(bx=o,(sa=l)&&!u)for(je=a;je!==null;)o=je,l=o.child,o.tag===22&&o.memoizedState!==null?G5(a):l!==null?(l.return=o,je=l):G5(a);for(;r!==null;)je=r,vV(r),r=r.sibling;je=a,bx=s,sa=u}V5(e)}else a.subtreeFlags&8772&&r!==null?(r.return=a,je=r):V5(e)}}function V5(e){for(;je!==null;){var t=je;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sa||X$(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!sa)if(n===null)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Qo(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&A5(t,r,i);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}A5(t,o,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&Nb(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}sa||t.flags&512&&oD(t)}catch(g){Ln(t,t.return,g)}}if(t===e){je=null;break}if(n=t.sibling,n!==null){n.return=t.return,je=n;break}je=t.return}}function W5(e){for(;je!==null;){var t=je;if(t===e){je=null;break}var n=t.sibling;if(n!==null){n.return=t.return,je=n;break}je=t.return}}function G5(e){for(;je!==null;){var t=je;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{X$(4,t)}catch(l){Ln(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(l){Ln(t,a,l)}}var r=t.return;try{oD(t)}catch(l){Ln(t,r,l)}break;case 5:var o=t.return;try{oD(t)}catch(l){Ln(t,o,l)}}}catch(l){Ln(t,t.return,l)}if(t===e){je=null;break}var s=t.sibling;if(s!==null){s.return=t.return,je=s;break}je=t.return}}var Hoe=Math.ceil,Mw=Yu.ReactCurrentDispatcher,UI=Yu.ReactCurrentOwner,So=Yu.ReactCurrentBatchConfig,Ct=0,Ei=null,Zn=null,Vi=0,Rr=0,ig=Cf(0),ai=0,Hb=null,oh=0,Z$=0,BI=0,sb=null,or=null,VI=0,Ng=1/0,ou=null,zw=!1,uD=null,tf=null,_x=!1,zd=null,qw=0,lb=0,dD=null,I1=-1,P1=0;function ja(){return Ct&6?Bn():I1!==-1?I1:I1=Bn()}function nf(e){return e.mode&1?Ct&2&&Vi!==0?Vi&-Vi:Doe.transition!==null?(P1===0&&(P1=n8()),P1):(e=Xt,e!==0||(e=window.event,e=e===void 0?16:u8(e.type)),e):1}function ps(e,t,n,i){if(50<lb)throw lb=0,dD=null,Error(Ae(185));P_(e,n,i),(!(Ct&2)||e!==Ei)&&(e===Ei&&(!(Ct&2)&&(Z$|=n),ai===4&&Nd(e,Vi)),mr(e,i),n===1&&Ct===0&&!(t.mode&1)&&(Ng=Bn()+500,G$&&Rf()))}function mr(e,t){var n=e.callbackNode;Dre(e,t);var i=kw(e,e===Ei?Vi:0);if(i===0)n!==null&&t5(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&t5(n),t===1)e.tag===0?Ooe(H5.bind(null,e)):A8(H5.bind(null,e)),Eoe(function(){!(Ct&6)&&Rf()}),n=null;else{switch(i8(i)){case 1:n=mI;break;case 4:n=e8;break;case 16:n=ww;break;case 536870912:n=t8;break;default:n=ww}n=SV(n,bV.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function bV(e,t){if(I1=-1,P1=0,Ct&6)throw Error(Ae(327));var n=e.callbackNode;if(mg()&&e.callbackNode!==n)return null;var i=kw(e,e===Ei?Vi:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=jw(e,i);else{t=i;var a=Ct;Ct|=2;var r=xV();(Ei!==e||Vi!==t)&&(ou=null,Ng=Bn()+500,Gc(e,t));do try{Zoe();break}catch(s){_V(e,s)}while(!0);OI(),Mw.current=r,Ct=a,Zn!==null?t=0:(Ei=null,Vi=0,t=ai)}if(t!==0){if(t===2&&(a=LO(e),a!==0&&(i=a,t=fD(e,a))),t===1)throw n=Hb,Gc(e,0),Nd(e,i),mr(e,Bn()),n;if(t===6)Nd(e,i);else{if(a=e.current.alternate,!(i&30)&&!Yoe(a)&&(t=jw(e,i),t===2&&(r=LO(e),r!==0&&(i=r,t=fD(e,r))),t===1))throw n=Hb,Gc(e,0),Nd(e,i),mr(e,Bn()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(Ae(345));case 2:Tc(e,or,ou);break;case 3:if(Nd(e,i),(i&130023424)===i&&(t=VI+500-Bn(),10<t)){if(kw(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){ja(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=WO(Tc.bind(null,e,or,ou),t);break}Tc(e,or,ou);break;case 4:if(Nd(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var o=31-hs(i);r=1<<o,o=t[o],o>a&&(a=o),i&=~r}if(i=a,i=Bn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Hoe(i/1960))-i,10<i){e.timeoutHandle=WO(Tc.bind(null,e,or,ou),i);break}Tc(e,or,ou);break;case 5:Tc(e,or,ou);break;default:throw Error(Ae(329))}}}return mr(e,Bn()),e.callbackNode===n?bV.bind(null,e):null}function fD(e,t){var n=sb;return e.current.memoizedState.isDehydrated&&(Gc(e,t).flags|=256),e=jw(e,t),e!==2&&(t=or,or=n,t!==null&&cD(t)),e}function cD(e){or===null?or=e:or.push.apply(or,e)}function Yoe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],r=a.getSnapshot;a=a.value;try{if(!vs(r(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nd(e,t){for(t&=~BI,t&=~Z$,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-hs(t),i=1<<n;e[n]=-1,t&=~i}}function H5(e){if(Ct&6)throw Error(Ae(327));mg();var t=kw(e,0);if(!(t&1))return mr(e,Bn()),null;var n=jw(e,t);if(e.tag!==0&&n===2){var i=LO(e);i!==0&&(t=i,n=fD(e,i))}if(n===1)throw n=Hb,Gc(e,0),Nd(e,t),mr(e,Bn()),n;if(n===6)throw Error(Ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,or,ou),mr(e,Bn()),null}function WI(e,t){var n=Ct;Ct|=1;try{return e(t)}finally{Ct=n,Ct===0&&(Ng=Bn()+500,G$&&Rf())}}function sh(e){zd!==null&&zd.tag===0&&!(Ct&6)&&mg();var t=Ct;Ct|=1;var n=So.transition,i=Xt;try{if(So.transition=null,Xt=1,e)return e()}finally{Xt=i,So.transition=n,Ct=t,!(Ct&6)&&Rf()}}function GI(){Rr=ig.current,gn(ig)}function Gc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,$oe(n)),Zn!==null)for(n=Zn.return;n!==null;){var i=n;switch(SI(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Aw();break;case 3:Pg(),gn(pr),gn(va),FI();break;case 5:PI(i);break;case 4:Pg();break;case 13:gn($n);break;case 19:gn($n);break;case 10:DI(i.type._context);break;case 22:case 23:GI()}n=n.return}if(Ei=e,Zn=e=af(e.current,null),Vi=Rr=t,ai=0,Hb=null,BI=Z$=oh=0,or=sb=null,qc!==null){for(t=0;t<qc.length;t++)if(n=qc[t],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=a,i.next=o}n.pending=i}qc=null}return e}function _V(e,t){do{var n=Zn;try{if(OI(),D1.current=Lw,Nw){for(var i=On.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Nw=!1}if(rh=0,mi=ei=On=null,rb=!1,Vb=0,UI.current=null,n===null||n.return===null){ai=1,Hb=t,Zn=null;break}e:{var r=e,o=n.return,s=n,l=t;if(t=Vi,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=s,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=P5(o);if(v!==null){v.flags&=-257,F5(v,o,s,r,t),v.mode&1&&I5(r,u,t),t=v,l=u;var b=t.updateQueue;if(b===null){var x=new Set;x.add(l),t.updateQueue=x}else b.add(l);break e}else{if(!(t&1)){I5(r,u,t),HI();break e}l=Error(Ae(426))}}else if(vn&&s.mode&1){var k=P5(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),F5(k,o,s,r,t),TI(Fg(l,s));break e}}r=l=Fg(l,s),ai!==4&&(ai=2),sb===null?sb=[r]:sb.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var w=iV(r,l,t);T5(r,w);break e;case 1:s=l;var E=r.type,T=r.stateNode;if(!(r.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(tf===null||!tf.has(T)))){r.flags|=65536,t&=-t,r.lanes|=t;var O=aV(r,s,t);T5(r,O);break e}}r=r.return}while(r!==null)}kV(n)}catch(D){t=D,Zn===n&&n!==null&&(Zn=n=n.return);continue}break}while(!0)}function xV(){var e=Mw.current;return Mw.current=Lw,e===null?Lw:e}function HI(){(ai===0||ai===3||ai===2)&&(ai=4),Ei===null||!(oh&268435455)&&!(Z$&268435455)||Nd(Ei,Vi)}function jw(e,t){var n=Ct;Ct|=2;var i=xV();(Ei!==e||Vi!==t)&&(ou=null,Gc(e,t));do try{Xoe();break}catch(a){_V(e,a)}while(!0);if(OI(),Ct=n,Mw.current=i,Zn!==null)throw Error(Ae(261));return Ei=null,Vi=0,ai}function Xoe(){for(;Zn!==null;)wV(Zn)}function Zoe(){for(;Zn!==null&&!xre();)wV(Zn)}function wV(e){var t=EV(e.alternate,e,Rr);e.memoizedProps=e.pendingProps,t===null?kV(e):Zn=t,UI.current=null}function kV(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Boe(n,t),n!==null){n.flags&=32767,Zn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ai=6,Zn=null;return}}else if(n=Uoe(n,t,Rr),n!==null){Zn=n;return}if(t=t.sibling,t!==null){Zn=t;return}Zn=t=e}while(t!==null);ai===0&&(ai=5)}function Tc(e,t,n){var i=Xt,a=So.transition;try{So.transition=null,Xt=1,Joe(e,t,n,i)}finally{So.transition=a,Xt=i}return null}function Joe(e,t,n,i){do mg();while(zd!==null);if(Ct&6)throw Error(Ae(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ae(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(Cre(e,r),e===Ei&&(Zn=Ei=null,Vi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_x||(_x=!0,SV(ww,function(){return mg(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=So.transition,So.transition=null;var o=Xt;Xt=1;var s=Ct;Ct|=4,UI.current=null,Woe(e,n),yV(n,e),yoe(BO),$w=!!UO,BO=UO=null,e.current=n,Goe(n),wre(),Ct=s,Xt=o,So.transition=r}else e.current=n;if(_x&&(_x=!1,zd=e,qw=a),r=e.pendingLanes,r===0&&(tf=null),Ere(n.stateNode),mr(e,Bn()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(zw)throw zw=!1,e=uD,uD=null,e;return qw&1&&e.tag!==0&&mg(),r=e.pendingLanes,r&1?e===dD?lb++:(lb=0,dD=e):lb=0,Rf(),null}function mg(){if(zd!==null){var e=i8(qw),t=So.transition,n=Xt;try{if(So.transition=null,Xt=16>e?16:e,zd===null)var i=!1;else{if(e=zd,zd=null,qw=0,Ct&6)throw Error(Ae(331));var a=Ct;for(Ct|=4,je=e.current;je!==null;){var r=je,o=r.child;if(je.flags&16){var s=r.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(je=u;je!==null;){var d=je;switch(d.tag){case 0:case 11:case 15:ob(8,d,r)}var c=d.child;if(c!==null)c.return=d,je=c;else for(;je!==null;){d=je;var g=d.sibling,v=d.return;if(pV(d),d===u){je=null;break}if(g!==null){g.return=v,je=g;break}je=v}}}var b=r.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var k=x.sibling;x.sibling=null,x=k}while(x!==null)}}je=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,je=o;else e:for(;je!==null;){if(r=je,r.flags&2048)switch(r.tag){case 0:case 11:case 15:ob(9,r,r.return)}var w=r.sibling;if(w!==null){w.return=r.return,je=w;break e}je=r.return}}var E=e.current;for(je=E;je!==null;){o=je;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,je=T;else e:for(o=E;je!==null;){if(s=je,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:X$(9,s)}}catch(D){Ln(s,s.return,D)}if(s===o){je=null;break e}var O=s.sibling;if(O!==null){O.return=s.return,je=O;break e}je=s.return}}if(Ct=a,Rf(),hl&&typeof hl.onPostCommitFiberRoot=="function")try{hl.onPostCommitFiberRoot(j$,e)}catch{}i=!0}return i}finally{Xt=n,So.transition=t}}return!1}function Y5(e,t,n){t=Fg(n,t),t=iV(e,t,1),e=ef(e,t,1),t=ja(),e!==null&&(P_(e,1,t),mr(e,t))}function Ln(e,t,n){if(e.tag===3)Y5(e,e,n);else for(;t!==null;){if(t.tag===3){Y5(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(tf===null||!tf.has(i))){e=Fg(n,e),e=aV(t,e,1),t=ef(t,e,1),e=ja(),t!==null&&(P_(t,1,e),mr(t,e));break}}t=t.return}}function Koe(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=ja(),e.pingedLanes|=e.suspendedLanes&n,Ei===e&&(Vi&n)===n&&(ai===4||ai===3&&(Vi&130023424)===Vi&&500>Bn()-VI?Gc(e,0):BI|=n),mr(e,t)}function $V(e,t){t===0&&(e.mode&1?(t=dx,dx<<=1,!(dx&130023424)&&(dx=4194304)):t=1);var n=ja();e=Nu(e,t),e!==null&&(P_(e,t,n),mr(e,n))}function Qoe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$V(e,n)}function ese(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Ae(314))}i!==null&&i.delete(t),$V(e,n)}var EV;EV=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pr.current)fr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return fr=!1,joe(e,t,n);fr=!!(e.flags&131072)}else fr=!1,vn&&t.flags&1048576&&O8(t,Cw,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;R1(e,t),e=t.pendingProps;var a=Cg(t,va.current);gg(t,n),a=LI(null,t,i,e,a,n);var r=MI();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gr(i)?(r=!0,Ow(t)):r=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,RI(t),a.updater=Y$,t.stateNode=a,a._reactInternals=t,KO(t,i,e,n),t=tD(null,t,i,!0,r,n)):(t.tag=0,vn&&r&&EI(t),Ra(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(R1(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=nse(i),e=Qo(i,e),a){case 0:t=eD(null,t,i,e,n);break e;case 1:t=M5(null,t,i,e,n);break e;case 11:t=N5(null,t,i,e,n);break e;case 14:t=L5(null,t,i,Qo(i.type,e),n);break e}throw Error(Ae(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Qo(i,a),eD(e,t,i,a,n);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Qo(i,a),M5(e,t,i,a,n);case 3:e:{if(lV(t),e===null)throw Error(Ae(387));i=t.pendingProps,r=t.memoizedState,a=r.element,F8(e,t),Pw(t,i,null,n);var o=t.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){a=Fg(Error(Ae(423)),t),t=z5(e,t,i,n,a);break e}else if(i!==a){a=Fg(Error(Ae(424)),t),t=z5(e,t,i,n,a);break e}else for(Nr=Qd(t.stateNode.containerInfo.firstChild),qr=t,vn=!0,is=null,n=I8(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rg(),i===a){t=Lu(e,t,n);break e}Ra(e,t,i,n)}t=t.child}return t;case 5:return N8(t),e===null&&XO(t),i=t.type,a=t.pendingProps,r=e!==null?e.memoizedProps:null,o=a.children,VO(i,a)?o=null:r!==null&&VO(i,r)&&(t.flags|=32),sV(e,t),Ra(e,t,o,n),t.child;case 6:return e===null&&XO(t),null;case 13:return uV(e,t,n);case 4:return II(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ig(t,null,i,n):Ra(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Qo(i,a),N5(e,t,i,a,n);case 7:return Ra(e,t,t.pendingProps,n),t.child;case 8:return Ra(e,t,t.pendingProps.children,n),t.child;case 12:return Ra(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,r=t.memoizedProps,o=a.value,on(Rw,i._currentValue),i._currentValue=o,r!==null)if(vs(r.value,o)){if(r.children===a.children&&!pr.current){t=Lu(e,t,n);break e}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){o=r.child;for(var l=s.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=wu(-1,n&-n),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),ZO(r.return,n,t),s.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(Ae(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),ZO(o,n,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Ra(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,gg(t,n),a=Oo(a),i=i(a),t.flags|=1,Ra(e,t,i,n),t.child;case 14:return i=t.type,a=Qo(i,t.pendingProps),a=Qo(i.type,a),L5(e,t,i,a,n);case 15:return rV(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Qo(i,a),R1(e,t),t.tag=1,gr(i)?(e=!0,Ow(t)):e=!1,gg(t,n),nV(t,i,a),KO(t,i,a,n),tD(null,t,i,!0,e,n);case 19:return dV(e,t,n);case 22:return oV(e,t,n)}throw Error(Ae(156,t.tag))};function SV(e,t){return Q6(e,t)}function tse(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(e,t,n,i){return new tse(e,t,n,i)}function YI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nse(e){if(typeof e=="function")return YI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hI)return 11;if(e===pI)return 14}return 2}function af(e,t){var n=e.alternate;return n===null?(n=bo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function F1(e,t,n,i,a,r){var o=2;if(i=e,typeof e=="function")YI(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Hp:return Hc(n.children,a,r,t);case cI:o=8,a|=8;break;case wO:return e=bo(12,n,t,a|2),e.elementType=wO,e.lanes=r,e;case kO:return e=bo(13,n,t,a),e.elementType=kO,e.lanes=r,e;case $O:return e=bo(19,n,t,a),e.elementType=$O,e.lanes=r,e;case N6:return J$(n,a,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P6:o=10;break e;case F6:o=9;break e;case hI:o=11;break e;case pI:o=14;break e;case Td:o=16,i=null;break e}throw Error(Ae(130,e==null?e:typeof e,""))}return t=bo(o,n,t,a),t.elementType=e,t.type=i,t.lanes=r,t}function Hc(e,t,n,i){return e=bo(7,e,i,t),e.lanes=n,e}function J$(e,t,n,i){return e=bo(22,e,i,t),e.elementType=N6,e.lanes=n,e.stateNode={isHidden:!1},e}function hT(e,t,n){return e=bo(6,e,null,t),e.lanes=n,e}function pT(e,t,n){return t=bo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ise(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=YS(0),this.expirationTimes=YS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=YS(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function XI(e,t,n,i,a,r,o,s,l){return e=new ise(e,t,n,s,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=bo(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},RI(r),e}function ase(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gp,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function TV(e){if(!e)return pf;e=e._reactInternals;e:{if(Nh(e)!==e||e.tag!==1)throw Error(Ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ae(171))}if(e.tag===1){var n=e.type;if(gr(n))return T8(e,n,t)}return t}function AV(e,t,n,i,a,r,o,s,l){return e=XI(n,i,!0,e,a,r,o,s,l),e.context=TV(null),n=e.current,i=ja(),a=nf(n),r=wu(i,a),r.callback=t??null,ef(n,r,a),e.current.lanes=a,P_(e,a,i),mr(e,i),e}function K$(e,t,n,i){var a=t.current,r=ja(),o=nf(a);return n=TV(n),t.context===null?t.context=n:t.pendingContext=n,t=wu(r,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ef(a,t,o),e!==null&&(ps(e,a,o,r),O1(e,a,o)),o}function Uw(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function X5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ZI(e,t){X5(e,t),(e=e.alternate)&&X5(e,t)}function rse(){return null}var OV=typeof reportError=="function"?reportError:function(e){console.error(e)};function JI(e){this._internalRoot=e}Q$.prototype.render=JI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ae(409));K$(e,t,null,null)};Q$.prototype.unmount=JI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sh(function(){K$(null,e,null,null)}),t[Fu]=null}};function Q$(e){this._internalRoot=e}Q$.prototype.unstable_scheduleHydration=function(e){if(e){var t=o8();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fd.length&&t!==0&&t<Fd[n].priority;n++);Fd.splice(n,0,e),n===0&&l8(e)}};function KI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function e2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Z5(){}function ose(e,t,n,i,a){if(a){if(typeof i=="function"){var r=i;i=function(){var u=Uw(o);r.call(u)}}var o=AV(t,i,e,0,null,!1,!1,"",Z5);return e._reactRootContainer=o,e[Fu]=o.current,zb(e.nodeType===8?e.parentNode:e),sh(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var s=i;i=function(){var u=Uw(l);s.call(u)}}var l=XI(e,0,!1,null,null,!1,!1,"",Z5);return e._reactRootContainer=l,e[Fu]=l.current,zb(e.nodeType===8?e.parentNode:e),sh(function(){K$(t,l,n,i)}),l}function t2(e,t,n,i,a){var r=n._reactRootContainer;if(r){var o=r;if(typeof a=="function"){var s=a;a=function(){var l=Uw(o);s.call(l)}}K$(t,o,e,a)}else o=ose(n,t,e,a,i);return Uw(o)}a8=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bv(t.pendingLanes);n!==0&&(yI(t,n|1),mr(t,Bn()),!(Ct&6)&&(Ng=Bn()+500,Rf()))}break;case 13:sh(function(){var i=Nu(e,1);if(i!==null){var a=ja();ps(i,e,1,a)}}),ZI(e,1)}};vI=function(e){if(e.tag===13){var t=Nu(e,134217728);if(t!==null){var n=ja();ps(t,e,134217728,n)}ZI(e,134217728)}};r8=function(e){if(e.tag===13){var t=nf(e),n=Nu(e,t);if(n!==null){var i=ja();ps(n,e,t,i)}ZI(e,t)}};o8=function(){return Xt};s8=function(e,t){var n=Xt;try{return Xt=e,t()}finally{Xt=n}};PO=function(e,t,n){switch(t){case"input":if(TO(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=W$(i);if(!a)throw Error(Ae(90));M6(i),TO(i,a)}}}break;case"textarea":q6(e,n);break;case"select":t=n.value,t!=null&&fg(e,!!n.multiple,t,!1)}};H6=WI;Y6=sh;var sse={usingClientEntryPoint:!1,Events:[N_,Jp,W$,W6,G6,WI]},By={findFiberByHostInstance:zc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lse={bundleType:By.bundleType,version:By.version,rendererPackageName:By.rendererPackageName,rendererConfig:By.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=J6(e),e===null?null:e.stateNode},findFiberByHostInstance:By.findFiberByHostInstance||rse,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xx.isDisabled&&xx.supportsFiber)try{j$=xx.inject(lse),hl=xx}catch{}}Zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sse;Zr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KI(t))throw Error(Ae(200));return ase(e,t,null,n)};Zr.createRoot=function(e,t){if(!KI(e))throw Error(Ae(299));var n=!1,i="",a=OV;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=XI(e,1,!1,null,null,n,!1,i,a),e[Fu]=t.current,zb(e.nodeType===8?e.parentNode:e),new JI(t)};Zr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ae(188)):(e=Object.keys(e).join(","),Error(Ae(268,e)));return e=J6(t),e=e===null?null:e.stateNode,e};Zr.flushSync=function(e){return sh(e)};Zr.hydrate=function(e,t,n){if(!e2(t))throw Error(Ae(200));return t2(null,e,t,!0,n)};Zr.hydrateRoot=function(e,t,n){if(!KI(e))throw Error(Ae(405));var i=n!=null&&n.hydratedSources||null,a=!1,r="",o=OV;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=AV(t,null,e,1,n??null,a,!1,r,o),e[Fu]=t.current,zb(e),i)for(e=0;e<i.length;e++)n=i[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Q$(t)};Zr.render=function(e,t,n){if(!e2(t))throw Error(Ae(200));return t2(null,e,t,!1,n)};Zr.unmountComponentAtNode=function(e){if(!e2(e))throw Error(Ae(40));return e._reactRootContainer?(sh(function(){t2(null,null,e,!1,function(){e._reactRootContainer=null,e[Fu]=null})}),!0):!1};Zr.unstable_batchedUpdates=WI;Zr.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!e2(n))throw Error(Ae(200));if(e==null||e._reactInternals===void 0)throw Error(Ae(38));return t2(e,t,n,!1,i)};Zr.version="18.3.1-next-f1338f8080-20240426";function DV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DV)}catch(e){console.error(e)}}DV(),D6.exports=Zr;var use=D6.exports,CV,J5=use;CV=J5.createRoot,J5.hydrateRoot;const dse=({onApply:e})=>{const[t,n]=gi.useState(""),i=r=>{n(r.target.value)},a=()=>{e(t)};return Li.jsxs("div",{className:"text-editor",children:[Li.jsx("textarea",{placeholder:"Enter rendering specification...",onChange:i,value:t}),Li.jsx("button",{onClick:a,className:"apply-button",children:"Apply"})]})};var hD={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(y6,function(n){var i="1.9.4";function a(p){var _,S,C,F;for(S=1,C=arguments.length;S<C;S++){F=arguments[S];for(_ in F)p[_]=F[_]}return p}var r=Object.create||function(){function p(){}return function(_){return p.prototype=_,new p}}();function o(p,_){var S=Array.prototype.slice;if(p.bind)return p.bind.apply(p,S.call(arguments,1));var C=S.call(arguments,2);return function(){return p.apply(_,C.length?C.concat(S.call(arguments)):arguments)}}var s=0;function l(p){return"_leaflet_id"in p||(p._leaflet_id=++s),p._leaflet_id}function u(p,_,S){var C,F,V,re;return re=function(){C=!1,F&&(V.apply(S,F),F=!1)},V=function(){C?F=arguments:(p.apply(S,arguments),setTimeout(re,_),C=!0)},V}function d(p,_,S){var C=_[1],F=_[0],V=C-F;return p===C&&S?p:((p-F)%V+V)%V+F}function c(){return!1}function g(p,_){if(_===!1)return p;var S=Math.pow(10,_===void 0?6:_);return Math.round(p*S)/S}function v(p){return p.trim?p.trim():p.replace(/^\s+|\s+$/g,"")}function b(p){return v(p).split(/\s+/)}function x(p,_){Object.prototype.hasOwnProperty.call(p,"options")||(p.options=p.options?r(p.options):{});for(var S in _)p.options[S]=_[S];return p.options}function k(p,_,S){var C=[];for(var F in p)C.push(encodeURIComponent(S?F.toUpperCase():F)+"="+encodeURIComponent(p[F]));return(!_||_.indexOf("?")===-1?"?":"&")+C.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function E(p,_){return p.replace(w,function(S,C){var F=_[C];if(F===void 0)throw new Error("No value provided for variable "+S);return typeof F=="function"&&(F=F(_)),F})}var T=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"};function O(p,_){for(var S=0;S<p.length;S++)if(p[S]===_)return S;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(p){return window["webkit"+p]||window["moz"+p]||window["ms"+p]}var R=0;function M(p){var _=+new Date,S=Math.max(0,16-(_-R));return R=_+S,window.setTimeout(p,S)}var q=window.requestAnimationFrame||P("RequestAnimationFrame")||M,H=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(p){window.clearTimeout(p)};function z(p,_,S){if(S&&q===M)p.call(_);else return q.call(window,o(p,_))}function Q(p){p&&H.call(window,p)}var te={__proto__:null,extend:a,create:r,bind:o,get lastId(){return s},stamp:l,throttle:u,wrapNum:d,falseFn:c,formatNum:g,trim:v,splitWords:b,setOptions:x,getParamString:k,template:E,isArray:T,indexOf:O,emptyImageUrl:D,requestFn:q,cancelFn:H,requestAnimFrame:z,cancelAnimFrame:Q};function W(){}W.extend=function(p){var _=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=_.__super__=this.prototype,C=r(S);C.constructor=_,_.prototype=C;for(var F in this)Object.prototype.hasOwnProperty.call(this,F)&&F!=="prototype"&&F!=="__super__"&&(_[F]=this[F]);return p.statics&&a(_,p.statics),p.includes&&(j(p.includes),a.apply(null,[C].concat(p.includes))),a(C,p),delete C.statics,delete C.includes,C.options&&(C.options=S.options?r(S.options):{},a(C.options,p.options)),C._initHooks=[],C.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var V=0,re=C._initHooks.length;V<re;V++)C._initHooks[V].call(this)}},_},W.include=function(p){var _=this.prototype.options;return a(this.prototype,p),p.options&&(this.prototype.options=_,this.mergeOptions(p.options)),this},W.mergeOptions=function(p){return a(this.prototype.options,p),this},W.addInitHook=function(p){var _=Array.prototype.slice.call(arguments,1),S=typeof p=="function"?p:function(){this[p].apply(this,_)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function j(p){if(!(typeof L>"u"||!L||!L.Mixin)){p=T(p)?p:[p];for(var _=0;_<p.length;_++)p[_]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var K={on:function(p,_,S){if(typeof p=="object")for(var C in p)this._on(C,p[C],_);else{p=b(p);for(var F=0,V=p.length;F<V;F++)this._on(p[F],_,S)}return this},off:function(p,_,S){if(!arguments.length)delete this._events;else if(typeof p=="object")for(var C in p)this._off(C,p[C],_);else{p=b(p);for(var F=arguments.length===1,V=0,re=p.length;V<re;V++)F?this._off(p[V]):this._off(p[V],_,S)}return this},_on:function(p,_,S,C){if(typeof _!="function"){console.warn("wrong listener type: "+typeof _);return}if(this._listens(p,_,S)===!1){S===this&&(S=void 0);var F={fn:_,ctx:S};C&&(F.once=!0),this._events=this._events||{},this._events[p]=this._events[p]||[],this._events[p].push(F)}},_off:function(p,_,S){var C,F,V;if(this._events&&(C=this._events[p],!!C)){if(arguments.length===1){if(this._firingCount)for(F=0,V=C.length;F<V;F++)C[F].fn=c;delete this._events[p];return}if(typeof _!="function"){console.warn("wrong listener type: "+typeof _);return}var re=this._listens(p,_,S);if(re!==!1){var fe=C[re];this._firingCount&&(fe.fn=c,this._events[p]=C=C.slice()),C.splice(re,1)}}},fire:function(p,_,S){if(!this.listens(p,S))return this;var C=a({},_,{type:p,target:this,sourceTarget:_&&_.sourceTarget||this});if(this._events){var F=this._events[p];if(F){this._firingCount=this._firingCount+1||1;for(var V=0,re=F.length;V<re;V++){var fe=F[V],ce=fe.fn;fe.once&&this.off(p,ce,fe.ctx),ce.call(fe.ctx||this,C)}this._firingCount--}}return S&&this._propagateEvent(C),this},listens:function(p,_,S,C){typeof p!="string"&&console.warn('"string" type argument expected');var F=_;typeof _!="function"&&(C=!!_,F=void 0,S=void 0);var V=this._events&&this._events[p];if(V&&V.length&&this._listens(p,F,S)!==!1)return!0;if(C){for(var re in this._eventParents)if(this._eventParents[re].listens(p,_,S,C))return!0}return!1},_listens:function(p,_,S){if(!this._events)return!1;var C=this._events[p]||[];if(!_)return!!C.length;S===this&&(S=void 0);for(var F=0,V=C.length;F<V;F++)if(C[F].fn===_&&C[F].ctx===S)return F;return!1},once:function(p,_,S){if(typeof p=="object")for(var C in p)this._on(C,p[C],_,!0);else{p=b(p);for(var F=0,V=p.length;F<V;F++)this._on(p[F],_,S,!0)}return this},addEventParent:function(p){return this._eventParents=this._eventParents||{},this._eventParents[l(p)]=p,this},removeEventParent:function(p){return this._eventParents&&delete this._eventParents[l(p)],this},_propagateEvent:function(p){for(var _ in this._eventParents)this._eventParents[_].fire(p.type,a({layer:p.target,propagatedFrom:p.target},p),!0)}};K.addEventListener=K.on,K.removeEventListener=K.clearAllEventListeners=K.off,K.addOneTimeEventListener=K.once,K.fireEvent=K.fire,K.hasEventListeners=K.listens;var se=W.extend(K);function ee(p,_,S){this.x=S?Math.round(p):p,this.y=S?Math.round(_):_}var oe=Math.trunc||function(p){return p>0?Math.floor(p):Math.ceil(p)};ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(p){return this.clone()._add(Y(p))},_add:function(p){return this.x+=p.x,this.y+=p.y,this},subtract:function(p){return this.clone()._subtract(Y(p))},_subtract:function(p){return this.x-=p.x,this.y-=p.y,this},divideBy:function(p){return this.clone()._divideBy(p)},_divideBy:function(p){return this.x/=p,this.y/=p,this},multiplyBy:function(p){return this.clone()._multiplyBy(p)},_multiplyBy:function(p){return this.x*=p,this.y*=p,this},scaleBy:function(p){return new ee(this.x*p.x,this.y*p.y)},unscaleBy:function(p){return new ee(this.x/p.x,this.y/p.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=oe(this.x),this.y=oe(this.y),this},distanceTo:function(p){p=Y(p);var _=p.x-this.x,S=p.y-this.y;return Math.sqrt(_*_+S*S)},equals:function(p){return p=Y(p),p.x===this.x&&p.y===this.y},contains:function(p){return p=Y(p),Math.abs(p.x)<=Math.abs(this.x)&&Math.abs(p.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function Y(p,_,S){return p instanceof ee?p:T(p)?new ee(p[0],p[1]):p==null?p:typeof p=="object"&&"x"in p&&"y"in p?new ee(p.x,p.y):new ee(p,_,S)}function Z(p,_){if(p)for(var S=_?[p,_]:p,C=0,F=S.length;C<F;C++)this.extend(S[C])}Z.prototype={extend:function(p){var _,S;if(!p)return this;if(p instanceof ee||typeof p[0]=="number"||"x"in p)_=S=Y(p);else if(p=ae(p),_=p.min,S=p.max,!_||!S)return this;return!this.min&&!this.max?(this.min=_.clone(),this.max=S.clone()):(this.min.x=Math.min(_.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(_.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(p){return Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,p)},getBottomLeft:function(){return Y(this.min.x,this.max.y)},getTopRight:function(){return Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(p){var _,S;return typeof p[0]=="number"||p instanceof ee?p=Y(p):p=ae(p),p instanceof Z?(_=p.min,S=p.max):_=S=p,_.x>=this.min.x&&S.x<=this.max.x&&_.y>=this.min.y&&S.y<=this.max.y},intersects:function(p){p=ae(p);var _=this.min,S=this.max,C=p.min,F=p.max,V=F.x>=_.x&&C.x<=S.x,re=F.y>=_.y&&C.y<=S.y;return V&&re},overlaps:function(p){p=ae(p);var _=this.min,S=this.max,C=p.min,F=p.max,V=F.x>_.x&&C.x<S.x,re=F.y>_.y&&C.y<S.y;return V&&re},isValid:function(){return!!(this.min&&this.max)},pad:function(p){var _=this.min,S=this.max,C=Math.abs(_.x-S.x)*p,F=Math.abs(_.y-S.y)*p;return ae(Y(_.x-C,_.y-F),Y(S.x+C,S.y+F))},equals:function(p){return p?(p=ae(p),this.min.equals(p.getTopLeft())&&this.max.equals(p.getBottomRight())):!1}};function ae(p,_){return!p||p instanceof Z?p:new Z(p,_)}function ne(p,_){if(p)for(var S=_?[p,_]:p,C=0,F=S.length;C<F;C++)this.extend(S[C])}ne.prototype={extend:function(p){var _=this._southWest,S=this._northEast,C,F;if(p instanceof X)C=p,F=p;else if(p instanceof ne){if(C=p._southWest,F=p._northEast,!C||!F)return this}else return p?this.extend(ue(p)||U(p)):this;return!_&&!S?(this._southWest=new X(C.lat,C.lng),this._northEast=new X(F.lat,F.lng)):(_.lat=Math.min(C.lat,_.lat),_.lng=Math.min(C.lng,_.lng),S.lat=Math.max(F.lat,S.lat),S.lng=Math.max(F.lng,S.lng)),this},pad:function(p){var _=this._southWest,S=this._northEast,C=Math.abs(_.lat-S.lat)*p,F=Math.abs(_.lng-S.lng)*p;return new ne(new X(_.lat-C,_.lng-F),new X(S.lat+C,S.lng+F))},getCenter:function(){return new X((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new X(this.getNorth(),this.getWest())},getSouthEast:function(){return new X(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(p){typeof p[0]=="number"||p instanceof X||"lat"in p?p=ue(p):p=U(p);var _=this._southWest,S=this._northEast,C,F;return p instanceof ne?(C=p.getSouthWest(),F=p.getNorthEast()):C=F=p,C.lat>=_.lat&&F.lat<=S.lat&&C.lng>=_.lng&&F.lng<=S.lng},intersects:function(p){p=U(p);var _=this._southWest,S=this._northEast,C=p.getSouthWest(),F=p.getNorthEast(),V=F.lat>=_.lat&&C.lat<=S.lat,re=F.lng>=_.lng&&C.lng<=S.lng;return V&&re},overlaps:function(p){p=U(p);var _=this._southWest,S=this._northEast,C=p.getSouthWest(),F=p.getNorthEast(),V=F.lat>_.lat&&C.lat<S.lat,re=F.lng>_.lng&&C.lng<S.lng;return V&&re},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(p,_){return p?(p=U(p),this._southWest.equals(p.getSouthWest(),_)&&this._northEast.equals(p.getNorthEast(),_)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function U(p,_){return p instanceof ne?p:new ne(p,_)}function X(p,_,S){if(isNaN(p)||isNaN(_))throw new Error("Invalid LatLng object: ("+p+", "+_+")");this.lat=+p,this.lng=+_,S!==void 0&&(this.alt=+S)}X.prototype={equals:function(p,_){if(!p)return!1;p=ue(p);var S=Math.max(Math.abs(this.lat-p.lat),Math.abs(this.lng-p.lng));return S<=(_===void 0?1e-9:_)},toString:function(p){return"LatLng("+g(this.lat,p)+", "+g(this.lng,p)+")"},distanceTo:function(p){return ie.distance(this,ue(p))},wrap:function(){return ie.wrapLatLng(this)},toBounds:function(p){var _=180*p/40075017,S=_/Math.cos(Math.PI/180*this.lat);return U([this.lat-_,this.lng-S],[this.lat+_,this.lng+S])},clone:function(){return new X(this.lat,this.lng,this.alt)}};function ue(p,_,S){return p instanceof X?p:T(p)&&typeof p[0]!="object"?p.length===3?new X(p[0],p[1],p[2]):p.length===2?new X(p[0],p[1]):null:p==null?p:typeof p=="object"&&"lat"in p?new X(p.lat,"lng"in p?p.lng:p.lon,p.alt):_===void 0?null:new X(p,_,S)}var Ce={latLngToPoint:function(p,_){var S=this.projection.project(p),C=this.scale(_);return this.transformation._transform(S,C)},pointToLatLng:function(p,_){var S=this.scale(_),C=this.transformation.untransform(p,S);return this.projection.unproject(C)},project:function(p){return this.projection.project(p)},unproject:function(p){return this.projection.unproject(p)},scale:function(p){return 256*Math.pow(2,p)},zoom:function(p){return Math.log(p/256)/Math.LN2},getProjectedBounds:function(p){if(this.infinite)return null;var _=this.projection.bounds,S=this.scale(p),C=this.transformation.transform(_.min,S),F=this.transformation.transform(_.max,S);return new Z(C,F)},infinite:!1,wrapLatLng:function(p){var _=this.wrapLng?d(p.lng,this.wrapLng,!0):p.lng,S=this.wrapLat?d(p.lat,this.wrapLat,!0):p.lat,C=p.alt;return new X(S,_,C)},wrapLatLngBounds:function(p){var _=p.getCenter(),S=this.wrapLatLng(_),C=_.lat-S.lat,F=_.lng-S.lng;if(C===0&&F===0)return p;var V=p.getSouthWest(),re=p.getNorthEast(),fe=new X(V.lat-C,V.lng-F),ce=new X(re.lat-C,re.lng-F);return new ne(fe,ce)}},ie=a({},Ce,{wrapLng:[-180,180],R:6371e3,distance:function(p,_){var S=Math.PI/180,C=p.lat*S,F=_.lat*S,V=Math.sin((_.lat-p.lat)*S/2),re=Math.sin((_.lng-p.lng)*S/2),fe=V*V+Math.cos(C)*Math.cos(F)*re*re,ce=2*Math.atan2(Math.sqrt(fe),Math.sqrt(1-fe));return this.R*ce}}),_e=6378137,xe={R:_e,MAX_LATITUDE:85.0511287798,project:function(p){var _=Math.PI/180,S=this.MAX_LATITUDE,C=Math.max(Math.min(S,p.lat),-S),F=Math.sin(C*_);return new ee(this.R*p.lng*_,this.R*Math.log((1+F)/(1-F))/2)},unproject:function(p){var _=180/Math.PI;return new X((2*Math.atan(Math.exp(p.y/this.R))-Math.PI/2)*_,p.x*_/this.R)},bounds:function(){var p=_e*Math.PI;return new Z([-p,-p],[p,p])}()};function ve(p,_,S,C){if(T(p)){this._a=p[0],this._b=p[1],this._c=p[2],this._d=p[3];return}this._a=p,this._b=_,this._c=S,this._d=C}ve.prototype={transform:function(p,_){return this._transform(p.clone(),_)},_transform:function(p,_){return _=_||1,p.x=_*(this._a*p.x+this._b),p.y=_*(this._c*p.y+this._d),p},untransform:function(p,_){return _=_||1,new ee((p.x/_-this._b)/this._a,(p.y/_-this._d)/this._c)}};function G(p,_,S,C){return new ve(p,_,S,C)}var kt=a({},ie,{code:"EPSG:3857",projection:xe,transformation:function(){var p=.5/(Math.PI*xe.R);return G(p,.5,-p,.5)}()}),pt=a({},kt,{code:"EPSG:900913"});function Rt(p){return document.createElementNS("http://www.w3.org/2000/svg",p)}function Jt(p,_){var S="",C,F,V,re,fe,ce;for(C=0,V=p.length;C<V;C++){for(fe=p[C],F=0,re=fe.length;F<re;F++)ce=fe[F],S+=(F?"L":"M")+ce.x+" "+ce.y;S+=_?Ge.svg?"z":"x":""}return S||"M0 0"}var Cn=document.documentElement.style,wa="ActiveXObject"in window,Se=wa&&!document.addEventListener,Wl="msLaunchUri"in navigator&&!("documentMode"in document),Ls=di("webkit"),Ja=di("android"),rd=di("android 2")||di("android 3"),tt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Uo=Ja&&di("Google")&&tt<537&&!("AudioNode"in window),Ka=!!window.opera,Ms=!Wl&&di("chrome"),Je=di("gecko")&&!Ls&&!Ka&&!wa,od=!Ms&&di("safari"),yt=di("phantom"),Qe="OTransition"in Cn,ES=navigator.platform.indexOf("Win")===0,Kr=wa&&"transition"in Cn,sy="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rd,Ke="MozPerspective"in Cn,SS=!window.L_DISABLE_3D&&(Kr||sy||Ke)&&!Qe&&!yt,Zf=typeof orientation<"u"||di("mobile"),ly=Zf&&Ls,Qa=Zf&&sy,sd=!window.PointerEvent&&window.MSPointerEvent,Tr=!!(window.PointerEvent||sd),uy="ontouchstart"in window||!!window.TouchEvent,np=!window.L_NO_TOUCH&&(uy||Tr),TS=Zf&&Ka,z0=Zf&&Je,Gl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Re=function(){var p=!1;try{var _=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("testPassiveEventSupport",c,_),window.removeEventListener("testPassiveEventSupport",c,_)}catch{}return p}(),ip=function(){return!!document.createElement("canvas").getContext}(),ld=!!(document.createElementNS&&Rt("svg").createSVGRect),Jf=!!ld&&function(){var p=document.createElement("div");return p.innerHTML="<svg/>",(p.firstChild&&p.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),q0=!ld&&function(){try{var p=document.createElement("div");p.innerHTML='<v:shape adj="1"/>';var _=p.firstChild;return _.style.behavior="url(#default#VML)",_&&typeof _.adj=="object"}catch{return!1}}(),dy=navigator.platform.indexOf("Mac")===0,j0=navigator.platform.indexOf("Linux")===0;function di(p){return navigator.userAgent.toLowerCase().indexOf(p)>=0}var Ge={ie:wa,ielt9:Se,edge:Wl,webkit:Ls,android:Ja,android23:rd,androidStock:Uo,opera:Ka,chrome:Ms,gecko:Je,safari:od,phantom:yt,opera12:Qe,win:ES,ie3d:Kr,webkit3d:sy,gecko3d:Ke,any3d:SS,mobile:Zf,mobileWebkit:ly,mobileWebkit3d:Qa,msPointer:sd,pointer:Tr,touch:np,touchNative:uy,mobileOpera:TS,mobileGecko:z0,retina:Gl,passiveEvents:Re,canvas:ip,svg:ld,vml:q0,inlineSvg:Jf,mac:dy,linux:j0},Kf=Ge.msPointer?"MSPointerDown":"pointerdown",U0=Ge.msPointer?"MSPointerMove":"pointermove",fy=Ge.msPointer?"MSPointerUp":"pointerup",B0=Ge.msPointer?"MSPointerCancel":"pointercancel",Di={touchstart:Kf,touchmove:U0,touchend:fy,touchcancel:B0},ap={touchstart:sp,touchmove:op,touchend:op,touchcancel:op},Qr={},zs=!1;function Hl(p,_,S){return _==="touchstart"&&AS(),ap[_]?(S=ap[_].bind(this,S),p.addEventListener(Di[_],S,!1),S):(console.warn("wrong event specified:",_),c)}function cy(p,_,S){if(!Di[_]){console.warn("wrong event specified:",_);return}p.removeEventListener(Di[_],S,!1)}function rp(p){Qr[p.pointerId]=p}function Qf(p){Qr[p.pointerId]&&(Qr[p.pointerId]=p)}function Rn(p){delete Qr[p.pointerId]}function AS(){zs||(document.addEventListener(Kf,rp,!0),document.addEventListener(U0,Qf,!0),document.addEventListener(fy,Rn,!0),document.addEventListener(B0,Rn,!0),zs=!0)}function op(p,_){if(_.pointerType!==(_.MSPOINTER_TYPE_MOUSE||"mouse")){_.touches=[];for(var S in Qr)_.touches.push(Qr[S]);_.changedTouches=[_],p(_)}}function sp(p,_){_.MSPOINTER_TYPE_TOUCH&&_.pointerType===_.MSPOINTER_TYPE_TOUCH&&xn(_),op(p,_)}function ec(p){var _={},S,C;for(C in p)S=p[C],_[C]=S&&S.bind?S.bind(p):S;return p=_,_.type="dblclick",_.detail=2,_.isTrusted=!1,_._simulated=!0,_}var hy=200;function py(p,_){p.addEventListener("dblclick",_);var S=0,C;function F(V){if(V.detail!==1){C=V.detail;return}if(!(V.pointerType==="mouse"||V.sourceCapabilities&&!V.sourceCapabilities.firesTouchEvents)){var re=ci(V);if(!(re.some(function(ce){return ce instanceof HTMLLabelElement&&ce.attributes.for})&&!re.some(function(ce){return ce instanceof HTMLInputElement||ce instanceof HTMLSelectElement}))){var fe=Date.now();fe-S<=hy?(C++,C===2&&_(ec(V))):C=1,S=fe}}}return p.addEventListener("click",F),{dblclick:_,simDblclick:F}}function V0(p,_){p.removeEventListener("dblclick",_.dblclick),p.removeEventListener("click",_.simDblclick)}var gy=fp(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ci=fp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Yl=Ci==="webkitTransition"||Ci==="OTransition"?Ci+"End":"transitionend";function lp(p){return typeof p=="string"?document.getElementById(p):p}function eo(p,_){var S=p.style[_]||p.currentStyle&&p.currentStyle[_];if((!S||S==="auto")&&document.defaultView){var C=document.defaultView.getComputedStyle(p,null);S=C?C[_]:null}return S==="auto"?null:S}function $t(p,_,S){var C=document.createElement(p);return C.className=_||"",S&&S.appendChild(C),C}function un(p){var _=p.parentNode;_&&_.removeChild(p)}function up(p){for(;p.firstChild;)p.removeChild(p.firstChild)}function ud(p){var _=p.parentNode;_&&_.lastChild!==p&&_.appendChild(p)}function Xl(p){var _=p.parentNode;_&&_.firstChild!==p&&_.insertBefore(p,_.firstChild)}function dp(p,_){if(p.classList!==void 0)return p.classList.contains(_);var S=tc(p);return S.length>0&&new RegExp("(^|\\s)"+_+"(\\s|$)").test(S)}function at(p,_){if(p.classList!==void 0)for(var S=b(_),C=0,F=S.length;C<F;C++)p.classList.add(S[C]);else if(!dp(p,_)){var V=tc(p);to(p,(V?V+" ":"")+_)}}function zt(p,_){p.classList!==void 0?p.classList.remove(_):to(p,v((" "+tc(p)+" ").replace(" "+_+" "," ")))}function to(p,_){p.className.baseVal===void 0?p.className=_:p.className.baseVal=_}function tc(p){return p.correspondingElement&&(p=p.correspondingElement),p.className.baseVal===void 0?p.className:p.className.baseVal}function Kn(p,_){"opacity"in p.style?p.style.opacity=_:"filter"in p.style&&OS(p,_)}function OS(p,_){var S=!1,C="DXImageTransform.Microsoft.Alpha";try{S=p.filters.item(C)}catch{if(_===1)return}_=Math.round(_*100),S?(S.Enabled=_!==100,S.Opacity=_):p.style.filter+=" progid:"+C+"(opacity="+_+")"}function fp(p){for(var _=document.documentElement.style,S=0;S<p.length;S++)if(p[S]in _)return p[S];return!1}function Zl(p,_,S){var C=_||new ee(0,0);p.style[gy]=(Ge.ie3d?"translate("+C.x+"px,"+C.y+"px)":"translate3d("+C.x+"px,"+C.y+"px,0)")+(S?" scale("+S+")":"")}function In(p,_){p._leaflet_pos=_,Ge.any3d?Zl(p,_):(p.style.left=_.x+"px",p.style.top=_.y+"px")}function qs(p){return p._leaflet_pos||new ee(0,0)}var Bo,dd,my;if("onselectstart"in document)Bo=function(){ot(window,"selectstart",xn)},dd=function(){Vt(window,"selectstart",xn)};else{var fd=fp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Bo=function(){if(fd){var p=document.documentElement.style;my=p[fd],p[fd]="none"}},dd=function(){fd&&(document.documentElement.style[fd]=my,my=void 0)}}function yy(){ot(window,"dragstart",xn)}function nc(){Vt(window,"dragstart",xn)}var Bt,Vo;function vy(p){for(;p.tabIndex===-1;)p=p.parentNode;p.style&&(cd(),Bt=p,Vo=p.style.outlineStyle,p.style.outlineStyle="none",ot(window,"keydown",cd))}function cd(){Bt&&(Bt.style.outlineStyle=Vo,Bt=void 0,Vo=void 0,Vt(window,"keydown",cd))}function ka(p){do p=p.parentNode;while((!p.offsetWidth||!p.offsetHeight)&&p!==document.body);return p}function Zi(p){var _=p.getBoundingClientRect();return{x:_.width/p.offsetWidth||1,y:_.height/p.offsetHeight||1,boundingClientRect:_}}var cp={__proto__:null,TRANSFORM:gy,TRANSITION:Ci,TRANSITION_END:Yl,get:lp,getStyle:eo,create:$t,remove:un,empty:up,toFront:ud,toBack:Xl,hasClass:dp,addClass:at,removeClass:zt,setClass:to,getClass:tc,setOpacity:Kn,testProp:fp,setTransform:Zl,setPosition:In,getPosition:qs,get disableTextSelection(){return Bo},get enableTextSelection(){return dd},disableImageDrag:yy,enableImageDrag:nc,preventOutline:vy,restoreOutline:cd,getSizedParentNode:ka,getScale:Zi};function ot(p,_,S,C){if(_&&typeof _=="object")for(var F in _)hp(p,F,_[F],S);else{_=b(_);for(var V=0,re=_.length;V<re;V++)hp(p,_[V],S,C)}return this}var no="_leaflet_events";function Vt(p,_,S,C){if(arguments.length===1)ic(p),delete p[no];else if(_&&typeof _=="object")for(var F in _)Tt(p,F,_[F],S);else if(_=b(_),arguments.length===2)ic(p,function(fe){return O(_,fe)!==-1});else for(var V=0,re=_.length;V<re;V++)Tt(p,_[V],S,C);return this}function ic(p,_){for(var S in p[no]){var C=S.split(/\d/)[0];(!_||_(C))&&Tt(p,C,null,null,S)}}var by={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function hp(p,_,S,C){var F=_+l(S)+(C?"_"+l(C):"");if(p[no]&&p[no][F])return this;var V=function(fe){return S.call(C||p,fe||window.event)},re=V;!Ge.touchNative&&Ge.pointer&&_.indexOf("touch")===0?V=Hl(p,_,V):Ge.touch&&_==="dblclick"?V=py(p,V):"addEventListener"in p?_==="touchstart"||_==="touchmove"||_==="wheel"||_==="mousewheel"?p.addEventListener(by[_]||_,V,Ge.passiveEvents?{passive:!1}:!1):_==="mouseenter"||_==="mouseleave"?(V=function(fe){fe=fe||window.event,pp(p,fe)&&re(fe)},p.addEventListener(by[_],V,!1)):p.addEventListener(_,re,!1):p.attachEvent("on"+_,V),p[no]=p[no]||{},p[no][F]=V}function Tt(p,_,S,C,F){F=F||_+l(S)+(C?"_"+l(C):"");var V=p[no]&&p[no][F];if(!V)return this;!Ge.touchNative&&Ge.pointer&&_.indexOf("touch")===0?cy(p,_,V):Ge.touch&&_==="dblclick"?V0(p,V):"removeEventListener"in p?p.removeEventListener(by[_]||_,V,!1):p.detachEvent("on"+_,V),p[no][F]=null}function fi(p){return p.stopPropagation?p.stopPropagation():p.originalEvent?p.originalEvent._stopped=!0:p.cancelBubble=!0,this}function ac(p){return hp(p,"wheel",fi),this}function hd(p){return ot(p,"mousedown touchstart dblclick contextmenu",fi),p._leaflet_disable_click=!0,this}function xn(p){return p.preventDefault?p.preventDefault():p.returnValue=!1,this}function js(p){return xn(p),fi(p),this}function ci(p){if(p.composedPath)return p.composedPath();for(var _=[],S=p.target;S;)_.push(S),S=S.parentNode;return _}function _y(p,_){if(!_)return new ee(p.clientX,p.clientY);var S=Zi(_),C=S.boundingClientRect;return new ee((p.clientX-C.left)/S.x-_.clientLeft,(p.clientY-C.top)/S.y-_.clientTop)}var xy=Ge.linux&&Ge.chrome?window.devicePixelRatio:Ge.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wy(p){return Ge.edge?p.wheelDeltaY/2:p.deltaY&&p.deltaMode===0?-p.deltaY/xy:p.deltaY&&p.deltaMode===1?-p.deltaY*20:p.deltaY&&p.deltaMode===2?-p.deltaY*60:p.deltaX||p.deltaZ?0:p.wheelDelta?(p.wheelDeltaY||p.wheelDelta)/2:p.detail&&Math.abs(p.detail)<32765?-p.detail*20:p.detail?p.detail/-32765*60:0}function pp(p,_){var S=_.relatedTarget;if(!S)return!0;try{for(;S&&S!==p;)S=S.parentNode}catch{return!1}return S!==p}var DS={__proto__:null,on:ot,off:Vt,stopPropagation:fi,disableScrollPropagation:ac,disableClickPropagation:hd,preventDefault:xn,stop:js,getPropagationPath:ci,getMousePosition:_y,getWheelDelta:wy,isExternalTarget:pp,addListener:ot,removeListener:Vt},ky=se.extend({run:function(p,_,S,C){this.stop(),this._el=p,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(C||.5,.2),this._startPos=qs(p),this._offset=_.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=z(this._animate,this),this._step()},_step:function(p){var _=+new Date-this._startTime,S=this._duration*1e3;_<S?this._runFrame(this._easeOut(_/S),p):(this._runFrame(1),this._complete())},_runFrame:function(p,_){var S=this._startPos.add(this._offset.multiplyBy(p));_&&S._round(),In(this._el,S),this.fire("step")},_complete:function(){Q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(p){return 1-Math.pow(1-p,this._easeOutPower)}}),st=se.extend({options:{crs:kt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(p,_){_=x(this,_),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(p),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),_.maxBounds&&this.setMaxBounds(_.maxBounds),_.zoom!==void 0&&(this._zoom=this._limitZoom(_.zoom)),_.center&&_.zoom!==void 0&&this.setView(ue(_.center),_.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ci&&Ge.any3d&&!Ge.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ot(this._proxy,Yl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(p,_,S){if(_=_===void 0?this._zoom:this._limitZoom(_),p=this._limitCenter(ue(p),_,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=a({animate:S.animate},S.zoom),S.pan=a({animate:S.animate,duration:S.duration},S.pan));var C=this._zoom!==_?this._tryAnimatedZoom&&this._tryAnimatedZoom(p,_,S.zoom):this._tryAnimatedPan(p,S.pan);if(C)return clearTimeout(this._sizeTimer),this}return this._resetView(p,_,S.pan&&S.pan.noMoveStart),this},setZoom:function(p,_){return this._loaded?this.setView(this.getCenter(),p,{zoom:_}):(this._zoom=p,this)},zoomIn:function(p,_){return p=p||(Ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+p,_)},zoomOut:function(p,_){return p=p||(Ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-p,_)},setZoomAround:function(p,_,S){var C=this.getZoomScale(_),F=this.getSize().divideBy(2),V=p instanceof ee?p:this.latLngToContainerPoint(p),re=V.subtract(F).multiplyBy(1-1/C),fe=this.containerPointToLatLng(F.add(re));return this.setView(fe,_,{zoom:S})},_getBoundsCenterZoom:function(p,_){_=_||{},p=p.getBounds?p.getBounds():U(p);var S=Y(_.paddingTopLeft||_.padding||[0,0]),C=Y(_.paddingBottomRight||_.padding||[0,0]),F=this.getBoundsZoom(p,!1,S.add(C));if(F=typeof _.maxZoom=="number"?Math.min(_.maxZoom,F):F,F===1/0)return{center:p.getCenter(),zoom:F};var V=C.subtract(S).divideBy(2),re=this.project(p.getSouthWest(),F),fe=this.project(p.getNorthEast(),F),ce=this.unproject(re.add(fe).divideBy(2).add(V),F);return{center:ce,zoom:F}},fitBounds:function(p,_){if(p=U(p),!p.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(p,_);return this.setView(S.center,S.zoom,_)},fitWorld:function(p){return this.fitBounds([[-90,-180],[90,180]],p)},panTo:function(p,_){return this.setView(p,this._zoom,{pan:_})},panBy:function(p,_){if(p=Y(p).round(),_=_||{},!p.x&&!p.y)return this.fire("moveend");if(_.animate!==!0&&!this.getSize().contains(p))return this._resetView(this.unproject(this.project(this.getCenter()).add(p)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ky,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),_.noMoveStart||this.fire("movestart"),_.animate!==!1){at(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(p).round();this._panAnim.run(this._mapPane,S,_.duration||.25,_.easeLinearity)}else this._rawPanBy(p),this.fire("move").fire("moveend");return this},flyTo:function(p,_,S){if(S=S||{},S.animate===!1||!Ge.any3d)return this.setView(p,_,S);this._stop();var C=this.project(this.getCenter()),F=this.project(p),V=this.getSize(),re=this._zoom;p=ue(p),_=_===void 0?re:_;var fe=Math.max(V.x,V.y),ce=fe*this.getZoomScale(re,_),we=F.distanceTo(C)||1,ze=1.42,et=ze*ze;function vt(Xn){var ax=Xn?-1:1,Pae=Xn?ce:fe,Fae=ce*ce-fe*fe+ax*et*et*we*we,Nae=2*Pae*et*we,US=Fae/Nae,Uz=Math.sqrt(US*US+1)-US,Lae=Uz<1e-9?-18:Math.log(Uz);return Lae}function Sa(Xn){return(Math.exp(Xn)-Math.exp(-Xn))/2}function pi(Xn){return(Math.exp(Xn)+Math.exp(-Xn))/2}function lo(Xn){return Sa(Xn)/pi(Xn)}var tr=vt(0);function $p(Xn){return fe*(pi(tr)/pi(tr+ze*Xn))}function Dae(Xn){return fe*(pi(tr)*lo(tr+ze*Xn)-Sa(tr))/et}function Cae(Xn){return 1-Math.pow(1-Xn,1.5)}var Rae=Date.now(),qz=(vt(1)-tr)/ze,Iae=S.duration?1e3*S.duration:1e3*qz*.8;function jz(){var Xn=(Date.now()-Rae)/Iae,ax=Cae(Xn)*qz;Xn<=1?(this._flyToFrame=z(jz,this),this._move(this.unproject(C.add(F.subtract(C).multiplyBy(Dae(ax)/we)),re),this.getScaleZoom(fe/$p(ax),re),{flyTo:!0})):this._move(p,_)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),jz.call(this),this},flyToBounds:function(p,_){var S=this._getBoundsCenterZoom(p,_);return this.flyTo(S.center,S.zoom,_)},setMaxBounds:function(p){return p=U(p),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),p.isValid()?(this.options.maxBounds=p,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(p){var _=this.options.minZoom;return this.options.minZoom=p,this._loaded&&_!==p&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(p):this},setMaxZoom:function(p){var _=this.options.maxZoom;return this.options.maxZoom=p,this._loaded&&_!==p&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(p):this},panInsideBounds:function(p,_){this._enforcingBounds=!0;var S=this.getCenter(),C=this._limitCenter(S,this._zoom,U(p));return S.equals(C)||this.panTo(C,_),this._enforcingBounds=!1,this},panInside:function(p,_){_=_||{};var S=Y(_.paddingTopLeft||_.padding||[0,0]),C=Y(_.paddingBottomRight||_.padding||[0,0]),F=this.project(this.getCenter()),V=this.project(p),re=this.getPixelBounds(),fe=ae([re.min.add(S),re.max.subtract(C)]),ce=fe.getSize();if(!fe.contains(V)){this._enforcingBounds=!0;var we=V.subtract(fe.getCenter()),ze=fe.extend(V).getSize().subtract(ce);F.x+=we.x<0?-ze.x:ze.x,F.y+=we.y<0?-ze.y:ze.y,this.panTo(this.unproject(F),_),this._enforcingBounds=!1}return this},invalidateSize:function(p){if(!this._loaded)return this;p=a({animate:!1,pan:!0},p===!0?{animate:!0}:p);var _=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),C=_.divideBy(2).round(),F=S.divideBy(2).round(),V=C.subtract(F);return!V.x&&!V.y?this:(p.animate&&p.pan?this.panBy(V):(p.pan&&this._rawPanBy(V),this.fire("move"),p.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:_,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(p){if(p=this._locateOptions=a({timeout:1e4,watch:!1},p),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var _=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return p.watch?this._locationWatchId=navigator.geolocation.watchPosition(_,S,p):navigator.geolocation.getCurrentPosition(_,S,p),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(p){if(this._container._leaflet_id){var _=p.code,S=p.message||(_===1?"permission denied":_===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:_,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(p){if(this._container._leaflet_id){var _=p.coords.latitude,S=p.coords.longitude,C=new X(_,S),F=C.toBounds(p.coords.accuracy*2),V=this._locateOptions;if(V.setView){var re=this.getBoundsZoom(F);this.setView(C,V.maxZoom?Math.min(re,V.maxZoom):re)}var fe={latlng:C,bounds:F,timestamp:p.timestamp};for(var ce in p.coords)typeof p.coords[ce]=="number"&&(fe[ce]=p.coords[ce]);this.fire("locationfound",fe)}},addHandler:function(p,_){if(!_)return this;var S=this[p]=new _(this);return this._handlers.push(S),this.options[p]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),un(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var p;for(p in this._layers)this._layers[p].remove();for(p in this._panes)un(this._panes[p]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(p,_){var S="leaflet-pane"+(p?" leaflet-"+p.replace("Pane","")+"-pane":""),C=$t("div",S,_||this._mapPane);return p&&(this._panes[p]=C),C},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var p=this.getPixelBounds(),_=this.unproject(p.getBottomLeft()),S=this.unproject(p.getTopRight());return new ne(_,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(p,_,S){p=U(p),S=Y(S||[0,0]);var C=this.getZoom()||0,F=this.getMinZoom(),V=this.getMaxZoom(),re=p.getNorthWest(),fe=p.getSouthEast(),ce=this.getSize().subtract(S),we=ae(this.project(fe,C),this.project(re,C)).getSize(),ze=Ge.any3d?this.options.zoomSnap:1,et=ce.x/we.x,vt=ce.y/we.y,Sa=_?Math.max(et,vt):Math.min(et,vt);return C=this.getScaleZoom(Sa,C),ze&&(C=Math.round(C/(ze/100))*(ze/100),C=_?Math.ceil(C/ze)*ze:Math.floor(C/ze)*ze),Math.max(F,Math.min(V,C))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(p,_){var S=this._getTopLeftPoint(p,_);return new Z(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(p){return this.options.crs.getProjectedBounds(p===void 0?this.getZoom():p)},getPane:function(p){return typeof p=="string"?this._panes[p]:p},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(p,_){var S=this.options.crs;return _=_===void 0?this._zoom:_,S.scale(p)/S.scale(_)},getScaleZoom:function(p,_){var S=this.options.crs;_=_===void 0?this._zoom:_;var C=S.zoom(p*S.scale(_));return isNaN(C)?1/0:C},project:function(p,_){return _=_===void 0?this._zoom:_,this.options.crs.latLngToPoint(ue(p),_)},unproject:function(p,_){return _=_===void 0?this._zoom:_,this.options.crs.pointToLatLng(Y(p),_)},layerPointToLatLng:function(p){var _=Y(p).add(this.getPixelOrigin());return this.unproject(_)},latLngToLayerPoint:function(p){var _=this.project(ue(p))._round();return _._subtract(this.getPixelOrigin())},wrapLatLng:function(p){return this.options.crs.wrapLatLng(ue(p))},wrapLatLngBounds:function(p){return this.options.crs.wrapLatLngBounds(U(p))},distance:function(p,_){return this.options.crs.distance(ue(p),ue(_))},containerPointToLayerPoint:function(p){return Y(p).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(p){return Y(p).add(this._getMapPanePos())},containerPointToLatLng:function(p){var _=this.containerPointToLayerPoint(Y(p));return this.layerPointToLatLng(_)},latLngToContainerPoint:function(p){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(p)))},mouseEventToContainerPoint:function(p){return _y(p,this._container)},mouseEventToLayerPoint:function(p){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(p))},mouseEventToLatLng:function(p){return this.layerPointToLatLng(this.mouseEventToLayerPoint(p))},_initContainer:function(p){var _=this._container=lp(p);if(_){if(_._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ot(_,"scroll",this._onScroll,this),this._containerId=l(_)},_initLayout:function(){var p=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ge.any3d,at(p,"leaflet-container"+(Ge.touch?" leaflet-touch":"")+(Ge.retina?" leaflet-retina":"")+(Ge.ielt9?" leaflet-oldie":"")+(Ge.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var _=eo(p,"position");_!=="absolute"&&_!=="relative"&&_!=="fixed"&&_!=="sticky"&&(p.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var p=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),In(this._mapPane,new ee(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(at(p.markerPane,"leaflet-zoom-hide"),at(p.shadowPane,"leaflet-zoom-hide"))},_resetView:function(p,_,S){In(this._mapPane,new ee(0,0));var C=!this._loaded;this._loaded=!0,_=this._limitZoom(_),this.fire("viewprereset");var F=this._zoom!==_;this._moveStart(F,S)._move(p,_)._moveEnd(F),this.fire("viewreset"),C&&this.fire("load")},_moveStart:function(p,_){return p&&this.fire("zoomstart"),_||this.fire("movestart"),this},_move:function(p,_,S,C){_===void 0&&(_=this._zoom);var F=this._zoom!==_;return this._zoom=_,this._lastCenter=p,this._pixelOrigin=this._getNewPixelOrigin(p),C?S&&S.pinch&&this.fire("zoom",S):((F||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(p){return p&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(p){In(this._mapPane,this._getMapPanePos().subtract(p))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(p){this._targets={},this._targets[l(this._container)]=this;var _=p?Vt:ot;_(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&_(window,"resize",this._onResize,this),Ge.any3d&&this.options.transform3DLimit&&(p?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Q(this._resizeRequest),this._resizeRequest=z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var p=this._getMapPanePos();Math.max(Math.abs(p.x),Math.abs(p.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(p,_){for(var S=[],C,F=_==="mouseout"||_==="mouseover",V=p.target||p.srcElement,re=!1;V;){if(C=this._targets[l(V)],C&&(_==="click"||_==="preclick")&&this._draggableMoved(C)){re=!0;break}if(C&&C.listens(_,!0)&&(F&&!pp(V,p)||(S.push(C),F))||V===this._container)break;V=V.parentNode}return!S.length&&!re&&!F&&this.listens(_,!0)&&(S=[this]),S},_isClickDisabled:function(p){for(;p&&p!==this._container;){if(p._leaflet_disable_click)return!0;p=p.parentNode}},_handleDOMEvent:function(p){var _=p.target||p.srcElement;if(!(!this._loaded||_._leaflet_disable_events||p.type==="click"&&this._isClickDisabled(_))){var S=p.type;S==="mousedown"&&vy(_),this._fireDOMEvent(p,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(p,_,S){if(p.type==="click"){var C=a({},p);C.type="preclick",this._fireDOMEvent(C,C.type,S)}var F=this._findEventTargets(p,_);if(S){for(var V=[],re=0;re<S.length;re++)S[re].listens(_,!0)&&V.push(S[re]);F=V.concat(F)}if(F.length){_==="contextmenu"&&xn(p);var fe=F[0],ce={originalEvent:p};if(p.type!=="keypress"&&p.type!=="keydown"&&p.type!=="keyup"){var we=fe.getLatLng&&(!fe._radius||fe._radius<=10);ce.containerPoint=we?this.latLngToContainerPoint(fe.getLatLng()):this.mouseEventToContainerPoint(p),ce.layerPoint=this.containerPointToLayerPoint(ce.containerPoint),ce.latlng=we?fe.getLatLng():this.layerPointToLatLng(ce.layerPoint)}for(re=0;re<F.length;re++)if(F[re].fire(_,ce,!0),ce.originalEvent._stopped||F[re].options.bubblingMouseEvents===!1&&O(this._mouseEvents,_)!==-1)return}},_draggableMoved:function(p){return p=p.dragging&&p.dragging.enabled()?p:this,p.dragging&&p.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var p=0,_=this._handlers.length;p<_;p++)this._handlers[p].disable()},whenReady:function(p,_){return this._loaded?p.call(_||this,{target:this}):this.on("load",p,_),this},_getMapPanePos:function(){return qs(this._mapPane)||new ee(0,0)},_moved:function(){var p=this._getMapPanePos();return p&&!p.equals([0,0])},_getTopLeftPoint:function(p,_){var S=p&&_!==void 0?this._getNewPixelOrigin(p,_):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(p,_){var S=this.getSize()._divideBy(2);return this.project(p,_)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(p,_,S){var C=this._getNewPixelOrigin(S,_);return this.project(p,_)._subtract(C)},_latLngBoundsToNewLayerBounds:function(p,_,S){var C=this._getNewPixelOrigin(S,_);return ae([this.project(p.getSouthWest(),_)._subtract(C),this.project(p.getNorthWest(),_)._subtract(C),this.project(p.getSouthEast(),_)._subtract(C),this.project(p.getNorthEast(),_)._subtract(C)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(p){return this.latLngToLayerPoint(p).subtract(this._getCenterLayerPoint())},_limitCenter:function(p,_,S){if(!S)return p;var C=this.project(p,_),F=this.getSize().divideBy(2),V=new Z(C.subtract(F),C.add(F)),re=this._getBoundsOffset(V,S,_);return Math.abs(re.x)<=1&&Math.abs(re.y)<=1?p:this.unproject(C.add(re),_)},_limitOffset:function(p,_){if(!_)return p;var S=this.getPixelBounds(),C=new Z(S.min.add(p),S.max.add(p));return p.add(this._getBoundsOffset(C,_))},_getBoundsOffset:function(p,_,S){var C=ae(this.project(_.getNorthEast(),S),this.project(_.getSouthWest(),S)),F=C.min.subtract(p.min),V=C.max.subtract(p.max),re=this._rebound(F.x,-V.x),fe=this._rebound(F.y,-V.y);return new ee(re,fe)},_rebound:function(p,_){return p+_>0?Math.round(p-_)/2:Math.max(0,Math.ceil(p))-Math.max(0,Math.floor(_))},_limitZoom:function(p){var _=this.getMinZoom(),S=this.getMaxZoom(),C=Ge.any3d?this.options.zoomSnap:1;return C&&(p=Math.round(p/C)*C),Math.max(_,Math.min(S,p))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(p,_){var S=this._getCenterOffset(p)._trunc();return(_&&_.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,_),!0)},_createAnimProxy:function(){var p=this._proxy=$t("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(p),this.on("zoomanim",function(_){var S=gy,C=this._proxy.style[S];Zl(this._proxy,this.project(_.center,_.zoom),this.getZoomScale(_.zoom,1)),C===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){un(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var p=this.getCenter(),_=this.getZoom();Zl(this._proxy,this.project(p,_),this.getZoomScale(_,1))},_catchTransitionEnd:function(p){this._animatingZoom&&p.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(p,_,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(_-this._zoom)>this.options.zoomAnimationThreshold)return!1;var C=this.getZoomScale(_),F=this._getCenterOffset(p)._divideBy(1-1/C);return S.animate!==!0&&!this.getSize().contains(F)?!1:(z(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(p,_,!0)},this),!0)},_animateZoom:function(p,_,S,C){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=p,this._animateToZoom=_,at(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:p,zoom:_,noUpdate:C}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function gp(p,_){return new st(p,_)}var Ar=W.extend({options:{position:"topright"},initialize:function(p){x(this,p)},getPosition:function(){return this.options.position},setPosition:function(p){var _=this._map;return _&&_.removeControl(this),this.options.position=p,_&&_.addControl(this),this},getContainer:function(){return this._container},addTo:function(p){this.remove(),this._map=p;var _=this._container=this.onAdd(p),S=this.getPosition(),C=p._controlCorners[S];return at(_,"leaflet-control"),S.indexOf("bottom")!==-1?C.insertBefore(_,C.firstChild):C.appendChild(_),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(un(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(p){this._map&&p&&p.screenX>0&&p.screenY>0&&this._map.getContainer().focus()}}),hi=function(p){return new Ar(p)};st.include({addControl:function(p){return p.addTo(this),this},removeControl:function(p){return p.remove(),this},_initControlPos:function(){var p=this._controlCorners={},_="leaflet-",S=this._controlContainer=$t("div",_+"control-container",this._container);function C(F,V){var re=_+F+" "+_+V;p[F+V]=$t("div",re,S)}C("top","left"),C("top","right"),C("bottom","left"),C("bottom","right")},_clearControlPos:function(){for(var p in this._controlCorners)un(this._controlCorners[p]);un(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Jl=Ar.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(p,_,S,C){return S<C?-1:C<S?1:0}},initialize:function(p,_,S){x(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var C in p)this._addLayer(p[C],C);for(C in _)this._addLayer(_[C],C,!0)},onAdd:function(p){this._initLayout(),this._update(),this._map=p,p.on("zoomend",this._checkDisabledLayers,this);for(var _=0;_<this._layers.length;_++)this._layers[_].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(p){return Ar.prototype.addTo.call(this,p),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(p,_){return this._addLayer(p,_),this._map?this._update():this},addOverlay:function(p,_){return this._addLayer(p,_,!0),this._map?this._update():this},removeLayer:function(p){p.off("add remove",this._onLayerChange,this);var _=this._getLayer(l(p));return _&&this._layers.splice(this._layers.indexOf(_),1),this._map?this._update():this},expand:function(){at(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var p=this._map.getSize().y-(this._container.offsetTop+50);return p<this._section.clientHeight?(at(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=p+"px"):zt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var p="leaflet-control-layers",_=this._container=$t("div",p),S=this.options.collapsed;_.setAttribute("aria-haspopup",!0),hd(_),ac(_);var C=this._section=$t("section",p+"-list");S&&(this._map.on("click",this.collapse,this),ot(_,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var F=this._layersLink=$t("a",p+"-toggle",_);F.href="#",F.title="Layers",F.setAttribute("role","button"),ot(F,{keydown:function(V){V.keyCode===13&&this._expandSafely()},click:function(V){xn(V),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=$t("div",p+"-base",C),this._separator=$t("div",p+"-separator",C),this._overlaysList=$t("div",p+"-overlays",C),_.appendChild(C)},_getLayer:function(p){for(var _=0;_<this._layers.length;_++)if(this._layers[_]&&l(this._layers[_].layer)===p)return this._layers[_]},_addLayer:function(p,_,S){this._map&&p.on("add remove",this._onLayerChange,this),this._layers.push({layer:p,name:_,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function(C,F){return this.options.sortFunction(C.layer,F.layer,C.name,F.name)},this)),this.options.autoZIndex&&p.setZIndex&&(this._lastZIndex++,p.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;up(this._baseLayersList),up(this._overlaysList),this._layerControlInputs=[];var p,_,S,C,F=0;for(S=0;S<this._layers.length;S++)C=this._layers[S],this._addItem(C),_=_||C.overlay,p=p||!C.overlay,F+=C.overlay?0:1;return this.options.hideSingleBase&&(p=p&&F>1,this._baseLayersList.style.display=p?"":"none"),this._separator.style.display=_&&p?"":"none",this},_onLayerChange:function(p){this._handlingClick||this._update();var _=this._getLayer(l(p.target)),S=_.overlay?p.type==="add"?"overlayadd":"overlayremove":p.type==="add"?"baselayerchange":null;S&&this._map.fire(S,_)},_createRadioElement:function(p,_){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+p+'"'+(_?' checked="checked"':"")+"/>",C=document.createElement("div");return C.innerHTML=S,C.firstChild},_addItem:function(p){var _=document.createElement("label"),S=this._map.hasLayer(p.layer),C;p.overlay?(C=document.createElement("input"),C.type="checkbox",C.className="leaflet-control-layers-selector",C.defaultChecked=S):C=this._createRadioElement("leaflet-base-layers_"+l(this),S),this._layerControlInputs.push(C),C.layerId=l(p.layer),ot(C,"click",this._onInputClick,this);var F=document.createElement("span");F.innerHTML=" "+p.name;var V=document.createElement("span");_.appendChild(V),V.appendChild(C),V.appendChild(F);var re=p.overlay?this._overlaysList:this._baseLayersList;return re.appendChild(_),this._checkDisabledLayers(),_},_onInputClick:function(){if(!this._preventClick){var p=this._layerControlInputs,_,S,C=[],F=[];this._handlingClick=!0;for(var V=p.length-1;V>=0;V--)_=p[V],S=this._getLayer(_.layerId).layer,_.checked?C.push(S):_.checked||F.push(S);for(V=0;V<F.length;V++)this._map.hasLayer(F[V])&&this._map.removeLayer(F[V]);for(V=0;V<C.length;V++)this._map.hasLayer(C[V])||this._map.addLayer(C[V]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var p=this._layerControlInputs,_,S,C=this._map.getZoom(),F=p.length-1;F>=0;F--)_=p[F],S=this._getLayer(_.layerId).layer,_.disabled=S.options.minZoom!==void 0&&C<S.options.minZoom||S.options.maxZoom!==void 0&&C>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var p=this._section;this._preventClick=!0,ot(p,"click",xn),this.expand();var _=this;setTimeout(function(){Vt(p,"click",xn),_._preventClick=!1})}}),CS=function(p,_,S){return new Jl(p,_,S)},Us=Ar.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(p){var _="leaflet-control-zoom",S=$t("div",_+" leaflet-bar"),C=this.options;return this._zoomInButton=this._createButton(C.zoomInText,C.zoomInTitle,_+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(C.zoomOutText,C.zoomOutTitle,_+"-out",S,this._zoomOut),this._updateDisabled(),p.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(p){p.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(p){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(p.shiftKey?3:1))},_zoomOut:function(p){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(p.shiftKey?3:1))},_createButton:function(p,_,S,C,F){var V=$t("a",S,C);return V.innerHTML=p,V.href="#",V.title=_,V.setAttribute("role","button"),V.setAttribute("aria-label",_),hd(V),ot(V,"click",js),ot(V,"click",F,this),ot(V,"click",this._refocusOnMap,this),V},_updateDisabled:function(){var p=this._map,_="leaflet-disabled";zt(this._zoomInButton,_),zt(this._zoomOutButton,_),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||p._zoom===p.getMinZoom())&&(at(this._zoomOutButton,_),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||p._zoom===p.getMaxZoom())&&(at(this._zoomInButton,_),this._zoomInButton.setAttribute("aria-disabled","true"))}});st.mergeOptions({zoomControl:!0}),st.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Us,this.addControl(this.zoomControl))});var W0=function(p){return new Us(p)},Kl=Ar.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(p){var _="leaflet-control-scale",S=$t("div",_),C=this.options;return this._addScales(C,_+"-line",S),p.on(C.updateWhenIdle?"moveend":"move",this._update,this),p.whenReady(this._update,this),S},onRemove:function(p){p.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(p,_,S){p.metric&&(this._mScale=$t("div",_,S)),p.imperial&&(this._iScale=$t("div",_,S))},_update:function(){var p=this._map,_=p.getSize().y/2,S=p.distance(p.containerPointToLatLng([0,_]),p.containerPointToLatLng([this.options.maxWidth,_]));this._updateScales(S)},_updateScales:function(p){this.options.metric&&p&&this._updateMetric(p),this.options.imperial&&p&&this._updateImperial(p)},_updateMetric:function(p){var _=this._getRoundNum(p),S=_<1e3?_+" m":_/1e3+" km";this._updateScale(this._mScale,S,_/p)},_updateImperial:function(p){var _=p*3.2808399,S,C,F;_>5280?(S=_/5280,C=this._getRoundNum(S),this._updateScale(this._iScale,C+" mi",C/S)):(F=this._getRoundNum(_),this._updateScale(this._iScale,F+" ft",F/_))},_updateScale:function(p,_,S){p.style.width=Math.round(this.options.maxWidth*S)+"px",p.innerHTML=_},_getRoundNum:function(p){var _=Math.pow(10,(Math.floor(p)+"").length-1),S=p/_;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,_*S}}),RS=function(p){return new Kl(p)},io='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',mp=Ar.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ge.inlineSvg?io+" ":"")+"Leaflet</a>"},initialize:function(p){x(this,p),this._attributions={}},onAdd:function(p){p.attributionControl=this,this._container=$t("div","leaflet-control-attribution"),hd(this._container);for(var _ in p._layers)p._layers[_].getAttribution&&this.addAttribution(p._layers[_].getAttribution());return this._update(),p.on("layeradd",this._addAttribution,this),this._container},onRemove:function(p){p.off("layeradd",this._addAttribution,this)},_addAttribution:function(p){p.layer.getAttribution&&(this.addAttribution(p.layer.getAttribution()),p.layer.once("remove",function(){this.removeAttribution(p.layer.getAttribution())},this))},setPrefix:function(p){return this.options.prefix=p,this._update(),this},addAttribution:function(p){return p?(this._attributions[p]||(this._attributions[p]=0),this._attributions[p]++,this._update(),this):this},removeAttribution:function(p){return p?(this._attributions[p]&&(this._attributions[p]--,this._update()),this):this},_update:function(){if(this._map){var p=[];for(var _ in this._attributions)this._attributions[_]&&p.push(_);var S=[];this.options.prefix&&S.push(this.options.prefix),p.length&&S.push(p.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});st.mergeOptions({attributionControl:!0}),st.addInitHook(function(){this.options.attributionControl&&new mp().addTo(this)});var IS=function(p){return new mp(p)};Ar.Layers=Jl,Ar.Zoom=Us,Ar.Scale=Kl,Ar.Attribution=mp,hi.layers=CS,hi.zoom=W0,hi.scale=RS,hi.attribution=IS;var ao=W.extend({initialize:function(p){this._map=p},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ao.addTo=function(p,_){return p.addHandler(_,this),this};var PS={Events:K},G0=Ge.touch?"touchstart mousedown":"mousedown",Bs=se.extend({options:{clickTolerance:3},initialize:function(p,_,S,C){x(this,C),this._element=p,this._dragStartTarget=_||p,this._preventOutline=S},enable:function(){this._enabled||(ot(this._dragStartTarget,G0,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Bs._dragging===this&&this.finishDrag(!0),Vt(this._dragStartTarget,G0,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(p){if(this._enabled&&(this._moved=!1,!dp(this._element,"leaflet-zoom-anim"))){if(p.touches&&p.touches.length!==1){Bs._dragging===this&&this.finishDrag();return}if(!(Bs._dragging||p.shiftKey||p.which!==1&&p.button!==1&&!p.touches)&&(Bs._dragging=this,this._preventOutline&&vy(this._element),yy(),Bo(),!this._moving)){this.fire("down");var _=p.touches?p.touches[0]:p,S=ka(this._element);this._startPoint=new ee(_.clientX,_.clientY),this._startPos=qs(this._element),this._parentScale=Zi(S);var C=p.type==="mousedown";ot(document,C?"mousemove":"touchmove",this._onMove,this),ot(document,C?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(p){if(this._enabled){if(p.touches&&p.touches.length>1){this._moved=!0;return}var _=p.touches&&p.touches.length===1?p.touches[0]:p,S=new ee(_.clientX,_.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,xn(p),this._moved||(this.fire("dragstart"),this._moved=!0,at(document.body,"leaflet-dragging"),this._lastTarget=p.target||p.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),at(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=p,this._updatePosition())}},_updatePosition:function(){var p={originalEvent:this._lastEvent};this.fire("predrag",p),In(this._element,this._newPos),this.fire("drag",p)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(p){zt(document.body,"leaflet-dragging"),this._lastTarget&&(zt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Vt(document,"mousemove touchmove",this._onMove,this),Vt(document,"mouseup touchend touchcancel",this._onUp,this),nc(),dd();var _=this._moved&&this._moving;this._moving=!1,Bs._dragging=!1,_&&this.fire("dragend",{noInertia:p,distance:this._newPos.distanceTo(this._startPos)})}});function H0(p,_,S){var C,F=[1,4,2,8],V,re,fe,ce,we,ze,et,vt;for(V=0,ze=p.length;V<ze;V++)p[V]._code=jn(p[V],_);for(fe=0;fe<4;fe++){for(et=F[fe],C=[],V=0,ze=p.length,re=ze-1;V<ze;re=V++)ce=p[V],we=p[re],ce._code&et?we._code&et||(vt=rc(we,ce,et,_,S),vt._code=jn(vt,_),C.push(vt)):(we._code&et&&(vt=rc(we,ce,et,_,S),vt._code=jn(vt,_),C.push(vt)),C.push(ce));p=C}return p}function Y0(p,_){var S,C,F,V,re,fe,ce,we,ze;if(!p||p.length===0)throw new Error("latlngs not passed");Ea(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var et=ue([0,0]),vt=U(p),Sa=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());Sa<1700&&(et=Wo(p));var pi=p.length,lo=[];for(S=0;S<pi;S++){var tr=ue(p[S]);lo.push(_.project(ue([tr.lat-et.lat,tr.lng-et.lng])))}for(fe=ce=we=0,S=0,C=pi-1;S<pi;C=S++)F=lo[S],V=lo[C],re=F.y*V.x-V.y*F.x,ce+=(F.x+V.x)*re,we+=(F.y+V.y)*re,fe+=re*3;fe===0?ze=lo[0]:ze=[ce/fe,we/fe];var $p=_.unproject(Y(ze));return ue([$p.lat+et.lat,$p.lng+et.lng])}function Wo(p){for(var _=0,S=0,C=0,F=0;F<p.length;F++){var V=ue(p[F]);_+=V.lat,S+=V.lng,C++}return ue([_/C,S/C])}var $a={__proto__:null,clipPolygon:H0,polygonCenter:Y0,centroid:Wo};function X0(p,_){if(!_||!p.length)return p.slice();var S=_*_;return p=Sy(p,S),p=Ey(p,S),p}function $y(p,_,S){return Math.sqrt(sc(p,_,S,!0))}function FS(p,_,S){return sc(p,_,S)}function Ey(p,_){var S=p.length,C=typeof Uint8Array<"u"?Uint8Array:Array,F=new C(S);F[0]=F[S-1]=1,yp(p,F,_,0,S-1);var V,re=[];for(V=0;V<S;V++)F[V]&&re.push(p[V]);return re}function yp(p,_,S,C,F){var V=0,re,fe,ce;for(fe=C+1;fe<=F-1;fe++)ce=sc(p[fe],p[C],p[F],!0),ce>V&&(re=fe,V=ce);V>S&&(_[re]=1,yp(p,_,S,C,re),yp(p,_,S,re,F))}function Sy(p,_){for(var S=[p[0]],C=1,F=0,V=p.length;C<V;C++)oc(p[C],p[F])>_&&(S.push(p[C]),F=C);return F<V-1&&S.push(p[V-1]),S}var Ty;function er(p,_,S,C,F){var V=C?Ty:jn(p,S),re=jn(_,S),fe,ce,we;for(Ty=re;;){if(!(V|re))return[p,_];if(V&re)return!1;fe=V||re,ce=rc(p,_,fe,S,F),we=jn(ce,S),fe===V?(p=ce,V=we):(_=ce,re=we)}}function rc(p,_,S,C,F){var V=_.x-p.x,re=_.y-p.y,fe=C.min,ce=C.max,we,ze;return S&8?(we=p.x+V*(ce.y-p.y)/re,ze=ce.y):S&4?(we=p.x+V*(fe.y-p.y)/re,ze=fe.y):S&2?(we=ce.x,ze=p.y+re*(ce.x-p.x)/V):S&1&&(we=fe.x,ze=p.y+re*(fe.x-p.x)/V),new ee(we,ze,F)}function jn(p,_){var S=0;return p.x<_.min.x?S|=1:p.x>_.max.x&&(S|=2),p.y<_.min.y?S|=4:p.y>_.max.y&&(S|=8),S}function oc(p,_){var S=_.x-p.x,C=_.y-p.y;return S*S+C*C}function sc(p,_,S,C){var F=_.x,V=_.y,re=S.x-F,fe=S.y-V,ce=re*re+fe*fe,we;return ce>0&&(we=((p.x-F)*re+(p.y-V)*fe)/ce,we>1?(F=S.x,V=S.y):we>0&&(F+=re*we,V+=fe*we)),re=p.x-F,fe=p.y-V,C?re*re+fe*fe:new ee(F,V)}function Ea(p){return!T(p[0])||typeof p[0][0]!="object"&&typeof p[0][0]<"u"}function Ay(p){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ea(p)}function Oy(p,_){var S,C,F,V,re,fe,ce,we;if(!p||p.length===0)throw new Error("latlngs not passed");Ea(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var ze=ue([0,0]),et=U(p),vt=et.getNorthWest().distanceTo(et.getSouthWest())*et.getNorthEast().distanceTo(et.getNorthWest());vt<1700&&(ze=Wo(p));var Sa=p.length,pi=[];for(S=0;S<Sa;S++){var lo=ue(p[S]);pi.push(_.project(ue([lo.lat-ze.lat,lo.lng-ze.lng])))}for(S=0,C=0;S<Sa-1;S++)C+=pi[S].distanceTo(pi[S+1])/2;if(C===0)we=pi[0];else for(S=0,V=0;S<Sa-1;S++)if(re=pi[S],fe=pi[S+1],F=re.distanceTo(fe),V+=F,V>C){ce=(V-C)/F,we=[fe.x-ce*(fe.x-re.x),fe.y-ce*(fe.y-re.y)];break}var tr=_.unproject(Y(we));return ue([tr.lat+ze.lat,tr.lng+ze.lng])}var Dy={__proto__:null,simplify:X0,pointToSegmentDistance:$y,closestPointOnSegment:FS,clipSegment:er,_getEdgeIntersection:rc,_getBitCode:jn,_sqClosestPointOnSegment:sc,isFlat:Ea,_flat:Ay,polylineCenter:Oy},Cy={project:function(p){return new ee(p.lng,p.lat)},unproject:function(p){return new X(p.y,p.x)},bounds:new Z([-180,-90],[180,90])},Ry={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(p){var _=Math.PI/180,S=this.R,C=p.lat*_,F=this.R_MINOR/S,V=Math.sqrt(1-F*F),re=V*Math.sin(C),fe=Math.tan(Math.PI/4-C/2)/Math.pow((1-re)/(1+re),V/2);return C=-S*Math.log(Math.max(fe,1e-10)),new ee(p.lng*_*S,C)},unproject:function(p){for(var _=180/Math.PI,S=this.R,C=this.R_MINOR/S,F=Math.sqrt(1-C*C),V=Math.exp(-p.y/S),re=Math.PI/2-2*Math.atan(V),fe=0,ce=.1,we;fe<15&&Math.abs(ce)>1e-7;fe++)we=F*Math.sin(re),we=Math.pow((1-we)/(1+we),F/2),ce=Math.PI/2-2*Math.atan(V*we)-re,re+=ce;return new X(re*_,p.x*_/S)}},NS={__proto__:null,LonLat:Cy,Mercator:Ry,SphericalMercator:xe},LS=a({},ie,{code:"EPSG:3395",projection:Ry,transformation:function(){var p=.5/(Math.PI*Ry.R);return G(p,.5,-p,.5)}()}),Z0=a({},ie,{code:"EPSG:4326",projection:Cy,transformation:G(1/180,1,-1/180,.5)}),MS=a({},Ce,{projection:Cy,transformation:G(1,0,-1,0),scale:function(p){return Math.pow(2,p)},zoom:function(p){return Math.log(p)/Math.LN2},distance:function(p,_){var S=_.lng-p.lng,C=_.lat-p.lat;return Math.sqrt(S*S+C*C)},infinite:!0});Ce.Earth=ie,Ce.EPSG3395=LS,Ce.EPSG3857=kt,Ce.EPSG900913=pt,Ce.EPSG4326=Z0,Ce.Simple=MS;var Or=se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(p){return p.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(p){return p&&p.removeLayer(this),this},getPane:function(p){return this._map.getPane(p?this.options[p]||p:this.options.pane)},addInteractiveTarget:function(p){return this._map._targets[l(p)]=this,this},removeInteractiveTarget:function(p){return delete this._map._targets[l(p)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(p){var _=p.target;if(_.hasLayer(this)){if(this._map=_,this._zoomAnimated=_._zoomAnimated,this.getEvents){var S=this.getEvents();_.on(S,this),this.once("remove",function(){_.off(S,this)},this)}this.onAdd(_),this.fire("add"),_.fire("layeradd",{layer:this})}}});st.include({addLayer:function(p){if(!p._layerAdd)throw new Error("The provided object is not a Layer.");var _=l(p);return this._layers[_]?this:(this._layers[_]=p,p._mapToAdd=this,p.beforeAdd&&p.beforeAdd(this),this.whenReady(p._layerAdd,p),this)},removeLayer:function(p){var _=l(p);return this._layers[_]?(this._loaded&&p.onRemove(this),delete this._layers[_],this._loaded&&(this.fire("layerremove",{layer:p}),p.fire("remove")),p._map=p._mapToAdd=null,this):this},hasLayer:function(p){return l(p)in this._layers},eachLayer:function(p,_){for(var S in this._layers)p.call(_,this._layers[S]);return this},_addLayers:function(p){p=p?T(p)?p:[p]:[];for(var _=0,S=p.length;_<S;_++)this.addLayer(p[_])},_addZoomLimit:function(p){(!isNaN(p.options.maxZoom)||!isNaN(p.options.minZoom))&&(this._zoomBoundLayers[l(p)]=p,this._updateZoomLevels())},_removeZoomLimit:function(p){var _=l(p);this._zoomBoundLayers[_]&&(delete this._zoomBoundLayers[_],this._updateZoomLevels())},_updateZoomLevels:function(){var p=1/0,_=-1/0,S=this._getZoomSpan();for(var C in this._zoomBoundLayers){var F=this._zoomBoundLayers[C].options;p=F.minZoom===void 0?p:Math.min(p,F.minZoom),_=F.maxZoom===void 0?_:Math.max(_,F.maxZoom)}this._layersMaxZoom=_===-1/0?void 0:_,this._layersMinZoom=p===1/0?void 0:p,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pd=Or.extend({initialize:function(p,_){x(this,_),this._layers={};var S,C;if(p)for(S=0,C=p.length;S<C;S++)this.addLayer(p[S])},addLayer:function(p){var _=this.getLayerId(p);return this._layers[_]=p,this._map&&this._map.addLayer(p),this},removeLayer:function(p){var _=p in this._layers?p:this.getLayerId(p);return this._map&&this._layers[_]&&this._map.removeLayer(this._layers[_]),delete this._layers[_],this},hasLayer:function(p){var _=typeof p=="number"?p:this.getLayerId(p);return _ in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(p){var _=Array.prototype.slice.call(arguments,1),S,C;for(S in this._layers)C=this._layers[S],C[p]&&C[p].apply(C,_);return this},onAdd:function(p){this.eachLayer(p.addLayer,p)},onRemove:function(p){this.eachLayer(p.removeLayer,p)},eachLayer:function(p,_){for(var S in this._layers)p.call(_,this._layers[S]);return this},getLayer:function(p){return this._layers[p]},getLayers:function(){var p=[];return this.eachLayer(p.push,p),p},setZIndex:function(p){return this.invoke("setZIndex",p)},getLayerId:function(p){return l(p)}}),J0=function(p,_){return new pd(p,_)},Go=pd.extend({addLayer:function(p){return this.hasLayer(p)?this:(p.addEventParent(this),pd.prototype.addLayer.call(this,p),this.fire("layeradd",{layer:p}))},removeLayer:function(p){return this.hasLayer(p)?(p in this._layers&&(p=this._layers[p]),p.removeEventParent(this),pd.prototype.removeLayer.call(this,p),this.fire("layerremove",{layer:p})):this},setStyle:function(p){return this.invoke("setStyle",p)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var p=new ne;for(var _ in this._layers){var S=this._layers[_];p.extend(S.getBounds?S.getBounds():S.getLatLng())}return p}}),K0=function(p,_){return new Go(p,_)},gd=W.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(p){x(this,p)},createIcon:function(p){return this._createIcon("icon",p)},createShadow:function(p){return this._createIcon("shadow",p)},_createIcon:function(p,_){var S=this._getIconUrl(p);if(!S){if(p==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var C=this._createImg(S,_&&_.tagName==="IMG"?_:null);return this._setIconStyles(C,p),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),C},_setIconStyles:function(p,_){var S=this.options,C=S[_+"Size"];typeof C=="number"&&(C=[C,C]);var F=Y(C),V=Y(_==="shadow"&&S.shadowAnchor||S.iconAnchor||F&&F.divideBy(2,!0));p.className="leaflet-marker-"+_+" "+(S.className||""),V&&(p.style.marginLeft=-V.x+"px",p.style.marginTop=-V.y+"px"),F&&(p.style.width=F.x+"px",p.style.height=F.y+"px")},_createImg:function(p,_){return _=_||document.createElement("img"),_.src=p,_},_getIconUrl:function(p){return Ge.retina&&this.options[p+"RetinaUrl"]||this.options[p+"Url"]}});function zS(p){return new gd(p)}var lc=gd.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(p){return typeof lc.imagePath!="string"&&(lc.imagePath=this._detectIconPath()),(this.options.imagePath||lc.imagePath)+gd.prototype._getIconUrl.call(this,p)},_stripUrl:function(p){var _=function(S,C,F){var V=C.exec(S);return V&&V[F]};return p=_(p,/^url\((['"])?(.+)\1\)$/,2),p&&_(p,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var p=$t("div","leaflet-default-icon-path",document.body),_=eo(p,"background-image")||eo(p,"backgroundImage");if(document.body.removeChild(p),_=this._stripUrl(_),_)return _;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),Q0=ao.extend({initialize:function(p){this._marker=p},addHooks:function(){var p=this._marker._icon;this._draggable||(this._draggable=new Bs(p,p,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),at(p,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(p){var _=this._marker,S=_._map,C=this._marker.options.autoPanSpeed,F=this._marker.options.autoPanPadding,V=qs(_._icon),re=S.getPixelBounds(),fe=S.getPixelOrigin(),ce=ae(re.min._subtract(fe).add(F),re.max._subtract(fe).subtract(F));if(!ce.contains(V)){var we=Y((Math.max(ce.max.x,V.x)-ce.max.x)/(re.max.x-ce.max.x)-(Math.min(ce.min.x,V.x)-ce.min.x)/(re.min.x-ce.min.x),(Math.max(ce.max.y,V.y)-ce.max.y)/(re.max.y-ce.max.y)-(Math.min(ce.min.y,V.y)-ce.min.y)/(re.min.y-ce.min.y)).multiplyBy(C);S.panBy(we,{animate:!1}),this._draggable._newPos._add(we),this._draggable._startPos._add(we),In(_._icon,this._draggable._newPos),this._onDrag(p),this._panRequest=z(this._adjustPan.bind(this,p))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(p){this._marker.options.autoPan&&(Q(this._panRequest),this._panRequest=z(this._adjustPan.bind(this,p)))},_onDrag:function(p){var _=this._marker,S=_._shadow,C=qs(_._icon),F=_._map.layerPointToLatLng(C);S&&In(S,C),_._latlng=F,p.latlng=F,p.oldLatLng=this._oldLatLng,_.fire("move",p).fire("drag",p)},_onDragEnd:function(p){Q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",p)}}),vp=Or.extend({options:{icon:new lc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(p,_){x(this,_),this._latlng=ue(p)},onAdd:function(p){this._zoomAnimated=this._zoomAnimated&&p.options.markerZoomAnimation,this._zoomAnimated&&p.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(p){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&p.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(p){var _=this._latlng;return this._latlng=ue(p),this.update(),this.fire("move",{oldLatLng:_,latlng:this._latlng})},setZIndexOffset:function(p){return this.options.zIndexOffset=p,this.update()},getIcon:function(){return this.options.icon},setIcon:function(p){return this.options.icon=p,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var p=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(p)}return this},_initIcon:function(){var p=this.options,_="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=p.icon.createIcon(this._icon),C=!1;S!==this._icon&&(this._icon&&this._removeIcon(),C=!0,p.title&&(S.title=p.title),S.tagName==="IMG"&&(S.alt=p.alt||"")),at(S,_),p.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,p.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ot(S,"focus",this._panOnFocus,this);var F=p.icon.createShadow(this._shadow),V=!1;F!==this._shadow&&(this._removeShadow(),V=!0),F&&(at(F,_),F.alt=""),this._shadow=F,p.opacity<1&&this._updateOpacity(),C&&this.getPane().appendChild(this._icon),this._initInteraction(),F&&V&&this.getPane(p.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Vt(this._icon,"focus",this._panOnFocus,this),un(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&un(this._shadow),this._shadow=null},_setPos:function(p){this._icon&&In(this._icon,p),this._shadow&&In(this._shadow,p),this._zIndex=p.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(p){this._icon&&(this._icon.style.zIndex=this._zIndex+p)},_animateZoom:function(p){var _=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center).round();this._setPos(_)},_initInteraction:function(){if(this.options.interactive&&(at(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Q0)){var p=this.options.draggable;this.dragging&&(p=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Q0(this),p&&this.dragging.enable()}},setOpacity:function(p){return this.options.opacity=p,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var p=this.options.opacity;this._icon&&Kn(this._icon,p),this._shadow&&Kn(this._shadow,p)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var p=this._map;if(p){var _=this.options.icon.options,S=_.iconSize?Y(_.iconSize):Y(0,0),C=_.iconAnchor?Y(_.iconAnchor):Y(0,0);p.panInside(this._latlng,{paddingTopLeft:C,paddingBottomRight:S.subtract(C)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function qS(p,_){return new vp(p,_)}var Vs=Or.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(p){this._renderer=p.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(p){return x(this,p),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&p&&Object.prototype.hasOwnProperty.call(p,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),uc=Vs.extend({options:{fill:!0,radius:10},initialize:function(p,_){x(this,_),this._latlng=ue(p),this._radius=this.options.radius},setLatLng:function(p){var _=this._latlng;return this._latlng=ue(p),this.redraw(),this.fire("move",{oldLatLng:_,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(p){return this.options.radius=this._radius=p,this.redraw()},getRadius:function(){return this._radius},setStyle:function(p){var _=p&&p.radius||this._radius;return Vs.prototype.setStyle.call(this,p),this.setRadius(_),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var p=this._radius,_=this._radiusY||p,S=this._clickTolerance(),C=[p+S,_+S];this._pxBounds=new Z(this._point.subtract(C),this._point.add(C))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(p){return p.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ex(p,_){return new uc(p,_)}var bp=uc.extend({initialize:function(p,_,S){if(typeof _=="number"&&(_=a({},S,{radius:_})),x(this,_),this._latlng=ue(p),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(p){return this._mRadius=p,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var p=[this._radius,this._radiusY||this._radius];return new ne(this._map.layerPointToLatLng(this._point.subtract(p)),this._map.layerPointToLatLng(this._point.add(p)))},setStyle:Vs.prototype.setStyle,_project:function(){var p=this._latlng.lng,_=this._latlng.lat,S=this._map,C=S.options.crs;if(C.distance===ie.distance){var F=Math.PI/180,V=this._mRadius/ie.R/F,re=S.project([_+V,p]),fe=S.project([_-V,p]),ce=re.add(fe).divideBy(2),we=S.unproject(ce).lat,ze=Math.acos((Math.cos(V*F)-Math.sin(_*F)*Math.sin(we*F))/(Math.cos(_*F)*Math.cos(we*F)))/F;(isNaN(ze)||ze===0)&&(ze=V/Math.cos(Math.PI/180*_)),this._point=ce.subtract(S.getPixelOrigin()),this._radius=isNaN(ze)?0:ce.x-S.project([we,p-ze]).x,this._radiusY=ce.y-re.y}else{var et=C.unproject(C.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(et).x}this._updateBounds()}});function jS(p,_,S){return new bp(p,_,S)}var ro=Vs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(p,_){x(this,_),this._setLatLngs(p)},getLatLngs:function(){return this._latlngs},setLatLngs:function(p){return this._setLatLngs(p),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(p){for(var _=1/0,S=null,C=sc,F,V,re=0,fe=this._parts.length;re<fe;re++)for(var ce=this._parts[re],we=1,ze=ce.length;we<ze;we++){F=ce[we-1],V=ce[we];var et=C(p,F,V,!0);et<_&&(_=et,S=C(p,F,V))}return S&&(S.distance=Math.sqrt(_)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Oy(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(p,_){return _=_||this._defaultShape(),p=ue(p),_.push(p),this._bounds.extend(p),this.redraw()},_setLatLngs:function(p){this._bounds=new ne,this._latlngs=this._convertLatLngs(p)},_defaultShape:function(){return Ea(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(p){for(var _=[],S=Ea(p),C=0,F=p.length;C<F;C++)S?(_[C]=ue(p[C]),this._bounds.extend(_[C])):_[C]=this._convertLatLngs(p[C]);return _},_project:function(){var p=new Z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,p),this._bounds.isValid()&&p.isValid()&&(this._rawPxBounds=p,this._updateBounds())},_updateBounds:function(){var p=this._clickTolerance(),_=new ee(p,p);this._rawPxBounds&&(this._pxBounds=new Z([this._rawPxBounds.min.subtract(_),this._rawPxBounds.max.add(_)]))},_projectLatlngs:function(p,_,S){var C=p[0]instanceof X,F=p.length,V,re;if(C){for(re=[],V=0;V<F;V++)re[V]=this._map.latLngToLayerPoint(p[V]),S.extend(re[V]);_.push(re)}else for(V=0;V<F;V++)this._projectLatlngs(p[V],_,S)},_clipPoints:function(){var p=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}var _=this._parts,S,C,F,V,re,fe,ce;for(S=0,F=0,V=this._rings.length;S<V;S++)for(ce=this._rings[S],C=0,re=ce.length;C<re-1;C++)fe=er(ce[C],ce[C+1],p,C,!0),fe&&(_[F]=_[F]||[],_[F].push(fe[0]),(fe[1]!==ce[C+1]||C===re-2)&&(_[F].push(fe[1]),F++))}},_simplifyPoints:function(){for(var p=this._parts,_=this.options.smoothFactor,S=0,C=p.length;S<C;S++)p[S]=X0(p[S],_)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(p,_){var S,C,F,V,re,fe,ce=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(S=0,V=this._parts.length;S<V;S++)for(fe=this._parts[S],C=0,re=fe.length,F=re-1;C<re;F=C++)if(!(!_&&C===0)&&$y(p,fe[F],fe[C])<=ce)return!0;return!1}});function Iy(p,_){return new ro(p,_)}ro._flat=Ay;var md=ro.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Y0(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(p){var _=ro.prototype._convertLatLngs.call(this,p),S=_.length;return S>=2&&_[0]instanceof X&&_[0].equals(_[S-1])&&_.pop(),_},_setLatLngs:function(p){ro.prototype._setLatLngs.call(this,p),Ea(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ea(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var p=this._renderer._bounds,_=this.options.weight,S=new ee(_,_);if(p=new Z(p.min.subtract(S),p.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}for(var C=0,F=this._rings.length,V;C<F;C++)V=H0(this._rings[C],p,!0),V.length&&this._parts.push(V)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(p){var _=!1,S,C,F,V,re,fe,ce,we;if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(V=0,ce=this._parts.length;V<ce;V++)for(S=this._parts[V],re=0,we=S.length,fe=we-1;re<we;fe=re++)C=S[re],F=S[fe],C.y>p.y!=F.y>p.y&&p.x<(F.x-C.x)*(p.y-C.y)/(F.y-C.y)+C.x&&(_=!_);return _||ro.prototype._containsPoint.call(this,p,!0)}});function tx(p,_){return new md(p,_)}var oo=Go.extend({initialize:function(p,_){x(this,_),this._layers={},p&&this.addData(p)},addData:function(p){var _=T(p)?p:p.features,S,C,F;if(_){for(S=0,C=_.length;S<C;S++)F=_[S],(F.geometries||F.geometry||F.features||F.coordinates)&&this.addData(F);return this}var V=this.options;if(V.filter&&!V.filter(p))return this;var re=_p(p,V);return re?(re.feature=y(p),re.defaultOptions=re.options,this.resetStyle(re),V.onEachFeature&&V.onEachFeature(p,re),this.addLayer(re)):this},resetStyle:function(p){return p===void 0?this.eachLayer(this.resetStyle,this):(p.options=a({},p.defaultOptions),this._setLayerStyle(p,this.options.style),this)},setStyle:function(p){return this.eachLayer(function(_){this._setLayerStyle(_,p)},this)},_setLayerStyle:function(p,_){p.setStyle&&(typeof _=="function"&&(_=_(p.feature)),p.setStyle(_))}});function _p(p,_){var S=p.type==="Feature"?p.geometry:p,C=S?S.coordinates:null,F=[],V=_&&_.pointToLayer,re=_&&_.coordsToLatLng||Ws,fe,ce,we,ze;if(!C&&!S)return null;switch(S.type){case"Point":return fe=re(C),nx(V,p,fe,_);case"MultiPoint":for(we=0,ze=C.length;we<ze;we++)fe=re(C[we]),F.push(nx(V,p,fe,_));return new Go(F);case"LineString":case"MultiLineString":return ce=xp(C,S.type==="LineString"?0:1,re),new ro(ce,_);case"Polygon":case"MultiPolygon":return ce=xp(C,S.type==="Polygon"?1:2,re),new md(ce,_);case"GeometryCollection":for(we=0,ze=S.geometries.length;we<ze;we++){var et=_p({geometry:S.geometries[we],type:"Feature",properties:p.properties},_);et&&F.push(et)}return new Go(F);case"FeatureCollection":for(we=0,ze=S.features.length;we<ze;we++){var vt=_p(S.features[we],_);vt&&F.push(vt)}return new Go(F);default:throw new Error("Invalid GeoJSON object.")}}function nx(p,_,S,C){return p?p(_,S):new vp(S,C&&C.markersInheritOptions&&C)}function Ws(p){return new X(p[1],p[0],p[2])}function xp(p,_,S){for(var C=[],F=0,V=p.length,re;F<V;F++)re=_?xp(p[F],_-1,S):(S||Ws)(p[F]),C.push(re);return C}function wp(p,_){return p=ue(p),p.alt!==void 0?[g(p.lng,_),g(p.lat,_),g(p.alt,_)]:[g(p.lng,_),g(p.lat,_)]}function Ri(p,_,S,C){for(var F=[],V=0,re=p.length;V<re;V++)F.push(_?Ri(p[V],Ea(p[V])?0:_-1,S,C):wp(p[V],C));return!_&&S&&F.length>0&&F.push(F[0].slice()),F}function Ii(p,_){return p.feature?a({},p.feature,{geometry:_}):y(_)}function y(p){return p.type==="Feature"||p.type==="FeatureCollection"?p:{type:"Feature",properties:{},geometry:p}}var f={toGeoJSON:function(p){return Ii(this,{type:"Point",coordinates:wp(this.getLatLng(),p)})}};vp.include(f),bp.include(f),uc.include(f),ro.include({toGeoJSON:function(p){var _=!Ea(this._latlngs),S=Ri(this._latlngs,_?1:0,!1,p);return Ii(this,{type:(_?"Multi":"")+"LineString",coordinates:S})}}),md.include({toGeoJSON:function(p){var _=!Ea(this._latlngs),S=_&&!Ea(this._latlngs[0]),C=Ri(this._latlngs,S?2:_?1:0,!0,p);return _||(C=[C]),Ii(this,{type:(S?"Multi":"")+"Polygon",coordinates:C})}}),pd.include({toMultiPoint:function(p){var _=[];return this.eachLayer(function(S){_.push(S.toGeoJSON(p).geometry.coordinates)}),Ii(this,{type:"MultiPoint",coordinates:_})},toGeoJSON:function(p){var _=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(_==="MultiPoint")return this.toMultiPoint(p);var S=_==="GeometryCollection",C=[];return this.eachLayer(function(F){if(F.toGeoJSON){var V=F.toGeoJSON(p);if(S)C.push(V.geometry);else{var re=y(V);re.type==="FeatureCollection"?C.push.apply(C,re.features):C.push(re)}}}),S?Ii(this,{geometries:C,type:"GeometryCollection"}):{type:"FeatureCollection",features:C}}});function h(p,_){return new oo(p,_)}var m=h,$=Or.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(p,_,S){this._url=p,this._bounds=U(_),x(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(at(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){un(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(p){return this.options.opacity=p,this._image&&this._updateOpacity(),this},setStyle:function(p){return p.opacity&&this.setOpacity(p.opacity),this},bringToFront:function(){return this._map&&ud(this._image),this},bringToBack:function(){return this._map&&Xl(this._image),this},setUrl:function(p){return this._url=p,this._image&&(this._image.src=p),this},setBounds:function(p){return this._bounds=U(p),this._map&&this._reset(),this},getEvents:function(){var p={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var p=this._url.tagName==="IMG",_=this._image=p?this._url:$t("img");if(at(_,"leaflet-image-layer"),this._zoomAnimated&&at(_,"leaflet-zoom-animated"),this.options.className&&at(_,this.options.className),_.onselectstart=c,_.onmousemove=c,_.onload=o(this.fire,this,"load"),_.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),p){this._url=_.src;return}_.src=this._url,_.alt=this.options.alt},_animateZoom:function(p){var _=this._map.getZoomScale(p.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,p.zoom,p.center).min;Zl(this._image,S,_)},_reset:function(){var p=this._image,_=new Z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=_.getSize();In(p,_.min),p.style.width=S.x+"px",p.style.height=S.y+"px"},_updateOpacity:function(){Kn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var p=this.options.errorOverlayUrl;p&&this._url!==p&&(this._url=p,this._image.src=p)},getCenter:function(){return this._bounds.getCenter()}}),A=function(p,_,S){return new $(p,_,S)},I=$.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var p=this._url.tagName==="VIDEO",_=this._image=p?this._url:$t("video");if(at(_,"leaflet-image-layer"),this._zoomAnimated&&at(_,"leaflet-zoom-animated"),this.options.className&&at(_,this.options.className),_.onselectstart=c,_.onmousemove=c,_.onloadeddata=o(this.fire,this,"load"),p){for(var S=_.getElementsByTagName("source"),C=[],F=0;F<S.length;F++)C.push(S[F].src);this._url=S.length>0?C:[_.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(_.style,"objectFit")&&(_.style.objectFit="fill"),_.autoplay=!!this.options.autoplay,_.loop=!!this.options.loop,_.muted=!!this.options.muted,_.playsInline=!!this.options.playsInline;for(var V=0;V<this._url.length;V++){var re=$t("source");re.src=this._url[V],_.appendChild(re)}}});function N(p,_,S){return new I(p,_,S)}var B=$.extend({_initImage:function(){var p=this._image=this._url;at(p,"leaflet-image-layer"),this._zoomAnimated&&at(p,"leaflet-zoom-animated"),this.options.className&&at(p,this.options.className),p.onselectstart=c,p.onmousemove=c}});function J(p,_,S){return new B(p,_,S)}var le=Or.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(p,_){p&&(p instanceof X||T(p))?(this._latlng=ue(p),x(this,_)):(x(this,p),this._source=_),this.options.content&&(this._content=this.options.content)},openOn:function(p){return p=arguments.length?p:this._source._map,p.hasLayer(this)||p.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(p){return this._map?this.close():(arguments.length?this._source=p:p=this._source,this._prepareOpen(),this.openOn(p._map)),this},onAdd:function(p){this._zoomAnimated=p._zoomAnimated,this._container||this._initLayout(),p._fadeAnimated&&Kn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),p._fadeAnimated&&Kn(this._container,1),this.bringToFront(),this.options.interactive&&(at(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(p){p._fadeAnimated?(Kn(this._container,0),this._removeTimeout=setTimeout(o(un,void 0,this._container),200)):un(this._container),this.options.interactive&&(zt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(p){return this._latlng=ue(p),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(p){return this._content=p,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var p={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ud(this._container),this},bringToBack:function(){return this._map&&Xl(this._container),this},_prepareOpen:function(p){var _=this._source;if(!_._map)return!1;if(_ instanceof Go){_=null;var S=this._source._layers;for(var C in S)if(S[C]._map){_=S[C];break}if(!_)return!1;this._source=_}if(!p)if(_.getCenter)p=_.getCenter();else if(_.getLatLng)p=_.getLatLng();else if(_.getBounds)p=_.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(p),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var p=this._contentNode,_=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof _=="string")p.innerHTML=_;else{for(;p.hasChildNodes();)p.removeChild(p.firstChild);p.appendChild(_)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var p=this._map.latLngToLayerPoint(this._latlng),_=Y(this.options.offset),S=this._getAnchor();this._zoomAnimated?In(this._container,p.add(S)):_=_.add(p).add(S);var C=this._containerBottom=-_.y,F=this._containerLeft=-Math.round(this._containerWidth/2)+_.x;this._container.style.bottom=C+"px",this._container.style.left=F+"px"}},_getAnchor:function(){return[0,0]}});st.include({_initOverlay:function(p,_,S,C){var F=_;return F instanceof p||(F=new p(C).setContent(_)),S&&F.setLatLng(S),F}}),Or.include({_initOverlay:function(p,_,S,C){var F=S;return F instanceof p?(x(F,C),F._source=this):(F=_&&!C?_:new p(C,this),F.setContent(S)),F}});var de=le.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(p){return p=arguments.length?p:this._source._map,!p.hasLayer(this)&&p._popup&&p._popup.options.autoClose&&p.removeLayer(p._popup),p._popup=this,le.prototype.openOn.call(this,p)},onAdd:function(p){le.prototype.onAdd.call(this,p),p.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Vs||this._source.on("preclick",fi))},onRemove:function(p){le.prototype.onRemove.call(this,p),p.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Vs||this._source.off("preclick",fi))},getEvents:function(){var p=le.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(p.preclick=this.close),this.options.keepInView&&(p.moveend=this._adjustPan),p},_initLayout:function(){var p="leaflet-popup",_=this._container=$t("div",p+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=$t("div",p+"-content-wrapper",_);if(this._contentNode=$t("div",p+"-content",S),hd(_),ac(this._contentNode),ot(_,"contextmenu",fi),this._tipContainer=$t("div",p+"-tip-container",_),this._tip=$t("div",p+"-tip",this._tipContainer),this.options.closeButton){var C=this._closeButton=$t("a",p+"-close-button",_);C.setAttribute("role","button"),C.setAttribute("aria-label","Close popup"),C.href="#close",C.innerHTML='<span aria-hidden="true">&#215;</span>',ot(C,"click",function(F){xn(F),this.close()},this)}},_updateLayout:function(){var p=this._contentNode,_=p.style;_.width="",_.whiteSpace="nowrap";var S=p.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),_.width=S+1+"px",_.whiteSpace="",_.height="";var C=p.offsetHeight,F=this.options.maxHeight,V="leaflet-popup-scrolled";F&&C>F?(_.height=F+"px",at(p,V)):zt(p,V),this._containerWidth=this._container.offsetWidth},_animateZoom:function(p){var _=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center),S=this._getAnchor();In(this._container,_.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var p=this._map,_=parseInt(eo(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+_,C=this._containerWidth,F=new ee(this._containerLeft,-S-this._containerBottom);F._add(qs(this._container));var V=p.layerPointToContainerPoint(F),re=Y(this.options.autoPanPadding),fe=Y(this.options.autoPanPaddingTopLeft||re),ce=Y(this.options.autoPanPaddingBottomRight||re),we=p.getSize(),ze=0,et=0;V.x+C+ce.x>we.x&&(ze=V.x+C-we.x+ce.x),V.x-ze-fe.x<0&&(ze=V.x-fe.x),V.y+S+ce.y>we.y&&(et=V.y+S-we.y+ce.y),V.y-et-fe.y<0&&(et=V.y-fe.y),(ze||et)&&(this.options.keepInView&&(this._autopanning=!0),p.fire("autopanstart").panBy([ze,et]))}},_getAnchor:function(){return Y(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),be=function(p,_){return new de(p,_)};st.mergeOptions({closePopupOnClick:!0}),st.include({openPopup:function(p,_,S){return this._initOverlay(de,p,_,S).openOn(this),this},closePopup:function(p){return p=arguments.length?p:this._popup,p&&p.close(),this}}),Or.include({bindPopup:function(p,_){return this._popup=this._initOverlay(de,this._popup,p,_),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(p){return this._popup&&(this instanceof Go||(this._popup._source=this),this._popup._prepareOpen(p||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(p){return this._popup&&this._popup.setContent(p),this},getPopup:function(){return this._popup},_openPopup:function(p){if(!(!this._popup||!this._map)){js(p);var _=p.layer||p.target;if(this._popup._source===_&&!(_ instanceof Vs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(p.latlng);return}this._popup._source=_,this.openPopup(p.latlng)}},_movePopup:function(p){this._popup.setLatLng(p.latlng)},_onKeyPress:function(p){p.originalEvent.keyCode===13&&this._openPopup(p)}});var Pe=le.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(p){le.prototype.onAdd.call(this,p),this.setOpacity(this.options.opacity),p.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(p){le.prototype.onRemove.call(this,p),p.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var p=le.prototype.getEvents.call(this);return this.options.permanent||(p.preclick=this.close),p},_initLayout:function(){var p="leaflet-tooltip",_=p+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=$t("div",_),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(p){var _,S,C=this._map,F=this._container,V=C.latLngToContainerPoint(C.getCenter()),re=C.layerPointToContainerPoint(p),fe=this.options.direction,ce=F.offsetWidth,we=F.offsetHeight,ze=Y(this.options.offset),et=this._getAnchor();fe==="top"?(_=ce/2,S=we):fe==="bottom"?(_=ce/2,S=0):fe==="center"?(_=ce/2,S=we/2):fe==="right"?(_=0,S=we/2):fe==="left"?(_=ce,S=we/2):re.x<V.x?(fe="right",_=0,S=we/2):(fe="left",_=ce+(ze.x+et.x)*2,S=we/2),p=p.subtract(Y(_,S,!0)).add(ze).add(et),zt(F,"leaflet-tooltip-right"),zt(F,"leaflet-tooltip-left"),zt(F,"leaflet-tooltip-top"),zt(F,"leaflet-tooltip-bottom"),at(F,"leaflet-tooltip-"+fe),In(F,p)},_updatePosition:function(){var p=this._map.latLngToLayerPoint(this._latlng);this._setPosition(p)},setOpacity:function(p){this.options.opacity=p,this._container&&Kn(this._container,p)},_animateZoom:function(p){var _=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center);this._setPosition(_)},_getAnchor:function(){return Y(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ue=function(p,_){return new Pe(p,_)};st.include({openTooltip:function(p,_,S){return this._initOverlay(Pe,p,_,S).openOn(this),this},closeTooltip:function(p){return p.close(),this}}),Or.include({bindTooltip:function(p,_){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Pe,this._tooltip,p,_),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(p){if(!(!p&&this._tooltipHandlersAdded)){var _=p?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[_](S),this._tooltipHandlersAdded=!p}},openTooltip:function(p){return this._tooltip&&(this instanceof Go||(this._tooltip._source=this),this._tooltip._prepareOpen(p)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(p){return this._tooltip&&this._tooltip.setContent(p),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(p){var _=typeof p.getElement=="function"&&p.getElement();_&&(ot(_,"focus",function(){this._tooltip._source=p,this.openTooltip()},this),ot(_,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(p){var _=typeof p.getElement=="function"&&p.getElement();_&&_.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(p){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var _=this;this._map.once("moveend",function(){_._openOnceFlag=!1,_._openTooltip(p)});return}this._tooltip._source=p.layer||p.target,this.openTooltip(this._tooltip.options.sticky?p.latlng:void 0)}},_moveTooltip:function(p){var _=p.latlng,S,C;this._tooltip.options.sticky&&p.originalEvent&&(S=this._map.mouseEventToContainerPoint(p.originalEvent),C=this._map.containerPointToLayerPoint(S),_=this._map.layerPointToLatLng(C)),this._tooltip.setLatLng(_)}});var Ye=gd.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(p){var _=p&&p.tagName==="DIV"?p:document.createElement("div"),S=this.options;if(S.html instanceof Element?(up(_),_.appendChild(S.html)):_.innerHTML=S.html!==!1?S.html:"",S.bgPos){var C=Y(S.bgPos);_.style.backgroundPosition=-C.x+"px "+-C.y+"px"}return this._setIconStyles(_,"icon"),_},createShadow:function(){return null}});function Et(p){return new Ye(p)}gd.Default=lc;var ct=Or.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ge.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(p){x(this,p)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(p){p._addZoomLimit(this)},onRemove:function(p){this._removeAllTiles(),un(this._container),p._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ud(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Xl(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(p){return this.options.opacity=p,this._updateOpacity(),this},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var p=this._clampZoom(this._map.getZoom());p!==this._tileZoom&&(this._tileZoom=p,this._updateLevels()),this._update()}return this},getEvents:function(){var p={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),p.move=this._onMove),this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},createTile:function(){return document.createElement("div")},getTileSize:function(){var p=this.options.tileSize;return p instanceof ee?p:new ee(p,p)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(p){for(var _=this.getPane().children,S=-p(-1/0,1/0),C=0,F=_.length,V;C<F;C++)V=_[C].style.zIndex,_[C]!==this._container&&V&&(S=p(S,+V));isFinite(S)&&(this.options.zIndex=S+p(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ge.ielt9){Kn(this._container,this.options.opacity);var p=+new Date,_=!1,S=!1;for(var C in this._tiles){var F=this._tiles[C];if(!(!F.current||!F.loaded)){var V=Math.min(1,(p-F.loaded)/200);Kn(F.el,V),V<1?_=!0:(F.active?S=!0:this._onOpaqueTile(F),F.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),_&&(Q(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=$t("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var p=this._tileZoom,_=this.options.maxZoom;if(p!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===p?(this._levels[S].el.style.zIndex=_-Math.abs(p-S),this._onUpdateLevel(S)):(un(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var C=this._levels[p],F=this._map;return C||(C=this._levels[p]={},C.el=$t("div","leaflet-tile-container leaflet-zoom-animated",this._container),C.el.style.zIndex=_,C.origin=F.project(F.unproject(F.getPixelOrigin()),p).round(),C.zoom=p,this._setZoomTransform(C,F.getCenter(),F.getZoom()),c(C.el.offsetWidth),this._onCreateLevel(C)),this._level=C,C}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var p,_,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(p in this._tiles)_=this._tiles[p],_.retain=_.current;for(p in this._tiles)if(_=this._tiles[p],_.current&&!_.active){var C=_.coords;this._retainParent(C.x,C.y,C.z,C.z-5)||this._retainChildren(C.x,C.y,C.z,C.z+2)}for(p in this._tiles)this._tiles[p].retain||this._removeTile(p)}},_removeTilesAtZoom:function(p){for(var _ in this._tiles)this._tiles[_].coords.z===p&&this._removeTile(_)},_removeAllTiles:function(){for(var p in this._tiles)this._removeTile(p)},_invalidateAll:function(){for(var p in this._levels)un(this._levels[p].el),this._onRemoveLevel(Number(p)),delete this._levels[p];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(p,_,S,C){var F=Math.floor(p/2),V=Math.floor(_/2),re=S-1,fe=new ee(+F,+V);fe.z=+re;var ce=this._tileCoordsToKey(fe),we=this._tiles[ce];return we&&we.active?(we.retain=!0,!0):(we&&we.loaded&&(we.retain=!0),re>C?this._retainParent(F,V,re,C):!1)},_retainChildren:function(p,_,S,C){for(var F=2*p;F<2*p+2;F++)for(var V=2*_;V<2*_+2;V++){var re=new ee(F,V);re.z=S+1;var fe=this._tileCoordsToKey(re),ce=this._tiles[fe];if(ce&&ce.active){ce.retain=!0;continue}else ce&&ce.loaded&&(ce.retain=!0);S+1<C&&this._retainChildren(F,V,S+1,C)}},_resetView:function(p){var _=p&&(p.pinch||p.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),_,_)},_animateZoom:function(p){this._setView(p.center,p.zoom,!0,p.noUpdate)},_clampZoom:function(p){var _=this.options;return _.minNativeZoom!==void 0&&p<_.minNativeZoom?_.minNativeZoom:_.maxNativeZoom!==void 0&&_.maxNativeZoom<p?_.maxNativeZoom:p},_setView:function(p,_,S,C){var F=Math.round(_);this.options.maxZoom!==void 0&&F>this.options.maxZoom||this.options.minZoom!==void 0&&F<this.options.minZoom?F=void 0:F=this._clampZoom(F);var V=this.options.updateWhenZooming&&F!==this._tileZoom;(!C||V)&&(this._tileZoom=F,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),F!==void 0&&this._update(p),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(p,_)},_setZoomTransforms:function(p,_){for(var S in this._levels)this._setZoomTransform(this._levels[S],p,_)},_setZoomTransform:function(p,_,S){var C=this._map.getZoomScale(S,p.zoom),F=p.origin.multiplyBy(C).subtract(this._map._getNewPixelOrigin(_,S)).round();Ge.any3d?Zl(p.el,F,C):In(p.el,F)},_resetGrid:function(){var p=this._map,_=p.options.crs,S=this._tileSize=this.getTileSize(),C=this._tileZoom,F=this._map.getPixelWorldBounds(this._tileZoom);F&&(this._globalTileRange=this._pxBoundsToTileRange(F)),this._wrapX=_.wrapLng&&!this.options.noWrap&&[Math.floor(p.project([0,_.wrapLng[0]],C).x/S.x),Math.ceil(p.project([0,_.wrapLng[1]],C).x/S.y)],this._wrapY=_.wrapLat&&!this.options.noWrap&&[Math.floor(p.project([_.wrapLat[0],0],C).y/S.x),Math.ceil(p.project([_.wrapLat[1],0],C).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(p){var _=this._map,S=_._animatingZoom?Math.max(_._animateToZoom,_.getZoom()):_.getZoom(),C=_.getZoomScale(S,this._tileZoom),F=_.project(p,this._tileZoom).floor(),V=_.getSize().divideBy(C*2);return new Z(F.subtract(V),F.add(V))},_update:function(p){var _=this._map;if(_){var S=this._clampZoom(_.getZoom());if(p===void 0&&(p=_.getCenter()),this._tileZoom!==void 0){var C=this._getTiledPixelBounds(p),F=this._pxBoundsToTileRange(C),V=F.getCenter(),re=[],fe=this.options.keepBuffer,ce=new Z(F.getBottomLeft().subtract([fe,-fe]),F.getTopRight().add([fe,-fe]));if(!(isFinite(F.min.x)&&isFinite(F.min.y)&&isFinite(F.max.x)&&isFinite(F.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var we in this._tiles){var ze=this._tiles[we].coords;(ze.z!==this._tileZoom||!ce.contains(new ee(ze.x,ze.y)))&&(this._tiles[we].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(p,S);return}for(var et=F.min.y;et<=F.max.y;et++)for(var vt=F.min.x;vt<=F.max.x;vt++){var Sa=new ee(vt,et);if(Sa.z=this._tileZoom,!!this._isValidTile(Sa)){var pi=this._tiles[this._tileCoordsToKey(Sa)];pi?pi.current=!0:re.push(Sa)}}if(re.sort(function(tr,$p){return tr.distanceTo(V)-$p.distanceTo(V)}),re.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var lo=document.createDocumentFragment();for(vt=0;vt<re.length;vt++)this._addTile(re[vt],lo);this._level.el.appendChild(lo)}}}},_isValidTile:function(p){var _=this._map.options.crs;if(!_.infinite){var S=this._globalTileRange;if(!_.wrapLng&&(p.x<S.min.x||p.x>S.max.x)||!_.wrapLat&&(p.y<S.min.y||p.y>S.max.y))return!1}if(!this.options.bounds)return!0;var C=this._tileCoordsToBounds(p);return U(this.options.bounds).overlaps(C)},_keyToBounds:function(p){return this._tileCoordsToBounds(this._keyToTileCoords(p))},_tileCoordsToNwSe:function(p){var _=this._map,S=this.getTileSize(),C=p.scaleBy(S),F=C.add(S),V=_.unproject(C,p.z),re=_.unproject(F,p.z);return[V,re]},_tileCoordsToBounds:function(p){var _=this._tileCoordsToNwSe(p),S=new ne(_[0],_[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(p){return p.x+":"+p.y+":"+p.z},_keyToTileCoords:function(p){var _=p.split(":"),S=new ee(+_[0],+_[1]);return S.z=+_[2],S},_removeTile:function(p){var _=this._tiles[p];_&&(un(_.el),delete this._tiles[p],this.fire("tileunload",{tile:_.el,coords:this._keyToTileCoords(p)}))},_initTile:function(p){at(p,"leaflet-tile");var _=this.getTileSize();p.style.width=_.x+"px",p.style.height=_.y+"px",p.onselectstart=c,p.onmousemove=c,Ge.ielt9&&this.options.opacity<1&&Kn(p,this.options.opacity)},_addTile:function(p,_){var S=this._getTilePos(p),C=this._tileCoordsToKey(p),F=this.createTile(this._wrapCoords(p),o(this._tileReady,this,p));this._initTile(F),this.createTile.length<2&&z(o(this._tileReady,this,p,null,F)),In(F,S),this._tiles[C]={el:F,coords:p,current:!0},_.appendChild(F),this.fire("tileloadstart",{tile:F,coords:p})},_tileReady:function(p,_,S){_&&this.fire("tileerror",{error:_,tile:S,coords:p});var C=this._tileCoordsToKey(p);S=this._tiles[C],S&&(S.loaded=+new Date,this._map._fadeAnimated?(Kn(S.el,0),Q(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),_||(at(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:p})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ge.ielt9||!this._map._fadeAnimated?z(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(p){return p.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(p){var _=new ee(this._wrapX?d(p.x,this._wrapX):p.x,this._wrapY?d(p.y,this._wrapY):p.y);return _.z=p.z,_},_pxBoundsToTileRange:function(p){var _=this.getTileSize();return new Z(p.min.unscaleBy(_).floor(),p.max.unscaleBy(_).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var p in this._tiles)if(!this._tiles[p].loaded)return!1;return!0}});function Wt(p){return new ct(p)}var mn=ct.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(p,_){this._url=p,_=x(this,_),_.detectRetina&&Ge.retina&&_.maxZoom>0?(_.tileSize=Math.floor(_.tileSize/2),_.zoomReverse?(_.zoomOffset--,_.minZoom=Math.min(_.maxZoom,_.minZoom+1)):(_.zoomOffset++,_.maxZoom=Math.max(_.minZoom,_.maxZoom-1)),_.minZoom=Math.max(0,_.minZoom)):_.zoomReverse?_.minZoom=Math.min(_.maxZoom,_.minZoom):_.maxZoom=Math.max(_.minZoom,_.maxZoom),typeof _.subdomains=="string"&&(_.subdomains=_.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(p,_){return this._url===p&&_===void 0&&(_=!0),this._url=p,_||this.redraw(),this},createTile:function(p,_){var S=document.createElement("img");return ot(S,"load",o(this._tileOnLoad,this,_,S)),ot(S,"error",o(this._tileOnError,this,_,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(p),S},getTileUrl:function(p){var _={r:Ge.retina?"@2x":"",s:this._getSubdomain(p),x:p.x,y:p.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-p.y;this.options.tms&&(_.y=S),_["-y"]=S}return E(this._url,a(_,this.options))},_tileOnLoad:function(p,_){Ge.ielt9?setTimeout(o(p,this,null,_),0):p(null,_)},_tileOnError:function(p,_,S){var C=this.options.errorTileUrl;C&&_.getAttribute("src")!==C&&(_.src=C),p(S,_)},_onTileRemove:function(p){p.tile.onload=null},_getZoomForUrl:function(){var p=this._tileZoom,_=this.options.maxZoom,S=this.options.zoomReverse,C=this.options.zoomOffset;return S&&(p=_-p),p+C},_getSubdomain:function(p){var _=Math.abs(p.x+p.y)%this.options.subdomains.length;return this.options.subdomains[_]},_abortLoading:function(){var p,_;for(p in this._tiles)if(this._tiles[p].coords.z!==this._tileZoom&&(_=this._tiles[p].el,_.onload=c,_.onerror=c,!_.complete)){_.src=D;var S=this._tiles[p].coords;un(_),delete this._tiles[p],this.fire("tileabort",{tile:_,coords:S})}},_removeTile:function(p){var _=this._tiles[p];if(_)return _.el.setAttribute("src",D),ct.prototype._removeTile.call(this,p)},_tileReady:function(p,_,S){if(!(!this._map||S&&S.getAttribute("src")===D))return ct.prototype._tileReady.call(this,p,_,S)}});function Qn(p,_){return new mn(p,_)}var Gs=mn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(p,_){this._url=p;var S=a({},this.defaultWmsParams);for(var C in _)C in this.options||(S[C]=_[C]);_=x(this,_);var F=_.detectRetina&&Ge.retina?2:1,V=this.getTileSize();S.width=V.x*F,S.height=V.y*F,this.wmsParams=S},onAdd:function(p){this._crs=this.options.crs||p.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var _=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[_]=this._crs.code,mn.prototype.onAdd.call(this,p)},getTileUrl:function(p){var _=this._tileCoordsToNwSe(p),S=this._crs,C=ae(S.project(_[0]),S.project(_[1])),F=C.min,V=C.max,re=(this._wmsVersion>=1.3&&this._crs===Z0?[F.y,F.x,V.y,V.x]:[F.x,F.y,V.x,V.y]).join(","),fe=mn.prototype.getTileUrl.call(this,p);return fe+k(this.wmsParams,fe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+re},setParams:function(p,_){return a(this.wmsParams,p),_||this.redraw(),this}});function dc(p,_){return new Gs(p,_)}mn.WMS=Gs,Qn.wms=dc;var so=Or.extend({options:{padding:.1},initialize:function(p){x(this,p),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),at(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var p={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(p.zoomanim=this._onAnimZoom),p},_onAnimZoom:function(p){this._updateTransform(p.center,p.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(p,_){var S=this._map.getZoomScale(_,this._zoom),C=this._map.getSize().multiplyBy(.5+this.options.padding),F=this._map.project(this._center,_),V=C.multiplyBy(-S).add(F).subtract(this._map._getNewPixelOrigin(p,_));Ge.any3d?Zl(this._container,V,S):In(this._container,V)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var p in this._layers)this._layers[p]._reset()},_onZoomEnd:function(){for(var p in this._layers)this._layers[p]._project()},_updatePaths:function(){for(var p in this._layers)this._layers[p]._update()},_update:function(){var p=this.options.padding,_=this._map.getSize(),S=this._map.containerPointToLayerPoint(_.multiplyBy(-p)).round();this._bounds=new Z(S,S.add(_.multiplyBy(1+p*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Py=so.extend({options:{tolerance:0},getEvents:function(){var p=so.prototype.getEvents.call(this);return p.viewprereset=this._onViewPreReset,p},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){so.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var p=this._container=document.createElement("canvas");ot(p,"mousemove",this._onMouseMove,this),ot(p,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ot(p,"mouseout",this._handleMouseOut,this),p._leaflet_disable_events=!0,this._ctx=p.getContext("2d")},_destroyContainer:function(){Q(this._redrawRequest),delete this._ctx,un(this._container),Vt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var p;this._redrawBounds=null;for(var _ in this._layers)p=this._layers[_],p._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){so.prototype._update.call(this);var p=this._bounds,_=this._container,S=p.getSize(),C=Ge.retina?2:1;In(_,p.min),_.width=C*S.x,_.height=C*S.y,_.style.width=S.x+"px",_.style.height=S.y+"px",Ge.retina&&this._ctx.scale(2,2),this._ctx.translate(-p.min.x,-p.min.y),this.fire("update")}},_reset:function(){so.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(p){this._updateDashArray(p),this._layers[l(p)]=p;var _=p._order={layer:p,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=_),this._drawLast=_,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(p){this._requestRedraw(p)},_removePath:function(p){var _=p._order,S=_.next,C=_.prev;S?S.prev=C:this._drawLast=C,C?C.next=S:this._drawFirst=S,delete p._order,delete this._layers[l(p)],this._requestRedraw(p)},_updatePath:function(p){this._extendRedrawBounds(p),p._project(),p._update(),this._requestRedraw(p)},_updateStyle:function(p){this._updateDashArray(p),this._requestRedraw(p)},_updateDashArray:function(p){if(typeof p.options.dashArray=="string"){var _=p.options.dashArray.split(/[, ]+/),S=[],C,F;for(F=0;F<_.length;F++){if(C=Number(_[F]),isNaN(C))return;S.push(C)}p.options._dashArray=S}else p.options._dashArray=p.options.dashArray},_requestRedraw:function(p){this._map&&(this._extendRedrawBounds(p),this._redrawRequest=this._redrawRequest||z(this._redraw,this))},_extendRedrawBounds:function(p){if(p._pxBounds){var _=(p.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Z,this._redrawBounds.extend(p._pxBounds.min.subtract([_,_])),this._redrawBounds.extend(p._pxBounds.max.add([_,_]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var p=this._redrawBounds;if(p){var _=p.getSize();this._ctx.clearRect(p.min.x,p.min.y,_.x,_.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var p,_=this._redrawBounds;if(this._ctx.save(),_){var S=_.getSize();this._ctx.beginPath(),this._ctx.rect(_.min.x,_.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var C=this._drawFirst;C;C=C.next)p=C.layer,(!_||p._pxBounds&&p._pxBounds.intersects(_))&&p._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(p,_){if(this._drawing){var S,C,F,V,re=p._parts,fe=re.length,ce=this._ctx;if(fe){for(ce.beginPath(),S=0;S<fe;S++){for(C=0,F=re[S].length;C<F;C++)V=re[S][C],ce[C?"lineTo":"moveTo"](V.x,V.y);_&&ce.closePath()}this._fillStroke(ce,p)}}},_updateCircle:function(p){if(!(!this._drawing||p._empty())){var _=p._point,S=this._ctx,C=Math.max(Math.round(p._radius),1),F=(Math.max(Math.round(p._radiusY),1)||C)/C;F!==1&&(S.save(),S.scale(1,F)),S.beginPath(),S.arc(_.x,_.y/F,C,0,Math.PI*2,!1),F!==1&&S.restore(),this._fillStroke(S,p)}},_fillStroke:function(p,_){var S=_.options;S.fill&&(p.globalAlpha=S.fillOpacity,p.fillStyle=S.fillColor||S.color,p.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(p.setLineDash&&p.setLineDash(_.options&&_.options._dashArray||[]),p.globalAlpha=S.opacity,p.lineWidth=S.weight,p.strokeStyle=S.color,p.lineCap=S.lineCap,p.lineJoin=S.lineJoin,p.stroke())},_onClick:function(p){for(var _=this._map.mouseEventToLayerPoint(p),S,C,F=this._drawFirst;F;F=F.next)S=F.layer,S.options.interactive&&S._containsPoint(_)&&(!(p.type==="click"||p.type==="preclick")||!this._map._draggableMoved(S))&&(C=S);this._fireEvent(C?[C]:!1,p)},_onMouseMove:function(p){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var _=this._map.mouseEventToLayerPoint(p);this._handleMouseHover(p,_)}},_handleMouseOut:function(p){var _=this._hoveredLayer;_&&(zt(this._container,"leaflet-interactive"),this._fireEvent([_],p,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(p,_){if(!this._mouseHoverThrottled){for(var S,C,F=this._drawFirst;F;F=F.next)S=F.layer,S.options.interactive&&S._containsPoint(_)&&(C=S);C!==this._hoveredLayer&&(this._handleMouseOut(p),C&&(at(this._container,"leaflet-interactive"),this._fireEvent([C],p,"mouseover"),this._hoveredLayer=C)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,p),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(p,_,S){this._map._fireDOMEvent(_,S||_.type,p)},_bringToFront:function(p){var _=p._order;if(_){var S=_.next,C=_.prev;if(S)S.prev=C;else return;C?C.next=S:S&&(this._drawFirst=S),_.prev=this._drawLast,this._drawLast.next=_,_.next=null,this._drawLast=_,this._requestRedraw(p)}},_bringToBack:function(p){var _=p._order;if(_){var S=_.next,C=_.prev;if(C)C.next=S;else return;S?S.prev=C:C&&(this._drawLast=C),_.prev=null,_.next=this._drawFirst,this._drawFirst.prev=_,this._drawFirst=_,this._requestRedraw(p)}}});function Fy(p){return Ge.canvas?new Py(p):null}var yd=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(p){return document.createElement("<lvml:"+p+' class="lvml">')}}catch{}return function(p){return document.createElement("<"+p+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ix={_initContainer:function(){this._container=$t("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(so.prototype._update.call(this),this.fire("update"))},_initPath:function(p){var _=p._container=yd("shape");at(_,"leaflet-vml-shape "+(this.options.className||"")),_.coordsize="1 1",p._path=yd("path"),_.appendChild(p._path),this._updateStyle(p),this._layers[l(p)]=p},_addPath:function(p){var _=p._container;this._container.appendChild(_),p.options.interactive&&p.addInteractiveTarget(_)},_removePath:function(p){var _=p._container;un(_),p.removeInteractiveTarget(_),delete this._layers[l(p)]},_updateStyle:function(p){var _=p._stroke,S=p._fill,C=p.options,F=p._container;F.stroked=!!C.stroke,F.filled=!!C.fill,C.stroke?(_||(_=p._stroke=yd("stroke")),F.appendChild(_),_.weight=C.weight+"px",_.color=C.color,_.opacity=C.opacity,C.dashArray?_.dashStyle=T(C.dashArray)?C.dashArray.join(" "):C.dashArray.replace(/( *, *)/g," "):_.dashStyle="",_.endcap=C.lineCap.replace("butt","flat"),_.joinstyle=C.lineJoin):_&&(F.removeChild(_),p._stroke=null),C.fill?(S||(S=p._fill=yd("fill")),F.appendChild(S),S.color=C.fillColor||C.color,S.opacity=C.fillOpacity):S&&(F.removeChild(S),p._fill=null)},_updateCircle:function(p){var _=p._point.round(),S=Math.round(p._radius),C=Math.round(p._radiusY||S);this._setPath(p,p._empty()?"M0 0":"AL "+_.x+","+_.y+" "+S+","+C+" 0,"+65535*360)},_setPath:function(p,_){p._path.v=_},_bringToFront:function(p){ud(p._container)},_bringToBack:function(p){Xl(p._container)}},fc=Ge.vml?yd:Rt,Ql=so.extend({_initContainer:function(){this._container=fc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){un(this._container),Vt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){so.prototype._update.call(this);var p=this._bounds,_=p.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(_))&&(this._svgSize=_,S.setAttribute("width",_.x),S.setAttribute("height",_.y)),In(S,p.min),S.setAttribute("viewBox",[p.min.x,p.min.y,_.x,_.y].join(" ")),this.fire("update")}},_initPath:function(p){var _=p._path=fc("path");p.options.className&&at(_,p.options.className),p.options.interactive&&at(_,"leaflet-interactive"),this._updateStyle(p),this._layers[l(p)]=p},_addPath:function(p){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(p._path),p.addInteractiveTarget(p._path)},_removePath:function(p){un(p._path),p.removeInteractiveTarget(p._path),delete this._layers[l(p)]},_updatePath:function(p){p._project(),p._update()},_updateStyle:function(p){var _=p._path,S=p.options;_&&(S.stroke?(_.setAttribute("stroke",S.color),_.setAttribute("stroke-opacity",S.opacity),_.setAttribute("stroke-width",S.weight),_.setAttribute("stroke-linecap",S.lineCap),_.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?_.setAttribute("stroke-dasharray",S.dashArray):_.removeAttribute("stroke-dasharray"),S.dashOffset?_.setAttribute("stroke-dashoffset",S.dashOffset):_.removeAttribute("stroke-dashoffset")):_.setAttribute("stroke","none"),S.fill?(_.setAttribute("fill",S.fillColor||S.color),_.setAttribute("fill-opacity",S.fillOpacity),_.setAttribute("fill-rule",S.fillRule||"evenodd")):_.setAttribute("fill","none"))},_updatePoly:function(p,_){this._setPath(p,Jt(p._parts,_))},_updateCircle:function(p){var _=p._point,S=Math.max(Math.round(p._radius),1),C=Math.max(Math.round(p._radiusY),1)||S,F="a"+S+","+C+" 0 1,0 ",V=p._empty()?"M0 0":"M"+(_.x-S)+","+_.y+F+S*2+",0 "+F+-S*2+",0 ";this._setPath(p,V)},_setPath:function(p,_){p._path.setAttribute("d",_)},_bringToFront:function(p){ud(p._path)},_bringToBack:function(p){Xl(p._path)}});Ge.vml&&Ql.include(ix);function kp(p){return Ge.svg||Ge.vml?new Ql(p):null}st.include({getRenderer:function(p){var _=p.options.renderer||this._getPaneRenderer(p.options.pane)||this.options.renderer||this._renderer;return _||(_=this._renderer=this._createRenderer()),this.hasLayer(_)||this.addLayer(_),_},_getPaneRenderer:function(p){if(p==="overlayPane"||p===void 0)return!1;var _=this._paneRenderers[p];return _===void 0&&(_=this._createRenderer({pane:p}),this._paneRenderers[p]=_),_},_createRenderer:function(p){return this.options.preferCanvas&&Fy(p)||kp(p)}});var Rz=md.extend({initialize:function(p,_){md.prototype.initialize.call(this,this._boundsToLatLngs(p),_)},setBounds:function(p){return this.setLatLngs(this._boundsToLatLngs(p))},_boundsToLatLngs:function(p){return p=U(p),[p.getSouthWest(),p.getNorthWest(),p.getNorthEast(),p.getSouthEast()]}});function Tae(p,_){return new Rz(p,_)}Ql.create=fc,Ql.pointsToPath=Jt,oo.geometryToLayer=_p,oo.coordsToLatLng=Ws,oo.coordsToLatLngs=xp,oo.latLngToCoords=wp,oo.latLngsToCoords=Ri,oo.getFeature=Ii,oo.asFeature=y,st.mergeOptions({boxZoom:!0});var Iz=ao.extend({initialize:function(p){this._map=p,this._container=p._container,this._pane=p._panes.overlayPane,this._resetStateTimeout=0,p.on("unload",this._destroy,this)},addHooks:function(){ot(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Vt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){un(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(p){if(!p.shiftKey||p.which!==1&&p.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Bo(),yy(),this._startPoint=this._map.mouseEventToContainerPoint(p),ot(document,{contextmenu:js,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(p){this._moved||(this._moved=!0,this._box=$t("div","leaflet-zoom-box",this._container),at(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(p);var _=new Z(this._point,this._startPoint),S=_.getSize();In(this._box,_.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(un(this._box),zt(this._container,"leaflet-crosshair")),dd(),nc(),Vt(document,{contextmenu:js,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(p){if(!(p.which!==1&&p.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var _=new ne(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(_).fire("boxzoomend",{boxZoomBounds:_})}},_onKeyDown:function(p){p.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});st.addInitHook("addHandler","boxZoom",Iz),st.mergeOptions({doubleClickZoom:!0});var Pz=ao.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(p){var _=this._map,S=_.getZoom(),C=_.options.zoomDelta,F=p.originalEvent.shiftKey?S-C:S+C;_.options.doubleClickZoom==="center"?_.setZoom(F):_.setZoomAround(p.containerPoint,F)}});st.addInitHook("addHandler","doubleClickZoom",Pz),st.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fz=ao.extend({addHooks:function(){if(!this._draggable){var p=this._map;this._draggable=new Bs(p._mapPane,p._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),p.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),p.on("zoomend",this._onZoomEnd,this),p.whenReady(this._onZoomEnd,this))}at(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zt(this._map._container,"leaflet-grab"),zt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var p=this._map;if(p._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var _=U(this._map.options.maxBounds);this._offsetLimit=ae(this._map.latLngToContainerPoint(_.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(_.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;p.fire("movestart").fire("dragstart"),p.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(p){if(this._map.options.inertia){var _=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(_),this._prunePositions(_)}this._map.fire("move",p).fire("drag",p)},_prunePositions:function(p){for(;this._positions.length>1&&p-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var p=this._map.getSize().divideBy(2),_=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=_.subtract(p).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(p,_){return p-(p-_)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var p=this._draggable._newPos.subtract(this._draggable._startPos),_=this._offsetLimit;p.x<_.min.x&&(p.x=this._viscousLimit(p.x,_.min.x)),p.y<_.min.y&&(p.y=this._viscousLimit(p.y,_.min.y)),p.x>_.max.x&&(p.x=this._viscousLimit(p.x,_.max.x)),p.y>_.max.y&&(p.y=this._viscousLimit(p.y,_.max.y)),this._draggable._newPos=this._draggable._startPos.add(p)}},_onPreDragWrap:function(){var p=this._worldWidth,_=Math.round(p/2),S=this._initialWorldOffset,C=this._draggable._newPos.x,F=(C-_+S)%p+_-S,V=(C+_+S)%p-_-S,re=Math.abs(F+S)<Math.abs(V+S)?F:V;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=re},_onDragEnd:function(p){var _=this._map,S=_.options,C=!S.inertia||p.noInertia||this._times.length<2;if(_.fire("dragend",p),C)_.fire("moveend");else{this._prunePositions(+new Date);var F=this._lastPos.subtract(this._positions[0]),V=(this._lastTime-this._times[0])/1e3,re=S.easeLinearity,fe=F.multiplyBy(re/V),ce=fe.distanceTo([0,0]),we=Math.min(S.inertiaMaxSpeed,ce),ze=fe.multiplyBy(we/ce),et=we/(S.inertiaDeceleration*re),vt=ze.multiplyBy(-et/2).round();!vt.x&&!vt.y?_.fire("moveend"):(vt=_._limitOffset(vt,_.options.maxBounds),z(function(){_.panBy(vt,{duration:et,easeLinearity:re,noMoveStart:!0,animate:!0})}))}}});st.addInitHook("addHandler","dragging",Fz),st.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Nz=ao.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(p){this._map=p,this._setPanDelta(p.options.keyboardPanDelta),this._setZoomDelta(p.options.zoomDelta)},addHooks:function(){var p=this._map._container;p.tabIndex<=0&&(p.tabIndex="0"),ot(p,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Vt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var p=document.body,_=document.documentElement,S=p.scrollTop||_.scrollTop,C=p.scrollLeft||_.scrollLeft;this._map._container.focus(),window.scrollTo(C,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(p){var _=this._panKeys={},S=this.keyCodes,C,F;for(C=0,F=S.left.length;C<F;C++)_[S.left[C]]=[-1*p,0];for(C=0,F=S.right.length;C<F;C++)_[S.right[C]]=[p,0];for(C=0,F=S.down.length;C<F;C++)_[S.down[C]]=[0,p];for(C=0,F=S.up.length;C<F;C++)_[S.up[C]]=[0,-1*p]},_setZoomDelta:function(p){var _=this._zoomKeys={},S=this.keyCodes,C,F;for(C=0,F=S.zoomIn.length;C<F;C++)_[S.zoomIn[C]]=p;for(C=0,F=S.zoomOut.length;C<F;C++)_[S.zoomOut[C]]=-p},_addHooks:function(){ot(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Vt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(p){if(!(p.altKey||p.ctrlKey||p.metaKey)){var _=p.keyCode,S=this._map,C;if(_ in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(C=this._panKeys[_],p.shiftKey&&(C=Y(C).multiplyBy(3)),S.options.maxBounds&&(C=S._limitOffset(Y(C),S.options.maxBounds)),S.options.worldCopyJump){var F=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(C)));S.panTo(F)}else S.panBy(C)}else if(_ in this._zoomKeys)S.setZoom(S.getZoom()+(p.shiftKey?3:1)*this._zoomKeys[_]);else if(_===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;js(p)}}});st.addInitHook("addHandler","keyboard",Nz),st.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Lz=ao.extend({addHooks:function(){ot(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Vt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(p){var _=wy(p),S=this._map.options.wheelDebounceTime;this._delta+=_,this._lastMousePos=this._map.mouseEventToContainerPoint(p),this._startTime||(this._startTime=+new Date);var C=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),C),js(p)},_performZoom:function(){var p=this._map,_=p.getZoom(),S=this._map.options.zoomSnap||0;p._stop();var C=this._delta/(this._map.options.wheelPxPerZoomLevel*4),F=4*Math.log(2/(1+Math.exp(-Math.abs(C))))/Math.LN2,V=S?Math.ceil(F/S)*S:F,re=p._limitZoom(_+(this._delta>0?V:-V))-_;this._delta=0,this._startTime=null,re&&(p.options.scrollWheelZoom==="center"?p.setZoom(_+re):p.setZoomAround(this._lastMousePos,_+re))}});st.addInitHook("addHandler","scrollWheelZoom",Lz);var Aae=600;st.mergeOptions({tapHold:Ge.touchNative&&Ge.safari&&Ge.mobile,tapTolerance:15});var Mz=ao.extend({addHooks:function(){ot(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Vt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(p){if(clearTimeout(this._holdTimeout),p.touches.length===1){var _=p.touches[0];this._startPos=this._newPos=new ee(_.clientX,_.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ot(document,"touchend",xn),ot(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",_))},this),Aae),ot(document,"touchend touchcancel contextmenu",this._cancel,this),ot(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function p(){Vt(document,"touchend",xn),Vt(document,"touchend touchcancel",p)},_cancel:function(){clearTimeout(this._holdTimeout),Vt(document,"touchend touchcancel contextmenu",this._cancel,this),Vt(document,"touchmove",this._onMove,this)},_onMove:function(p){var _=p.touches[0];this._newPos=new ee(_.clientX,_.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(p,_){var S=new MouseEvent(p,{bubbles:!0,cancelable:!0,view:window,screenX:_.screenX,screenY:_.screenY,clientX:_.clientX,clientY:_.clientY});S._simulated=!0,_.target.dispatchEvent(S)}});st.addInitHook("addHandler","tapHold",Mz),st.mergeOptions({touchZoom:Ge.touch,bounceAtZoomLimits:!0});var zz=ao.extend({addHooks:function(){at(this._map._container,"leaflet-touch-zoom"),ot(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zt(this._map._container,"leaflet-touch-zoom"),Vt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(p){var _=this._map;if(!(!p.touches||p.touches.length!==2||_._animatingZoom||this._zooming)){var S=_.mouseEventToContainerPoint(p.touches[0]),C=_.mouseEventToContainerPoint(p.touches[1]);this._centerPoint=_.getSize()._divideBy(2),this._startLatLng=_.containerPointToLatLng(this._centerPoint),_.options.touchZoom!=="center"&&(this._pinchStartLatLng=_.containerPointToLatLng(S.add(C)._divideBy(2))),this._startDist=S.distanceTo(C),this._startZoom=_.getZoom(),this._moved=!1,this._zooming=!0,_._stop(),ot(document,"touchmove",this._onTouchMove,this),ot(document,"touchend touchcancel",this._onTouchEnd,this),xn(p)}},_onTouchMove:function(p){if(!(!p.touches||p.touches.length!==2||!this._zooming)){var _=this._map,S=_.mouseEventToContainerPoint(p.touches[0]),C=_.mouseEventToContainerPoint(p.touches[1]),F=S.distanceTo(C)/this._startDist;if(this._zoom=_.getScaleZoom(F,this._startZoom),!_.options.bounceAtZoomLimits&&(this._zoom<_.getMinZoom()&&F<1||this._zoom>_.getMaxZoom()&&F>1)&&(this._zoom=_._limitZoom(this._zoom)),_.options.touchZoom==="center"){if(this._center=this._startLatLng,F===1)return}else{var V=S._add(C)._divideBy(2)._subtract(this._centerPoint);if(F===1&&V.x===0&&V.y===0)return;this._center=_.unproject(_.project(this._pinchStartLatLng,this._zoom).subtract(V),this._zoom)}this._moved||(_._moveStart(!0,!1),this._moved=!0),Q(this._animRequest);var re=o(_._move,_,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=z(re,this,!0),xn(p)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Q(this._animRequest),Vt(document,"touchmove",this._onTouchMove,this),Vt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});st.addInitHook("addHandler","touchZoom",zz),st.BoxZoom=Iz,st.DoubleClickZoom=Pz,st.Drag=Fz,st.Keyboard=Nz,st.ScrollWheelZoom=Lz,st.TapHold=Mz,st.TouchZoom=zz,n.Bounds=Z,n.Browser=Ge,n.CRS=Ce,n.Canvas=Py,n.Circle=bp,n.CircleMarker=uc,n.Class=W,n.Control=Ar,n.DivIcon=Ye,n.DivOverlay=le,n.DomEvent=DS,n.DomUtil=cp,n.Draggable=Bs,n.Evented=se,n.FeatureGroup=Go,n.GeoJSON=oo,n.GridLayer=ct,n.Handler=ao,n.Icon=gd,n.ImageOverlay=$,n.LatLng=X,n.LatLngBounds=ne,n.Layer=Or,n.LayerGroup=pd,n.LineUtil=Dy,n.Map=st,n.Marker=vp,n.Mixin=PS,n.Path=Vs,n.Point=ee,n.PolyUtil=$a,n.Polygon=md,n.Polyline=ro,n.Popup=de,n.PosAnimation=ky,n.Projection=NS,n.Rectangle=Rz,n.Renderer=so,n.SVG=Ql,n.SVGOverlay=B,n.TileLayer=mn,n.Tooltip=Pe,n.Transformation=ve,n.Util=te,n.VideoOverlay=I,n.bind=o,n.bounds=ae,n.canvas=Fy,n.circle=jS,n.circleMarker=ex,n.control=hi,n.divIcon=Et,n.extend=a,n.featureGroup=K0,n.geoJSON=h,n.geoJson=m,n.gridLayer=Wt,n.icon=zS,n.imageOverlay=A,n.latLng=ue,n.latLngBounds=U,n.layerGroup=J0,n.map=gp,n.marker=qS,n.point=Y,n.polygon=tx,n.polyline=Iy,n.popup=be,n.rectangle=Tae,n.setOptions=x,n.stamp=l,n.svg=kp,n.svgOverlay=J,n.tileLayer=Qn,n.tooltip=Ue,n.transformation=G,n.version=i,n.videoOverlay=N;var Oae=window.L;n.noConflict=function(){return window.L=Oae,this},window.L=n})})(hD,hD.exports);var fse=hD.exports;const ub=v6(fse);function ku(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cse(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Om(e){let t,n,i;e.length!==2?(t=ku,n=(s,l)=>ku(e(s),l),i=(s,l)=>e(s)-l):(t=e===ku||e===cse?e:hse,n=e,i=e);function a(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const c=u+d>>>1;n(s[c],l)<0?u=c+1:d=c}while(u<d)}return u}function r(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const c=u+d>>>1;n(s[c],l)<=0?u=c+1:d=c}while(u<d)}return u}function o(s,l,u=0,d=s.length){const c=a(s,l,u,d-1);return c>u&&i(s[c-1],l)>-i(s[c],l)?c-1:c}return{left:a,center:o,right:r}}function hse(){return 0}function RV(e){return e===null?NaN:+e}function*pse(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const IV=Om(ku),gf=IV.right,gse=IV.left;Om(RV).center;function mse(e,t){let n=0,i,a=0,r=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(i=o-a,a+=i/++n,r+=i*(o-a));else{let o=-1;for(let s of e)(s=t(s,++o,e))!=null&&(s=+s)>=s&&(i=s-a,a+=i/++n,r+=i*(s-a))}if(n>1)return r/(n-1)}function yse(e,t){const n=mse(e,t);return n&&Math.sqrt(n)}let fa=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let a=0;a<this._n&&a<32;a++){const r=n[a],o=t+r,s=Math.abs(t)<Math.abs(r)?t-(o-r):r-(o-t);s&&(n[i++]=s),t=o}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,a,r,o=0;if(n>0){for(o=t[--n];n>0&&(i=o,a=t[--n],o=i+a,r=a-(o-i),!r););n>0&&(r<0&&t[n-1]<0||r>0&&t[n-1]>0)&&(a=r*2,i=o+a,a==i-o&&(o=i))}return o}};class K5 extends Map{constructor(t,n=NV){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,a]of t)this.set(i,a)}get(t){return super.get(pD(this,t))}has(t){return super.has(pD(this,t))}set(t,n){return super.set(PV(this,t),n)}delete(t){return super.delete(FV(this,t))}}class Bw extends Set{constructor(t,n=NV){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(pD(this,t))}add(t){return super.add(PV(this,t))}delete(t){return super.delete(FV(this,t))}}function pD({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function PV({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function FV({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function NV(e){return e!==null&&typeof e=="object"?e.valueOf():e}function vse(e,t){return Array.from(t,n=>e[n])}function bse(e=ku){if(e===ku)return LV;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function LV(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const _se=Math.sqrt(50),xse=Math.sqrt(10),wse=Math.sqrt(2);function Vw(e,t,n){const i=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(i)),r=i/Math.pow(10,a),o=r>=_se?10:r>=xse?5:r>=wse?2:1;let s,l,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?Vw(e,t,n*2):[s,l,u]}function gD(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[a,r,o]=i?Vw(t,e,n):Vw(e,t,n);if(!(r>=a))return[];const s=r-a+1,l=new Array(s);if(i)if(o<0)for(let u=0;u<s;++u)l[u]=(r-u)/-o;else for(let u=0;u<s;++u)l[u]=(r-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(a+u)/-o;else for(let u=0;u<s;++u)l[u]=(a+u)*o;return l}function mD(e,t,n){return t=+t,e=+e,n=+n,Vw(e,t,n)[2]}function mf(e,t,n){t=+t,e=+e,n=+n;const i=t<e,a=i?mD(t,e,n):mD(e,t,n);return(i?-1:1)*(a<0?1/-a:a)}function rf(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a)}return n}function Ww(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a)}return n}function MV(e,t,n=0,i=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(a=a===void 0?LV:bse(a);i>n;){if(i-n>600){const l=i-n+1,u=t-n+1,d=Math.log(l),c=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*c*(l-c)/l)*(u-l/2<0?-1:1),v=Math.max(n,Math.floor(t-u*c/l+g)),b=Math.min(i,Math.floor(t+(l-u)*c/l+g));MV(e,t,v,b,a)}const r=e[t];let o=n,s=i;for(Vy(e,n,t),a(e[i],r)>0&&Vy(e,n,i);o<s;){for(Vy(e,o,s),++o,--s;a(e[o],r)<0;)++o;for(;a(e[s],r)>0;)--s}a(e[n],r)===0?Vy(e,n,s):(++s,Vy(e,s,i)),s<=t&&(n=s+1),t<=s&&(i=s-1)}return e}function Vy(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function yD(e,t,n){if(e=Float64Array.from(pse(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Ww(e);if(t>=1)return rf(e);var i,a=(i-1)*t,r=Math.floor(a),o=rf(MV(e,r).subarray(0,r+1)),s=Ww(e.subarray(r+1));return o+(s-o)*(a-r)}}function zV(e,t,n=RV){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,a=(i-1)*t,r=Math.floor(a),o=+n(e[r],r,e),s=+n(e[r+1],r+1,e);return o+(s-o)*(a-r)}}function qV(e,t){let n=0,i=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(++n,i+=a);else{let a=-1;for(let r of e)(r=t(r,++a,e))!=null&&(r=+r)>=r&&(++n,i+=r)}if(n)return i/n}function jV(e,t){return yD(e,.5,t)}function*kse(e){for(const t of e)yield*t}function n2(e){return Array.from(kse(e))}function Lr(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var i=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,r=new Array(a);++i<a;)r[i]=e+i*n;return r}function QI(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function $se(e,...t){e=new Bw(e),t=t.map(Ese);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function Ese(e){return e instanceof Bw?e:new Bw(e)}function Sse(...e){const t=new Bw;for(const n of e)for(const i of n)t.add(i);return t}var Tse={value:()=>{}};function eP(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new N1(n)}function N1(e){this._=e}function Ase(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}N1.prototype=eP.prototype={constructor:N1,on:function(e,t){var n=this._,i=Ase(e+"",n),a,r=-1,o=i.length;if(arguments.length<2){for(;++r<o;)if((a=(e=i[r]).type)&&(a=Ose(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<o;)if(a=(e=i[r]).type)n[a]=Q5(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Q5(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new N1(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,r;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,r=i.length;a<r;++a)i[a].value.apply(t,n)}};function Ose(e,t){for(var n=0,i=e.length,a;n<i;++n)if((a=e[n]).name===t)return a.value}function Q5(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=Tse,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var vD="http://www.w3.org/1999/xhtml";const eq={svg:"http://www.w3.org/2000/svg",xhtml:vD,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function i2(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),eq.hasOwnProperty(t)?{space:eq[t],local:e}:e}function Dse(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===vD&&t.documentElement.namespaceURI===vD?t.createElement(e):t.createElementNS(n,e)}}function Cse(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function UV(e){var t=i2(e);return(t.local?Cse:Dse)(t)}function Rse(){}function tP(e){return e==null?Rse:function(){return this.querySelector(e)}}function Ise(e){typeof e!="function"&&(e=tP(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var r=t[a],o=r.length,s=i[a]=new Array(o),l,u,d=0;d<o;++d)(l=r[d])&&(u=e.call(l,l.__data__,d,r))&&("__data__"in l&&(u.__data__=l.__data__),s[d]=u);return new Ba(i,this._parents)}function BV(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Pse(){return[]}function VV(e){return e==null?Pse:function(){return this.querySelectorAll(e)}}function Fse(e){return function(){return BV(e.apply(this,arguments))}}function Nse(e){typeof e=="function"?e=Fse(e):e=VV(e);for(var t=this._groups,n=t.length,i=[],a=[],r=0;r<n;++r)for(var o=t[r],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(i.push(e.call(l,l.__data__,u,o)),a.push(l));return new Ba(i,a)}function WV(e){return function(){return this.matches(e)}}function GV(e){return function(t){return t.matches(e)}}var Lse=Array.prototype.find;function Mse(e){return function(){return Lse.call(this.children,e)}}function zse(){return this.firstElementChild}function qse(e){return this.select(e==null?zse:Mse(typeof e=="function"?e:GV(e)))}var jse=Array.prototype.filter;function Use(){return Array.from(this.children)}function Bse(e){return function(){return jse.call(this.children,e)}}function Vse(e){return this.selectAll(e==null?Use:Bse(typeof e=="function"?e:GV(e)))}function Wse(e){typeof e!="function"&&(e=WV(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var r=t[a],o=r.length,s=i[a]=[],l,u=0;u<o;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new Ba(i,this._parents)}function HV(e){return new Array(e.length)}function Gse(){return new Ba(this._enter||this._groups.map(HV),this._parents)}function Gw(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Gw.prototype={constructor:Gw,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Hse(e){return function(){return e}}function Yse(e,t,n,i,a,r){for(var o=0,s,l=t.length,u=r.length;o<u;++o)(s=t[o])?(s.__data__=r[o],i[o]=s):n[o]=new Gw(e,r[o]);for(;o<l;++o)(s=t[o])&&(a[o]=s)}function Xse(e,t,n,i,a,r,o){var s,l,u=new Map,d=t.length,c=r.length,g=new Array(d),v;for(s=0;s<d;++s)(l=t[s])&&(g[s]=v=o.call(l,l.__data__,s,t)+"",u.has(v)?a[s]=l:u.set(v,l));for(s=0;s<c;++s)v=o.call(e,r[s],s,r)+"",(l=u.get(v))?(i[s]=l,l.__data__=r[s],u.delete(v)):n[s]=new Gw(e,r[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(g[s])===l&&(a[s]=l)}function Zse(e){return e.__data__}function Jse(e,t){if(!arguments.length)return Array.from(this,Zse);var n=t?Xse:Yse,i=this._parents,a=this._groups;typeof e!="function"&&(e=Hse(e));for(var r=a.length,o=new Array(r),s=new Array(r),l=new Array(r),u=0;u<r;++u){var d=i[u],c=a[u],g=c.length,v=Kse(e.call(d,d&&d.__data__,u,i)),b=v.length,x=s[u]=new Array(b),k=o[u]=new Array(b),w=l[u]=new Array(g);n(d,c,x,k,w,v,t);for(var E=0,T=0,O,D;E<b;++E)if(O=x[E]){for(E>=T&&(T=E+1);!(D=k[T])&&++T<b;);O._next=D||null}}return o=new Ba(o,i),o._enter=s,o._exit=l,o}function Kse(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Qse(){return new Ba(this._exit||this._groups.map(HV),this._parents)}function ele(e,t,n){var i=this.enter(),a=this,r=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?r.remove():n(r),i&&a?i.merge(a).order():a}function tle(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,r=i.length,o=Math.min(a,r),s=new Array(a),l=0;l<o;++l)for(var u=n[l],d=i[l],c=u.length,g=s[l]=new Array(c),v,b=0;b<c;++b)(v=u[b]||d[b])&&(g[b]=v);for(;l<a;++l)s[l]=n[l];return new Ba(s,this._parents)}function nle(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],a=i.length-1,r=i[a],o;--a>=0;)(o=i[a])&&(r&&o.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(o,r),r=o);return this}function ile(e){e||(e=ale);function t(c,g){return c&&g?e(c.__data__,g.__data__):!c-!g}for(var n=this._groups,i=n.length,a=new Array(i),r=0;r<i;++r){for(var o=n[r],s=o.length,l=a[r]=new Array(s),u,d=0;d<s;++d)(u=o[d])&&(l[d]=u);l.sort(t)}return new Ba(a,this._parents).order()}function ale(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rle(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ole(){return Array.from(this)}function sle(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,r=i.length;a<r;++a){var o=i[a];if(o)return o}return null}function lle(){let e=0;for(const t of this)++e;return e}function ule(){return!this.node()}function dle(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a=t[n],r=0,o=a.length,s;r<o;++r)(s=a[r])&&e.call(s,s.__data__,r,a);return this}function fle(e){return function(){this.removeAttribute(e)}}function cle(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hle(e,t){return function(){this.setAttribute(e,t)}}function ple(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gle(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function mle(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yle(e,t){var n=i2(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?cle:fle:typeof t=="function"?n.local?mle:gle:n.local?ple:hle)(n,t))}function YV(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vle(e){return function(){this.style.removeProperty(e)}}function ble(e,t,n){return function(){this.style.setProperty(e,t,n)}}function _le(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function xle(e,t,n){return arguments.length>1?this.each((t==null?vle:typeof t=="function"?_le:ble)(e,t,n??"")):Lg(this.node(),e)}function Lg(e,t){return e.style.getPropertyValue(t)||YV(e).getComputedStyle(e,null).getPropertyValue(t)}function wle(e){return function(){delete this[e]}}function kle(e,t){return function(){this[e]=t}}function $le(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ele(e,t){return arguments.length>1?this.each((t==null?wle:typeof t=="function"?$le:kle)(e,t)):this.node()[e]}function XV(e){return e.trim().split(/^|\s+/)}function nP(e){return e.classList||new ZV(e)}function ZV(e){this._node=e,this._names=XV(e.getAttribute("class")||"")}ZV.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function JV(e,t){for(var n=nP(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function KV(e,t){for(var n=nP(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function Sle(e){return function(){JV(this,e)}}function Tle(e){return function(){KV(this,e)}}function Ale(e,t){return function(){(t.apply(this,arguments)?JV:KV)(this,e)}}function Ole(e,t){var n=XV(e+"");if(arguments.length<2){for(var i=nP(this.node()),a=-1,r=n.length;++a<r;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?Ale:t?Sle:Tle)(n,t))}function Dle(){this.textContent=""}function Cle(e){return function(){this.textContent=e}}function Rle(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ile(e){return arguments.length?this.each(e==null?Dle:(typeof e=="function"?Rle:Cle)(e)):this.node().textContent}function Ple(){this.innerHTML=""}function Fle(e){return function(){this.innerHTML=e}}function Nle(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Lle(e){return arguments.length?this.each(e==null?Ple:(typeof e=="function"?Nle:Fle)(e)):this.node().innerHTML}function Mle(){this.nextSibling&&this.parentNode.appendChild(this)}function zle(){return this.each(Mle)}function qle(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jle(){return this.each(qle)}function Ule(e){var t=typeof e=="function"?e:UV(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ble(){return null}function Vle(e,t){var n=typeof e=="function"?e:UV(e),i=t==null?Ble:typeof t=="function"?t:tP(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Wle(){var e=this.parentNode;e&&e.removeChild(this)}function Gle(){return this.each(Wle)}function Hle(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Yle(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xle(e){return this.select(e?Yle:Hle)}function Zle(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Jle(e){return function(t){e.call(this,t,this.__data__)}}function Kle(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Qle(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,a=t.length,r;n<a;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++i]=r;++i?t.length=i:delete this.__on}}}function eue(e,t,n){return function(){var i=this.__on,a,r=Jle(t);if(i){for(var o=0,s=i.length;o<s;++o)if((a=i[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=r,a.options=n),a.value=t;return}}this.addEventListener(e.type,r,n),a={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(a):this.__on=[a]}}function tue(e,t,n){var i=Kle(e+""),a,r=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,d;l<u;++l)for(a=0,d=s[l];a<r;++a)if((o=i[a]).type===d.type&&o.name===d.name)return d.value}return}for(s=t?eue:Qle,a=0;a<r;++a)this.each(s(i[a],t,n));return this}function QV(e,t,n){var i=YV(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function nue(e,t){return function(){return QV(this,e,t)}}function iue(e,t){return function(){return QV(this,e,t.apply(this,arguments))}}function aue(e,t){return this.each((typeof t=="function"?iue:nue)(e,t))}function*rue(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,r=i.length,o;a<r;++a)(o=i[a])&&(yield o)}var iP=[null];function Ba(e,t){this._groups=e,this._parents=t}function M_(){return new Ba([[document.documentElement]],iP)}function oue(){return this}Ba.prototype=M_.prototype={constructor:Ba,select:Ise,selectAll:Nse,selectChild:qse,selectChildren:Vse,filter:Wse,data:Jse,enter:Gse,exit:Qse,join:ele,merge:tle,selection:oue,order:nle,sort:ile,call:rle,nodes:ole,node:sle,size:lle,empty:ule,each:dle,attr:yle,style:xle,property:Ele,classed:Ole,text:Ile,html:Lle,raise:zle,lower:jle,append:Ule,insert:Vle,remove:Gle,clone:Xle,datum:Zle,on:tue,dispatch:aue,[Symbol.iterator]:rue};function yg(e){return typeof e=="string"?new Ba([[document.querySelector(e)]],[document.documentElement]):new Ba([[e]],iP)}function tq(e){return typeof e=="string"?new Ba([document.querySelectorAll(e)],[document.documentElement]):new Ba([BV(e)],iP)}function Dm(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function z_(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function If(){}var lh=.7,Mg=1/lh,vg="\\s*([+-]?\\d+)\\s*",Yb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sue=/^#([0-9a-f]{3,8})$/,lue=new RegExp(`^rgb\\(${vg},${vg},${vg}\\)$`),uue=new RegExp(`^rgb\\(${gl},${gl},${gl}\\)$`),due=new RegExp(`^rgba\\(${vg},${vg},${vg},${Yb}\\)$`),fue=new RegExp(`^rgba\\(${gl},${gl},${gl},${Yb}\\)$`),cue=new RegExp(`^hsl\\(${Yb},${gl},${gl}\\)$`),hue=new RegExp(`^hsla\\(${Yb},${gl},${gl},${Yb}\\)$`),nq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dm(If,Mu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iq,formatHex:iq,formatHex8:pue,formatHsl:gue,formatRgb:aq,toString:aq});function iq(){return this.rgb().formatHex()}function pue(){return this.rgb().formatHex8()}function gue(){return eW(this).formatHsl()}function aq(){return this.rgb().formatRgb()}function Mu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sue.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rq(t):n===3?new vi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lue.exec(e))?new vi(t[1],t[2],t[3],1):(t=uue.exec(e))?new vi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=due.exec(e))?wx(t[1],t[2],t[3],t[4]):(t=fue.exec(e))?wx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cue.exec(e))?lq(t[1],t[2]/100,t[3]/100,1):(t=hue.exec(e))?lq(t[1],t[2]/100,t[3]/100,t[4]):nq.hasOwnProperty(e)?rq(nq[e]):e==="transparent"?new vi(NaN,NaN,NaN,0):null}function rq(e){return new vi(e>>16&255,e>>8&255,e&255,1)}function wx(e,t,n,i){return i<=0&&(e=t=n=NaN),new vi(e,t,n,i)}function aP(e){return e instanceof If||(e=Mu(e)),e?(e=e.rgb(),new vi(e.r,e.g,e.b,e.opacity)):new vi}function yf(e,t,n,i){return arguments.length===1?aP(e):new vi(e,t,n,i??1)}function vi(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Dm(vi,yf,z_(If,{brighter(e){return e=e==null?Mg:Math.pow(Mg,e),new vi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?lh:Math.pow(lh,e),new vi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vi(Yc(this.r),Yc(this.g),Yc(this.b),Hw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oq,formatHex:oq,formatHex8:mue,formatRgb:sq,toString:sq}));function oq(){return`#${Uc(this.r)}${Uc(this.g)}${Uc(this.b)}`}function mue(){return`#${Uc(this.r)}${Uc(this.g)}${Uc(this.b)}${Uc((isNaN(this.opacity)?1:this.opacity)*255)}`}function sq(){const e=Hw(this.opacity);return`${e===1?"rgb(":"rgba("}${Yc(this.r)}, ${Yc(this.g)}, ${Yc(this.b)}${e===1?")":`, ${e})`}`}function Hw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Yc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Uc(e){return e=Yc(e),(e<16?"0":"")+e.toString(16)}function lq(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rs(e,t,n,i)}function eW(e){if(e instanceof rs)return new rs(e.h,e.s,e.l,e.opacity);if(e instanceof If||(e=Mu(e)),!e)return new rs;if(e instanceof rs)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),r=Math.max(t,n,i),o=NaN,s=r-a,l=(r+a)/2;return s?(t===r?o=(n-i)/s+(n<i)*6:n===r?o=(i-t)/s+2:o=(t-n)/s+4,s/=l<.5?r+a:2-r-a,o*=60):s=l>0&&l<1?0:o,new rs(o,s,l,e.opacity)}function Yw(e,t,n,i){return arguments.length===1?eW(e):new rs(e,t,n,i??1)}function rs(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Dm(rs,Yw,z_(If,{brighter(e){return e=e==null?Mg:Math.pow(Mg,e),new rs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lh:Math.pow(lh,e),new rs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new vi(gT(e>=240?e-240:e+120,a,i),gT(e,a,i),gT(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new rs(uq(this.h),kx(this.s),kx(this.l),Hw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hw(this.opacity);return`${e===1?"hsl(":"hsla("}${uq(this.h)}, ${kx(this.s)*100}%, ${kx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uq(e){return e=(e||0)%360,e<0?e+360:e}function kx(e){return Math.max(0,Math.min(1,e||0))}function gT(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tW=Math.PI/180,nW=180/Math.PI,Xw=18,iW=.96422,aW=1,rW=.82521,oW=4/29,bg=6/29,sW=3*bg*bg,yue=bg*bg*bg;function lW(e){if(e instanceof ml)return new ml(e.l,e.a,e.b,e.opacity);if(e instanceof mu)return uW(e);e instanceof vi||(e=aP(e));var t=bT(e.r),n=bT(e.g),i=bT(e.b),a=mT((.2225045*t+.7168786*n+.0606169*i)/aW),r,o;return t===n&&n===i?r=o=a:(r=mT((.4360747*t+.3850649*n+.1430804*i)/iW),o=mT((.0139322*t+.0971045*n+.7141733*i)/rW)),new ml(116*a-16,500*(r-a),200*(a-o),e.opacity)}function Zw(e,t,n,i){return arguments.length===1?lW(e):new ml(e,t,n,i??1)}function ml(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Dm(ml,Zw,z_(If,{brighter(e){return new ml(this.l+Xw*(e??1),this.a,this.b,this.opacity)},darker(e){return new ml(this.l-Xw*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=iW*yT(t),e=aW*yT(e),n=rW*yT(n),new vi(vT(3.1338561*t-1.6168667*e-.4906146*n),vT(-.9787684*t+1.9161415*e+.033454*n),vT(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function mT(e){return e>yue?Math.pow(e,1/3):e/sW+oW}function yT(e){return e>bg?e*e*e:sW*(e-oW)}function vT(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function bT(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function vue(e){if(e instanceof mu)return new mu(e.h,e.c,e.l,e.opacity);if(e instanceof ml||(e=lW(e)),e.a===0&&e.b===0)return new mu(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*nW;return new mu(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Jw(e,t,n,i){return arguments.length===1?vue(e):new mu(e,t,n,i??1)}function mu(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function uW(e){if(isNaN(e.h))return new ml(e.l,0,0,e.opacity);var t=e.h*tW;return new ml(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Dm(mu,Jw,z_(If,{brighter(e){return new mu(this.h,this.c,this.l+Xw*(e??1),this.opacity)},darker(e){return new mu(this.h,this.c,this.l-Xw*(e??1),this.opacity)},rgb(){return uW(this).rgb()}}));var dW=-.14861,rP=1.78277,oP=-.29227,a2=-.90649,Xb=1.97294,dq=Xb*a2,fq=Xb*rP,cq=rP*oP-a2*dW;function bue(e){if(e instanceof Xc)return new Xc(e.h,e.s,e.l,e.opacity);e instanceof vi||(e=aP(e));var t=e.r/255,n=e.g/255,i=e.b/255,a=(cq*i+dq*t-fq*n)/(cq+dq-fq),r=i-a,o=(Xb*(n-a)-oP*r)/a2,s=Math.sqrt(o*o+r*r)/(Xb*a*(1-a)),l=s?Math.atan2(o,r)*nW-120:NaN;return new Xc(l<0?l+360:l,s,a,e.opacity)}function bD(e,t,n,i){return arguments.length===1?bue(e):new Xc(e,t,n,i??1)}function Xc(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Dm(Xc,bD,z_(If,{brighter(e){return e=e==null?Mg:Math.pow(Mg,e),new Xc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lh:Math.pow(lh,e),new Xc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*tW,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),a=Math.sin(e);return new vi(255*(t+n*(dW*i+rP*a)),255*(t+n*(oP*i+a2*a)),255*(t+n*(Xb*i)),this.opacity)}}));function fW(e,t,n,i,a){var r=e*e,o=r*e;return((1-3*e+3*r-o)*t+(4-6*r+3*o)*n+(1+3*e+3*r-3*o)*i+o*a)/6}function cW(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[i],r=e[i+1],o=i>0?e[i-1]:2*a-r,s=i<t-1?e[i+2]:2*r-a;return fW((n-i/t)*t,o,a,r,s)}}function hW(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),a=e[(i+t-1)%t],r=e[i%t],o=e[(i+1)%t],s=e[(i+2)%t];return fW((n-i/t)*t,a,r,o,s)}}const r2=e=>()=>e;function pW(e,t){return function(n){return e+n*t}}function _ue(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function o2(e,t){var n=t-e;return n?pW(e,n>180||n<-180?n-360*Math.round(n/360):n):r2(isNaN(e)?t:e)}function xue(e){return(e=+e)==1?bi:function(t,n){return n-t?_ue(t,n,e):r2(isNaN(t)?n:t)}}function bi(e,t){var n=t-e;return n?pW(e,n):r2(isNaN(e)?t:e)}const Zb=function e(t){var n=xue(t);function i(a,r){var o=n((a=yf(a)).r,(r=yf(r)).r),s=n(a.g,r.g),l=n(a.b,r.b),u=bi(a.opacity,r.opacity);return function(d){return a.r=o(d),a.g=s(d),a.b=l(d),a.opacity=u(d),a+""}}return i.gamma=e,i}(1);function gW(e){return function(t){var n=t.length,i=new Array(n),a=new Array(n),r=new Array(n),o,s;for(o=0;o<n;++o)s=yf(t[o]),i[o]=s.r||0,a[o]=s.g||0,r[o]=s.b||0;return i=e(i),a=e(a),r=e(r),s.opacity=1,function(l){return s.r=i(l),s.g=a(l),s.b=r(l),s+""}}}var mW=gW(cW),wue=gW(hW);function sP(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(r){for(a=0;a<n;++a)i[a]=e[a]*(1-r)+t[a]*r;return i}}function yW(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kue(e,t){return(yW(t)?sP:vW)(e,t)}function vW(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),r=new Array(n),o;for(o=0;o<i;++o)a[o]=Pf(e[o],t[o]);for(;o<n;++o)r[o]=t[o];return function(s){for(o=0;o<i;++o)r[o]=a[o](s);return r}}function bW(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function mo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _W(e,t){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Pf(e[a],t[a]):i[a]=t[a];return function(r){for(a in n)i[a]=n[a](r);return i}}var _D=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_T=new RegExp(_D.source,"g");function $ue(e){return function(){return e}}function Eue(e){return function(t){return e(t)+""}}function lP(e,t){var n=_D.lastIndex=_T.lastIndex=0,i,a,r,o=-1,s=[],l=[];for(e=e+"",t=t+"";(i=_D.exec(e))&&(a=_T.exec(t));)(r=a.index)>n&&(r=t.slice(n,r),s[o]?s[o]+=r:s[++o]=r),(i=i[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:mo(i,a)})),n=_T.lastIndex;return n<t.length&&(r=t.slice(n),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?Eue(l[0].x):$ue(t):(t=l.length,function(u){for(var d=0,c;d<t;++d)s[(c=l[d]).i]=c.x(u);return s.join("")})}function Pf(e,t){var n=typeof t,i;return t==null||n==="boolean"?r2(t):(n==="number"?mo:n==="string"?(i=Mu(t))?(t=i,Zb):lP:t instanceof Mu?Zb:t instanceof Date?bW:yW(t)?sP:Array.isArray(t)?vW:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_W:mo)(e,t)}function Sue(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Tue(e,t){var n=o2(+e,+t);return function(i){var a=n(i);return a-360*Math.floor(a/360)}}function q_(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var hq=180/Math.PI,xD={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xW(e,t,n,i,a,r){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:a,translateY:r,rotate:Math.atan2(t,e)*hq,skewX:Math.atan(l)*hq,scaleX:o,scaleY:s}}var $x;function Aue(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xD:xW(t.a,t.b,t.c,t.d,t.e,t.f)}function Oue(e){return e==null||($x||($x=document.createElementNS("http://www.w3.org/2000/svg","g")),$x.setAttribute("transform",e),!(e=$x.transform.baseVal.consolidate()))?xD:(e=e.matrix,xW(e.a,e.b,e.c,e.d,e.e,e.f))}function wW(e,t,n,i){function a(u){return u.length?u.pop()+" ":""}function r(u,d,c,g,v,b){if(u!==c||d!==g){var x=v.push("translate(",null,t,null,n);b.push({i:x-4,x:mo(u,c)},{i:x-2,x:mo(d,g)})}else(c||g)&&v.push("translate("+c+t+g+n)}function o(u,d,c,g){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),g.push({i:c.push(a(c)+"rotate(",null,i)-2,x:mo(u,d)})):d&&c.push(a(c)+"rotate("+d+i)}function s(u,d,c,g){u!==d?g.push({i:c.push(a(c)+"skewX(",null,i)-2,x:mo(u,d)}):d&&c.push(a(c)+"skewX("+d+i)}function l(u,d,c,g,v,b){if(u!==c||d!==g){var x=v.push(a(v)+"scale(",null,",",null,")");b.push({i:x-4,x:mo(u,c)},{i:x-2,x:mo(d,g)})}else(c!==1||g!==1)&&v.push(a(v)+"scale("+c+","+g+")")}return function(u,d){var c=[],g=[];return u=e(u),d=e(d),r(u.translateX,u.translateY,d.translateX,d.translateY,c,g),o(u.rotate,d.rotate,c,g),s(u.skewX,d.skewX,c,g),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,c,g),u=d=null,function(v){for(var b=-1,x=g.length,k;++b<x;)c[(k=g[b]).i]=k.x(v);return c.join("")}}}var kW=wW(Aue,"px, ","px)","deg)"),$W=wW(Oue,", ",")",")"),Due=1e-12;function pq(e){return((e=Math.exp(e))+1/e)/2}function Cue(e){return((e=Math.exp(e))-1/e)/2}function Rue(e){return((e=Math.exp(2*e))-1)/(e+1)}const Iue=function e(t,n,i){function a(r,o){var s=r[0],l=r[1],u=r[2],d=o[0],c=o[1],g=o[2],v=d-s,b=c-l,x=v*v+b*b,k,w;if(x<Due)w=Math.log(g/u)/t,k=function(R){return[s+R*v,l+R*b,u*Math.exp(t*R*w)]};else{var E=Math.sqrt(x),T=(g*g-u*u+i*x)/(2*u*n*E),O=(g*g-u*u-i*x)/(2*g*n*E),D=Math.log(Math.sqrt(T*T+1)-T),P=Math.log(Math.sqrt(O*O+1)-O);w=(P-D)/t,k=function(R){var M=R*w,q=pq(D),H=u/(n*E)*(q*Rue(t*M+D)-Cue(D));return[s+H*v,l+H*b,u*q/pq(t*M+D)]}}return k.duration=w*1e3*t/Math.SQRT2,k}return a.rho=function(r){var o=Math.max(.001,+r),s=o*o,l=s*s;return e(o,s,l)},a}(Math.SQRT2,2,4);function EW(e){return function(t,n){var i=e((t=Yw(t)).h,(n=Yw(n)).h),a=bi(t.s,n.s),r=bi(t.l,n.l),o=bi(t.opacity,n.opacity);return function(s){return t.h=i(s),t.s=a(s),t.l=r(s),t.opacity=o(s),t+""}}}const Pue=EW(o2);var Fue=EW(bi);function Nue(e,t){var n=bi((e=Zw(e)).l,(t=Zw(t)).l),i=bi(e.a,t.a),a=bi(e.b,t.b),r=bi(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=a(o),e.opacity=r(o),e+""}}function SW(e){return function(t,n){var i=e((t=Jw(t)).h,(n=Jw(n)).h),a=bi(t.c,n.c),r=bi(t.l,n.l),o=bi(t.opacity,n.opacity);return function(s){return t.h=i(s),t.c=a(s),t.l=r(s),t.opacity=o(s),t+""}}}const Lue=SW(o2);var Mue=SW(bi);function TW(e){return function t(n){n=+n;function i(a,r){var o=e((a=bD(a)).h,(r=bD(r)).h),s=bi(a.s,r.s),l=bi(a.l,r.l),u=bi(a.opacity,r.opacity);return function(d){return a.h=o(d),a.s=s(d),a.l=l(Math.pow(d,n)),a.opacity=u(d),a+""}}return i.gamma=t,i}(1)}const zue=TW(o2);var que=TW(bi);function uP(e,t){t===void 0&&(t=e,e=Pf);for(var n=0,i=t.length-1,a=t[0],r=new Array(i<0?0:i);n<i;)r[n]=e(a,a=t[++n]);return function(o){var s=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return r[s](o-s)}}function jue(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Uue=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Pf,interpolateArray:kue,interpolateBasis:cW,interpolateBasisClosed:hW,interpolateCubehelix:zue,interpolateCubehelixLong:que,interpolateDate:bW,interpolateDiscrete:Sue,interpolateHcl:Lue,interpolateHclLong:Mue,interpolateHsl:Pue,interpolateHslLong:Fue,interpolateHue:Tue,interpolateLab:Nue,interpolateNumber:mo,interpolateNumberArray:sP,interpolateObject:_W,interpolateRgb:Zb,interpolateRgbBasis:mW,interpolateRgbBasisClosed:wue,interpolateRound:q_,interpolateString:lP,interpolateTransformCss:kW,interpolateTransformSvg:$W,interpolateZoom:Iue,piecewise:uP,quantize:jue},Symbol.toStringTag,{value:"Module"}));var zg=0,xv=0,Wy=0,AW=1e3,Kw,wv,Qw=0,uh=0,s2=0,Jb=typeof performance=="object"&&performance.now?performance:Date,OW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function l2(){return uh||(OW(Bue),uh=Jb.now()+s2)}function Bue(){uh=0}function Kb(){this._call=this._time=this._next=null}Kb.prototype=dP.prototype={constructor:Kb,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?l2():+n)+(t==null?0:+t),!this._next&&wv!==this&&(wv?wv._next=this:Kw=this,wv=this),this._call=e,this._time=n,wD()},stop:function(){this._call&&(this._call=null,this._time=1/0,wD())}};function dP(e,t,n){var i=new Kb;return i.restart(e,t,n),i}function Vue(){l2(),++zg;for(var e=Kw,t;e;)(t=uh-e._time)>=0&&e._call.call(void 0,t),e=e._next;--zg}function gq(){uh=(Qw=Jb.now())+s2,zg=xv=0;try{Vue()}finally{zg=0,Gue(),uh=0}}function Wue(){var e=Jb.now(),t=e-Qw;t>AW&&(s2-=t,Qw=e)}function Gue(){for(var e,t=Kw,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Kw=n);wv=e,wD(i)}function wD(e){if(!zg){xv&&(xv=clearTimeout(xv));var t=e-uh;t>24?(e<1/0&&(xv=setTimeout(gq,e-Jb.now()-s2)),Wy&&(Wy=clearInterval(Wy))):(Wy||(Qw=Jb.now(),Wy=setInterval(Wue,AW)),zg=1,OW(gq))}}function mq(e,t,n){var i=new Kb;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,n),i}function Hue(e,t,n){var i=new Kb,a=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(r,o,s){o=+o,s=s==null?l2():+s,i._restart(function l(u){u+=a,i._restart(l,a+=o,s),r(u)},o,s)},i.restart(e,t,n),i)}var Yue=eP("start","end","cancel","interrupt"),Xue=[],DW=0,yq=1,kD=2,L1=3,vq=4,$D=5,M1=6;function u2(e,t,n,i,a,r){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Zue(e,n,{name:t,index:i,group:a,on:Yue,tween:Xue,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:DW})}function fP(e,t){var n=Ts(e,t);if(n.state>DW)throw new Error("too late; already scheduled");return n}function Cl(e,t){var n=Ts(e,t);if(n.state>L1)throw new Error("too late; already running");return n}function Ts(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Zue(e,t,n){var i=e.__transition,a;i[t]=n,n.timer=dP(r,0,n.time);function r(u){n.state=yq,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var d,c,g,v;if(n.state!==yq)return l();for(d in i)if(v=i[d],v.name===n.name){if(v.state===L1)return mq(o);v.state===vq?(v.state=M1,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete i[d]):+d<t&&(v.state=M1,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete i[d])}if(mq(function(){n.state===L1&&(n.state=vq,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=kD,n.on.call("start",e,e.__data__,n.index,n.group),n.state===kD){for(n.state=L1,a=new Array(g=n.tween.length),d=0,c=-1;d<g;++d)(v=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(a[++c]=v);a.length=c+1}}function s(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=$D,1),c=-1,g=a.length;++c<g;)a[c].call(e,d);n.state===$D&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=M1,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function Jue(e,t){var n=e.__transition,i,a,r=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){r=!1;continue}a=i.state>kD&&i.state<$D,i.state=M1,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}r&&delete e.__transition}}function Kue(e){return this.each(function(){Jue(this,e)})}function Que(e,t){var n,i;return function(){var a=Cl(this,e),r=a.tween;if(r!==n){i=n=r;for(var o=0,s=i.length;o<s;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}a.tween=i}}function ede(e,t,n){var i,a;if(typeof n!="function")throw new Error;return function(){var r=Cl(this,e),o=r.tween;if(o!==i){a=(i=o).slice();for(var s={name:t,value:n},l=0,u=a.length;l<u;++l)if(a[l].name===t){a[l]=s;break}l===u&&a.push(s)}r.tween=a}}function tde(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Ts(this.node(),n).tween,a=0,r=i.length,o;a<r;++a)if((o=i[a]).name===e)return o.value;return null}return this.each((t==null?Que:ede)(n,e,t))}function cP(e,t,n){var i=e._id;return e.each(function(){var a=Cl(this,i);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Ts(a,i).value[t]}}function CW(e,t){var n;return(typeof t=="number"?mo:t instanceof Mu?Zb:(n=Mu(t))?(t=n,Zb):lP)(e,t)}function nde(e){return function(){this.removeAttribute(e)}}function ide(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ade(e,t,n){var i,a=n+"",r;return function(){var o=this.getAttribute(e);return o===a?null:o===i?r:r=t(i=o,n)}}function rde(e,t,n){var i,a=n+"",r;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===i?r:r=t(i=o,n)}}function ode(e,t,n){var i,a,r;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===i&&l===a?r:(a=l,r=t(i=o,s)))}}function sde(e,t,n){var i,a,r;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===i&&l===a?r:(a=l,r=t(i=o,s)))}}function lde(e,t){var n=i2(e),i=n==="transform"?$W:CW;return this.attrTween(e,typeof t=="function"?(n.local?sde:ode)(n,i,cP(this,"attr."+e,t)):t==null?(n.local?ide:nde)(n):(n.local?rde:ade)(n,i,t))}function ude(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dde(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fde(e,t){var n,i;function a(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&dde(e,r)),n}return a._value=t,a}function cde(e,t){var n,i;function a(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&ude(e,r)),n}return a._value=t,a}function hde(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=i2(e);return this.tween(n,(i.local?fde:cde)(i,t))}function pde(e,t){return function(){fP(this,e).delay=+t.apply(this,arguments)}}function gde(e,t){return t=+t,function(){fP(this,e).delay=t}}function mde(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pde:gde)(t,e)):Ts(this.node(),t).delay}function yde(e,t){return function(){Cl(this,e).duration=+t.apply(this,arguments)}}function vde(e,t){return t=+t,function(){Cl(this,e).duration=t}}function bde(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yde:vde)(t,e)):Ts(this.node(),t).duration}function _de(e,t){if(typeof t!="function")throw new Error;return function(){Cl(this,e).ease=t}}function xde(e){var t=this._id;return arguments.length?this.each(_de(t,e)):Ts(this.node(),t).ease}function wde(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Cl(this,e).ease=n}}function kde(e){if(typeof e!="function")throw new Error;return this.each(wde(this._id,e))}function $de(e){typeof e!="function"&&(e=WV(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var r=t[a],o=r.length,s=i[a]=[],l,u=0;u<o;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new zu(i,this._parents,this._name,this._id)}function Ede(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,r=Math.min(i,a),o=new Array(i),s=0;s<r;++s)for(var l=t[s],u=n[s],d=l.length,c=o[s]=new Array(d),g,v=0;v<d;++v)(g=l[v]||u[v])&&(c[v]=g);for(;s<i;++s)o[s]=t[s];return new zu(o,this._parents,this._name,this._id)}function Sde(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Tde(e,t,n){var i,a,r=Sde(t)?fP:Cl;return function(){var o=r(this,e),s=o.on;s!==i&&(a=(i=s).copy()).on(t,n),o.on=a}}function Ade(e,t){var n=this._id;return arguments.length<2?Ts(this.node(),n).on.on(e):this.each(Tde(n,e,t))}function Ode(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Dde(){return this.on("end.remove",Ode(this._id))}function Cde(e){var t=this._name,n=this._id;typeof e!="function"&&(e=tP(e));for(var i=this._groups,a=i.length,r=new Array(a),o=0;o<a;++o)for(var s=i[o],l=s.length,u=r[o]=new Array(l),d,c,g=0;g<l;++g)(d=s[g])&&(c=e.call(d,d.__data__,g,s))&&("__data__"in d&&(c.__data__=d.__data__),u[g]=c,u2(u[g],t,n,g,u,Ts(d,n)));return new zu(r,this._parents,t,n)}function Rde(e){var t=this._name,n=this._id;typeof e!="function"&&(e=VV(e));for(var i=this._groups,a=i.length,r=[],o=[],s=0;s<a;++s)for(var l=i[s],u=l.length,d,c=0;c<u;++c)if(d=l[c]){for(var g=e.call(d,d.__data__,c,l),v,b=Ts(d,n),x=0,k=g.length;x<k;++x)(v=g[x])&&u2(v,t,n,x,g,b);r.push(g),o.push(d)}return new zu(r,o,t,n)}var Ide=M_.prototype.constructor;function Pde(){return new Ide(this._groups,this._parents)}function Fde(e,t){var n,i,a;return function(){var r=Lg(this,e),o=(this.style.removeProperty(e),Lg(this,e));return r===o?null:r===n&&o===i?a:a=t(n=r,i=o)}}function RW(e){return function(){this.style.removeProperty(e)}}function Nde(e,t,n){var i,a=n+"",r;return function(){var o=Lg(this,e);return o===a?null:o===i?r:r=t(i=o,n)}}function Lde(e,t,n){var i,a,r;return function(){var o=Lg(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Lg(this,e))),o===l?null:o===i&&l===a?r:(a=l,r=t(i=o,s))}}function Mde(e,t){var n,i,a,r="style."+t,o="end."+r,s;return function(){var l=Cl(this,e),u=l.on,d=l.value[r]==null?s||(s=RW(t)):void 0;(u!==n||a!==d)&&(i=(n=u).copy()).on(o,a=d),l.on=i}}function zde(e,t,n){var i=(e+="")=="transform"?kW:CW;return t==null?this.styleTween(e,Fde(e,i)).on("end.style."+e,RW(e)):typeof t=="function"?this.styleTween(e,Lde(e,i,cP(this,"style."+e,t))).each(Mde(this._id,e)):this.styleTween(e,Nde(e,i,t),n).on("end.style."+e,null)}function qde(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function jde(e,t,n){var i,a;function r(){var o=t.apply(this,arguments);return o!==a&&(i=(a=o)&&qde(e,o,n)),i}return r._value=t,r}function Ude(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,jde(e,t,n??""))}function Bde(e){return function(){this.textContent=e}}function Vde(e){return function(){var t=e(this);this.textContent=t??""}}function Wde(e){return this.tween("text",typeof e=="function"?Vde(cP(this,"text",e)):Bde(e==null?"":e+""))}function Gde(e){return function(t){this.textContent=e.call(this,t)}}function Hde(e){var t,n;function i(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&Gde(a)),t}return i._value=e,i}function Yde(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Hde(e))}function Xde(){for(var e=this._name,t=this._id,n=IW(),i=this._groups,a=i.length,r=0;r<a;++r)for(var o=i[r],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var d=Ts(l,t);u2(l,e,n,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new zu(i,this._parents,e,n)}function Zde(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(r,o){var s={value:o},l={value:function(){--a===0&&r()}};n.each(function(){var u=Cl(this,i),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),a===0&&r()})}var Jde=0;function zu(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function IW(){return++Jde}var eu=M_.prototype;zu.prototype={constructor:zu,select:Cde,selectAll:Rde,selectChild:eu.selectChild,selectChildren:eu.selectChildren,filter:$de,merge:Ede,selection:Pde,transition:Xde,call:eu.call,nodes:eu.nodes,node:eu.node,size:eu.size,empty:eu.empty,each:eu.each,on:Ade,attr:lde,attrTween:hde,style:zde,styleTween:Ude,text:Wde,textTween:Yde,remove:Dde,tween:tde,delay:mde,duration:bde,ease:xde,easeVarying:kde,end:Zde,[Symbol.iterator]:eu[Symbol.iterator]};function Kde(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Qde={time:null,delay:0,duration:250,ease:Kde};function efe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function tfe(e){var t,n;e instanceof zu?(t=e._id,e=e._name):(t=IW(),(n=Qde).time=l2(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,r=0;r<a;++r)for(var o=i[r],s=o.length,l,u=0;u<s;++u)(l=o[u])&&u2(l,e,t,u,o,n||efe(l,t));return new zu(i,this._parents,e,t)}M_.prototype.interrupt=Kue;M_.prototype.transition=tfe;const ED=Math.PI,SD=2*ED,Ac=1e-6,nfe=SD-Ac;function PW(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ife(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return PW;const n=10**t;return function(i){this._+=i[0];for(let a=1,r=i.length;a<r;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}let hP=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?PW:ife(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,a){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(t,n,i,a,r,o){this._append`C${+t},${+n},${+i},${+a},${this._x1=+r},${this._y1=+o}`}arcTo(t,n,i,a,r){if(t=+t,n=+n,i=+i,a=+a,r=+r,r<0)throw new Error(`negative radius: ${r}`);let o=this._x1,s=this._y1,l=i-t,u=a-n,d=o-t,c=s-n,g=d*d+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Ac)if(!(Math.abs(c*l-u*d)>Ac)||!r)this._append`L${this._x1=t},${this._y1=n}`;else{let v=i-o,b=a-s,x=l*l+u*u,k=v*v+b*b,w=Math.sqrt(x),E=Math.sqrt(g),T=r*Math.tan((ED-Math.acos((x+g-k)/(2*w*E)))/2),O=T/E,D=T/w;Math.abs(O-1)>Ac&&this._append`L${t+O*d},${n+O*c}`,this._append`A${r},${r},0,0,${+(c*v>d*b)},${this._x1=t+D*l},${this._y1=n+D*u}`}}arc(t,n,i,a,r,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let s=i*Math.cos(a),l=i*Math.sin(a),u=t+s,d=n+l,c=1^o,g=o?a-r:r-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ac||Math.abs(this._y1-d)>Ac)&&this._append`L${u},${d}`,i&&(g<0&&(g=g%SD+SD),g>nfe?this._append`A${i},${i},0,1,${c},${t-s},${n-l}A${i},${i},0,1,${c},${this._x1=u},${this._y1=d}`:g>Ac&&this._append`A${i},${i},0,${+(g>=ED)},${c},${this._x1=t+i*Math.cos(r)},${this._y1=n+i*Math.sin(r)}`)}rect(t,n,i,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}};function d2(){return new hP}d2.prototype=hP.prototype;const $u=11102230246251565e-32,Qi=134217729,afe=(3+8*$u)*$u;function xT(e,t,n,i,a){let r,o,s,l,u=t[0],d=i[0],c=0,g=0;d>u==d>-u?(r=u,u=t[++c]):(r=d,d=i[++g]);let v=0;if(c<e&&g<n)for(d>u==d>-u?(o=u+r,s=r-(o-u),u=t[++c]):(o=d+r,s=r-(o-d),d=i[++g]),r=o,s!==0&&(a[v++]=s);c<e&&g<n;)d>u==d>-u?(o=r+u,l=o-r,s=r-(o-l)+(u-l),u=t[++c]):(o=r+d,l=o-r,s=r-(o-l)+(d-l),d=i[++g]),r=o,s!==0&&(a[v++]=s);for(;c<e;)o=r+u,l=o-r,s=r-(o-l)+(u-l),u=t[++c],r=o,s!==0&&(a[v++]=s);for(;g<n;)o=r+d,l=o-r,s=r-(o-l)+(d-l),d=i[++g],r=o,s!==0&&(a[v++]=s);return(r!==0||v===0)&&(a[v++]=r),v}function rfe(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function j_(e){return new Float64Array(e)}const ofe=(3+16*$u)*$u,sfe=(2+12*$u)*$u,lfe=(9+64*$u)*$u*$u,Sp=j_(4),bq=j_(8),_q=j_(12),xq=j_(16),Ta=j_(4);function ufe(e,t,n,i,a,r,o){let s,l,u,d,c,g,v,b,x,k,w,E,T,O,D,P,R,M;const q=e-a,H=n-a,z=t-r,Q=i-r;O=q*Q,g=Qi*q,v=g-(g-q),b=q-v,g=Qi*Q,x=g-(g-Q),k=Q-x,D=b*k-(O-v*x-b*x-v*k),P=z*H,g=Qi*z,v=g-(g-z),b=z-v,g=Qi*H,x=g-(g-H),k=H-x,R=b*k-(P-v*x-b*x-v*k),w=D-R,c=D-w,Sp[0]=D-(w+c)+(c-R),E=O+w,c=E-O,T=O-(E-c)+(w-c),w=T-P,c=T-w,Sp[1]=T-(w+c)+(c-P),M=E+w,c=M-E,Sp[2]=E-(M-c)+(w-c),Sp[3]=M;let te=rfe(4,Sp),W=sfe*o;if(te>=W||-te>=W||(c=e-q,s=e-(q+c)+(c-a),c=n-H,u=n-(H+c)+(c-a),c=t-z,l=t-(z+c)+(c-r),c=i-Q,d=i-(Q+c)+(c-r),s===0&&l===0&&u===0&&d===0)||(W=lfe*o+afe*Math.abs(te),te+=q*d+Q*s-(z*u+H*l),te>=W||-te>=W))return te;O=s*Q,g=Qi*s,v=g-(g-s),b=s-v,g=Qi*Q,x=g-(g-Q),k=Q-x,D=b*k-(O-v*x-b*x-v*k),P=l*H,g=Qi*l,v=g-(g-l),b=l-v,g=Qi*H,x=g-(g-H),k=H-x,R=b*k-(P-v*x-b*x-v*k),w=D-R,c=D-w,Ta[0]=D-(w+c)+(c-R),E=O+w,c=E-O,T=O-(E-c)+(w-c),w=T-P,c=T-w,Ta[1]=T-(w+c)+(c-P),M=E+w,c=M-E,Ta[2]=E-(M-c)+(w-c),Ta[3]=M;const j=xT(4,Sp,4,Ta,bq);O=q*d,g=Qi*q,v=g-(g-q),b=q-v,g=Qi*d,x=g-(g-d),k=d-x,D=b*k-(O-v*x-b*x-v*k),P=z*u,g=Qi*z,v=g-(g-z),b=z-v,g=Qi*u,x=g-(g-u),k=u-x,R=b*k-(P-v*x-b*x-v*k),w=D-R,c=D-w,Ta[0]=D-(w+c)+(c-R),E=O+w,c=E-O,T=O-(E-c)+(w-c),w=T-P,c=T-w,Ta[1]=T-(w+c)+(c-P),M=E+w,c=M-E,Ta[2]=E-(M-c)+(w-c),Ta[3]=M;const K=xT(j,bq,4,Ta,_q);O=s*d,g=Qi*s,v=g-(g-s),b=s-v,g=Qi*d,x=g-(g-d),k=d-x,D=b*k-(O-v*x-b*x-v*k),P=l*u,g=Qi*l,v=g-(g-l),b=l-v,g=Qi*u,x=g-(g-u),k=u-x,R=b*k-(P-v*x-b*x-v*k),w=D-R,c=D-w,Ta[0]=D-(w+c)+(c-R),E=O+w,c=E-O,T=O-(E-c)+(w-c),w=T-P,c=T-w,Ta[1]=T-(w+c)+(c-P),M=E+w,c=M-E,Ta[2]=E-(M-c)+(w-c),Ta[3]=M;const se=xT(K,_q,4,Ta,xq);return xq[se-1]}function Ex(e,t,n,i,a,r){const o=(t-r)*(n-a),s=(e-a)*(i-r),l=o-s,u=Math.abs(o+s);return Math.abs(l)>=ofe*u?l:-ufe(e,t,n,i,a,r,u)}const wq=Math.pow(2,-52),Sx=new Uint32Array(512);class ek{static from(t,n=pfe,i=gfe){const a=t.length,r=new Float64Array(a*2);for(let o=0;o<a;o++){const s=t[o];r[2*o]=n(s),r[2*o+1]=i(s)}return new ek(r)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:a,_hullHash:r}=this,o=t.length>>1;let s=1/0,l=1/0,u=-1/0,d=-1/0;for(let q=0;q<o;q++){const H=t[2*q],z=t[2*q+1];H<s&&(s=H),z<l&&(l=z),H>u&&(u=H),z>d&&(d=z),this._ids[q]=q}const c=(s+u)/2,g=(l+d)/2;let v,b,x;for(let q=0,H=1/0;q<o;q++){const z=wT(c,g,t[2*q],t[2*q+1]);z<H&&(v=q,H=z)}const k=t[2*v],w=t[2*v+1];for(let q=0,H=1/0;q<o;q++){if(q===v)continue;const z=wT(k,w,t[2*q],t[2*q+1]);z<H&&z>0&&(b=q,H=z)}let E=t[2*b],T=t[2*b+1],O=1/0;for(let q=0;q<o;q++){if(q===v||q===b)continue;const H=cfe(k,w,E,T,t[2*q],t[2*q+1]);H<O&&(x=q,O=H)}let D=t[2*x],P=t[2*x+1];if(O===1/0){for(let z=0;z<o;z++)this._dists[z]=t[2*z]-t[0]||t[2*z+1]-t[1];ag(this._ids,this._dists,0,o-1);const q=new Uint32Array(o);let H=0;for(let z=0,Q=-1/0;z<o;z++){const te=this._ids[z],W=this._dists[te];W>Q&&(q[H++]=te,Q=W)}this.hull=q.subarray(0,H),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Ex(k,w,E,T,D,P)<0){const q=b,H=E,z=T;b=x,E=D,T=P,x=q,D=H,P=z}const R=hfe(k,w,E,T,D,P);this._cx=R.x,this._cy=R.y;for(let q=0;q<o;q++)this._dists[q]=wT(t[2*q],t[2*q+1],R.x,R.y);ag(this._ids,this._dists,0,o-1),this._hullStart=v;let M=3;i[v]=n[x]=b,i[b]=n[v]=x,i[x]=n[b]=v,a[v]=0,a[b]=1,a[x]=2,r.fill(-1),r[this._hashKey(k,w)]=v,r[this._hashKey(E,T)]=b,r[this._hashKey(D,P)]=x,this.trianglesLen=0,this._addTriangle(v,b,x,-1,-1,-1);for(let q=0,H,z;q<this._ids.length;q++){const Q=this._ids[q],te=t[2*Q],W=t[2*Q+1];if(q>0&&Math.abs(te-H)<=wq&&Math.abs(W-z)<=wq||(H=te,z=W,Q===v||Q===b||Q===x))continue;let j=0;for(let Y=0,Z=this._hashKey(te,W);Y<this._hashSize&&(j=r[(Z+Y)%this._hashSize],!(j!==-1&&j!==i[j]));Y++);j=n[j];let K=j,se;for(;se=i[K],Ex(te,W,t[2*K],t[2*K+1],t[2*se],t[2*se+1])>=0;)if(K=se,K===j){K=-1;break}if(K===-1)continue;let ee=this._addTriangle(K,Q,i[K],-1,-1,a[K]);a[Q]=this._legalize(ee+2),a[K]=ee,M++;let oe=i[K];for(;se=i[oe],Ex(te,W,t[2*oe],t[2*oe+1],t[2*se],t[2*se+1])<0;)ee=this._addTriangle(oe,Q,se,a[Q],-1,a[oe]),a[Q]=this._legalize(ee+2),i[oe]=oe,M--,oe=se;if(K===j)for(;se=n[K],Ex(te,W,t[2*se],t[2*se+1],t[2*K],t[2*K+1])<0;)ee=this._addTriangle(se,Q,K,-1,a[K],a[se]),this._legalize(ee+2),a[se]=ee,i[K]=K,M--,K=se;this._hullStart=n[Q]=K,i[K]=n[oe]=Q,i[Q]=oe,r[this._hashKey(te,W)]=Q,r[this._hashKey(t[2*K],t[2*K+1])]=K}this.hull=new Uint32Array(M);for(let q=0,H=this._hullStart;q<M;q++)this.hull[q]=H,H=i[H];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(dfe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:a}=this;let r=0,o=0;for(;;){const s=i[t],l=t-t%3;if(o=l+(t+2)%3,s===-1){if(r===0)break;t=Sx[--r];continue}const u=s-s%3,d=l+(t+1)%3,c=u+(s+2)%3,g=n[o],v=n[t],b=n[d],x=n[c];if(ffe(a[2*g],a[2*g+1],a[2*v],a[2*v+1],a[2*b],a[2*b+1],a[2*x],a[2*x+1])){n[t]=x,n[s]=g;const w=i[c];if(w===-1){let T=this._hullStart;do{if(this._hullTri[T]===c){this._hullTri[T]=t;break}T=this._hullPrev[T]}while(T!==this._hullStart)}this._link(t,w),this._link(s,i[o]),this._link(o,c);const E=u+(s+1)%3;r<Sx.length&&(Sx[r++]=E)}else{if(r===0)break;t=Sx[--r]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,a,r,o){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=i,this._link(s,a),this._link(s+1,r),this._link(s+2,o),this.trianglesLen+=3,s}}function dfe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function wT(e,t,n,i){const a=e-n,r=t-i;return a*a+r*r}function ffe(e,t,n,i,a,r,o,s){const l=e-o,u=t-s,d=n-o,c=i-s,g=a-o,v=r-s,b=l*l+u*u,x=d*d+c*c,k=g*g+v*v;return l*(c*k-x*v)-u*(d*k-x*g)+b*(d*v-c*g)<0}function cfe(e,t,n,i,a,r){const o=n-e,s=i-t,l=a-e,u=r-t,d=o*o+s*s,c=l*l+u*u,g=.5/(o*u-s*l),v=(u*d-s*c)*g,b=(o*c-l*d)*g;return v*v+b*b}function hfe(e,t,n,i,a,r){const o=n-e,s=i-t,l=a-e,u=r-t,d=o*o+s*s,c=l*l+u*u,g=.5/(o*u-s*l),v=e+(u*d-s*c)*g,b=t+(o*c-l*d)*g;return{x:v,y:b}}function ag(e,t,n,i){if(i-n<=20)for(let a=n+1;a<=i;a++){const r=e[a],o=t[r];let s=a-1;for(;s>=n&&t[e[s]]>o;)e[s+1]=e[s--];e[s+1]=r}else{const a=n+i>>1;let r=n+1,o=i;Gy(e,a,r),t[e[n]]>t[e[i]]&&Gy(e,n,i),t[e[r]]>t[e[i]]&&Gy(e,r,i),t[e[n]]>t[e[r]]&&Gy(e,n,r);const s=e[r],l=t[s];for(;;){do r++;while(t[e[r]]<l);do o--;while(t[e[o]]>l);if(o<r)break;Gy(e,r,o)}e[n+1]=e[o],e[o]=s,i-r+1>=o-n?(ag(e,t,r,i),ag(e,t,n,o-1)):(ag(e,t,n,o-1),ag(e,t,r,i))}}function Gy(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function pfe(e){return e[0]}function gfe(e){return e[1]}const kq=1e-6;class Bc{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const a=t+i,r=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${a},${r}`:(Math.abs(this._x1-a)>kq||Math.abs(this._y1-r)>kq)&&(this._+="L"+a+","+r),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=a},${this._y1=r}`)}rect(t,n,i,a){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+a}h${-i}Z`}value(){return this._||null}}class TD{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let mfe=class{constructor(t,[n,i,a,r]=[0,0,960,500]){if(!((a=+a)>=(n=+n))||!((r=+r)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=a,this.xmin=n,this.ymax=r,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:a}=this;let r,o;const s=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let x=0,k=0,w=i.length,E,T;x<w;x+=3,k+=2){const O=i[x]*2,D=i[x+1]*2,P=i[x+2]*2,R=t[O],M=t[O+1],q=t[D],H=t[D+1],z=t[P],Q=t[P+1],te=q-R,W=H-M,j=z-R,K=Q-M,se=(te*K-W*j)*2;if(Math.abs(se)<1e-9){if(r===void 0){r=o=0;for(const oe of n)r+=t[oe*2],o+=t[oe*2+1];r/=n.length,o/=n.length}const ee=1e9*Math.sign((r-R)*K-(o-M)*j);E=(R+z)/2-ee*K,T=(M+Q)/2+ee*j}else{const ee=1/se,oe=te*te+W*W,Y=j*j+K*K;E=R+(K*oe-W*Y)*ee,T=M+(te*Y-j*oe)*ee}s[k]=E,s[k+1]=T}let l=n[n.length-1],u,d=l*4,c,g=t[2*l],v,b=t[2*l+1];a.fill(0);for(let x=0;x<n.length;++x)l=n[x],u=d,c=g,v=b,d=l*4,g=t[2*l],b=t[2*l+1],a[u+2]=a[d]=v-b,a[u+3]=a[d+1]=g-c}render(t){const n=t==null?t=new Bc:void 0,{delaunay:{halfedges:i,inedges:a,hull:r},circumcenters:o,vectors:s}=this;if(r.length<=1)return null;for(let d=0,c=i.length;d<c;++d){const g=i[d];if(g<d)continue;const v=Math.floor(d/3)*2,b=Math.floor(g/3)*2,x=o[v],k=o[v+1],w=o[b],E=o[b+1];this._renderSegment(x,k,w,E,t)}let l,u=r[r.length-1];for(let d=0;d<r.length;++d){l=u,u=r[d];const c=Math.floor(a[u]/3)*2,g=o[c],v=o[c+1],b=l*4,x=this._project(g,v,s[b+2],s[b+3]);x&&this._renderSegment(g,v,x[0],x[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Bc:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Bc:void 0,a=this._clip(t);if(a===null||!a.length)return;n.moveTo(a[0],a[1]);let r=a.length;for(;a[0]===a[r-2]&&a[1]===a[r-1]&&r>1;)r-=2;for(let o=2;o<r;o+=2)(a[o]!==a[o-2]||a[o+1]!==a[o-1])&&n.lineTo(a[o],a[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const a=this.cellPolygon(n);a&&(a.index=n,yield a)}}cellPolygon(t){const n=new TD;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,a,r){let o;const s=this._regioncode(t,n),l=this._regioncode(i,a);s===0&&l===0?(r.moveTo(t,n),r.lineTo(i,a)):(o=this._clipSegment(t,n,i,a,s,l))&&(r.moveTo(o[0],o[1]),r.lineTo(o[2],o[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const a=this._clip(i);if(a){e:for(let r=0,o=n.length;r<o;r+=2)for(let s=0,l=a.length;s<l;s+=2)if(n[r]===a[s]&&n[r+1]===a[s+1]&&n[(r+2)%o]===a[(s+l-2)%l]&&n[(r+3)%o]===a[(s+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:a,triangles:r}}=this,o=i[t];if(o===-1)return null;const s=[];let l=o;do{const u=Math.floor(l/3);if(s.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,r[l]!==t)break;l=a[l]}while(l!==o&&l!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,a=t*4;return this._simplify(i[a]||i[a+1]?this._clipInfinite(t,n,i[a],i[a+1],i[a+2],i[a+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let a=null,r,o,s=n[i-2],l=n[i-1],u,d=this._regioncode(s,l),c,g=0;for(let v=0;v<i;v+=2)if(r=s,o=l,s=n[v],l=n[v+1],u=d,d=this._regioncode(s,l),u===0&&d===0)c=g,g=0,a?a.push(s,l):a=[s,l];else{let b,x,k,w,E;if(u===0){if((b=this._clipSegment(r,o,s,l,u,d))===null)continue;[x,k,w,E]=b}else{if((b=this._clipSegment(s,l,r,o,d,u))===null)continue;[w,E,x,k]=b,c=g,g=this._edgecode(x,k),c&&g&&this._edge(t,c,g,a,a.length),a?a.push(x,k):a=[x,k]}c=g,g=this._edgecode(w,E),c&&g&&this._edge(t,c,g,a,a.length),a?a.push(w,E):a=[w,E]}if(a)c=g,g=this._edgecode(a[0],a[1]),c&&g&&this._edge(t,c,g,a,a.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return a}_clipSegment(t,n,i,a,r,o){const s=r<o;for(s&&([t,n,i,a,r,o]=[i,a,t,n,o,r]);;){if(r===0&&o===0)return s?[i,a,t,n]:[t,n,i,a];if(r&o)return null;let l,u,d=r||o;d&8?(l=t+(i-t)*(this.ymax-n)/(a-n),u=this.ymax):d&4?(l=t+(i-t)*(this.ymin-n)/(a-n),u=this.ymin):d&2?(u=n+(a-n)*(this.xmax-t)/(i-t),l=this.xmax):(u=n+(a-n)*(this.xmin-t)/(i-t),l=this.xmin),r?(t=l,n=u,r=this._regioncode(t,n)):(i=l,a=u,o=this._regioncode(i,a))}}_clipInfinite(t,n,i,a,r,o){let s=Array.from(n),l;if((l=this._project(s[0],s[1],i,a))&&s.unshift(l[0],l[1]),(l=this._project(s[s.length-2],s[s.length-1],r,o))&&s.push(l[0],l[1]),s=this._clipFinite(t,s))for(let u=0,d=s.length,c,g=this._edgecode(s[d-2],s[d-1]);u<d;u+=2)c=g,g=this._edgecode(s[u],s[u+1]),c&&g&&(u=this._edge(t,c,g,s,u),d=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,i,a,r){for(;n!==i;){let o,s;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,s=this.ymin;break}(a[r]!==o||a[r+1]!==s)&&this.contains(t,o,s)&&(a.splice(r,0,o,s),r+=2)}return r}_project(t,n,i,a){let r=1/0,o,s,l;if(a<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/a)<r&&(l=this.ymin,s=t+(r=o)*i)}else if(a>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/a)<r&&(l=this.ymax,s=t+(r=o)*i)}if(i>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/i)<r&&(s=this.xmax,l=n+(r=o)*a)}else if(i<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/i)<r&&(s=this.xmin,l=n+(r=o)*a)}return[s,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,a=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[a]||t[n+1]===t[i+1]&&t[i+1]===t[a+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const yfe=2*Math.PI,Tp=Math.pow;function vfe(e){return e[0]}function bfe(e){return e[1]}function _fe(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const a=2*t[i],r=2*t[i+1],o=2*t[i+2];if((n[o]-n[a])*(n[r+1]-n[a+1])-(n[r]-n[a])*(n[o+1]-n[a+1])>1e-10)return!1}return!0}function xfe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class pP{static from(t,n=vfe,i=bfe,a){return new pP("length"in t?wfe(t,n,i,a):Float64Array.from(kfe(t,n,i,a)))}constructor(t){this._delaunator=new ek(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&_fe(t)){this.collinear=Int32Array.from({length:n.length/2},(g,v)=>v).sort((g,v)=>n[2*g]-n[2*v]||n[2*g+1]-n[2*v+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],d=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],c=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let g=0,v=n.length/2;g<v;++g){const b=xfe(n[2*g],n[2*g+1],c);n[2*g]=b[0],n[2*g+1]=b[1]}this._delaunator=new ek(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,a=this.hull=this._delaunator.hull,r=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let l=0,u=i.length;l<u;++l){const d=r[l%3===2?l-2:l+1];(i[l]===-1||o[d]===-1)&&(o[d]=l)}for(let l=0,u=a.length;l<u;++l)s[a[l]]=l;a.length<=2&&a.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=a[0],o[a[0]]=1,a.length===2&&(o[a[1]]=0,this.triangles[1]=a[1],this.triangles[2]=a[1]))}voronoi(t){return new mfe(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:a,halfedges:r,triangles:o,collinear:s}=this;if(s){const c=s.indexOf(t);c>0&&(yield s[c-1]),c<s.length-1&&(yield s[c+1]);return}const l=n[t];if(l===-1)return;let u=l,d=-1;do{if(yield d=o[u],u=u%3===2?u-2:u+1,o[u]!==t)return;if(u=r[u],u===-1){const c=i[(a[t]+1)%i.length];c!==d&&(yield c);return}}while(u!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const a=i;let r;for(;(r=this._step(i,t,n))>=0&&r!==i&&r!==a;)i=r;return r}_step(t,n,i){const{inedges:a,hull:r,_hullIndex:o,halfedges:s,triangles:l,points:u}=this;if(a[t]===-1||!u.length)return(t+1)%(u.length>>1);let d=t,c=Tp(n-u[t*2],2)+Tp(i-u[t*2+1],2);const g=a[t];let v=g;do{let b=l[v];const x=Tp(n-u[b*2],2)+Tp(i-u[b*2+1],2);if(x<c&&(c=x,d=b),v=v%3===2?v-2:v+1,l[v]!==t)break;if(v=s[v],v===-1){if(v=r[(o[t]+1)%r.length],v!==b&&Tp(n-u[v*2],2)+Tp(i-u[v*2+1],2)<c)return v;break}}while(v!==g);return d}render(t){const n=t==null?t=new Bc:void 0,{points:i,halfedges:a,triangles:r}=this;for(let o=0,s=a.length;o<s;++o){const l=a[o];if(l<o)continue;const u=r[o]*2,d=r[l]*2;t.moveTo(i[u],i[u+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Bc:void 0,{points:a}=this;for(let r=0,o=a.length;r<o;r+=2){const s=a[r],l=a[r+1];t.moveTo(s+n,l),t.arc(s,l,n,0,yfe)}return i&&i.value()}renderHull(t){const n=t==null?t=new Bc:void 0,{hull:i,points:a}=this,r=i[0]*2,o=i.length;t.moveTo(a[r],a[r+1]);for(let s=1;s<o;++s){const l=2*i[s];t.lineTo(a[l],a[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new TD;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Bc:void 0,{points:a,triangles:r}=this,o=r[t*=3]*2,s=r[t+1]*2,l=r[t+2]*2;return n.moveTo(a[o],a[o+1]),n.lineTo(a[s],a[s+1]),n.lineTo(a[l],a[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new TD;return this.renderTriangle(t,n),n.value()}}function wfe(e,t,n,i){const a=e.length,r=new Float64Array(a*2);for(let o=0;o<a;++o){const s=e[o];r[o*2]=t.call(i,s,o,e),r[o*2+1]=n.call(i,s,o,e)}return r}function*kfe(e,t,n,i){let a=0;for(const r of e)yield t.call(i,r,a,e),yield n.call(i,r,a,e),++a}var $q={},kT={},$T=34,Hy=10,ET=13;function FW(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function $fe(e,t){var n=FW(e);return function(i,a){return t(n(i),a,e)}}function Eq(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var a in i)a in t||n.push(t[a]=a)}),n}function nr(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function Efe(e){return e<0?"-"+nr(-e,6):e>9999?"+"+nr(e,6):nr(e,4)}function Sfe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Efe(e.getUTCFullYear())+"-"+nr(e.getUTCMonth()+1,2)+"-"+nr(e.getUTCDate(),2)+(a?"T"+nr(t,2)+":"+nr(n,2)+":"+nr(i,2)+"."+nr(a,3)+"Z":i?"T"+nr(t,2)+":"+nr(n,2)+":"+nr(i,2)+"Z":n||t?"T"+nr(t,2)+":"+nr(n,2)+"Z":"")}function NW(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(c,g){var v,b,x=a(c,function(k,w){if(v)return v(k,w-1);b=k,v=g?$fe(k,g):FW(k)});return x.columns=b||[],x}function a(c,g){var v=[],b=c.length,x=0,k=0,w,E=b<=0,T=!1;c.charCodeAt(b-1)===Hy&&--b,c.charCodeAt(b-1)===ET&&--b;function O(){if(E)return kT;if(T)return T=!1,$q;var P,R=x,M;if(c.charCodeAt(R)===$T){for(;x++<b&&c.charCodeAt(x)!==$T||c.charCodeAt(++x)===$T;);return(P=x)>=b?E=!0:(M=c.charCodeAt(x++))===Hy?T=!0:M===ET&&(T=!0,c.charCodeAt(x)===Hy&&++x),c.slice(R+1,P-1).replace(/""/g,'"')}for(;x<b;){if((M=c.charCodeAt(P=x++))===Hy)T=!0;else if(M===ET)T=!0,c.charCodeAt(x)===Hy&&++x;else if(M!==n)continue;return c.slice(R,P)}return E=!0,c.slice(R,b)}for(;(w=O())!==kT;){for(var D=[];w!==$q&&w!==kT;)D.push(w),w=O();g&&(D=g(D,k++))==null||v.push(D)}return v}function r(c,g){return c.map(function(v){return g.map(function(b){return d(v[b])}).join(e)})}function o(c,g){return g==null&&(g=Eq(c)),[g.map(d).join(e)].concat(r(c,g)).join(`
`)}function s(c,g){return g==null&&(g=Eq(c)),r(c,g).join(`
`)}function l(c){return c.map(u).join(`
`)}function u(c){return c.map(d).join(e)}function d(c){return c==null?"":c instanceof Date?Sfe(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:i,parseRows:a,format:o,formatBody:s,formatRows:l,formatRow:u,formatValue:d}}var Tfe=NW(","),Afe=Tfe.parse;function Ofe(e){for(var t in e){var n=e[t].trim(),i,a;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(a=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Dfe&&a[4]&&!a[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const Dfe=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Cfe(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Rfe(e,t){return fetch(e,t).then(Cfe)}function Ife(e){return function(t,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),Rfe(t,n).then(function(a){return e(a,i)})}}var Pfe=Ife(Afe);function Ffe(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function Nfe(e,t){return fetch(e,t).then(Ffe)}function Lfe(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function a(){var r,o=n.length,s,l=0,u=0;for(r=0;r<o;++r)s=n[r],l+=s.x,u+=s.y;for(l=(l/o-e)*i,u=(u/o-t)*i,r=0;r<o;++r)s=n[r],s.x-=l,s.y-=u}return a.initialize=function(r){n=r},a.x=function(r){return arguments.length?(e=+r,a):e},a.y=function(r){return arguments.length?(t=+r,a):t},a.strength=function(r){return arguments.length?(i=+r,a):i},a}function Mfe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return LW(this.cover(t,n),t,n,e)}function LW(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var a,r=e._root,o={data:i},s=e._x0,l=e._y0,u=e._x1,d=e._y1,c,g,v,b,x,k,w,E;if(!r)return e._root=o,e;for(;r.length;)if((x=t>=(c=(s+u)/2))?s=c:u=c,(k=n>=(g=(l+d)/2))?l=g:d=g,a=r,!(r=r[w=k<<1|x]))return a[w]=o,e;if(v=+e._x.call(null,r.data),b=+e._y.call(null,r.data),t===v&&n===b)return o.next=r,a?a[w]=o:e._root=o,e;do a=a?a[w]=new Array(4):e._root=new Array(4),(x=t>=(c=(s+u)/2))?s=c:u=c,(k=n>=(g=(l+d)/2))?l=g:d=g;while((w=k<<1|x)===(E=(b>=g)<<1|v>=c));return a[E]=r,a[w]=o,e}function zfe(e){var t,n,i=e.length,a,r,o=new Array(i),s=new Array(i),l=1/0,u=1/0,d=-1/0,c=-1/0;for(n=0;n<i;++n)isNaN(a=+this._x.call(null,t=e[n]))||isNaN(r=+this._y.call(null,t))||(o[n]=a,s[n]=r,a<l&&(l=a),a>d&&(d=a),r<u&&(u=r),r>c&&(c=r));if(l>d||u>c)return this;for(this.cover(l,u).cover(d,c),n=0;n<i;++n)LW(this,o[n],s[n],e[n]);return this}function qfe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,a=this._x1,r=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,r=(i=Math.floor(t))+1;else{for(var o=a-n||1,s=this._root,l,u;n>e||e>=a||i>t||t>=r;)switch(u=(t<i)<<1|e<n,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:a=n+o,r=i+o;break;case 1:n=a-o,r=i+o;break;case 2:a=n+o,i=r-o;break;case 3:n=a-o,i=r-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=i,this._x1=a,this._y1=r,this}function jfe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Ufe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ma(e,t,n,i,a){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=a}function Bfe(e,t,n){var i,a=this._x0,r=this._y0,o,s,l,u,d=this._x1,c=this._y1,g=[],v=this._root,b,x;for(v&&g.push(new Ma(v,a,r,d,c)),n==null?n=1/0:(a=e-n,r=t-n,d=e+n,c=t+n,n*=n);b=g.pop();)if(!(!(v=b.node)||(o=b.x0)>d||(s=b.y0)>c||(l=b.x1)<a||(u=b.y1)<r))if(v.length){var k=(o+l)/2,w=(s+u)/2;g.push(new Ma(v[3],k,w,l,u),new Ma(v[2],o,w,k,u),new Ma(v[1],k,s,l,w),new Ma(v[0],o,s,k,w)),(x=(t>=w)<<1|e>=k)&&(b=g[g.length-1],g[g.length-1]=g[g.length-1-x],g[g.length-1-x]=b)}else{var E=e-+this._x.call(null,v.data),T=t-+this._y.call(null,v.data),O=E*E+T*T;if(O<n){var D=Math.sqrt(n=O);a=e-D,r=t-D,d=e+D,c=t+D,i=v.data}}return i}function Vfe(e){if(isNaN(d=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var t,n=this._root,i,a,r,o=this._x0,s=this._y0,l=this._x1,u=this._y1,d,c,g,v,b,x,k,w;if(!n)return this;if(n.length)for(;;){if((b=d>=(g=(o+l)/2))?o=g:l=g,(x=c>=(v=(s+u)/2))?s=v:u=v,t=n,!(n=n[k=x<<1|b]))return this;if(!n.length)break;(t[k+1&3]||t[k+2&3]||t[k+3&3])&&(i=t,w=k)}for(;n.data!==e;)if(a=n,!(n=n.next))return this;return(r=n.next)&&delete n.next,a?(r?a.next=r:delete a.next,this):t?(r?t[k]=r:delete t[k],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[w]=n:this._root=n),this):(this._root=r,this)}function Wfe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Gfe(){return this._root}function Hfe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Yfe(e){var t=[],n,i=this._root,a,r,o,s,l;for(i&&t.push(new Ma(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,r=n.x0,o=n.y0,s=n.x1,l=n.y1)&&i.length){var u=(r+s)/2,d=(o+l)/2;(a=i[3])&&t.push(new Ma(a,u,d,s,l)),(a=i[2])&&t.push(new Ma(a,r,d,u,l)),(a=i[1])&&t.push(new Ma(a,u,o,s,d)),(a=i[0])&&t.push(new Ma(a,r,o,u,d))}return this}function Xfe(e){var t=[],n=[],i;for(this._root&&t.push(new Ma(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var a=i.node;if(a.length){var r,o=i.x0,s=i.y0,l=i.x1,u=i.y1,d=(o+l)/2,c=(s+u)/2;(r=a[0])&&t.push(new Ma(r,o,s,d,c)),(r=a[1])&&t.push(new Ma(r,d,s,l,c)),(r=a[2])&&t.push(new Ma(r,o,c,d,u)),(r=a[3])&&t.push(new Ma(r,d,c,l,u))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Zfe(e){return e[0]}function Jfe(e){return arguments.length?(this._x=e,this):this._x}function Kfe(e){return e[1]}function Qfe(e){return arguments.length?(this._y=e,this):this._y}function gP(e,t,n){var i=new mP(t??Zfe,n??Kfe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function mP(e,t,n,i,a,r){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=a,this._y1=r,this._root=void 0}function Sq(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Xa=gP.prototype=mP.prototype;Xa.copy=function(){var e=new mP(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=Sq(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var a=0;a<4;++a)(i=t.source[a])&&(i.length?n.push({source:i,target:t.target[a]=new Array(4)}):t.target[a]=Sq(i));return e};Xa.add=Mfe;Xa.addAll=zfe;Xa.cover=qfe;Xa.data=jfe;Xa.extent=Ufe;Xa.find=Bfe;Xa.remove=Vfe;Xa.removeAll=Wfe;Xa.root=Gfe;Xa.size=Hfe;Xa.visit=Yfe;Xa.visitAfter=Xfe;Xa.x=Jfe;Xa.y=Qfe;function za(e){return function(){return e}}function qd(e){return(e()-.5)*1e-6}function ece(e){return e.x+e.vx}function tce(e){return e.y+e.vy}function nce(e){var t,n,i,a=1,r=1;typeof e!="function"&&(e=za(e==null?1:+e));function o(){for(var u,d=t.length,c,g,v,b,x,k,w=0;w<r;++w)for(c=gP(t,ece,tce).visitAfter(s),u=0;u<d;++u)g=t[u],x=n[g.index],k=x*x,v=g.x+g.vx,b=g.y+g.vy,c.visit(E);function E(T,O,D,P,R){var M=T.data,q=T.r,H=x+q;if(M){if(M.index>g.index){var z=v-M.x-M.vx,Q=b-M.y-M.vy,te=z*z+Q*Q;te<H*H&&(z===0&&(z=qd(i),te+=z*z),Q===0&&(Q=qd(i),te+=Q*Q),te=(H-(te=Math.sqrt(te)))/te*a,g.vx+=(z*=te)*(H=(q*=q)/(k+q)),g.vy+=(Q*=te)*H,M.vx-=z*(H=1-H),M.vy-=Q*H)}return}return O>v+H||P<v-H||D>b+H||R<b-H}}function s(u){if(u.data)return u.r=n[u.data.index];for(var d=u.r=0;d<4;++d)u[d]&&u[d].r>u.r&&(u.r=u[d].r)}function l(){if(t){var u,d=t.length,c;for(n=new Array(d),u=0;u<d;++u)c=t[u],n[c.index]=+e(c,u,t)}}return o.initialize=function(u,d){t=u,i=d,l()},o.iterations=function(u){return arguments.length?(r=+u,o):r},o.strength=function(u){return arguments.length?(a=+u,o):a},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:za(+u),l(),o):e},o}function ice(e){return e.index}function Tq(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function ace(e){var t=ice,n=c,i,a=za(30),r,o,s,l,u,d=1;e==null&&(e=[]);function c(k){return 1/Math.min(s[k.source.index],s[k.target.index])}function g(k){for(var w=0,E=e.length;w<d;++w)for(var T=0,O,D,P,R,M,q,H;T<E;++T)O=e[T],D=O.source,P=O.target,R=P.x+P.vx-D.x-D.vx||qd(u),M=P.y+P.vy-D.y-D.vy||qd(u),q=Math.sqrt(R*R+M*M),q=(q-r[T])/q*k*i[T],R*=q,M*=q,P.vx-=R*(H=l[T]),P.vy-=M*H,D.vx+=R*(H=1-H),D.vy+=M*H}function v(){if(o){var k,w=o.length,E=e.length,T=new Map(o.map((D,P)=>[t(D,P,o),D])),O;for(k=0,s=new Array(w);k<E;++k)O=e[k],O.index=k,typeof O.source!="object"&&(O.source=Tq(T,O.source)),typeof O.target!="object"&&(O.target=Tq(T,O.target)),s[O.source.index]=(s[O.source.index]||0)+1,s[O.target.index]=(s[O.target.index]||0)+1;for(k=0,l=new Array(E);k<E;++k)O=e[k],l[k]=s[O.source.index]/(s[O.source.index]+s[O.target.index]);i=new Array(E),b(),r=new Array(E),x()}}function b(){if(o)for(var k=0,w=e.length;k<w;++k)i[k]=+n(e[k],k,e)}function x(){if(o)for(var k=0,w=e.length;k<w;++k)r[k]=+a(e[k],k,e)}return g.initialize=function(k,w){o=k,u=w,v()},g.links=function(k){return arguments.length?(e=k,v(),g):e},g.id=function(k){return arguments.length?(t=k,g):t},g.iterations=function(k){return arguments.length?(d=+k,g):d},g.strength=function(k){return arguments.length?(n=typeof k=="function"?k:za(+k),b(),g):n},g.distance=function(k){return arguments.length?(a=typeof k=="function"?k:za(+k),x(),g):a},g}const rce=1664525,oce=1013904223,Aq=4294967296;function sce(){let e=1;return()=>(e=(rce*e+oce)%Aq)/Aq}function lce(e){return e.x}function uce(e){return e.y}var dce=10,fce=Math.PI*(3-Math.sqrt(5));function cce(e){var t,n=1,i=.001,a=1-Math.pow(i,1/300),r=0,o=.6,s=new Map,l=dP(c),u=eP("tick","end"),d=sce();e==null&&(e=[]);function c(){g(),u.call("tick",t),n<i&&(l.stop(),u.call("end",t))}function g(x){var k,w=e.length,E;x===void 0&&(x=1);for(var T=0;T<x;++T)for(n+=(r-n)*a,s.forEach(function(O){O(n)}),k=0;k<w;++k)E=e[k],E.fx==null?E.x+=E.vx*=o:(E.x=E.fx,E.vx=0),E.fy==null?E.y+=E.vy*=o:(E.y=E.fy,E.vy=0);return t}function v(){for(var x=0,k=e.length,w;x<k;++x){if(w=e[x],w.index=x,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var E=dce*Math.sqrt(.5+x),T=x*fce;w.x=E*Math.cos(T),w.y=E*Math.sin(T)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function b(x){return x.initialize&&x.initialize(e,d),x}return v(),t={tick:g,restart:function(){return l.restart(c),t},stop:function(){return l.stop(),t},nodes:function(x){return arguments.length?(e=x,v(),s.forEach(b),t):e},alpha:function(x){return arguments.length?(n=+x,t):n},alphaMin:function(x){return arguments.length?(i=+x,t):i},alphaDecay:function(x){return arguments.length?(a=+x,t):+a},alphaTarget:function(x){return arguments.length?(r=+x,t):r},velocityDecay:function(x){return arguments.length?(o=1-x,t):1-o},randomSource:function(x){return arguments.length?(d=x,s.forEach(b),t):d},force:function(x,k){return arguments.length>1?(k==null?s.delete(x):s.set(x,b(k)),t):s.get(x)},find:function(x,k,w){var E=0,T=e.length,O,D,P,R,M;for(w==null?w=1/0:w*=w,E=0;E<T;++E)R=e[E],O=x-R.x,D=k-R.y,P=O*O+D*D,P<w&&(M=R,w=P);return M},on:function(x,k){return arguments.length>1?(u.on(x,k),t):u.on(x)}}}function hce(){var e,t,n,i,a=za(-30),r,o=1,s=1/0,l=.81;function u(v){var b,x=e.length,k=gP(e,lce,uce).visitAfter(c);for(i=v,b=0;b<x;++b)t=e[b],k.visit(g)}function d(){if(e){var v,b=e.length,x;for(r=new Array(b),v=0;v<b;++v)x=e[v],r[x.index]=+a(x,v,e)}}function c(v){var b=0,x,k,w=0,E,T,O;if(v.length){for(E=T=O=0;O<4;++O)(x=v[O])&&(k=Math.abs(x.value))&&(b+=x.value,w+=k,E+=k*x.x,T+=k*x.y);v.x=E/w,v.y=T/w}else{x=v,x.x=x.data.x,x.y=x.data.y;do b+=r[x.data.index];while(x=x.next)}v.value=b}function g(v,b,x,k){if(!v.value)return!0;var w=v.x-t.x,E=v.y-t.y,T=k-b,O=w*w+E*E;if(T*T/l<O)return O<s&&(w===0&&(w=qd(n),O+=w*w),E===0&&(E=qd(n),O+=E*E),O<o&&(O=Math.sqrt(o*O)),t.vx+=w*v.value*i/O,t.vy+=E*v.value*i/O),!0;if(v.length||O>=s)return;(v.data!==t||v.next)&&(w===0&&(w=qd(n),O+=w*w),E===0&&(E=qd(n),O+=E*E),O<o&&(O=Math.sqrt(o*O)));do v.data!==t&&(T=r[v.data.index]*i/O,t.vx+=w*T,t.vy+=E*T);while(v=v.next)}return u.initialize=function(v,b){e=v,n=b,d()},u.strength=function(v){return arguments.length?(a=typeof v=="function"?v:za(+v),d(),u):a},u.distanceMin=function(v){return arguments.length?(o=v*v,u):Math.sqrt(o)},u.distanceMax=function(v){return arguments.length?(s=v*v,u):Math.sqrt(s)},u.theta=function(v){return arguments.length?(l=v*v,u):Math.sqrt(l)},u}function pce(e){var t=za(.1),n,i,a;typeof e!="function"&&(e=za(e==null?0:+e));function r(s){for(var l=0,u=n.length,d;l<u;++l)d=n[l],d.vx+=(a[l]-d.x)*i[l]*s}function o(){if(n){var s,l=n.length;for(i=new Array(l),a=new Array(l),s=0;s<l;++s)i[s]=isNaN(a[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return r.initialize=function(s){n=s,o()},r.strength=function(s){return arguments.length?(t=typeof s=="function"?s:za(+s),o(),r):t},r.x=function(s){return arguments.length?(e=typeof s=="function"?s:za(+s),o(),r):e},r}function gce(e){var t=za(.1),n,i,a;typeof e!="function"&&(e=za(e==null?0:+e));function r(s){for(var l=0,u=n.length,d;l<u;++l)d=n[l],d.vy+=(a[l]-d.y)*i[l]*s}function o(){if(n){var s,l=n.length;for(i=new Array(l),a=new Array(l),s=0;s<l;++s)i[s]=isNaN(a[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return r.initialize=function(s){n=s,o()},r.strength=function(s){return arguments.length?(t=typeof s=="function"?s:za(+s),o(),r):t},r.y=function(s){return arguments.length?(e=typeof s=="function"?s:za(+s),o(),r):e},r}function mce(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tk(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function qg(e){return e=tk(Math.abs(e)),e?e[1]:NaN}function yce(e,t){return function(n,i){for(var a=n.length,r=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),r.push(n.substring(a-=s,a+s)),!((l+=s+1)>i));)s=e[o=(o+1)%e.length];return r.reverse().join(t)}}function vce(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var bce=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dh(e){if(!(t=bce.exec(e)))throw new Error("invalid format: "+e);var t;return new yP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}dh.prototype=yP.prototype;function yP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}yP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _ce(e){e:for(var t=e.length,n=1,i=-1,a;n<t;++n)switch(e[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(a+1):e}var MW;function xce(e,t){var n=tk(e,t);if(!n)return e+"";var i=n[0],a=n[1],r=a-(MW=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=i.length;return r===o?i:r>o?i+new Array(r-o+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+tk(e,Math.max(0,t+r-1))[0]}function Oq(e,t){var n=tk(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const Dq={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mce,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Oq(e*100,t),r:Oq,s:xce,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Cq(e){return e}var Rq=Array.prototype.map,Iq=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zW(e){var t=e.grouping===void 0||e.thousands===void 0?Cq:yce(Rq.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?Cq:vce(Rq.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(c){c=dh(c);var g=c.fill,v=c.align,b=c.sign,x=c.symbol,k=c.zero,w=c.width,E=c.comma,T=c.precision,O=c.trim,D=c.type;D==="n"?(E=!0,D="g"):Dq[D]||(T===void 0&&(T=12),O=!0,D="g"),(k||g==="0"&&v==="=")&&(k=!0,g="0",v="=");var P=x==="$"?n:x==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",R=x==="$"?i:/[%p]/.test(D)?o:"",M=Dq[D],q=/[defgprs%]/.test(D);T=T===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function H(z){var Q=P,te=R,W,j,K;if(D==="c")te=M(z)+te,z="";else{z=+z;var se=z<0||1/z<0;if(z=isNaN(z)?l:M(Math.abs(z),T),O&&(z=_ce(z)),se&&+z==0&&b!=="+"&&(se=!1),Q=(se?b==="("?b:s:b==="-"||b==="("?"":b)+Q,te=(D==="s"?Iq[8+MW/3]:"")+te+(se&&b==="("?")":""),q){for(W=-1,j=z.length;++W<j;)if(K=z.charCodeAt(W),48>K||K>57){te=(K===46?a+z.slice(W+1):z.slice(W))+te,z=z.slice(0,W);break}}}E&&!k&&(z=t(z,1/0));var ee=Q.length+z.length+te.length,oe=ee<w?new Array(w-ee+1).join(g):"";switch(E&&k&&(z=t(oe+z,oe.length?w-te.length:1/0),oe=""),v){case"<":z=Q+z+te+oe;break;case"=":z=Q+oe+z+te;break;case"^":z=oe.slice(0,ee=oe.length>>1)+Q+z+te+oe.slice(ee);break;default:z=oe+Q+z+te;break}return r(z)}return H.toString=function(){return c+""},H}function d(c,g){var v=u((c=dh(c),c.type="f",c)),b=Math.max(-8,Math.min(8,Math.floor(qg(g)/3)))*3,x=Math.pow(10,-b),k=Iq[8+b/3];return function(w){return v(x*w)+k}}return{format:u,formatPrefix:d}}var Tx,f2,vP;wce({thousands:",",grouping:[3],currency:["$",""]});function wce(e){return Tx=zW(e),f2=Tx.format,vP=Tx.formatPrefix,Tx}function qW(e){return Math.max(0,-qg(Math.abs(e)))}function jW(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qg(t)/3)))*3-qg(Math.abs(e)))}function UW(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,qg(t)-qg(e))+1}function kce(e,t){return e.parent===t.parent?1:2}function $ce(e){return e.reduce(Ece,0)/e.length}function Ece(e,t){return e+t.x}function Sce(e){return 1+e.reduce(Tce,0)}function Tce(e,t){return Math.max(e,t.y)}function Ace(e){for(var t;t=e.children;)e=t[0];return e}function Oce(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Dce(){var e=kce,t=1,n=1,i=!1;function a(r){var o,s=0;r.eachAfter(function(g){var v=g.children;v?(g.x=$ce(v),g.y=Sce(v)):(g.x=o?s+=e(g,o):0,g.y=0,o=g)});var l=Ace(r),u=Oce(r),d=l.x-e(l,u)/2,c=u.x+e(u,l)/2;return r.eachAfter(i?function(g){g.x=(g.x-r.x)*t,g.y=(r.y-g.y)*n}:function(g){g.x=(g.x-d)/(c-d)*t,g.y=(1-(r.y?g.y/r.y:1))*n})}return a.separation=function(r){return arguments.length?(e=r,a):e},a.size=function(r){return arguments.length?(i=!1,t=+r[0],n=+r[1],a):i?null:[t,n]},a.nodeSize=function(r){return arguments.length?(i=!0,t=+r[0],n=+r[1],a):i?[t,n]:null},a}function Cce(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Rce(){return this.eachAfter(Cce)}function Ice(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Pce(e,t){for(var n=this,i=[n],a,r,o=-1;n=i.pop();)if(e.call(t,n,++o,this),a=n.children)for(r=a.length-1;r>=0;--r)i.push(a[r]);return this}function Fce(e,t){for(var n=this,i=[n],a=[],r,o,s,l=-1;n=i.pop();)if(a.push(n),r=n.children)for(o=0,s=r.length;o<s;++o)i.push(r[o]);for(;n=a.pop();)e.call(t,n,++l,this);return this}function Nce(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Lce(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,a=i&&i.length;--a>=0;)n+=i[a].value;t.value=n})}function Mce(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function zce(e){for(var t=this,n=qce(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var a=i.length;e!==n;)i.splice(a,0,e),e=e.parent;return i}function qce(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),a=null;for(e=n.pop(),t=i.pop();e===t;)a=e,e=n.pop(),t=i.pop();return a}function jce(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Uce(){return Array.from(this)}function Bce(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Vce(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Wce(){var e=this,t,n=[e],i,a,r;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(a=0,r=i.length;a<r;++a)n.push(i[a]);while(n.length)}function bP(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Yce)):t===void 0&&(t=Hce);for(var n=new jg(e),i,a=[n],r,o,s,l;i=a.pop();)if((o=t(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,s=l-1;s>=0;--s)a.push(r=o[s]=new jg(o[s])),r.parent=i,r.depth=i.depth+1;return n.eachBefore(BW)}function Gce(){return bP(this).eachBefore(Xce)}function Hce(e){return e.children}function Yce(e){return Array.isArray(e)?e[1]:null}function Xce(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function BW(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function jg(e){this.data=e,this.depth=this.height=0,this.parent=null}jg.prototype=bP.prototype={constructor:jg,count:Rce,each:Ice,eachAfter:Fce,eachBefore:Pce,find:Nce,sum:Lce,sort:Mce,path:zce,ancestors:jce,descendants:Uce,leaves:Bce,links:Vce,copy:Gce,[Symbol.iterator]:Wce};function z1(e){return e==null?null:VW(e)}function VW(e){if(typeof e!="function")throw new Error;return e}function Cc(){return 0}function jp(e){return function(){return e}}const Zce=1664525,Jce=1013904223,Pq=4294967296;function Kce(){let e=1;return()=>(e=(Zce*e+Jce)%Pq)/Pq}function Qce(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ehe(e,t){let n=e.length,i,a;for(;n;)a=t()*n--|0,i=e[n],e[n]=e[a],e[a]=i;return e}function the(e,t){for(var n=0,i=(e=ehe(Array.from(e),t)).length,a=[],r,o;n<i;)r=e[n],o&&WW(o,r)?++n:(o=ihe(a=nhe(a,r)),n=0);return o}function nhe(e,t){var n,i;if(ST(t,e))return[t];for(n=0;n<e.length;++n)if(Ax(t,e[n])&&ST(kv(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Ax(kv(e[n],e[i]),t)&&Ax(kv(e[n],t),e[i])&&Ax(kv(e[i],t),e[n])&&ST(GW(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function Ax(e,t){var n=e.r-t.r,i=t.x-e.x,a=t.y-e.y;return n<0||n*n<i*i+a*a}function WW(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,a=t.y-e.y;return n>0&&n*n>i*i+a*a}function ST(e,t){for(var n=0;n<t.length;++n)if(!WW(e,t[n]))return!1;return!0}function ihe(e){switch(e.length){case 1:return ahe(e[0]);case 2:return kv(e[0],e[1]);case 3:return GW(e[0],e[1],e[2])}}function ahe(e){return{x:e.x,y:e.y,r:e.r}}function kv(e,t){var n=e.x,i=e.y,a=e.r,r=t.x,o=t.y,s=t.r,l=r-n,u=o-i,d=s-a,c=Math.sqrt(l*l+u*u);return{x:(n+r+l/c*d)/2,y:(i+o+u/c*d)/2,r:(c+a+s)/2}}function GW(e,t,n){var i=e.x,a=e.y,r=e.r,o=t.x,s=t.y,l=t.r,u=n.x,d=n.y,c=n.r,g=i-o,v=i-u,b=a-s,x=a-d,k=l-r,w=c-r,E=i*i+a*a-r*r,T=E-o*o-s*s+l*l,O=E-u*u-d*d+c*c,D=v*b-g*x,P=(b*O-x*T)/(D*2)-i,R=(x*k-b*w)/D,M=(v*T-g*O)/(D*2)-a,q=(g*w-v*k)/D,H=R*R+q*q-1,z=2*(r+P*R+M*q),Q=P*P+M*M-r*r,te=-(Math.abs(H)>1e-6?(z+Math.sqrt(z*z-4*H*Q))/(2*H):Q/z);return{x:i+P+R*te,y:a+M+q*te,r:te}}function Fq(e,t,n){var i=e.x-t.x,a,r,o=e.y-t.y,s,l,u=i*i+o*o;u?(r=t.r+n.r,r*=r,l=e.r+n.r,l*=l,r>l?(a=(u+l-r)/(2*u),s=Math.sqrt(Math.max(0,l/u-a*a)),n.x=e.x-a*i-s*o,n.y=e.y-a*o+s*i):(a=(u+r-l)/(2*u),s=Math.sqrt(Math.max(0,r/u-a*a)),n.x=t.x+a*i-s*o,n.y=t.y+a*o+s*i)):(n.x=t.x+n.r,n.y=t.y)}function Nq(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,a=t.y-e.y;return n>0&&n*n>i*i+a*a}function Lq(e){var t=e._,n=e.next._,i=t.r+n.r,a=(t.x*n.r+n.x*t.r)/i,r=(t.y*n.r+n.y*t.r)/i;return a*a+r*r}function Ox(e){this._=e,this.next=null,this.previous=null}function rhe(e,t){if(!(r=(e=Qce(e)).length))return 0;var n,i,a,r,o,s,l,u,d,c,g;if(n=e[0],n.x=0,n.y=0,!(r>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(r>2))return n.r+i.r;Fq(i,n,a=e[2]),n=new Ox(n),i=new Ox(i),a=new Ox(a),n.next=a.previous=i,i.next=n.previous=a,a.next=i.previous=n;e:for(l=3;l<r;++l){Fq(n._,i._,a=e[l]),a=new Ox(a),u=i.next,d=n.previous,c=i._.r,g=n._.r;do if(c<=g){if(Nq(u._,a._)){i=u,n.next=i,i.previous=n,--l;continue e}c+=u._.r,u=u.next}else{if(Nq(d._,a._)){n=d,n.next=i,i.previous=n,--l;continue e}g+=d._.r,d=d.previous}while(u!==d.next);for(a.previous=n,a.next=i,n.next=i.previous=i=a,o=Lq(n);(a=a.next)!==i;)(s=Lq(a))<o&&(n=a,o=s);i=n.next}for(n=[i._],a=i;(a=a.next)!==i;)n.push(a._);for(a=the(n,t),l=0;l<r;++l)n=e[l],n.x-=a.x,n.y-=a.y;return a.r}function ohe(e){return Math.sqrt(e.value)}function she(){var e=null,t=1,n=1,i=Cc;function a(r){const o=Kce();return r.x=t/2,r.y=n/2,e?r.eachBefore(Mq(e)).eachAfter(TT(i,.5,o)).eachBefore(zq(1)):r.eachBefore(Mq(ohe)).eachAfter(TT(Cc,1,o)).eachAfter(TT(i,r.r/Math.min(t,n),o)).eachBefore(zq(Math.min(t,n)/(2*r.r))),r}return a.radius=function(r){return arguments.length?(e=z1(r),a):e},a.size=function(r){return arguments.length?(t=+r[0],n=+r[1],a):[t,n]},a.padding=function(r){return arguments.length?(i=typeof r=="function"?r:jp(+r),a):i},a}function Mq(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function TT(e,t,n){return function(i){if(a=i.children){var a,r,o=a.length,s=e(i)*t||0,l;if(s)for(r=0;r<o;++r)a[r].r+=s;if(l=rhe(a,n),s)for(r=0;r<o;++r)a[r].r-=s;i.r=l+s}}}function zq(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function HW(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function U_(e,t,n,i,a){for(var r=e.children,o,s=-1,l=r.length,u=e.value&&(i-t)/e.value;++s<l;)o=r[s],o.y0=n,o.y1=a,o.x0=t,o.x1=t+=o.value*u}function lhe(){var e=1,t=1,n=0,i=!1;function a(o){var s=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/s,o.eachBefore(r(t,s)),i&&o.eachBefore(HW),o}function r(o,s){return function(l){l.children&&U_(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var u=l.x0,d=l.y0,c=l.x1-n,g=l.y1-n;c<u&&(u=c=(u+c)/2),g<d&&(d=g=(d+g)/2),l.x0=u,l.y0=d,l.x1=c,l.y1=g}}return a.round=function(o){return arguments.length?(i=!!o,a):i},a.size=function(o){return arguments.length?(e=+o[0],t=+o[1],a):[e,t]},a.padding=function(o){return arguments.length?(n=+o,a):n},a}var uhe={depth:-1},qq={},AT={};function dhe(e){return e.id}function fhe(e){return e.parentId}function jq(){var e=dhe,t=fhe,n;function i(a){var r=Array.from(a),o=e,s=t,l,u,d,c,g,v,b,x,k=new Map;if(n!=null){const w=r.map((O,D)=>che(n(O,D,a))),E=w.map(Uq),T=new Set(w).add("");for(const O of E)T.has(O)||(T.add(O),w.push(O),E.push(Uq(O)),r.push(AT));o=(O,D)=>w[D],s=(O,D)=>E[D]}for(d=0,l=r.length;d<l;++d)u=r[d],v=r[d]=new jg(u),(b=o(u,d,a))!=null&&(b+="")&&(x=v.id=b,k.set(x,k.has(x)?qq:v)),(b=s(u,d,a))!=null&&(b+="")&&(v.parent=b);for(d=0;d<l;++d)if(v=r[d],b=v.parent){if(g=k.get(b),!g)throw new Error("missing: "+b);if(g===qq)throw new Error("ambiguous: "+b);g.children?g.children.push(v):g.children=[v],v.parent=g}else{if(c)throw new Error("multiple roots");c=v}if(!c)throw new Error("no root");if(n!=null){for(;c.data===AT&&c.children.length===1;)c=c.children[0],--l;for(let w=r.length-1;w>=0&&(v=r[w],v.data===AT);--w)v.data=null}if(c.parent=uhe,c.eachBefore(function(w){w.depth=w.parent.depth+1,--l}).eachBefore(BW),c.parent=null,l>0)throw new Error("cycle");return c}return i.id=function(a){return arguments.length?(e=z1(a),i):e},i.parentId=function(a){return arguments.length?(t=z1(a),i):t},i.path=function(a){return arguments.length?(n=z1(a),i):n},i}function che(e){e=`${e}`;let t=e.length;return AD(e,t-1)&&!AD(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Uq(e){let t=e.length;if(t<2)return"";for(;--t>1&&!AD(e,t););return e.slice(0,t)}function AD(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function hhe(e,t){return e.parent===t.parent?1:2}function OT(e){var t=e.children;return t?t[0]:e.t}function DT(e){var t=e.children;return t?t[t.length-1]:e.t}function phe(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function ghe(e){for(var t=0,n=0,i=e.children,a=i.length,r;--a>=0;)r=i[a],r.z+=t,r.m+=t,t+=r.s+(n+=r.c)}function mhe(e,t,n){return e.a.parent===t.parent?e.a:n}function q1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}q1.prototype=Object.create(jg.prototype);function yhe(e){for(var t=new q1(e,0),n,i=[t],a,r,o,s;n=i.pop();)if(r=n._.children)for(n.children=new Array(s=r.length),o=s-1;o>=0;--o)i.push(a=n.children[o]=new q1(r[o],o)),a.parent=n;return(t.parent=new q1(null,0)).children=[t],t}function vhe(){var e=hhe,t=1,n=1,i=null;function a(u){var d=yhe(u);if(d.eachAfter(r),d.parent.m=-d.z,d.eachBefore(o),i)u.eachBefore(l);else{var c=u,g=u,v=u;u.eachBefore(function(E){E.x<c.x&&(c=E),E.x>g.x&&(g=E),E.depth>v.depth&&(v=E)});var b=c===g?1:e(c,g)/2,x=b-c.x,k=t/(g.x+b+x),w=n/(v.depth||1);u.eachBefore(function(E){E.x=(E.x+x)*k,E.y=E.depth*w})}return u}function r(u){var d=u.children,c=u.parent.children,g=u.i?c[u.i-1]:null;if(d){ghe(u);var v=(d[0].z+d[d.length-1].z)/2;g?(u.z=g.z+e(u._,g._),u.m=u.z-v):u.z=v}else g&&(u.z=g.z+e(u._,g._));u.parent.A=s(u,g,u.parent.A||c[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,d,c){if(d){for(var g=u,v=u,b=d,x=g.parent.children[0],k=g.m,w=v.m,E=b.m,T=x.m,O;b=DT(b),g=OT(g),b&&g;)x=OT(x),v=DT(v),v.a=u,O=b.z+E-g.z-k+e(b._,g._),O>0&&(phe(mhe(b,u,c),u,O),k+=O,w+=O),E+=b.m,k+=g.m,T+=x.m,w+=v.m;b&&!DT(v)&&(v.t=b,v.m+=E-w),g&&!OT(x)&&(x.t=g,x.m+=k-T,c=u)}return c}function l(u){u.x*=t,u.y=u.depth*n}return a.separation=function(u){return arguments.length?(e=u,a):e},a.size=function(u){return arguments.length?(i=!1,t=+u[0],n=+u[1],a):i?null:[t,n]},a.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],n=+u[1],a):i?[t,n]:null},a}function c2(e,t,n,i,a){for(var r=e.children,o,s=-1,l=r.length,u=e.value&&(a-n)/e.value;++s<l;)o=r[s],o.x0=t,o.x1=i,o.y0=n,o.y1=n+=o.value*u}var YW=(1+Math.sqrt(5))/2;function XW(e,t,n,i,a,r){for(var o=[],s=t.children,l,u,d=0,c=0,g=s.length,v,b,x=t.value,k,w,E,T,O,D,P;d<g;){v=a-n,b=r-i;do k=s[c++].value;while(!k&&c<g);for(w=E=k,D=Math.max(b/v,v/b)/(x*e),P=k*k*D,O=Math.max(E/P,P/w);c<g;++c){if(k+=u=s[c].value,u<w&&(w=u),u>E&&(E=u),P=k*k*D,T=Math.max(E/P,P/w),T>O){k-=u;break}O=T}o.push(l={value:k,dice:v<b,children:s.slice(d,c)}),l.dice?U_(l,n,i,a,x?i+=b*k/x:r):c2(l,n,i,x?n+=v*k/x:a,r),x-=k,d=c}return o}const ZW=function e(t){function n(i,a,r,o,s){XW(t,i,a,r,o,s)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(YW);function bhe(){var e=ZW,t=!1,n=1,i=1,a=[0],r=Cc,o=Cc,s=Cc,l=Cc,u=Cc;function d(g){return g.x0=g.y0=0,g.x1=n,g.y1=i,g.eachBefore(c),a=[0],t&&g.eachBefore(HW),g}function c(g){var v=a[g.depth],b=g.x0+v,x=g.y0+v,k=g.x1-v,w=g.y1-v;k<b&&(b=k=(b+k)/2),w<x&&(x=w=(x+w)/2),g.x0=b,g.y0=x,g.x1=k,g.y1=w,g.children&&(v=a[g.depth+1]=r(g)/2,b+=u(g)-v,x+=o(g)-v,k-=s(g)-v,w-=l(g)-v,k<b&&(b=k=(b+k)/2),w<x&&(x=w=(x+w)/2),e(g,b,x,k,w))}return d.round=function(g){return arguments.length?(t=!!g,d):t},d.size=function(g){return arguments.length?(n=+g[0],i=+g[1],d):[n,i]},d.tile=function(g){return arguments.length?(e=VW(g),d):e},d.padding=function(g){return arguments.length?d.paddingInner(g).paddingOuter(g):d.paddingInner()},d.paddingInner=function(g){return arguments.length?(r=typeof g=="function"?g:jp(+g),d):r},d.paddingOuter=function(g){return arguments.length?d.paddingTop(g).paddingRight(g).paddingBottom(g).paddingLeft(g):d.paddingTop()},d.paddingTop=function(g){return arguments.length?(o=typeof g=="function"?g:jp(+g),d):o},d.paddingRight=function(g){return arguments.length?(s=typeof g=="function"?g:jp(+g),d):s},d.paddingBottom=function(g){return arguments.length?(l=typeof g=="function"?g:jp(+g),d):l},d.paddingLeft=function(g){return arguments.length?(u=typeof g=="function"?g:jp(+g),d):u},d}function _he(e,t,n,i,a){var r=e.children,o,s=r.length,l,u=new Array(s+1);for(u[0]=l=o=0;o<s;++o)u[o+1]=l+=r[o].value;d(0,s,e.value,t,n,i,a);function d(c,g,v,b,x,k,w){if(c>=g-1){var E=r[c];E.x0=b,E.y0=x,E.x1=k,E.y1=w;return}for(var T=u[c],O=v/2+T,D=c+1,P=g-1;D<P;){var R=D+P>>>1;u[R]<O?D=R+1:P=R}O-u[D-1]<u[D]-O&&c+1<D&&--D;var M=u[D]-T,q=v-M;if(k-b>w-x){var H=v?(b*q+k*M)/v:k;d(c,D,M,b,x,H,w),d(D,g,q,H,x,k,w)}else{var z=v?(x*q+w*M)/v:w;d(c,D,M,b,x,k,z),d(D,g,q,b,z,k,w)}}}function xhe(e,t,n,i,a){(e.depth&1?c2:U_)(e,t,n,i,a)}const whe=function e(t){function n(i,a,r,o,s){if((l=i._squarify)&&l.ratio===t)for(var l,u,d,c,g=-1,v,b=l.length,x=i.value;++g<b;){for(u=l[g],d=u.children,c=u.value=0,v=d.length;c<v;++c)u.value+=d[c].value;u.dice?U_(u,a,r,o,x?r+=(s-r)*u.value/x:s):c2(u,a,r,x?a+=(o-a)*u.value/x:o,s),x-=u.value}else i._squarify=l=XW(t,i,a,r,o,s),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(YW);function Rl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ff(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const OD=Symbol("implicit");function _P(){var e=new K5,t=[],n=[],i=OD;function a(r){let o=e.get(r);if(o===void 0){if(i!==OD)return i;e.set(r,o=t.push(r)-1)}return n[o%n.length]}return a.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new K5;for(const o of r)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(r){return arguments.length?(n=Array.from(r),a):n.slice()},a.unknown=function(r){return arguments.length?(i=r,a):i},a.copy=function(){return _P(t,n).unknown(i)},Rl.apply(a,arguments),a}function khe(e){return function(){return e}}function DD(e){return+e}var Bq=[0,1];function cr(e){return e}function CD(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:khe(isNaN(t)?NaN:.5)}function $he(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Ehe(e,t,n){var i=e[0],a=e[1],r=t[0],o=t[1];return a<i?(i=CD(a,i),r=n(o,r)):(i=CD(i,a),r=n(r,o)),function(s){return r(i(s))}}function She(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),r=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)a[o]=CD(e[o],e[o+1]),r[o]=n(t[o],t[o+1]);return function(s){var l=gf(e,s,1,i)-1;return r[l](a[l](s))}}function B_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function h2(){var e=Bq,t=Bq,n=Pf,i,a,r,o=cr,s,l,u;function d(){var g=Math.min(e.length,t.length);return o!==cr&&(o=$he(e[0],e[g-1])),s=g>2?She:Ehe,l=u=null,c}function c(g){return g==null||isNaN(g=+g)?r:(l||(l=s(e.map(i),t,n)))(i(o(g)))}return c.invert=function(g){return o(a((u||(u=s(t,e.map(i),mo)))(g)))},c.domain=function(g){return arguments.length?(e=Array.from(g,DD),d()):e.slice()},c.range=function(g){return arguments.length?(t=Array.from(g),d()):t.slice()},c.rangeRound=function(g){return t=Array.from(g),n=q_,d()},c.clamp=function(g){return arguments.length?(o=g?!0:cr,d()):o!==cr},c.interpolate=function(g){return arguments.length?(n=g,d()):n},c.unknown=function(g){return arguments.length?(r=g,c):r},function(g,v){return i=g,a=v,d()}}function JW(){return h2()(cr,cr)}function KW(e,t,n,i){var a=mf(e,t,n),r;switch(i=dh(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(r=jW(a,o))&&(i.precision=r),vP(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(r=UW(a,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=r-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(r=qW(a))&&(i.precision=r-(i.type==="%")*2);break}}return f2(i)}function Lh(e){var t=e.domain;return e.ticks=function(n){var i=t();return gD(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var a=t();return KW(a[0],a[a.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),a=0,r=i.length-1,o=i[a],s=i[r],l,u,d=10;for(s<o&&(u=o,o=s,s=u,u=a,a=r,r=u);d-- >0;){if(u=mD(o,s,n),u===l)return i[a]=o,i[r]=s,t(i);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function nk(){var e=JW();return e.copy=function(){return B_(e,nk())},Rl.apply(e,arguments),Lh(e)}function QW(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,DD),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return QW(e).unknown(t)},e=arguments.length?Array.from(e,DD):[0,1],Lh(n)}function eG(e,t){e=e.slice();var n=0,i=e.length-1,a=e[n],r=e[i],o;return r<a&&(o=n,n=i,i=o,o=a,a=r,r=o),e[n]=t.floor(a),e[i]=t.ceil(r),e}function Vq(e){return Math.log(e)}function Wq(e){return Math.exp(e)}function The(e){return-Math.log(-e)}function Ahe(e){return-Math.exp(-e)}function Ohe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Dhe(e){return e===10?Ohe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Che(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Gq(e){return(t,n)=>-e(-t,n)}function xP(e){const t=e(Vq,Wq),n=t.domain;let i=10,a,r;function o(){return a=Che(i),r=Dhe(i),n()[0]<0?(a=Gq(a),r=Gq(r),e(The,Ahe)):e(Vq,Wq),t}return t.base=function(s){return arguments.length?(i=+s,o()):i},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const l=n();let u=l[0],d=l[l.length-1];const c=d<u;c&&([u,d]=[d,u]);let g=a(u),v=a(d),b,x;const k=s==null?10:+s;let w=[];if(!(i%1)&&v-g<k){if(g=Math.floor(g),v=Math.ceil(v),u>0){for(;g<=v;++g)for(b=1;b<i;++b)if(x=g<0?b/r(-g):b*r(g),!(x<u)){if(x>d)break;w.push(x)}}else for(;g<=v;++g)for(b=i-1;b>=1;--b)if(x=g>0?b/r(-g):b*r(g),!(x<u)){if(x>d)break;w.push(x)}w.length*2<k&&(w=gD(u,d,k))}else w=gD(g,v,Math.min(v-g,k)).map(r);return c?w.reverse():w},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=dh(l)).precision==null&&(l.trim=!0),l=f2(l)),s===1/0)return l;const u=Math.max(1,i*s/t.ticks().length);return d=>{let c=d/r(Math.round(a(d)));return c*i<i-.5&&(c*=i),c<=u?l(d):""}},t.nice=()=>n(eG(n(),{floor:s=>r(Math.floor(a(s))),ceil:s=>r(Math.ceil(a(s)))})),t}function tG(){const e=xP(h2()).domain([1,10]);return e.copy=()=>B_(e,tG()).base(e.base()),Rl.apply(e,arguments),e}function Hq(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Yq(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function wP(e){var t=1,n=e(Hq(t),Yq(t));return n.constant=function(i){return arguments.length?e(Hq(t=+i),Yq(t)):t},Lh(n)}function nG(){var e=wP(h2());return e.copy=function(){return B_(e,nG()).constant(e.constant())},Rl.apply(e,arguments)}function Xq(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Rhe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ihe(e){return e<0?-e*e:e*e}function kP(e){var t=e(cr,cr),n=1;function i(){return n===1?e(cr,cr):n===.5?e(Rhe,Ihe):e(Xq(n),Xq(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,i()):n},Lh(t)}function $P(){var e=kP(h2());return e.copy=function(){return B_(e,$P()).exponent(e.exponent())},Rl.apply(e,arguments),e}function Phe(){return $P.apply(null,arguments).exponent(.5)}function iG(){var e=[],t=[],n=[],i;function a(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=zV(e,o/s);return r}function r(o){return o==null||isNaN(o=+o)?i:t[gf(n,o)]}return r.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},r.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ku),a()},r.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.quantiles=function(){return n.slice()},r.copy=function(){return iG().domain(e).range(t).unknown(i)},Rl.apply(r,arguments)}function aG(){var e=0,t=1,n=1,i=[.5],a=[0,1],r;function o(l){return l!=null&&l<=l?a[gf(i,l,0,n)]:r}function s(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(n=(a=Array.from(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=n?[i[n-1],t]:[i[u-1],i[u]]},o.unknown=function(l){return arguments.length&&(r=l),o},o.thresholds=function(){return i.slice()},o.copy=function(){return aG().domain([e,t]).range(a).unknown(r)},Rl.apply(Lh(o),arguments)}function rG(){var e=[.5],t=[0,1],n,i=1;function a(r){return r!=null&&r<=r?t[gf(e,r,0,i)]:n}return a.domain=function(r){return arguments.length?(e=Array.from(r),i=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(r){return arguments.length?(t=Array.from(r),i=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(r){var o=t.indexOf(r);return[e[o-1],e[o]]},a.unknown=function(r){return arguments.length?(n=r,a):n},a.copy=function(){return rG().domain(e).range(t).unknown(n)},Rl.apply(a,arguments)}const CT=new Date,RT=new Date;function li(e,t,n,i){function a(r){return e(r=arguments.length===0?new Date:new Date(+r)),r}return a.floor=r=>(e(r=new Date(+r)),r),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=r=>{const o=a(r),s=a.ceil(r);return r-o<s-r?o:s},a.offset=(r,o)=>(t(r=new Date(+r),o==null?1:Math.floor(o)),r),a.range=(r,o,s)=>{const l=[];if(r=a.ceil(r),s=s==null?1:Math.floor(s),!(r<o)||!(s>0))return l;let u;do l.push(u=new Date(+r)),t(r,s),e(r);while(u<r&&r<o);return l},a.filter=r=>li(o=>{if(o>=o)for(;e(o),!r(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!r(o););else for(;--s>=0;)for(;t(o,1),!r(o););}),n&&(a.count=(r,o)=>(CT.setTime(+r),RT.setTime(+o),e(CT),e(RT),Math.floor(n(CT,RT))),a.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?a.filter(i?o=>i(o)%r===0:o=>a.count(0,o)%r===0):a)),a}const Ug=li(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ug.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?li(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ug);Ug.range;const yu=1e3,_o=yu*60,vu=_o*60,qu=vu*24,EP=qu*7,Zq=qu*30,IT=qu*365,bu=li(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*yu)},(e,t)=>(t-e)/yu,e=>e.getUTCSeconds());bu.range;const p2=li(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*yu)},(e,t)=>{e.setTime(+e+t*_o)},(e,t)=>(t-e)/_o,e=>e.getMinutes());p2.range;const g2=li(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*_o)},(e,t)=>(t-e)/_o,e=>e.getUTCMinutes());g2.range;const m2=li(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*yu-e.getMinutes()*_o)},(e,t)=>{e.setTime(+e+t*vu)},(e,t)=>(t-e)/vu,e=>e.getHours());m2.range;const y2=li(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*vu)},(e,t)=>(t-e)/vu,e=>e.getUTCHours());y2.range;const Eu=li(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_o)/qu,e=>e.getDate()-1);Eu.range;const of=li(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qu,e=>e.getUTCDate()-1);of.range;const oG=li(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qu,e=>Math.floor(e/qu));oG.range;function Mh(e){return li(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*_o)/EP)}const Cm=Mh(0),ik=Mh(1),Fhe=Mh(2),Nhe=Mh(3),Bg=Mh(4),Lhe=Mh(5),Mhe=Mh(6);Cm.range;ik.range;Fhe.range;Nhe.range;Bg.range;Lhe.range;Mhe.range;function zh(e){return li(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/EP)}const Rm=zh(0),ak=zh(1),zhe=zh(2),qhe=zh(3),Vg=zh(4),jhe=zh(5),Uhe=zh(6);Rm.range;ak.range;zhe.range;qhe.range;Vg.range;jhe.range;Uhe.range;const Qb=li(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Qb.range;const e_=li(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());e_.range;const xl=li(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());xl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:li(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});xl.range;const wl=li(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());wl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:li(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});wl.range;function sG(e,t,n,i,a,r){const o=[[bu,1,yu],[bu,5,5*yu],[bu,15,15*yu],[bu,30,30*yu],[r,1,_o],[r,5,5*_o],[r,15,15*_o],[r,30,30*_o],[a,1,vu],[a,3,3*vu],[a,6,6*vu],[a,12,12*vu],[i,1,qu],[i,2,2*qu],[n,1,EP],[t,1,Zq],[t,3,3*Zq],[e,1,IT]];function s(u,d,c){const g=d<u;g&&([u,d]=[d,u]);const v=c&&typeof c.range=="function"?c:l(u,d,c),b=v?v.range(u,+d+1):[];return g?b.reverse():b}function l(u,d,c){const g=Math.abs(d-u)/c,v=Om(([,,k])=>k).right(o,g);if(v===o.length)return e.every(mf(u/IT,d/IT,c));if(v===0)return Ug.every(Math.max(mf(u,d,c),1));const[b,x]=o[g/o[v-1][2]<o[v][2]/g?v-1:v];return b.every(x)}return[s,l]}const[Bhe,Vhe]=sG(wl,e_,Rm,oG,y2,g2),[Whe,Ghe]=sG(xl,Qb,Cm,Eu,m2,p2);function PT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function FT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Yy(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function lG(e){var t=e.dateTime,n=e.date,i=e.time,a=e.periods,r=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=Xy(a),d=Zy(a),c=Xy(r),g=Zy(r),v=Xy(o),b=Zy(o),x=Xy(s),k=Zy(s),w=Xy(l),E=Zy(l),T={a:se,A:ee,b:oe,B:Y,c:null,d:n9,e:n9,f:gpe,g:Epe,G:Tpe,H:cpe,I:hpe,j:ppe,L:uG,m:mpe,M:ype,p:Z,q:ae,Q:r9,s:o9,S:vpe,u:bpe,U:_pe,V:xpe,w:wpe,W:kpe,x:null,X:null,y:$pe,Y:Spe,Z:Ape,"%":a9},O={a:ne,A:U,b:X,B:ue,c:null,d:i9,e:i9,f:Rpe,g:Upe,G:Vpe,H:Ope,I:Dpe,j:Cpe,L:fG,m:Ipe,M:Ppe,p:Ce,q:ie,Q:r9,s:o9,S:Fpe,u:Npe,U:Lpe,V:Mpe,w:zpe,W:qpe,x:null,X:null,y:jpe,Y:Bpe,Z:Wpe,"%":a9},D={a:H,A:z,b:Q,B:te,c:W,d:e9,e:e9,f:lpe,g:Qq,G:Kq,H:t9,I:t9,j:ape,L:spe,m:ipe,M:rpe,p:q,q:npe,Q:dpe,s:fpe,S:ope,u:Jhe,U:Khe,V:Qhe,w:Zhe,W:epe,x:j,X:K,y:Qq,Y:Kq,Z:tpe,"%":upe};T.x=P(n,T),T.X=P(i,T),T.c=P(t,T),O.x=P(n,O),O.X=P(i,O),O.c=P(t,O);function P(_e,xe){return function(ve){var G=[],kt=-1,pt=0,Rt=_e.length,Jt,Cn,wa;for(ve instanceof Date||(ve=new Date(+ve));++kt<Rt;)_e.charCodeAt(kt)===37&&(G.push(_e.slice(pt,kt)),(Cn=Jq[Jt=_e.charAt(++kt)])!=null?Jt=_e.charAt(++kt):Cn=Jt==="e"?" ":"0",(wa=xe[Jt])&&(Jt=wa(ve,Cn)),G.push(Jt),pt=kt+1);return G.push(_e.slice(pt,kt)),G.join("")}}function R(_e,xe){return function(ve){var G=Yy(1900,void 0,1),kt=M(G,_e,ve+="",0),pt,Rt;if(kt!=ve.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(xe&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(pt=FT(Yy(G.y,0,1)),Rt=pt.getUTCDay(),pt=Rt>4||Rt===0?ak.ceil(pt):ak(pt),pt=of.offset(pt,(G.V-1)*7),G.y=pt.getUTCFullYear(),G.m=pt.getUTCMonth(),G.d=pt.getUTCDate()+(G.w+6)%7):(pt=PT(Yy(G.y,0,1)),Rt=pt.getDay(),pt=Rt>4||Rt===0?ik.ceil(pt):ik(pt),pt=Eu.offset(pt,(G.V-1)*7),G.y=pt.getFullYear(),G.m=pt.getMonth(),G.d=pt.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),Rt="Z"in G?FT(Yy(G.y,0,1)).getUTCDay():PT(Yy(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(Rt+5)%7:G.w+G.U*7-(Rt+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,FT(G)):PT(G)}}function M(_e,xe,ve,G){for(var kt=0,pt=xe.length,Rt=ve.length,Jt,Cn;kt<pt;){if(G>=Rt)return-1;if(Jt=xe.charCodeAt(kt++),Jt===37){if(Jt=xe.charAt(kt++),Cn=D[Jt in Jq?xe.charAt(kt++):Jt],!Cn||(G=Cn(_e,ve,G))<0)return-1}else if(Jt!=ve.charCodeAt(G++))return-1}return G}function q(_e,xe,ve){var G=u.exec(xe.slice(ve));return G?(_e.p=d.get(G[0].toLowerCase()),ve+G[0].length):-1}function H(_e,xe,ve){var G=v.exec(xe.slice(ve));return G?(_e.w=b.get(G[0].toLowerCase()),ve+G[0].length):-1}function z(_e,xe,ve){var G=c.exec(xe.slice(ve));return G?(_e.w=g.get(G[0].toLowerCase()),ve+G[0].length):-1}function Q(_e,xe,ve){var G=w.exec(xe.slice(ve));return G?(_e.m=E.get(G[0].toLowerCase()),ve+G[0].length):-1}function te(_e,xe,ve){var G=x.exec(xe.slice(ve));return G?(_e.m=k.get(G[0].toLowerCase()),ve+G[0].length):-1}function W(_e,xe,ve){return M(_e,t,xe,ve)}function j(_e,xe,ve){return M(_e,n,xe,ve)}function K(_e,xe,ve){return M(_e,i,xe,ve)}function se(_e){return o[_e.getDay()]}function ee(_e){return r[_e.getDay()]}function oe(_e){return l[_e.getMonth()]}function Y(_e){return s[_e.getMonth()]}function Z(_e){return a[+(_e.getHours()>=12)]}function ae(_e){return 1+~~(_e.getMonth()/3)}function ne(_e){return o[_e.getUTCDay()]}function U(_e){return r[_e.getUTCDay()]}function X(_e){return l[_e.getUTCMonth()]}function ue(_e){return s[_e.getUTCMonth()]}function Ce(_e){return a[+(_e.getUTCHours()>=12)]}function ie(_e){return 1+~~(_e.getUTCMonth()/3)}return{format:function(_e){var xe=P(_e+="",T);return xe.toString=function(){return _e},xe},parse:function(_e){var xe=R(_e+="",!1);return xe.toString=function(){return _e},xe},utcFormat:function(_e){var xe=P(_e+="",O);return xe.toString=function(){return _e},xe},utcParse:function(_e){var xe=R(_e+="",!0);return xe.toString=function(){return _e},xe}}}var Jq={"-":"",_:" ",0:"0"},Ai=/^\s*\d+/,Hhe=/^%/,Yhe=/[\\^$*+?|[\]().{}]/g;function Nt(e,t,n){var i=e<0?"-":"",a=(i?-e:e)+"",r=a.length;return i+(r<n?new Array(n-r+1).join(t)+a:a)}function Xhe(e){return e.replace(Yhe,"\\$&")}function Xy(e){return new RegExp("^(?:"+e.map(Xhe).join("|")+")","i")}function Zy(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Zhe(e,t,n){var i=Ai.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Jhe(e,t,n){var i=Ai.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function Khe(e,t,n){var i=Ai.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Qhe(e,t,n){var i=Ai.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function epe(e,t,n){var i=Ai.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function Kq(e,t,n){var i=Ai.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Qq(e,t,n){var i=Ai.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function tpe(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function npe(e,t,n){var i=Ai.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function ipe(e,t,n){var i=Ai.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function e9(e,t,n){var i=Ai.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function ape(e,t,n){var i=Ai.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function t9(e,t,n){var i=Ai.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function rpe(e,t,n){var i=Ai.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function ope(e,t,n){var i=Ai.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function spe(e,t,n){var i=Ai.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function lpe(e,t,n){var i=Ai.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function upe(e,t,n){var i=Hhe.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function dpe(e,t,n){var i=Ai.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function fpe(e,t,n){var i=Ai.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function n9(e,t){return Nt(e.getDate(),t,2)}function cpe(e,t){return Nt(e.getHours(),t,2)}function hpe(e,t){return Nt(e.getHours()%12||12,t,2)}function ppe(e,t){return Nt(1+Eu.count(xl(e),e),t,3)}function uG(e,t){return Nt(e.getMilliseconds(),t,3)}function gpe(e,t){return uG(e,t)+"000"}function mpe(e,t){return Nt(e.getMonth()+1,t,2)}function ype(e,t){return Nt(e.getMinutes(),t,2)}function vpe(e,t){return Nt(e.getSeconds(),t,2)}function bpe(e){var t=e.getDay();return t===0?7:t}function _pe(e,t){return Nt(Cm.count(xl(e)-1,e),t,2)}function dG(e){var t=e.getDay();return t>=4||t===0?Bg(e):Bg.ceil(e)}function xpe(e,t){return e=dG(e),Nt(Bg.count(xl(e),e)+(xl(e).getDay()===4),t,2)}function wpe(e){return e.getDay()}function kpe(e,t){return Nt(ik.count(xl(e)-1,e),t,2)}function $pe(e,t){return Nt(e.getFullYear()%100,t,2)}function Epe(e,t){return e=dG(e),Nt(e.getFullYear()%100,t,2)}function Spe(e,t){return Nt(e.getFullYear()%1e4,t,4)}function Tpe(e,t){var n=e.getDay();return e=n>=4||n===0?Bg(e):Bg.ceil(e),Nt(e.getFullYear()%1e4,t,4)}function Ape(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Nt(t/60|0,"0",2)+Nt(t%60,"0",2)}function i9(e,t){return Nt(e.getUTCDate(),t,2)}function Ope(e,t){return Nt(e.getUTCHours(),t,2)}function Dpe(e,t){return Nt(e.getUTCHours()%12||12,t,2)}function Cpe(e,t){return Nt(1+of.count(wl(e),e),t,3)}function fG(e,t){return Nt(e.getUTCMilliseconds(),t,3)}function Rpe(e,t){return fG(e,t)+"000"}function Ipe(e,t){return Nt(e.getUTCMonth()+1,t,2)}function Ppe(e,t){return Nt(e.getUTCMinutes(),t,2)}function Fpe(e,t){return Nt(e.getUTCSeconds(),t,2)}function Npe(e){var t=e.getUTCDay();return t===0?7:t}function Lpe(e,t){return Nt(Rm.count(wl(e)-1,e),t,2)}function cG(e){var t=e.getUTCDay();return t>=4||t===0?Vg(e):Vg.ceil(e)}function Mpe(e,t){return e=cG(e),Nt(Vg.count(wl(e),e)+(wl(e).getUTCDay()===4),t,2)}function zpe(e){return e.getUTCDay()}function qpe(e,t){return Nt(ak.count(wl(e)-1,e),t,2)}function jpe(e,t){return Nt(e.getUTCFullYear()%100,t,2)}function Upe(e,t){return e=cG(e),Nt(e.getUTCFullYear()%100,t,2)}function Bpe(e,t){return Nt(e.getUTCFullYear()%1e4,t,4)}function Vpe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Vg(e):Vg.ceil(e),Nt(e.getUTCFullYear()%1e4,t,4)}function Wpe(){return"+0000"}function a9(){return"%"}function r9(e){return+e}function o9(e){return Math.floor(+e/1e3)}var Ap,SP,hG,TP,pG;Gpe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Gpe(e){return Ap=lG(e),SP=Ap.format,hG=Ap.parse,TP=Ap.utcFormat,pG=Ap.utcParse,Ap}function Hpe(e){return new Date(e)}function Ype(e){return e instanceof Date?+e:+new Date(+e)}function AP(e,t,n,i,a,r,o,s,l,u){var d=JW(),c=d.invert,g=d.domain,v=u(".%L"),b=u(":%S"),x=u("%I:%M"),k=u("%I %p"),w=u("%a %d"),E=u("%b %d"),T=u("%B"),O=u("%Y");function D(P){return(l(P)<P?v:s(P)<P?b:o(P)<P?x:r(P)<P?k:i(P)<P?a(P)<P?w:E:n(P)<P?T:O)(P)}return d.invert=function(P){return new Date(c(P))},d.domain=function(P){return arguments.length?g(Array.from(P,Ype)):g().map(Hpe)},d.ticks=function(P){var R=g();return e(R[0],R[R.length-1],P??10)},d.tickFormat=function(P,R){return R==null?D:u(R)},d.nice=function(P){var R=g();return(!P||typeof P.range!="function")&&(P=t(R[0],R[R.length-1],P??10)),P?g(eG(R,P)):d},d.copy=function(){return B_(d,AP(e,t,n,i,a,r,o,s,l,u))},d}function Xpe(){return Rl.apply(AP(Whe,Ghe,xl,Qb,Cm,Eu,m2,p2,bu,SP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Zpe(){return Rl.apply(AP(Bhe,Vhe,wl,e_,Rm,of,y2,g2,bu,TP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function v2(){var e=0,t=1,n,i,a,r,o=cr,s=!1,l;function u(c){return c==null||isNaN(c=+c)?l:o(a===0?.5:(c=(r(c)-n)*a,s?Math.max(0,Math.min(1,c)):c))}u.domain=function(c){return arguments.length?([e,t]=c,n=r(e=+e),i=r(t=+t),a=n===i?0:1/(i-n),u):[e,t]},u.clamp=function(c){return arguments.length?(s=!!c,u):s},u.interpolator=function(c){return arguments.length?(o=c,u):o};function d(c){return function(g){var v,b;return arguments.length?([v,b]=g,o=c(v,b),u):[o(0),o(1)]}}return u.range=d(Pf),u.rangeRound=d(q_),u.unknown=function(c){return arguments.length?(l=c,u):l},function(c){return r=c,n=c(e),i=c(t),a=n===i?0:1/(i-n),u}}function Nf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function OP(){var e=Lh(v2()(cr));return e.copy=function(){return Nf(e,OP())},Ff.apply(e,arguments)}function gG(){var e=xP(v2()).domain([1,10]);return e.copy=function(){return Nf(e,gG()).base(e.base())},Ff.apply(e,arguments)}function mG(){var e=wP(v2());return e.copy=function(){return Nf(e,mG()).constant(e.constant())},Ff.apply(e,arguments)}function DP(){var e=kP(v2());return e.copy=function(){return Nf(e,DP()).exponent(e.exponent())},Ff.apply(e,arguments)}function Jpe(){return DP.apply(null,arguments).exponent(.5)}function b2(){var e=0,t=.5,n=1,i=1,a,r,o,s,l,u=cr,d,c=!1,g;function v(x){return isNaN(x=+x)?g:(x=.5+((x=+d(x))-r)*(i*x<i*r?s:l),u(c?Math.max(0,Math.min(1,x)):x))}v.domain=function(x){return arguments.length?([e,t,n]=x,a=d(e=+e),r=d(t=+t),o=d(n=+n),s=a===r?0:.5/(r-a),l=r===o?0:.5/(o-r),i=r<a?-1:1,v):[e,t,n]},v.clamp=function(x){return arguments.length?(c=!!x,v):c},v.interpolator=function(x){return arguments.length?(u=x,v):u};function b(x){return function(k){var w,E,T;return arguments.length?([w,E,T]=k,u=uP(x,[w,E,T]),v):[u(0),u(.5),u(1)]}}return v.range=b(Pf),v.rangeRound=b(q_),v.unknown=function(x){return arguments.length?(g=x,v):g},function(x){return d=x,a=x(e),r=x(t),o=x(n),s=a===r?0:.5/(r-a),l=r===o?0:.5/(o-r),i=r<a?-1:1,v}}function yG(){var e=Lh(b2()(cr));return e.copy=function(){return Nf(e,yG())},Ff.apply(e,arguments)}function vG(){var e=xP(b2()).domain([.1,1,10]);return e.copy=function(){return Nf(e,vG()).base(e.base())},Ff.apply(e,arguments)}function bG(){var e=wP(b2());return e.copy=function(){return Nf(e,bG()).constant(e.constant())},Ff.apply(e,arguments)}function CP(){var e=kP(b2());return e.copy=function(){return Nf(e,CP()).exponent(e.exponent())},Ff.apply(e,arguments)}function Kpe(){return CP.apply(null,arguments).exponent(.5)}function Mo(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Qpe=Mo("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ege=Mo("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),tge=Mo("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),nge=Mo("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),ige=Mo("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),age=Mo("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),rge=Mo("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),oge=Mo("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),sge=Mo("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),lge=Mo("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),_G=e=>mW(e[e.length-1]);var xG=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Mo);const uge=_G(xG);var dge=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Mo);const fge=_G(dge);function jt(e){return function(){return e}}const s9=Math.abs,ea=Math.atan2,cc=Math.cos,cge=Math.max,NT=Math.min,Ys=Math.sin,Vc=Math.sqrt,ia=1e-12,Wg=Math.PI,rk=Wg/2,wG=2*Wg;function hge(e){return e>1?0:e<-1?Wg:Math.acos(e)}function l9(e){return e>=1?rk:e<=-1?-rk:Math.asin(e)}function _2(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new hP(t)}function pge(e){return e.innerRadius}function gge(e){return e.outerRadius}function mge(e){return e.startAngle}function yge(e){return e.endAngle}function vge(e){return e&&e.padAngle}function bge(e,t,n,i,a,r,o,s){var l=n-e,u=i-t,d=o-a,c=s-r,g=c*l-d*u;if(!(g*g<ia))return g=(d*(t-r)-c*(e-a))/g,[e+g*l,t+g*u]}function Dx(e,t,n,i,a,r,o){var s=e-n,l=t-i,u=(o?r:-r)/Vc(s*s+l*l),d=u*l,c=-u*s,g=e+d,v=t+c,b=n+d,x=i+c,k=(g+b)/2,w=(v+x)/2,E=b-g,T=x-v,O=E*E+T*T,D=a-r,P=g*x-b*v,R=(T<0?-1:1)*Vc(cge(0,D*D*O-P*P)),M=(P*T-E*R)/O,q=(-P*E-T*R)/O,H=(P*T+E*R)/O,z=(-P*E+T*R)/O,Q=M-k,te=q-w,W=H-k,j=z-w;return Q*Q+te*te>W*W+j*j&&(M=H,q=z),{cx:M,cy:q,x01:-d,y01:-c,x11:M*(a/D-1),y11:q*(a/D-1)}}function _ge(){var e=pge,t=gge,n=jt(0),i=null,a=mge,r=yge,o=vge,s=null,l=_2(u);function u(){var d,c,g=+e.apply(this,arguments),v=+t.apply(this,arguments),b=a.apply(this,arguments)-rk,x=r.apply(this,arguments)-rk,k=s9(x-b),w=x>b;if(s||(s=d=l()),v<g&&(c=v,v=g,g=c),!(v>ia))s.moveTo(0,0);else if(k>wG-ia)s.moveTo(v*cc(b),v*Ys(b)),s.arc(0,0,v,b,x,!w),g>ia&&(s.moveTo(g*cc(x),g*Ys(x)),s.arc(0,0,g,x,b,w));else{var E=b,T=x,O=b,D=x,P=k,R=k,M=o.apply(this,arguments)/2,q=M>ia&&(i?+i.apply(this,arguments):Vc(g*g+v*v)),H=NT(s9(v-g)/2,+n.apply(this,arguments)),z=H,Q=H,te,W;if(q>ia){var j=l9(q/g*Ys(M)),K=l9(q/v*Ys(M));(P-=j*2)>ia?(j*=w?1:-1,O+=j,D-=j):(P=0,O=D=(b+x)/2),(R-=K*2)>ia?(K*=w?1:-1,E+=K,T-=K):(R=0,E=T=(b+x)/2)}var se=v*cc(E),ee=v*Ys(E),oe=g*cc(D),Y=g*Ys(D);if(H>ia){var Z=v*cc(T),ae=v*Ys(T),ne=g*cc(O),U=g*Ys(O),X;if(k<Wg)if(X=bge(se,ee,ne,U,Z,ae,oe,Y)){var ue=se-X[0],Ce=ee-X[1],ie=Z-X[0],_e=ae-X[1],xe=1/Ys(hge((ue*ie+Ce*_e)/(Vc(ue*ue+Ce*Ce)*Vc(ie*ie+_e*_e)))/2),ve=Vc(X[0]*X[0]+X[1]*X[1]);z=NT(H,(g-ve)/(xe-1)),Q=NT(H,(v-ve)/(xe+1))}else z=Q=0}R>ia?Q>ia?(te=Dx(ne,U,se,ee,v,Q,w),W=Dx(Z,ae,oe,Y,v,Q,w),s.moveTo(te.cx+te.x01,te.cy+te.y01),Q<H?s.arc(te.cx,te.cy,Q,ea(te.y01,te.x01),ea(W.y01,W.x01),!w):(s.arc(te.cx,te.cy,Q,ea(te.y01,te.x01),ea(te.y11,te.x11),!w),s.arc(0,0,v,ea(te.cy+te.y11,te.cx+te.x11),ea(W.cy+W.y11,W.cx+W.x11),!w),s.arc(W.cx,W.cy,Q,ea(W.y11,W.x11),ea(W.y01,W.x01),!w))):(s.moveTo(se,ee),s.arc(0,0,v,E,T,!w)):s.moveTo(se,ee),!(g>ia)||!(P>ia)?s.lineTo(oe,Y):z>ia?(te=Dx(oe,Y,Z,ae,g,-z,w),W=Dx(se,ee,ne,U,g,-z,w),s.lineTo(te.cx+te.x01,te.cy+te.y01),z<H?s.arc(te.cx,te.cy,z,ea(te.y01,te.x01),ea(W.y01,W.x01),!w):(s.arc(te.cx,te.cy,z,ea(te.y01,te.x01),ea(te.y11,te.x11),!w),s.arc(0,0,g,ea(te.cy+te.y11,te.cx+te.x11),ea(W.cy+W.y11,W.cx+W.x11),w),s.arc(W.cx,W.cy,z,ea(W.y11,W.x11),ea(W.y01,W.x01),!w))):s.arc(0,0,g,D,O,w)}if(s.closePath(),d)return s=null,d+""||null}return u.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+a.apply(this,arguments)+ +r.apply(this,arguments))/2-Wg/2;return[cc(c)*d,Ys(c)*d]},u.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:jt(+d),u):e},u.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:jt(+d),u):t},u.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:jt(+d),u):n},u.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:jt(+d),u):i},u.startAngle=function(d){return arguments.length?(a=typeof d=="function"?d:jt(+d),u):a},u.endAngle=function(d){return arguments.length?(r=typeof d=="function"?d:jt(+d),u):r},u.padAngle=function(d){return arguments.length?(o=typeof d=="function"?d:jt(+d),u):o},u.context=function(d){return arguments.length?(s=d??null,u):s},u}function kG(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $G(e){this._context=e}$G.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function RP(e){return new $G(e)}function EG(e){return e[0]}function SG(e){return e[1]}function TG(e,t){var n=jt(!0),i=null,a=RP,r=null,o=_2(s);e=typeof e=="function"?e:e===void 0?EG:jt(e),t=typeof t=="function"?t:t===void 0?SG:jt(t);function s(l){var u,d=(l=kG(l)).length,c,g=!1,v;for(i==null&&(r=a(v=o())),u=0;u<=d;++u)!(u<d&&n(c=l[u],u,l))===g&&((g=!g)?r.lineStart():r.lineEnd()),g&&r.point(+e(c,u,l),+t(c,u,l));if(v)return r=null,v+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:jt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:jt(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:jt(!!l),s):n},s.curve=function(l){return arguments.length?(a=l,i!=null&&(r=a(i)),s):a},s.context=function(l){return arguments.length?(l==null?i=r=null:r=a(i=l),s):i},s}function AG(e,t,n){var i=null,a=jt(!0),r=null,o=RP,s=null,l=_2(u);e=typeof e=="function"?e:e===void 0?EG:jt(+e),t=typeof t=="function"?t:jt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?SG:jt(+n);function u(c){var g,v,b,x=(c=kG(c)).length,k,w=!1,E,T=new Array(x),O=new Array(x);for(r==null&&(s=o(E=l())),g=0;g<=x;++g){if(!(g<x&&a(k=c[g],g,c))===w)if(w=!w)v=g,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),b=g-1;b>=v;--b)s.point(T[b],O[b]);s.lineEnd(),s.areaEnd()}w&&(T[g]=+e(k,g,c),O[g]=+t(k,g,c),s.point(i?+i(k,g,c):T[g],n?+n(k,g,c):O[g]))}if(E)return s=null,E+""||null}function d(){return TG().defined(a).curve(o).context(r)}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:jt(+c),i=null,u):e},u.x0=function(c){return arguments.length?(e=typeof c=="function"?c:jt(+c),u):e},u.x1=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:jt(+c),u):i},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:jt(+c),n=null,u):t},u.y0=function(c){return arguments.length?(t=typeof c=="function"?c:jt(+c),u):t},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:jt(+c),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(i).y(t)},u.defined=function(c){return arguments.length?(a=typeof c=="function"?c:jt(!!c),u):a},u.curve=function(c){return arguments.length?(o=c,r!=null&&(s=o(r)),u):o},u.context=function(c){return arguments.length?(c==null?r=s=null:s=o(r=c),u):r},u}const xge={draw(e,t){const n=Vc(t/Wg);e.moveTo(n,0),e.arc(0,0,n,0,wG)}};function wge(e,t){let n=null,i=_2(a);e=typeof e=="function"?e:jt(e||xge),t=typeof t=="function"?t:jt(t===void 0?64:+t);function a(){let r;if(n||(n=r=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return a.type=function(r){return arguments.length?(e=typeof r=="function"?r:jt(r),a):e},a.size=function(r){return arguments.length?(t=typeof r=="function"?r:jt(+r),a):t},a.context=function(r){return arguments.length?(n=r??null,a):n},a}function vf(){}function ok(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function x2(e){this._context=e}x2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ok(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ok(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kge(e){return new x2(e)}function OG(e){this._context=e}OG.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ok(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $ge(e){return new OG(e)}function DG(e){this._context=e}DG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:ok(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ege(e){return new DG(e)}function CG(e,t){this._basis=new x2(e),this._beta=t}CG.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],a=t[0],r=e[n]-i,o=t[n]-a,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+l*r),this._beta*t[s]+(1-this._beta)*(a+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Sge=function e(t){function n(i){return t===1?new x2(i):new CG(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function sk(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function IP(e,t){this._context=e,this._k=(1-t)/6}IP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:sk(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:sk(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Tge=function e(t){function n(i){return new IP(i,t)}return n.tension=function(i){return e(+i)},n}(0);function PP(e,t){this._context=e,this._k=(1-t)/6}PP.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:sk(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Age=function e(t){function n(i){return new PP(i,t)}return n.tension=function(i){return e(+i)},n}(0);function FP(e,t){this._context=e,this._k=(1-t)/6}FP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:sk(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Oge=function e(t){function n(i){return new FP(i,t)}return n.tension=function(i){return e(+i)},n}(0);function NP(e,t,n){var i=e._x1,a=e._y1,r=e._x2,o=e._y2;if(e._l01_a>ia){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,a=(a*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>ia){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);r=(r*u+e._x1*e._l23_2a-t*e._l12_2a)/d,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,a,r,o,e._x2,e._y2)}function RG(e,t){this._context=e,this._alpha=t}RG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:NP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Dge=function e(t){function n(i){return t?new RG(i,t):new IP(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function IG(e,t){this._context=e,this._alpha=t}IG.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:NP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Cge=function e(t){function n(i){return t?new IG(i,t):new PP(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function PG(e,t){this._context=e,this._alpha=t}PG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:NP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Rge=function e(t){function n(i){return t?new PG(i,t):new FP(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function FG(e){this._context=e}FG.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ige(e){return new FG(e)}function u9(e){return e<0?-1:1}function d9(e,t,n){var i=e._x1-e._x0,a=t-e._x1,r=(e._y1-e._y0)/(i||a<0&&-0),o=(n-e._y1)/(a||i<0&&-0),s=(r*a+o*i)/(i+a);return(u9(r)+u9(o))*Math.min(Math.abs(r),Math.abs(o),.5*Math.abs(s))||0}function f9(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function LT(e,t,n){var i=e._x0,a=e._y0,r=e._x1,o=e._y1,s=(r-i)/3;e._context.bezierCurveTo(i+s,a+s*t,r-s,o-s*n,r,o)}function lk(e){this._context=e}lk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:LT(this,this._t0,f9(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,LT(this,f9(this,n=d9(this,e,t)),n);break;default:LT(this,this._t0,n=d9(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function NG(e){this._context=new LG(e)}(NG.prototype=Object.create(lk.prototype)).point=function(e,t){lk.prototype.point.call(this,t,e)};function LG(e){this._context=e}LG.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,a,r){this._context.bezierCurveTo(t,e,i,n,r,a)}};function Pge(e){return new lk(e)}function Fge(e){return new NG(e)}function MG(e){this._context=e}MG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=c9(e),a=c9(t),r=0,o=1;o<n;++r,++o)this._context.bezierCurveTo(i[0][r],a[0][r],i[1][r],a[1][r],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function c9(e){var t,n=e.length-1,i,a=new Array(n),r=new Array(n),o=new Array(n);for(a[0]=0,r[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,r[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,r[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=a[t]/r[t-1],r[t]-=i,o[t]-=i*o[t-1];for(a[n-1]=o[n-1]/r[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/r[t];for(r[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)r[t]=2*e[t+1]-a[t+1];return[a,r]}function Nge(e){return new MG(e)}function w2(e,t){this._context=e,this._t=t}w2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Lge(e){return new w2(e,.5)}function Mge(e){return new w2(e,0)}function zge(e){return new w2(e,1)}function $v(e,t,n){this.k=e,this.x=t,this.y=n}$v.prototype={constructor:$v,scale:function(e){return e===1?this:new $v(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $v(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};$v.prototype;(function(){function e(t){return this instanceof e?(this._canvas=t=typeof t=="string"?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,void this.clear()):new e(t)}e.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t,n){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,n){n=n||15;var i=this._circle=document.createElement("canvas"),a=i.getContext("2d"),r=this._r=t+n;return i.width=i.height=2*r,a.shadowOffsetX=a.shadowOffsetY=200,a.shadowBlur=n,a.shadowColor="black",a.beginPath(),a.arc(r-200,r-200,t,0,2*Math.PI,!0),a.closePath(),a.fill(),this},gradient:function(t){var n=document.createElement("canvas"),i=n.getContext("2d"),a=i.createLinearGradient(0,0,0,256);n.width=1,n.height=256;for(var r in t)a.addColorStop(r,t[r]);return i.fillStyle=a,i.fillRect(0,0,1,256),this._grad=i.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var n=this._ctx;n.clearRect(0,0,this._width,this._height);for(var i,a=0,r=this._data.length;r>a;a++)i=this._data[a],n.globalAlpha=Math.max(i[2]/this._max,t||.05),n.drawImage(this._circle,i[0]-this._r,i[1]-this._r);var o=n.getImageData(0,0,this._width,this._height);return this._colorize(o.data,this._grad),n.putImageData(o,0,0),this},_colorize:function(t,n){for(var i,a=3,r=t.length;r>a;a+=4)i=4*t[a],i&&(t[a-3]=n[i],t[a-2]=n[i+1],t[a-1]=n[i+2])}},window.simpleheat=e})(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(e,t){this._latlngs=e,L.setOptions(this,t)},setLatLngs:function(e){return this._latlngs=e,this.redraw()},addLatLng:function(e){return this._latlngs.push(e),this.redraw()},setOptions:function(e){return L.setOptions(this,e),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(e){this._map=e,this._canvas||this._initCanvas(),e._panes.overlayPane.appendChild(this._canvas),e.on("moveend",this._reset,this),e.options.zoomAnimation&&L.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._canvas),e.off("moveend",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},_initCanvas:function(){var e=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),t=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);e.style[t]="50% 50%";var n=this._map.getSize();e.width=n.x,e.height=n.y;var i=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(e,"leaflet-zoom-"+(i?"animated":"hide")),this._heat=simpleheat(e),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var e=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,e);var t=this._map.getSize();this._heat._width!==t.x&&(this._canvas.width=this._heat._width=t.x),this._heat._height!==t.y&&(this._canvas.height=this._heat._height=t.y),this._redraw()},_redraw:function(){var e,t,n,i,a,r,o,s,l,u=[],d=this._heat._r,c=this._map.getSize(),g=new L.Bounds(L.point([-d,-d]),c.add([d,d])),v=this.options.max===void 0?1:this.options.max,b=this.options.maxZoom===void 0?this._map.getMaxZoom():this.options.maxZoom,x=1/Math.pow(2,Math.max(0,Math.min(b-this._map.getZoom(),12))),k=d/2,w=[],E=this._map._getMapPanePos(),T=E.x%k,O=E.y%k;for(e=0,t=this._latlngs.length;t>e;e++)if(n=this._map.latLngToContainerPoint(this._latlngs[e]),g.contains(n)){a=Math.floor((n.x-T)/k)+2,r=Math.floor((n.y-O)/k)+2;var D=this._latlngs[e].alt!==void 0?this._latlngs[e].alt:this._latlngs[e][2]!==void 0?+this._latlngs[e][2]:1;l=D*x,w[r]=w[r]||[],i=w[r][a],i?(i[0]=(i[0]*i[2]+n.x*l)/(i[2]+l),i[1]=(i[1]*i[2]+n.y*l)/(i[2]+l),i[2]+=l):w[r][a]=[n.x,n.y,l]}for(e=0,t=w.length;t>e;e++)if(w[e])for(o=0,s=w[e].length;s>o;o++)i=w[e][o],i&&u.push([Math.round(i[0]),Math.round(i[1]),Math.min(i[2],v)]);this._heat.data(u).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._getCenterOffset(e.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,n,t):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(n)+" scale("+t+")"}}),L.heatLayer=function(e,t){return new L.HeatLayer(e,t)};var Da=63710088e-1,zG={centimeters:Da*100,centimetres:Da*100,degrees:360/(2*Math.PI),feet:Da*3.28084,inches:Da*39.37,kilometers:Da/1e3,kilometres:Da/1e3,meters:Da,metres:Da,miles:Da/1609.344,millimeters:Da*1e3,millimetres:Da*1e3,nauticalmiles:Da/1852,radians:1,yards:Da*1.0936};function fh(e,t,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function hr(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!h9(e[0])||!h9(e[1]))throw new Error("coordinates must contain numbers");return fh({type:"Point",coordinates:e},t,n)}function Im(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return fh({type:"LineString",coordinates:e},t,n)}function RD(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function LP(e,t="kilometers"){const n=zG[t];if(!n)throw new Error(t+" units is invalid");return e*n}function qG(e,t="kilometers"){const n=zG[t];if(!n)throw new Error(t+" units is invalid");return e/n}function ID(e){return e%(2*Math.PI)*180/Math.PI}function sl(e){return e%360*Math.PI/180}function jG(e,t="kilometers",n="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return LP(qG(e,t),n)}function h9(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function ls(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qge(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function p9(e,t,n){if(!e)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)}function jge(e){return e.type==="Feature"?e.geometry:e}function UG(e,t,n={}){if(n.final===!0)return Uge(e,t);const i=ls(e),a=ls(t),r=sl(i[0]),o=sl(a[0]),s=sl(i[1]),l=sl(a[1]),u=Math.sin(o-r)*Math.cos(l),d=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(o-r);return ID(Math.atan2(u,d))}function Uge(e,t){let n=UG(t,e);return n=(n+180)%360,n}function cu(e,t,n={}){var i=ls(e),a=ls(t),r=sl(a[1]-i[1]),o=sl(a[0]-i[0]),s=sl(i[1]),l=sl(a[1]),u=Math.pow(Math.sin(r/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(s)*Math.cos(l);return LP(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)}function MP(e,t,n){if(e!==null)for(var i,a,r,o,s,l,u,d=0,c=0,g,v=e.type,b=v==="FeatureCollection",x=v==="Feature",k=b?e.features.length:1,w=0;w<k;w++){u=b?e.features[w].geometry:x?e.geometry:e,g=u?u.type==="GeometryCollection":!1,s=g?u.geometries.length:1;for(var E=0;E<s;E++){var T=0,O=0;if(o=g?u.geometries[E]:u,o!==null){l=o.coordinates;var D=o.type;switch(d=0,D){case null:break;case"Point":if(t(l,c,w,T,O)===!1)return!1;c++,T++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],c,w,T,O)===!1)return!1;c++,D==="MultiPoint"&&T++}D==="LineString"&&T++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(a=0;a<l[i].length-d;a++){if(t(l[i][a],c,w,T,O)===!1)return!1;c++}D==="MultiLineString"&&T++,D==="Polygon"&&O++}D==="Polygon"&&T++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(O=0,a=0;a<l[i].length;a++){for(r=0;r<l[i][a].length-d;r++){if(t(l[i][a][r],c,w,T,O)===!1)return!1;c++}O++}T++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(MP(o.geometries[i],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function g9(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function zP(e,t){var n,i,a,r,o,s,l,u,d,c,g=0,v=e.type==="FeatureCollection",b=e.type==="Feature",x=v?e.features.length:1;for(n=0;n<x;n++){for(s=v?e.features[n].geometry:b?e.geometry:e,u=v?e.features[n].properties:b?e.properties:{},d=v?e.features[n].bbox:b?e.bbox:void 0,c=v?e.features[n].id:b?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,a=0;a<o;a++){if(r=l?s.geometries[a]:s,r===null){if(t(null,g,u,d,c)===!1)return!1;continue}switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(r,g,u,d,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<r.geometries.length;i++)if(t(r.geometries[i],g,u,d,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}g++}}function BG(e,t){zP(e,function(n,i,a,r,o){var s=n===null?null:n.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(fh(n,a,{bbox:r,id:o}),i,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<n.coordinates.length;u++){var d=n.coordinates[u],c={type:l,coordinates:d};if(t(fh(c,a),i,u)===!1)return!1}})}function VG(e,t){BG(e,function(n,i,a){var r=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,l=0,u=0,d=0;if(MP(n,function(c,g,v,b,x){if(s===void 0||i>l||b>u||x>d){s=c,l=i,u=b,d=x,r=0;return}var k=Im([s,c],n.properties);if(t(k,i,a,x,r)===!1)return!1;r++,s=c})===!1)return!1}}})}function Bge(e,t,n){var i=n,a=!1;return VG(e,function(r,o,s,l,u){a===!1&&n===void 0?i=r:i=t(i,r,o,s,l,u),a=!0}),i}function Vge(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return MP(e,i=>{n[0]>i[0]&&(n[0]=i[0]),n[1]>i[1]&&(n[1]=i[1]),n[2]<i[0]&&(n[2]=i[0]),n[3]<i[1]&&(n[3]=i[1])}),n}const Su=11102230246251565e-32,ta=134217729,Wge=(3+8*Su)*Su;function MT(e,t,n,i,a){let r,o,s,l,u=t[0],d=i[0],c=0,g=0;d>u==d>-u?(r=u,u=t[++c]):(r=d,d=i[++g]);let v=0;if(c<e&&g<n)for(d>u==d>-u?(o=u+r,s=r-(o-u),u=t[++c]):(o=d+r,s=r-(o-d),d=i[++g]),r=o,s!==0&&(a[v++]=s);c<e&&g<n;)d>u==d>-u?(o=r+u,l=o-r,s=r-(o-l)+(u-l),u=t[++c]):(o=r+d,l=o-r,s=r-(o-l)+(d-l),d=i[++g]),r=o,s!==0&&(a[v++]=s);for(;c<e;)o=r+u,l=o-r,s=r-(o-l)+(u-l),u=t[++c],r=o,s!==0&&(a[v++]=s);for(;g<n;)o=r+d,l=o-r,s=r-(o-l)+(d-l),d=i[++g],r=o,s!==0&&(a[v++]=s);return(r!==0||v===0)&&(a[v++]=r),v}function Gge(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function V_(e){return new Float64Array(e)}const Hge=(3+16*Su)*Su,Yge=(2+12*Su)*Su,Xge=(9+64*Su)*Su*Su,Op=V_(4),m9=V_(8),y9=V_(12),v9=V_(16),Aa=V_(4);function Zge(e,t,n,i,a,r,o){let s,l,u,d,c,g,v,b,x,k,w,E,T,O,D,P,R,M;const q=e-a,H=n-a,z=t-r,Q=i-r;O=q*Q,g=ta*q,v=g-(g-q),b=q-v,g=ta*Q,x=g-(g-Q),k=Q-x,D=b*k-(O-v*x-b*x-v*k),P=z*H,g=ta*z,v=g-(g-z),b=z-v,g=ta*H,x=g-(g-H),k=H-x,R=b*k-(P-v*x-b*x-v*k),w=D-R,c=D-w,Op[0]=D-(w+c)+(c-R),E=O+w,c=E-O,T=O-(E-c)+(w-c),w=T-P,c=T-w,Op[1]=T-(w+c)+(c-P),M=E+w,c=M-E,Op[2]=E-(M-c)+(w-c),Op[3]=M;let te=Gge(4,Op),W=Yge*o;if(te>=W||-te>=W||(c=e-q,s=e-(q+c)+(c-a),c=n-H,u=n-(H+c)+(c-a),c=t-z,l=t-(z+c)+(c-r),c=i-Q,d=i-(Q+c)+(c-r),s===0&&l===0&&u===0&&d===0)||(W=Xge*o+Wge*Math.abs(te),te+=q*d+Q*s-(z*u+H*l),te>=W||-te>=W))return te;O=s*Q,g=ta*s,v=g-(g-s),b=s-v,g=ta*Q,x=g-(g-Q),k=Q-x,D=b*k-(O-v*x-b*x-v*k),P=l*H,g=ta*l,v=g-(g-l),b=l-v,g=ta*H,x=g-(g-H),k=H-x,R=b*k-(P-v*x-b*x-v*k),w=D-R,c=D-w,Aa[0]=D-(w+c)+(c-R),E=O+w,c=E-O,T=O-(E-c)+(w-c),w=T-P,c=T-w,Aa[1]=T-(w+c)+(c-P),M=E+w,c=M-E,Aa[2]=E-(M-c)+(w-c),Aa[3]=M;const j=MT(4,Op,4,Aa,m9);O=q*d,g=ta*q,v=g-(g-q),b=q-v,g=ta*d,x=g-(g-d),k=d-x,D=b*k-(O-v*x-b*x-v*k),P=z*u,g=ta*z,v=g-(g-z),b=z-v,g=ta*u,x=g-(g-u),k=u-x,R=b*k-(P-v*x-b*x-v*k),w=D-R,c=D-w,Aa[0]=D-(w+c)+(c-R),E=O+w,c=E-O,T=O-(E-c)+(w-c),w=T-P,c=T-w,Aa[1]=T-(w+c)+(c-P),M=E+w,c=M-E,Aa[2]=E-(M-c)+(w-c),Aa[3]=M;const K=MT(j,m9,4,Aa,y9);O=s*d,g=ta*s,v=g-(g-s),b=s-v,g=ta*d,x=g-(g-d),k=d-x,D=b*k-(O-v*x-b*x-v*k),P=l*u,g=ta*l,v=g-(g-l),b=l-v,g=ta*u,x=g-(g-u),k=u-x,R=b*k-(P-v*x-b*x-v*k),w=D-R,c=D-w,Aa[0]=D-(w+c)+(c-R),E=O+w,c=E-O,T=O-(E-c)+(w-c),w=T-P,c=T-w,Aa[1]=T-(w+c)+(c-P),M=E+w,c=M-E,Aa[2]=E-(M-c)+(w-c),Aa[3]=M;const se=MT(K,y9,4,Aa,v9);return v9[se-1]}function Jge(e,t,n,i,a,r){const o=(t-r)*(n-a),s=(e-a)*(i-r),l=o-s,u=Math.abs(o+s);return Math.abs(l)>=Hge*u?l:-Zge(e,t,n,i,a,r,u)}function Kge(e,t){var n,i,a=0,r,o,s,l,u,d,c,g=e[0],v=e[1],b=t.length;for(n=0;n<b;n++){i=0;var x=t[n],k=x.length-1;if(d=x[0],d[0]!==x[k][0]&&d[1]!==x[k][1])throw new Error("First and last coordinates in a ring must be the same");for(o=d[0]-g,s=d[1]-v,i;i<k;i++){if(c=x[i+1],l=c[0]-g,u=c[1]-v,s===0&&u===0){if(l<=0&&o>=0||o<=0&&l>=0)return 0}else if(u>=0&&s<=0||u<=0&&s>=0){if(r=Jge(o,l,s,u,0,0),r===0)return 0;(r>0&&u>0&&s<=0||r<0&&u<=0&&s>0)&&a++}d=c,s=u,o=l}}return a%2!==0}function WG(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const i=ls(e),a=jge(t),r=a.type,o=t.bbox;let s=a.coordinates;if(o&&Qge(i,o)===!1)return!1;r==="Polygon"&&(s=[s]);let l=!1;for(var u=0;u<s.length;++u){const d=Kge(i,s[u]);if(d===0)return!n.ignoreBoundary;d&&(l=!0)}return l}function Qge(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}var eme=Object.defineProperty,tme=Object.defineProperties,nme=Object.getOwnPropertyDescriptors,b9=Object.getOwnPropertySymbols,ime=Object.prototype.hasOwnProperty,ame=Object.prototype.propertyIsEnumerable,_9=(e,t,n)=>t in e?eme(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x9=(e,t)=>{for(var n in t||(t={}))ime.call(t,n)&&_9(e,n,t[n]);if(b9)for(var n of b9(t))ame.call(t,n)&&_9(e,n,t[n]);return e},w9=(e,t)=>tme(e,nme(t));function rme(e,t,n={}){if(!e||!t)throw new Error("lines and pt are required arguments");const i=ls(t);let a=hr([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),r=0;return BG(e,function(o,s,l){const u=qge(o);for(let d=0;d<u.length-1;d++){const c=hr(u[d]);c.properties.dist=cu(t,c,n);const g=ls(c),v=hr(u[d+1]);v.properties.dist=cu(t,v,n);const b=ls(v),x=cu(c,v,n);let k,w;g[0]===i[0]&&g[1]===i[1]?[k,,w]=[g,void 0,!1]:b[0]===i[0]&&b[1]===i[1]?[k,,w]=[b,void 0,!0]:[k,,w]=lme(c.geometry.coordinates,v.geometry.coordinates,ls(t));let E;k&&(E=hr(k,{dist:cu(t,k,n),multiFeatureIndex:l,location:r+cu(c,k,n)})),E&&E.properties.dist<a.properties.dist&&(a=w9(x9({},E),{properties:w9(x9({},E.properties),{index:w?d+1:d})})),r+=x}}),a}function ome(e,t){const[n,i,a]=e,[r,o,s]=t;return n*r+i*o+a*s}function sme(e,t){const[n,i,a]=e,[r,o,s]=t;return[i*s-a*o,a*r-n*s,n*o-i*r]}function k9(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2))}function hc(e,t){const n=ome(e,t)/(k9(e)*k9(t));return Math.acos(Math.min(Math.max(n,-1),1))}function zT(e){const t=sl(e[1]),n=sl(e[0]);return[Math.cos(t)*Math.cos(n),Math.cos(t)*Math.sin(n),Math.sin(t)]}function pc(e){const[t,n,i]=e,a=ID(Math.asin(i));return[ID(Math.atan2(n,t)),a]}function lme(e,t,n){const i=zT(e),a=zT(t),r=zT(n),[o,s,l]=r,[u,d,c]=sme(i,a),g=d*l-c*s,v=c*o-u*l,b=u*s-d*o,x=b*d-v*c,k=g*c-b*u,w=v*u-g*d,E=1/Math.sqrt(Math.pow(x,2)+Math.pow(k,2)+Math.pow(w,2)),T=[x*E,k*E,w*E],O=[-1*x*E,-1*k*E,-1*w*E],D=hc(i,a),P=hc(i,T),R=hc(a,T),M=hc(i,O),q=hc(a,O);let H;return P<M&&P<q||R<M&&R<q?H=T:H=O,hc(i,H)>D||hc(a,H)>D?cu(pc(H),pc(i))<=cu(pc(H),pc(a))?[pc(i),!0,!1]:[pc(a),!1,!0]:[pc(H),!1,!1]}function ume(e,t={}){const n=Vge(e),i=(n[0]+n[2])/2,a=(n[1]+n[3])/2;return hr([i,a],t.properties,t)}var GG={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(y6,function(){function n(y,f){(f==null||f>y.length)&&(f=y.length);for(var h=0,m=Array(f);h<f;h++)m[h]=y[h];return m}function i(y,f,h){return f=d(f),function(m,$){if($&&(typeof $=="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}(m)}(y,g()?Reflect.construct(f,h||[],d(y).constructor):f.apply(y,h))}function a(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function r(y,f,h){if(g())return Reflect.construct.apply(null,arguments);var m=[null];m.push.apply(m,f);var $=new(y.bind.apply(y,m));return h&&v($,h.prototype),$}function o(y,f){for(var h=0;h<f.length;h++){var m=f[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,k(m.key),m)}}function s(y,f,h){return f&&o(y.prototype,f),h&&o(y,h),Object.defineProperty(y,"prototype",{writable:!1}),y}function l(y,f){var h=typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(!h){if(Array.isArray(y)||(h=w(y))||f){h&&(y=h);var m=0,$=function(){};return{s:$,n:function(){return m>=y.length?{done:!0}:{done:!1,value:y[m++]}},e:function(B){throw B},f:$}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A,I=!0,N=!1;return{s:function(){h=h.call(y)},n:function(){var B=h.next();return I=B.done,B},e:function(B){N=!0,A=B},f:function(){try{I||h.return==null||h.return()}finally{if(N)throw A}}}}function u(){return u=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(y,f,h){var m=function(A,I){for(;!{}.hasOwnProperty.call(A,I)&&(A=d(A))!==null;);return A}(y,f);if(m){var $=Object.getOwnPropertyDescriptor(m,f);return $.get?$.get.call(arguments.length<3?y:h):$.value}},u.apply(null,arguments)}function d(y){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},d(y)}function c(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),f&&v(y,f)}function g(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!y})()}function v(y,f){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,m){return h.__proto__=m,h},v(y,f)}function b(y,f,h,m){var $=u(d(1&m?y.prototype:y),f,h);return 2&m&&typeof $=="function"?function(A){return $.apply(h,A)}:$}function x(y){return function(f){if(Array.isArray(f))return n(f)}(y)||function(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}(y)||w(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(y){var f=function(h,m){if(typeof h!="object"||!h)return h;var $=h[Symbol.toPrimitive];if($!==void 0){var A=$.call(h,m);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}(y,"string");return typeof f=="symbol"?f:f+""}function w(y,f){if(y){if(typeof y=="string")return n(y,f);var h={}.toString.call(y).slice(8,-1);return h==="Object"&&y.constructor&&(h=y.constructor.name),h==="Map"||h==="Set"?Array.from(y):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?n(y,f):void 0}}function E(y){var f=typeof Map=="function"?new Map:void 0;return E=function(h){if(h===null||!function($){try{return Function.toString.call($).indexOf("[native code]")!==-1}catch{return typeof $=="function"}}(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(f!==void 0){if(f.has(h))return f.get(h);f.set(h,m)}function m(){return r(h,arguments,d(this).constructor)}return m.prototype=Object.create(h.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v(m,h)},E(y)}var T=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(f){this._quadrantSegments=f,this._quadrantSegments===0&&(this._joinStyle=y.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=y.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),f<=0&&(this._quadrantSegments=1),this._joinStyle!==y.JOIN_ROUND&&(this._quadrantSegments=y.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(f){this._joinStyle=f}},{key:"setSimplifyFactor",value:function(f){this._simplifyFactor=f<0?0:f}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(f){this._endCapStyle=f}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(f){this._mitreLimit=f}},{key:"setSingleSided",value:function(f){this._isSingleSided=f}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=y.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=y.CAP_ROUND,this._joinStyle=y.JOIN_ROUND,this._mitreLimit=y.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=y.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var f=arguments[0];this.setQuadrantSegments(f)}else if(arguments.length===2){var h=arguments[0],m=arguments[1];this.setQuadrantSegments(h),this.setEndCapStyle(m)}else if(arguments.length===4){var $=arguments[0],A=arguments[1],I=arguments[2],N=arguments[3];this.setQuadrantSegments($),this.setEndCapStyle(A),this.setJoinStyle(I),this.setMitreLimit(N)}}}},{key:"bufferDistanceError",value:function(f){var h=Math.PI/2/f;return 1-Math.cos(h/2)}}])}();T.CAP_ROUND=1,T.CAP_FLAT=2,T.CAP_SQUARE=3,T.JOIN_ROUND=1,T.JOIN_MITRE=2,T.JOIN_BEVEL=3,T.DEFAULT_QUADRANT_SEGMENTS=8,T.DEFAULT_MITRE_LIMIT=5,T.DEFAULT_SIMPLIFY_FACTOR=.01;var O=function(y){function f(h){var m;return a(this,f),(m=i(this,f,[h])).name=Object.keys({Exception:f})[0],m}return c(f,y),s(f,[{key:"toString",value:function(){return this.message}}])}(E(Error)),D=function(y){function f(h){var m;return a(this,f),(m=i(this,f,[h])).name=Object.keys({IllegalArgumentException:f})[0],m}return c(f,y),s(f)}(O),P=function(){return s(function y(){a(this,y)},[{key:"filter",value:function(y){}}])}();function R(){}function M(){}function q(){}var H,z,Q,te,W,j,K,se,ee=function(){return s(function y(){a(this,y)},null,[{key:"equalsWithTolerance",value:function(y,f,h){return Math.abs(y-f)<=h}}])}(),oe=function(){return s(function y(f,h){a(this,y),this.low=h||0,this.high=f||0},null,[{key:"toBinaryString",value:function(y){var f,h="";for(f=2147483648;f>0;f>>>=1)h+=(y.high&f)===f?"1":"0";for(f=2147483648;f>0;f>>>=1)h+=(y.low&f)===f?"1":"0";return h}}])}();function Y(){}function Z(){}Y.NaN=NaN,Y.isNaN=function(y){return Number.isNaN(y)},Y.isInfinite=function(y){return!Number.isFinite(y)},Y.MAX_VALUE=Number.MAX_VALUE,Y.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Y.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(j=2146435072,K=new Float64Array(1),se=new Int32Array(K.buffer),Y.doubleToLongBits=function(y){K[0]=y;var f=0|se[0],h=0|se[1];return(h&j)===j&&1048575&h&&f!==0&&(f=0,h=2146959360),new oe(h,f)},Y.longBitsToDouble=function(y){return se[0]=y.low,se[1]=y.high,K[0]}):(H=1023,z=Math.log2,Q=Math.floor,te=Math.pow,W=function(){for(var y=53;y>0;y--){var f=te(2,y)-1;if(Q(z(f))+1===y)return f}return 0}(),Y.doubleToLongBits=function(y){var f,h,m,$,A,I,N,B,J;if(y<0||1/y===Number.NEGATIVE_INFINITY?(I=1<<31,y=-y):I=0,y===0)return new oe(B=I,J=0);if(y===1/0)return new oe(B=2146435072|I,J=0);if(y!=y)return new oe(B=2146959360,J=0);if($=0,J=0,(f=Q(y))>1)if(f<=W)($=Q(z(f)))<=20?(J=0,B=f<<20-$&1048575):(J=f%(h=te(2,m=$-20))<<32-m,B=f/h&1048575);else for(m=f,J=0;(m=Q(h=m/2))!==0;)$++,J>>>=1,J|=(1&B)<<31,B>>>=1,h!==m&&(B|=524288);if(N=$+H,A=f===0,f=y-f,$<52&&f!==0)for(m=0;;){if((h=2*f)>=1?(f=h-1,A?(N--,A=!1):(m<<=1,m|=1,$++)):(f=h,A?--N==0&&($++,A=!1):(m<<=1,$++)),$===20)B|=m,m=0;else if($===52){J|=m;break}if(h===1){$<20?B|=m<<20-$:$<52&&(J|=m<<52-$);break}}return B|=N<<20,new oe(B|=I,J)},Y.longBitsToDouble=function(y){var f,h,m,$,A=y.high,I=y.low,N=A&1<<31?-1:1;for(m=((2146435072&A)>>20)-H,$=0,h=1<<19,f=1;f<=20;f++)A&h&&($+=te(2,-f)),h>>>=1;for(h=1<<31,f=21;f<=52;f++)I&h&&($+=te(2,-f)),h>>>=1;if(m===-1023){if($===0)return 0*N;m=-1022}else{if(m===1024)return $===0?N/0:NaN;$+=1}return N*$*te(2,m)});var ae=function(y){function f(h){var m;return a(this,f),(m=i(this,f,[h])).name=Object.keys({RuntimeException:f})[0],m}return c(f,y),s(f)}(O),ne=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,null,[{key:"constructor_",value:function(){if(arguments.length===0)ae.constructor_.call(this);else if(arguments.length===1){var h=arguments[0];ae.constructor_.call(this,h)}}}])}(ae),U=function(){function y(){a(this,y)}return s(y,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)y.shouldNeverReachHere(null);else if(arguments.length===1){var f=arguments[0];throw new ne("Should never reach here"+(f!==null?": "+f:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var f=arguments[0];y.isTrue(f,null)}else if(arguments.length===2){var h=arguments[1];if(!arguments[0])throw h===null?new ne:new ne(h)}}},{key:"equals",value:function(){if(arguments.length===2){var f=arguments[0],h=arguments[1];y.equals(f,h,null)}else if(arguments.length===3){var m=arguments[0],$=arguments[1],A=arguments[2];if(!$.equals(m))throw new ne("Expected "+m+" but encountered "+$+(A!==null?": "+A:""))}}}])}(),X=new ArrayBuffer(8),ue=new Float64Array(X),Ce=new Int32Array(X),ie=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"getM",value:function(){return Y.NaN}},{key:"setOrdinate",value:function(f,h){switch(f){case y.X:this.x=h;break;case y.Y:this.y=h;break;case y.Z:this.setZ(h);break;default:throw new D("Invalid ordinate index: "+f)}}},{key:"equals2D",value:function(){if(arguments.length===1){var f=arguments[0];return this.x===f.x&&this.y===f.y}if(arguments.length===2){var h=arguments[0],m=arguments[1];return!!ee.equalsWithTolerance(this.x,h.x,m)&&!!ee.equalsWithTolerance(this.y,h.y,m)}}},{key:"setM",value:function(f){throw new D("Invalid ordinate index: "+y.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(f){switch(f){case y.X:return this.x;case y.Y:return this.y;case y.Z:return this.getZ()}throw new D("Invalid ordinate index: "+f)}},{key:"equals3D",value:function(f){return this.x===f.x&&this.y===f.y&&(this.getZ()===f.getZ()||Y.isNaN(this.getZ())&&Y.isNaN(f.getZ()))}},{key:"equals",value:function(f){return f instanceof y&&this.equals2D(f)}},{key:"equalInZ",value:function(f,h){return ee.equalsWithTolerance(this.getZ(),f.getZ(),h)}},{key:"setX",value:function(f){this.x=f}},{key:"compareTo",value:function(f){var h=f;return this.x<h.x?-1:this.x>h.x?1:this.y<h.y?-1:this.y>h.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(f){this.z=f}},{key:"clone",value:function(){try{return null}catch(f){if(f instanceof CloneNotSupportedException)return U.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw f}}},{key:"copy",value:function(){return new y(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(f){var h=this.x-f.x,m=this.y-f.y,$=this.getZ()-f.getZ();return Math.sqrt(h*h+m*m+$*$)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(f){this.y=f}},{key:"distance",value:function(f){var h=this.x-f.x,m=this.y-f.y;return Math.sqrt(h*h+m*m)}},{key:"hashCode",value:function(){var f=17;return f=37*(f=37*f+y.hashCode(this.x))+y.hashCode(this.y)}},{key:"setCoordinate",value:function(f){this.x=f.x,this.y=f.y,this.z=f.getZ()}},{key:"interfaces_",get:function(){return[R,M,q]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)y.constructor_.call(this,0,0);else if(arguments.length===1){var f=arguments[0];y.constructor_.call(this,f.x,f.y,f.getZ())}else if(arguments.length===2){var h=arguments[0],m=arguments[1];y.constructor_.call(this,h,m,y.NULL_ORDINATE)}else if(arguments.length===3){var $=arguments[0],A=arguments[1],I=arguments[2];this.x=$,this.y=A,this.z=I}}},{key:"hashCode",value:function(f){return ue[0]=f,Ce[0]^Ce[1]}}])}(),_e=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"compare",value:function(f,h){var m=y.compare(f.x,h.x);if(m!==0)return m;var $=y.compare(f.y,h.y);return $!==0?$:this._dimensionsToTest<=2?0:y.compare(f.getZ(),h.getZ())}},{key:"interfaces_",get:function(){return[Z]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)y.constructor_.call(this,2);else if(arguments.length===1){var f=arguments[0];if(f!==2&&f!==3)throw new D("only 2 or 3 dimensions may be specified");this._dimensionsToTest=f}}},{key:"compare",value:function(f,h){return f<h?-1:f>h?1:Y.isNaN(f)?Y.isNaN(h)?0:-1:Y.isNaN(h)?1:0}}])}();ie.DimensionalComparator=_e,ie.NULL_ORDINATE=Y.NaN,ie.X=0,ie.Y=1,ie.Z=2,ie.M=3;var xe=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(f){if(!(f instanceof y))return!1;var h=f;return this.isNull()?h.isNull():this._maxx===h.getMaxX()&&this._maxy===h.getMaxY()&&this._minx===h.getMinX()&&this._miny===h.getMinY()}},{key:"intersection",value:function(f){if(this.isNull()||f.isNull()||!this.intersects(f))return new y;var h=this._minx>f._minx?this._minx:f._minx,m=this._miny>f._miny?this._miny:f._miny;return new y(h,this._maxx<f._maxx?this._maxx:f._maxx,m,this._maxy<f._maxy?this._maxy:f._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof ie){var f=arguments[0];return this.covers(f.x,f.y)}if(arguments[0]instanceof y){var h=arguments[0];return!this.isNull()&&!h.isNull()&&h.getMinX()>=this._minx&&h.getMaxX()<=this._maxx&&h.getMinY()>=this._miny&&h.getMaxY()<=this._maxy}}else if(arguments.length===2){var m=arguments[0],$=arguments[1];return!this.isNull()&&m>=this._minx&&m<=this._maxx&&$>=this._miny&&$<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof y){var f=arguments[0];return!this.isNull()&&!f.isNull()&&!(f._minx>this._maxx||f._maxx<this._minx||f._miny>this._maxy||f._maxy<this._miny)}if(arguments[0]instanceof ie){var h=arguments[0];return this.intersects(h.x,h.y)}}else if(arguments.length===2){if(arguments[0]instanceof ie&&arguments[1]instanceof ie){var m=arguments[0],$=arguments[1];return!this.isNull()&&!((m.x<$.x?m.x:$.x)>this._maxx)&&!((m.x>$.x?m.x:$.x)<this._minx)&&!((m.y<$.y?m.y:$.y)>this._maxy)&&!((m.y>$.y?m.y:$.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var A=arguments[0],I=arguments[1];return!this.isNull()&&!(A>this._maxx||A<this._minx||I>this._maxy||I<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var f=this.getWidth(),h=this.getHeight();return Math.sqrt(f*f+h*h)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof ie){var f=arguments[0];this.expandToInclude(f.x,f.y)}else if(arguments[0]instanceof y){var h=arguments[0];if(h.isNull())return null;this.isNull()?(this._minx=h.getMinX(),this._maxx=h.getMaxX(),this._miny=h.getMinY(),this._maxy=h.getMaxY()):(h._minx<this._minx&&(this._minx=h._minx),h._maxx>this._maxx&&(this._maxx=h._maxx),h._miny<this._miny&&(this._miny=h._miny),h._maxy>this._maxy&&(this._maxy=h._maxy))}}else if(arguments.length===2){var m=arguments[0],$=arguments[1];this.isNull()?(this._minx=m,this._maxx=m,this._miny=$,this._maxy=$):(m<this._minx&&(this._minx=m),m>this._maxx&&(this._maxx=m),$<this._miny&&(this._miny=$),$>this._maxy&&(this._maxy=$))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var f=this.getWidth(),h=this.getHeight();return f<h?f:h}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(f){var h=f;return this.isNull()?h.isNull()?0:-1:h.isNull()?1:this._minx<h._minx?-1:this._minx>h._minx?1:this._miny<h._miny?-1:this._miny>h._miny?1:this._maxx<h._maxx?-1:this._maxx>h._maxx?1:this._maxy<h._maxy?-1:this._maxy>h._maxy?1:0}},{key:"translate",value:function(f,h){if(this.isNull())return null;this.init(this.getMinX()+f,this.getMaxX()+f,this.getMinY()+h,this.getMaxY()+h)}},{key:"copy",value:function(){return new y(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(f){return!(!this.isNull()&&!f.isNull())||f._minx>this._maxx||f._maxx<this._minx||f._miny>this._maxy||f._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var f=this.getWidth(),h=this.getHeight();return f>h?f:h}},{key:"expandBy",value:function(){if(arguments.length===1){var f=arguments[0];this.expandBy(f,f)}else if(arguments.length===2){var h=arguments[0],m=arguments[1];if(this.isNull())return null;this._minx-=h,this._maxx+=h,this._miny-=m,this._maxy+=m,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof y){var f=arguments[0];return this.covers(f)}if(arguments[0]instanceof ie){var h=arguments[0];return this.covers(h)}}else if(arguments.length===2){var m=arguments[0],$=arguments[1];return this.covers(m,$)}}},{key:"centre",value:function(){return this.isNull()?null:new ie((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof ie){var f=arguments[0];this.init(f.x,f.x,f.y,f.y)}else if(arguments[0]instanceof y){var h=arguments[0];this._minx=h._minx,this._maxx=h._maxx,this._miny=h._miny,this._maxy=h._maxy}}else if(arguments.length===2){var m=arguments[0],$=arguments[1];this.init(m.x,$.x,m.y,$.y)}else if(arguments.length===4){var A=arguments[0],I=arguments[1],N=arguments[2],B=arguments[3];A<I?(this._minx=A,this._maxx=I):(this._minx=I,this._maxx=A),N<B?(this._miny=N,this._maxy=B):(this._miny=B,this._maxy=N)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(f){if(this.intersects(f))return 0;var h=0;this._maxx<f._minx?h=f._minx-this._maxx:this._minx>f._maxx&&(h=this._minx-f._maxx);var m=0;return this._maxy<f._miny?m=f._miny-this._maxy:this._miny>f._maxy&&(m=this._miny-f._maxy),h===0?m:m===0?h:Math.sqrt(h*h+m*m)}},{key:"hashCode",value:function(){var f=17;return f=37*(f=37*(f=37*(f=37*f+ie.hashCode(this._minx))+ie.hashCode(this._maxx))+ie.hashCode(this._miny))+ie.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[R,q]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof ie){var f=arguments[0];this.init(f.x,f.x,f.y,f.y)}else if(arguments[0]instanceof y){var h=arguments[0];this.init(h)}}else if(arguments.length===2){var m=arguments[0],$=arguments[1];this.init(m.x,$.x,m.y,$.y)}else if(arguments.length===4){var A=arguments[0],I=arguments[1],N=arguments[2],B=arguments[3];this.init(A,I,N,B)}}},{key:"intersects",value:function(){if(arguments.length===3){var f=arguments[0],h=arguments[1],m=arguments[2];return m.x>=(f.x<h.x?f.x:h.x)&&m.x<=(f.x>h.x?f.x:h.x)&&m.y>=(f.y<h.y?f.y:h.y)&&m.y<=(f.y>h.y?f.y:h.y)}if(arguments.length===4){var $=arguments[0],A=arguments[1],I=arguments[2],N=arguments[3],B=Math.min(I.x,N.x),J=Math.max(I.x,N.x),le=Math.min($.x,A.x),de=Math.max($.x,A.x);return!(le>J)&&!(de<B)&&(B=Math.min(I.y,N.y),J=Math.max(I.y,N.y),le=Math.min($.y,A.y),de=Math.max($.y,A.y),!(le>J)&&!(de<B))}}}])}(),ve=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===y.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(f){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(f){return this===f||this.equalsExact(f,0)}},{key:"geometryChanged",value:function(){this.apply(y.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(f){return f!==null&&this.norm().equalsExact(f.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var f;if(arguments.length===1){var h=arguments[0];return f=h,this.getTypeCode()!==f.getTypeCode()?this.getTypeCode()-f.getTypeCode():this.isEmpty()&&f.isEmpty()?0:this.isEmpty()?-1:f.isEmpty()?1:this.compareToSameClass(h)}if(arguments.length===2){var m=arguments[0],$=arguments[1];return f=m,this.getTypeCode()!==f.getTypeCode()?this.getTypeCode()-f.getTypeCode():this.isEmpty()&&f.isEmpty()?0:this.isEmpty()?-1:f.isEmpty()?1:this.compareToSameClass(m,$)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(f){if(f.getTypeCode()===y.TYPECODE_GEOMETRYCOLLECTION)throw new D("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(f,h,m){return m===0?f.equals(h):f.distance(h)<=m}},{key:"norm",value:function(){var f=this.copy();return f.normalize(),f}},{key:"reverse",value:function(){var f=this.reverseInternal();return this.envelope!=null&&(f.envelope=this.envelope.copy()),f.setSRID(this.getSRID()),f}},{key:"copy",value:function(){var f=this.copyInternal();return f.envelope=this._envelope==null?null:this._envelope.copy(),f._SRID=this._SRID,f._userData=this._userData,f}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new xe(this._envelope)}},{key:"setSRID",value:function(f){this._SRID=f}},{key:"setUserData",value:function(f){this._userData=f}},{key:"compare",value:function(f,h){for(var m=f.iterator(),$=h.iterator();m.hasNext()&&$.hasNext();){var A=m.next(),I=$.next(),N=A.compareTo(I);if(N!==0)return N}return m.hasNext()?1:$.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(f){return this.getClass()===f.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===y.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===y.TYPECODE_MULTIPOINT||this.getTypeCode()===y.TYPECODE_MULTILINESTRING||this.getTypeCode()===y.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[M,R,q]}},{key:"getClass",value:function(){return y}}],[{key:"hasNonEmptyElements",value:function(f){for(var h=0;h<f.length;h++)if(!f[h].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(f){for(var h=0;h<f.length;h++)if(f[h]===null)return!0;return!1}}])}();ve.constructor_=function(y){y&&(this._envelope=null,this._userData=null,this._factory=y,this._SRID=y.getSRID())},ve.TYPECODE_POINT=0,ve.TYPECODE_MULTIPOINT=1,ve.TYPECODE_LINESTRING=2,ve.TYPECODE_LINEARRING=3,ve.TYPECODE_MULTILINESTRING=4,ve.TYPECODE_POLYGON=5,ve.TYPECODE_MULTIPOLYGON=6,ve.TYPECODE_GEOMETRYCOLLECTION=7,ve.TYPENAME_POINT="Point",ve.TYPENAME_MULTIPOINT="MultiPoint",ve.TYPENAME_LINESTRING="LineString",ve.TYPENAME_LINEARRING="LinearRing",ve.TYPENAME_MULTILINESTRING="MultiLineString",ve.TYPENAME_POLYGON="Polygon",ve.TYPENAME_MULTIPOLYGON="MultiPolygon",ve.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",ve.geometryChangedFilter={get interfaces_(){return[P]},filter:function(y){y.geometryChangedAction()}};var G=function(){function y(){a(this,y)}return s(y,null,[{key:"toLocationSymbol",value:function(f){switch(f){case y.EXTERIOR:return"e";case y.BOUNDARY:return"b";case y.INTERIOR:return"i";case y.NONE:return"-"}throw new D("Unknown location value: "+f)}}])}();G.INTERIOR=0,G.BOUNDARY=1,G.EXTERIOR=2,G.NONE=-1;var kt=function(){return s(function y(){a(this,y)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),pt=function(y){function f(h){var m;return a(this,f),(m=i(this,f,[h])).name=Object.keys({NoSuchElementException:f})[0],m}return c(f,y),s(f)}(O),Rt=function(y){function f(h){var m;return a(this,f),(m=i(this,f,[h])).name=Object.keys({UnsupportedOperationException:f})[0],m}return c(f,y),s(f)}(O),Jt=function(y){function f(){return a(this,f),i(this,f,arguments)}return c(f,y),s(f,[{key:"contains",value:function(){}}])}(kt),Cn=function(y){function f(h){var m;return a(this,f),(m=i(this,f)).map=new Map,h instanceof kt&&m.addAll(h),m}return c(f,y),s(f,[{key:"contains",value:function(h){var m=h.hashCode?h.hashCode():h;return!!this.map.has(m)}},{key:"add",value:function(h){var m=h.hashCode?h.hashCode():h;return!this.map.has(m)&&!!this.map.set(m,h)}},{key:"addAll",value:function(h){var m,$=l(h);try{for($.s();!(m=$.n()).done;){var A=m.value;this.add(A)}}catch(I){$.e(I)}finally{$.f()}return!0}},{key:"remove",value:function(){throw new Rt}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new wa(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(Jt),wa=function(){return s(function y(f){a(this,y),this.iterator=f.values();var h=this.iterator.next(),m=h.done,$=h.value;this.done=m,this.value=$},[{key:"next",value:function(){if(this.done)throw new pt;var y=this.value,f=this.iterator.next(),h=f.done,m=f.value;return this.done=h,this.value=m,y}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new Rt}}])}(),Se=function(){function y(){a(this,y)}return s(y,null,[{key:"opposite",value:function(f){return f===y.LEFT?y.RIGHT:f===y.RIGHT?y.LEFT:f}}])}();Se.ON=0,Se.LEFT=1,Se.RIGHT=2;var Wl=function(y){function f(h){var m;return a(this,f),(m=i(this,f,[h])).name=Object.keys({EmptyStackException:f})[0],m}return c(f,y),s(f)}(O),Ls=function(y){function f(h){var m;return a(this,f),(m=i(this,f,[h])).name=Object.keys({IndexOutOfBoundsException:f})[0],m}return c(f,y),s(f)}(O),Ja=function(y){function f(){return a(this,f),i(this,f,arguments)}return c(f,y),s(f,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(kt),rd=function(y){function f(){var h;return a(this,f),(h=i(this,f)).array=[],h}return c(f,y),s(f,[{key:"add",value:function(h){return this.array.push(h),!0}},{key:"get",value:function(h){if(h<0||h>=this.size())throw new Ls;return this.array[h]}},{key:"push",value:function(h){return this.array.push(h),h}},{key:"pop",value:function(){if(this.array.length===0)throw new Wl;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new Wl;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(h){return this.array.indexOf(h)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(Ja);function tt(y,f){return y.interfaces_&&y.interfaces_.indexOf(f)>-1}var Uo=function(){return s(function y(f){a(this,y),this.str=f},[{key:"append",value:function(y){this.str+=y}},{key:"setCharAt",value:function(y,f){this.str=this.str.substr(0,y)+f+this.str.substr(y+1)}},{key:"toString",value:function(){return this.str}}])}(),Ka=function(){function y(f){a(this,y),this.value=f}return s(y,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(f){return this.value<f?-1:this.value>f?1:0}}],[{key:"compare",value:function(f,h){return f<h?-1:f>h?1:0}},{key:"isNan",value:function(f){return Number.isNaN(f)}},{key:"valueOf",value:function(f){return new y(f)}}])}(),Ms=function(){return s(function y(){a(this,y)},null,[{key:"isWhitespace",value:function(y){return y<=32&&y>=0||y===127}},{key:"toUpperCase",value:function(y){return y.toUpperCase()}}])}(),Je=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"le",value:function(f){return this._hi<f._hi||this._hi===f._hi&&this._lo<=f._lo}},{key:"extractSignificantDigits",value:function(f,h){var m=this.abs(),$=y.magnitude(m._hi),A=y.TEN.pow($);(m=m.divide(A)).gt(y.TEN)?(m=m.divide(y.TEN),$+=1):m.lt(y.ONE)&&(m=m.multiply(y.TEN),$-=1);for(var I=$+1,N=new Uo,B=y.MAX_PRINT_DIGITS-1,J=0;J<=B;J++){f&&J===I&&N.append(".");var le=Math.trunc(m._hi);if(le<0)break;var de=!1,be=0;le>9?(de=!0,be="9"):be="0"+le,N.append(be),m=m.subtract(y.valueOf(le)).multiply(y.TEN),de&&m.selfAdd(y.TEN);var Pe=!0,Ue=y.magnitude(m._hi);if(Ue<0&&Math.abs(Ue)>=B-J&&(Pe=!1),!Pe)break}return h[0]=$,N.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof y){var f=arguments[0];return this.add(f.negate())}if(typeof arguments[0]=="number"){var h=arguments[0];return this.add(-h)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof y){var f=arguments[0];return this._hi===f._hi&&this._lo===f._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof y){var f=arguments[0];return this.isNaN()?this:this.selfAdd(-f._hi,-f._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.isNaN()?this:this.selfAdd(-h,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(f){return this.le(f)?this:f}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof y){var f=arguments[0];return this.selfDivide(f._hi,f._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfDivide(h,0)}}else if(arguments.length===2){var m,$,A,I,N=arguments[0],B=arguments[1],J=null,le=null,de=null,be=null;return A=this._hi/N,be=(J=(de=y.SPLIT*A)-(J=de-A))*(le=(be=y.SPLIT*N)-(le=be-N))-(I=A*N)+J*($=N-le)+(m=A-J)*le+m*$,be=A+(de=(this._hi-I-be+this._lo-A*B)/N),this._hi=be,this._lo=A-be+de,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof y){var f,h,m,$,A=arguments[0],I=null,N=null,B=null,J=null;return f=(m=this._hi/A._hi)-(I=(B=y.SPLIT*m)-(I=B-m)),J=I*(N=(J=y.SPLIT*A._hi)-(N=J-A._hi))-($=m*A._hi)+I*(h=A._hi-N)+f*N+f*h,new y(J=m+(B=(this._hi-$-J+this._lo-m*A._lo)/A._hi),m-J+B)}if(typeof arguments[0]=="number"){var le=arguments[0];return Y.isNaN(le)?y.createNaN():y.copy(this).selfDivide(le,0)}}},{key:"ge",value:function(f){return this._hi>f._hi||this._hi===f._hi&&this._lo>=f._lo}},{key:"pow",value:function(f){if(f===0)return y.valueOf(1);var h=new y(this),m=y.valueOf(1),$=Math.abs(f);if($>1)for(;$>0;)$%2==1&&m.selfMultiply(h),($/=2)>0&&(h=h.sqr());else m=h;return f<0?m.reciprocal():m}},{key:"ceil",value:function(){if(this.isNaN())return y.NaN;var f=Math.ceil(this._hi),h=0;return f===this._hi&&(h=Math.ceil(this._lo)),new y(f,h)}},{key:"compareTo",value:function(f){var h=f;return this._hi<h._hi?-1:this._hi>h._hi?1:this._lo<h._lo?-1:this._lo>h._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof y){var f=arguments[0];return this.init(f),this}if(typeof arguments[0]=="number"){var h=arguments[0];return this.init(h),this}}},{key:"max",value:function(f){return this.ge(f)?this:f}},{key:"sqrt",value:function(){if(this.isZero())return y.valueOf(0);if(this.isNegative())return y.NaN;var f=1/Math.sqrt(this._hi),h=this._hi*f,m=y.valueOf(h),$=this.subtract(m.sqr())._hi*(.5*f);return m.add($)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof y){var f=arguments[0];return this.selfAdd(f._hi,f._lo)}if(typeof arguments[0]=="number"){var h,m,$,A,I,N=arguments[0],B=null;return B=($=this._hi+N)-(A=$-this._hi),m=(I=(B=N-A+(this._hi-B))+this._lo)+($-(h=$+I)),this._hi=h+m,this._lo=m+(h-this._hi),this}}else if(arguments.length===2){var J,le,de,be,Pe=arguments[0],Ue=arguments[1],Ye=null,Et=null,ct=null;de=this._hi+Pe,le=this._lo+Ue,Et=de-(ct=de-this._hi),Ye=le-(be=le-this._lo);var Wt=(J=de+(ct=(Et=Pe-ct+(this._hi-Et))+le))+(ct=(Ye=Ue-be+(this._lo-Ye))+(ct+(de-J))),mn=ct+(J-Wt);return this._hi=Wt,this._lo=mn,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof y){var f=arguments[0];return this.selfMultiply(f._hi,f._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfMultiply(h,0)}}else if(arguments.length===2){var m,$,A=arguments[0],I=arguments[1],N=null,B=null,J=null,le=null;N=(J=y.SPLIT*this._hi)-this._hi,le=y.SPLIT*A,N=J-N,m=this._hi-N,B=le-A;var de=(J=this._hi*A)+(le=N*(B=le-B)-J+N*($=A-B)+m*B+m*$+(this._hi*I+this._lo*A)),be=le+(N=J-de);return this._hi=de,this._lo=be,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return y.NaN;var f=Math.floor(this._hi),h=0;return f===this._hi&&(h=Math.floor(this._lo)),new y(f,h)}},{key:"negate",value:function(){return this.isNaN()?this:new y(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(f){if(f instanceof CloneNotSupportedException)return null;throw f}}},{key:"multiply",value:function(){if(arguments[0]instanceof y){var f=arguments[0];return f.isNaN()?y.createNaN():y.copy(this).selfMultiply(f)}if(typeof arguments[0]=="number"){var h=arguments[0];return Y.isNaN(h)?y.createNaN():y.copy(this).selfMultiply(h,0)}}},{key:"isNaN",value:function(){return Y.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var f=y.magnitude(this._hi);return f>=-3&&f<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var f=this.getSpecialNumberString();if(f!==null)return f;var h=new Array(1).fill(null),m=this.extractSignificantDigits(!0,h),$=h[0]+1,A=m;if(m.charAt(0)===".")A="0"+m;else if($<0)A="0."+y.stringOfChar("0",-$)+m;else if(m.indexOf(".")===-1){var I=$-m.length;A=m+y.stringOfChar("0",I)+".0"}return this.isNegative()?"-"+A:A}},{key:"reciprocal",value:function(){var f,h,m,$,A=null,I=null,N=null,B=null;f=(m=1/this._hi)-(A=(N=y.SPLIT*m)-(A=N-m)),I=(B=y.SPLIT*this._hi)-this._hi;var J=m+(N=(1-($=m*this._hi)-(B=A*(I=B-I)-$+A*(h=this._hi-I)+f*I+f*h)-m*this._lo)/this._hi);return new y(J,m-J+N)}},{key:"toSciNotation",value:function(){if(this.isZero())return y.SCI_NOT_ZERO;var f=this.getSpecialNumberString();if(f!==null)return f;var h=new Array(1).fill(null),m=this.extractSignificantDigits(!1,h),$=y.SCI_NOT_EXPONENT_CHAR+h[0];if(m.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+m);var A="";m.length>1&&(A=m.substring(1));var I=m.charAt(0)+"."+A;return this.isNegative()?"-"+I+$:I+$}},{key:"abs",value:function(){return this.isNaN()?y.NaN:this.isNegative()?this.negate():new y(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(f){return this._hi<f._hi||this._hi===f._hi&&this._lo<f._lo}},{key:"add",value:function(){if(arguments[0]instanceof y){var f=arguments[0];return y.copy(this).selfAdd(f)}if(typeof arguments[0]=="number"){var h=arguments[0];return y.copy(this).selfAdd(h)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var f=arguments[0];this._hi=f,this._lo=0}else if(arguments[0]instanceof y){var h=arguments[0];this._hi=h._hi,this._lo=h._lo}}else if(arguments.length===2){var m=arguments[0],$=arguments[1];this._hi=m,this._lo=$}}},{key:"gt",value:function(f){return this._hi>f._hi||this._hi===f._hi&&this._lo>f._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?y.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[q,R,M]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var f=arguments[0];this.init(f)}else if(arguments[0]instanceof y){var h=arguments[0];this.init(h)}else if(typeof arguments[0]=="string"){var m=arguments[0];y.constructor_.call(this,y.parse(m))}}else if(arguments.length===2){var $=arguments[0],A=arguments[1];this.init($,A)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var f=arguments[0],h=arguments[1],m=arguments[2],$=arguments[3];return y.determinant(y.valueOf(f),y.valueOf(h),y.valueOf(m),y.valueOf($))}if(arguments[3]instanceof y&&arguments[2]instanceof y&&arguments[0]instanceof y&&arguments[1]instanceof y){var A=arguments[1],I=arguments[2],N=arguments[3];return arguments[0].multiply(N).selfSubtract(A.multiply(I))}}},{key:"sqr",value:function(f){return y.valueOf(f).selfMultiply(f)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var f=arguments[0];return y.parse(f)}if(typeof arguments[0]=="number")return new y(arguments[0])}},{key:"sqrt",value:function(f){return y.valueOf(f).sqrt()}},{key:"parse",value:function(f){for(var h=0,m=f.length;Ms.isWhitespace(f.charAt(h));)h++;var $=!1;if(h<m){var A=f.charAt(h);A!=="-"&&A!=="+"||(h++,A==="-"&&($=!0))}for(var I=new y,N=0,B=0,J=0,le=!1;!(h>=m);){var de=f.charAt(h);if(h++,Ms.isDigit(de)){var be=de-"0";I.selfMultiply(y.TEN),I.selfAdd(be),N++}else{if(de!=="."){if(de==="e"||de==="E"){var Pe=f.substring(h);try{J=Ka.parseInt(Pe)}catch(Wt){throw Wt instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+Pe+" in string "+f):Wt}break}throw new NumberFormatException("Unexpected character '"+de+"' at position "+h+" in string "+f)}B=N,le=!0}}var Ue=I;le||(B=N);var Ye=N-B-J;if(Ye===0)Ue=I;else if(Ye>0){var Et=y.TEN.pow(Ye);Ue=I.divide(Et)}else if(Ye<0){var ct=y.TEN.pow(-Ye);Ue=I.multiply(ct)}return $?Ue.negate():Ue}},{key:"createNaN",value:function(){return new y(Y.NaN,Y.NaN)}},{key:"copy",value:function(f){return new y(f)}},{key:"magnitude",value:function(f){var h=Math.abs(f),m=Math.log(h)/Math.log(10),$=Math.trunc(Math.floor(m));return 10*Math.pow(10,$)<=h&&($+=1),$}},{key:"stringOfChar",value:function(f,h){for(var m=new Uo,$=0;$<h;$++)m.append(f);return m.toString()}}])}();Je.PI=new Je(3.141592653589793,12246467991473532e-32),Je.TWO_PI=new Je(6.283185307179586,24492935982947064e-32),Je.PI_2=new Je(1.5707963267948966,6123233995736766e-32),Je.E=new Je(2.718281828459045,14456468917292502e-32),Je.NaN=new Je(Y.NaN,Y.NaN),Je.EPS=123259516440783e-46,Je.SPLIT=134217729,Je.MAX_PRINT_DIGITS=32,Je.TEN=Je.valueOf(10),Je.ONE=Je.valueOf(1),Je.SCI_NOT_EXPONENT_CHAR="E",Je.SCI_NOT_ZERO="0.0E0";var od=function(){function y(){a(this,y)}return s(y,null,[{key:"orientationIndex",value:function(f,h,m){var $=y.orientationIndexFilter(f,h,m);if($<=1)return $;var A=Je.valueOf(h.x).selfAdd(-f.x),I=Je.valueOf(h.y).selfAdd(-f.y),N=Je.valueOf(m.x).selfAdd(-h.x),B=Je.valueOf(m.y).selfAdd(-h.y);return A.selfMultiply(B).selfSubtract(I.selfMultiply(N)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof Je&&arguments[2]instanceof Je&&arguments[0]instanceof Je&&arguments[1]instanceof Je){var f=arguments[1],h=arguments[2],m=arguments[3];return arguments[0].multiply(m).selfSubtract(f.multiply(h)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var $=arguments[0],A=arguments[1],I=arguments[2],N=arguments[3],B=Je.valueOf($),J=Je.valueOf(A),le=Je.valueOf(I),de=Je.valueOf(N);return B.multiply(de).selfSubtract(J.multiply(le)).signum()}}},{key:"intersection",value:function(f,h,m,$){var A=new Je(f.y).selfSubtract(h.y),I=new Je(h.x).selfSubtract(f.x),N=new Je(f.x).selfMultiply(h.y).selfSubtract(new Je(h.x).selfMultiply(f.y)),B=new Je(m.y).selfSubtract($.y),J=new Je($.x).selfSubtract(m.x),le=new Je(m.x).selfMultiply($.y).selfSubtract(new Je($.x).selfMultiply(m.y)),de=I.multiply(le).selfSubtract(J.multiply(N)),be=B.multiply(N).selfSubtract(A.multiply(le)),Pe=A.multiply(J).selfSubtract(B.multiply(I)),Ue=de.selfDivide(Pe).doubleValue(),Ye=be.selfDivide(Pe).doubleValue();return Y.isNaN(Ue)||Y.isInfinite(Ue)||Y.isNaN(Ye)||Y.isInfinite(Ye)?null:new ie(Ue,Ye)}},{key:"orientationIndexFilter",value:function(f,h,m){var $=null,A=(f.x-m.x)*(h.y-m.y),I=(f.y-m.y)*(h.x-m.x),N=A-I;if(A>0){if(I<=0)return y.signum(N);$=A+I}else{if(!(A<0)||I>=0)return y.signum(N);$=-A-I}var B=y.DP_SAFE_EPSILON*$;return N>=B||-N>=B?y.signum(N):2}},{key:"signum",value:function(f){return f>0?1:f<0?-1:0}}])}();od.DP_SAFE_EPSILON=1e-15;var yt=function(){return s(function y(){a(this,y)},[{key:"getM",value:function(y){if(this.hasM()){var f=this.getDimension()-this.getMeasures();return this.getOrdinate(y,f)}return Y.NaN}},{key:"setOrdinate",value:function(y,f,h){}},{key:"getZ",value:function(y){return this.hasZ()?this.getOrdinate(y,2):Y.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(y,f){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(y){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(y){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(y){}},{key:"copy",value:function(){}},{key:"getY",value:function(y){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[M]}}])}();yt.X=0,yt.Y=1,yt.Z=2,yt.M=3;var Qe=function(){function y(){a(this,y)}return s(y,null,[{key:"index",value:function(f,h,m){return od.orientationIndex(f,h,m)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var f=arguments[0],h=f.length-1;if(h<3)throw new D("Ring has fewer than 4 points, so orientation cannot be determined");for(var m=f[0],$=0,A=1;A<=h;A++){var I=f[A];I.y>m.y&&(m=I,$=A)}var N=$;do(N-=1)<0&&(N=h);while(f[N].equals2D(m)&&N!==$);var B=$;do B=(B+1)%h;while(f[B].equals2D(m)&&B!==$);var J=f[N],le=f[B];if(J.equals2D(m)||le.equals2D(m)||J.equals2D(le))return!1;var de=y.index(J,m,le);return de===0?J.x>le.x:de>0}if(tt(arguments[0],yt)){var be=arguments[0],Pe=be.size()-1;if(Pe<3)throw new D("Ring has fewer than 4 points, so orientation cannot be determined");for(var Ue=be.getCoordinate(0),Ye=0,Et=1;Et<=Pe;Et++){var ct=be.getCoordinate(Et);ct.y>Ue.y&&(Ue=ct,Ye=Et)}var Wt=null,mn=Ye;do(mn-=1)<0&&(mn=Pe),Wt=be.getCoordinate(mn);while(Wt.equals2D(Ue)&&mn!==Ye);var Qn=null,Gs=Ye;do Gs=(Gs+1)%Pe,Qn=be.getCoordinate(Gs);while(Qn.equals2D(Ue)&&Gs!==Ye);if(Wt.equals2D(Ue)||Qn.equals2D(Ue)||Wt.equals2D(Qn))return!1;var dc=y.index(Wt,Ue,Qn);return dc===0?Wt.x>Qn.x:dc>0}}}])}();Qe.CLOCKWISE=-1,Qe.RIGHT=Qe.CLOCKWISE,Qe.COUNTERCLOCKWISE=1,Qe.LEFT=Qe.COUNTERCLOCKWISE,Qe.COLLINEAR=0,Qe.STRAIGHT=Qe.COLLINEAR;var ES=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(y,f){var h=this.getRightmostSideOfSegment(y,f);return h<0&&(h=this.getRightmostSideOfSegment(y,f-1)),h<0&&(this._minCoord=null,this.checkForRightmostCoordinate(y)),h}},{key:"findRightmostEdgeAtVertex",value:function(){var y=this._minDe.getEdge().getCoordinates();U.isTrue(this._minIndex>0&&this._minIndex<y.length,"rightmost point expected to be interior vertex of edge");var f=y[this._minIndex-1],h=y[this._minIndex+1],m=Qe.index(this._minCoord,h,f),$=!1;(f.y<this._minCoord.y&&h.y<this._minCoord.y&&m===Qe.COUNTERCLOCKWISE||f.y>this._minCoord.y&&h.y>this._minCoord.y&&m===Qe.CLOCKWISE)&&($=!0),$&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(y,f){var h=y.getEdge().getCoordinates();if(f<0||f+1>=h.length||h[f].y===h[f+1].y)return-1;var m=Se.LEFT;return h[f].y<h[f+1].y&&(m=Se.RIGHT),m}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(y){for(var f=y.getEdge().getCoordinates(),h=0;h<f.length-1;h++)(this._minCoord===null||f[h].x>this._minCoord.x)&&(this._minDe=y,this._minIndex=h,this._minCoord=f[h])}},{key:"findRightmostEdgeAtNode",value:function(){var y=this._minDe.getNode().getEdges();this._minDe=y.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(y){for(var f=y.iterator();f.hasNext();){var h=f.next();h.isForward()&&this.checkForRightmostCoordinate(h)}U.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Se.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),Kr=function(y){function f(h,m){var $;return a(this,f),($=i(this,f,[m?h+" [ "+m+" ]":h])).pt=m?new ie(m):void 0,$.name=Object.keys({TopologyException:f})[0],$}return c(f,y),s(f,[{key:"getCoordinate",value:function(){return this.pt}}])}(ae),sy=function(){return s(function y(){a(this,y),this.array=[]},[{key:"addLast",value:function(y){this.array.push(y)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),Ke=function(y){function f(h){var m;return a(this,f),(m=i(this,f)).array=[],h instanceof kt&&m.addAll(h),m}return c(f,y),s(f,[{key:"interfaces_",get:function(){return[Ja,kt]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(h){return arguments.length===1?this.array.push(h):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(h){var m,$=l(h);try{for($.s();!(m=$.n()).done;){var A=m.value;this.array.push(A)}}catch(I){$.e(I)}finally{$.f()}}},{key:"set",value:function(h,m){var $=this.array[h];return this.array[h]=m,$}},{key:"iterator",value:function(){return new SS(this)}},{key:"get",value:function(h){if(h<0||h>=this.size())throw new Ls;return this.array[h]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(h){h?this.array.sort(function(m,$){return h.compare(m,$)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(h){for(var m=0,$=this.array.length;m<$;m++)if(this.array[m]===h)return!!this.array.splice(m,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(Ja),SS=function(){return s(function y(f){a(this,y),this.arrayList=f,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new pt;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(y){return this.arrayList.set(this.position-1,y)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),Zf=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var y=this._dirEdgeList.iterator();y.hasNext();)y.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(y){for(var f=null,h=y.getEdges().iterator();h.hasNext();){var m=h.next();if(m.isVisited()||m.getSym().isVisited()){f=m;break}}if(f===null)throw new Kr("unable to find edge to compute depths at "+y.getCoordinate());y.getEdges().computeDepths(f);for(var $=y.getEdges().iterator();$.hasNext();){var A=$.next();A.setVisited(!0),this.copySymDepths(A)}}},{key:"computeDepth",value:function(y){this.clearVisitedEdges();var f=this._finder.getEdge();f.getNode(),f.getLabel(),f.setEdgeDepths(Se.RIGHT,y),this.copySymDepths(f),this.computeDepths(f)}},{key:"create",value:function(y){this.addReachable(y),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var y=this._dirEdgeList.iterator();y.hasNext();){var f=y.next();f.getDepth(Se.RIGHT)>=1&&f.getDepth(Se.LEFT)<=0&&!f.isInteriorAreaEdge()&&f.setInResult(!0)}}},{key:"computeDepths",value:function(y){var f=new Cn,h=new sy,m=y.getNode();for(h.addLast(m),f.add(m),y.setVisited(!0);!h.isEmpty();){var $=h.removeFirst();f.add($),this.computeNodeDepth($);for(var A=$.getEdges().iterator();A.hasNext();){var I=A.next().getSym();if(!I.isVisited()){var N=I.getNode();f.contains(N)||(h.addLast(N),f.add(N))}}}}},{key:"compareTo",value:function(y){var f=y;return this._rightMostCoord.x<f._rightMostCoord.x?-1:this._rightMostCoord.x>f._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var y=new xe,f=this._dirEdgeList.iterator();f.hasNext();)for(var h=f.next().getEdge().getCoordinates(),m=0;m<h.length-1;m++)y.expandToInclude(h[m]);this._env=y}return this._env}},{key:"addReachable",value:function(y){var f=new rd;for(f.add(y);!f.empty();){var h=f.pop();this.add(h,f)}}},{key:"copySymDepths",value:function(y){var f=y.getSym();f.setDepth(Se.LEFT,y.getDepth(Se.RIGHT)),f.setDepth(Se.RIGHT,y.getDepth(Se.LEFT))}},{key:"add",value:function(y,f){y.setVisited(!0),this._nodes.add(y);for(var h=y.getEdges().iterator();h.hasNext();){var m=h.next();this._dirEdgeList.add(m);var $=m.getSym().getNode();$.isVisited()||f.push($)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[R]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new Ke,this._nodes=new Ke,this._rightMostCoord=null,this._env=null,this._finder=new ES}}])}(),ly=function(){return s(function y(){a(this,y)},null,[{key:"intersection",value:function(y,f,h,m){var $=y.x<f.x?y.x:f.x,A=y.y<f.y?y.y:f.y,I=y.x>f.x?y.x:f.x,N=y.y>f.y?y.y:f.y,B=h.x<m.x?h.x:m.x,J=h.y<m.y?h.y:m.y,le=h.x>m.x?h.x:m.x,de=h.y>m.y?h.y:m.y,be=(($>B?$:B)+(I<le?I:le))/2,Pe=((A>J?A:J)+(N<de?N:de))/2,Ue=y.x-be,Ye=y.y-Pe,Et=f.x-be,ct=f.y-Pe,Wt=h.x-be,mn=h.y-Pe,Qn=m.x-be,Gs=m.y-Pe,dc=Ye-ct,so=Et-Ue,Py=Ue*ct-Et*Ye,Fy=mn-Gs,yd=Qn-Wt,ix=Wt*Gs-Qn*mn,fc=dc*yd-Fy*so,Ql=(so*ix-yd*Py)/fc,kp=(Fy*Py-dc*ix)/fc;return Y.isNaN(Ql)||Y.isInfinite(Ql)||Y.isNaN(kp)||Y.isInfinite(kp)?null:new ie(Ql+be,kp+Pe)}}])}(),Qa=function(){return s(function y(){a(this,y)},null,[{key:"arraycopy",value:function(y,f,h,m,$){for(var A=0,I=f;I<f+$;I++)h[m+A]=y[I],A++}},{key:"getProperty",value:function(y){return{"line.separator":`
`}[y]}}])}(),sd=function(){function y(){a(this,y)}return s(y,null,[{key:"log10",value:function(f){var h=Math.log(f);return Y.isInfinite(h)||Y.isNaN(h)?h:h/y.LOG_10}},{key:"min",value:function(f,h,m,$){var A=f;return h<A&&(A=h),m<A&&(A=m),$<A&&(A=$),A}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var f=arguments[0],h=arguments[1],m=arguments[2];return f<h?h:f>m?m:f}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var $=arguments[0],A=arguments[1],I=arguments[2];return $<A?A:$>I?I:$}}},{key:"wrap",value:function(f,h){return f<0?h- -f%h:f%h}},{key:"max",value:function(){if(arguments.length===3){var f=arguments[1],h=arguments[2],m=arguments[0];return f>m&&(m=f),h>m&&(m=h),m}if(arguments.length===4){var $=arguments[1],A=arguments[2],I=arguments[3],N=arguments[0];return $>N&&(N=$),A>N&&(N=A),I>N&&(N=I),N}}},{key:"average",value:function(f,h){return(f+h)/2}}])}();sd.LOG_10=Math.log(10);var Tr=function(){function y(){a(this,y)}return s(y,null,[{key:"segmentToSegment",value:function(f,h,m,$){if(f.equals(h))return y.pointToSegment(f,m,$);if(m.equals($))return y.pointToSegment($,f,h);var A=!1;if(xe.intersects(f,h,m,$)){var I=(h.x-f.x)*($.y-m.y)-(h.y-f.y)*($.x-m.x);if(I===0)A=!0;else{var N=(f.y-m.y)*($.x-m.x)-(f.x-m.x)*($.y-m.y),B=((f.y-m.y)*(h.x-f.x)-(f.x-m.x)*(h.y-f.y))/I,J=N/I;(J<0||J>1||B<0||B>1)&&(A=!0)}}else A=!0;return A?sd.min(y.pointToSegment(f,m,$),y.pointToSegment(h,m,$),y.pointToSegment(m,f,h),y.pointToSegment($,f,h)):0}},{key:"pointToSegment",value:function(f,h,m){if(h.x===m.x&&h.y===m.y)return f.distance(h);var $=(m.x-h.x)*(m.x-h.x)+(m.y-h.y)*(m.y-h.y),A=((f.x-h.x)*(m.x-h.x)+(f.y-h.y)*(m.y-h.y))/$;if(A<=0)return f.distance(h);if(A>=1)return f.distance(m);var I=((h.y-f.y)*(m.x-h.x)-(h.x-f.x)*(m.y-h.y))/$;return Math.abs(I)*Math.sqrt($)}},{key:"pointToLinePerpendicular",value:function(f,h,m){var $=(m.x-h.x)*(m.x-h.x)+(m.y-h.y)*(m.y-h.y),A=((h.y-f.y)*(m.x-h.x)-(h.x-f.x)*(m.y-h.y))/$;return Math.abs(A)*Math.sqrt($)}},{key:"pointToSegmentString",value:function(f,h){if(h.length===0)throw new D("Line array must contain at least one vertex");for(var m=f.distance(h[0]),$=0;$<h.length-1;$++){var A=y.pointToSegment(f,h[$],h[$+1]);A<m&&(m=A)}return m}}])}(),uy=function(){return s(function y(){a(this,y)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||tt(arguments[0],yt);else if(arguments.length!==2){if(arguments.length===3){var y=arguments[0],f=arguments[1];return this.create(y,f)}}}}])}(),np=function(){return s(function y(){a(this,y)},[{key:"filter",value:function(y){}}])}(),TS=function(){return s(function y(){a(this,y)},null,[{key:"ofLine",value:function(y){var f=y.size();if(f<=1)return 0;var h=0,m=new ie;y.getCoordinate(0,m);for(var $=m.x,A=m.y,I=1;I<f;I++){y.getCoordinate(I,m);var N=m.x,B=m.y,J=N-$,le=B-A;h+=Math.sqrt(J*J+le*le),$=N,A=B}return h}}])}(),z0=s(function y(){a(this,y)}),Gl=function(){function y(){a(this,y)}return s(y,null,[{key:"copyCoord",value:function(f,h,m,$){for(var A=Math.min(f.getDimension(),m.getDimension()),I=0;I<A;I++)m.setOrdinate($,I,f.getOrdinate(h,I))}},{key:"isRing",value:function(f){var h=f.size();return h===0||!(h<=3)&&f.getOrdinate(0,yt.X)===f.getOrdinate(h-1,yt.X)&&f.getOrdinate(0,yt.Y)===f.getOrdinate(h-1,yt.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(tt(arguments[0],yt)&&Number.isInteger(arguments[1])){var f=arguments[0],h=arguments[1];y.scroll(f,h,y.isRing(f))}else if(tt(arguments[0],yt)&&arguments[1]instanceof ie){var m=arguments[0],$=arguments[1],A=y.indexOf($,m);if(A<=0)return null;y.scroll(m,A)}}else if(arguments.length===3){var I=arguments[0],N=arguments[1],B=arguments[2];if(N<=0)return null;for(var J=I.copy(),le=B?I.size()-1:I.size(),de=0;de<le;de++)for(var be=0;be<I.getDimension();be++)I.setOrdinate(de,be,J.getOrdinate((N+de)%le,be));if(B)for(var Pe=0;Pe<I.getDimension();Pe++)I.setOrdinate(le,Pe,I.getOrdinate(0,Pe))}}},{key:"isEqual",value:function(f,h){var m=f.size();if(m!==h.size())return!1;for(var $=Math.min(f.getDimension(),h.getDimension()),A=0;A<m;A++)for(var I=0;I<$;I++){var N=f.getOrdinate(A,I),B=h.getOrdinate(A,I);if(f.getOrdinate(A,I)!==h.getOrdinate(A,I)&&(!Y.isNaN(N)||!Y.isNaN(B)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var f=arguments[0];return y.minCoordinateIndex(f,0,f.size()-1)}if(arguments.length===3){for(var h=arguments[0],m=arguments[2],$=-1,A=null,I=arguments[1];I<=m;I++){var N=h.getCoordinate(I);(A===null||A.compareTo(N)>0)&&(A=N,$=I)}return $}}},{key:"extend",value:function(f,h,m){var $=f.create(m,h.getDimension()),A=h.size();if(y.copy(h,0,$,0,A),A>0)for(var I=A;I<m;I++)y.copy(h,A-1,$,I,1);return $}},{key:"reverse",value:function(f){for(var h=f.size()-1,m=Math.trunc(h/2),$=0;$<=m;$++)y.swap(f,$,h-$)}},{key:"swap",value:function(f,h,m){if(h===m)return null;for(var $=0;$<f.getDimension();$++){var A=f.getOrdinate(h,$);f.setOrdinate(h,$,f.getOrdinate(m,$)),f.setOrdinate(m,$,A)}}},{key:"copy",value:function(f,h,m,$,A){for(var I=0;I<A;I++)y.copyCoord(f,h+I,m,$+I)}},{key:"ensureValidRing",value:function(f,h){var m=h.size();return m===0?h:m<=3?y.createClosedRing(f,h,4):h.getOrdinate(0,yt.X)===h.getOrdinate(m-1,yt.X)&&h.getOrdinate(0,yt.Y)===h.getOrdinate(m-1,yt.Y)?h:y.createClosedRing(f,h,m+1)}},{key:"indexOf",value:function(f,h){for(var m=0;m<h.size();m++)if(f.x===h.getOrdinate(m,yt.X)&&f.y===h.getOrdinate(m,yt.Y))return m;return-1}},{key:"createClosedRing",value:function(f,h,m){var $=f.create(m,h.getDimension()),A=h.size();y.copy(h,0,$,0,A);for(var I=A;I<m;I++)y.copy(h,0,$,I,1);return $}},{key:"minCoordinate",value:function(f){for(var h=null,m=0;m<f.size();m++){var $=f.getCoordinate(m);(h===null||h.compareTo($)>0)&&(h=$)}return h}}])}(),Re=function(){function y(){a(this,y)}return s(y,null,[{key:"toDimensionSymbol",value:function(f){switch(f){case y.FALSE:return y.SYM_FALSE;case y.TRUE:return y.SYM_TRUE;case y.DONTCARE:return y.SYM_DONTCARE;case y.P:return y.SYM_P;case y.L:return y.SYM_L;case y.A:return y.SYM_A}throw new D("Unknown dimension value: "+f)}},{key:"toDimensionValue",value:function(f){switch(Ms.toUpperCase(f)){case y.SYM_FALSE:return y.FALSE;case y.SYM_TRUE:return y.TRUE;case y.SYM_DONTCARE:return y.DONTCARE;case y.SYM_P:return y.P;case y.SYM_L:return y.L;case y.SYM_A:return y.A}throw new D("Unknown dimension symbol: "+f)}}])}();Re.P=0,Re.L=1,Re.A=2,Re.FALSE=-1,Re.TRUE=-2,Re.DONTCARE=-3,Re.SYM_FALSE="F",Re.SYM_TRUE="T",Re.SYM_DONTCARE="*",Re.SYM_P="0",Re.SYM_L="1",Re.SYM_A="2";var ip=function(){return s(function y(){a(this,y)},[{key:"filter",value:function(y){}}])}(),ld=function(){return s(function y(){a(this,y)},[{key:"filter",value:function(y,f){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),Jf=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new xe:this._points.expandEnvelope(new xe)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new f(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],m=arguments[1];if(!this.isEquivalentClass(h))return!1;var $=h;if(this._points.size()!==$._points.size())return!1;for(var A=0;A<this._points.size();A++)if(!this.equal(this._points.getCoordinate(A),$._points.getCoordinate(A),m))return!1;return!0}return b(f,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var h=0;h<Math.trunc(this._points.size()/2);h++){var m=this._points.size()-1-h;if(!this._points.getCoordinate(h).equals(this._points.getCoordinate(m))){if(this._points.getCoordinate(h).compareTo(this._points.getCoordinate(m))>0){var $=this._points.copy();Gl.reverse($),this._points=$}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Re.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var h=this._points.copy();return Gl.reverse(h),this.getFactory().createLineString(h)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return TS.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var h=arguments[0],m=0,$=0;m<this._points.size()&&$<h._points.size();){var A=this._points.getCoordinate(m).compareTo(h._points.getCoordinate($));if(A!==0)return A;m++,$++}return m<this._points.size()?1:$<h._points.size()?-1:0}if(arguments.length===2){var I=arguments[0];return arguments[1].compare(this._points,I._points)}}},{key:"apply",value:function(){if(tt(arguments[0],np))for(var h=arguments[0],m=0;m<this._points.size();m++)h.filter(this._points.getCoordinate(m));else if(tt(arguments[0],ld)){var $=arguments[0];if(this._points.size()===0)return null;for(var A=0;A<this._points.size()&&($.filter(this._points,A),!$.isDone());A++);$.isGeometryChanged()&&this.geometryChanged()}else tt(arguments[0],ip)?arguments[0].filter(this):tt(arguments[0],P)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new Rt}},{key:"isEquivalentClass",value:function(h){return h instanceof f}},{key:"getCoordinateN",value:function(h){return this._points.getCoordinate(h)}},{key:"getGeometryType",value:function(){return ve.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(h){if(h===null&&(h=this.getFactory().getCoordinateSequenceFactory().create([])),h.size()===1)throw new D("Invalid number of points in LineString (found "+h.size()+" - must be 0 or >= 2)");this._points=h}},{key:"isCoordinate",value:function(h){for(var m=0;m<this._points.size();m++)if(this._points.getCoordinate(m).equals(h))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(h){return this.getFactory().createPoint(this._points.getCoordinate(h))}},{key:"interfaces_",get:function(){return[z0]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var h=arguments[0],m=arguments[1];ve.constructor_.call(this,m),this.init(h)}}}}])}(ve),q0=s(function y(){a(this,y)}),dy=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new xe;var h=new xe;return h.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),h}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new f(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],m=arguments[1];return!!this.isEquivalentClass(h)&&(!(!this.isEmpty()||!h.isEmpty())||this.isEmpty()===h.isEmpty()&&this.equal(h.getCoordinate(),this.getCoordinate(),m))}return b(f,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Re.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return ve.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var h=arguments[0];return this.getCoordinate().compareTo(h.getCoordinate())}if(arguments.length===2){var m=arguments[0];return arguments[1].compare(this._coordinates,m._coordinates)}}},{key:"apply",value:function(){if(tt(arguments[0],np)){var h=arguments[0];if(this.isEmpty())return null;h.filter(this.getCoordinate())}else if(tt(arguments[0],ld)){var m=arguments[0];if(this.isEmpty())return null;m.filter(this._coordinates,0),m.isGeometryChanged()&&this.geometryChanged()}else tt(arguments[0],ip)?arguments[0].filter(this):tt(arguments[0],P)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return ve.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(h){h===null&&(h=this.getFactory().getCoordinateSequenceFactory().create([])),U.isTrue(h.size()<=1),this._coordinates=h}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[q0]}}],[{key:"constructor_",value:function(){this._coordinates=null;var h=arguments[0],m=arguments[1];ve.constructor_.call(this,m),this.init(h)}}])}(ve),j0=function(){function y(){a(this,y)}return s(y,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var f=arguments[0];return Math.abs(y.ofRingSigned(f))}if(tt(arguments[0],yt)){var h=arguments[0];return Math.abs(y.ofRingSigned(h))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var f=arguments[0];if(f.length<3)return 0;for(var h=0,m=f[0].x,$=1;$<f.length-1;$++){var A=f[$].x-m,I=f[$+1].y;h+=A*(f[$-1].y-I)}return h/2}if(tt(arguments[0],yt)){var N=arguments[0],B=N.size();if(B<3)return 0;var J=new ie,le=new ie,de=new ie;N.getCoordinate(0,le),N.getCoordinate(1,de);var be=le.x;de.x-=be;for(var Pe=0,Ue=1;Ue<B-1;Ue++)J.y=le.y,le.x=de.x,le.y=de.y,N.getCoordinate(Ue+1,de),de.x-=be,Pe+=le.x*(J.y-de.y);return Pe/2}}}])}(),di=function(){return s(function y(){a(this,y)},null,[{key:"sort",value:function(){var y=arguments,f=arguments[0];if(arguments.length===1)f.sort(function(be,Pe){return be.compareTo(Pe)});else if(arguments.length===2)f.sort(function(be,Pe){return y[1].compare(be,Pe)});else if(arguments.length===3){var h=f.slice(arguments[1],arguments[2]);h.sort();var m=f.slice(0,arguments[1]).concat(h,f.slice(arguments[2],f.length));f.splice(0,f.length);var $,A=l(m);try{for(A.s();!($=A.n()).done;){var I=$.value;f.push(I)}}catch(be){A.e(be)}finally{A.f()}}else if(arguments.length===4){var N=f.slice(arguments[1],arguments[2]);N.sort(function(be,Pe){return y[3].compare(be,Pe)});var B=f.slice(0,arguments[1]).concat(N,f.slice(arguments[2],f.length));f.splice(0,f.length);var J,le=l(B);try{for(le.s();!(J=le.n()).done;){var de=J.value;f.push(de)}}catch(be){le.e(be)}finally{le.f()}}}},{key:"asList",value:function(y){var f,h=new Ke,m=l(y);try{for(m.s();!(f=m.n()).done;){var $=f.value;h.add($)}}catch(A){m.e(A)}finally{m.f()}return h}},{key:"copyOf",value:function(y,f){return y.slice(0,f)}}])}(),Ge=s(function y(){a(this,y)}),Kf=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var h=new Array(this.getNumPoints()).fill(null),m=-1,$=this._shell.getCoordinates(),A=0;A<$.length;A++)h[++m]=$[A];for(var I=0;I<this._holes.length;I++)for(var N=this._holes[I].getCoordinates(),B=0;B<N.length;B++)h[++m]=N[B];return h}},{key:"getArea",value:function(){var h=0;h+=j0.ofRing(this._shell.getCoordinateSequence());for(var m=0;m<this._holes.length;m++)h-=j0.ofRing(this._holes[m].getCoordinateSequence());return h}},{key:"copyInternal",value:function(){for(var h=this._shell.copy(),m=new Array(this._holes.length).fill(null),$=0;$<this._holes.length;$++)m[$]=this._holes[$].copy();return new f(h,m,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var h=this._shell.getCoordinateSequence(),m=this.getEnvelopeInternal(),$=0;$<5;$++){var A=h.getX($);if(A!==m.getMinX()&&A!==m.getMaxX())return!1;var I=h.getY($);if(I!==m.getMinY()&&I!==m.getMaxY())return!1}for(var N=h.getX(0),B=h.getY(0),J=1;J<=4;J++){var le=h.getX(J),de=h.getY(J);if(le!==N==(de!==B))return!1;N=le,B=de}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],m=arguments[1];if(!this.isEquivalentClass(h))return!1;var $=h,A=this._shell,I=$._shell;if(!A.equalsExact(I,m)||this._holes.length!==$._holes.length)return!1;for(var N=0;N<this._holes.length;N++)if(!this._holes[N].equalsExact($._holes[N],m))return!1;return!0}return b(f,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var h=0;h<this._holes.length;h++)this._holes[h]=this.normalized(this._holes[h],!1);di.sort(this._holes)}else if(arguments.length===2){var m=arguments[0],$=arguments[1];if(m.isEmpty())return null;var A=m.getCoordinateSequence(),I=Gl.minCoordinateIndex(A,0,A.size()-2);Gl.scroll(A,I,!0),Qe.isCCW(A)===$&&Gl.reverse(A)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var h=this.getExteriorRing().reverse(),m=new Array(this.getNumInteriorRing()).fill(null),$=0;$<m.length;$++)m[$]=this.getInteriorRingN($).reverse();return this.getFactory().createPolygon(h,m)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var h=0;h+=this._shell.getLength();for(var m=0;m<this._holes.length;m++)h+=this._holes[m].getLength();return h}},{key:"getNumPoints",value:function(){for(var h=this._shell.getNumPoints(),m=0;m<this._holes.length;m++)h+=this._holes[m].getNumPoints();return h}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(h,m){var $=h.copy();return this.normalize($,m),$}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var h=arguments[0],m=this._shell,$=h._shell;return m.compareToSameClass($)}if(arguments.length===2){var A=arguments[1],I=arguments[0],N=this._shell,B=I._shell,J=N.compareToSameClass(B,A);if(J!==0)return J;for(var le=this.getNumInteriorRing(),de=I.getNumInteriorRing(),be=0;be<le&&be<de;){var Pe=this.getInteriorRingN(be),Ue=I.getInteriorRingN(be),Ye=Pe.compareToSameClass(Ue,A);if(Ye!==0)return Ye;be++}return be<le?1:be<de?-1:0}}},{key:"apply",value:function(){if(tt(arguments[0],np)){var h=arguments[0];this._shell.apply(h);for(var m=0;m<this._holes.length;m++)this._holes[m].apply(h)}else if(tt(arguments[0],ld)){var $=arguments[0];if(this._shell.apply($),!$.isDone())for(var A=0;A<this._holes.length&&(this._holes[A].apply($),!$.isDone());A++);$.isGeometryChanged()&&this.geometryChanged()}else if(tt(arguments[0],ip))arguments[0].filter(this);else if(tt(arguments[0],P)){var I=arguments[0];I.filter(this),this._shell.apply(I);for(var N=0;N<this._holes.length;N++)this._holes[N].apply(I)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var h=new Array(this._holes.length+1).fill(null);h[0]=this._shell;for(var m=0;m<this._holes.length;m++)h[m+1]=this._holes[m];return h.length<=1?this.getFactory().createLinearRing(h[0].getCoordinateSequence()):this.getFactory().createMultiLineString(h)}},{key:"getGeometryType",value:function(){return ve.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(h){return this._holes[h]}},{key:"interfaces_",get:function(){return[Ge]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var h=arguments[0],m=arguments[1],$=arguments[2];if(ve.constructor_.call(this,$),h===null&&(h=this.getFactory().createLinearRing()),m===null&&(m=[]),ve.hasNullElements(m))throw new D("holes must not contain null elements");if(h.isEmpty()&&ve.hasNonEmptyElements(m))throw new D("shell is empty but holes are not");this._shell=h,this._holes=m}}])}(ve),U0=function(y){function f(){return a(this,f),i(this,f,arguments)}return c(f,y),s(f)}(Jt),fy=function(y){function f(h){var m;return a(this,f),(m=i(this,f)).array=[],h instanceof kt&&m.addAll(h),m}return c(f,y),s(f,[{key:"contains",value:function(h){var m,$=l(this.array);try{for($.s();!(m=$.n()).done;)if(m.value.compareTo(h)===0)return!0}catch(A){$.e(A)}finally{$.f()}return!1}},{key:"add",value:function(h){if(this.contains(h))return!1;for(var m=0,$=this.array.length;m<$;m++)if(this.array[m].compareTo(h)===1)return!!this.array.splice(m,0,h);return this.array.push(h),!0}},{key:"addAll",value:function(h){var m,$=l(h);try{for($.s();!(m=$.n()).done;){var A=m.value;this.add(A)}}catch(I){$.e(I)}finally{$.f()}return!0}},{key:"remove",value:function(){throw new Rt}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new B0(this.array)}}])}(U0),B0=function(){return s(function y(f){a(this,y),this.array=f,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new pt;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new Rt}}])}(),Di=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"computeEnvelopeInternal",value:function(){for(var h=new xe,m=0;m<this._geometries.length;m++)h.expandToInclude(this._geometries[m].getEnvelopeInternal());return h}},{key:"getGeometryN",value:function(h){return this._geometries[h]}},{key:"getCoordinates",value:function(){for(var h=new Array(this.getNumPoints()).fill(null),m=-1,$=0;$<this._geometries.length;$++)for(var A=this._geometries[$].getCoordinates(),I=0;I<A.length;I++)h[++m]=A[I];return h}},{key:"getArea",value:function(){for(var h=0,m=0;m<this._geometries.length;m++)h+=this._geometries[m].getArea();return h}},{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),m=0;m<h.length;m++)h[m]=this._geometries[m].copy();return new f(h,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],m=arguments[1];if(!this.isEquivalentClass(h))return!1;var $=h;if(this._geometries.length!==$._geometries.length)return!1;for(var A=0;A<this._geometries.length;A++)if(!this._geometries[A].equalsExact($._geometries[A],m))return!1;return!0}return b(f,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var h=0;h<this._geometries.length;h++)this._geometries[h].normalize();di.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var h=Re.FALSE,m=0;m<this._geometries.length;m++)h=Math.max(h,this._geometries[m].getBoundaryDimension());return h}},{key:"reverseInternal",value:function(){for(var h=this._geometries.length,m=new Ke(h),$=0;$<h;$++)m.add(this._geometries[$].reverse());return this.getFactory().buildGeometry(m)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var h=Re.FALSE,m=0;m<this._geometries.length;m++)h=Math.max(h,this._geometries[m].getDimension());return h}},{key:"getLength",value:function(){for(var h=0,m=0;m<this._geometries.length;m++)h+=this._geometries[m].getLength();return h}},{key:"getNumPoints",value:function(){for(var h=0,m=0;m<this._geometries.length;m++)h+=this._geometries[m].getNumPoints();return h}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var h=arguments[0],m=new fy(di.asList(this._geometries)),$=new fy(di.asList(h._geometries));return this.compare(m,$)}if(arguments.length===2){for(var A=arguments[1],I=arguments[0],N=this.getNumGeometries(),B=I.getNumGeometries(),J=0;J<N&&J<B;){var le=this.getGeometryN(J),de=I.getGeometryN(J),be=le.compareToSameClass(de,A);if(be!==0)return be;J++}return J<N?1:J<B?-1:0}}},{key:"apply",value:function(){if(tt(arguments[0],np))for(var h=arguments[0],m=0;m<this._geometries.length;m++)this._geometries[m].apply(h);else if(tt(arguments[0],ld)){var $=arguments[0];if(this._geometries.length===0)return null;for(var A=0;A<this._geometries.length&&(this._geometries[A].apply($),!$.isDone());A++);$.isGeometryChanged()&&this.geometryChanged()}else if(tt(arguments[0],ip)){var I=arguments[0];I.filter(this);for(var N=0;N<this._geometries.length;N++)this._geometries[N].apply(I)}else if(tt(arguments[0],P)){var B=arguments[0];B.filter(this);for(var J=0;J<this._geometries.length;J++)this._geometries[J].apply(B)}}},{key:"getBoundary",value:function(){return ve.checkNotGeometryCollection(this),U.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return ve.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var h=0;h<this._geometries.length;h++)if(!this._geometries[h].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var h=arguments[0],m=arguments[1];if(ve.constructor_.call(this,m),h===null&&(h=[]),ve.hasNullElements(h))throw new D("geometries must not contain null elements");this._geometries=h}}}}])}(ve),ap=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),m=0;m<h.length;m++)h[m]=this._geometries[m].copy();return new f(h,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],m=arguments[1];return!!this.isEquivalentClass(h)&&b(f,"equalsExact",this,1).call(this,h,m)}return b(f,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var h=arguments[0];return this._geometries[h].getCoordinate()}return b(f,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return Re.FALSE}},{key:"getTypeCode",value:function(){return ve.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return ve.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[q0]}}],[{key:"constructor_",value:function(){var h=arguments[0],m=arguments[1];Di.constructor_.call(this,h,m)}}])}(Di),Qr=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"copyInternal",value:function(){return new f(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return Re.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||b(f,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var h=this._points.copy();return Gl.reverse(h),this.getFactory().createLinearRing(h)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!b(f,"isClosed",this,1).call(this))throw new D("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<f.MINIMUM_VALID_SIZE)throw new D("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return ve.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var h=arguments[0],m=arguments[1];Jf.constructor_.call(this,h,m),this.validateConstruction()}}])}(Jf);Qr.MINIMUM_VALID_SIZE=4;var zs=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"setOrdinate",value:function(h,m){switch(h){case f.X:this.x=m;break;case f.Y:this.y=m;break;default:throw new D("Invalid ordinate index: "+h)}}},{key:"getZ",value:function(){return ie.NULL_ORDINATE}},{key:"getOrdinate",value:function(h){switch(h){case f.X:return this.x;case f.Y:return this.y}throw new D("Invalid ordinate index: "+h)}},{key:"setZ",value:function(h){throw new D("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new f(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(h){this.x=h.x,this.y=h.y,this.z=h.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)ie.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof f){var h=arguments[0];ie.constructor_.call(this,h.x,h.y)}else if(arguments[0]instanceof ie){var m=arguments[0];ie.constructor_.call(this,m.x,m.y)}}else if(arguments.length===2){var $=arguments[0],A=arguments[1];ie.constructor_.call(this,$,A,ie.NULL_ORDINATE)}}}])}(ie);zs.X=0,zs.Y=1,zs.Z=-1,zs.M=-1;var Hl=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(h,m){switch(h){case f.X:this.x=m;break;case f.Y:this.y=m;break;case f.M:this._m=m;break;default:throw new D("Invalid ordinate index: "+h)}}},{key:"setM",value:function(h){this._m=h}},{key:"getZ",value:function(){return ie.NULL_ORDINATE}},{key:"getOrdinate",value:function(h){switch(h){case f.X:return this.x;case f.Y:return this.y;case f.M:return this._m}throw new D("Invalid ordinate index: "+h)}},{key:"setZ",value:function(h){throw new D("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new f(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(h){this.x=h.x,this.y=h.y,this.z=h.getZ(),this._m=h.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)ie.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof f){var h=arguments[0];ie.constructor_.call(this,h.x,h.y),this._m=h._m}else if(arguments[0]instanceof ie){var m=arguments[0];ie.constructor_.call(this,m.x,m.y),this._m=this.getM()}}else if(arguments.length===3){var $=arguments[0],A=arguments[1],I=arguments[2];ie.constructor_.call(this,$,A,ie.NULL_ORDINATE),this._m=I}}}])}(ie);Hl.X=0,Hl.Y=1,Hl.Z=-1,Hl.M=2;var cy=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(h,m){switch(h){case ie.X:this.x=m;break;case ie.Y:this.y=m;break;case ie.Z:this.z=m;break;case ie.M:this._m=m;break;default:throw new D("Invalid ordinate index: "+h)}}},{key:"setM",value:function(h){this._m=h}},{key:"getOrdinate",value:function(h){switch(h){case ie.X:return this.x;case ie.Y:return this.y;case ie.Z:return this.getZ();case ie.M:return this.getM()}throw new D("Invalid ordinate index: "+h)}},{key:"copy",value:function(){return new f(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(h){this.x=h.x,this.y=h.y,this.z=h.getZ(),this._m=h.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)ie.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof f){var h=arguments[0];ie.constructor_.call(this,h),this._m=h._m}else if(arguments[0]instanceof ie){var m=arguments[0];ie.constructor_.call(this,m),this._m=this.getM()}}else if(arguments.length===4){var $=arguments[0],A=arguments[1],I=arguments[2],N=arguments[3];ie.constructor_.call(this,$,A,I),this._m=N}}}])}(ie),rp=function(){function y(){a(this,y)}return s(y,null,[{key:"measures",value:function(f){return f instanceof zs?0:f instanceof Hl||f instanceof cy?1:0}},{key:"dimension",value:function(f){return f instanceof zs?2:f instanceof Hl?3:f instanceof cy?4:3}},{key:"create",value:function(){if(arguments.length===1){var f=arguments[0];return y.create(f,0)}if(arguments.length===2){var h=arguments[0],m=arguments[1];return h===2?new zs:h===3&&m===0?new ie:h===3&&m===1?new Hl:h===4&&m===1?new cy:new ie}}}])}(),Qf=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"getCoordinate",value:function(h){return this.get(h)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&tt(arguments[0],kt)){for(var h=arguments[1],m=!1,$=arguments[0].iterator();$.hasNext();)this.add($.next(),h),m=!0;return m}return b(f,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var h=b(f,"clone",this,1).call(this),m=0;m<this.size();m++)h.add(m,this.get(m).clone());return h}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(f.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(f.coordArrayType);for(var h=this.size(),m=new Array(h).fill(null),$=0;$<h;$++)m[$]=this.get(h-$-1);return m}}},{key:"add",value:function(){if(arguments.length===1){var h=arguments[0];return b(f,"add",this,1).call(this,h)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var m=arguments[0],$=arguments[1];return this.add(m,$,!0),!0}if(arguments[0]instanceof ie&&typeof arguments[1]=="boolean"){var A=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(A))return null;b(f,"add",this,1).call(this,A)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var I=arguments[0],N=arguments[1];return this.add(I,N),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var B=arguments[0],J=arguments[1];if(arguments[2])for(var le=0;le<B.length;le++)this.add(B[le],J);else for(var de=B.length-1;de>=0;de--)this.add(B[de],J);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof ie){var be=arguments[0],Pe=arguments[1];if(!arguments[2]){var Ue=this.size();if(Ue>0&&(be>0&&this.get(be-1).equals2D(Pe)||be<Ue&&this.get(be).equals2D(Pe)))return null}b(f,"add",this,1).call(this,be,Pe)}}else if(arguments.length===4){var Ye=arguments[0],Et=arguments[1],ct=arguments[2],Wt=arguments[3],mn=1;ct>Wt&&(mn=-1);for(var Qn=ct;Qn!==Wt;Qn+=mn)this.add(Ye[Qn],Et);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var h=this.get(0).copy();this.add(h,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var h=arguments[0];this.ensureCapacity(h.length),this.add(h,!0)}else if(arguments.length===2){var m=arguments[0],$=arguments[1];this.ensureCapacity(m.length),this.add(m,$)}}}}])}(Ke);Qf.coordArrayType=new Array(0).fill(null);var Rn=function(){function y(){a(this,y)}return s(y,null,[{key:"isRing",value:function(f){return!(f.length<4)&&!!f[0].equals2D(f[f.length-1])}},{key:"ptNotInList",value:function(f,h){for(var m=0;m<f.length;m++){var $=f[m];if(y.indexOf($,h)<0)return $}return null}},{key:"scroll",value:function(f,h){var m=y.indexOf(h,f);if(m<0)return null;var $=new Array(f.length).fill(null);Qa.arraycopy(f,m,$,0,f.length-m),Qa.arraycopy(f,0,$,f.length-m,m),Qa.arraycopy($,0,f,0,f.length)}},{key:"equals",value:function(){if(arguments.length===2){var f=arguments[0],h=arguments[1];if(f===h)return!0;if(f===null||h===null||f.length!==h.length)return!1;for(var m=0;m<f.length;m++)if(!f[m].equals(h[m]))return!1;return!0}if(arguments.length===3){var $=arguments[0],A=arguments[1],I=arguments[2];if($===A)return!0;if($===null||A===null||$.length!==A.length)return!1;for(var N=0;N<$.length;N++)if(I.compare($[N],A[N])!==0)return!1;return!0}}},{key:"intersection",value:function(f,h){for(var m=new Qf,$=0;$<f.length;$++)h.intersects(f[$])&&m.add(f[$],!0);return m.toCoordinateArray()}},{key:"measures",value:function(f){if(f===null||f.length===0)return 0;var h,m=0,$=l(f);try{for($.s();!(h=$.n()).done;){var A=h.value;m=Math.max(m,rp.measures(A))}}catch(I){$.e(I)}finally{$.f()}return m}},{key:"hasRepeatedPoints",value:function(f){for(var h=1;h<f.length;h++)if(f[h-1].equals(f[h]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(f){return y.hasRepeatedPoints(f)?new Qf(f,!1).toCoordinateArray():f}},{key:"reverse",value:function(f){for(var h=f.length-1,m=Math.trunc(h/2),$=0;$<=m;$++){var A=f[$];f[$]=f[h-$],f[h-$]=A}}},{key:"removeNull",value:function(f){for(var h=0,m=0;m<f.length;m++)f[m]!==null&&h++;var $=new Array(h).fill(null);if(h===0)return $;for(var A=0,I=0;I<f.length;I++)f[I]!==null&&($[A++]=f[I]);return $}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var f=arguments[0],h=new Array(f.length).fill(null),m=0;m<f.length;m++)h[m]=f[m].copy();return h}if(arguments.length===5)for(var $=arguments[0],A=arguments[1],I=arguments[2],N=arguments[3],B=arguments[4],J=0;J<B;J++)I[N+J]=$[A+J].copy()}},{key:"isEqualReversed",value:function(f,h){for(var m=0;m<f.length;m++){var $=f[m],A=h[f.length-m-1];if($.compareTo(A)!==0)return!1}return!0}},{key:"envelope",value:function(f){for(var h=new xe,m=0;m<f.length;m++)h.expandToInclude(f[m]);return h}},{key:"toCoordinateArray",value:function(f){return f.toArray(y.coordArrayType)}},{key:"dimension",value:function(f){if(f===null||f.length===0)return 3;var h,m=0,$=l(f);try{for($.s();!(h=$.n()).done;){var A=h.value;m=Math.max(m,rp.dimension(A))}}catch(I){$.e(I)}finally{$.f()}return m}},{key:"atLeastNCoordinatesOrNothing",value:function(f,h){return h.length>=f?h:[]}},{key:"indexOf",value:function(f,h){for(var m=0;m<h.length;m++)if(f.equals(h[m]))return m;return-1}},{key:"increasingDirection",value:function(f){for(var h=0;h<Math.trunc(f.length/2);h++){var m=f.length-1-h,$=f[h].compareTo(f[m]);if($!==0)return $}return 1}},{key:"compare",value:function(f,h){for(var m=0;m<f.length&&m<h.length;){var $=f[m].compareTo(h[m]);if($!==0)return $;m++}return m<h.length?-1:m<f.length?1:0}},{key:"minCoordinate",value:function(f){for(var h=null,m=0;m<f.length;m++)(h===null||h.compareTo(f[m])>0)&&(h=f[m]);return h}},{key:"extract",value:function(f,h,m){h=sd.clamp(h,0,f.length);var $=(m=sd.clamp(m,-1,f.length))-h+1;m<0&&($=0),h>=f.length&&($=0),m<h&&($=0);var A=new Array($).fill(null);if($===0)return A;for(var I=0,N=h;N<=m;N++)A[I++]=f[N];return A}}])}(),AS=function(){return s(function y(){a(this,y)},[{key:"compare",value:function(y,f){var h=y,m=f;return Rn.compare(h,m)}},{key:"interfaces_",get:function(){return[Z]}}])}(),op=function(){return s(function y(){a(this,y)},[{key:"compare",value:function(y,f){var h=y,m=f;if(h.length<m.length)return-1;if(h.length>m.length)return 1;if(h.length===0)return 0;var $=Rn.compare(h,m);return Rn.isEqualReversed(h,m)?0:$}},{key:"OLDcompare",value:function(y,f){var h=y,m=f;if(h.length<m.length)return-1;if(h.length>m.length)return 1;if(h.length===0)return 0;for(var $=Rn.increasingDirection(h),A=Rn.increasingDirection(m),I=$>0?0:h.length-1,N=A>0?0:h.length-1,B=0;B<h.length;B++){var J=h[I].compareTo(m[N]);if(J!==0)return J;I+=$,N+=A}return 0}},{key:"interfaces_",get:function(){return[Z]}}])}();Rn.ForwardComparator=AS,Rn.BidirectionalComparator=op,Rn.coordArrayType=new Array(0).fill(null);var sp=function(){return s(function y(f){a(this,y),this.str=f},[{key:"append",value:function(y){this.str+=y}},{key:"setCharAt",value:function(y,f){this.str=this.str.substr(0,y)+f+this.str.substr(y+1)}},{key:"toString",value:function(){return this.str}}])}(),ec=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"getM",value:function(f){return this.hasM()?this._coordinates[f].getM():Y.NaN}},{key:"setOrdinate",value:function(f,h,m){switch(h){case yt.X:this._coordinates[f].x=m;break;case yt.Y:this._coordinates[f].y=m;break;default:this._coordinates[f].setOrdinate(h,m)}}},{key:"getZ",value:function(f){return this.hasZ()?this._coordinates[f].getZ():Y.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(f,h){switch(h){case yt.X:return this._coordinates[f].x;case yt.Y:return this._coordinates[f].y;default:return this._coordinates[f].getOrdinate(h)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var f=arguments[0];return this._coordinates[f]}if(arguments.length===2){var h=arguments[0];arguments[1].setCoordinate(this._coordinates[h])}}},{key:"getCoordinateCopy",value:function(f){var h=this.createCoordinate();return h.setCoordinate(this._coordinates[f]),h}},{key:"createCoordinate",value:function(){return rp.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(f){return this._coordinates[f].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(f){for(var h=0;h<this._coordinates.length;h++)f.expandToInclude(this._coordinates[h]);return f}},{key:"copy",value:function(){for(var f=new Array(this.size()).fill(null),h=0;h<this._coordinates.length;h++){var m=this.createCoordinate();m.setCoordinate(this._coordinates[h]),f[h]=m}return new y(f,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var f=new sp(17*this._coordinates.length);f.append("("),f.append(this._coordinates[0]);for(var h=1;h<this._coordinates.length;h++)f.append(", "),f.append(this._coordinates[h]);return f.append(")"),f.toString()}return"()"}},{key:"getY",value:function(f){return this._coordinates[f].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[yt,q]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var f=arguments[0];y.constructor_.call(this,f,Rn.dimension(f),Rn.measures(f))}else if(Number.isInteger(arguments[0])){var h=arguments[0];this._coordinates=new Array(h).fill(null);for(var m=0;m<h;m++)this._coordinates[m]=new ie}else if(tt(arguments[0],yt)){var $=arguments[0];if($===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=$.getDimension(),this._measures=$.getMeasures(),this._coordinates=new Array($.size()).fill(null);for(var A=0;A<this._coordinates.length;A++)this._coordinates[A]=$.getCoordinateCopy(A)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var I=arguments[0],N=arguments[1];y.constructor_.call(this,I,N,Rn.measures(I))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var B=arguments[0],J=arguments[1];this._coordinates=new Array(B).fill(null),this._dimension=J;for(var le=0;le<B;le++)this._coordinates[le]=rp.create(J)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var de=arguments[0],be=arguments[1],Pe=arguments[2];this._dimension=be,this._measures=Pe,this._coordinates=de===null?new Array(0).fill(null):de}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Ue=arguments[0],Ye=arguments[1],Et=arguments[2];this._coordinates=new Array(Ue).fill(null),this._dimension=Ye,this._measures=Et;for(var ct=0;ct<Ue;ct++)this._coordinates[ct]=this.createCoordinate()}}}}])}(),hy=function(){function y(){a(this,y)}return s(y,[{key:"readResolve",value:function(){return y.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new ec(arguments[0]);if(tt(arguments[0],yt))return new ec(arguments[0])}else{if(arguments.length===2){var f=arguments[1];return f>3&&(f=3),f<2&&(f=2),new ec(arguments[0],f)}if(arguments.length===3){var h=arguments[2],m=arguments[1]-h;return h>1&&(h=1),m>3&&(m=3),m<2&&(m=2),new ec(arguments[0],m+h,h)}}}},{key:"interfaces_",get:function(){return[uy,q]}}],[{key:"instance",value:function(){return y.instanceObject}}])}();hy.instanceObject=new hy;var py=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),m=0;m<h.length;m++)h[m]=this._geometries[m].copy();return new f(h,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],m=arguments[1];return!!this.isEquivalentClass(h)&&b(f,"equalsExact",this,1).call(this,h,m)}return b(f,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return ve.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var h=new Ke,m=0;m<this._geometries.length;m++)for(var $=this._geometries[m].getBoundary(),A=0;A<$.getNumGeometries();A++)h.add($.getGeometryN(A));var I=new Array(h.size()).fill(null);return this.getFactory().createMultiLineString(h.toArray(I))}},{key:"getGeometryType",value:function(){return ve.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Ge]}}],[{key:"constructor_",value:function(){var h=arguments[0],m=arguments[1];Di.constructor_.call(this,h,m)}}])}(Di),V0=function(){return s(function y(){a(this,y)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),gy=function(y){function f(){var h;return a(this,f),(h=i(this,f)).map=new Map,h}return c(f,y),s(f,[{key:"get",value:function(h){return this.map.get(h)||null}},{key:"put",value:function(h,m){return this.map.set(h,m),m}},{key:"values",value:function(){for(var h=new Ke,m=this.map.values(),$=m.next();!$.done;)h.add($.value),$=m.next();return h}},{key:"entrySet",value:function(){var h=new Cn;return this.map.entries().forEach(function(m){return h.add(m)}),h}},{key:"size",value:function(){return this.map.size()}}])}(V0),Ci=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"equals",value:function(f){if(!(f instanceof y))return!1;var h=f;return this._modelType===h._modelType&&this._scale===h._scale}},{key:"compareTo",value:function(f){var h=f,m=this.getMaximumSignificantDigits(),$=h.getMaximumSignificantDigits();return Ka.compare(m,$)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===y.FLOATING||this._modelType===y.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var f="UNKNOWN";return this._modelType===y.FLOATING?f="Floating":this._modelType===y.FLOATING_SINGLE?f="Floating-Single":this._modelType===y.FIXED&&(f="Fixed (Scale="+this.getScale()+")"),f}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var f=arguments[0];return Y.isNaN(f)||this._modelType===y.FLOATING_SINGLE?f:this._modelType===y.FIXED?Math.round(f*this._scale)/this._scale:f}if(arguments[0]instanceof ie){var h=arguments[0];if(this._modelType===y.FLOATING)return null;h.x=this.makePrecise(h.x),h.y=this.makePrecise(h.y)}}},{key:"getMaximumSignificantDigits",value:function(){var f=16;return this._modelType===y.FLOATING?f=16:this._modelType===y.FLOATING_SINGLE?f=6:this._modelType===y.FIXED&&(f=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),f}},{key:"setScale",value:function(f){this._scale=Math.abs(f)}},{key:"interfaces_",get:function(){return[q,R]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=y.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Yl){var f=arguments[0];this._modelType=f,f===y.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var h=arguments[0];this._modelType=y.FIXED,this.setScale(h)}else if(arguments[0]instanceof y){var m=arguments[0];this._modelType=m._modelType,this._scale=m._scale}}}},{key:"mostPrecise",value:function(f,h){return f.compareTo(h)>=0?f:h}}])}(),Yl=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"readResolve",value:function(){return y.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){this._name=null;var f=arguments[0];this._name=f,y.nameToTypeMap.put(f,this)}}])}();Yl.nameToTypeMap=new gy,Ci.Type=Yl,Ci.FIXED=new Yl("FIXED"),Ci.FLOATING=new Yl("FLOATING"),Ci.FLOATING_SINGLE=new Yl("FLOATING SINGLE"),Ci.maximumPreciseValue=9007199254740992;var lp=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),m=0;m<h.length;m++)h[m]=this._geometries[m].copy();return new f(h,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],m=arguments[1];return!!this.isEquivalentClass(h)&&b(f,"equalsExact",this,1).call(this,h,m)}return b(f,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Re.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var h=0;h<this._geometries.length;h++)if(!this._geometries[h].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return ve.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new Rt}},{key:"getGeometryType",value:function(){return ve.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[z0]}}],[{key:"constructor_",value:function(){var h=arguments[0],m=arguments[1];Di.constructor_.call(this,h,m)}}])}(Di),eo=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"createEmpty",value:function(f){switch(f){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new D("Invalid dimension: "+f)}}},{key:"toGeometry",value:function(f){return f.isNull()?this.createPoint():f.getMinX()===f.getMaxX()&&f.getMinY()===f.getMaxY()?this.createPoint(new ie(f.getMinX(),f.getMinY())):f.getMinX()===f.getMaxX()||f.getMinY()===f.getMaxY()?this.createLineString([new ie(f.getMinX(),f.getMinY()),new ie(f.getMaxX(),f.getMaxY())]):this.createPolygon(this.createLinearRing([new ie(f.getMinX(),f.getMinY()),new ie(f.getMinX(),f.getMaxY()),new ie(f.getMaxX(),f.getMaxY()),new ie(f.getMaxX(),f.getMinY()),new ie(f.getMinX(),f.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var f=arguments[0];return this.createLineString(f!==null?this.getCoordinateSequenceFactory().create(f):null)}if(tt(arguments[0],yt))return new Jf(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new lp(null,this):arguments.length===1?new lp(arguments[0],this):void 0}},{key:"buildGeometry",value:function(f){for(var h=null,m=!1,$=!1,A=f.iterator();A.hasNext();){var I=A.next(),N=I.getTypeCode();h===null&&(h=N),N!==h&&(m=!0),I instanceof Di&&($=!0)}if(h===null)return this.createGeometryCollection();if(m||$)return this.createGeometryCollection(y.toGeometryArray(f));var B=f.iterator().next();if(f.size()>1){if(B instanceof Kf)return this.createMultiPolygon(y.toPolygonArray(f));if(B instanceof Jf)return this.createMultiLineString(y.toLineStringArray(f));if(B instanceof dy)return this.createMultiPoint(y.toPointArray(f));U.shouldNeverReachHere("Unhandled geometry type: "+B.getGeometryType())}return B}},{key:"createMultiPointFromCoords",value:function(f){return this.createMultiPoint(f!==null?this.getCoordinateSequenceFactory().create(f):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof ie){var f=arguments[0];return this.createPoint(f!==null?this.getCoordinateSequenceFactory().create([f]):null)}if(tt(arguments[0],yt))return new dy(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(tt(arguments[0],yt)){var f=arguments[0];return this.createPolygon(this.createLinearRing(f))}if(arguments[0]instanceof Array){var h=arguments[0];return this.createPolygon(this.createLinearRing(h))}if(arguments[0]instanceof Qr){var m=arguments[0];return this.createPolygon(m,null)}}else if(arguments.length===2)return new Kf(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Di(null,this):arguments.length===1?new Di(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var f=arguments[0];return this.createLinearRing(f!==null?this.getCoordinateSequenceFactory().create(f):null)}if(tt(arguments[0],yt))return new Qr(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new py(null,this):arguments.length===1?new py(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new ap(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new ap(arguments[0],this);if(tt(arguments[0],yt)){var f=arguments[0];if(f===null)return this.createMultiPoint(new Array(0).fill(null));for(var h=new Array(f.size()).fill(null),m=0;m<f.size();m++){var $=this.getCoordinateSequenceFactory().create(1,f.getDimension(),f.getMeasures());Gl.copy(f,m,$,0,1),h[m]=this.createPoint($)}return this.createMultiPoint(h)}}}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)y.constructor_.call(this,new Ci,0);else if(arguments.length===1){if(tt(arguments[0],uy)){var f=arguments[0];y.constructor_.call(this,new Ci,0,f)}else if(arguments[0]instanceof Ci){var h=arguments[0];y.constructor_.call(this,h,0,y.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var m=arguments[0],$=arguments[1];y.constructor_.call(this,m,$,y.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var A=arguments[0],I=arguments[1],N=arguments[2];this._precisionModel=A,this._coordinateSequenceFactory=N,this._SRID=I}}},{key:"toMultiPolygonArray",value:function(f){var h=new Array(f.size()).fill(null);return f.toArray(h)}},{key:"toGeometryArray",value:function(f){if(f===null)return null;var h=new Array(f.size()).fill(null);return f.toArray(h)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return hy.instance()}},{key:"toMultiLineStringArray",value:function(f){var h=new Array(f.size()).fill(null);return f.toArray(h)}},{key:"toLineStringArray",value:function(f){var h=new Array(f.size()).fill(null);return f.toArray(h)}},{key:"toMultiPointArray",value:function(f){var h=new Array(f.size()).fill(null);return f.toArray(h)}},{key:"toLinearRingArray",value:function(f){var h=new Array(f.size()).fill(null);return f.toArray(h)}},{key:"toPointArray",value:function(f){var h=new Array(f.size()).fill(null);return f.toArray(h)}},{key:"toPolygonArray",value:function(f){var h=new Array(f.size()).fill(null);return f.toArray(h)}},{key:"createPointFromInternalCoord",value:function(f,h){return h.getPrecisionModel().makePrecise(f),h.getFactory().createPoint(f)}}])}(),$t="XY",un="XYZ",up="XYM",ud="XYZM",Xl={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},dp="EMPTY",at=1,zt=2,to=3,tc=4,Kn=5,OS=6;for(var fp in Xl)Xl[fp].toUpperCase();var Zl=function(){return s(function y(f){a(this,y),this.wkt=f,this.index_=-1},[{key:"isAlpha_",value:function(y){return y>="a"&&y<="z"||y>="A"&&y<="Z"}},{key:"isNumeric_",value:function(y,f){return y>="0"&&y<="9"||y=="."&&!(f!==void 0&&f)}},{key:"isWhiteSpace_",value:function(y){return y==" "||y=="	"||y=="\r"||y==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var y,f=this.nextChar_(),h=this.index_,m=f;if(f=="(")y=zt;else if(f==",")y=Kn;else if(f==")")y=to;else if(this.isNumeric_(f)||f=="-")y=tc,m=this.readNumber_();else if(this.isAlpha_(f))y=at,m=this.readText_();else{if(this.isWhiteSpace_(f))return this.nextToken();if(f!=="")throw new Error("Unexpected character: "+f);y=OS}return{position:h,value:m,type:y}}},{key:"readNumber_",value:function(){var y,f=this.index_,h=!1,m=!1;do y=="."?h=!0:y!="e"&&y!="E"||(m=!0),y=this.nextChar_();while(this.isNumeric_(y,h)||!m&&(y=="e"||y=="E")||m&&(y=="-"||y=="+"));return parseFloat(this.wkt.substring(f,this.index_--))}},{key:"readText_",value:function(){var y,f=this.index_;do y=this.nextChar_();while(this.isAlpha_(y));return this.wkt.substring(f,this.index_--).toUpperCase()}}])}(),In=function(){return s(function y(f,h){a(this,y),this.lexer_=f,this.token_,this.layout_=$t,this.factory=h},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(y){return this.token_.type==y}},{key:"match",value:function(y){var f=this.isTokenType(y);return f&&this.consume_(),f}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var y=$t,f=this.token_;if(this.isTokenType(at)){var h=f.value;h==="Z"?y=un:h==="M"?y=up:h==="ZM"&&(y=ud),y!==$t&&this.consume_()}return y}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(zt)){var y=[];do y.push(this.parseGeometry_());while(this.match(Kn));if(this.match(to))return y}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(zt)){var y=this.parsePoint_();if(this.match(to))return y}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(zt)){var y=this.parsePointList_();if(this.match(to))return y}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(zt)){var y=this.parseLineStringTextList_();if(this.match(to))return y}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var y;if(this.match(zt)){if(y=this.token_.type==zt?this.parsePointTextList_():this.parsePointList_(),this.match(to))return y}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(zt)){var y=this.parseLineStringTextList_();if(this.match(to))return y}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(zt)){var y=this.parsePolygonTextList_();if(this.match(to))return y}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var y=[],f=this.layout_.length,h=0;h<f;++h){var m=this.token_;if(!this.match(tc))break;y.push(m.value)}if(y.length==f)return y;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var y=[this.parsePoint_()];this.match(Kn);)y.push(this.parsePoint_());return y}},{key:"parsePointTextList_",value:function(){for(var y=[this.parsePointText_()];this.match(Kn);)y.push(this.parsePointText_());return y}},{key:"parseLineStringTextList_",value:function(){for(var y=[this.parseLineStringText_()];this.match(Kn);)y.push(this.parseLineStringText_());return y}},{key:"parsePolygonTextList_",value:function(){for(var y=[this.parsePolygonText_()];this.match(Kn);)y.push(this.parsePolygonText_());return y}},{key:"isEmptyGeometry_",value:function(){var y=this.isTokenType(at)&&this.token_.value==dp;return y&&this.consume_(),y}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var y=this.factory,f=function(Ye){return r(ie,x(Ye))},h=function(Ye){var Et=Ye.map(function(ct){return y.createLinearRing(ct.map(f))});return Et.length>1?y.createPolygon(Et[0],Et.slice(1)):y.createPolygon(Et[0])},m=this.token_;if(this.match(at)){var $=m.value;if(this.layout_=this.parseGeometryLayout_(),$=="GEOMETRYCOLLECTION"){var A=this.parseGeometryCollectionText_();return y.createGeometryCollection(A)}switch($){case"POINT":var I=this.parsePointText_();return I?y.createPoint(r(ie,x(I))):y.createPoint();case"LINESTRING":var N=this.parseLineStringText_().map(f);return y.createLineString(N);case"LINEARRING":var B=this.parseLineStringText_().map(f);return y.createLinearRing(B);case"POLYGON":var J=this.parsePolygonText_();return J&&J.length!==0?h(J):y.createPolygon();case"MULTIPOINT":var le=this.parseMultiPointText_();if(!le||le.length===0)return y.createMultiPoint();var de=le.map(f).map(function(Ye){return y.createPoint(Ye)});return y.createMultiPoint(de);case"MULTILINESTRING":var be=this.parseMultiLineStringText_().map(function(Ye){return y.createLineString(Ye.map(f))});return y.createMultiLineString(be);case"MULTIPOLYGON":var Pe=this.parseMultiPolygonText_();if(!Pe||Pe.length===0)return y.createMultiPolygon();var Ue=Pe.map(h);return y.createMultiPolygon(Ue);default:throw new Error("Invalid geometry type: "+$)}}throw new Error(this.formatErrorMessage_())}}])}();function qs(y){if(y.isEmpty())return"";var f=y.getCoordinate(),h=[f.x,f.y];return f.z===void 0||Number.isNaN(f.z)||h.push(f.z),f.m===void 0||Number.isNaN(f.m)||h.push(f.m),h.join(" ")}function Bo(y){for(var f=y.getCoordinates().map(function(A){var I=[A.x,A.y];return A.z===void 0||Number.isNaN(A.z)||I.push(A.z),A.m===void 0||Number.isNaN(A.m)||I.push(A.m),I}),h=[],m=0,$=f.length;m<$;++m)h.push(f[m].join(" "));return h.join(", ")}function dd(y){var f=[];f.push("("+Bo(y.getExteriorRing())+")");for(var h=0,m=y.getNumInteriorRing();h<m;++h)f.push("("+Bo(y.getInteriorRingN(h))+")");return f.join(", ")}var my={Point:qs,LineString:Bo,LinearRing:Bo,Polygon:dd,MultiPoint:function(y){for(var f=[],h=0,m=y.getNumGeometries();h<m;++h)f.push("("+qs(y.getGeometryN(h))+")");return f.join(", ")},MultiLineString:function(y){for(var f=[],h=0,m=y.getNumGeometries();h<m;++h)f.push("("+Bo(y.getGeometryN(h))+")");return f.join(", ")},MultiPolygon:function(y){for(var f=[],h=0,m=y.getNumGeometries();h<m;++h)f.push("("+dd(y.getGeometryN(h))+")");return f.join(", ")},GeometryCollection:function(y){for(var f=[],h=0,m=y.getNumGeometries();h<m;++h)f.push(fd(y.getGeometryN(h)));return f.join(", ")}};function fd(y){var f=y.getGeometryType(),h=my[f];f=f.toUpperCase();var m=function($){var A="";if($.isEmpty())return A;var I=$.getCoordinate();return I.z===void 0||Number.isNaN(I.z)||(A+="Z"),I.m===void 0||Number.isNaN(I.m)||(A+="M"),A}(y);return m.length>0&&(f+=" "+m),y.isEmpty()?f+" "+dp:f+" ("+h(y)+")"}var yy=function(){return s(function y(f){a(this,y),this.geometryFactory=f||new eo,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(y){var f=new Zl(y);return new In(f,this.geometryFactory).parse()}},{key:"write",value:function(y){return fd(y)}}])}(),nc=function(){return s(function y(f){a(this,y),this.parser=new yy(f)},[{key:"write",value:function(y){return this.parser.write(y)}}],[{key:"toLineString",value:function(y,f){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+y.x+" "+y.y+", "+f.x+" "+f.y+" )"}}])}(),Bt=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"getIndexAlongSegment",value:function(f,h){return this.computeIntLineIndex(),this._intLineIndex[f][h]}},{key:"getTopologySummary",value:function(){var f=new sp;return this.isEndPoint()&&f.append(" endpoint"),this._isProper&&f.append(" proper"),this.isCollinear()&&f.append(" collinear"),f.toString()}},{key:"computeIntersection",value:function(f,h,m,$){this._inputLines[0][0]=f,this._inputLines[0][1]=h,this._inputLines[1][0]=m,this._inputLines[1][1]=$,this._result=this.computeIntersect(f,h,m,$)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var f=arguments[0];this.getEdgeDistance(f,0)>this.getEdgeDistance(f,1)?(this._intLineIndex[f][0]=0,this._intLineIndex[f][1]=1):(this._intLineIndex[f][0]=1,this._intLineIndex[f][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(f){this._precisionModel=f}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var f=arguments[0],h=0;h<this._result;h++)if(!this._intPt[h].equals2D(this._inputLines[f][0])&&!this._intPt[h].equals2D(this._inputLines[f][1]))return!0;return!1}}},{key:"getIntersection",value:function(f){return this._intPt[f]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==y.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(f,h){return y.computeEdgeDistance(this._intPt[h],this._inputLines[f][0],this._inputLines[f][1])}},{key:"isCollinear",value:function(){return this._result===y.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return nc.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+nc.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(f,h){return this._inputLines[f][h]}},{key:"isIntersection",value:function(f){for(var h=0;h<this._result;h++)if(this._intPt[h].equals2D(f))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(f,h){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[f][h]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ie,this._intPt[1]=new ie,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(f,h,m){var $=Math.abs(m.x-h.x),A=Math.abs(m.y-h.y),I=-1;if(f.equals(h))I=0;else if(f.equals(m))I=$>A?$:A;else{var N=Math.abs(f.x-h.x),B=Math.abs(f.y-h.y);(I=$>A?N:B)!==0||f.equals(h)||(I=Math.max(N,B))}return U.isTrue(!(I===0&&!f.equals(h)),"Bad distance calculation"),I}},{key:"nonRobustComputeEdgeDistance",value:function(f,h,m){var $=f.x-h.x,A=f.y-h.y,I=Math.sqrt($*$+A*A);return U.isTrue(!(I===0&&!f.equals(h)),"Invalid distance calculation"),I}}])}();Bt.DONT_INTERSECT=0,Bt.DO_INTERSECT=1,Bt.COLLINEAR=2,Bt.NO_INTERSECTION=0,Bt.POINT_INTERSECTION=1,Bt.COLLINEAR_INTERSECTION=2;var Vo=function(y){function f(){return a(this,f),i(this,f)}return c(f,y),s(f,[{key:"isInSegmentEnvelopes",value:function(h){var m=new xe(this._inputLines[0][0],this._inputLines[0][1]),$=new xe(this._inputLines[1][0],this._inputLines[1][1]);return m.contains(h)&&$.contains(h)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return b(f,"computeIntersection",this,1).apply(this,arguments);var h=arguments[0],m=arguments[1],$=arguments[2];if(this._isProper=!1,xe.intersects(m,$,h)&&Qe.index(m,$,h)===0&&Qe.index($,m,h)===0)return this._isProper=!0,(h.equals(m)||h.equals($))&&(this._isProper=!1),this._result=Bt.POINT_INTERSECTION,null;this._result=Bt.NO_INTERSECTION}},{key:"intersection",value:function(h,m,$,A){var I=this.intersectionSafe(h,m,$,A);return this.isInSegmentEnvelopes(I)||(I=new ie(f.nearestEndpoint(h,m,$,A))),this._precisionModel!==null&&this._precisionModel.makePrecise(I),I}},{key:"checkDD",value:function(h,m,$,A,I){var N=od.intersection(h,m,$,A),B=this.isInSegmentEnvelopes(N);Qa.out.println("DD in env = "+B+"  --------------------- "+N),I.distance(N)>1e-4&&Qa.out.println("Distance = "+I.distance(N))}},{key:"intersectionSafe",value:function(h,m,$,A){var I=ly.intersection(h,m,$,A);return I===null&&(I=f.nearestEndpoint(h,m,$,A)),I}},{key:"computeCollinearIntersection",value:function(h,m,$,A){var I=xe.intersects(h,m,$),N=xe.intersects(h,m,A),B=xe.intersects($,A,h),J=xe.intersects($,A,m);return I&&N?(this._intPt[0]=$,this._intPt[1]=A,Bt.COLLINEAR_INTERSECTION):B&&J?(this._intPt[0]=h,this._intPt[1]=m,Bt.COLLINEAR_INTERSECTION):I&&B?(this._intPt[0]=$,this._intPt[1]=h,!$.equals(h)||N||J?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):I&&J?(this._intPt[0]=$,this._intPt[1]=m,!$.equals(m)||N||B?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):N&&B?(this._intPt[0]=A,this._intPt[1]=h,!A.equals(h)||I||J?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):N&&J?(this._intPt[0]=A,this._intPt[1]=m,!A.equals(m)||I||B?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):Bt.NO_INTERSECTION}},{key:"computeIntersect",value:function(h,m,$,A){if(this._isProper=!1,!xe.intersects(h,m,$,A))return Bt.NO_INTERSECTION;var I=Qe.index(h,m,$),N=Qe.index(h,m,A);if(I>0&&N>0||I<0&&N<0)return Bt.NO_INTERSECTION;var B=Qe.index($,A,h),J=Qe.index($,A,m);return B>0&&J>0||B<0&&J<0?Bt.NO_INTERSECTION:I===0&&N===0&&B===0&&J===0?this.computeCollinearIntersection(h,m,$,A):(I===0||N===0||B===0||J===0?(this._isProper=!1,h.equals2D($)||h.equals2D(A)?this._intPt[0]=h:m.equals2D($)||m.equals2D(A)?this._intPt[0]=m:I===0?this._intPt[0]=new ie($):N===0?this._intPt[0]=new ie(A):B===0?this._intPt[0]=new ie(h):J===0&&(this._intPt[0]=new ie(m))):(this._isProper=!0,this._intPt[0]=this.intersection(h,m,$,A)),Bt.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(h,m,$,A){var I=h,N=Tr.pointToSegment(h,$,A),B=Tr.pointToSegment(m,$,A);return B<N&&(N=B,I=m),(B=Tr.pointToSegment($,h,m))<N&&(N=B,I=$),(B=Tr.pointToSegment(A,h,m))<N&&(N=B,I=A),I}}])}(Bt),vy=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"countSegment",value:function(f,h){if(f.x<this._p.x&&h.x<this._p.x)return null;if(this._p.x===h.x&&this._p.y===h.y)return this._isPointOnSegment=!0,null;if(f.y===this._p.y&&h.y===this._p.y){var m=f.x,$=h.x;return m>$&&(m=h.x,$=f.x),this._p.x>=m&&this._p.x<=$&&(this._isPointOnSegment=!0),null}if(f.y>this._p.y&&h.y<=this._p.y||h.y>this._p.y&&f.y<=this._p.y){var A=Qe.index(f,h,this._p);if(A===Qe.COLLINEAR)return this._isPointOnSegment=!0,null;h.y<f.y&&(A=-A),A===Qe.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==G.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?G.BOUNDARY:this._crossingCount%2==1?G.INTERIOR:G.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var f=arguments[0];this._p=f}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof ie&&tt(arguments[1],yt)){for(var f=arguments[1],h=new y(arguments[0]),m=new ie,$=new ie,A=1;A<f.size();A++)if(f.getCoordinate(A,m),f.getCoordinate(A-1,$),h.countSegment(m,$),h.isOnSegment())return h.getLocation();return h.getLocation()}if(arguments[0]instanceof ie&&arguments[1]instanceof Array){for(var I=arguments[1],N=new y(arguments[0]),B=1;B<I.length;B++){var J=I[B],le=I[B-1];if(N.countSegment(J,le),N.isOnSegment())return N.getLocation()}return N.getLocation()}}}])}(),cd=function(){function y(){a(this,y)}return s(y,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof ie&&tt(arguments[1],yt)){for(var f=arguments[0],h=arguments[1],m=new Vo,$=new ie,A=new ie,I=h.size(),N=1;N<I;N++)if(h.getCoordinate(N-1,$),h.getCoordinate(N,A),m.computeIntersection(f,$,A),m.hasIntersection())return!0;return!1}if(arguments[0]instanceof ie&&arguments[1]instanceof Array){for(var B=arguments[0],J=arguments[1],le=new Vo,de=1;de<J.length;de++){var be=J[de-1],Pe=J[de];if(le.computeIntersection(B,be,Pe),le.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(f,h){return vy.locatePointInRing(f,h)}},{key:"isInRing",value:function(f,h){return y.locateInRing(f,h)!==G.EXTERIOR}}])}(),ka=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"setAllLocations",value:function(f){for(var h=0;h<this.location.length;h++)this.location[h]=f}},{key:"isNull",value:function(){for(var f=0;f<this.location.length;f++)if(this.location[f]!==G.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(f){for(var h=0;h<this.location.length;h++)this.location[h]===G.NONE&&(this.location[h]=f)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(f){if(f.location.length>this.location.length){var h=new Array(3).fill(null);h[Se.ON]=this.location[Se.ON],h[Se.LEFT]=G.NONE,h[Se.RIGHT]=G.NONE,this.location=h}for(var m=0;m<this.location.length;m++)this.location[m]===G.NONE&&m<f.location.length&&(this.location[m]=f.location[m])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var f=this.location[Se.LEFT];this.location[Se.LEFT]=this.location[Se.RIGHT],this.location[Se.RIGHT]=f}},{key:"toString",value:function(){var f=new Uo;return this.location.length>1&&f.append(G.toLocationSymbol(this.location[Se.LEFT])),f.append(G.toLocationSymbol(this.location[Se.ON])),this.location.length>1&&f.append(G.toLocationSymbol(this.location[Se.RIGHT])),f.toString()}},{key:"setLocations",value:function(f,h,m){this.location[Se.ON]=f,this.location[Se.LEFT]=h,this.location[Se.RIGHT]=m}},{key:"get",value:function(f){return f<this.location.length?this.location[f]:G.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var f=0;f<this.location.length;f++)if(this.location[f]===G.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var f=arguments[0];this.setLocation(Se.ON,f)}else if(arguments.length===2){var h=arguments[0],m=arguments[1];this.location[h]=m}}},{key:"init",value:function(f){this.location=new Array(f).fill(null),this.setAllLocations(G.NONE)}},{key:"isEqualOnSide",value:function(f,h){return this.location[h]===f.location[h]}},{key:"allPositionsEqual",value:function(f){for(var h=0;h<this.location.length;h++)if(this.location[h]!==f)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var f=arguments[0];this.init(f.length)}else if(Number.isInteger(arguments[0])){var h=arguments[0];this.init(1),this.location[Se.ON]=h}else if(arguments[0]instanceof y){var m=arguments[0];if(this.init(m.location.length),m!==null)for(var $=0;$<this.location.length;$++)this.location[$]=m.location[$]}}else if(arguments.length===3){var A=arguments[0],I=arguments[1],N=arguments[2];this.init(3),this.location[Se.ON]=A,this.location[Se.LEFT]=I,this.location[Se.RIGHT]=N}}}])}(),Zi=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"getGeometryCount",value:function(){var f=0;return this.elt[0].isNull()||f++,this.elt[1].isNull()||f++,f}},{key:"setAllLocations",value:function(f,h){this.elt[f].setAllLocations(h)}},{key:"isNull",value:function(f){return this.elt[f].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var f=arguments[0];this.setAllLocationsIfNull(0,f),this.setAllLocationsIfNull(1,f)}else if(arguments.length===2){var h=arguments[0],m=arguments[1];this.elt[h].setAllLocationsIfNull(m)}}},{key:"isLine",value:function(f){return this.elt[f].isLine()}},{key:"merge",value:function(f){for(var h=0;h<2;h++)this.elt[h]===null&&f.elt[h]!==null?this.elt[h]=new ka(f.elt[h]):this.elt[h].merge(f.elt[h])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var f=arguments[0];return this.elt[f].get(Se.ON)}if(arguments.length===2){var h=arguments[0],m=arguments[1];return this.elt[h].get(m)}}},{key:"toString",value:function(){var f=new Uo;return this.elt[0]!==null&&(f.append("A:"),f.append(this.elt[0].toString())),this.elt[1]!==null&&(f.append(" B:"),f.append(this.elt[1].toString())),f.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var f=arguments[0];return this.elt[f].isArea()}}},{key:"isAnyNull",value:function(f){return this.elt[f].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var f=arguments[0],h=arguments[1];this.elt[f].setLocation(Se.ON,h)}else if(arguments.length===3){var m=arguments[0],$=arguments[1],A=arguments[2];this.elt[m].setLocation($,A)}}},{key:"isEqualOnSide",value:function(f,h){return this.elt[0].isEqualOnSide(f.elt[0],h)&&this.elt[1].isEqualOnSide(f.elt[1],h)}},{key:"allPositionsEqual",value:function(f,h){return this.elt[f].allPositionsEqual(h)}},{key:"toLine",value:function(f){this.elt[f].isArea()&&(this.elt[f]=new ka(this.elt[f].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var f=arguments[0];this.elt[0]=new ka(f),this.elt[1]=new ka(f)}else if(arguments[0]instanceof y){var h=arguments[0];this.elt[0]=new ka(h.elt[0]),this.elt[1]=new ka(h.elt[1])}}else if(arguments.length===2){var m=arguments[0],$=arguments[1];this.elt[0]=new ka(G.NONE),this.elt[1]=new ka(G.NONE),this.elt[m].setLocation($)}else if(arguments.length===3){var A=arguments[0],I=arguments[1],N=arguments[2];this.elt[0]=new ka(A,I,N),this.elt[1]=new ka(A,I,N)}else if(arguments.length===4){var B=arguments[0],J=arguments[1],le=arguments[2],de=arguments[3];this.elt[0]=new ka(G.NONE,G.NONE,G.NONE),this.elt[1]=new ka(G.NONE,G.NONE,G.NONE),this.elt[B].setLocations(J,le,de)}}},{key:"toLineLabel",value:function(f){for(var h=new y(G.NONE),m=0;m<2;m++)h.setLocation(m,f.getLocation(m));return h}}])}(),cp=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var y=new Array(this._pts.size()).fill(null),f=0;f<this._pts.size();f++)y[f]=this._pts.get(f);this._ring=this._geometryFactory.createLinearRing(y),this._isHole=Qe.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(y){this._startDe=y;var f=y,h=!0;do{if(f===null)throw new Kr("Found null DirectedEdge");if(f.getEdgeRing()===this)throw new Kr("Directed Edge visited twice during ring-building at "+f.getCoordinate());this._edges.add(f);var m=f.getLabel();U.isTrue(m.isArea()),this.mergeLabel(m),this.addPoints(f.getEdge(),f.isForward(),h),h=!1,this.setEdgeRing(f,this),f=this.getNext(f)}while(f!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(y){return this._pts.get(y)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var y=this._startDe;do{var f=y.getNode().getEdges().getOutgoingDegree(this);f>this._maxNodeDegree&&(this._maxNodeDegree=f),y=this.getNext(y)}while(y!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(y,f,h){var m=y.getCoordinates();if(f){var $=1;h&&($=0);for(var A=$;A<m.length;A++)this._pts.add(m[A])}else{var I=m.length-2;h&&(I=m.length-1);for(var N=I;N>=0;N--)this._pts.add(m[N])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var y=this._startDe;do y.getEdge().setInResult(!0),y=y.getNext();while(y!==this._startDe)}},{key:"containsPoint",value:function(y){var f=this.getLinearRing();if(!f.getEnvelopeInternal().contains(y)||!cd.isInRing(y,f.getCoordinates()))return!1;for(var h=this._holes.iterator();h.hasNext();)if(h.next().containsPoint(y))return!1;return!0}},{key:"addHole",value:function(y){this._holes.add(y)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var y=arguments[0];this.mergeLabel(y,0),this.mergeLabel(y,1)}else if(arguments.length===2){var f=arguments[1],h=arguments[0].getLocation(f,Se.RIGHT);if(h===G.NONE)return null;if(this._label.getLocation(f)===G.NONE)return this._label.setLocation(f,h),null}}},{key:"setShell",value:function(y){this._shell=y,y!==null&&y.addHole(this)}},{key:"toPolygon",value:function(y){for(var f=new Array(this._holes.size()).fill(null),h=0;h<this._holes.size();h++)f[h]=this._holes.get(h).getLinearRing();return y.createPolygon(this.getLinearRing(),f)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ke,this._pts=new Ke,this._label=new Zi(G.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ke,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var y=arguments[0],f=arguments[1];this._geometryFactory=f,this.computePoints(y),this.computeRing()}}}}])}(),ot=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"setEdgeRing",value:function(h,m){h.setMinEdgeRing(m)}},{key:"getNext",value:function(h){return h.getNextMin()}}],[{key:"constructor_",value:function(){var h=arguments[0],m=arguments[1];cp.constructor_.call(this,h,m)}}])}(cp),no=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"buildMinimalRings",value:function(){var h=new Ke,m=this._startDe;do{if(m.getMinEdgeRing()===null){var $=new ot(m,this._geometryFactory);h.add($)}m=m.getNext()}while(m!==this._startDe);return h}},{key:"setEdgeRing",value:function(h,m){h.setEdgeRing(m)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var h=this._startDe;do h.getNode().getEdges().linkMinimalDirectedEdges(this),h=h.getNext();while(h!==this._startDe)}},{key:"getNext",value:function(h){return h.getNext()}}],[{key:"constructor_",value:function(){var h=arguments[0],m=arguments[1];cp.constructor_.call(this,h,m)}}])}(cp),Vt=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(y){this._isVisited=y}},{key:"setInResult",value:function(y){this._isInResult=y}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(y){this._label=y}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(y){this._isCovered=y,this._isCoveredSet=!0}},{key:"updateIM",value:function(y){U.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(y)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var y=arguments[0];this._label=y}}}}])}(),ic=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"isIncidentEdgeInResult",value:function(){for(var h=this.getEdges().getEdges().iterator();h.hasNext();)if(h.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(h){h.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(h){}},{key:"computeMergedLocation",value:function(h,m){var $=G.NONE;if($=this._label.getLocation(m),!h.isNull(m)){var A=h.getLocation(m);$!==G.BOUNDARY&&($=A)}return $}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return b(f,"setLabel",this,1).apply(this,arguments);var h=arguments[0],m=arguments[1];this._label===null?this._label=new Zi(h,m):this._label.setLocation(h,m)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof f){var h=arguments[0];this.mergeLabel(h._label)}else if(arguments[0]instanceof Zi)for(var m=arguments[0],$=0;$<2;$++){var A=this.computeMergedLocation(m,$);this._label.getLocation($)===G.NONE&&this._label.setLocation($,A)}}},{key:"add",value:function(h){this._edges.insert(h),h.setNode(this)}},{key:"setLabelBoundary",value:function(h){if(this._label===null)return null;var m=G.NONE;this._label!==null&&(m=this._label.getLocation(h));var $=null;switch(m){case G.BOUNDARY:$=G.INTERIOR;break;case G.INTERIOR:default:$=G.BOUNDARY}this._label.setLocation(h,$)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var h=arguments[0],m=arguments[1];this._coord=h,this._edges=m,this._label=new Zi(0,G.NONE)}}])}(Vt),by=function(y){function f(){return a(this,f),i(this,f,arguments)}return c(f,y),s(f)}(V0);function hp(y){return y==null?0:y.color}function Tt(y){return y==null?null:y.parent}function fi(y,f){y!==null&&(y.color=f)}function ac(y){return y==null?null:y.left}function hd(y){return y==null?null:y.right}var xn=function(y){function f(){var h;return a(this,f),(h=i(this,f)).root_=null,h.size_=0,h}return c(f,y),s(f,[{key:"get",value:function(h){for(var m=this.root_;m!==null;){var $=h.compareTo(m.key);if($<0)m=m.left;else{if(!($>0))return m.value;m=m.right}}return null}},{key:"put",value:function(h,m){if(this.root_===null)return this.root_={key:h,value:m,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var $,A,I=this.root_;do if($=I,(A=h.compareTo(I.key))<0)I=I.left;else{if(!(A>0)){var N=I.value;return I.value=m,N}I=I.right}while(I!==null);var B={key:h,left:null,right:null,value:m,parent:$,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return A<0?$.left=B:$.right=B,this.fixAfterInsertion(B),this.size_++,null}},{key:"fixAfterInsertion",value:function(h){var m;for(h.color=1;h!=null&&h!==this.root_&&h.parent.color===1;)Tt(h)===ac(Tt(Tt(h)))?hp(m=hd(Tt(Tt(h))))===1?(fi(Tt(h),0),fi(m,0),fi(Tt(Tt(h)),1),h=Tt(Tt(h))):(h===hd(Tt(h))&&(h=Tt(h),this.rotateLeft(h)),fi(Tt(h),0),fi(Tt(Tt(h)),1),this.rotateRight(Tt(Tt(h)))):hp(m=ac(Tt(Tt(h))))===1?(fi(Tt(h),0),fi(m,0),fi(Tt(Tt(h)),1),h=Tt(Tt(h))):(h===ac(Tt(h))&&(h=Tt(h),this.rotateRight(h)),fi(Tt(h),0),fi(Tt(Tt(h)),1),this.rotateLeft(Tt(Tt(h))));this.root_.color=0}},{key:"values",value:function(){var h=new Ke,m=this.getFirstEntry();if(m!==null)for(h.add(m.value);(m=f.successor(m))!==null;)h.add(m.value);return h}},{key:"entrySet",value:function(){var h=new Cn,m=this.getFirstEntry();if(m!==null)for(h.add(m);(m=f.successor(m))!==null;)h.add(m);return h}},{key:"rotateLeft",value:function(h){if(h!=null){var m=h.right;h.right=m.left,m.left!=null&&(m.left.parent=h),m.parent=h.parent,h.parent==null?this.root_=m:h.parent.left===h?h.parent.left=m:h.parent.right=m,m.left=h,h.parent=m}}},{key:"rotateRight",value:function(h){if(h!=null){var m=h.left;h.left=m.right,m.right!=null&&(m.right.parent=h),m.parent=h.parent,h.parent==null?this.root_=m:h.parent.right===h?h.parent.right=m:h.parent.left=m,m.right=h,h.parent=m}}},{key:"getFirstEntry",value:function(){var h=this.root_;if(h!=null)for(;h.left!=null;)h=h.left;return h}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(h){for(var m=this.root_;m!==null;){var $=h.compareTo(m.key);if($<0)m=m.left;else{if(!($>0))return!0;m=m.right}}return!1}}],[{key:"successor",value:function(h){var m;if(h===null)return null;if(h.right!==null){for(m=h.right;m.left!==null;)m=m.left;return m}m=h.parent;for(var $=h;m!==null&&$===m.right;)$=m,m=m.parent;return m}}])}(by),js=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"find",value:function(y){return this.nodeMap.get(y)}},{key:"addNode",value:function(){if(arguments[0]instanceof ie){var y=arguments[0],f=this.nodeMap.get(y);return f===null&&(f=this.nodeFact.createNode(y),this.nodeMap.put(y,f)),f}if(arguments[0]instanceof ic){var h=arguments[0],m=this.nodeMap.get(h.getCoordinate());return m===null?(this.nodeMap.put(h.getCoordinate(),h),h):(m.mergeLabel(h),m)}}},{key:"print",value:function(y){for(var f=this.iterator();f.hasNext();)f.next().print(y)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(y){for(var f=new Ke,h=this.iterator();h.hasNext();){var m=h.next();m.getLabel().getLocation(y)===G.BOUNDARY&&f.add(m)}return f}},{key:"add",value:function(y){var f=y.getCoordinate();this.addNode(f).add(y)}}],[{key:"constructor_",value:function(){this.nodeMap=new xn,this.nodeFact=null;var y=arguments[0];this.nodeFact=y}}])}(),ci=function(){function y(){a(this,y)}return s(y,null,[{key:"isNorthern",value:function(f){return f===y.NE||f===y.NW}},{key:"isOpposite",value:function(f,h){return f!==h&&(f-h+4)%4===2}},{key:"commonHalfPlane",value:function(f,h){if(f===h)return f;if((f-h+4)%4===2)return-1;var m=f<h?f:h;return m===0&&(f>h?f:h)===3?3:m}},{key:"isInHalfPlane",value:function(f,h){return h===y.SE?f===y.SE||f===y.SW:f===h||f===h+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var f=arguments[0],h=arguments[1];if(f===0&&h===0)throw new D("Cannot compute the quadrant for point ( "+f+", "+h+" )");return f>=0?h>=0?y.NE:y.SE:h>=0?y.NW:y.SW}if(arguments[0]instanceof ie&&arguments[1]instanceof ie){var m=arguments[0],$=arguments[1];if($.x===m.x&&$.y===m.y)throw new D("Cannot compute the quadrant for two identical points "+m);return $.x>=m.x?$.y>=m.y?y.NE:y.SE:$.y>=m.y?y.NW:y.SW}}}])}();ci.NE=0,ci.NW=1,ci.SW=2,ci.SE=3;var _y=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"compareDirection",value:function(f){return this._dx===f._dx&&this._dy===f._dy?0:this._quadrant>f._quadrant?1:this._quadrant<f._quadrant?-1:Qe.index(f._p0,f._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(f){this._node=f}},{key:"print",value:function(f){var h=Math.atan2(this._dy,this._dx),m=this.getClass().getName(),$=m.lastIndexOf("."),A=m.substring($+1);f.print("  "+A+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+h+"   "+this._label)}},{key:"compareTo",value:function(f){var h=f;return this.compareDirection(h)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var f=Math.atan2(this._dy,this._dx),h=this.getClass().getName(),m=h.lastIndexOf(".");return"  "+h.substring(m+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+f+"   "+this._label}},{key:"computeLabel",value:function(f){}},{key:"init",value:function(f,h){this._p0=f,this._p1=h,this._dx=h.x-f.x,this._dy=h.y-f.y,this._quadrant=ci.quadrant(this._dx,this._dy),U.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[R]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var f=arguments[0];this._edge=f}else if(arguments.length===3){var h=arguments[0],m=arguments[1],$=arguments[2];y.constructor_.call(this,h,m,$,null)}else if(arguments.length===4){var A=arguments[0],I=arguments[1],N=arguments[2],B=arguments[3];y.constructor_.call(this,A),this.init(I,N),this._label=B}}}])}(),xy=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(h){return this._depth[h]}},{key:"setVisited",value:function(h){this._isVisited=h}},{key:"computeDirectedLabel",value:function(){this._label=new Zi(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(h,m){if(this._depth[h]!==-999&&this._depth[h]!==m)throw new Kr("assigned depths do not match",this.getCoordinate());this._depth[h]=m}},{key:"isInteriorAreaEdge",value:function(){for(var h=!0,m=0;m<2;m++)this._label.isArea(m)&&this._label.getLocation(m,Se.LEFT)===G.INTERIOR&&this._label.getLocation(m,Se.RIGHT)===G.INTERIOR||(h=!1);return h}},{key:"setNextMin",value:function(h){this._nextMin=h}},{key:"print",value:function(h){b(f,"print",this,1).call(this,h),h.print(" "+this._depth[Se.LEFT]+"/"+this._depth[Se.RIGHT]),h.print(" ("+this.getDepthDelta()+")"),this._isInResult&&h.print(" inResult")}},{key:"setMinEdgeRing",value:function(h){this._minEdgeRing=h}},{key:"isLineEdge",value:function(){var h=this._label.isLine(0)||this._label.isLine(1),m=!this._label.isArea(0)||this._label.allPositionsEqual(0,G.EXTERIOR),$=!this._label.isArea(1)||this._label.allPositionsEqual(1,G.EXTERIOR);return h&&m&&$}},{key:"setEdgeRing",value:function(h){this._edgeRing=h}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var h=this._edge.getDepthDelta();return this._isForward||(h=-h),h}},{key:"setInResult",value:function(h){this._isInResult=h}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(h){this.print(h),h.print(" "),this._isForward?this._edge.print(h):this._edge.printReverse(h)}},{key:"setSym",value:function(h){this._sym=h}},{key:"setVisitedEdge",value:function(h){this.setVisited(h),this._sym.setVisited(h)}},{key:"setEdgeDepths",value:function(h,m){var $=this.getEdge().getDepthDelta();this._isForward||($=-$);var A=1;h===Se.LEFT&&(A=-1);var I=Se.opposite(h),N=m+$*A;this.setDepth(h,m),this.setDepth(I,N)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(h){this._next=h}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var h=arguments[0],m=arguments[1];if(_y.constructor_.call(this,h),this._isForward=m,m)this.init(h.getCoordinate(0),h.getCoordinate(1));else{var $=h.getNumPoints()-1;this.init(h.getCoordinate($),h.getCoordinate($-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(h,m){return h===G.EXTERIOR&&m===G.INTERIOR?1:h===G.INTERIOR&&m===G.EXTERIOR?-1:0}}])}(_y),wy=function(){return s(function y(){a(this,y)},[{key:"createNode",value:function(y){return new ic(y,null)}}])}(),pp=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(y){y.println("Edges:");for(var f=0;f<this._edges.size();f++){y.println("edge "+f+":");var h=this._edges.get(f);h.print(y),h.eiList.print(y)}}},{key:"find",value:function(y){return this._nodes.find(y)}},{key:"addNode",value:function(){if(arguments[0]instanceof ic){var y=arguments[0];return this._nodes.addNode(y)}if(arguments[0]instanceof ie){var f=arguments[0];return this._nodes.addNode(f)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var y=this._nodes.iterator();y.hasNext();)y.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(y){Qa.out.println(y)}},{key:"isBoundaryNode",value:function(y,f){var h=this._nodes.find(f);if(h===null)return!1;var m=h.getLabel();return m!==null&&m.getLocation(y)===G.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var y=this._nodes.iterator();y.hasNext();)y.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(y,f,h,m){return!!y.equals(h)&&Qe.index(y,f,m)===Qe.COLLINEAR&&ci.quadrant(y,f)===ci.quadrant(h,m)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(y){Qa.out.print(y)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(y,f){for(var h=0;h<this._edges.size();h++){var m=this._edges.get(h),$=m.getCoordinates();if(this.matchInSameDirection(y,f,$[0],$[1])||this.matchInSameDirection(y,f,$[$.length-1],$[$.length-2]))return m}return null}},{key:"insertEdge",value:function(y){this._edges.add(y)}},{key:"findEdgeEnd",value:function(y){for(var f=this.getEdgeEnds().iterator();f.hasNext();){var h=f.next();if(h.getEdge()===y)return h}return null}},{key:"addEdges",value:function(y){for(var f=y.iterator();f.hasNext();){var h=f.next();this._edges.add(h);var m=new xy(h,!0),$=new xy(h,!1);m.setSym($),$.setSym(m),this.add(m),this.add($)}}},{key:"add",value:function(y){this._nodes.add(y),this._edgeEndList.add(y)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(y,f){for(var h=0;h<this._edges.size();h++){var m=this._edges.get(h),$=m.getCoordinates();if(y.equals($[0])&&f.equals($[1]))return m}return null}}],[{key:"constructor_",value:function(){if(this._edges=new Ke,this._nodes=null,this._edgeEndList=new Ke,arguments.length===0)this._nodes=new js(new wy);else if(arguments.length===1){var y=arguments[0];this._nodes=new js(y)}}},{key:"linkResultDirectedEdges",value:function(y){for(var f=y.iterator();f.hasNext();)f.next().getEdges().linkResultDirectedEdges()}}])}(),DS=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"sortShellsAndHoles",value:function(f,h,m){for(var $=f.iterator();$.hasNext();){var A=$.next();A.isHole()?m.add(A):h.add(A)}}},{key:"computePolygons",value:function(f){for(var h=new Ke,m=f.iterator();m.hasNext();){var $=m.next().toPolygon(this._geometryFactory);h.add($)}return h}},{key:"placeFreeHoles",value:function(f,h){for(var m=h.iterator();m.hasNext();){var $=m.next();if($.getShell()===null){var A=y.findEdgeRingContaining($,f);if(A===null)throw new Kr("unable to assign hole to a shell",$.getCoordinate(0));$.setShell(A)}}}},{key:"buildMinimalEdgeRings",value:function(f,h,m){for(var $=new Ke,A=f.iterator();A.hasNext();){var I=A.next();if(I.getMaxNodeDegree()>2){I.linkDirectedEdgesForMinimalEdgeRings();var N=I.buildMinimalRings(),B=this.findShell(N);B!==null?(this.placePolygonHoles(B,N),h.add(B)):m.addAll(N)}else $.add(I)}return $}},{key:"buildMaximalEdgeRings",value:function(f){for(var h=new Ke,m=f.iterator();m.hasNext();){var $=m.next();if($.isInResult()&&$.getLabel().isArea()&&$.getEdgeRing()===null){var A=new no($,this._geometryFactory);h.add(A),A.setInResult()}}return h}},{key:"placePolygonHoles",value:function(f,h){for(var m=h.iterator();m.hasNext();){var $=m.next();$.isHole()&&$.setShell(f)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(f){for(var h=0,m=null,$=f.iterator();$.hasNext();){var A=$.next();A.isHole()||(m=A,h++)}return U.isTrue(h<=1,"found two shells in MinimalEdgeRing list"),m}},{key:"add",value:function(){if(arguments.length===1){var f=arguments[0];this.add(f.getEdgeEnds(),f.getNodes())}else if(arguments.length===2){var h=arguments[0],m=arguments[1];pp.linkResultDirectedEdges(m);var $=this.buildMaximalEdgeRings(h),A=new Ke,I=this.buildMinimalEdgeRings($,this._shellList,A);this.sortShellsAndHoles(I,this._shellList,A),this.placeFreeHoles(this._shellList,A)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new Ke;var f=arguments[0];this._geometryFactory=f}},{key:"findEdgeRingContaining",value:function(f,h){for(var m=f.getLinearRing(),$=m.getEnvelopeInternal(),A=m.getCoordinateN(0),I=null,N=null,B=h.iterator();B.hasNext();){var J=B.next(),le=J.getLinearRing(),de=le.getEnvelopeInternal();if(!de.equals($)&&de.contains($)){A=Rn.ptNotInList(m.getCoordinates(),le.getCoordinates());var be=!1;cd.isInRing(A,le.getCoordinates())&&(be=!0),be&&(I===null||N.contains(de))&&(N=(I=J).getLinearRing().getEnvelopeInternal())}}return I}}])}(),ky=function(){return s(function y(){a(this,y)},[{key:"getBounds",value:function(){}}])}(),st=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[ky,q]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var y=arguments[0],f=arguments[1];this._bounds=y,this._item=f}}])}(),gp=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var y=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),y}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(y){for(var f=null,h=this._items.get(y);2*y<=this._size&&((f=2*y)!==this._size&&this._items.get(f+1).compareTo(this._items.get(f))<0&&f++,this._items.get(f).compareTo(h)<0);y=f)this._items.set(y,this._items.get(f));this._items.set(y,h)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(y){this._items.add(null),this._size+=1;var f=this._size;for(this._items.set(0,y);y.compareTo(this._items.get(Math.trunc(f/2)))<0;f/=2)this._items.set(f,this._items.get(Math.trunc(f/2)));this._items.set(f,y)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new Ke,this._items.add(null)}}])}(),Ar=function(){return s(function y(){a(this,y)},[{key:"insert",value:function(y,f){}},{key:"remove",value:function(y,f){}},{key:"query",value:function(){}}])}(),hi=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(y){U.isTrue(this._bounds===null),this._childBoundables.add(y)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[ky,q]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new Ke,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var y=arguments[0];this._level=y}}}}])}(),Jl={reverseOrder:function(){return{compare:function(y,f){return f.compareTo(y)}}},min:function(y){return Jl.sort(y),y.get(0)},sort:function(y,f){var h=y.toArray();f?di.sort(h,f):di.sort(h);for(var m=y.iterator(),$=0,A=h.length;$<A;$++)m.next(),m.set(h[$])},singletonList:function(y){var f=new Ke;return f.add(y),f}},CS=function(){function y(){a(this,y)}return s(y,null,[{key:"maxDistance",value:function(f,h,m,$,A,I,N,B){var J=y.distance(f,h,A,I);return J=Math.max(J,y.distance(f,h,N,B)),J=Math.max(J,y.distance(m,$,A,I)),J=Math.max(J,y.distance(m,$,N,B))}},{key:"distance",value:function(f,h,m,$){var A=m-f,I=$-h;return Math.sqrt(A*A+I*I)}},{key:"maximumDistance",value:function(f,h){var m=Math.min(f.getMinX(),h.getMinX()),$=Math.min(f.getMinY(),h.getMinY()),A=Math.max(f.getMaxX(),h.getMaxX()),I=Math.max(f.getMaxY(),h.getMaxY());return y.distance(m,$,A,I)}},{key:"minMaxDistance",value:function(f,h){var m=f.getMinX(),$=f.getMinY(),A=f.getMaxX(),I=f.getMaxY(),N=h.getMinX(),B=h.getMinY(),J=h.getMaxX(),le=h.getMaxY(),de=y.maxDistance(m,$,m,I,N,B,N,le);return de=Math.min(de,y.maxDistance(m,$,m,I,N,B,J,B)),de=Math.min(de,y.maxDistance(m,$,m,I,J,le,N,le)),de=Math.min(de,y.maxDistance(m,$,m,I,J,le,J,B)),de=Math.min(de,y.maxDistance(m,$,A,$,N,B,N,le)),de=Math.min(de,y.maxDistance(m,$,A,$,N,B,J,B)),de=Math.min(de,y.maxDistance(m,$,A,$,J,le,N,le)),de=Math.min(de,y.maxDistance(m,$,A,$,J,le,J,B)),de=Math.min(de,y.maxDistance(A,I,m,I,N,B,N,le)),de=Math.min(de,y.maxDistance(A,I,m,I,N,B,J,B)),de=Math.min(de,y.maxDistance(A,I,m,I,J,le,N,le)),de=Math.min(de,y.maxDistance(A,I,m,I,J,le,J,B)),de=Math.min(de,y.maxDistance(A,I,A,$,N,B,N,le)),de=Math.min(de,y.maxDistance(A,I,A,$,N,B,J,B)),de=Math.min(de,y.maxDistance(A,I,A,$,J,le,N,le)),de=Math.min(de,y.maxDistance(A,I,A,$,J,le,J,B))}}])}(),Us=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"maximumDistance",value:function(){return CS.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(f,h){var m=y.isComposite(this._boundable1),$=y.isComposite(this._boundable2);if(m&&$)return y.area(this._boundable1)>y.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,f,h),null):(this.expand(this._boundable2,this._boundable1,!0,f,h),null);if(m)return this.expand(this._boundable1,this._boundable2,!1,f,h),null;if($)return this.expand(this._boundable2,this._boundable1,!0,f,h),null;throw new D("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(y.isComposite(this._boundable1)||y.isComposite(this._boundable2))}},{key:"compareTo",value:function(f){var h=f;return this._distance<h._distance?-1:this._distance>h._distance?1:0}},{key:"expand",value:function(f,h,m,$,A){for(var I=f.getChildBoundables().iterator();I.hasNext();){var N=I.next(),B=null;(B=m?new y(h,N,this._itemDistance):new y(N,h,this._itemDistance)).getDistance()<A&&$.add(B)}}},{key:"getBoundable",value:function(f){return f===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[R]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var f=arguments[0],h=arguments[1],m=arguments[2];this._boundable1=f,this._boundable2=h,this._itemDistance=m,this._distance=this.distance()}},{key:"area",value:function(f){return f.getBounds().getArea()}},{key:"isComposite",value:function(f){return f instanceof hi}}])}(),W0=function(){return s(function y(){a(this,y)},[{key:"visitItem",value:function(y){}}])}(),Kl=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"queryInternal",value:function(){if(tt(arguments[2],W0)&&arguments[0]instanceof Object&&arguments[1]instanceof hi)for(var f=arguments[0],h=arguments[2],m=arguments[1].getChildBoundables(),$=0;$<m.size();$++){var A=m.get($);this.getIntersectsOp().intersects(A.getBounds(),f)&&(A instanceof hi?this.queryInternal(f,A,h):A instanceof st?h.visitItem(A.getItem()):U.shouldNeverReachHere())}else if(tt(arguments[2],Ja)&&arguments[0]instanceof Object&&arguments[1]instanceof hi)for(var I=arguments[0],N=arguments[2],B=arguments[1].getChildBoundables(),J=0;J<B.size();J++){var le=B.get(J);this.getIntersectsOp().intersects(le.getBounds(),I)&&(le instanceof hi?this.queryInternal(I,le,N):le instanceof st?N.add(le.getItem()):U.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(f){return f.get(f.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var f=0,h=arguments[0].getChildBoundables().iterator();h.hasNext();){var m=h.next();m instanceof hi?f+=this.size(m):m instanceof st&&(f+=1)}return f}}},{key:"removeItem",value:function(f,h){for(var m=null,$=f.getChildBoundables().iterator();$.hasNext();){var A=$.next();A instanceof st&&A.getItem()===h&&(m=A)}return m!==null&&(f.getChildBoundables().remove(m),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var f=this.itemsTree(this._root);return f===null?new Ke:f}if(arguments.length===1){for(var h=arguments[0],m=new Ke,$=h.getChildBoundables().iterator();$.hasNext();){var A=$.next();if(A instanceof hi){var I=this.itemsTree(A);I!==null&&m.add(I)}else A instanceof st?m.add(A.getItem()):U.shouldNeverReachHere()}return m.size()<=0?null:m}}},{key:"insert",value:function(f,h){U.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new st(f,h))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var f=arguments[0],h=new Ke;return this.boundablesAtLevel(f,this._root,h),h}if(arguments.length===3){var m=arguments[0],$=arguments[1],A=arguments[2];if(U.isTrue(m>-2),$.getLevel()===m)return A.add($),null;for(var I=$.getChildBoundables().iterator();I.hasNext();){var N=I.next();N instanceof hi?this.boundablesAtLevel(m,N,A):(U.isTrue(N instanceof st),m===-1&&A.add(N))}return null}}},{key:"query",value:function(){if(arguments.length===1){var f=arguments[0];this.build();var h=new Ke;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),f)&&this.queryInternal(f,this._root,h),h}if(arguments.length===2){var m=arguments[0],$=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.queryInternal(m,this._root,$)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var f=arguments[0],h=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),f)&&this.remove(f,this._root,h)}if(arguments.length===3){var m=arguments[0],$=arguments[1],A=arguments[2],I=this.removeItem($,A);if(I)return!0;for(var N=null,B=$.getChildBoundables().iterator();B.hasNext();){var J=B.next();if(this.getIntersectsOp().intersects(J.getBounds(),m)&&J instanceof hi&&(I=this.remove(m,J,A))){N=J;break}}return N!==null&&N.getChildBoundables().isEmpty()&&$.getChildBoundables().remove(N),I}}},{key:"createHigherLevels",value:function(f,h){U.isTrue(!f.isEmpty());var m=this.createParentBoundables(f,h+1);return m.size()===1?m.get(0):this.createHigherLevels(m,h+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var f=0,h=arguments[0].getChildBoundables().iterator();h.hasNext();){var m=h.next();if(m instanceof hi){var $=this.depth(m);$>f&&(f=$)}}return f+1}}},{key:"createParentBoundables",value:function(f,h){U.isTrue(!f.isEmpty());var m=new Ke;m.add(this.createNode(h));var $=new Ke(f);Jl.sort($,this.getComparator());for(var A=$.iterator();A.hasNext();){var I=A.next();this.lastNode(m).getChildBoundables().size()===this.getNodeCapacity()&&m.add(this.createNode(h)),this.lastNode(m).addChildBoundable(I)}return m}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new Ke,this._nodeCapacity=null,arguments.length===0)y.constructor_.call(this,y.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var f=arguments[0];U.isTrue(f>1,"Node capacity must be greater than 1"),this._nodeCapacity=f}}},{key:"compareDoubles",value:function(f,h){return f>h?1:f<h?-1:0}}])}();Kl.IntersectsOp=function(){},Kl.DEFAULT_NODE_CAPACITY=10;var RS=function(){return s(function y(){a(this,y)},[{key:"distance",value:function(y,f){}}])}(),io=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"createParentBoundablesFromVerticalSlices",value:function(h,m){U.isTrue(h.length>0);for(var $=new Ke,A=0;A<h.length;A++)$.addAll(this.createParentBoundablesFromVerticalSlice(h[A],m));return $}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var h=arguments[0],m=arguments[1];return this.nearestNeighbourK(h,Y.POSITIVE_INFINITY,m)}if(arguments.length===3){var $=arguments[0],A=arguments[2],I=arguments[1],N=new gp;N.add($);for(var B=new gp;!N.isEmpty()&&I>=0;){var J=N.poll(),le=J.getDistance();if(le>=I)break;J.isLeaves()?B.size()<A?B.add(J):(B.peek().getDistance()>le&&(B.poll(),B.add(J)),I=B.peek().getDistance()):J.expandToQueue(N,I)}return f.getItems(B)}}},{key:"createNode",value:function(h){return new mp(h)}},{key:"size",value:function(){return arguments.length===0?b(f,"size",this,1).call(this):b(f,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof xe))return b(f,"insert",this,1).apply(this,arguments);var h=arguments[0],m=arguments[1];if(h.isNull())return null;b(f,"insert",this,1).call(this,h,m)}},{key:"getIntersectsOp",value:function(){return f.intersectsOp}},{key:"verticalSlices",value:function(h,m){for(var $=Math.trunc(Math.ceil(h.size()/m)),A=new Array(m).fill(null),I=h.iterator(),N=0;N<m;N++){A[N]=new Ke;for(var B=0;I.hasNext()&&B<$;){var J=I.next();A[N].add(J),B++}}return A}},{key:"query",value:function(){if(arguments.length===1){var h=arguments[0];return b(f,"query",this,1).call(this,h)}if(arguments.length===2){var m=arguments[0],$=arguments[1];b(f,"query",this,1).call(this,m,$)}}},{key:"getComparator",value:function(){return f.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(h,m){return b(f,"createParentBoundables",this,1).call(this,h,m)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof xe){var h=arguments[0],m=arguments[1];return b(f,"remove",this,1).call(this,h,m)}return b(f,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?b(f,"depth",this,1).call(this):b(f,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(h,m){U.isTrue(!h.isEmpty());var $=Math.trunc(Math.ceil(h.size()/this.getNodeCapacity())),A=new Ke(h);Jl.sort(A,f.xComparator);var I=this.verticalSlices(A,Math.trunc(Math.ceil(Math.sqrt($))));return this.createParentBoundablesFromVerticalSlices(I,m)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(tt(arguments[0],RS)){var h=arguments[0];if(this.isEmpty())return null;var m=new Us(this.getRoot(),this.getRoot(),h);return this.nearestNeighbour(m)}if(arguments[0]instanceof Us){var $=arguments[0],A=Y.POSITIVE_INFINITY,I=null,N=new gp;for(N.add($);!N.isEmpty()&&A>0;){var B=N.poll(),J=B.getDistance();if(J>=A)break;B.isLeaves()?(A=J,I=B):B.expandToQueue(N,A)}return I===null?null:[I.getBoundable(0).getItem(),I.getBoundable(1).getItem()]}}else{if(arguments.length===2){var le=arguments[0],de=arguments[1];if(this.isEmpty()||le.isEmpty())return null;var be=new Us(this.getRoot(),le.getRoot(),de);return this.nearestNeighbour(be)}if(arguments.length===3){var Pe=arguments[2],Ue=new st(arguments[0],arguments[1]),Ye=new Us(this.getRoot(),Ue,Pe);return this.nearestNeighbour(Ye)[0]}if(arguments.length===4){var Et=arguments[2],ct=arguments[3],Wt=new st(arguments[0],arguments[1]),mn=new Us(this.getRoot(),Wt,Et);return this.nearestNeighbourK(mn,ct)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var h=arguments[0],m=arguments[1],$=Y.POSITIVE_INFINITY,A=new gp;for(A.add(h);!A.isEmpty();){var I=A.poll(),N=I.getDistance();if(N>m)return!1;if(I.maximumDistance()<=m)return!0;if(I.isLeaves()){if(($=N)<=m)return!0}else I.expandToQueue(A,$)}return!1}if(arguments.length===3){var B=arguments[0],J=arguments[1],le=arguments[2],de=new Us(this.getRoot(),B.getRoot(),J);return this.isWithinDistance(de,le)}}},{key:"interfaces_",get:function(){return[Ar,q]}}],[{key:"constructor_",value:function(){if(arguments.length===0)f.constructor_.call(this,f.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var h=arguments[0];Kl.constructor_.call(this,h)}}},{key:"centreX",value:function(h){return f.avg(h.getMinX(),h.getMaxX())}},{key:"avg",value:function(h,m){return(h+m)/2}},{key:"getItems",value:function(h){for(var m=new Array(h.size()).fill(null),$=0;!h.isEmpty();){var A=h.poll();m[$]=A.getBoundable(0).getItem(),$++}return m}},{key:"centreY",value:function(h){return f.avg(h.getMinY(),h.getMaxY())}}])}(Kl),mp=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"computeBounds",value:function(){for(var h=null,m=this.getChildBoundables().iterator();m.hasNext();){var $=m.next();h===null?h=new xe($.getBounds()):h.expandToInclude($.getBounds())}return h}}],[{key:"constructor_",value:function(){var h=arguments[0];hi.constructor_.call(this,h)}}])}(hi);io.STRtreeNode=mp,io.xComparator=new(function(){return s(function y(){a(this,y)},[{key:"interfaces_",get:function(){return[Z]}},{key:"compare",value:function(y,f){return Kl.compareDoubles(io.centreX(y.getBounds()),io.centreX(f.getBounds()))}}])}()),io.yComparator=new(function(){return s(function y(){a(this,y)},[{key:"interfaces_",get:function(){return[Z]}},{key:"compare",value:function(y,f){return Kl.compareDoubles(io.centreY(y.getBounds()),io.centreY(f.getBounds()))}}])}()),io.intersectsOp=new(function(){return s(function y(){a(this,y)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(y,f){return y.intersects(f)}}])}()),io.DEFAULT_NODE_CAPACITY=10;var IS=function(){function y(){a(this,y)}return s(y,null,[{key:"relativeSign",value:function(f,h){return f<h?-1:f>h?1:0}},{key:"compare",value:function(f,h,m){if(h.equals2D(m))return 0;var $=y.relativeSign(h.x,m.x),A=y.relativeSign(h.y,m.y);switch(f){case 0:return y.compareValue($,A);case 1:return y.compareValue(A,$);case 2:return y.compareValue(A,-$);case 3:return y.compareValue(-$,A);case 4:return y.compareValue(-$,-A);case 5:return y.compareValue(-A,-$);case 6:return y.compareValue(-A,$);case 7:return y.compareValue($,-A)}return U.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(f,h){return f<0?-1:f>0?1:h<0?-1:h>0?1:0}}])}(),ao=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(y){y.print(this.coord),y.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(y){var f=y;return this.segmentIndex<f.segmentIndex?-1:this.segmentIndex>f.segmentIndex?1:this.coord.equals2D(f.coord)?0:this._isInterior?f._isInterior?IS.compare(this._segmentOctant,this.coord,f.coord):1:-1}},{key:"isEndPoint",value:function(y){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===y}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[R]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var y=arguments[0],f=arguments[1],h=arguments[2],m=arguments[3];this._segString=y,this.coord=new ie(f),this.segmentIndex=h,this._segmentOctant=m,this._isInterior=!f.equals2D(y.getCoordinate(h))}}])}(),PS=function(){return s(function y(){a(this,y)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),G0=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var y=new Qf;this.addEndpoints();for(var f=this.iterator(),h=f.next();f.hasNext();){var m=f.next();this.addEdgeCoordinates(h,m,y),h=m}return y.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var y=new Ke;this.findCollapsesFromInsertedNodes(y),this.findCollapsesFromExistingVertices(y);for(var f=y.iterator();f.hasNext();){var h=f.next().intValue();this.add(this._edge.getCoordinate(h),h)}}},{key:"createSplitEdgePts",value:function(y,f){var h=f.segmentIndex-y.segmentIndex+2;if(h===2)return[new ie(y.coord),new ie(f.coord)];var m=this._edge.getCoordinate(f.segmentIndex),$=f.isInterior()||!f.coord.equals2D(m);$||h--;var A=new Array(h).fill(null),I=0;A[I++]=new ie(y.coord);for(var N=y.segmentIndex+1;N<=f.segmentIndex;N++)A[I++]=this._edge.getCoordinate(N);return $&&(A[I]=new ie(f.coord)),A}},{key:"print",value:function(y){y.println("Intersections:");for(var f=this.iterator();f.hasNext();)f.next().print(y)}},{key:"findCollapsesFromExistingVertices",value:function(y){for(var f=0;f<this._edge.size()-2;f++){var h=this._edge.getCoordinate(f);this._edge.getCoordinate(f+1);var m=this._edge.getCoordinate(f+2);h.equals2D(m)&&y.add(Ka.valueOf(f+1))}}},{key:"addEdgeCoordinates",value:function(y,f,h){var m=this.createSplitEdgePts(y,f);h.add(m,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(y){this.addEndpoints(),this.addCollapsedNodes();for(var f=this.iterator(),h=f.next();f.hasNext();){var m=f.next(),$=this.createSplitEdge(h,m);y.add($),h=m}}},{key:"findCollapseIndex",value:function(y,f,h){if(!y.coord.equals2D(f.coord))return!1;var m=f.segmentIndex-y.segmentIndex;return f.isInterior()||m--,m===1&&(h[0]=y.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(y){for(var f=new Array(1).fill(null),h=this.iterator(),m=h.next();h.hasNext();){var $=h.next();this.findCollapseIndex(m,$,f)&&y.add(Ka.valueOf(f[0])),m=$}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var y=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(y),y)}},{key:"createSplitEdge",value:function(y,f){var h=this.createSplitEdgePts(y,f);return new Wo(h,this._edge.getData())}},{key:"add",value:function(y,f){var h=new ao(this._edge,y,f,this._edge.getSegmentOctant(f)),m=this._nodeMap.get(h);return m!==null?(U.isTrue(m.coord.equals2D(y),"Found equal nodes with different coordinates"),m):(this._nodeMap.put(h,h),h)}},{key:"checkSplitEdgesCorrectness",value:function(y){var f=this._edge.getCoordinates(),h=y.get(0).getCoordinate(0);if(!h.equals2D(f[0]))throw new ae("bad split edge start point at "+h);var m=y.get(y.size()-1).getCoordinates(),$=m[m.length-1];if(!$.equals2D(f[f.length-1]))throw new ae("bad split edge end point at "+$)}}],[{key:"constructor_",value:function(){this._nodeMap=new xn,this._edge=null;var y=arguments[0];this._edge=y}}])}(),Bs=function(){function y(){a(this,y)}return s(y,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var f=arguments[0],h=arguments[1];if(f===0&&h===0)throw new D("Cannot compute the octant for point ( "+f+", "+h+" )");var m=Math.abs(f),$=Math.abs(h);return f>=0?h>=0?m>=$?0:1:m>=$?7:6:h>=0?m>=$?3:2:m>=$?4:5}if(arguments[0]instanceof ie&&arguments[1]instanceof ie){var A=arguments[0],I=arguments[1],N=I.x-A.x,B=I.y-A.y;if(N===0&&B===0)throw new D("Cannot compute the octant for two identical points "+A);return y.octant(N,B)}}}])}(),H0=function(){return s(function y(){a(this,y)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(y){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(y){}},{key:"getData",value:function(){}}])}(),Y0=function(){return s(function y(){a(this,y)},[{key:"addIntersection",value:function(y,f){}},{key:"interfaces_",get:function(){return[H0]}}])}(),Wo=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(f){return this._pts[f]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(f){return f===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(f),this.getCoordinate(f+1))}},{key:"setData",value:function(f){this._data=f}},{key:"safeOctant",value:function(f,h){return f.equals2D(h)?0:Bs.octant(f,h)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var f=arguments[0],h=arguments[1];this.addIntersectionNode(f,h)}else if(arguments.length===4){var m=arguments[1],$=arguments[3],A=new ie(arguments[0].getIntersection($));this.addIntersection(A,m)}}},{key:"toString",value:function(){return nc.toLineString(new ec(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(f,h){var m=h,$=m+1;if($<this._pts.length){var A=this._pts[$];f.equals2D(A)&&(m=$)}return this._nodeList.add(f,m)}},{key:"addIntersections",value:function(f,h,m){for(var $=0;$<f.getIntersectionNum();$++)this.addIntersection(f,h,m,$)}},{key:"interfaces_",get:function(){return[Y0]}}],[{key:"constructor_",value:function(){this._nodeList=new G0(this),this._pts=null,this._data=null;var f=arguments[0],h=arguments[1];this._pts=f,this._data=h}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var f=arguments[0],h=new Ke;return y.getNodedSubstrings(f,h),h}if(arguments.length===2)for(var m=arguments[1],$=arguments[0].iterator();$.hasNext();)$.next().getNodeList().addSplitEdges(m)}}])}(),$a=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof y){var f=arguments[0],h=Qe.index(this.p0,this.p1,f.p0),m=Qe.index(this.p0,this.p1,f.p1);return h>=0&&m>=0||h<=0&&m<=0?Math.max(h,m):0}if(arguments[0]instanceof ie){var $=arguments[0];return Qe.index(this.p0,this.p1,$)}}},{key:"toGeometry",value:function(f){return f.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(f){if(!(f instanceof y))return!1;var h=f;return this.p0.equals(h.p0)&&this.p1.equals(h.p1)}},{key:"intersection",value:function(f){var h=new Vo;return h.computeIntersection(this.p0,this.p1,f.p0,f.p1),h.hasIntersection()?h.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof ie){var f=arguments[0];if(f.equals(this.p0)||f.equals(this.p1))return new ie(f);var h=this.projectionFactor(f),m=new ie;return m.x=this.p0.x+h*(this.p1.x-this.p0.x),m.y=this.p0.y+h*(this.p1.y-this.p0.y),m}if(arguments[0]instanceof y){var $=arguments[0],A=this.projectionFactor($.p0),I=this.projectionFactor($.p1);if(A>=1&&I>=1||A<=0&&I<=0)return null;var N=this.project($.p0);A<0&&(N=this.p0),A>1&&(N=this.p1);var B=this.project($.p1);return I<0&&(B=this.p0),I>1&&(B=this.p1),new y(N,B)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(f){return f===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(f){return Tr.pointToLinePerpendicular(f,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return y.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(f){if(f.equals(this.p0))return 0;if(f.equals(this.p1))return 1;var h=this.p1.x-this.p0.x,m=this.p1.y-this.p0.y,$=h*h+m*m;return $<=0?Y.NaN:((f.x-this.p0.x)*h+(f.y-this.p0.y)*m)/$}},{key:"closestPoints",value:function(f){var h=this.intersection(f);if(h!==null)return[h,h];var m=new Array(2).fill(null),$=Y.MAX_VALUE,A=null,I=this.closestPoint(f.p0);$=I.distance(f.p0),m[0]=I,m[1]=f.p0;var N=this.closestPoint(f.p1);(A=N.distance(f.p1))<$&&($=A,m[0]=N,m[1]=f.p1);var B=f.closestPoint(this.p0);(A=B.distance(this.p0))<$&&($=A,m[0]=this.p0,m[1]=B);var J=f.closestPoint(this.p1);return(A=J.distance(this.p1))<$&&($=A,m[0]=this.p1,m[1]=J),m}},{key:"closestPoint",value:function(f){var h=this.projectionFactor(f);return h>0&&h<1?this.project(f):this.p0.distance(f)<this.p1.distance(f)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(f){var h=f,m=this.p0.compareTo(h.p0);return m!==0?m:this.p1.compareTo(h.p1)}},{key:"reverse",value:function(){var f=this.p0;this.p0=this.p1,this.p1=f}},{key:"equalsTopo",value:function(f){return this.p0.equals(f.p0)&&this.p1.equals(f.p1)||this.p0.equals(f.p1)&&this.p1.equals(f.p0)}},{key:"lineIntersection",value:function(f){return ly.intersection(this.p0,this.p1,f.p0,f.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(f,h){var m=this.p0.x+f*(this.p1.x-this.p0.x),$=this.p0.y+f*(this.p1.y-this.p0.y),A=this.p1.x-this.p0.x,I=this.p1.y-this.p0.y,N=Math.sqrt(A*A+I*I),B=0,J=0;if(h!==0){if(N<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");B=h*A/N,J=h*I/N}return new ie(m-J,$+B)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var f=arguments[0];this.setCoordinates(f.p0,f.p1)}else if(arguments.length===2){var h=arguments[0],m=arguments[1];this.p0.x=h.x,this.p0.y=h.y,this.p1.x=m.x,this.p1.y=m.y}}},{key:"segmentFraction",value:function(f){var h=this.projectionFactor(f);return h<0?h=0:(h>1||Y.isNaN(h))&&(h=1),h}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(f){var h=this.p1.getY()-this.p0.getY(),m=this.p0.getX()-this.p1.getX(),$=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),A=h*h+m*m,I=h*h-m*m,N=f.getX(),B=f.getY();return new ie((-I*N-2*h*m*B-2*h*$)/A,(I*B-2*h*m*N-2*m*$)/A)}},{key:"distance",value:function(){if(arguments[0]instanceof y){var f=arguments[0];return Tr.segmentToSegment(this.p0,this.p1,f.p0,f.p1)}if(arguments[0]instanceof ie){var h=arguments[0];return Tr.pointToSegment(h,this.p0,this.p1)}}},{key:"pointAlong",value:function(f){var h=new ie;return h.x=this.p0.x+f*(this.p1.x-this.p0.x),h.y=this.p0.y+f*(this.p1.y-this.p0.y),h}},{key:"hashCode",value:function(){var f=Y.doubleToLongBits(this.p0.x);f^=31*Y.doubleToLongBits(this.p0.y);var h=Math.trunc(f)^Math.trunc(f>>32),m=Y.doubleToLongBits(this.p1.x);return m^=31*Y.doubleToLongBits(this.p1.y),h^(Math.trunc(m)^Math.trunc(m>>32))}},{key:"interfaces_",get:function(){return[R,q]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)y.constructor_.call(this,new ie,new ie);else if(arguments.length===1){var f=arguments[0];y.constructor_.call(this,f.p0,f.p1)}else if(arguments.length===2){var h=arguments[0],m=arguments[1];this.p0=h,this.p1=m}else if(arguments.length===4){var $=arguments[0],A=arguments[1],I=arguments[2],N=arguments[3];y.constructor_.call(this,new ie($,A),new ie(I,N))}}},{key:"midPoint",value:function(f,h){return new ie((f.x+h.x)/2,(f.y+h.y)/2)}}])}(),X0=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var y=arguments[1],f=arguments[2],h=arguments[3];arguments[0].getLineSegment(y,this._overlapSeg1),f.getLineSegment(h,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new $a,this._overlapSeg2=new $a}}])}(),$y=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(y,f){f.p0=this._pts[y],f.p1=this._pts[y+1]}},{key:"computeSelect",value:function(y,f,h,m){var $=this._pts[f],A=this._pts[h];if(h-f==1)return m.select(this,f),null;if(!y.intersects($,A))return null;var I=Math.trunc((f+h)/2);f<I&&this.computeSelect(y,f,I,m),I<h&&this.computeSelect(y,I,h,m)}},{key:"getCoordinates",value:function(){for(var y=new Array(this._end-this._start+1).fill(null),f=0,h=this._start;h<=this._end;h++)y[f++]=this._pts[h];return y}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var y=arguments[0],f=arguments[1];this.computeOverlaps(this._start,this._end,y,y._start,y._end,f)}else if(arguments.length===6){var h=arguments[0],m=arguments[1],$=arguments[2],A=arguments[3],I=arguments[4],N=arguments[5];if(m-h==1&&I-A==1)return N.overlap(this,h,$,A),null;if(!this.overlaps(h,m,$,A,I))return null;var B=Math.trunc((h+m)/2),J=Math.trunc((A+I)/2);h<B&&(A<J&&this.computeOverlaps(h,B,$,A,J,N),J<I&&this.computeOverlaps(h,B,$,J,I,N)),B<m&&(A<J&&this.computeOverlaps(B,m,$,A,J,N),J<I&&this.computeOverlaps(B,m,$,J,I,N))}}},{key:"setId",value:function(y){this._id=y}},{key:"select",value:function(y,f){this.computeSelect(y,this._start,this._end,f)}},{key:"getEnvelope",value:function(){if(this._env===null){var y=this._pts[this._start],f=this._pts[this._end];this._env=new xe(y,f)}return this._env}},{key:"overlaps",value:function(y,f,h,m,$){return xe.intersects(this._pts[y],this._pts[f],h._pts[m],h._pts[$])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var y=arguments[0],f=arguments[1],h=arguments[2],m=arguments[3];this._pts=y,this._start=f,this._end=h,this._context=m}}])}(),FS=function(){function y(){a(this,y)}return s(y,null,[{key:"findChainEnd",value:function(f,h){for(var m=h;m<f.length-1&&f[m].equals2D(f[m+1]);)m++;if(m>=f.length-1)return f.length-1;for(var $=ci.quadrant(f[m],f[m+1]),A=h+1;A<f.length&&!(!f[A-1].equals2D(f[A])&&ci.quadrant(f[A-1],f[A])!==$);)A++;return A-1}},{key:"getChains",value:function(){if(arguments.length===1){var f=arguments[0];return y.getChains(f,null)}if(arguments.length===2){var h=arguments[0],m=arguments[1],$=new Ke,A=0;do{var I=y.findChainEnd(h,A),N=new $y(h,A,I,m);$.add(N),A=I}while(A<h.length-1);return $}}}])}(),Ey=function(){return s(function y(){a(this,y)},[{key:"computeNodes",value:function(y){}},{key:"getNodedSubstrings",value:function(){}}])}(),yp=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(y){this._segInt=y}},{key:"interfaces_",get:function(){return[Ey]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var y=arguments[0];this.setSegmentIntersector(y)}}}}])}(),Sy=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Wo.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(h){for(var m=FS.getChains(h.getCoordinates(),h).iterator();m.hasNext();){var $=m.next();$.setId(this._idCounter++),this._index.insert($.getEnvelope(),$),this._monoChains.add($)}}},{key:"computeNodes",value:function(h){this._nodedSegStrings=h;for(var m=h.iterator();m.hasNext();)this.add(m.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var h=new Ty(this._segInt),m=this._monoChains.iterator();m.hasNext();)for(var $=m.next(),A=this._index.query($.getEnvelope()).iterator();A.hasNext();){var I=A.next();if(I.getId()>$.getId()&&($.computeOverlaps(I,h),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new Ke,this._index=new io,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var h=arguments[0];yp.constructor_.call(this,h)}}}}])}(yp),Ty=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"overlap",value:function(){if(arguments.length!==4)return b(f,"overlap",this,1).apply(this,arguments);var h=arguments[1],m=arguments[2],$=arguments[3],A=arguments[0].getContext(),I=m.getContext();this._si.processIntersections(A,h,I,$)}}],[{key:"constructor_",value:function(){this._si=null;var h=arguments[0];this._si=h}}])}(X0);Sy.SegmentOverlapAction=Ty;var er=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"isDeletable",value:function(f,h,m,$){var A=this._inputLine[f],I=this._inputLine[h],N=this._inputLine[m];return!!this.isConcave(A,I,N)&&!!this.isShallow(A,I,N,$)&&this.isShallowSampled(A,I,f,m,$)}},{key:"deleteShallowConcavities",value:function(){for(var f=1,h=this.findNextNonDeletedIndex(f),m=this.findNextNonDeletedIndex(h),$=!1;m<this._inputLine.length;){var A=!1;this.isDeletable(f,h,m,this._distanceTol)&&(this._isDeleted[h]=y.DELETE,A=!0,$=!0),f=A?m:h,h=this.findNextNonDeletedIndex(f),m=this.findNextNonDeletedIndex(h)}return $}},{key:"isShallowConcavity",value:function(f,h,m,$){return Qe.index(f,h,m)===this._angleOrientation&&Tr.pointToSegment(h,f,m)<$}},{key:"isShallowSampled",value:function(f,h,m,$,A){var I=Math.trunc(($-m)/y.NUM_PTS_TO_CHECK);I<=0&&(I=1);for(var N=m;N<$;N+=I)if(!this.isShallow(f,h,this._inputLine[N],A))return!1;return!0}},{key:"isConcave",value:function(f,h,m){var $=Qe.index(f,h,m)===this._angleOrientation;return $}},{key:"simplify",value:function(f){this._distanceTol=Math.abs(f),f<0&&(this._angleOrientation=Qe.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var h=!1;do h=this.deleteShallowConcavities();while(h);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(f){for(var h=f+1;h<this._inputLine.length&&this._isDeleted[h]===y.DELETE;)h++;return h}},{key:"isShallow",value:function(f,h,m,$){return Tr.pointToSegment(h,f,m)<$}},{key:"collapseLine",value:function(){for(var f=new Qf,h=0;h<this._inputLine.length;h++)this._isDeleted[h]!==y.DELETE&&f.add(this._inputLine[h]);return f.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Qe.COUNTERCLOCKWISE;var f=arguments[0];this._inputLine=f}},{key:"simplify",value:function(f,h){return new y(f).simplify(h)}}])}();er.INIT=0,er.DELETE=1,er.KEEP=1,er.NUM_PTS_TO_CHECK=10;var rc=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"getCoordinates",value:function(){return this._ptList.toArray(y.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(f){this._precisionModel=f}},{key:"addPt",value:function(f){var h=new ie(f);if(this._precisionModel.makePrecise(h),this.isRedundant(h))return null;this._ptList.add(h)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(f,h){if(h)for(var m=0;m<f.length;m++)this.addPt(f[m]);else for(var $=f.length-1;$>=0;$--)this.addPt(f[$])}},{key:"isRedundant",value:function(f){if(this._ptList.size()<1)return!1;var h=this._ptList.get(this._ptList.size()-1);return f.distance(h)<this._minimimVertexDistance}},{key:"toString",value:function(){return new eo().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var f=new ie(this._ptList.get(0)),h=this._ptList.get(this._ptList.size()-1);if(f.equals(h))return null;this._ptList.add(f)}},{key:"setMinimumVertexDistance",value:function(f){this._minimimVertexDistance=f}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ke}}])}();rc.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var jn=function(){function y(){a(this,y)}return s(y,null,[{key:"toDegrees",value:function(f){return 180*f/Math.PI}},{key:"normalize",value:function(f){for(;f>Math.PI;)f-=y.PI_TIMES_2;for(;f<=-Math.PI;)f+=y.PI_TIMES_2;return f}},{key:"angle",value:function(){if(arguments.length===1){var f=arguments[0];return Math.atan2(f.y,f.x)}if(arguments.length===2){var h=arguments[0],m=arguments[1],$=m.x-h.x,A=m.y-h.y;return Math.atan2(A,$)}}},{key:"isAcute",value:function(f,h,m){var $=f.x-h.x,A=f.y-h.y;return $*(m.x-h.x)+A*(m.y-h.y)>0}},{key:"isObtuse",value:function(f,h,m){var $=f.x-h.x,A=f.y-h.y;return $*(m.x-h.x)+A*(m.y-h.y)<0}},{key:"interiorAngle",value:function(f,h,m){var $=y.angle(h,f),A=y.angle(h,m);return Math.abs(A-$)}},{key:"normalizePositive",value:function(f){if(f<0){for(;f<0;)f+=y.PI_TIMES_2;f>=y.PI_TIMES_2&&(f=0)}else{for(;f>=y.PI_TIMES_2;)f-=y.PI_TIMES_2;f<0&&(f=0)}return f}},{key:"angleBetween",value:function(f,h,m){var $=y.angle(h,f),A=y.angle(h,m);return y.diff($,A)}},{key:"diff",value:function(f,h){var m=null;return(m=f<h?h-f:f-h)>Math.PI&&(m=2*Math.PI-m),m}},{key:"toRadians",value:function(f){return f*Math.PI/180}},{key:"getTurn",value:function(f,h){var m=Math.sin(h-f);return m>0?y.COUNTERCLOCKWISE:m<0?y.CLOCKWISE:y.NONE}},{key:"angleBetweenOriented",value:function(f,h,m){var $=y.angle(h,f),A=y.angle(h,m)-$;return A<=-Math.PI?A+y.PI_TIMES_2:A>Math.PI?A-y.PI_TIMES_2:A}}])}();jn.PI_TIMES_2=2*Math.PI,jn.PI_OVER_2=Math.PI/2,jn.PI_OVER_4=Math.PI/4,jn.COUNTERCLOCKWISE=Qe.COUNTERCLOCKWISE,jn.CLOCKWISE=Qe.CLOCKWISE,jn.NONE=Qe.COLLINEAR;var oc=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"addNextSegment",value:function(f,h){if(this._s0=this._s1,this._s1=this._s2,this._s2=f,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var m=Qe.index(this._s0,this._s1,this._s2),$=m===Qe.CLOCKWISE&&this._side===Se.LEFT||m===Qe.COUNTERCLOCKWISE&&this._side===Se.RIGHT;m===0?this.addCollinear(h):$?this.addOutsideTurn(m,h):this.addInsideTurn(m,h)}},{key:"addLineEndCap",value:function(f,h){var m=new $a(f,h),$=new $a;this.computeOffsetSegment(m,Se.LEFT,this._distance,$);var A=new $a;this.computeOffsetSegment(m,Se.RIGHT,this._distance,A);var I=h.x-f.x,N=h.y-f.y,B=Math.atan2(N,I);switch(this._bufParams.getEndCapStyle()){case T.CAP_ROUND:this._segList.addPt($.p1),this.addDirectedFillet(h,B+Math.PI/2,B-Math.PI/2,Qe.CLOCKWISE,this._distance),this._segList.addPt(A.p1);break;case T.CAP_FLAT:this._segList.addPt($.p1),this._segList.addPt(A.p1);break;case T.CAP_SQUARE:var J=new ie;J.x=Math.abs(this._distance)*Math.cos(B),J.y=Math.abs(this._distance)*Math.sin(B);var le=new ie($.p1.x+J.x,$.p1.y+J.y),de=new ie(A.p1.x+J.x,A.p1.y+J.y);this._segList.addPt(le),this._segList.addPt(de)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(f,h,m,$){var A=ly.intersection(h.p0,h.p1,m.p0,m.p1);if(A!==null&&($<=0?1:A.distance(f)/Math.abs($))<=this._bufParams.getMitreLimit())return this._segList.addPt(A),null;this.addLimitedMitreJoin(h,m,$,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(f,h){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*y.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===T.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===T.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(h&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,f,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(f){this._segList.addPt(new ie(f.x+this._distance,f.y+this._distance)),this._segList.addPt(new ie(f.x+this._distance,f.y-this._distance)),this._segList.addPt(new ie(f.x-this._distance,f.y-this._distance)),this._segList.addPt(new ie(f.x-this._distance,f.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(f,h){this._segList.addPts(f,h)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(f,h,m,$,A){var I=h.x-f.x,N=h.y-f.y,B=Math.atan2(N,I),J=m.x-f.x,le=m.y-f.y,de=Math.atan2(le,J);$===Qe.CLOCKWISE?B<=de&&(B+=2*Math.PI):B>=de&&(B-=2*Math.PI),this._segList.addPt(h),this.addDirectedFillet(f,B,de,$,A),this._segList.addPt(m)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(f,h,m){this._s1=f,this._s2=h,this._side=m,this._seg1.setCoordinates(f,h),this.computeOffsetSegment(this._seg1,m,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(f,h,m,$){var A=this._seg0.p1,I=jn.angle(A,this._seg0.p0),N=jn.angleBetweenOriented(this._seg0.p0,A,this._seg1.p1)/2,B=jn.normalize(I+N),J=jn.normalize(B+Math.PI),le=$*m,de=m-le*Math.abs(Math.sin(N)),be=A.x+le*Math.cos(J),Pe=A.y+le*Math.sin(J),Ue=new ie(be,Pe),Ye=new $a(A,Ue),Et=Ye.pointAlongOffset(1,de),ct=Ye.pointAlongOffset(1,-de);this._side===Se.LEFT?(this._segList.addPt(Et),this._segList.addPt(ct)):(this._segList.addPt(ct),this._segList.addPt(Et))}},{key:"addDirectedFillet",value:function(f,h,m,$,A){var I=$===Qe.CLOCKWISE?-1:1,N=Math.abs(h-m),B=Math.trunc(N/this._filletAngleQuantum+.5);if(B<1)return null;for(var J=N/B,le=new ie,de=0;de<B;de++){var be=h+I*de*J;le.x=f.x+A*Math.cos(be),le.y=f.y+A*Math.sin(be),this._segList.addPt(le)}}},{key:"computeOffsetSegment",value:function(f,h,m,$){var A=h===Se.LEFT?1:-1,I=f.p1.x-f.p0.x,N=f.p1.y-f.p0.y,B=Math.sqrt(I*I+N*N),J=A*m*I/B,le=A*m*N/B;$.p0.x=f.p0.x-le,$.p0.y=f.p0.y+J,$.p1.x=f.p1.x-le,$.p1.y=f.p1.y+J}},{key:"addInsideTurn",value:function(f,h){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*y.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var m=new ie((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(m);var $=new ie((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt($)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(f){var h=new ie(f.x+this._distance,f.y);this._segList.addPt(h),this.addDirectedFillet(f,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(f,h){this._segList.addPt(f.p1),this._segList.addPt(h.p0)}},{key:"init",value:function(f){this._distance=f,this._maxCurveSegmentError=f*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new rc,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(f*y.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(f){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===T.JOIN_BEVEL||this._bufParams.getJoinStyle()===T.JOIN_MITRE?(f&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,Qe.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new $a,this._seg1=new $a,this._offset0=new $a,this._offset1=new $a,this._side=0,this._hasNarrowConcaveAngle=!1;var f=arguments[0],h=arguments[1],m=arguments[2];this._precisionModel=f,this._bufParams=h,this._li=new Vo,this._filletAngleQuantum=Math.PI/2/h.getQuadrantSegments(),h.getQuadrantSegments()>=8&&h.getJoinStyle()===T.JOIN_ROUND&&(this._closingSegLengthFactor=y.MAX_CLOSING_SEG_LEN_FACTOR),this.init(m)}}])}();oc.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,oc.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,oc.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,oc.MAX_CLOSING_SEG_LEN_FACTOR=80;var sc=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"getOffsetCurve",value:function(f,h){if(this._distance=h,h===0)return null;var m=h<0,$=Math.abs(h),A=this.getSegGen($);f.length<=1?this.computePointCurve(f[0],A):this.computeOffsetCurve(f,m,A);var I=A.getCoordinates();return m&&Rn.reverse(I),I}},{key:"computeSingleSidedBufferCurve",value:function(f,h,m){var $=this.simplifyTolerance(this._distance);if(h){m.addSegments(f,!0);var A=er.simplify(f,-$),I=A.length-1;m.initSideSegments(A[I],A[I-1],Se.LEFT),m.addFirstSegment();for(var N=I-2;N>=0;N--)m.addNextSegment(A[N],!0)}else{m.addSegments(f,!1);var B=er.simplify(f,$),J=B.length-1;m.initSideSegments(B[0],B[1],Se.LEFT),m.addFirstSegment();for(var le=2;le<=J;le++)m.addNextSegment(B[le],!0)}m.addLastSegment(),m.closeRing()}},{key:"computeRingBufferCurve",value:function(f,h,m){var $=this.simplifyTolerance(this._distance);h===Se.RIGHT&&($=-$);var A=er.simplify(f,$),I=A.length-1;m.initSideSegments(A[I-1],A[0],h);for(var N=1;N<=I;N++){var B=N!==1;m.addNextSegment(A[N],B)}m.closeRing()}},{key:"computeLineBufferCurve",value:function(f,h){var m=this.simplifyTolerance(this._distance),$=er.simplify(f,m),A=$.length-1;h.initSideSegments($[0],$[1],Se.LEFT);for(var I=2;I<=A;I++)h.addNextSegment($[I],!0);h.addLastSegment(),h.addLineEndCap($[A-1],$[A]);var N=er.simplify(f,-m),B=N.length-1;h.initSideSegments(N[B],N[B-1],Se.LEFT);for(var J=B-2;J>=0;J--)h.addNextSegment(N[J],!0);h.addLastSegment(),h.addLineEndCap(N[1],N[0]),h.closeRing()}},{key:"computePointCurve",value:function(f,h){switch(this._bufParams.getEndCapStyle()){case T.CAP_ROUND:h.createCircle(f);break;case T.CAP_SQUARE:h.createSquare(f)}}},{key:"getLineCurve",value:function(f,h){if(this._distance=h,this.isLineOffsetEmpty(h))return null;var m=Math.abs(h),$=this.getSegGen(m);if(f.length<=1)this.computePointCurve(f[0],$);else if(this._bufParams.isSingleSided()){var A=h<0;this.computeSingleSidedBufferCurve(f,A,$)}else this.computeLineBufferCurve(f,$);return $.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(f){return f*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(f,h,m){if(this._distance=m,f.length<=2)return this.getLineCurve(f,m);if(m===0)return y.copyCoordinates(f);var $=this.getSegGen(m);return this.computeRingBufferCurve(f,h,$),$.getCoordinates()}},{key:"computeOffsetCurve",value:function(f,h,m){var $=this.simplifyTolerance(this._distance);if(h){var A=er.simplify(f,-$),I=A.length-1;m.initSideSegments(A[I],A[I-1],Se.LEFT),m.addFirstSegment();for(var N=I-2;N>=0;N--)m.addNextSegment(A[N],!0)}else{var B=er.simplify(f,$),J=B.length-1;m.initSideSegments(B[0],B[1],Se.LEFT),m.addFirstSegment();for(var le=2;le<=J;le++)m.addNextSegment(B[le],!0)}m.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(f){return f===0||f<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(f){return new oc(this._precisionModel,this._bufParams,f)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var f=arguments[0],h=arguments[1];this._precisionModel=f,this._bufParams=h}},{key:"copyCoordinates",value:function(f){for(var h=new Array(f.length).fill(null),m=0;m<h.length;m++)h[m]=new ie(f[m]);return h}}])}(),Ea=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var y=arguments[0],f=new Ke,h=this._subgraphs.iterator();h.hasNext();){var m=h.next(),$=m.getEnvelope();y.y<$.getMinY()||y.y>$.getMaxY()||this.findStabbedSegments(y,m.getDirectedEdges(),f)}return f}if(arguments.length===3){if(tt(arguments[2],Ja)&&arguments[0]instanceof ie&&arguments[1]instanceof xy){for(var A=arguments[0],I=arguments[1],N=arguments[2],B=I.getEdge().getCoordinates(),J=0;J<B.length-1;J++)if(this._seg.p0=B[J],this._seg.p1=B[J+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<A.x||this._seg.isHorizontal()||A.y<this._seg.p0.y||A.y>this._seg.p1.y||Qe.index(this._seg.p0,this._seg.p1,A)===Qe.RIGHT)){var le=I.getDepth(Se.LEFT);this._seg.p0.equals(B[J])||(le=I.getDepth(Se.RIGHT));var de=new Ay(this._seg,le);N.add(de)}}else if(tt(arguments[2],Ja)&&arguments[0]instanceof ie&&tt(arguments[1],Ja))for(var be=arguments[0],Pe=arguments[2],Ue=arguments[1].iterator();Ue.hasNext();){var Ye=Ue.next();Ye.isForward()&&this.findStabbedSegments(be,Ye,Pe)}}}},{key:"getDepth",value:function(y){var f=this.findStabbedSegments(y);return f.size()===0?0:Jl.min(f)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new $a;var y=arguments[0];this._subgraphs=y}}])}(),Ay=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(y){var f=y;if(this._upwardSeg.minX()>=f._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=f._upwardSeg.minX())return-1;var h=this._upwardSeg.orientationIndex(f._upwardSeg);return h!==0||(h=-1*f._upwardSeg.orientationIndex(this._upwardSeg))!==0?h:this._upwardSeg.compareTo(f._upwardSeg)}},{key:"compareX",value:function(y,f){var h=y.p0.compareTo(f.p0);return h!==0?h:y.p1.compareTo(f.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[R]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var y=arguments[0],f=arguments[1];this._upwardSeg=new $a(y),this._leftDepth=f}}])}();Ea.DepthSegment=Ay;var Oy=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,null,[{key:"constructor_",value:function(){O.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(O),Dy=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"getY",value:function(){var f=this.y/this.w;if(Y.isNaN(f)||Y.isInfinite(f))throw new Oy;return f}},{key:"getX",value:function(){var f=this.x/this.w;if(Y.isNaN(f)||Y.isInfinite(f))throw new Oy;return f}},{key:"getCoordinate",value:function(){var f=new ie;return f.x=this.getX(),f.y=this.getY(),f}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var f=arguments[0];this.x=f.x,this.y=f.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var h=arguments[0],m=arguments[1];this.x=h,this.y=m,this.w=1}else if(arguments[0]instanceof y&&arguments[1]instanceof y){var $=arguments[0],A=arguments[1];this.x=$.y*A.w-A.y*$.w,this.y=A.x*$.w-$.x*A.w,this.w=$.x*A.y-A.x*$.y}else if(arguments[0]instanceof ie&&arguments[1]instanceof ie){var I=arguments[0],N=arguments[1];this.x=I.y-N.y,this.y=N.x-I.x,this.w=I.x*N.y-N.x*I.y}}else if(arguments.length===3){var B=arguments[0],J=arguments[1],le=arguments[2];this.x=B,this.y=J,this.w=le}else if(arguments.length===4){var de=arguments[0],be=arguments[1],Pe=arguments[2],Ue=arguments[3],Ye=de.y-be.y,Et=be.x-de.x,ct=de.x*be.y-be.x*de.y,Wt=Pe.y-Ue.y,mn=Ue.x-Pe.x,Qn=Pe.x*Ue.y-Ue.x*Pe.y;this.x=Et*Qn-mn*ct,this.y=Wt*ct-Ye*Qn,this.w=Ye*mn-Wt*Et}}}])}(),Cy=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"area",value:function(){return y.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return y.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(f){if(f===null)throw new D("Supplied point is null.");return y.interpolateZ(f,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return y.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return y.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return y.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return y.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return y.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return y.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var f=arguments[0],h=arguments[1],m=arguments[2];this.p0=f,this.p1=h,this.p2=m}},{key:"area",value:function(f,h,m){return Math.abs(((m.x-f.x)*(h.y-f.y)-(h.x-f.x)*(m.y-f.y))/2)}},{key:"signedArea",value:function(f,h,m){return((m.x-f.x)*(h.y-f.y)-(h.x-f.x)*(m.y-f.y))/2}},{key:"det",value:function(f,h,m,$){return f*$-h*m}},{key:"interpolateZ",value:function(f,h,m,$){var A=h.x,I=h.y,N=m.x-A,B=$.x-A,J=m.y-I,le=$.y-I,de=N*le-B*J,be=f.x-A,Pe=f.y-I,Ue=(le*be-B*Pe)/de,Ye=(-J*be+N*Pe)/de;return h.getZ()+Ue*(m.getZ()-h.getZ())+Ye*($.getZ()-h.getZ())}},{key:"longestSideLength",value:function(f,h,m){var $=f.distance(h),A=h.distance(m),I=m.distance(f),N=$;return A>N&&(N=A),I>N&&(N=I),N}},{key:"circumcentreDD",value:function(f,h,m){var $=Je.valueOf(f.x).subtract(m.x),A=Je.valueOf(f.y).subtract(m.y),I=Je.valueOf(h.x).subtract(m.x),N=Je.valueOf(h.y).subtract(m.y),B=Je.determinant($,A,I,N).multiply(2),J=$.sqr().add(A.sqr()),le=I.sqr().add(N.sqr()),de=Je.determinant(A,J,N,le),be=Je.determinant($,J,I,le),Pe=Je.valueOf(m.x).subtract(de.divide(B)).doubleValue(),Ue=Je.valueOf(m.y).add(be.divide(B)).doubleValue();return new ie(Pe,Ue)}},{key:"isAcute",value:function(f,h,m){return!!jn.isAcute(f,h,m)&&!!jn.isAcute(h,m,f)&&!!jn.isAcute(m,f,h)}},{key:"circumcentre",value:function(f,h,m){var $=m.x,A=m.y,I=f.x-$,N=f.y-A,B=h.x-$,J=h.y-A,le=2*y.det(I,N,B,J),de=y.det(N,I*I+N*N,J,B*B+J*J),be=y.det(I,I*I+N*N,B,B*B+J*J);return new ie($-de/le,A+be/le)}},{key:"perpendicularBisector",value:function(f,h){var m=h.x-f.x,$=h.y-f.y,A=new Dy(f.x+m/2,f.y+$/2,1),I=new Dy(f.x-$+m/2,f.y+m+$/2,1);return new Dy(A,I)}},{key:"angleBisector",value:function(f,h,m){var $=h.distance(f),A=$/($+h.distance(m)),I=m.x-f.x,N=m.y-f.y;return new ie(f.x+A*I,f.y+A*N)}},{key:"area3D",value:function(f,h,m){var $=h.x-f.x,A=h.y-f.y,I=h.getZ()-f.getZ(),N=m.x-f.x,B=m.y-f.y,J=m.getZ()-f.getZ(),le=A*J-I*B,de=I*N-$*J,be=$*B-A*N,Pe=le*le+de*de+be*be,Ue=Math.sqrt(Pe)/2;return Ue}},{key:"centroid",value:function(f,h,m){var $=(f.x+h.x+m.x)/3,A=(f.y+h.y+m.y)/3;return new ie($,A)}},{key:"inCentre",value:function(f,h,m){var $=h.distance(m),A=f.distance(m),I=f.distance(h),N=$+A+I,B=($*f.x+A*h.x+I*m.x)/N,J=($*f.y+A*h.y+I*m.y)/N;return new ie(B,J)}}])}(),Ry=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(y,f,h,m,$){if(f===0&&y.length<Qr.MINIMUM_VALID_SIZE)return null;var A=m,I=$;y.length>=Qr.MINIMUM_VALID_SIZE&&Qe.isCCW(y)&&(A=$,I=m,h=Se.opposite(h));var N=this._curveBuilder.getRingCurve(y,h,f);this.addCurve(N,A,I)}},{key:"addRingBothSides",value:function(y,f){this.addRingSide(y,f,Se.LEFT,G.EXTERIOR,G.INTERIOR),this.addRingSide(y,f,Se.RIGHT,G.INTERIOR,G.EXTERIOR)}},{key:"addPoint",value:function(y){if(this._distance<=0)return null;var f=y.getCoordinates(),h=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(h,G.EXTERIOR,G.INTERIOR)}},{key:"addPolygon",value:function(y){var f=this._distance,h=Se.LEFT;this._distance<0&&(f=-this._distance,h=Se.RIGHT);var m=y.getExteriorRing(),$=Rn.removeRepeatedPoints(m.getCoordinates());if(this._distance<0&&this.isErodedCompletely(m,this._distance)||this._distance<=0&&$.length<3)return null;this.addRingSide($,f,h,G.EXTERIOR,G.INTERIOR);for(var A=0;A<y.getNumInteriorRing();A++){var I=y.getInteriorRingN(A),N=Rn.removeRepeatedPoints(I.getCoordinates());this._distance>0&&this.isErodedCompletely(I,-this._distance)||this.addRingSide(N,f,Se.opposite(h),G.INTERIOR,G.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(y,f){var h=new Cy(y[0],y[1],y[2]),m=h.inCentre();return Tr.pointToSegment(m,h.p0,h.p1)<Math.abs(f)}},{key:"addLineString",value:function(y){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var f=Rn.removeRepeatedPoints(y.getCoordinates());if(Rn.isRing(f)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(f,this._distance);else{var h=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(h,G.EXTERIOR,G.INTERIOR)}}},{key:"addCurve",value:function(y,f,h){if(y===null||y.length<2)return null;var m=new Wo(y,new Zi(0,G.BOUNDARY,f,h));this._curveList.add(m)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(y){if(y.isEmpty())return null;if(y instanceof Kf)this.addPolygon(y);else if(y instanceof Jf)this.addLineString(y);else if(y instanceof dy)this.addPoint(y);else if(y instanceof ap)this.addCollection(y);else if(y instanceof lp)this.addCollection(y);else if(y instanceof py)this.addCollection(y);else{if(!(y instanceof Di))throw new Rt(y.getGeometryType());this.addCollection(y)}}},{key:"isErodedCompletely",value:function(y,f){var h=y.getCoordinates();if(h.length<4)return f<0;if(h.length===4)return this.isTriangleErodedCompletely(h,f);var m=y.getEnvelopeInternal(),$=Math.min(m.getHeight(),m.getWidth());return f<0&&2*Math.abs(f)>$}},{key:"addCollection",value:function(y){for(var f=0;f<y.getNumGeometries();f++){var h=y.getGeometryN(f);this.add(h)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ke;var y=arguments[0],f=arguments[1],h=arguments[2];this._inputGeom=y,this._distance=f,this._curveBuilder=h}}])}(),NS=function(){return s(function y(){a(this,y)},[{key:"locate",value:function(y){}}])}(),LS=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,y.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new pt;var f=this._parent.getGeometryN(this._index++);return f instanceof Di?(this._subcollectionIterator=new y(f),this._subcollectionIterator.next()):f}},{key:"remove",value:function(){throw new Rt(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[PS]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var f=arguments[0];this._parent=f,this._atStart=!0,this._index=0,this._max=f.getNumGeometries()}},{key:"isAtomic",value:function(f){return!(f instanceof Di)}}])}(),Z0=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"locate",value:function(f){return y.locate(f,this._geom)}},{key:"interfaces_",get:function(){return[NS]}}],[{key:"constructor_",value:function(){this._geom=null;var f=arguments[0];this._geom=f}},{key:"locatePointInPolygon",value:function(f,h){if(h.isEmpty())return G.EXTERIOR;var m=h.getExteriorRing(),$=y.locatePointInRing(f,m);if($!==G.INTERIOR)return $;for(var A=0;A<h.getNumInteriorRing();A++){var I=h.getInteriorRingN(A),N=y.locatePointInRing(f,I);if(N===G.BOUNDARY)return G.BOUNDARY;if(N===G.INTERIOR)return G.EXTERIOR}return G.INTERIOR}},{key:"locatePointInRing",value:function(f,h){return h.getEnvelopeInternal().intersects(f)?cd.locateInRing(f,h.getCoordinates()):G.EXTERIOR}},{key:"containsPointInPolygon",value:function(f,h){return G.EXTERIOR!==y.locatePointInPolygon(f,h)}},{key:"locateInGeometry",value:function(f,h){if(h instanceof Kf)return y.locatePointInPolygon(f,h);if(h instanceof Di)for(var m=new LS(h);m.hasNext();){var $=m.next();if($!==h){var A=y.locateInGeometry(f,$);if(A!==G.EXTERIOR)return A}}return G.EXTERIOR}},{key:"isContained",value:function(f,h){return G.EXTERIOR!==y.locate(f,h)}},{key:"locate",value:function(f,h){return h.isEmpty()?G.EXTERIOR:h.getEnvelopeInternal().intersects(f)?y.locateInGeometry(f,h):G.EXTERIOR}}])}(),MS=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(y){this.getEdges();var f=this._edgeList.indexOf(y),h=f-1;return f===0&&(h=this._edgeList.size()-1),this._edgeList.get(h)}},{key:"propagateSideLabels",value:function(y){for(var f=G.NONE,h=this.iterator();h.hasNext();){var m=h.next().getLabel();m.isArea(y)&&m.getLocation(y,Se.LEFT)!==G.NONE&&(f=m.getLocation(y,Se.LEFT))}if(f===G.NONE)return null;for(var $=f,A=this.iterator();A.hasNext();){var I=A.next(),N=I.getLabel();if(N.getLocation(y,Se.ON)===G.NONE&&N.setLocation(y,Se.ON,$),N.isArea(y)){var B=N.getLocation(y,Se.LEFT),J=N.getLocation(y,Se.RIGHT);if(J!==G.NONE){if(J!==$)throw new Kr("side location conflict",I.getCoordinate());B===G.NONE&&U.shouldNeverReachHere("found single null side (at "+I.getCoordinate()+")"),$=B}else U.isTrue(N.getLocation(y,Se.LEFT)===G.NONE,"found single null side"),N.setLocation(y,Se.RIGHT,$),N.setLocation(y,Se.LEFT,$)}}}},{key:"getCoordinate",value:function(){var y=this.iterator();return y.hasNext()?y.next().getCoordinate():null}},{key:"print",value:function(y){Qa.out.println("EdgeEndStar:   "+this.getCoordinate());for(var f=this.iterator();f.hasNext();)f.next().print(y)}},{key:"isAreaLabelsConsistent",value:function(y){return this.computeEdgeEndLabels(y.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(y){var f=this.getEdges();if(f.size()<=0)return!0;var h=f.size()-1,m=f.get(h).getLabel().getLocation(y,Se.LEFT);U.isTrue(m!==G.NONE,"Found unlabelled area edge");for(var $=m,A=this.iterator();A.hasNext();){var I=A.next().getLabel();U.isTrue(I.isArea(y),"Found non-area edge");var N=I.getLocation(y,Se.LEFT),B=I.getLocation(y,Se.RIGHT);if(N===B||B!==$)return!1;$=N}return!0}},{key:"findIndex",value:function(y){this.iterator();for(var f=0;f<this._edgeList.size();f++)if(this._edgeList.get(f)===y)return f;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new Ke(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(y,f,h){return this._ptInAreaLocation[y]===G.NONE&&(this._ptInAreaLocation[y]=Z0.locate(f,h[y].getGeometry())),this._ptInAreaLocation[y]}},{key:"toString",value:function(){var y=new Uo;y.append("EdgeEndStar:   "+this.getCoordinate()),y.append(`
`);for(var f=this.iterator();f.hasNext();){var h=f.next();y.append(h),y.append(`
`)}return y.toString()}},{key:"computeEdgeEndLabels",value:function(y){for(var f=this.iterator();f.hasNext();)f.next().computeLabel(y)}},{key:"computeLabelling",value:function(y){this.computeEdgeEndLabels(y[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var f=[!1,!1],h=this.iterator();h.hasNext();)for(var m=h.next().getLabel(),$=0;$<2;$++)m.isLine($)&&m.getLocation($)===G.BOUNDARY&&(f[$]=!0);for(var A=this.iterator();A.hasNext();)for(var I=A.next(),N=I.getLabel(),B=0;B<2;B++)if(N.isAnyNull(B)){var J=G.NONE;if(f[B])J=G.EXTERIOR;else{var le=I.getCoordinate();J=this.getLocation(B,le,y)}N.setAllLocationsIfNull(B,J)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(y,f){this._edgeMap.put(y,f),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new xn,this._edgeList=null,this._ptInAreaLocation=[G.NONE,G.NONE]}}])}(),Or=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var h=null,m=null,$=this._SCANNING_FOR_INCOMING,A=0;A<this._resultAreaEdgeList.size();A++){var I=this._resultAreaEdgeList.get(A),N=I.getSym();if(I.getLabel().isArea())switch(h===null&&I.isInResult()&&(h=I),$){case this._SCANNING_FOR_INCOMING:if(!N.isInResult())continue;m=N,$=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!I.isInResult())continue;m.setNext(I),$=this._SCANNING_FOR_INCOMING}}if($===this._LINKING_TO_OUTGOING){if(h===null)throw new Kr("no outgoing dirEdge found",this.getCoordinate());U.isTrue(h.isInResult(),"unable to link last incoming dirEdge"),m.setNext(h)}}},{key:"insert",value:function(h){var m=h;this.insertEdgeEnd(m,m)}},{key:"getRightmostEdge",value:function(){var h=this.getEdges(),m=h.size();if(m<1)return null;var $=h.get(0);if(m===1)return $;var A=h.get(m-1),I=$.getQuadrant(),N=A.getQuadrant();return ci.isNorthern(I)&&ci.isNorthern(N)?$:ci.isNorthern(I)||ci.isNorthern(N)?$.getDy()!==0?$:A.getDy()!==0?A:(U.shouldNeverReachHere("found two horizontal edges incident on node"),null):A}},{key:"print",value:function(h){Qa.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var m=this.iterator();m.hasNext();){var $=m.next();h.print("out "),$.print(h),h.println(),h.print("in "),$.getSym().print(h),h.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ke;for(var h=this.iterator();h.hasNext();){var m=h.next();(m.isInResult()||m.getSym().isInResult())&&this._resultAreaEdgeList.add(m)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(h){for(var m=this.iterator();m.hasNext();){var $=m.next().getLabel();$.setAllLocationsIfNull(0,h.getLocation(0)),$.setAllLocationsIfNull(1,h.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var h=null,m=null,$=this._edgeList.size()-1;$>=0;$--){var A=this._edgeList.get($),I=A.getSym();m===null&&(m=I),h!==null&&I.setNext(h),h=A}m.setNext(h)}},{key:"computeDepths",value:function(){if(arguments.length===1){var h=arguments[0],m=this.findIndex(h),$=h.getDepth(Se.LEFT),A=h.getDepth(Se.RIGHT),I=this.computeDepths(m+1,this._edgeList.size(),$);if(this.computeDepths(0,m,I)!==A)throw new Kr("depth mismatch at "+h.getCoordinate())}else if(arguments.length===3){for(var N=arguments[1],B=arguments[2],J=arguments[0];J<N;J++){var le=this._edgeList.get(J);le.setEdgeDepths(Se.RIGHT,B),B=le.getDepth(Se.LEFT)}return B}}},{key:"mergeSymLabels",value:function(){for(var h=this.iterator();h.hasNext();){var m=h.next();m.getLabel().merge(m.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(h){for(var m=null,$=null,A=this._SCANNING_FOR_INCOMING,I=this._resultAreaEdgeList.size()-1;I>=0;I--){var N=this._resultAreaEdgeList.get(I),B=N.getSym();switch(m===null&&N.getEdgeRing()===h&&(m=N),A){case this._SCANNING_FOR_INCOMING:if(B.getEdgeRing()!==h)continue;$=B,A=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(N.getEdgeRing()!==h)continue;$.setNextMin(N),A=this._SCANNING_FOR_INCOMING}}A===this._LINKING_TO_OUTGOING&&(U.isTrue(m!==null,"found null for first outgoing dirEdge"),U.isTrue(m.getEdgeRing()===h,"unable to link last incoming dirEdge"),$.setNextMin(m))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var h=0,m=this.iterator();m.hasNext();)m.next().isInResult()&&h++;return h}if(arguments.length===1){for(var $=arguments[0],A=0,I=this.iterator();I.hasNext();)I.next().getEdgeRing()===$&&A++;return A}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var h=G.NONE,m=this.iterator();m.hasNext();){var $=m.next(),A=$.getSym();if(!$.isLineEdge()){if($.isInResult()){h=G.INTERIOR;break}if(A.isInResult()){h=G.EXTERIOR;break}}}if(h===G.NONE)return null;for(var I=h,N=this.iterator();N.hasNext();){var B=N.next(),J=B.getSym();B.isLineEdge()?B.getEdge().setCovered(I===G.INTERIOR):(B.isInResult()&&(I=G.EXTERIOR),J.isInResult()&&(I=G.INTERIOR))}}},{key:"computeLabelling",value:function(h){b(f,"computeLabelling",this,1).call(this,h),this._label=new Zi(G.NONE);for(var m=this.iterator();m.hasNext();)for(var $=m.next().getEdge().getLabel(),A=0;A<2;A++){var I=$.getLocation(A);I!==G.INTERIOR&&I!==G.BOUNDARY||this._label.setLocation(A,G.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(MS),pd=function(y){function f(){return a(this,f),i(this,f)}return c(f,y),s(f,[{key:"createNode",value:function(h){return new ic(h,new Or)}}])}(wy),J0=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"compareTo",value:function(f){var h=f;return y.compareOriented(this._pts,this._orientation,h._pts,h._orientation)}},{key:"interfaces_",get:function(){return[R]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var f=arguments[0];this._pts=f,this._orientation=y.orientation(f)}},{key:"orientation",value:function(f){return Rn.increasingDirection(f)===1}},{key:"compareOriented",value:function(f,h,m,$){for(var A=h?1:-1,I=$?1:-1,N=h?f.length:-1,B=$?m.length:-1,J=h?0:f.length-1,le=$?0:m.length-1;;){var de=f[J].compareTo(m[le]);if(de!==0)return de;var be=(J+=A)===N,Pe=(le+=I)===B;if(be&&!Pe)return-1;if(!be&&Pe)return 1;if(be&&Pe)return 0}}}])}(),Go=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"print",value:function(y){y.print("MULTILINESTRING ( ");for(var f=0;f<this._edges.size();f++){var h=this._edges.get(f);f>0&&y.print(","),y.print("(");for(var m=h.getCoordinates(),$=0;$<m.length;$++)$>0&&y.print(","),y.print(m[$].x+" "+m[$].y);y.println(")")}y.print(")  ")}},{key:"addAll",value:function(y){for(var f=y.iterator();f.hasNext();)this.add(f.next())}},{key:"findEdgeIndex",value:function(y){for(var f=0;f<this._edges.size();f++)if(this._edges.get(f).equals(y))return f;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(y){return this._edges.get(y)}},{key:"findEqualEdge",value:function(y){var f=new J0(y.getCoordinates());return this._ocaMap.get(f)}},{key:"add",value:function(y){this._edges.add(y);var f=new J0(y.getCoordinates());this._ocaMap.put(f,y)}}],[{key:"constructor_",value:function(){this._edges=new Ke,this._ocaMap=new xn}}])}(),K0=function(){return s(function y(){a(this,y)},[{key:"processIntersections",value:function(y,f,h,m){}},{key:"isDone",value:function(){}}])}(),gd=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"isTrivialIntersection",value:function(f,h,m,$){if(f===m&&this._li.getIntersectionNum()===1){if(y.isAdjacentSegments(h,$))return!0;if(f.isClosed()){var A=f.size()-1;if(h===0&&$===A||$===0&&h===A)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(f,h,m,$){if(f===m&&h===$)return null;this.numTests++;var A=f.getCoordinates()[h],I=f.getCoordinates()[h+1],N=m.getCoordinates()[$],B=m.getCoordinates()[$+1];this._li.computeIntersection(A,I,N,B),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(f,h,m,$)||(this._hasIntersection=!0,f.addIntersections(this._li,h,0),m.addIntersections(this._li,$,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[K0]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var f=arguments[0];this._li=f}},{key:"isAdjacentSegments",value:function(f,h){return Math.abs(f-h)===1}}])}(),zS=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(y){y.print(this.coord),y.print(" seg # = "+this.segmentIndex),y.println(" dist = "+this.dist)}},{key:"compareTo",value:function(y){var f=y;return this.compare(f.segmentIndex,f.dist)}},{key:"isEndPoint",value:function(y){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===y}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(y,f){return this.segmentIndex<y?-1:this.segmentIndex>y?1:this.dist<f?-1:this.dist>f?1:0}},{key:"interfaces_",get:function(){return[R]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var y=arguments[0],f=arguments[1],h=arguments[2];this.coord=new ie(y),this.segmentIndex=f,this.dist=h}}])}(),lc=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"print",value:function(y){y.println("Intersections:");for(var f=this.iterator();f.hasNext();)f.next().print(y)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(y){this.addEndpoints();for(var f=this.iterator(),h=f.next();f.hasNext();){var m=f.next(),$=this.createSplitEdge(h,m);y.add($),h=m}}},{key:"addEndpoints",value:function(){var y=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[y],y,0)}},{key:"createSplitEdge",value:function(y,f){var h=f.segmentIndex-y.segmentIndex+2,m=this.edge.pts[f.segmentIndex],$=f.dist>0||!f.coord.equals2D(m);$||h--;var A=new Array(h).fill(null),I=0;A[I++]=new ie(y.coord);for(var N=y.segmentIndex+1;N<=f.segmentIndex;N++)A[I++]=this.edge.pts[N];return $&&(A[I]=f.coord),new ex(A,new Zi(this.edge._label))}},{key:"add",value:function(y,f,h){var m=new zS(y,f,h),$=this._nodeMap.get(m);return $!==null?$:(this._nodeMap.put(m,m),m)}},{key:"isIntersection",value:function(y){for(var f=this.iterator();f.hasNext();)if(f.next().coord.equals(y))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new xn,this.edge=null;var y=arguments[0];this.edge=y}}])}(),Q0=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(y.isTrue(this._matrix[G.INTERIOR][G.INTERIOR])||y.isTrue(this._matrix[G.INTERIOR][G.BOUNDARY])||y.isTrue(this._matrix[G.BOUNDARY][G.INTERIOR])||y.isTrue(this._matrix[G.BOUNDARY][G.BOUNDARY]))&&this._matrix[G.EXTERIOR][G.INTERIOR]===Re.FALSE&&this._matrix[G.EXTERIOR][G.BOUNDARY]===Re.FALSE}},{key:"isCoveredBy",value:function(){return(y.isTrue(this._matrix[G.INTERIOR][G.INTERIOR])||y.isTrue(this._matrix[G.INTERIOR][G.BOUNDARY])||y.isTrue(this._matrix[G.BOUNDARY][G.INTERIOR])||y.isTrue(this._matrix[G.BOUNDARY][G.BOUNDARY]))&&this._matrix[G.INTERIOR][G.EXTERIOR]===Re.FALSE&&this._matrix[G.BOUNDARY][G.EXTERIOR]===Re.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var f=arguments[0],h=0;h<f.length;h++){var m=Math.trunc(h/3),$=h%3;this._matrix[m][$]=Re.toDimensionValue(f.charAt(h))}else if(arguments.length===3){var A=arguments[0],I=arguments[1],N=arguments[2];this._matrix[A][I]=N}}},{key:"isContains",value:function(){return y.isTrue(this._matrix[G.INTERIOR][G.INTERIOR])&&this._matrix[G.EXTERIOR][G.INTERIOR]===Re.FALSE&&this._matrix[G.EXTERIOR][G.BOUNDARY]===Re.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var f=arguments[0],h=0;h<f.length;h++){var m=Math.trunc(h/3),$=h%3;this.setAtLeast(m,$,Re.toDimensionValue(f.charAt(h)))}else if(arguments.length===3){var A=arguments[0],I=arguments[1],N=arguments[2];this._matrix[A][I]<N&&(this._matrix[A][I]=N)}}},{key:"setAtLeastIfValid",value:function(f,h,m){f>=0&&h>=0&&this.setAtLeast(f,h,m)}},{key:"isWithin",value:function(){return y.isTrue(this._matrix[G.INTERIOR][G.INTERIOR])&&this._matrix[G.INTERIOR][G.EXTERIOR]===Re.FALSE&&this._matrix[G.BOUNDARY][G.EXTERIOR]===Re.FALSE}},{key:"isTouches",value:function(f,h){return f>h?this.isTouches(h,f):(f===Re.A&&h===Re.A||f===Re.L&&h===Re.L||f===Re.L&&h===Re.A||f===Re.P&&h===Re.A||f===Re.P&&h===Re.L)&&this._matrix[G.INTERIOR][G.INTERIOR]===Re.FALSE&&(y.isTrue(this._matrix[G.INTERIOR][G.BOUNDARY])||y.isTrue(this._matrix[G.BOUNDARY][G.INTERIOR])||y.isTrue(this._matrix[G.BOUNDARY][G.BOUNDARY]))}},{key:"isOverlaps",value:function(f,h){return f===Re.P&&h===Re.P||f===Re.A&&h===Re.A?y.isTrue(this._matrix[G.INTERIOR][G.INTERIOR])&&y.isTrue(this._matrix[G.INTERIOR][G.EXTERIOR])&&y.isTrue(this._matrix[G.EXTERIOR][G.INTERIOR]):f===Re.L&&h===Re.L&&this._matrix[G.INTERIOR][G.INTERIOR]===1&&y.isTrue(this._matrix[G.INTERIOR][G.EXTERIOR])&&y.isTrue(this._matrix[G.EXTERIOR][G.INTERIOR])}},{key:"isEquals",value:function(f,h){return f===h&&y.isTrue(this._matrix[G.INTERIOR][G.INTERIOR])&&this._matrix[G.INTERIOR][G.EXTERIOR]===Re.FALSE&&this._matrix[G.BOUNDARY][G.EXTERIOR]===Re.FALSE&&this._matrix[G.EXTERIOR][G.INTERIOR]===Re.FALSE&&this._matrix[G.EXTERIOR][G.BOUNDARY]===Re.FALSE}},{key:"toString",value:function(){for(var f=new sp("123456789"),h=0;h<3;h++)for(var m=0;m<3;m++)f.setCharAt(3*h+m,Re.toDimensionSymbol(this._matrix[h][m]));return f.toString()}},{key:"setAll",value:function(f){for(var h=0;h<3;h++)for(var m=0;m<3;m++)this._matrix[h][m]=f}},{key:"get",value:function(f,h){return this._matrix[f][h]}},{key:"transpose",value:function(){var f=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=f,f=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=f,f=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=f,this}},{key:"matches",value:function(f){if(f.length!==9)throw new D("Should be length 9: "+f);for(var h=0;h<3;h++)for(var m=0;m<3;m++)if(!y.matches(this._matrix[h][m],f.charAt(3*h+m)))return!1;return!0}},{key:"add",value:function(f){for(var h=0;h<3;h++)for(var m=0;m<3;m++)this.setAtLeast(h,m,f.get(h,m))}},{key:"isDisjoint",value:function(){return this._matrix[G.INTERIOR][G.INTERIOR]===Re.FALSE&&this._matrix[G.INTERIOR][G.BOUNDARY]===Re.FALSE&&this._matrix[G.BOUNDARY][G.INTERIOR]===Re.FALSE&&this._matrix[G.BOUNDARY][G.BOUNDARY]===Re.FALSE}},{key:"isCrosses",value:function(f,h){return f===Re.P&&h===Re.L||f===Re.P&&h===Re.A||f===Re.L&&h===Re.A?y.isTrue(this._matrix[G.INTERIOR][G.INTERIOR])&&y.isTrue(this._matrix[G.INTERIOR][G.EXTERIOR]):f===Re.L&&h===Re.P||f===Re.A&&h===Re.P||f===Re.A&&h===Re.L?y.isTrue(this._matrix[G.INTERIOR][G.INTERIOR])&&y.isTrue(this._matrix[G.EXTERIOR][G.INTERIOR]):f===Re.L&&h===Re.L&&this._matrix[G.INTERIOR][G.INTERIOR]===0}},{key:"interfaces_",get:function(){return[M]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Re.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var f=arguments[0];y.constructor_.call(this),this.set(f)}else if(arguments[0]instanceof y){var h=arguments[0];y.constructor_.call(this),this._matrix[G.INTERIOR][G.INTERIOR]=h._matrix[G.INTERIOR][G.INTERIOR],this._matrix[G.INTERIOR][G.BOUNDARY]=h._matrix[G.INTERIOR][G.BOUNDARY],this._matrix[G.INTERIOR][G.EXTERIOR]=h._matrix[G.INTERIOR][G.EXTERIOR],this._matrix[G.BOUNDARY][G.INTERIOR]=h._matrix[G.BOUNDARY][G.INTERIOR],this._matrix[G.BOUNDARY][G.BOUNDARY]=h._matrix[G.BOUNDARY][G.BOUNDARY],this._matrix[G.BOUNDARY][G.EXTERIOR]=h._matrix[G.BOUNDARY][G.EXTERIOR],this._matrix[G.EXTERIOR][G.INTERIOR]=h._matrix[G.EXTERIOR][G.INTERIOR],this._matrix[G.EXTERIOR][G.BOUNDARY]=h._matrix[G.EXTERIOR][G.BOUNDARY],this._matrix[G.EXTERIOR][G.EXTERIOR]=h._matrix[G.EXTERIOR][G.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var f=arguments[0],h=arguments[1];return h===Re.SYM_DONTCARE||h===Re.SYM_TRUE&&(f>=0||f===Re.TRUE)||h===Re.SYM_FALSE&&f===Re.FALSE||h===Re.SYM_P&&f===Re.P||h===Re.SYM_L&&f===Re.L||h===Re.SYM_A&&f===Re.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var m=arguments[1];return new y(arguments[0]).matches(m)}}},{key:"isTrue",value:function(f){return f>=0||f===Re.TRUE}}])}(),vp=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(f){return f===null||f.length===0?null:(this.ensureCapacity(this._size+f.length),Qa.arraycopy(f,0,this._data,this._size,f.length),void(this._size+=f.length))}},{key:"ensureCapacity",value:function(f){if(f<=this._data.length)return null;var h=Math.max(f,2*this._data.length);this._data=di.copyOf(this._data,h)}},{key:"toArray",value:function(){var f=new Array(this._size).fill(null);return Qa.arraycopy(this._data,0,f,0,this._size),f}},{key:"add",value:function(f){this.ensureCapacity(this._size+1),this._data[this._size]=f,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)y.constructor_.call(this,10);else if(arguments.length===1){var f=arguments[0];this._data=new Array(f).fill(null)}}}])}(),qS=function(){function y(){a(this,y)}return s(y,[{key:"getChainStartIndices",value:function(f){var h=0,m=new vp(Math.trunc(f.length/2));m.add(h);do{var $=this.findChainEnd(f,h);m.add($),h=$}while(h<f.length-1);return m.toArray()}},{key:"findChainEnd",value:function(f,h){for(var m=ci.quadrant(f[h],f[h+1]),$=h+1;$<f.length&&ci.quadrant(f[$-1],f[$])===m;)$++;return $-1}},{key:"OLDgetChainStartIndices",value:function(f){var h=0,m=new Ke;m.add(h);do{var $=this.findChainEnd(f,h);m.add($),h=$}while(h<f.length-1);return y.toIntArray(m)}}],[{key:"toIntArray",value:function(f){for(var h=new Array(f.size()).fill(null),m=0;m<h.length;m++)h[m]=f.get(m).intValue();return h}}])}(),Vs=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(y){var f=this.pts[this.startIndex[y]].x,h=this.pts[this.startIndex[y+1]].x;return f>h?f:h}},{key:"getMinX",value:function(y){var f=this.pts[this.startIndex[y]].x,h=this.pts[this.startIndex[y+1]].x;return f<h?f:h}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var y=arguments[0],f=arguments[1],h=arguments[2],m=arguments[3];this.computeIntersectsForChain(this.startIndex[y],this.startIndex[y+1],f,f.startIndex[h],f.startIndex[h+1],m)}else if(arguments.length===6){var $=arguments[0],A=arguments[1],I=arguments[2],N=arguments[3],B=arguments[4],J=arguments[5];if(A-$==1&&B-N==1)return J.addIntersections(this.e,$,I.e,N),null;if(!this.overlaps($,A,I,N,B))return null;var le=Math.trunc(($+A)/2),de=Math.trunc((N+B)/2);$<le&&(N<de&&this.computeIntersectsForChain($,le,I,N,de,J),de<B&&this.computeIntersectsForChain($,le,I,de,B,J)),le<A&&(N<de&&this.computeIntersectsForChain(le,A,I,N,de,J),de<B&&this.computeIntersectsForChain(le,A,I,de,B,J))}}},{key:"overlaps",value:function(y,f,h,m,$){return xe.intersects(this.pts[y],this.pts[f],h.pts[m],h.pts[$])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(y,f){for(var h=0;h<this.startIndex.length-1;h++)for(var m=0;m<y.startIndex.length-1;m++)this.computeIntersectsForChain(h,y,m,f)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var y=arguments[0];this.e=y,this.pts=y.getCoordinates();var f=new qS;this.startIndex=f.getChainStartIndices(this.pts)}}])}(),uc=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"getDepth",value:function(f,h){return this._depth[f][h]}},{key:"setDepth",value:function(f,h,m){this._depth[f][h]=m}},{key:"isNull",value:function(){if(arguments.length===0){for(var f=0;f<2;f++)for(var h=0;h<3;h++)if(this._depth[f][h]!==y.NULL_VALUE)return!1;return!0}if(arguments.length===1){var m=arguments[0];return this._depth[m][1]===y.NULL_VALUE}if(arguments.length===2){var $=arguments[0],A=arguments[1];return this._depth[$][A]===y.NULL_VALUE}}},{key:"normalize",value:function(){for(var f=0;f<2;f++)if(!this.isNull(f)){var h=this._depth[f][1];this._depth[f][2]<h&&(h=this._depth[f][2]),h<0&&(h=0);for(var m=1;m<3;m++){var $=0;this._depth[f][m]>h&&($=1),this._depth[f][m]=$}}}},{key:"getDelta",value:function(f){return this._depth[f][Se.RIGHT]-this._depth[f][Se.LEFT]}},{key:"getLocation",value:function(f,h){return this._depth[f][h]<=0?G.EXTERIOR:G.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var f=arguments[0],h=0;h<2;h++)for(var m=1;m<3;m++){var $=f.getLocation(h,m);$!==G.EXTERIOR&&$!==G.INTERIOR||(this.isNull(h,m)?this._depth[h][m]=y.depthAtLocation($):this._depth[h][m]+=y.depthAtLocation($))}else if(arguments.length===3){var A=arguments[0],I=arguments[1];arguments[2]===G.INTERIOR&&this._depth[A][I]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var f=0;f<2;f++)for(var h=0;h<3;h++)this._depth[f][h]=y.NULL_VALUE}},{key:"depthAtLocation",value:function(f){return f===G.EXTERIOR?0:f===G.INTERIOR?1:y.NULL_VALUE}}])}();uc.NULL_VALUE=-1;var ex=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var h=new Array(2).fill(null);return h[0]=this.pts[0],h[1]=this.pts[1],new f(h,Zi.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(h){this._isIsolated=h}},{key:"setName",value:function(h){this._name=h}},{key:"equals",value:function(h){if(!(h instanceof f))return!1;var m=h;if(this.pts.length!==m.pts.length)return!1;for(var $=!0,A=!0,I=this.pts.length,N=0;N<this.pts.length;N++)if(this.pts[N].equals2D(m.pts[N])||($=!1),this.pts[N].equals2D(m.pts[--I])||(A=!1),!$&&!A)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var h=arguments[0];return this.pts[h]}}},{key:"print",value:function(h){h.print("edge "+this._name+": "),h.print("LINESTRING (");for(var m=0;m<this.pts.length;m++)m>0&&h.print(","),h.print(this.pts[m].x+" "+this.pts[m].y);h.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(h){f.updateIM(this._label,h)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(h){h.print("edge "+this._name+": ");for(var m=this.pts.length-1;m>=0;m--)h.print(this.pts[m]+" ");h.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Vs(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new xe;for(var h=0;h<this.pts.length;h++)this._env.expandToInclude(this.pts[h])}return this._env}},{key:"addIntersection",value:function(h,m,$,A){var I=new ie(h.getIntersection(A)),N=m,B=h.getEdgeDistance($,A),J=N+1;if(J<this.pts.length){var le=this.pts[J];I.equals2D(le)&&(N=J,B=0)}this.eiList.add(I,N,B)}},{key:"toString",value:function(){var h=new sp;h.append("edge "+this._name+": "),h.append("LINESTRING (");for(var m=0;m<this.pts.length;m++)m>0&&h.append(","),h.append(this.pts[m].x+" "+this.pts[m].y);return h.append(")  "+this._label+" "+this._depthDelta),h.toString()}},{key:"isPointwiseEqual",value:function(h){if(this.pts.length!==h.pts.length)return!1;for(var m=0;m<this.pts.length;m++)if(!this.pts[m].equals2D(h.pts[m]))return!1;return!0}},{key:"setDepthDelta",value:function(h){this._depthDelta=h}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(h,m,$){for(var A=0;A<h.getIntersectionNum();A++)this.addIntersection(h,m,$,A)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new lc(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new uc,this._depthDelta=0,arguments.length===1){var h=arguments[0];f.constructor_.call(this,h,null)}else if(arguments.length===2){var m=arguments[0],$=arguments[1];this.pts=m,this._label=$}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Q0&&arguments[0]instanceof Zi))return b(f,"updateIM",this).apply(this,arguments);var h=arguments[0],m=arguments[1];m.setAtLeastIfValid(h.getLocation(0,Se.ON),h.getLocation(1,Se.ON),1),h.isArea()&&(m.setAtLeastIfValid(h.getLocation(0,Se.LEFT),h.getLocation(1,Se.LEFT),2),m.setAtLeastIfValid(h.getLocation(0,Se.RIGHT),h.getLocation(1,Se.RIGHT),2))}}])}(Vt),bp=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"setWorkingPrecisionModel",value:function(f){this._workingPrecisionModel=f}},{key:"insertUniqueEdge",value:function(f){var h=this._edgeList.findEqualEdge(f);if(h!==null){var m=h.getLabel(),$=f.getLabel();h.isPointwiseEqual(f)||($=new Zi(f.getLabel())).flip(),m.merge($);var A=y.depthDelta($),I=h.getDepthDelta()+A;h.setDepthDelta(I)}else this._edgeList.add(f),f.setDepthDelta(y.depthDelta(f.getLabel()))}},{key:"buildSubgraphs",value:function(f,h){for(var m=new Ke,$=f.iterator();$.hasNext();){var A=$.next(),I=A.getRightmostCoordinate(),N=new Ea(m).getDepth(I);A.computeDepth(N),A.findResultEdges(),m.add(A),h.add(A.getDirectedEdges(),A.getNodes())}}},{key:"createSubgraphs",value:function(f){for(var h=new Ke,m=f.getNodes().iterator();m.hasNext();){var $=m.next();if(!$.isVisited()){var A=new Zf;A.create($),h.add(A)}}return Jl.sort(h,Jl.reverseOrder()),h}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(f){if(this._workingNoder!==null)return this._workingNoder;var h=new Sy,m=new Vo;return m.setPrecisionModel(f),h.setSegmentIntersector(new gd(m)),h}},{key:"buffer",value:function(f,h){var m=this._workingPrecisionModel;m===null&&(m=f.getPrecisionModel()),this._geomFact=f.getFactory();var $=new sc(m,this._bufParams),A=new Ry(f,h,$).getCurves();if(A.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(A,m),this._graph=new pp(new pd),this._graph.addEdges(this._edgeList.getEdges());var I=this.createSubgraphs(this._graph),N=new DS(this._geomFact);this.buildSubgraphs(I,N);var B=N.getPolygons();return B.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(B)}},{key:"computeNodedEdges",value:function(f,h){var m=this.getNoder(h);m.computeNodes(f);for(var $=m.getNodedSubstrings().iterator();$.hasNext();){var A=$.next(),I=A.getCoordinates();if(I.length!==2||!I[0].equals2D(I[1])){var N=A.getData(),B=new ex(A.getCoordinates(),new Zi(N));this.insertUniqueEdge(B)}}}},{key:"setNoder",value:function(f){this._workingNoder=f}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Go;var f=arguments[0];this._bufParams=f}},{key:"depthDelta",value:function(f){var h=f.getLocation(0,Se.LEFT),m=f.getLocation(0,Se.RIGHT);return h===G.INTERIOR&&m===G.EXTERIOR?1:h===G.EXTERIOR&&m===G.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(f){for(var h=new eo,m=new Ke;f.hasNext();){var $=f.next(),A=h.createLineString($.getCoordinates());m.add(A)}return h.buildGeometry(m)}}])}(),jS=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"rescale",value:function(){if(tt(arguments[0],kt))for(var f=arguments[0].iterator();f.hasNext();){var h=f.next();this.rescale(h.getCoordinates())}else if(arguments[0]instanceof Array){for(var m=arguments[0],$=0;$<m.length;$++)m[$].x=m[$].x/this._scaleFactor+this._offsetX,m[$].y=m[$].y/this._scaleFactor+this._offsetY;m.length===2&&m[0].equals2D(m[1])&&Qa.out.println(m)}}},{key:"scale",value:function(){if(tt(arguments[0],kt)){for(var f=arguments[0],h=new Ke(f.size()),m=f.iterator();m.hasNext();){var $=m.next();h.add(new Wo(this.scale($.getCoordinates()),$.getData()))}return h}if(arguments[0]instanceof Array){for(var A=arguments[0],I=new Array(A.length).fill(null),N=0;N<A.length;N++)I[N]=new ie(Math.round((A[N].x-this._offsetX)*this._scaleFactor),Math.round((A[N].y-this._offsetY)*this._scaleFactor),A[N].getZ());return Rn.removeRepeatedPoints(I)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var f=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(f),f}},{key:"computeNodes",value:function(f){var h=f;this._isScaled&&(h=this.scale(f)),this._noder.computeNodes(h)}},{key:"interfaces_",get:function(){return[Ey]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var f=arguments[0],h=arguments[1];y.constructor_.call(this,f,h,0,0)}else if(arguments.length===4){var m=arguments[0],$=arguments[1];this._noder=m,this._scaleFactor=$,this._isScaled=!this.isIntegerPrecision()}}}])}(),ro=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var f=this._segStrings.iterator();f.hasNext();){var h=f.next().getCoordinates();this.checkEndPtVertexIntersections(h[0],this._segStrings),this.checkEndPtVertexIntersections(h[h.length-1],this._segStrings)}else if(arguments.length===2){for(var m=arguments[0],$=arguments[1].iterator();$.hasNext();)for(var A=$.next().getCoordinates(),I=1;I<A.length-1;I++)if(A[I].equals(m))throw new ae("found endpt/interior pt intersection at index "+I+" :pt "+m)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var f=this._segStrings.iterator();f.hasNext();)for(var h=f.next(),m=this._segStrings.iterator();m.hasNext();){var $=m.next();this.checkInteriorIntersections(h,$)}else if(arguments.length===2)for(var A=arguments[0],I=arguments[1],N=A.getCoordinates(),B=I.getCoordinates(),J=0;J<N.length-1;J++)for(var le=0;le<B.length-1;le++)this.checkInteriorIntersections(A,J,I,le);else if(arguments.length===4){var de=arguments[0],be=arguments[1],Pe=arguments[2],Ue=arguments[3];if(de===Pe&&be===Ue)return null;var Ye=de.getCoordinates()[be],Et=de.getCoordinates()[be+1],ct=Pe.getCoordinates()[Ue],Wt=Pe.getCoordinates()[Ue+1];if(this._li.computeIntersection(Ye,Et,ct,Wt),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Ye,Et)||this.hasInteriorIntersection(this._li,ct,Wt)))throw new ae("found non-noded intersection at "+Ye+"-"+Et+" and "+ct+"-"+Wt)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var f=this._segStrings.iterator();f.hasNext();){var h=f.next();this.checkCollapses(h)}else if(arguments.length===1)for(var m=arguments[0].getCoordinates(),$=0;$<m.length-2;$++)this.checkCollapse(m[$],m[$+1],m[$+2])}},{key:"hasInteriorIntersection",value:function(f,h,m){for(var $=0;$<f.getIntersectionNum();$++){var A=f.getIntersection($);if(!A.equals(h)&&!A.equals(m))return!0}return!1}},{key:"checkCollapse",value:function(f,h,m){if(f.equals(m))throw new ae("found non-noded collapse at "+y.fact.createLineString([f,h,m]))}}],[{key:"constructor_",value:function(){this._li=new Vo,this._segStrings=null;var f=arguments[0];this._segStrings=f}}])}();ro.fact=new eo;var Iy=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"intersectsScaled",value:function(f,h){var m=Math.min(f.x,h.x),$=Math.max(f.x,h.x),A=Math.min(f.y,h.y),I=Math.max(f.y,h.y),N=this._maxx<m||this._minx>$||this._maxy<A||this._miny>I;if(N)return!1;var B=this.intersectsToleranceSquare(f,h);return U.isTrue(!(N&&B),"Found bad envelope test"),B}},{key:"initCorners",value:function(f){var h=.5;this._minx=f.x-h,this._maxx=f.x+h,this._miny=f.y-h,this._maxy=f.y+h,this._corner[0]=new ie(this._maxx,this._maxy),this._corner[1]=new ie(this._minx,this._maxy),this._corner[2]=new ie(this._minx,this._miny),this._corner[3]=new ie(this._maxx,this._miny)}},{key:"intersects",value:function(f,h){return this._scaleFactor===1?this.intersectsScaled(f,h):(this.copyScaled(f,this._p0Scaled),this.copyScaled(h,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(f){return Math.round(f*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(f,h){h.x=this.scale(f.x),h.y=this.scale(f.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var f=y.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new xe(this._originalPt.x-f,this._originalPt.x+f,this._originalPt.y-f,this._originalPt.y+f)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(f,h){return this._li.computeIntersection(f,h,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(f,h,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(f,h,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(f,h,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(f,h){var m=!1,$=!1;return this._li.computeIntersection(f,h,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(f,h,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(m=!0),this._li.computeIntersection(f,h,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&($=!0),this._li.computeIntersection(f,h,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!m||!$)||!!f.equals(this._pt)||!!h.equals(this._pt))))}},{key:"addSnappedNode",value:function(f,h){var m=f.getCoordinate(h),$=f.getCoordinate(h+1);return!!this.intersects(m,$)&&(f.addIntersection(this.getCoordinate(),h),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var f=arguments[0],h=arguments[1],m=arguments[2];if(this._originalPt=f,this._pt=f,this._scaleFactor=h,this._li=m,h<=0)throw new D("Scale factor must be non-zero");h!==1&&(this._pt=new ie(this.scale(f.x),this.scale(f.y)),this._p0Scaled=new ie,this._p1Scaled=new ie),this.initCorners(this._pt)}}])}();Iy.SAFE_ENV_EXPANSION_FACTOR=.75;var md=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var y=arguments[1];arguments[0].getLineSegment(y,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new $a}}])}(),tx=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var y=arguments[0];return this.snap(y,null,-1)}if(arguments.length===3){var f=arguments[0],h=arguments[1],m=arguments[2],$=f.getSafeEnvelope(),A=new oo(f,h,m);return this._index.query($,new(function(){return s(function I(){a(this,I)},[{key:"interfaces_",get:function(){return[W0]}},{key:"visitItem",value:function(I){I.select($,A)}}])}())),A.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var y=arguments[0];this._index=y}}])}(),oo=function(y){function f(){var h;return a(this,f),h=i(this,f),f.constructor_.apply(h,arguments),h}return c(f,y),s(f,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof $y))return b(f,"select",this,1).apply(this,arguments);var h=arguments[1],m=arguments[0].getContext();if(this._parentEdge===m&&(h===this._hotPixelVertexIndex||h+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(m,h)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var h=arguments[0],m=arguments[1],$=arguments[2];this._hotPixel=h,this._parentEdge=m,this._hotPixelVertexIndex=$}}])}(md);tx.HotPixelSnapAction=oo;var _p=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(y,f,h,m){if(y===h&&f===m)return null;var $=y.getCoordinates()[f],A=y.getCoordinates()[f+1],I=h.getCoordinates()[m],N=h.getCoordinates()[m+1];if(this._li.computeIntersection($,A,I,N),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var B=0;B<this._li.getIntersectionNum();B++)this._interiorIntersections.add(this._li.getIntersection(B));y.addIntersections(this._li,f,0),h.addIntersections(this._li,m,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[K0]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var y=arguments[0];this._li=y,this._interiorIntersections=new Ke}}])}(),nx=function(){return s(function y(){a(this,y),y.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(y){var f=Wo.getNodedSubstrings(y),h=new ro(f);try{h.checkValid()}catch(m){if(!(m instanceof O))throw m;m.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Wo.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(y,f){var h=this.findInteriorIntersections(y,f);this.computeIntersectionSnaps(h),this.computeVertexSnaps(y)}},{key:"findInteriorIntersections",value:function(y,f){var h=new _p(f);return this._noder.setSegmentIntersector(h),this._noder.computeNodes(y),h.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(tt(arguments[0],kt))for(var y=arguments[0].iterator();y.hasNext();){var f=y.next();this.computeVertexSnaps(f)}else if(arguments[0]instanceof Wo)for(var h=arguments[0],m=h.getCoordinates(),$=0;$<m.length;$++){var A=new Iy(m[$],this._scaleFactor,this._li);this._pointSnapper.snap(A,h,$)&&h.addIntersection(m[$],$)}}},{key:"computeNodes",value:function(y){this._nodedSegStrings=y,this._noder=new Sy,this._pointSnapper=new tx(this._noder.getIndex()),this.snapRound(y,this._li)}},{key:"computeIntersectionSnaps",value:function(y){for(var f=y.iterator();f.hasNext();){var h=f.next(),m=new Iy(h,this._scaleFactor,this._li);this._pointSnapper.snap(m)}}},{key:"interfaces_",get:function(){return[Ey]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var y=arguments[0];this._pm=y,this._li=new Vo,this._li.setPrecisionModel(y),this._scaleFactor=y.getScale()}}])}(),Ws=function(){function y(){a(this,y),y.constructor_.apply(this,arguments)}return s(y,[{key:"bufferFixedPrecision",value:function(f){var h=new jS(new nx(new Ci(1)),f.getScale()),m=new bp(this._bufParams);m.setWorkingPrecisionModel(f),m.setNoder(h),this._resultGeometry=m.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var f=y.MAX_PRECISION_DIGITS;f>=0;f--){try{this.bufferReducedPrecision(f)}catch(A){if(!(A instanceof Kr))throw A;this._saveException=A}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var h=arguments[0],m=y.precisionScaleFactor(this._argGeom,this._distance,h),$=new Ci(m);this.bufferFixedPrecision($)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var f=this._argGeom.getFactory().getPrecisionModel();f.getType()===Ci.FIXED?this.bufferFixedPrecision(f):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(f){this._bufParams.setQuadrantSegments(f)}},{key:"bufferOriginalPrecision",value:function(){try{var f=new bp(this._bufParams);this._resultGeometry=f.buffer(this._argGeom,this._distance)}catch(h){if(!(h instanceof ae))throw h;this._saveException=h}}},{key:"getResultGeometry",value:function(f){return this._distance=f,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(f){this._bufParams.setEndCapStyle(f)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new T,this._resultGeometry=null,this._saveException=null,arguments.length===1){var f=arguments[0];this._argGeom=f}else if(arguments.length===2){var h=arguments[0],m=arguments[1];this._argGeom=h,this._bufParams=m}}},{key:"bufferOp",value:function(){if(arguments.length===2){var f=arguments[1];return new y(arguments[0]).getResultGeometry(f)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ve&&typeof arguments[1]=="number"){var h=arguments[1],m=arguments[2],$=new y(arguments[0]);return $.setQuadrantSegments(m),$.getResultGeometry(h)}if(arguments[2]instanceof T&&arguments[0]instanceof ve&&typeof arguments[1]=="number"){var A=arguments[1];return new y(arguments[0],arguments[2]).getResultGeometry(A)}}else if(arguments.length===4){var I=arguments[1],N=arguments[2],B=arguments[3],J=new y(arguments[0]);return J.setQuadrantSegments(N),J.setEndCapStyle(B),J.getResultGeometry(I)}}},{key:"precisionScaleFactor",value:function(f,h,m){var $=f.getEnvelopeInternal(),A=sd.max(Math.abs($.getMaxX()),Math.abs($.getMaxY()),Math.abs($.getMinX()),Math.abs($.getMinY()))+2*(h>0?h:0),I=m-Math.trunc(Math.log(A)/Math.log(10)+1);return Math.pow(10,I)}}])}();Ws.CAP_ROUND=T.CAP_ROUND,Ws.CAP_BUTT=T.CAP_FLAT,Ws.CAP_FLAT=T.CAP_FLAT,Ws.CAP_SQUARE=T.CAP_SQUARE,Ws.MAX_PRECISION_DIGITS=12;var xp=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],wp=function(){return s(function y(f){a(this,y),this.geometryFactory=f||new eo},[{key:"read",value:function(y){var f,h=(f=typeof y=="string"?JSON.parse(y):y).type;if(!Ri[h])throw new Error("Unknown GeoJSON type: "+f.type);return xp.indexOf(h)!==-1?Ri[h].call(this,f.coordinates):h==="GeometryCollection"?Ri[h].call(this,f.geometries):Ri[h].call(this,f)}},{key:"write",value:function(y){var f=y.getGeometryType();if(!Ii[f])throw new Error("Geometry is not supported");return Ii[f].call(this,y)}}])}(),Ri={Feature:function(y){var f={};for(var h in y)f[h]=y[h];if(y.geometry){var m=y.geometry.type;if(!Ri[m])throw new Error("Unknown GeoJSON type: "+y.type);f.geometry=this.read(y.geometry)}return y.bbox&&(f.bbox=Ri.bbox.call(this,y.bbox)),f},FeatureCollection:function(y){var f={};if(y.features){f.features=[];for(var h=0;h<y.features.length;++h)f.features.push(this.read(y.features[h]))}return y.bbox&&(f.bbox=this.parse.bbox.call(this,y.bbox)),f},coordinates:function(y){for(var f=[],h=0;h<y.length;++h){var m=y[h];f.push(r(ie,x(m)))}return f},bbox:function(y){return this.geometryFactory.createLinearRing([new ie(y[0],y[1]),new ie(y[2],y[1]),new ie(y[2],y[3]),new ie(y[0],y[3]),new ie(y[0],y[1])])},Point:function(y){var f=r(ie,x(y));return this.geometryFactory.createPoint(f)},MultiPoint:function(y){for(var f=[],h=0;h<y.length;++h)f.push(Ri.Point.call(this,y[h]));return this.geometryFactory.createMultiPoint(f)},LineString:function(y){var f=Ri.coordinates.call(this,y);return this.geometryFactory.createLineString(f)},MultiLineString:function(y){for(var f=[],h=0;h<y.length;++h)f.push(Ri.LineString.call(this,y[h]));return this.geometryFactory.createMultiLineString(f)},Polygon:function(y){for(var f=Ri.coordinates.call(this,y[0]),h=this.geometryFactory.createLinearRing(f),m=[],$=1;$<y.length;++$){var A=y[$],I=Ri.coordinates.call(this,A),N=this.geometryFactory.createLinearRing(I);m.push(N)}return this.geometryFactory.createPolygon(h,m)},MultiPolygon:function(y){for(var f=[],h=0;h<y.length;++h){var m=y[h];f.push(Ri.Polygon.call(this,m))}return this.geometryFactory.createMultiPolygon(f)},GeometryCollection:function(y){for(var f=[],h=0;h<y.length;++h){var m=y[h];f.push(this.read(m))}return this.geometryFactory.createGeometryCollection(f)}},Ii={coordinate:function(y){var f=[y.x,y.y];return y.z&&f.push(y.z),y.m&&f.push(y.m),f},Point:function(y){return{type:"Point",coordinates:Ii.coordinate.call(this,y.getCoordinate())}},MultiPoint:function(y){for(var f=[],h=0;h<y._geometries.length;++h){var m=y._geometries[h],$=Ii.Point.call(this,m);f.push($.coordinates)}return{type:"MultiPoint",coordinates:f}},LineString:function(y){for(var f=[],h=y.getCoordinates(),m=0;m<h.length;++m){var $=h[m];f.push(Ii.coordinate.call(this,$))}return{type:"LineString",coordinates:f}},MultiLineString:function(y){for(var f=[],h=0;h<y._geometries.length;++h){var m=y._geometries[h],$=Ii.LineString.call(this,m);f.push($.coordinates)}return{type:"MultiLineString",coordinates:f}},Polygon:function(y){var f=[],h=Ii.LineString.call(this,y._shell);f.push(h.coordinates);for(var m=0;m<y._holes.length;++m){var $=y._holes[m],A=Ii.LineString.call(this,$);f.push(A.coordinates)}return{type:"Polygon",coordinates:f}},MultiPolygon:function(y){for(var f=[],h=0;h<y._geometries.length;++h){var m=y._geometries[h],$=Ii.Polygon.call(this,m);f.push($.coordinates)}return{type:"MultiPolygon",coordinates:f}},GeometryCollection:function(y){for(var f=[],h=0;h<y._geometries.length;++h){var m=y._geometries[h],$=m.getGeometryType();f.push(Ii[$].call(this,m))}return{type:"GeometryCollection",geometries:f}}};return{BufferOp:Ws,GeoJSONReader:function(){return s(function y(f){a(this,y),this.parser=new wp(f||new eo)},[{key:"read",value:function(y){return this.parser.read(y)}}])}(),GeoJSONWriter:function(){return s(function y(){a(this,y),this.parser=new wp(this.geometryFactory)},[{key:"write",value:function(y){return this.parser.write(y)}}])}()}})})(GG);var dme=GG.exports;const fme=v6(dme);function Lf(){return new uk}function uk(){this.reset()}uk.prototype={constructor:uk,reset:function(){this.s=this.t=0},add:function(e){$9(Cx,e,this.t),$9(this,Cx.s,this.s),this.s?this.t+=Cx.t:this.s=Cx.t},valueOf:function(){return this.s}};var Cx=new uk;function $9(e,t,n){var i=e.s=t+n,a=i-t,r=i-a;e.t=t-r+(n-a)}var rn=1e-6,It=Math.PI,ll=It/2,E9=It/4,kl=It*2,bd=180/It,co=It/180,_i=Math.abs,cme=Math.atan,Gg=Math.atan2,Sn=Math.cos,Tn=Math.sin,Pm=Math.sqrt;function HG(e){return e>1?0:e<-1?It:Math.acos(e)}function ch(e){return e>1?ll:e<-1?-ll:Math.asin(e)}function Ev(){}function dk(e,t){e&&T9.hasOwnProperty(e.type)&&T9[e.type](e,t)}var S9={Feature:function(e,t){dk(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,a=n.length;++i<a;)dk(n[i].geometry,t)}},T9={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){PD(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)PD(n[i],t,0)},Polygon:function(e,t){A9(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)A9(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,a=n.length;++i<a;)dk(n[i],t)}};function PD(e,t,n){var i=-1,a=e.length-n,r;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function A9(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)PD(e[n],t,1);t.polygonEnd()}function hme(e,t){e&&S9.hasOwnProperty(e.type)?S9[e.type](e,t):dk(e,t)}Lf();Lf();function FD(e){return[Gg(e[1],e[0]),ch(e[2])]}function Hg(e){var t=e[0],n=e[1],i=Sn(n);return[i*Sn(t),i*Tn(t),Tn(n)]}function Rx(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function fk(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function qT(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ix(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ND(e){var t=Pm(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Lf();function YG(e,t){function n(i,a){return i=e(i,a),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,a){return i=t.invert(i,a),i&&e.invert(i[0],i[1])}),n}function LD(e,t){return[e>It?e-kl:e<-It?e+kl:e,t]}LD.invert=LD;function pme(e,t,n){return(e%=kl)?t||n?YG(D9(e),C9(t,n)):D9(e):t||n?C9(t,n):LD}function O9(e){return function(t,n){return t+=e,[t>It?t-kl:t<-It?t+kl:t,n]}}function D9(e){var t=O9(e);return t.invert=O9(-e),t}function C9(e,t){var n=Sn(e),i=Tn(e),a=Sn(t),r=Tn(t);function o(s,l){var u=Sn(l),d=Sn(s)*u,c=Tn(s)*u,g=Tn(l),v=g*n+d*i;return[Gg(c*a-v*r,d*n-g*i),ch(v*a+c*r)]}return o.invert=function(s,l){var u=Sn(l),d=Sn(s)*u,c=Tn(s)*u,g=Tn(l),v=g*a-c*r;return[Gg(c*a+g*r,d*n+v*i),ch(v*n-d*i)]},o}function gme(e,t,n,i,a,r){if(n){var o=Sn(t),s=Tn(t),l=i*n;a==null?(a=t+i*kl,r=t-l/2):(a=R9(o,a),r=R9(o,r),(i>0?a<r:a>r)&&(a+=i*kl));for(var u,d=a;i>0?d>r:d<r;d-=l)u=FD([o,-s*Sn(d),-s*Tn(d)]),e.point(u[0],u[1])}}function R9(e,t){t=Hg(t),t[0]-=e,ND(t);var n=HG(-t[1]);return((-t[2]<0?-n:n)+kl-rn)%kl}function XG(){var e=[],t;return{point:function(n,i){t.push([n,i])},lineStart:function(){e.push(t=[])},lineEnd:Ev,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function mme(e,t,n,i,a,r){var o=e[0],s=e[1],l=t[0],u=t[1],d=0,c=1,g=l-o,v=u-s,b;if(b=n-o,!(!g&&b>0)){if(b/=g,g<0){if(b<d)return;b<c&&(c=b)}else if(g>0){if(b>c)return;b>d&&(d=b)}if(b=a-o,!(!g&&b<0)){if(b/=g,g<0){if(b>c)return;b>d&&(d=b)}else if(g>0){if(b<d)return;b<c&&(c=b)}if(b=i-s,!(!v&&b>0)){if(b/=v,v<0){if(b<d)return;b<c&&(c=b)}else if(v>0){if(b>c)return;b>d&&(d=b)}if(b=r-s,!(!v&&b<0)){if(b/=v,v<0){if(b>c)return;b>d&&(d=b)}else if(v>0){if(b<d)return;b<c&&(c=b)}return d>0&&(e[0]=o+d*g,e[1]=s+d*v),c<1&&(t[0]=o+c*g,t[1]=s+c*v),!0}}}}}function j1(e,t){return _i(e[0]-t[0])<rn&&_i(e[1]-t[1])<rn}function Px(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ZG(e,t,n,i,a){var r=[],o=[],s,l;if(e.forEach(function(b){if(!((x=b.length-1)<=0)){var x,k=b[0],w=b[x],E;if(j1(k,w)){for(a.lineStart(),s=0;s<x;++s)a.point((k=b[s])[0],k[1]);a.lineEnd();return}r.push(E=new Px(k,b,null,!0)),o.push(E.o=new Px(k,null,E,!1)),r.push(E=new Px(w,b,null,!1)),o.push(E.o=new Px(w,null,E,!0))}}),!!r.length){for(o.sort(t),I9(r),I9(o),s=0,l=o.length;s<l;++s)o[s].e=n=!n;for(var u=r[0],d,c;;){for(var g=u,v=!0;g.v;)if((g=g.n)===u)return;d=g.z,a.lineStart();do{if(g.v=g.o.v=!0,g.e){if(v)for(s=0,l=d.length;s<l;++s)a.point((c=d[s])[0],c[1]);else i(g.x,g.n.x,1,a);g=g.n}else{if(v)for(d=g.p.z,s=d.length-1;s>=0;--s)a.point((c=d[s])[0],c[1]);else i(g.x,g.p.x,-1,a);g=g.p}g=g.o,d=g.z,v=!v}while(!g.v);a.lineEnd()}}}function I9(e){if(t=e.length){for(var t,n=0,i=e[0],a;++n<t;)i.n=a=e[n],a.p=i,i=a;i.n=a=e[0],a.p=i}}function JG(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yme(e){return e.length===1&&(e=vme(e)),{left:function(t,n,i,a){for(i==null&&(i=0),a==null&&(a=t.length);i<a;){var r=i+a>>>1;e(t[r],n)<0?i=r+1:a=r}return i},right:function(t,n,i,a){for(i==null&&(i=0),a==null&&(a=t.length);i<a;){var r=i+a>>>1;e(t[r],n)>0?a=r:i=r+1}return i}}}function vme(e){return function(t,n){return JG(e(t),n)}}yme(JG);function KG(e){for(var t=e.length,n,i=-1,a=0,r,o;++i<t;)a+=e[i].length;for(r=new Array(a);--t>=0;)for(o=e[t],n=o.length;--n>=0;)r[--a]=o[n];return r}var Sv=1e9,Fx=-Sv;function bme(e,t,n,i){function a(u,d){return e<=u&&u<=n&&t<=d&&d<=i}function r(u,d,c,g){var v=0,b=0;if(u==null||(v=o(u,c))!==(b=o(d,c))||l(u,d)<0^c>0)do g.point(v===0||v===3?e:n,v>1?i:t);while((v=(v+c+4)%4)!==b);else g.point(d[0],d[1])}function o(u,d){return _i(u[0]-e)<rn?d>0?0:3:_i(u[0]-n)<rn?d>0?2:1:_i(u[1]-t)<rn?d>0?1:0:d>0?3:2}function s(u,d){return l(u.x,d.x)}function l(u,d){var c=o(u,1),g=o(d,1);return c!==g?c-g:c===0?d[1]-u[1]:c===1?u[0]-d[0]:c===2?u[1]-d[1]:d[0]-u[0]}return function(u){var d=u,c=XG(),g,v,b,x,k,w,E,T,O,D,P,R={point:M,lineStart:Q,lineEnd:te,polygonStart:H,polygonEnd:z};function M(j,K){a(j,K)&&d.point(j,K)}function q(){for(var j=0,K=0,se=v.length;K<se;++K)for(var ee=v[K],oe=1,Y=ee.length,Z=ee[0],ae,ne,U=Z[0],X=Z[1];oe<Y;++oe)ae=U,ne=X,Z=ee[oe],U=Z[0],X=Z[1],ne<=i?X>i&&(U-ae)*(i-ne)>(X-ne)*(e-ae)&&++j:X<=i&&(U-ae)*(i-ne)<(X-ne)*(e-ae)&&--j;return j}function H(){d=c,g=[],v=[],P=!0}function z(){var j=q(),K=P&&j,se=(g=KG(g)).length;(K||se)&&(u.polygonStart(),K&&(u.lineStart(),r(null,null,1,u),u.lineEnd()),se&&ZG(g,s,j,r,u),u.polygonEnd()),d=u,g=v=b=null}function Q(){R.point=W,v&&v.push(b=[]),D=!0,O=!1,E=T=NaN}function te(){g&&(W(x,k),w&&O&&c.rejoin(),g.push(c.result())),R.point=M,O&&d.lineEnd()}function W(j,K){var se=a(j,K);if(v&&b.push([j,K]),D)x=j,k=K,w=se,D=!1,se&&(d.lineStart(),d.point(j,K));else if(se&&O)d.point(j,K);else{var ee=[E=Math.max(Fx,Math.min(Sv,E)),T=Math.max(Fx,Math.min(Sv,T))],oe=[j=Math.max(Fx,Math.min(Sv,j)),K=Math.max(Fx,Math.min(Sv,K))];mme(ee,oe,e,t,n,i)?(O||(d.lineStart(),d.point(ee[0],ee[1])),d.point(oe[0],oe[1]),se||d.lineEnd(),P=!1):se&&(d.lineStart(),d.point(j,K),P=!1)}E=j,T=K,O=se}return R}}var jT=Lf();function _me(e,t){var n=t[0],i=t[1],a=[Tn(n),-Sn(n),0],r=0,o=0;jT.reset();for(var s=0,l=e.length;s<l;++s)if(d=(u=e[s]).length)for(var u,d,c=u[d-1],g=c[0],v=c[1]/2+E9,b=Tn(v),x=Sn(v),k=0;k<d;++k,g=E,b=O,x=D,c=w){var w=u[k],E=w[0],T=w[1]/2+E9,O=Tn(T),D=Sn(T),P=E-g,R=P>=0?1:-1,M=R*P,q=M>It,H=b*O;if(jT.add(Gg(H*R*Tn(M),x*D+H*Sn(M))),r+=q?P+R*kl:P,q^g>=n^E>=n){var z=fk(Hg(c),Hg(w));ND(z);var Q=fk(a,z);ND(Q);var te=(q^P>=0?-1:1)*ch(Q[2]);(i>te||i===te&&(z[0]||z[1]))&&(o+=q^P>=0?1:-1)}}return(r<-rn||r<rn&&jT<-rn)^o&1}Lf();function P9(e){return e}Lf();Lf();var Yg=1/0,ck=Yg,t_=-Yg,hk=t_,F9={point:xme,lineStart:Ev,lineEnd:Ev,polygonStart:Ev,polygonEnd:Ev,result:function(){var e=[[Yg,ck],[t_,hk]];return t_=hk=-(ck=Yg=1/0),e}};function xme(e,t){e<Yg&&(Yg=e),e>t_&&(t_=e),t<ck&&(ck=t),t>hk&&(hk=t)}Lf();function QG(e,t,n,i){return function(a,r){var o=t(r),s=a.invert(i[0],i[1]),l=XG(),u=t(l),d=!1,c,g,v,b={point:x,lineStart:w,lineEnd:E,polygonStart:function(){b.point=T,b.lineStart=O,b.lineEnd=D,g=[],c=[]},polygonEnd:function(){b.point=x,b.lineStart=w,b.lineEnd=E,g=KG(g);var P=_me(c,s);g.length?(d||(r.polygonStart(),d=!0),ZG(g,kme,P,n,r)):P&&(d||(r.polygonStart(),d=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),g=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function x(P,R){var M=a(P,R);e(P=M[0],R=M[1])&&r.point(P,R)}function k(P,R){var M=a(P,R);o.point(M[0],M[1])}function w(){b.point=k,o.lineStart()}function E(){b.point=x,o.lineEnd()}function T(P,R){v.push([P,R]);var M=a(P,R);u.point(M[0],M[1])}function O(){u.lineStart(),v=[]}function D(){T(v[0][0],v[0][1]),u.lineEnd();var P=u.clean(),R=l.result(),M,q=R.length,H,z,Q;if(v.pop(),c.push(v),v=null,!!q){if(P&1){if(z=R[0],(H=z.length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),M=0;M<H;++M)r.point((Q=z[M])[0],Q[1]);r.lineEnd()}return}q>1&&P&2&&R.push(R.pop().concat(R.shift())),g.push(R.filter(wme))}}return b}}function wme(e){return e.length>1}function kme(e,t){return((e=e.x)[0]<0?e[1]-ll-rn:ll-e[1])-((t=t.x)[0]<0?t[1]-ll-rn:ll-t[1])}const N9=QG(function(){return!0},$me,Sme,[-It,-ll]);function $me(e){var t=NaN,n=NaN,i=NaN,a;return{lineStart:function(){e.lineStart(),a=1},point:function(r,o){var s=r>0?It:-It,l=_i(r-t);_i(l-It)<rn?(e.point(t,n=(n+o)/2>0?ll:-ll),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(r,n),a=0):i!==s&&l>=It&&(_i(t-i)<rn&&(t-=i*rn),_i(r-s)<rn&&(r-=s*rn),n=Eme(t,n,r,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),a=0),e.point(t=r,n=o),i=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-a}}}function Eme(e,t,n,i){var a,r,o=Tn(e-n);return _i(o)>rn?cme((Tn(t)*(r=Sn(i))*Tn(n)-Tn(i)*(a=Sn(t))*Tn(e))/(a*r*o)):(t+i)/2}function Sme(e,t,n,i){var a;if(e==null)a=n*ll,i.point(-It,a),i.point(0,a),i.point(It,a),i.point(It,0),i.point(It,-a),i.point(0,-a),i.point(-It,-a),i.point(-It,0),i.point(-It,a);else if(_i(e[0]-t[0])>rn){var r=e[0]<t[0]?It:-It;a=n*r/2,i.point(-r,a),i.point(0,a),i.point(r,a)}else i.point(t[0],t[1])}function Tme(e,t){var n=Sn(e),i=n>0,a=_i(n)>rn;function r(d,c,g,v){gme(v,e,t,g,d,c)}function o(d,c){return Sn(d)*Sn(c)>n}function s(d){var c,g,v,b,x;return{lineStart:function(){b=v=!1,x=1},point:function(k,w){var E=[k,w],T,O=o(k,w),D=i?O?0:u(k,w):O?u(k+(k<0?It:-It),w):0;if(!c&&(b=v=O)&&d.lineStart(),O!==v&&(T=l(c,E),(!T||j1(c,T)||j1(E,T))&&(E[0]+=rn,E[1]+=rn,O=o(E[0],E[1]))),O!==v)x=0,O?(d.lineStart(),T=l(E,c),d.point(T[0],T[1])):(T=l(c,E),d.point(T[0],T[1]),d.lineEnd()),c=T;else if(a&&c&&i^O){var P;!(D&g)&&(P=l(E,c,!0))&&(x=0,i?(d.lineStart(),d.point(P[0][0],P[0][1]),d.point(P[1][0],P[1][1]),d.lineEnd()):(d.point(P[1][0],P[1][1]),d.lineEnd(),d.lineStart(),d.point(P[0][0],P[0][1])))}O&&(!c||!j1(c,E))&&d.point(E[0],E[1]),c=E,v=O,g=D},lineEnd:function(){v&&d.lineEnd(),c=null},clean:function(){return x|(b&&v)<<1}}}function l(d,c,g){var v=Hg(d),b=Hg(c),x=[1,0,0],k=fk(v,b),w=Rx(k,k),E=k[0],T=w-E*E;if(!T)return!g&&d;var O=n*w/T,D=-n*E/T,P=fk(x,k),R=Ix(x,O),M=Ix(k,D);qT(R,M);var q=P,H=Rx(R,q),z=Rx(q,q),Q=H*H-z*(Rx(R,R)-1);if(!(Q<0)){var te=Pm(Q),W=Ix(q,(-H-te)/z);if(qT(W,R),W=FD(W),!g)return W;var j=d[0],K=c[0],se=d[1],ee=c[1],oe;K<j&&(oe=j,j=K,K=oe);var Y=K-j,Z=_i(Y-It)<rn,ae=Z||Y<rn;if(!Z&&ee<se&&(oe=se,se=ee,ee=oe),ae?Z?se+ee>0^W[1]<(_i(W[0]-j)<rn?se:ee):se<=W[1]&&W[1]<=ee:Y>It^(j<=W[0]&&W[0]<=K)){var ne=Ix(q,(-H+te)/z);return qT(ne,R),[W,FD(ne)]}}}function u(d,c){var g=i?e:It-e,v=0;return d<-g?v|=1:d>g&&(v|=2),c<-g?v|=4:c>g&&(v|=8),v}return QG(o,s,r,i?[0,-e]:[-It,e-It])}function eH(e){return function(t){var n=new MD;for(var i in e)n[i]=e[i];return n.stream=t,n}}function MD(){}MD.prototype={constructor:MD,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tH(e,t,n){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],r=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),hme(n,e.stream(F9));var o=F9.result(),s=Math.min(i/(o[1][0]-o[0][0]),a/(o[1][1]-o[0][1])),l=+t[0][0]+(i-s*(o[1][0]+o[0][0]))/2,u=+t[0][1]+(a-s*(o[1][1]+o[0][1]))/2;return r!=null&&e.clipExtent(r),e.scale(s*150).translate([l,u])}function Ame(e,t,n){return tH(e,[[0,0],t],n)}var L9=16,Ome=Sn(30*co);function M9(e,t){return+t?Cme(e,t):Dme(e)}function Dme(e){return eH({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Cme(e,t){function n(i,a,r,o,s,l,u,d,c,g,v,b,x,k){var w=u-i,E=d-a,T=w*w+E*E;if(T>4*t&&x--){var O=o+g,D=s+v,P=l+b,R=Pm(O*O+D*D+P*P),M=ch(P/=R),q=_i(_i(P)-1)<rn||_i(r-c)<rn?(r+c)/2:Gg(D,O),H=e(q,M),z=H[0],Q=H[1],te=z-i,W=Q-a,j=E*te-w*W;(j*j/T>t||_i((w*te+E*W)/T-.5)>.3||o*g+s*v+l*b<Ome)&&(n(i,a,r,o,s,l,z,Q,q,O/=R,D/=R,P,x,k),k.point(z,Q),n(z,Q,q,O,D,P,u,d,c,g,v,b,x,k))}}return function(i){var a,r,o,s,l,u,d,c,g,v,b,x,k={point:w,lineStart:E,lineEnd:O,polygonStart:function(){i.polygonStart(),k.lineStart=D},polygonEnd:function(){i.polygonEnd(),k.lineStart=E}};function w(M,q){M=e(M,q),i.point(M[0],M[1])}function E(){c=NaN,k.point=T,i.lineStart()}function T(M,q){var H=Hg([M,q]),z=e(M,q);n(c,g,d,v,b,x,c=z[0],g=z[1],d=M,v=H[0],b=H[1],x=H[2],L9,i),i.point(c,g)}function O(){k.point=w,i.lineEnd()}function D(){E(),k.point=P,k.lineEnd=R}function P(M,q){T(a=M,q),r=c,o=g,s=v,l=b,u=x,k.point=T}function R(){n(c,g,d,v,b,x,r,o,a,s,l,u,L9,i),k.lineEnd=O,O()}return k}}var Rme=eH({point:function(e,t){this.stream.point(e*co,t*co)}});function Ime(e){return Pme(function(){return e})()}function Pme(e){var t,n=150,i=480,a=250,r,o,s=0,l=0,u=0,d=0,c=0,g,v,b=null,x=N9,k=null,w,E,T,O=P9,D=.5,P=M9(z,D),R,M;function q(W){return W=v(W[0]*co,W[1]*co),[W[0]*n+r,o-W[1]*n]}function H(W){return W=v.invert((W[0]-r)/n,(o-W[1])/n),W&&[W[0]*bd,W[1]*bd]}function z(W,j){return W=t(W,j),[W[0]*n+r,o-W[1]*n]}q.stream=function(W){return R&&M===W?R:R=Rme(x(g,P(O(M=W))))},q.clipAngle=function(W){return arguments.length?(x=+W?Tme(b=W*co,6*co):(b=null,N9),te()):b*bd},q.clipExtent=function(W){return arguments.length?(O=W==null?(k=w=E=T=null,P9):bme(k=+W[0][0],w=+W[0][1],E=+W[1][0],T=+W[1][1]),te()):k==null?null:[[k,w],[E,T]]},q.scale=function(W){return arguments.length?(n=+W,Q()):n},q.translate=function(W){return arguments.length?(i=+W[0],a=+W[1],Q()):[i,a]},q.center=function(W){return arguments.length?(s=W[0]%360*co,l=W[1]%360*co,Q()):[s*bd,l*bd]},q.rotate=function(W){return arguments.length?(u=W[0]%360*co,d=W[1]%360*co,c=W.length>2?W[2]%360*co:0,Q()):[u*bd,d*bd,c*bd]},q.precision=function(W){return arguments.length?(P=M9(z,D=W*W),te()):Pm(D)},q.fitExtent=function(W,j){return tH(q,W,j)},q.fitSize=function(W,j){return Ame(q,W,j)};function Q(){v=YG(g=pme(u,d,c),t);var W=t(s,l);return r=i-W[0]*n,o=a+W[1]*n,te()}function te(){return R=M=null,q}return function(){return t=e.apply(this,arguments),q.invert=t.invert&&H,Q()}}function nH(e){return function(t,n){var i=Sn(t),a=Sn(n),r=e(i*a);return[r*a*Tn(t),r*Tn(n)]}}function iH(e){return function(t,n){var i=Pm(t*t+n*n),a=e(i),r=Tn(a),o=Sn(a);return[Gg(t*r,i*o),ch(i&&n*r/i)]}}var Fme=nH(function(e){return Pm(2/(1+e))});Fme.invert=iH(function(e){return 2*ch(e/2)});var aH=nH(function(e){return(e=HG(e))&&e/Tn(e)});aH.invert=iH(function(e){return e});function Nme(){return Ime(aH).scale(79.4188).clipAngle(180-.001)}function z9(e,t){return[e,t]}z9.invert=z9;var{BufferOp:Lme,GeoJSONReader:Mme,GeoJSONWriter:zme}=fme;function rH(e,t,n){n=n||{};var i=n.units||"kilometers",a=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof a!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(a<=0)throw new Error("steps must be greater than 0");var r=[];switch(e.type){case"GeometryCollection":return zP(e,function(o){var s=U1(o,t,i,a);s&&r.push(s)}),RD(r);case"FeatureCollection":return g9(e,function(o){var s=U1(o,t,i,a);s&&g9(s,function(l){l&&r.push(l)})}),RD(r)}return U1(e,t,i,a)}function U1(e,t,n,i){var a=e.properties||{},r=e.type==="Feature"?e.geometry:e;if(r.type==="GeometryCollection"){var o=[];return zP(e,function(x){var k=U1(x,t,n,i);k&&o.push(k)}),RD(o)}var s=qme(r),l={type:r.type,coordinates:sH(r.coordinates,s)},u=new Mme,d=u.read(l),c=LP(qG(t,n),"meters"),g=Lme.bufferOp(d,c,i),v=new zme;if(g=v.write(g),!oH(g.coordinates)){var b={type:g.type,coordinates:lH(g.coordinates,s)};return fh(b,a)}}function oH(e){return Array.isArray(e[0])?oH(e[0]):isNaN(e[0])}function sH(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return sH(n,t)})}function lH(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return lH(n,t)})}function qme(e){var t=ume(e).geometry.coordinates,n=[-t[0],-t[1]];return Nme().rotate(n).scale(Da)}function jme(e){return e}function Ume(e){if(e==null)return jme;var t,n,i=e.scale[0],a=e.scale[1],r=e.translate[0],o=e.translate[1];return function(s,l){l||(t=n=0);var u=2,d=s.length,c=new Array(d);for(c[0]=(t+=s[0])*i+r,c[1]=(n+=s[1])*a+o;u<d;)c[u]=s[u],++u;return c}}function Bme(e,t){for(var n,i=e.length,a=i-t;a<--i;)n=e[a],e[a++]=e[i],e[i]=n}function Vme(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return q9(e,n)})}:q9(e,t)}function q9(e,t){var n=t.id,i=t.bbox,a=t.properties==null?{}:t.properties,r=uH(e,t);return n==null&&i==null?{type:"Feature",properties:a,geometry:r}:i==null?{type:"Feature",id:n,properties:a,geometry:r}:{type:"Feature",id:n,bbox:i,properties:a,geometry:r}}function uH(e,t){var n=Ume(e.transform),i=e.arcs;function a(d,c){c.length&&c.pop();for(var g=i[d<0?~d:d],v=0,b=g.length;v<b;++v)c.push(n(g[v],v));d<0&&Bme(c,b)}function r(d){return n(d)}function o(d){for(var c=[],g=0,v=d.length;g<v;++g)a(d[g],c);return c.length<2&&c.push(c[0]),c}function s(d){for(var c=o(d);c.length<4;)c.push(c[0]);return c}function l(d){return d.map(s)}function u(d){var c=d.type,g;switch(c){case"GeometryCollection":return{type:c,geometries:d.geometries.map(u)};case"Point":g=r(d.coordinates);break;case"MultiPoint":g=d.coordinates.map(r);break;case"LineString":g=o(d.arcs);break;case"MultiLineString":g=d.arcs.map(o);break;case"Polygon":g=l(d.arcs);break;case"MultiPolygon":g=d.arcs.map(l);break;default:return null}return{type:c,coordinates:g}}return u(t)}function Wme(e,t){var n={},i={},a={},r=[],o=-1;t.forEach(function(u,d){var c=e.arcs[u<0?~u:u],g;c.length<3&&!c[1][0]&&!c[1][1]&&(g=t[++o],t[o]=u,t[d]=g)}),t.forEach(function(u){var d=s(u),c=d[0],g=d[1],v,b;if(v=a[c])if(delete a[v.end],v.push(u),v.end=g,b=i[g]){delete i[b.start];var x=b===v?v:v.concat(b);i[x.start=v.start]=a[x.end=b.end]=x}else i[v.start]=a[v.end]=v;else if(v=i[g])if(delete i[v.start],v.unshift(u),v.start=c,b=a[c]){delete a[b.end];var k=b===v?v:b.concat(v);i[k.start=b.start]=a[k.end=v.end]=k}else i[v.start]=a[v.end]=v;else v=[u],i[v.start=c]=a[v.end=g]=v});function s(u){var d=e.arcs[u<0?~u:u],c=d[0],g;return e.transform?(g=[0,0],d.forEach(function(v){g[0]+=v[0],g[1]+=v[1]})):g=d[d.length-1],u<0?[g,c]:[c,g]}function l(u,d){for(var c in u){var g=u[c];delete d[g.start],delete g.start,delete g.end,g.forEach(function(v){n[v<0?~v:v]=1}),r.push(g)}}return l(a,i),l(i,a),t.forEach(function(u){n[u<0?~u:u]||r.push([u])}),r}function Gme(e){return uH(e,Hme.apply(this,arguments))}function Hme(e,t,n){var i,a,r;if(arguments.length>1)i=Yme(e,t,n);else for(a=0,i=new Array(r=e.arcs.length);a<r;++a)i[a]=a;return{type:"MultiLineString",arcs:Wme(e,i)}}function Yme(e,t,n){var i=[],a=[],r;function o(c){var g=c<0?~c:c;(a[g]||(a[g]=[])).push({i:c,g:r})}function s(c){c.forEach(o)}function l(c){c.forEach(s)}function u(c){c.forEach(l)}function d(c){switch(r=c,c.type){case"GeometryCollection":c.geometries.forEach(d);break;case"LineString":s(c.arcs);break;case"MultiLineString":case"Polygon":l(c.arcs);break;case"MultiPolygon":u(c.arcs);break}}return d(t),a.forEach(n==null?function(c){i.push(c[0].i)}:function(c){n(c[0].g,c[c.length-1].g)&&i.push(c[0].i)}),i}function UT(e,t,n={}){const i=ls(e),a=ls(t);a[0]+=a[0]-i[0]>180?-360:i[0]-a[0]>180?360:0;const r=Xme(i,a);return jG(r,"meters",n.units)}function Xme(e,t,n){n=n===void 0?Da:Number(n);const i=n,a=e[1]*Math.PI/180,r=t[1]*Math.PI/180,o=r-a;let s=Math.abs(t[0]-e[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);const l=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),u=Math.abs(l)>1e-11?o/l:Math.cos(a);return Math.sqrt(o*o+u*u*s*s)*i}function Zme(e,t={}){return Bge(e,(n,i)=>{const a=i.geometry.coordinates;return n+cu(a[0],a[1],t)},0)}function Jme(e,t,n={}){var i,a;const r=(i=n.method)!=null?i:"geodesic",o=(a=n.units)!=null?a:"kilometers";if(!e)throw new Error("pt is required");if(Array.isArray(e)?e=hr(e):e.type==="Point"?e=fh(e):p9(e,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=Im(t):t.type==="LineString"?t=fh(t):p9(t,"LineString","line");let s=1/0;const l=e.geometry.coordinates;return VG(t,u=>{if(u){const d=u.geometry.coordinates[0],c=u.geometry.coordinates[1],g=Kme(l,d,c,{method:r});g<s&&(s=g)}}),jG(s,"degrees",o)}function Kme(e,t,n,i){if(i.method==="geodesic")return rme(Im([t,n]).geometry,e,{units:"degrees"}).properties.dist;const a=[n[0]-t[0],n[1]-t[1]],r=[e[0]-t[0],e[1]-t[1]],o=j9(r,a);if(o<=0)return UT(e,t,{units:"degrees"});const s=j9(a,a);if(s<=o)return UT(e,n,{units:"degrees"});const l=o/s,u=[t[0]+l*a[0],t[1]+l*a[1]];return UT(e,u,{units:"degrees"})}function j9(e,t){return e[0]*t[0]+e[1]*t[1]}function dH(e,t){return{lat:(e.lat+t.lat)/2,lon:(e.lon+t.lon)/2}}const Qme=(e,t)=>cu(e,t,{units:"kilometers"}),eye=(e,t)=>t.map((n,i)=>{const a=hr([n.lon,n.lat]),r=Qme(e,a);return{index:i,distance:r}}),tye=(e,t,n=50)=>[...e].sort((a,r)=>a.distance-r.distance).slice(0,n).map(a=>t[a.index]);function nye(e,t){const n=rH(e,t,{units:"meters"});return!n||!n.geometry||n.geometry.type!=="Polygon"&&n.geometry.type!=="MultiPolygon"?null:n}function iye(e,t){return t.filter(n=>{const i=hr([n.lon,n.lat]);return WG(i,e)})}function _d(e,t,n,i){const r=Math.PI/180,o=180/Math.PI,s=e*r,l=t*r,u=n*r,d=i/6378137,c=Math.asin(Math.sin(s)*Math.cos(d)+Math.cos(s)*Math.sin(d)*Math.cos(u)),g=l+Math.atan2(Math.sin(u)*Math.sin(d)*Math.cos(s),Math.cos(d)-Math.sin(s)*Math.sin(c));return[c*o,g*o]}async function fH(e,t,n){const a=`/Street-Weave/data/${e}`,r=[],o={},s={};let l;try{l=await Pfe(a,Ofe)}catch(d){return console.error(`Error loading thematic data from data/${e}:`,d),{data:[],attributeStats:{}}}for(const d of l){const c={...d};let g=null,v=null;if(d[t]!==void 0&&d[t]!==null){const b=parseFloat(d[t]);isNaN(b)||(g=b)}if(d[n]!==void 0&&d[n]!==null){const b=parseFloat(d[n]);isNaN(b)||(v=b)}for(const b in c){if(b==="lat"||b==="lon"||b===t||b===n)continue;let k=c[b];typeof k=="number"&&!isNaN(k)&&((o[b]===void 0||k<o[b])&&(o[b]=k),(s[b]===void 0||k>s[b])&&(s[b]=k))}g!==null&&v!==null?(c.lat=g,c.lon=v,r.push(c)):console.warn(`Skipping row due to invalid/missing lat/lon: Original data for latCol '${t}': '${d[t]}', lonCol '${n}': '${d[n]}'`,d)}const u={};console.log(s);for(const d in o)o.hasOwnProperty(d)&&s.hasOwnProperty(d)&&(u[d]={min:o[d],max:s[d]});return{data:r,attributeStats:u}}async function pk(e){const n=`/Street-Weave/data/${e}`;let i;try{i=await Nfe(n)}catch(o){return console.error(`Error loading physical data from data/${n}:`,o),[]}let a=[];if(i)if(i.type==="FeatureCollection"&&i.features)a=i.features;else if(i.type==="Feature")a=[i];else return console.error(`GeoJSON from data/${n} is not a valid FeatureCollection or Feature with geometry. Skipping.`),[];else return console.error(`Error loading physical data from data/${n}.`),[];const r=[];for(const o of a)if(o.geometry&&o.geometry.type==="LineString"&&o.geometry.coordinates){const s=o.geometry.coordinates;if(s.length>=2)for(let l=0;l<s.length-1;l++){const u=s[l],d=s[l+1],c={lat:u[1],lon:u[0]},g={lat:d[1],lon:d[0]},v=hr(u),b=hr(d),x=UG(v,b),k=Im([u,d]),w=Zme(k,{units:"meters"}),E={point0:c,point1:g,bearing:x,length:w,attributes:void 0};r.push(E)}}return r}const aye=(e,t)=>{e.getPane(t)||(e.createPane(t),e.getPane(t).style.zIndex="400")};function rye(e,t){return e.on("moveend zoomend",t),()=>e.off("moveend zoomend",t)}const oye=(e,t,n,i,a)=>{const r=ub.map(e).setView([t,n],i);return ub.tileLayer("https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png",{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> &copy; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>'}).addTo(r),r},BT=(e,t)=>{const n=e.getZoom();return n<=12?t*.5:n>12&&n<=14?t:n>14&&n<=16?t*1.2:n>16&&n<=17?t*1.5:n>17&&n<=18?t*2:t*3},sye=e=>{const t=e.getZoom();return t>=18?6:t<=16?15:(18-t)/2*15},qP=(e,t,n)=>{const i=n.length>0?Object.keys(n[0]).filter(r=>r!=="lat"&&r!=="lon"):[],a={};return i.forEach(r=>{const o=e.map(l=>l[r]).filter(l=>typeof l=="number");let s;switch(t){case"sum":s=QI(o);break;case"mean":s=o.length?qV(o):0;break;case"min":s=o.length?Ww(o):0;break;case"max":s=o.length?rf(o):0;break;default:s=0}s||(s=0),a[r]=s}),a},lye=(e,t,n)=>e.map(a=>{const r=[a.point0.lat,a.point0.lon],o=[a.point1.lat,a.point1.lon],s=Im([r,o]),l=rH(s,5e3,{units:"meters"});if(!l)return{point0:a.point0,point1:a.point1,bearing:0,length:0,attributes:{}};const u=t.filter(c=>{const g=hr([c.lon,c.lat]);return WG(g,l)}),d=qP(u,n,t);return a.attributes=d,a}),uye=(e,t,n)=>e.map(i=>{const a={lat:i.point0.lat,lon:i.point0.lon},r={lat:i.point1.lat,lon:i.point1.lon},o=dH(a,r),s=hr([o.lon,o.lat]),l=eye(s,t),u=tye(l,t,100),d=qP(u,n,t);return i.attributes=d,i}),dye=(e,t,n,i)=>e.map(a=>{const r={lat:a.point0.lat,lon:a.point0.lon},o={lat:a.point1.lat,lon:a.point1.lon},s=dH(r,o),l=hr([s.lon,s.lat]),u=nye(l,n);if(!u)return{point0:a.point0,point1:a.point1,bearing:0,length:0,attributes:void 0};const d=iye(u,t),g={...qP(d,i,t)};return a.attributes=g,a});async function zD(e,t,n){var a,r,o;let i={};if(n.unit.type==="segment"||n.unit.type==="node"){let s;if(((a=n.relation)==null?void 0:a.spatial)==="contains")s=lye(e,t,n.relation.type);else if(((r=n.relation)==null?void 0:r.spatial)==="nn")s=uye(e,t,n.relation.type);else if(((o=n.relation)==null?void 0:o.spatial)==="buffer")s=dye(e,t,n.relation.value,n.relation.type);else return{edges:e,attributeStats:i};return s.forEach(l=>{for(const u in l.attributes){i[u]==null&&(i[u]={min:1/0,max:-1/0});const d=l.attributes[u];let c=d||0;(i[u].min===void 0||c<i[u].min)&&(i[u].min=c),(i[u].max===void 0||c>i[u].max)&&(i[u].max=c)}}),{edges:s,attributeStats:i}}return{edges:e,attributeStats:i}}const fye=e=>{const t={};return e.forEach(n=>{const i=n.point0,a=n.point1,r=n.attributes;[i,a].forEach(o=>{const s=`${o.lat},${o.lon}`;t[s]||(t[s]={lat:o.lat,lon:o.lon,sums:{},count:0});for(const[l,u]of Object.entries(r||{}))typeof u=="number"&&(t[s].sums[l]||(t[s].sums[l]=0),t[s].sums[l]+=u);t[s].count+=1})}),Object.values(t).map(n=>{const i={};for(const[a,r]of Object.entries(n.sums))i[a]=r/n.count;return{lat:n.lat,lon:n.lon,attributes:i}})},Pn=(e,t,n,i)=>{const a=/^#([0-9A-F]{3}|[0-9A-F]{6})$/i;if(typeof e=="number"||typeof e=="string"&&a.test(e))return e;if(typeof e=="string"&&t&&e in t&&n){let r;return i?r=nk().domain([n[e].min,n[e].max]).range(i):r=nk().domain([n[e].min,n[e].max]),t[e]!=null?r(t[e]):void 0}},cye=(e,t,n)=>{if(e&&n){const i=t;if(i&&i.hasOwnProperty(e)){const a=i[e];if(a===null||typeof a>"u")return"";const r=n[e].min,o=n[e].max;return a<r+(o-r)/3?"5, 3":a>=r+(o-r)/3&&a<r+2*(o-r)/3?"7, 5":"12, 8"}}return""};function hye(e,t){const n=uge,i=fge,a=Mu(n(e)),r=Mu(i(t));if(!a||!r)return"gray";const o=(a.r+r.r)/2,s=(a.g+r.g)/2,l=(a.b+r.b)/2;return`rgb(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)})`}const pye=(e,t,n)=>{if(e&&n){const i=t;if(i&&i.hasOwnProperty(e)){const a=i[e];if(a!=null){const r=n[e].min,l=(n[e].max-r)/4,u=r+l,d=r+2*l,c=r+3*l;let g;a>=r&&a<u?g=5:a>=u&&a<d?g=20:a>=d&&a<c?g=40:g=60;const v=25;return console.log("freq is",g),{amplitude:v,frequency:g}}}}return{amplitude:0,frequency:1}};function gye(e,t,n,i){const a=t.x-e.x,r=t.y-e.y,o=Math.sqrt(a*a+r*r),s=Math.atan2(r,a),l=Math.ceil(o/i);let u=`M ${e.x},${e.y} `;for(let d=0;d<l;d++){const c=(d+.5)/l,g=e.x+c*a,v=e.y+c*r,b=n*Math.sin((d+.5)*Math.PI),x=g+b*Math.cos(s+Math.PI/2),k=v+b*Math.sin(s+Math.PI/2),w=e.x+(d+1)/l*a,E=e.y+(d+1)/l*r;u+=`Q ${x},${k} ${w},${E} `}return u}async function mye(e){const t=await pk(e.data.physical.path),n=await fH(e.data.thematic.path,e.data.thematic.latColumn,e.data.thematic.lonColumn);let a=await zD(t,n.data,e);return e.unit.density!=null&&(a=await zD(vye(a,a.attributeStats,e.unit.density,e.unit.method,e.unit.orientation,e.unit.chart).edges,n.data,e)),{processedEdges:a,thematicData:n}}async function yye(e){const t=await pk(e.data.physical.path),n=await fH(e.data.thematic.path,e.data.thematic.latColumn,e.data.thematic.lonColumn),i=await zD(t,n.data,e);return{nodesList:fye(i.edges),thematicData:n}}function vye(e,t,n,i,a,r){const o=[];return e.edges.forEach(s=>{let l=Pn(n,s.attributes,t,[0,100]);if(l>0){let u=200/l,d=s.length/u;const c=s.point0,g=s.point1,v=s.bearing,b=s.attributes,x=c.lat,k=c.lon,w=g.lat,E=g.lon,T=w-x,O=E-k,D=.2,P=.8-.2;let R=0,M=d,q,H;for(let z=R;z<M;z++){if(i==="line"&&a==="perpendicular"||i==="rect"){const Q=D+z/d*P,te=D+(z+1)/d*P;q={lat:x+T*Q,lon:k+O*Q},H={lat:x+T*te,lon:k+O*te}}else q={lat:x+T*(z/d),lon:k+O*(z/d)},H={lat:x+T*((z+1)/d),lon:k+O*((z+1)/d)};o.push({point0:q,point1:H,bearing:v,length:u,attributes:b})}}else(i==="line"&&a==="parallel"||r)&&o.push(s)}),{edges:o,attributeStats:e.attributeStats}}function bye(e,t,n,i,a,r,o){const s=t.alignment==="left"?-90:t.alignment==="right"?90:0;return e.map((u,d)=>{let c=u.point0,g=u.point1,v=u.bearing;if(v=(v%360+360)%360,v>=180){const z={lat:c.lat,lon:c.lon};c.lat=g.lat,c.lon=g.lon,g.lat=z.lat,g.lon=z.lon,v-=180}if(u.bearing=v,t.alignment==="left"||t.alignment==="right"){const z=_d(u.point0.lat,u.point0.lon,u.bearing+s,a),Q=_d(u.point1.lat,u.point1.lon,u.bearing+s,a);c={lat:z[0],lon:z[1]},g={lat:Q[0],lon:Q[1]}}let[b,x]=[o.latLngToLayerPoint([c.lat,c.lon]),o.latLngToLayerPoint([g.lat,g.lon])],k=null,w=null,E=null,T=null,O=null,D=null,P=null,R=null,M=null,q={};const H=Pn(t.width,u.attributes,n.attributeStats,[0,10]);if(t.method==="line"&&t.orientation==="parallel")if(t.squiggle){const{amplitude:z,frequency:Q}=pye(t.squiggle,u.attributes,n.attributeStats);k=gye(b,x,z,Q),E=Pn(t.color,u.attributes,i.attributeStats,["#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"]),T=BT(o,H),O=Pn(t.opacity,u.attributes,n.attributeStats,[0,1])}else k=`M${b.x},${b.y}L${x.x},${x.y}`,E=Pn(t.color,u.attributes,i.attributeStats,["#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"]),T=BT(o,H),O=Pn(t.opacity,u.attributes,n.attributeStats,[0,1]),D=cye(t.dash,u.attributes,n.attributeStats);else if(t.method==="line"&&t.orientation==="perpendicular"){let z;r==="sum"?z=Pn(t.height,u.attributes,i.attributeStats,[0,1]):z=Pn(t.height,u.attributes,i.attributeStats,[0,10]);const[Q,te]=_d(u.point0.lat,u.point0.lon,u.bearing+s,8),[W,j]=_d(u.point1.lat,u.point1.lon,u.bearing+s,8);[b,x]=[o.latLngToLayerPoint([Q,te]),o.latLngToLayerPoint([W,j])];const K=(b.x+x.x)/2,se=(b.y+x.y)/2,ee=[K,se],oe=x.x-b.x,Y=x.y-b.y,Z=Math.sqrt(oe*oe+Y*Y);let ae=Y/Z,ne=-oe/Z;t.alignment==="right"&&(ae=-ae,ne=-ne);const U=ee[0]+ae*z,X=ee[1]+ne*z;k=`M${ee[0]},${ee[1]} L${U},${X}`,E=Pn(t.color,u.attributes,i.attributeStats,["#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"]),T=BT(o,H),O=Pn(t.opacity,u.attributes,n.attributeStats,[0,1])}else if(t.method==="matrix"){console.log("edge attributes",u),console.log("thematic",i),[b,x]=[o.latLngToLayerPoint([u.point0.lat,u.point0.lon]),o.latLngToLayerPoint([u.point1.lat,u.point1.lon])];const z=t.columns||1,Q=t.rows||1,te=t.width,W=t.height,j={x:b.x,y:b.y},K={x:x.x,y:x.y},se=K.x-j.x,ee=K.y-j.y,oe=Math.sqrt(se*se+ee*ee),Z=Math.atan2(ee,se)*(180/Math.PI),ae=25,ne=oe/Q,U=ae/z;for(let X=0;X<z;X++)for(let ue=0;ue<Q;ue++){const Ce=Pn(te,u.attributes,i.attributeStats,[0,5]),ie=Pn(W,u.attributes,i.attributeStats,[0,5]),_e=hye(Ce,ie),xe=ue*ne,ve=-ae/2+X*U,G=`M${xe},${ve}h${ne}v${U}h${-ne}Z`;q[_e]=(q[_e]||"")+G}M={id:`edge-${d}`,dByColor:q,transform:`translate(${j.x}, ${j.y}) rotate(${Z})`}}else if(t.method==="rect"&&t.orientation==="perpendicular"){let z;r==="sum"?z=Pn(t.height,u.attributes,i.attributeStats,[0,1]):z=Pn(t.height,u.attributes,i.attributeStats,[0,10]);const[Q,te]=_d(u.point0.lat,u.point0.lon,u.bearing+s,10),[W,j]=_d(u.point1.lat,u.point1.lon,u.bearing+s,10);[b,x]=[o.latLngToLayerPoint([Q,te]),o.latLngToLayerPoint([W,j])];const K=x.x-b.x,se=x.y-b.y,ee=Math.sqrt(K*K+se*se);let oe=se/ee,Y=-K/ee;t.alignment==="right"&&(oe=-oe,Y=-Y);const Z=oe*z,ae=Y*z,ne={x:b.x,y:b.y},U={x:x.x,y:x.y},X={x:b.x+Z,y:b.y+ae},ue={x:x.x+Z,y:x.y+ae};k=[`M${ne.x},${ne.y}`,`L${U.x},${U.y}`,`L${ue.x},${ue.y}`,`L${X.x},${X.y}`,"Z"].join(" "),w=Pn(t.color,u.attributes,i.attributeStats,["#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"]),R=Pn(t.opacity,u.attributes,n.attributeStats,[.5,1])}else if(t.method==="rect"&&t.orientation==="parallel"){const[z,Q]=_d(u.point0.lat,u.point0.lon,u.bearing+s,10),[te,W]=_d(u.point1.lat,u.point1.lon,u.bearing+s,10);[b,x]=[o.latLngToLayerPoint([z,Q]),o.latLngToLayerPoint([te,W])],k=`M${b.x},${b.y} L${x.x},${x.y}`,E=Pn(t.color,u.attributes,i.attributeStats,["#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"]),T=Pn(t.height,u.attributes,i.attributeStats,[0,20]),R=Pn(t.opacity,u.attributes,n.attributeStats,[0,1]),P="butt"}return t.method!=="matrix"&&(M={id:`edge-${d}`,d:k,stroke:E,fill:w,"stroke-width":T,"stroke-opacity":O,"stroke-dasharray":D,"stroke-linecap":P,opacity:R}),M})}function _ye(e,t,n){if(e==="matrix"){const i=t.selectAll("g.matrix-edge").data(n,r=>r.id),a=i.enter().append("g").attr("class","matrix-edge").attr("transform",r=>r.transform);i.exit().remove(),a.merge(i).attr("transform",r=>r.transform).each(function(r){if(r){const o=yg(this),s=Object.entries(r.dByColor),l=o.selectAll("path").data(s);l.enter().append("path").merge(l).attr("d",([,u])=>u).attr("fill",([u])=>u).attr("stroke-width",0),l.exit().remove()}})}else{const i=t.selectAll("path").data(n,r=>r.id);i.enter().append("path").attr("fill","none").merge(i).attr("d",r=>r.d).style("fill",r=>r.fill).style("fill-opacity",r=>r["fill-opacity"]).style("opacity",r=>r.opacity).style("stroke",r=>r.stroke).style("stroke-width",r=>r["stroke-width"]).style("stroke-opacity",r=>r["stroke-opacity"]).style("stroke-dasharray",r=>r["stroke-dasharray"])}}function xye(e,t,n,i,a){const r=e.map(l=>({...l,projected:a.latLngToLayerPoint([l.lat,l.lon])})),o=t.selectAll("circle.nodeShape").data(r,(l,u)=>l.id??u);o.exit().remove();const s=o.enter().append("circle").attr("class","nodeShape");s.merge(o).attr("cx",l=>l.projected.x).attr("cy",l=>l.projected.y).attr("r",l=>Pn(n.width,l.attributes,i,[5,30])/2).attr("fill",l=>Pn(n.color,l.attributes,i,xG[9])).attr("fill-opacity",l=>Pn(n.opacity,l.attributes,i,[0,1])).attr("stroke","#333").attr("stroke-width",.5),s.append("title").text(l=>`Node Data: ${JSON.stringify(l,null,2)}`)}const wye=/("(?:[^\\"]|\\.)*")|[:,]/g;function VT(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:a}=t;return function r(o,s,l){o&&typeof o.toJSON=="function"&&(o=o.toJSON());const u=JSON.stringify(o,a);if(u===void 0)return u;const d=i-s.length-l;if(u.length<=d){const c=u.replace(wye,(g,v)=>v||`${g} `);if(c.length<=d)return c}if(a!=null&&(o=JSON.parse(u),a=void 0),typeof o=="object"&&o!==null){const c=s+n,g=[];let v=0,b,x;if(Array.isArray(o)){b="[",x="]";const{length:k}=o;for(;v<k;v++)g.push(r(o[v],c,v===k-1?0:1)||"null")}else{b="{",x="}";const k=Object.keys(o),{length:w}=k;for(;v<w;v++){const E=k[v],T=`${JSON.stringify(E)}: `,O=r(o[E],c,T.length+(v===w-1?0:1));O!==void 0&&g.push(T+O)}}if(g.length>0)return[b,n+g.join(`,
${c}`),x].join(`
${s}`)}return u}(e,"",0)}function Er(e,t,n){return e.fields=t||[],e.fname=n,e}function qn(e){return e==null?null:e.fname}function ca(e){return e==null?null:e.fields}function cH(e){return e.length===1?kye(e[0]):$ye(e)}const kye=e=>function(t){return t[e]},$ye=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function me(e){throw Error(e)}function Il(e){const t=[],n=e.length;let i=null,a=0,r="",o,s,l;e=e+"";function u(){t.push(r+e.substring(o,s)),r="",o=s+1}for(o=s=0;s<n;++s)if(l=e[s],l==="\\")r+=e.substring(o,s++),o=s;else if(l===i)u(),i=null,a=-1;else{if(i)continue;o===a&&l==='"'||o===a&&l==="'"?(o=s+1,i=l):l==="."&&!a?s>o?u():o=s+1:l==="["?(s>o&&u(),a=o=s+1):l==="]"&&(a||me("Access path missing open bracket: "+e),a>0&&u(),a=0,o=s+1)}return a&&me("Access path missing closing bracket: "+e),i&&me("Access path missing closing quote: "+e),s>o&&(s++,u()),t}function Co(e,t,n){const i=Il(e);return e=i.length===1?i[0]:e,Er((n&&n.get||cH)(i),[e],t||e)}const W_=Co("id"),ba=Er(e=>e,[],"identity"),Ld=Er(()=>0,[],"zero"),Fm=Er(()=>1,[],"one"),Ro=Er(()=>!0,[],"true"),$d=Er(()=>!1,[],"false");function Eye(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const hH=0,jP=1,UP=2,pH=3,gH=4;function BP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Eye,i=e||hH;return{level(a){return arguments.length?(i=+a,this):i},error(){return i>=jP&&n(t||"error","ERROR",arguments),this},warn(){return i>=UP&&n(t||"warn","WARN",arguments),this},info(){return i>=pH&&n(t||"log","INFO",arguments),this},debug(){return i>=gH&&n(t||"log","DEBUG",arguments),this}}}var ye=Array.isArray;function Fe(e){return e===Object(e)}const U9=e=>e!=="__proto__";function Nm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,a)=>{for(const r in a)if(r==="signals")i.signals=Sye(i.signals,a.signals);else{const o=r==="legend"?{layout:1}:r==="style"?!0:null;Lm(i,r,a[r],o)}return i},{})}function Lm(e,t,n,i){if(!U9(t))return;let a,r;if(Fe(n)&&!ye(n)){r=Fe(e[t])?e[t]:e[t]={};for(a in n)i&&(i===!0||i[a])?Lm(r,a,n[a]):U9(a)&&(r[a]=n[a])}else e[t]=n}function Sye(e,t){if(e==null)return t;const n={},i=[];function a(r){n[r.name]||(n[r.name]=1,i.push(r))}return t.forEach(a),e.forEach(a),i}function At(e){return e[e.length-1]}function ua(e){return e==null||e===""?null:+e}const mH=e=>t=>e*Math.exp(t),yH=e=>t=>Math.log(e*t),vH=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),bH=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,gk=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function k2(e,t,n,i){const a=n(e[0]),r=n(At(e)),o=(r-a)*t;return[i(a-o),i(r-o)]}function _H(e,t){return k2(e,t,ua,ba)}function xH(e,t){var n=Math.sign(e[0]);return k2(e,t,yH(n),mH(n))}function wH(e,t,n){return k2(e,t,gk(n),gk(1/n))}function kH(e,t,n){return k2(e,t,vH(n),bH(n))}function $2(e,t,n,i,a){const r=i(e[0]),o=i(At(e)),s=t!=null?i(t):(r+o)/2;return[a(s+(r-s)*n),a(s+(o-s)*n)]}function VP(e,t,n){return $2(e,t,n,ua,ba)}function WP(e,t,n){const i=Math.sign(e[0]);return $2(e,t,n,yH(i),mH(i))}function mk(e,t,n,i){return $2(e,t,n,gk(i),gk(1/i))}function GP(e,t,n,i){return $2(e,t,n,vH(i),bH(i))}function $H(e){return 1+~~(new Date(e).getMonth()/3)}function EH(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Le(e){return e!=null?ye(e)?e:[e]:[]}function SH(e,t,n){let i=e[0],a=e[1],r;return a<i&&(r=a,a=i,i=r),r=a-i,r>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]}function ft(e){return typeof e=="function"}const Tye="descending";function HP(e,t,n){n=n||{},t=Le(t)||[];const i=[],a=[],r={},o=n.comparator||Aye;return Le(e).forEach((s,l)=>{s!=null&&(i.push(t[l]===Tye?-1:1),a.push(s=ft(s)?s:Co(s,null,n)),(ca(s)||[]).forEach(u=>r[u]=1))}),a.length===0?null:Er(o(a,i),Object.keys(r))}const Mm=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Aye=(e,t)=>e.length===1?Oye(e[0],t[0]):Dye(e,t,e.length),Oye=(e,t)=>function(n,i){return Mm(e(n),e(i))*t},Dye=(e,t,n)=>(t.push(0),function(i,a){let r,o=0,s=-1;for(;o===0&&++s<n;)r=e[s],o=Mm(r(i),r(a));return o*t[s]});function _a(e){return ft(e)?e:()=>e}function YP(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function dt(e){for(let t,n,i=1,a=arguments.length;i<a;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function $l(e,t){let n=0,i,a,r,o;if(e&&(i=e.length))if(t==null){for(a=e[n];n<i&&(a==null||a!==a);a=e[++n]);for(r=o=a;n<i;++n)a=e[n],a!=null&&(a<r&&(r=a),a>o&&(o=a))}else{for(a=t(e[n]);n<i&&(a==null||a!==a);a=t(e[++n]));for(r=o=a;n<i;++n)a=t(e[n]),a!=null&&(a<r&&(r=a),a>o&&(o=a))}return[r,o]}function TH(e,t){const n=e.length;let i=-1,a,r,o,s,l;if(t==null){for(;++i<n;)if(r=e[i],r!=null&&r>=r){a=o=r;break}if(i===n)return[-1,-1];for(s=l=i;++i<n;)r=e[i],r!=null&&(a>r&&(a=r,s=i),o<r&&(o=r,l=i))}else{for(;++i<n;)if(r=t(e[i],i,e),r!=null&&r>=r){a=o=r;break}if(i===n)return[-1,-1];for(s=l=i;++i<n;)r=t(e[i],i,e),r!=null&&(a>r&&(a=r,s=i),o<r&&(o=r,l=i))}return[s,l]}function Me(e,t){return Object.hasOwn(e,t)}const Nx={};function zm(e){let t={},n;function i(r){return Me(t,r)&&t[r]!==Nx}const a={size:0,empty:0,object:t,has:i,get(r){return i(r)?t[r]:void 0},set(r,o){return i(r)||(++a.size,t[r]===Nx&&--a.empty),t[r]=o,this},delete(r){return i(r)&&(--a.size,++a.empty,t[r]=Nx),this},clear(){a.size=a.empty=0,a.object=t={}},test(r){return arguments.length?(n=r,a):n},clean(){const r={};let o=0;for(const s in t){const l=t[s];l!==Nx&&(!n||!n(l))&&(r[s]=l,++o)}a.size=o,a.empty=0,a.object=t=r}};return e&&Object.keys(e).forEach(r=>{a.set(r,e[r])}),a}function AH(e,t,n,i,a,r){if(!n&&n!==0)return r;const o=+n;let s=e[0],l=At(e),u;l<s&&(u=s,s=l,l=u),u=Math.abs(t-s);const d=Math.abs(l-t);return u<d&&u<=o?i:d<=o?a:r}function De(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),dt(i,n)}function rg(e,t,n,i){let a=t[0],r=t[t.length-1],o;return a>r&&(o=a,a=r,r=o),n=n===void 0||n,i=i===void 0||i,(n?a<=e:a<e)&&(i?e<=r:e<r)}function Mf(e){return typeof e=="boolean"}function sf(e){return Object.prototype.toString.call(e)==="[object Date]"}function OH(e){return e&&ft(e[Symbol.iterator])}function Lt(e){return typeof e=="number"}function XP(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Ne(e){return typeof e=="string"}function ZP(e,t,n){e&&(e=t?Le(e).map(s=>s.replace(/\\(.)/g,"$1")):Le(e));const i=e&&e.length,a=n&&n.get||cH,r=s=>a(t?[s]:Il(s));let o;if(!i)o=function(){return""};else if(i===1){const s=r(e[0]);o=function(l){return""+s(l)}}else{const s=e.map(r);o=function(l){let u=""+s[0](l),d=0;for(;++d<i;)u+="|"+s[d](l);return u}}return Er(o,e,"key")}function DH(e,t){const n=e[0],i=At(e),a=+t;return a?a===1?i:n+a*(i-n):n}const Cye=1e4;function CH(e){e=+e||Cye;let t,n,i;const a=()=>{t={},n={},i=0},r=(o,s)=>(++i>e&&(n=t,t={},i=1),t[o]=s);return a(),{clear:a,has:o=>Me(t,o)||Me(n,o),get:o=>Me(t,o)?t[o]:Me(n,o)?r(o,n[o]):void 0,set:(o,s)=>Me(t,o)?t[o]=s:r(o,s)}}function RH(e,t,n,i){const a=t.length,r=n.length;if(!r)return t;if(!a)return n;const o=i||new t.constructor(a+r);let s=0,l=0,u=0;for(;s<a&&l<r;++u)o[u]=e(t[s],n[l])>0?n[l++]:t[s++];for(;s<a;++s,++u)o[u]=t[s];for(;l<r;++l,++u)o[u]=n[l];return o}function Tv(e,t){let n="";for(;--t>=0;)n+=e;return n}function IH(e,t,n,i){const a=n||" ",r=e+"",o=t-r.length;return o<=0?r:i==="left"?Tv(a,o)+r:i==="center"?Tv(a,~~(o/2))+r+Tv(a,Math.ceil(o/2)):r+Tv(a,o)}function G_(e){return e&&At(e)-e[0]||0}function Oe(e){return ye(e)?"["+e.map(Oe)+"]":Fe(e)||Ne(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function JP(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Rye=e=>Lt(e)||sf(e)?e:Date.parse(e);function KP(e,t){return t=t||Rye,e==null||e===""?null:t(e)}function QP(e){return e==null||e===""?null:e+""}function bs(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function PH(e,t,n,i){const a=i??"",r=e+"",o=r.length,s=Math.max(0,t-a.length);return o<=t?r:n==="left"?a+r.slice(o-s):n==="center"?r.slice(0,Math.ceil(s/2))+a+r.slice(o-~~(s/2)):r.slice(0,s)+a}function Od(e,t,n){if(e)if(t){const i=e.length;for(let a=0;a<i;++a){const r=t(e[a]);r&&n(r,a,e)}}else e.forEach(n)}const Wi="year",br="quarter",ha="month",ri="week",_r="date",la="day",El="dayofyear",Wr="hours",Gr="minutes",Io="seconds",_s="milliseconds",eF=[Wi,br,ha,ri,_r,la,El,Wr,Gr,Io,_s],WT=eF.reduce((e,t,n)=>(e[t]=1+n,e),{});function tF(e){const t=Le(e).slice(),n={};return t.length||me("Missing time unit."),t.forEach(a=>{Me(WT,a)?n[a]=1:me(`Invalid time unit: ${a}.`)}),(n[ri]||n[la]?1:0)+(n[br]||n[ha]||n[_r]?1:0)+(n[El]?1:0)>1&&me(`Incompatible time units: ${e}`),t.sort((a,r)=>WT[a]-WT[r]),t}const Iye={[Wi]:"%Y ",[br]:"Q%q ",[ha]:"%b ",[_r]:"%d ",[ri]:"W%U ",[la]:"%a ",[El]:"%j ",[Wr]:"%H:00",[Gr]:"00:%M",[Io]:":%S",[_s]:".%L",[`${Wi}-${ha}`]:"%Y-%m ",[`${Wi}-${ha}-${_r}`]:"%Y-%m-%d ",[`${Wr}-${Gr}`]:"%H:%M"};function FH(e,t){const n=dt({},Iye,t),i=tF(e),a=i.length;let r="",o=0,s,l;for(o=0;o<a;)for(s=i.length;s>o;--s)if(l=i.slice(o,s).join("-"),n[l]!=null){r+=n[l],o=s;break}return r.trim()}const Rc=new Date;function nF(e){return Rc.setFullYear(e),Rc.setMonth(0),Rc.setDate(1),Rc.setHours(0,0,0,0),Rc}function NH(e){return MH(new Date(e))}function LH(e){return qD(new Date(e))}function MH(e){return Eu.count(nF(e.getFullYear())-1,e)}function qD(e){return Cm.count(nF(e.getFullYear())-1,e)}function jD(e){return nF(e).getDay()}function Pye(e,t,n,i,a,r,o){if(0<=e&&e<100){const s=new Date(-1,t,n,i,a,r,o);return s.setFullYear(e),s}return new Date(e,t,n,i,a,r,o)}function zH(e){return jH(new Date(e))}function qH(e){return UD(new Date(e))}function jH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return of.count(t-1,e)}function UD(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Rm.count(t-1,e)}function BD(e){return Rc.setTime(Date.UTC(e,0,1)),Rc.getUTCDay()}function Fye(e,t,n,i,a,r,o){if(0<=e&&e<100){const s=new Date(Date.UTC(-1,t,n,i,a,r,o));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,i,a,r,o))}function UH(e,t,n,i,a){const r=t||1,o=At(e),s=(w,E,T)=>(T=T||w,Nye(n[T],i[T],w===o&&r,E)),l=new Date,u=bs(e),d=u[Wi]?s(Wi):_a(2012),c=u[ha]?s(ha):u[br]?s(br):Ld,g=u[ri]&&u[la]?s(la,1,ri+la):u[ri]?s(ri,1):u[la]?s(la,1):u[_r]?s(_r,1):u[El]?s(El,1):Fm,v=u[Wr]?s(Wr):Ld,b=u[Gr]?s(Gr):Ld,x=u[Io]?s(Io):Ld,k=u[_s]?s(_s):Ld;return function(w){l.setTime(+w);const E=d(l);return a(E,c(l),g(l,E),v(l),b(l),x(l),k(l))}}function Nye(e,t,n,i){const a=n<=1?e:i?(r,o)=>i+n*Math.floor((e(r,o)-i)/n):(r,o)=>n*Math.floor(e(r,o)/n);return t?(r,o)=>t(a(r,o),o):a}function Xg(e,t,n){return t+e*7-(n+6)%7}const Lye={[Wi]:e=>e.getFullYear(),[br]:e=>Math.floor(e.getMonth()/3),[ha]:e=>e.getMonth(),[_r]:e=>e.getDate(),[Wr]:e=>e.getHours(),[Gr]:e=>e.getMinutes(),[Io]:e=>e.getSeconds(),[_s]:e=>e.getMilliseconds(),[El]:e=>MH(e),[ri]:e=>qD(e),[ri+la]:(e,t)=>Xg(qD(e),e.getDay(),jD(t)),[la]:(e,t)=>Xg(1,e.getDay(),jD(t))},Mye={[br]:e=>3*e,[ri]:(e,t)=>Xg(e,0,jD(t))};function BH(e,t){return UH(e,t||1,Lye,Mye,Pye)}const zye={[Wi]:e=>e.getUTCFullYear(),[br]:e=>Math.floor(e.getUTCMonth()/3),[ha]:e=>e.getUTCMonth(),[_r]:e=>e.getUTCDate(),[Wr]:e=>e.getUTCHours(),[Gr]:e=>e.getUTCMinutes(),[Io]:e=>e.getUTCSeconds(),[_s]:e=>e.getUTCMilliseconds(),[El]:e=>jH(e),[ri]:e=>UD(e),[la]:(e,t)=>Xg(1,e.getUTCDay(),BD(t)),[ri+la]:(e,t)=>Xg(UD(e),e.getUTCDay(),BD(t))},qye={[br]:e=>3*e,[ri]:(e,t)=>Xg(e,0,BD(t))};function VH(e,t){return UH(e,t||1,zye,qye,Fye)}const jye={[Wi]:xl,[br]:Qb.every(3),[ha]:Qb,[ri]:Cm,[_r]:Eu,[la]:Eu,[El]:Eu,[Wr]:m2,[Gr]:p2,[Io]:bu,[_s]:Ug},Uye={[Wi]:wl,[br]:e_.every(3),[ha]:e_,[ri]:Rm,[_r]:of,[la]:of,[El]:of,[Wr]:y2,[Gr]:g2,[Io]:bu,[_s]:Ug};function qm(e){return jye[e]}function jm(e){return Uye[e]}function WH(e,t,n){return e?e.offset(t,n):void 0}function GH(e,t,n){return WH(qm(e),t,n)}function HH(e,t,n){return WH(jm(e),t,n)}function YH(e,t,n,i){return e?e.range(t,n,i):void 0}function XH(e,t,n,i){return YH(qm(e),t,n,i)}function ZH(e,t,n,i){return YH(jm(e),t,n,i)}const Av=1e3,Ov=Av*60,Dv=Ov*60,E2=Dv*24,Bye=E2*7,B9=E2*30,VD=E2*365,JH=[Wi,ha,_r,Wr,Gr,Io,_s],Cv=JH.slice(0,-1),Rv=Cv.slice(0,-1),Iv=Rv.slice(0,-1),Vye=Iv.slice(0,-1),Wye=[Wi,ri],V9=[Wi,ha],KH=[Wi],Jy=[[Cv,1,Av],[Cv,5,5*Av],[Cv,15,15*Av],[Cv,30,30*Av],[Rv,1,Ov],[Rv,5,5*Ov],[Rv,15,15*Ov],[Rv,30,30*Ov],[Iv,1,Dv],[Iv,3,3*Dv],[Iv,6,6*Dv],[Iv,12,12*Dv],[Vye,1,E2],[Wye,1,Bye],[V9,1,B9],[V9,3,3*B9],[KH,1,VD]];function QH(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(G_(t))/n;let a=Om(s=>s[2]).right(Jy,i),r,o;return a===Jy.length?(r=KH,o=mf(t[0]/VD,t[1]/VD,n)):a?(a=Jy[i/Jy[a-1][2]<Jy[a][2]/i?a-1:a],r=a[0],o=a[1]):(r=JH,o=Math.max(mf(t[0],t[1],n),1)),{units:r,step:o}}function Pv(e){const t={};return n=>t[n]||(t[n]=e(n))}function Gye(e,t){return n=>{const i=e(n),a=i.indexOf(t);if(a<0)return i;let r=Hye(i,a);const o=r<i.length?i.slice(r):"";for(;--r>a;)if(i[r]!=="0"){++r;break}return i.slice(0,r)+o}}function Hye(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function eY(e){const t=Pv(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const a=dh(i||",");if(a.precision==null){switch(a.precision=12,a.type){case"%":a.precision-=2;break;case"e":a.precision-=1;break}return Gye(t(a),t(".1f")(1)[1])}else return t(a)},formatSpan(i,a,r,o){o=dh(o??",f");const s=mf(i,a,r),l=Math.max(Math.abs(i),Math.abs(a));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=jW(s,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=UW(s,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=qW(s))||(o.precision=u-(o.type==="%")*2);break}}return t(o)}}}let WD;tY();function tY(){return WD=eY({format:f2,formatPrefix:vP})}function nY(e){return eY(zW(e))}function yk(e){return arguments.length?WD=nY(e):WD}function W9(e,t,n){n=n||{},Fe(n)||me(`Invalid time multi-format specifier: ${n}`);const i=t(Io),a=t(Gr),r=t(Wr),o=t(_r),s=t(ri),l=t(ha),u=t(br),d=t(Wi),c=e(n[_s]||".%L"),g=e(n[Io]||":%S"),v=e(n[Gr]||"%I:%M"),b=e(n[Wr]||"%I %p"),x=e(n[_r]||n[la]||"%a %d"),k=e(n[ri]||"%b %d"),w=e(n[ha]||"%B"),E=e(n[br]||"%B"),T=e(n[Wi]||"%Y");return O=>(i(O)<O?c:a(O)<O?g:r(O)<O?v:o(O)<O?b:l(O)<O?s(O)<O?x:k:d(O)<O?u(O)<O?w:E:T)(O)}function iY(e){const t=Pv(e.format),n=Pv(e.utcFormat);return{timeFormat:i=>Ne(i)?t(i):W9(t,qm,i),utcFormat:i=>Ne(i)?n(i):W9(n,jm,i),timeParse:Pv(e.parse),utcParse:Pv(e.utcParse)}}let GD;aY();function aY(){return GD=iY({format:SP,parse:hG,utcFormat:TP,utcParse:pG})}function rY(e){return iY(lG(e))}function n_(e){return arguments.length?GD=rY(e):GD}const HD=(e,t)=>dt({},e,t);function oY(e,t){const n=e?nY(e):yk(),i=t?rY(t):n_();return HD(n,i)}function iF(e,t){const n=arguments.length;return n&&n!==2&&me("defaultLocale expects either zero or two arguments."),n?HD(yk(e),n_(t)):HD(yk(),n_())}function Yye(){return tY(),aY(),iF()}const Xye=/^(data:|([A-Za-z]+:)?\/\/)/,Zye=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Jye=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,G9="file://";function Kye(e,t){return n=>({options:n||{},sanitize:eve,load:Qye,fileAccess:!1,file:tve(t),http:ive(e)})}async function Qye(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function eve(e,t){t=dt({},this.options,t);const n=this.fileAccess,i={href:null};let a,r,o;const s=Zye.test(e.replace(Jye,""));(e==null||typeof e!="string"||!s)&&me("Sanitize failure, invalid URI: "+Oe(e));const l=Xye.test(e);return(o=t.baseURL)&&!l&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),r=(a=e.startsWith(G9))||t.mode==="file"||t.mode!=="http"&&!l&&n,a?e=e.slice(G9.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),r=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!r}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function tve(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(a,r)=>{a?i(a):n(r)})}):nve}async function nve(){me("No file system access.")}function ive(e){return e?async function(t,n){const i=dt({},this.options.http,n),a=n&&n.response,r=await e(t,i);return r.ok?ft(r[a])?r[a]():r.text():me(r.status+""+r.statusText)}:ave}async function ave(){me("No HTTP fetch method available.")}const rve=e=>e!=null&&e===e,ove=e=>e==="true"||e==="false"||e===!0||e===!1,sve=e=>!Number.isNaN(Date.parse(e)),sY=e=>!Number.isNaN(+e)&&!(e instanceof Date),lve=e=>sY(e)&&Number.isInteger(+e),YD={boolean:JP,integer:ua,number:ua,date:KP,string:QP,unknown:ba},Lx=[ove,lve,sY,sve],uve=["boolean","integer","number","date"];function lY(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=Lx.length,a=Lx.map((r,o)=>o+1);for(let r=0,o=0,s,l;r<n;++r)for(l=t?e[r][t]:e[r],s=0;s<i;++s)if(a[s]&&rve(l)&&!Lx[s](l)&&(a[s]=0,++o,o===Lx.length))return"string";return uve[a.reduce((r,o)=>r===0?o:r,0)-1]}function uY(e,t){return t.reduce((n,i)=>(n[i]=lY(e,i),n),{})}function H9(e){const t=function(n,i){const a={delimiter:e};return aF(n,i?dt(i,a):a)};return t.responseType="text",t}function aF(e,t){return t.header&&(e=t.header.map(Oe).join(t.delimiter)+`
`+e),NW(t.delimiter).parse(e+"")}aF.responseType="text";function dve(e){return typeof Buffer=="function"&&ft(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function rF(e,t){const n=t&&t.property?Co(t.property):ba;return Fe(e)&&!dve(e)?fve(n(e),t):n(JSON.parse(e))}rF.responseType="json";function fve(e,t){return!ye(e)&&OH(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const cve={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function dY(e,t){let n,i,a,r;return e=rF(e,t),t&&t.feature?(n=Vme,a=t.feature):t&&t.mesh?(n=Gme,a=t.mesh,r=cve[t.filter]):me("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[a])?n(e,i,r):me("Invalid TopoJSON object: "+a),i&&i.features||[i]}dY.responseType="json";const B1={dsv:aF,csv:H9(","),tsv:H9("	"),json:rF,topojson:dY};function oF(e,t){return arguments.length>1?(B1[e]=t,this):Me(B1,e)?B1[e]:null}function fY(e){const t=oF(e);return t&&t.responseType||"text"}function cY(e,t,n,i){t=t||{};const a=oF(t.type||"json");return a||me("Unknown data format type: "+t.type),e=a(e,t),t.parse&&hve(e,t.parse,n,i),Me(e,"columns")&&delete e.columns,e}function hve(e,t,n,i){if(!e.length)return;const a=n_();n=n||a.timeParse,i=i||a.utcParse;let r=e.columns||Object.keys(e[0]),o,s,l,u,d,c;t==="auto"&&(t=uY(e,r)),r=Object.keys(t);const g=r.map(v=>{const b=t[v];let x,k;if(b&&(b.startsWith("date:")||b.startsWith("utc:")))return x=b.split(/:(.+)?/,2),k=x[1],(k[0]==="'"&&k[k.length-1]==="'"||k[0]==='"'&&k[k.length-1]==='"')&&(k=k.slice(1,-1)),(x[0]==="utc"?i:n)(k);if(!YD[b])throw Error("Illegal format pattern: "+v+":"+b);return YD[b]});for(l=0,d=e.length,c=r.length;l<d;++l)for(o=e[l],u=0;u<c;++u)s=r[u],o[s]=g[u](o[s])}const S2=Kye(typeof fetch<"u"&&fetch,null);function T2(e){const t=e||ba,n=[],i={};return n.add=a=>{const r=t(a);return i[r]||(i[r]=1,n.push(a)),n},n.remove=a=>{const r=t(a);if(i[r]){i[r]=0;const o=n.indexOf(a);o>=0&&n.splice(o,1)}return n},n}async function V1(e,t){try{await t(e)}catch(n){e.error(n)}}const hY=Symbol("vega_id");let pve=1;function A2(e){return!!(e&&Ze(e))}function Ze(e){return e[hY]}function pY(e,t){return e[hY]=t,e}function qt(e){const t=e===Object(e)?e:{data:e};return Ze(t)?t:pY(t,pve++)}function sF(e){return O2(e,qt({}))}function O2(e,t){for(const n in e)t[n]=e[n];return t}function gY(e,t){return pY(t,Ze(e))}function qh(e,t){return e?t?(n,i)=>e(n,i)||Ze(t(n))-Ze(t(i)):(n,i)=>e(n,i)||Ze(n)-Ze(i):null}function mY(e){return e&&e.constructor===jh}function jh(){const e=[],t=[],n=[],i=[],a=[];let r=null,o=!1;return{constructor:jh,insert(s){const l=Le(s),u=l.length;for(let d=0;d<u;++d)e.push(l[d]);return this},remove(s){const l=ft(s)?i:t,u=Le(s),d=u.length;for(let c=0;c<d;++c)l.push(u[c]);return this},modify(s,l,u){const d={field:l,value:_a(u)};return ft(s)?(d.filter=s,a.push(d)):(d.tuple=s,n.push(d)),this},encode(s,l){return ft(s)?a.push({filter:s,field:l}):n.push({tuple:s,field:l}),this},clean(s){return r=s,this},reflow(){return o=!0,this},pulse(s,l){const u={},d={};let c,g,v,b,x,k;for(c=0,g=l.length;c<g;++c)u[Ze(l[c])]=1;for(c=0,g=t.length;c<g;++c)x=t[c],u[Ze(x)]=-1;for(c=0,g=i.length;c<g;++c)b=i[c],l.forEach(E=>{b(E)&&(u[Ze(E)]=-1)});for(c=0,g=e.length;c<g;++c)x=e[c],k=Ze(x),u[k]?u[k]=1:s.add.push(qt(e[c]));for(c=0,g=l.length;c<g;++c)x=l[c],u[Ze(x)]<0&&s.rem.push(x);function w(E,T,O){O?E[T]=O(E):s.encode=T,o||(d[Ze(E)]=E)}for(c=0,g=n.length;c<g;++c)v=n[c],x=v.tuple,b=v.field,k=u[Ze(x)],k>0&&(w(x,b,v.value),s.modifies(b));for(c=0,g=a.length;c<g;++c)v=a[c],b=v.filter,l.forEach(E=>{b(E)&&u[Ze(E)]>0&&w(E,v.field,v.value)}),s.modifies(v.field);if(o)s.mod=t.length||i.length?l.filter(E=>u[Ze(E)]>0):l.slice();else for(k in d)s.mod.push(d[k]);return(r||r==null&&(t.length||i.length))&&s.clean(!0),s}}}const W1="_:mod:_";function D2(){Object.defineProperty(this,W1,{writable:!0,value:{}})}D2.prototype={set(e,t,n,i){const a=this,r=a[e],o=a[W1];return t!=null&&t>=0?(r[t]!==n||i)&&(r[t]=n,o[t+":"+e]=-1,o[e]=-1):(r!==n||i)&&(a[e]=n,o[e]=ye(n)?1+n.length:-1),a},modified(e,t){const n=this[W1];if(arguments.length){if(ye(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[W1]={},this}};let gve=0;const mve="pulse",yve=new D2,vve=1,bve=2;function an(e,t,n,i){this.id=++gve,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function Y9(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}an.prototype={targets(){return this._targets||(this._targets=T2(W_))},set(e){return this.value!==e?(this.value=e,1):0},skip:Y9(vve),modified:Y9(bve),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new D2,a=this._argops=this._argops||[],r=[];let o,s,l,u;const d=(c,g,v)=>{v instanceof an?(v!==this&&(t&&v.targets().add(this),r.push(v)),a.push({op:v,name:c,index:g})):i.set(c,g,v)};for(o in e)if(s=e[o],o===mve)Le(s).forEach(c=>{c instanceof an?c!==this&&(c.targets().add(this),r.push(c)):me("Pulse parameters must be operator instances.")}),this.source=s;else if(ye(s))for(i.set(o,-1,Array(l=s.length)),u=0;u<l;++u)d(o,u,s[u]);else d(o,-1,s);return this.marshall().clear(),n&&(a.initonly=!0),r},marshall(e){const t=this._argval||yve,n=this._argops;let i,a,r,o;if(n){const s=n.length;for(a=0;a<s;++a)i=n[a],r=i.op,o=r.modified()&&r.stamp===e,t.set(i.name,i.index,r.value,o);if(n.initonly){for(a=0;a<s;++a)i=n[a],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,a;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],a=i.op,a._targets&&a._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function _ve(e,t,n,i){let a=1,r;return e instanceof an?r=e:e&&e.prototype instanceof an?r=new e:ft(e)?r=new an(null,e):(a=0,r=new an(e,t)),this.rank(r),a&&(i=n,n=t),n&&this.connect(r,r.parameters(n,i)),this.touch(r),r}function xve(e,t){const n=e.rank,i=t.length;for(let a=0;a<i;++a)if(n<t[a].rank){this.rerank(e);return}}let wve=0;function C2(e,t,n){this.id=++wve,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ed(e,t,n){return new C2(e,t,n)}C2.prototype={_filter:Ro,_apply:ba,targets(){return this._targets||(this._targets=T2(W_))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let a=0;a<i;++a)n[a].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ed(e);return this.targets().add(t),t},apply(e){const t=Ed(null,e);return this.targets().add(t),t},merge(){const e=Ed();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ed();return this.targets().add(Ed(null,null,YP(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ed(null,null,()=>n=!0)),t.targets().add(Ed(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ro,this._targets=null}};function kve(e,t,n,i){const a=this,r=Ed(n,i),o=function(u){u.dataflow=a;try{r.receive(u)}catch(d){a.error(d)}finally{a.run()}};let s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=Le(e);const l=s.length;for(let u=0;u<l;++u)s[u].addEventListener(t,o);return r}function $ve(e,t){const n=this.locale();return cY(e,t,n.timeParse,n.utcParse)}function Eve(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Sve(e,t){const n=this;let i=0,a;try{a=await n.loader().load(e,{context:"dataflow",response:fY(t&&t.type)});try{a=n.parse(a,t)}catch(r){i=-2,n.warn("Data ingestion failed",e,r)}}catch(r){i=-1,n.warn("Loading failed",e,r)}return{data:a,status:i}}async function Tve(e,t,n){const i=this,a=i._pending||Ave(i);a.requests+=1;const r=await i.request(t,n);return i.pulse(e,i.changeset().remove(Ro).insert(r.data||[])),a.done(),r}function Ave(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Ove={skip:!0};function Dve(e,t,n,i,a){return(e instanceof an?Rve:Cve)(this,e,t,n,i,a),this}function Cve(e,t,n,i,a,r){const o=dt({},r,Ove);let s,l;ft(n)||(n=_a(n)),i===void 0?s=u=>e.touch(n(u)):ft(i)?(l=new an(null,i,a,!1),s=u=>{l.evaluate(u);const d=n(u),c=l.value;mY(c)?e.pulse(d,c,r):e.update(d,c,o)}):s=u=>e.update(n(u),i,o),t.apply(s)}function Rve(e,t,n,i,a,r){if(i===void 0)t.targets().add(n);else{const o=r||{},s=new an(null,Ive(n,i),a,!1);s.modified(o.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function Ive(e,t){return t=ft(t)?t:_a(t),e?function(n,i){const a=t(n,i);return e.skip()||(e.skip(a!==this.value).value=a),a}:t}function Pve(e){e.rank=++this._rank}function Fve(e){const t=[e];let n,i,a;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(a=i.length;--a>=0;)t.push(n=i[a]),n===e&&me("Cycle detected in dataflow graph.")}const vk={},Qs=1,Dd=2,su=4,Nve=Qs|Dd,X9=Qs|su,Dp=Qs|Dd|su,Z9=8,Ky=16,J9=32,K9=64;function lf(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function GT(e,t){const n=[];return Od(e,t,i=>n.push(i)),n}function Q9(e,t){const n={};return e.visit(t,i=>{n[Ze(i)]=1}),i=>n[Ze(i)]?null:i}function Mx(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}lf.prototype={StopPropagation:vk,ADD:Qs,REM:Dd,MOD:su,ADD_REM:Nve,ADD_MOD:X9,ALL:Dp,REFLOW:Z9,SOURCE:Ky,NO_SOURCE:J9,NO_FIELDS:K9,fork(e){return new lf(this.dataflow).init(this,e)},clone(){const e=this.fork(Dp);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Dp|Ky)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new lf(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&K9)&&(n.fields=e.fields),t&Qs?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Dd?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&su?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&J9?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Dp;return t&Qs&&this.add.length||t&Dd&&this.rem.length||t&su&&this.mod.length},reflow(e){if(e)return this.fork(Dp).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(su,Q9(this,Qs))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ye(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ye(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Qs&&(n.addF=Mx(n.addF,t)),e&Dd&&(n.remF=Mx(n.remF,t)),e&su&&(n.modF=Mx(n.modF,t)),e&Ky&&(n.srcF=Mx(n.srcF,t)),n},materialize(e){e=e||Dp;const t=this;return e&Qs&&t.addF&&(t.add=GT(t.add,t.addF),t.addF=null),e&Dd&&t.remF&&(t.rem=GT(t.rem,t.remF),t.remF=null),e&su&&t.modF&&(t.mod=GT(t.mod,t.modF),t.modF=null),e&Ky&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&Ky)return Od(n.source,n.srcF,i),n;e&Qs&&Od(n.add,n.addF,i),e&Dd&&Od(n.rem,n.remF,i),e&su&&Od(n.mod,n.modF,i);const a=n.source;if(e&Z9&&a){const r=n.add.length+n.mod.length;r===a.length||(r?Od(a,Q9(n,X9),i):Od(a,n.srcF,i))}return n}};function lF(e,t,n,i){const a=this;let r=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const s=a.fields||(a.fields={});for(const l in o.fields)s[l]=1}o.changed(a.ADD)&&(r|=a.ADD),o.changed(a.REM)&&(r|=a.REM),o.changed(a.MOD)&&(r|=a.MOD)}this.changes=r}De(lF,lf,{fork(e){const t=new lf(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ye(e)?e.some(i=>n[i]):n[e]:0},filter(){me("MultiPulse does not support filtering.")},materialize(){me("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,a=i.length;let r=0;if(e&n.SOURCE)for(;r<a;++r)i[r].visit(e,t);else for(;r<a;++r)i[r].stamp===n.stamp&&i[r].visit(e,t);return n}});async function Lve(e,t,n){const i=this,a=[];if(i._pulse)return yY(i);if(i._pending&&await i._pending,t&&await V1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const r=++i._clock;i._pulse=new lf(i,r,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=T2(W_);let o=0,s,l,u;try{for(;i._heap.size()>0;){if(s=i._heap.pop(),s.rank!==s.qrank){i._enqueue(s,!0);continue}l=s.run(i._getPulse(s,e)),l.then?l=await l:l.async&&(a.push(l.async),l=vk),l!==vk&&s._targets&&s._targets.forEach(d=>i._enqueue(d)),++o}}catch(d){i._heap.clear(),u=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${r}: ${o} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const d=i._postrun.sort((c,g)=>g.priority-c.priority);i._postrun=[];for(let c=0;c<d.length;++c)await V1(i,d[c].callback)}return n&&await V1(i,n),a.length&&Promise.all(a).then(d=>i.runAsync(null,()=>{d.forEach(c=>{try{c(i)}catch(g){i.error(g)}})})),i}async function Mve(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function zve(e,t,n){return this._pulse?yY(this):(this.evaluate(e,t,n),this)}function qve(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function yY(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function jve(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Uve(e,t){const n=e.source,i=this._clock;return n&&ye(n)?new lF(this,i,n.map(a=>a.pulse),t):this._input[e.id]||Bve(this._pulse,n&&n.pulse)}function Bve(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==vk&&(e.source=t.source),e)}const uF={skip:!1,force:!1};function Vve(e,t){const n=t||uF;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Wve(e,t,n){const i=n||uF;return(e.set(t)||i.force)&&this.touch(e,i),this}function Gve(e,t,n){this.touch(e,n||uF);const i=new lf(this,this._clock+(this._pulse?0:1)),a=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,a),this}function Hve(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),vY(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,Yve(t,0,e)):i=n,i}}}function vY(e,t,n,i){let a,r;const o=e[n];for(;n>t;){if(r=n-1>>1,a=e[r],i(o,a)<0){e[n]=a,n=r;continue}break}return e[n]=o}function Yve(e,t,n){const i=t,a=e.length,r=e[t];let o=(t<<1)+1,s;for(;o<a;)s=o+1,s<a&&n(e[o],e[s])>=0&&(o=s),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=r,vY(e,i,t,n)}function _g(){this.logger(BP()),this.logLevel(jP),this._clock=0,this._rank=0,this._locale=iF();try{this._loader=S2()}catch{}this._touched=T2(W_),this._input={},this._pulse=null,this._heap=Hve((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Qy(e){return function(){return this._log[e].apply(this,arguments)}}_g.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Qy("error"),warn:Qy("warn"),info:Qy("info"),debug:Qy("debug"),logLevel:Qy("level"),cleanThreshold:1e4,add:_ve,connect:xve,rank:Pve,rerank:Fve,pulse:Gve,touch:Vve,update:Wve,changeset:jh,ingest:Eve,parse:$ve,preload:Tve,request:Sve,events:kve,on:Dve,evaluate:Lve,run:zve,runAsync:Mve,runAfter:qve,_enqueue:jve,_getPulse:Uve};function he(e,t){an.call(this,e,null,t)}De(he,an,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Zg={};function bY(e){const t=_Y(e);return t&&t.Definition||null}function _Y(e){return e=e&&e.toLowerCase(),Me(Zg,e)?Zg[e]:null}function*xY(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function dF(e,t,n){const i=Float64Array.from(xY(e,n));return i.sort(ku),t.map(a=>zV(i,a))}function fF(e,t){return dF(e,[.25,.5,.75],t)}function cF(e,t){const n=e.length,i=yse(e,t),a=fF(e,t),r=(a[2]-a[0])/1.34;return 1.06*(Math.min(i,r)||i||Math.abs(a[0])||1)*Math.pow(n,-.2)}function wY(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),a=e.divide||[5,2];let r=e.extent[0],o=e.extent[1],s,l,u,d,c,g;const v=e.span||o-r||Math.abs(r)||1;if(e.step)s=e.step;else if(e.steps){for(d=v/t,c=0,g=e.steps.length;c<g&&e.steps[c]<d;++c);s=e.steps[Math.max(0,c-1)]}else{for(l=Math.ceil(Math.log(t)/i),u=e.minstep||0,s=Math.max(u,Math.pow(n,Math.round(Math.log(v)/i)-l));Math.ceil(v/s)>t;)s*=n;for(c=0,g=a.length;c<g;++c)d=s/a[c],d>=u&&v/d<=t&&(s=d)}d=Math.log(s);const b=d>=0?0:~~(-d/i)+1,x=Math.pow(n,-b-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(r/s+x)*s,r=r<d?d-s:d,o=Math.ceil(o/s)*s),{start:r,stop:o===r?r+s:o,step:s}}var Po=Math.random;function Xve(e){Po=e}function kY(e,t,n,i){if(!e.length)return[void 0,void 0];const a=Float64Array.from(xY(e,i)),r=a.length,o=t;let s,l,u,d;for(u=0,d=Array(o);u<o;++u){for(s=0,l=0;l<r;++l)s+=a[~~(Po()*r)];d[u]=s/r}return d.sort(ku),[yD(d,n/2),yD(d,1-n/2)]}function $Y(e,t,n,i){i=i||(g=>g);const a=e.length,r=new Float64Array(a);let o=0,s=1,l=i(e[0]),u=l,d=l+t,c;for(;s<a;++s){if(c=i(e[s]),c>=d){for(u=(l+u)/2;o<s;++o)r[o]=u;d=c+t,l=c}u=c}for(u=(l+u)/2;o<s;++o)r[o]=u;return n?Zve(r,t+t/4):r}function Zve(e,t){const n=e.length;let i=0,a=1,r,o;for(;e[i]===e[a];)++a;for(;a<n;){for(r=a+1;e[a]===e[r];)++r;if(e[a]-e[a-1]<t){for(o=a+(i+r-a-a>>1);o<a;)e[o++]=e[a];for(;o>a;)e[o--]=e[i]}i=a,a=r}return e}function Jve(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Kve(e,t){t==null&&(t=e,e=0);let n,i,a;const r={min(o){return arguments.length?(n=o||0,a=i-n,r):n},max(o){return arguments.length?(i=o||0,a=i-n,r):i},sample(){return n+Math.floor(a*Po())},pdf(o){return o===Math.floor(o)&&o>=n&&o<i?1/a:0},cdf(o){const s=Math.floor(o);return s<n?0:s>=i?1:(s-n+1)/a},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*a):NaN}};return r.min(e).max(t)}const EY=Math.sqrt(2*Math.PI),Qve=Math.SQRT2;let ev=NaN;function R2(e,t){e=e||0,t=t??1;let n=0,i=0,a,r;if(ev===ev)n=ev,ev=NaN;else{do n=Po()*2-1,i=Po()*2-1,a=n*n+i*i;while(a===0||a>1);r=Math.sqrt(-2*Math.log(a)/a),n*=r,ev=i*r}return e+n*t}function hF(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*EY)}function I2(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,a=Math.abs(i);let r;if(a>37)r=0;else{const o=Math.exp(-a*a/2);let s;a<7.07106781186547?(s=.0352624965998911*a+.700383064443688,s=s*a+6.37396220353165,s=s*a+33.912866078383,s=s*a+112.079291497871,s=s*a+221.213596169931,s=s*a+220.206867912376,r=o*s,s=.0883883476483184*a+1.75566716318264,s=s*a+16.064177579207,s=s*a+86.7807322029461,s=s*a+296.564248779674,s=s*a+637.333633378831,s=s*a+793.826512519948,s=s*a+440.413735824752,r=r/s):(s=a+.65,s=a+4/s,s=a+3/s,s=a+2/s,s=a+1/s,r=o/s/2.506628274631)}return i>0?1-r:r}function P2(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Qve*ebe(2*e-1)}function ebe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function pF(e,t){let n,i;const a={mean(r){return arguments.length?(n=r||0,a):n},stdev(r){return arguments.length?(i=r??1,a):i},sample:()=>R2(n,i),pdf:r=>hF(r,n,i),cdf:r=>I2(r,n,i),icdf:r=>P2(r,n,i)};return a.mean(e).stdev(t)}function gF(e,t){const n=pF();let i=0;const a={data(r){return arguments.length?(e=r,i=r?r.length:0,a.bandwidth(t)):e},bandwidth(r){return arguments.length?(t=r,!t&&e&&(t=cF(e)),a):t},sample(){return e[~~(Po()*i)]+t*n.sample()},pdf(r){let o=0,s=0;for(;s<i;++s)o+=n.pdf((r-e[s])/t);return o/t/i},cdf(r){let o=0,s=0;for(;s<i;++s)o+=n.cdf((r-e[s])/t);return o/i},icdf(){throw Error("KDE icdf not supported.")}};return a.data(e)}function mF(e,t){return e=e||0,t=t??1,Math.exp(e+R2()*t)}function yF(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*EY*e)}function vF(e,t,n){return I2(Math.log(e),t,n)}function bF(e,t,n){return Math.exp(P2(e,t,n))}function SY(e,t){let n,i;const a={mean(r){return arguments.length?(n=r||0,a):n},stdev(r){return arguments.length?(i=r??1,a):i},sample:()=>mF(n,i),pdf:r=>yF(r,n,i),cdf:r=>vF(r,n,i),icdf:r=>bF(r,n,i)};return a.mean(e).stdev(t)}function TY(e,t){let n=0,i;function a(o){const s=[];let l=0,u;for(u=0;u<n;++u)l+=s[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)s[u]/=l;return s}const r={weights(o){return arguments.length?(i=a(t=o||[]),r):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),r.weights(t)):e},sample(){const o=Po();let s=e[n-1],l=i[0],u=0;for(;u<n-1;l+=i[++u])if(o<l){s=e[u];break}return s.sample()},pdf(o){let s=0,l=0;for(;l<n;++l)s+=i[l]*e[l].pdf(o);return s},cdf(o){let s=0,l=0;for(;l<n;++l)s+=i[l]*e[l].cdf(o);return s},icdf(){throw Error("Mixture icdf not supported.")}};return r.distributions(e).weights(t)}function _F(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Po()}function xF(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function wF(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function kF(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function AY(e,t){let n,i;const a={min(r){return arguments.length?(n=r||0,a):n},max(r){return arguments.length?(i=r??1,a):i},sample:()=>_F(n,i),pdf:r=>xF(r,n,i),cdf:r=>wF(r,n,i),icdf:r=>kF(r,n,i)};return t==null&&(t=e??1,e=0),a.min(e).max(t)}function $F(e,t,n){let i=0,a=0;for(const r of e){const o=n(r);t(r)==null||o==null||isNaN(o)||(i+=(o-i)/++a)}return{coef:[i],predict:()=>i,rSquared:0}}function H_(e,t,n,i){const a=i-e*e,r=Math.abs(a)<1e-24?0:(n-e*t)/a;return[t-r*e,r]}function F2(e,t,n,i){e=e.filter(v=>{let b=t(v),x=n(v);return b!=null&&(b=+b)>=b&&x!=null&&(x=+x)>=x}),i&&e.sort((v,b)=>t(v)-t(b));const a=e.length,r=new Float64Array(a),o=new Float64Array(a);let s=0,l=0,u=0,d,c,g;for(g of e)r[s]=d=+t(g),o[s]=c=+n(g),++s,l+=(d-l)/s,u+=(c-u)/s;for(s=0;s<a;++s)r[s]-=l,o[s]-=u;return[r,o,l,u]}function Y_(e,t,n,i){let a=-1,r,o;for(const s of e)r=t(s),o=n(s),r!=null&&(r=+r)>=r&&o!=null&&(o=+o)>=o&&i(r,o,++a)}function Um(e,t,n,i,a){let r=0,o=0;return Y_(e,t,n,(s,l)=>{const u=l-a(s),d=l-i;r+=u*u,o+=d*d}),1-r/o}function EF(e,t,n){let i=0,a=0,r=0,o=0,s=0;Y_(e,t,n,(d,c)=>{++s,i+=(d-i)/s,a+=(c-a)/s,r+=(d*c-r)/s,o+=(d*d-o)/s});const l=H_(i,a,r,o),u=d=>l[0]+l[1]*d;return{coef:l,predict:u,rSquared:Um(e,t,n,a,u)}}function OY(e,t,n){let i=0,a=0,r=0,o=0,s=0;Y_(e,t,n,(d,c)=>{++s,d=Math.log(d),i+=(d-i)/s,a+=(c-a)/s,r+=(d*c-r)/s,o+=(d*d-o)/s});const l=H_(i,a,r,o),u=d=>l[0]+l[1]*Math.log(d);return{coef:l,predict:u,rSquared:Um(e,t,n,a,u)}}function DY(e,t,n){const[i,a,r,o]=F2(e,t,n);let s=0,l=0,u=0,d=0,c=0,g,v,b;Y_(e,t,n,(E,T)=>{g=i[c++],v=Math.log(T),b=g*T,s+=(T*v-s)/c,l+=(b-l)/c,u+=(b*v-u)/c,d+=(g*b-d)/c});const[x,k]=H_(l/o,s/o,u/o,d/o),w=E=>Math.exp(x+k*(E-r));return{coef:[Math.exp(x-k*r),k],predict:w,rSquared:Um(e,t,n,o,w)}}function CY(e,t,n){let i=0,a=0,r=0,o=0,s=0,l=0;Y_(e,t,n,(c,g)=>{const v=Math.log(c),b=Math.log(g);++l,i+=(v-i)/l,a+=(b-a)/l,r+=(v*b-r)/l,o+=(v*v-o)/l,s+=(g-s)/l});const u=H_(i,a,r,o),d=c=>u[0]*Math.pow(c,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:d,rSquared:Um(e,t,n,s,d)}}function SF(e,t,n){const[i,a,r,o]=F2(e,t,n),s=i.length;let l=0,u=0,d=0,c=0,g=0,v,b,x,k;for(v=0;v<s;)b=i[v],x=a[v++],k=b*b,l+=(k-l)/v,u+=(k*b-u)/v,d+=(k*k-d)/v,c+=(b*x-c)/v,g+=(k*x-g)/v;const w=d-l*l,E=l*w-u*u,T=(g*l-c*u)/E,O=(c*w-g*u)/E,D=-T*l,P=R=>(R=R-r,T*R*R+O*R+D+o);return{coef:[D-O*r+T*r*r+o,O-2*T*r,T],predict:P,rSquared:Um(e,t,n,o,P)}}function RY(e,t,n,i){if(i===0)return $F(e,t,n);if(i===1)return EF(e,t,n);if(i===2)return SF(e,t,n);const[a,r,o,s]=F2(e,t,n),l=a.length,u=[],d=[],c=i+1;let g,v,b,x,k;for(g=0;g<c;++g){for(b=0,x=0;b<l;++b)x+=Math.pow(a[b],g)*r[b];for(u.push(x),k=new Float64Array(c),v=0;v<c;++v){for(b=0,x=0;b<l;++b)x+=Math.pow(a[b],g+v);k[v]=x}d.push(k)}d.push(u);const w=nbe(d),E=T=>{T-=o;let O=s+w[0]+w[1]*T+w[2]*T*T;for(g=3;g<c;++g)O+=w[g]*Math.pow(T,g);return O};return{coef:tbe(c,w,-o,s),predict:E,rSquared:Um(e,t,n,s,E)}}function tbe(e,t,n,i){const a=Array(e);let r,o,s,l;for(r=0;r<e;++r)a[r]=0;for(r=e-1;r>=0;--r)for(s=t[r],l=1,a[r]+=s,o=1;o<=r;++o)l*=(r+1-o)/o,a[r-o]+=s*Math.pow(n,o)*l;return a[0]+=i,a}function nbe(e){const t=e.length-1,n=[];let i,a,r,o,s;for(i=0;i<t;++i){for(o=i,a=i+1;a<t;++a)Math.abs(e[i][a])>Math.abs(e[i][o])&&(o=a);for(r=i;r<t+1;++r)s=e[r][i],e[r][i]=e[r][o],e[r][o]=s;for(a=i+1;a<t;++a)for(r=t;r>=i;r--)e[r][a]-=e[r][i]*e[i][a]/e[i][i]}for(a=t-1;a>=0;--a){for(s=0,r=a+1;r<t;++r)s+=e[r][a]*n[r];n[a]=(e[t][a]-s)/e[a][a]}return n}const ej=2,tj=1e-12;function IY(e,t,n,i){const[a,r,o,s]=F2(e,t,n,!0),l=a.length,u=Math.max(2,~~(i*l)),d=new Float64Array(l),c=new Float64Array(l),g=new Float64Array(l).fill(1);for(let v=-1;++v<=ej;){const b=[0,u-1];for(let k=0;k<l;++k){const w=a[k],E=b[0],T=b[1],O=w-a[E]>a[T]-w?E:T;let D=0,P=0,R=0,M=0,q=0;const H=1/Math.abs(a[O]-w||1);for(let te=E;te<=T;++te){const W=a[te],j=r[te],K=ibe(Math.abs(w-W)*H)*g[te],se=W*K;D+=K,P+=se,R+=j*K,M+=j*se,q+=W*se}const[z,Q]=H_(P/D,R/D,M/D,q/D);d[k]=z+Q*w,c[k]=Math.abs(r[k]-d[k]),abe(a,k+1,b)}if(v===ej)break;const x=jV(c);if(Math.abs(x)<tj)break;for(let k=0,w,E;k<l;++k)w=c[k]/(6*x),g[k]=w>=1?tj:(E=1-w*w)*E}return rbe(a,d,o,s)}function ibe(e){return(e=1-e*e*e)*e*e}function abe(e,t,n){const i=e[t];let a=n[0],r=n[1]+1;if(!(r>=e.length))for(;t>a&&e[r]-i<=i-e[a];)n[0]=++a,n[1]=r,++r}function rbe(e,t,n,i){const a=e.length,r=[];let o=0,s=0,l=[],u;for(;o<a;++o)u=e[o]+n,l[0]===u?l[1]+=(t[o]-l[1])/++s:(s=0,l[1]+=i,l=[u,t[o]],r.push(l));return l[1]+=i,r}const obe=.5*Math.PI/180;function N2(e,t,n,i){n=n||25,i=Math.max(n,i||200);const a=x=>[x,e(x)],r=t[0],o=t[1],s=o-r,l=s/i,u=[a(r)],d=[];if(n===i){for(let x=1;x<i;++x)u.push(a(r+x/n*s));return u.push(a(o)),u}else{d.push(a(o));for(let x=n;--x>0;)d.push(a(r+x/n*s))}let c=u[0],g=d[d.length-1];const v=1/s,b=sbe(c[1],d);for(;g;){const x=a((c[0]+g[0])/2);x[0]-c[0]>=l&&lbe(c,x,g,v,b)>obe?d.push(x):(c=g,u.push(g),d.pop()),g=d[d.length-1]}return u}function sbe(e,t){let n=e,i=e;const a=t.length;for(let r=0;r<a;++r){const o=t[r][1];o<n&&(n=o),o>i&&(i=o)}return 1/(i-n)}function lbe(e,t,n,i,a){const r=Math.atan2(a*(n[1]-e[1]),i*(n[0]-e[0])),o=Math.atan2(a*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(r-o)}function ube(e){return t=>{const n=e.length;let i=1,a=String(e[0](t));for(;i<n;++i)a+="|"+e[i](t);return a}}function XD(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:ube(e)}function PY(e,t,n){return n||e+(t?"_"+t:"")}const HT=()=>{},dbe={init:HT,add:HT,rem:HT,idx:0},i_={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},X_=Object.keys(i_).filter(e=>e!=="__count__");function fbe(e,t){return(n,i)=>dt({name:e,aggregate_param:i,out:n||e},dbe,t)}[...X_,"__count__"].forEach(e=>{i_[e]=fbe(e,i_[e])});function FY(e,t,n){return i_[e](n,t)}function NY(e,t){return e.idx-t.idx}function cbe(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(a=>{t[a]||n(t[a]=i_[a]())})};return e.forEach(n),Object.values(t).sort(NY)}function hbe(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function pbe(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function gbe(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function mbe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function LY(e,t){const n=t||ba,i=cbe(e),a=e.slice().sort(NY);function r(o){this._ops=i,this._out=a,this.cell=o,this.init()}return r.prototype.init=hbe,r.prototype.add=pbe,r.prototype.rem=gbe,r.prototype.set=mbe,r.prototype.get=n,r.fields=e.map(o=>o.out),r}function TF(e){this._key=e?Co(e):Ze,this.reset()}const Xi=TF.prototype;Xi.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Xi.add=function(e){this._add.push(e)};Xi.rem=function(e){this._rem.push(e)};Xi.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,a=t.length,r=Array(i-a),o={};let s,l,u;for(s=0;s<a;++s)o[n(t[s])]=1;for(s=0,l=0;s<i;++s)o[n(u=e[s])]?o[n(u)]=0:r[l++]=u;return this._rem=[],this._add=r};Xi.distinct=function(e){const t=this.values(),n={};let i=t.length,a=0,r;for(;--i>=0;)r=e(t[i])+"",Me(n,r)||(n[r]=1,++a);return a};Xi.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=TH(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Xi.argmin=function(e){return this.extent(e)[0]||{}};Xi.argmax=function(e){return this.extent(e)[1]||{}};Xi.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Xi.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Xi.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=fF(this.values(),e),this._get=e),this._q};Xi.q1=function(e){return this.quartile(e)[0]};Xi.q2=function(e){return this.quartile(e)[1]};Xi.q3=function(e){return this.quartile(e)[2]};Xi.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=kY(this.values(),1e3,.05,e),this._get=e),this._ci};Xi.ci0=function(e){return this.ci(e)[0]};Xi.ci1=function(e){return this.ci(e)[1]};function bf(e){he.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}bf.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:X_},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};De(bf,he,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=e.modified();return n.stamp=i.stamp,n.value&&(a||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=a?n.init(e):Object.create(null),t.visit(t.SOURCE,r=>n.add(r))):(n.value=n.value||n.init(e),t.visit(t.REM,r=>n.rem(r)),t.visit(t.ADD,r=>n.add(r))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),a=n.length;function r(s){let l,u,d,c;for(l in s)for(d=s[l].tuple,u=0;u<a;++u)i[u][c=d[n[u]]]=c}r(e._prev),r(t);function o(s,l,u){const d=n[u],c=i[u++];for(const g in c){const v=s?s+"|"+g:g;l[d]=c[g],u<a?o(v,l,u):t[v]||e.cell(v,l)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function a(E){const T=Le(ca(E)),O=T.length;let D=0,P;for(;D<O;++D)i[P=T[D]]||(i[P]=1,t.push(P))}this._dims=Le(e.groupby),this._dnames=this._dims.map(E=>{const T=qn(E);return a(E),n.push(T),T}),this.cellkey=e.key?e.key:XD(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const r=e.fields||[null],o=e.ops||["count"],s=e.aggregate_params||[null],l=e.as||[],u=r.length,d={};let c,g,v,b,x,k,w;for(u!==o.length&&me("Unmatched number of fields and aggregate ops."),w=0;w<u;++w){if(c=r[w],g=o[w],v=s[w]||null,c==null&&g!=="count"&&me("Null aggregate field specified."),x=qn(c),k=PY(g,x,l[w]),n.push(k),g==="count"){this._counts.push(k);continue}b=d[x],b||(a(c),b=d[x]=[],b.field=c,this._measures.push(b)),g!=="count"&&(this._countOnly=!1),b.push(FY(g,v,k))}return this._measures=this._measures.map(E=>LY(E,E.field)),Object.create(null)},cellkey:XD(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,a=i.length;n.agg=Array(a);for(let r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new TF),n},newtuple(e,t){const n=this._dnames,i=this._dims,a=i.length,r={};for(let o=0;o<a;++o)r[n[o]]=i[o](e);return t?gY(t.tuple,r):qt(r)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let a=0,r=i.length;a<r;++a)i[a].add(i[a].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let a=0,r=i.length;a<r;++a)i[a].rem(i[a].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,a=n.length;i<a;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let a=0,r=i.length;a<r;++a)i[a].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,a=this._drop,r=e.add,o=e.rem,s=e.mod;let l,u,d,c;if(i)for(u in i)l=i[u],(!a||l.num)&&o.push(l.tuple);for(d=0,c=this._alen;d<c;++d)r.push(this.celltuple(t[d])),t[d]=null;for(d=0,c=this._mlen;d<c;++d)l=n[d],(l.num===0&&a?o:s).push(this.celltuple(l)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const ybe=1e-14;function AF(e){he.call(this,null,e)}AF.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};De(AF,he,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),a=i.start,r=i.step,o=e.as||["bin0","bin1"],s=o[0],l=o[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(ca(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?d=>{const c=i(d);d[s]=c,d[l]=c==null?null:a+r*(1+(c-a)/r)}:d=>d[s]=i(d)),t.modifies(n?o:s)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=wY(e),i=n.step;let a=n.start,r=a+Math.ceil((n.stop-a)/i)*i,o,s;(o=e.anchor)!=null&&(s=o-(a+i*Math.floor((o-a)/i)),a+=s,r+=s);const l=function(u){let d=ua(t(u));return d==null?null:d<a?-1/0:d>r?1/0:(d=Math.max(a,Math.min(d,r-i)),a+i*Math.floor(ybe+(d-a)/i))};return l.start=a,l.stop=n.stop,l.step=i,this.value=Er(l,ca(t),e.name||"bin_"+qn(t))}});function MY(e,t,n){const i=e;let a=t||[],r=n||[],o={},s=0;return{add:l=>r.push(l),remove:l=>o[i(l)]=++s,size:()=>a.length,data:(l,u)=>(s&&(a=a.filter(d=>!o[i(d)]),o={},s=0),u&&l&&a.sort(l),r.length&&(a=l?RH(l,a,r.sort(l)):a.concat(r),r=[]),a)}}function OF(e){he.call(this,[],e)}OF.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};De(OF,he,{transform(e,t){const n=t.fork(t.ALL),i=MY(Ze,this.value,n.materialize(n.ADD).add),a=e.sort,r=t.changed()||a&&(e.modified("sort")||t.modified(a.fields));return n.visit(n.REM,i.remove),this.modified(r),this.value=n.source=i.data(qh(a),r),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function zY(e){an.call(this,null,vbe,e)}De(zY,an);function vbe(e){return this.value&&!e.modified()?this.value:HP(e.fields,e.orders)}function DF(e){he.call(this,null,e)}DF.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function bbe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}De(DF,he,{transform(e,t){const n=c=>g=>{for(var v=bbe(s(g),e.case,r)||[],b,x=0,k=v.length;x<k;++x)o.test(b=v[x])||c(b)},i=this._parameterCheck(e,t),a=this._counts,r=this._match,o=this._stop,s=e.field,l=e.as||["text","count"],u=n(c=>a[c]=1+(a[c]||0)),d=n(c=>a[c]-=1);return i?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,d)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),a=t[0],r=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,l,u;for(s in n)l=i[s],u=n[s]||0,!l&&u?(i[s]=l=qt({}),l[a]=s,l[r]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[s]=null,i[s]=null):l[r]!==u&&(l[r]=u,o.mod.push(l));return o.modifies(t)}});function CF(e){he.call(this,null,e)}CF.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};De(CF,he,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],a=i[0],r=i[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return o?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=_be(s,a,r,e.filter||Ro)):n.mod=s,n.source=this.value,n.modifies(i)}});function _be(e,t,n,i){for(var a=[],r={},o=e.length,s=0,l,u;s<o;++s)for(r[t]=u=e[s],l=0;l<o;++l)r[n]=e[l],i(r)&&(a.push(qt(r)),r={},r[t]=u);return a}const nj={kde:gF,mixture:TY,normal:pF,lognormal:SY,uniform:AY},xbe="distributions",ij="function",wbe="field";function qY(e,t){const n=e[ij];Me(nj,n)||me("Unknown distribution function: "+n);const i=nj[n]();for(const a in e)a===wbe?i.data((e.from||t()).map(e[a])):a===xbe?i[a](e[a].map(r=>qY(r,t))):typeof i[a]===ij&&i[a](e[a]);return i}function RF(e){he.call(this,null,e)}const jY=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],kbe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:jY},{name:"weights",type:"number",array:!0}]};RF.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:jY.concat(kbe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};De(RF,he,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=qY(e.distribution,$be(t)),a=e.steps||e.minsteps||25,r=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&me("Invalid density method: "+o),!e.extent&&!i.data&&me("Missing density extent parameter."),o=i[o];const s=e.as||["value","density"],l=e.extent||$l(i.data()),u=N2(o,l,a,r).map(d=>{const c={};return c[s[0]]=d[0],c[s[1]]=d[1],qt(c)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function $be(e){return()=>e.materialize(e.SOURCE).source}function UY(e,t){return e?e.map((n,i)=>t[i]||qn(n)):null}function IF(e,t,n){const i=[],a=c=>c(l);let r,o,s,l,u,d;if(t==null)i.push(e.map(n));else for(r={},o=0,s=e.length;o<s;++o)l=e[o],u=t.map(a),d=r[u],d||(r[u]=d=[],d.dims=u,i.push(d)),d.push(n(l));return i}const BY="bin";function PF(e){he.call(this,null,e)}PF.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:BY}]};const Ebe=(e,t)=>G_($l(e,t))/30;De(PF,he,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=IF(t.source,e.groupby,ba),a=e.smooth||!1,r=e.field,o=e.step||Ebe(n,r),s=qh((b,x)=>r(b)-r(x)),l=e.as||BY,u=i.length;let d=1/0,c=-1/0,g=0,v;for(;g<u;++g){const b=i[g].sort(s);v=-1;for(const x of $Y(b,o,a,r))x<d&&(d=x),x>c&&(c=x),b[++v][l]=x}return this.value={start:d,stop:c,step:o},t.reflow(!0).modifies(l)}});function VY(e){an.call(this,null,Sbe,e),this.modified(!0)}De(VY,an);function Sbe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Er(n=>t(n,e),ca(t),qn(t))}function FF(e){he.call(this,[void 0,void 0],e)}FF.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};De(FF,he,{transform(e,t){const n=this.value,i=e.field,a=t.changed()||t.modified(i.fields)||e.modified("field");let r=n[0],o=n[1];if((a||r==null)&&(r=1/0,o=-1/0),t.visit(a?t.SOURCE:t.ADD,s=>{const l=ua(i(s));l!=null&&(l<r&&(r=l),l>o&&(o=l))}),!Number.isFinite(r)||!Number.isFinite(o)){let s=qn(i);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${r}, ${o}]`),r=o=void 0}this.value=[r,o]}});function NF(e,t){an.call(this,e),this.parent=t,this.count=0}De(NF,an,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function L2(e){he.call(this,{},e),this._keys=zm();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,a=t.active;i<a;++i)n(t[i],i,t)}}De(L2,he,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const a=this.value;let r=Me(a,e)&&a[e],o,s;return r?r.value.stamp<n.stamp&&(r.init(n),this.activate(r)):(s=i||(s=this._group[e])&&s.tuple,o=n.dataflow,r=new NF(n.fork(n.NO_SOURCE),this),o.add(r).connect(t(o,e,s)),a[e]=r,this.activate(r)),r},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let a=0;for(;a<i;++a)t[a]=e[a];for(;a<n&&t[a]!=null;++a)t[a]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,a=e.subflow,r=this._keys,o=e.modified("key"),s=l=>this.subflow(l,a,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Ze(l),d=r.get(u);d!==void 0&&(r.delete(u),s(d).rem(l))}),t.visit(t.ADD,l=>{const u=i(l);r.set(Ze(l),u),s(u).add(l)}),o||t.modified(i.fields)?t.visit(t.MOD,l=>{const u=Ze(l),d=r.get(u),c=i(l);d===c?s(c).mod(l):(r.set(u,c),s(d).rem(l),s(c).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{s(r.get(Ze(l))).mod(l)}),o&&t.visit(t.REFLOW,l=>{const u=Ze(l),d=r.get(u),c=i(l);d!==c&&(r.set(u,c),s(d).rem(l),s(c).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),r.clean()}):r.empty>n.cleanThreshold&&n.runAfter(r.clean),t}});function WY(e){an.call(this,null,Tbe,e)}De(WY,an);function Tbe(e){return this.value&&!e.modified()?this.value:ye(e.name)?Le(e.name).map(t=>Co(t)):Co(e.name,e.as)}function LF(e){he.call(this,zm(),e)}LF.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};De(LF,he,{transform(e,t){const n=t.dataflow,i=this.value,a=t.fork(),r=a.add,o=a.rem,s=a.mod,l=e.expr;let u=!0;t.visit(t.REM,c=>{const g=Ze(c);i.has(g)?i.delete(g):o.push(c)}),t.visit(t.ADD,c=>{l(c,e)?r.push(c):i.set(Ze(c),1)});function d(c){const g=Ze(c),v=l(c,e),b=i.get(g);v&&b?(i.delete(g),r.push(c)):!v&&!b?(i.set(g,1),o.push(c)):u&&v&&!b&&s.push(c)}return t.visit(t.MOD,d),e.modified()&&(u=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),a}});function MF(e){he.call(this,[],e)}MF.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};De(MF,he,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,a=UY(i,e.as||[]),r=e.index||null,o=a.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{const l=i.map(b=>b(s)),u=l.reduce((b,x)=>Math.max(b,x.length),0);let d=0,c,g,v;for(;d<u;++d){for(g=sF(s),c=0;c<o;++c)g[a[c]]=(v=l[c][d])==null?null:v;r&&(g[r]=d),n.add.push(g)}}),this.value=n.source=n.add,r&&n.modifies(r),n.modifies(a)}});function zF(e){he.call(this,[],e)}zF.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};De(zF,he,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,a=i.map(qn),r=e.as||["key","value"],o=r[0],s=r[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let d=0,c;d<l;++d)c=sF(u),c[o]=a[d],c[s]=i[d](u),n.add.push(c)}),this.value=n.source=n.add,n.modifies(r)}});function qF(e){he.call(this,null,e)}qF.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};De(qF,he,{transform(e,t){const n=e.expr,i=e.as,a=e.modified(),r=e.initonly?t.ADD:a?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return a&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(r,o=>o[i]=n(o,e))}});function GY(e){he.call(this,[],e)}De(GY,he,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let a=this.value,r=e.size-a.length,o,s,l;if(r>0){for(o=[];--r>=0;)o.push(l=qt(i(e))),a.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else s=a.slice(0,-r),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,a=a.slice(-r);return n.source=this.value=a,n}});const zx={value:"value",median:jV,mean:qV,min:Ww,max:rf},Abe=[];function jF(e){he.call(this,[],e)}jF.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Obe(e){var t=e.method||zx.value,n;if(zx[t]==null)me("Unrecognized imputation method: "+t);else return t===zx.value?(n=e.value!==void 0?e.value:0,()=>n):zx[t]}function Dbe(e){const t=e.field;return n=>n?t(n):NaN}De(jF,he,{transform(e,t){var n=t.fork(t.ALL),i=Obe(e),a=Dbe(e),r=qn(e.field),o=qn(e.key),s=(e.groupby||[]).map(qn),l=Cbe(t.source,e.groupby,e.key,e.keyvals),u=[],d=this.value,c=l.domain.length,g,v,b,x,k,w,E,T,O,D;for(k=0,T=l.length;k<T;++k)for(g=l[k],b=g.values,v=NaN,E=0;E<c;++E)if(g[E]==null){for(x=l.domain[E],D={_impute:!0},w=0,O=b.length;w<O;++w)D[s[w]]=b[w];D[o]=x,D[r]=Number.isNaN(v)?v=i(g,a):v,u.push(qt(D))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=u,n}});function Cbe(e,t,n,i){var a=w=>w(k),r=[],o=i?i.slice():[],s={},l={},u,d,c,g,v,b,x,k;for(o.forEach((w,E)=>s[w]=E+1),g=0,x=e.length;g<x;++g)k=e[g],b=n(k),v=s[b]||(s[b]=o.push(b)),d=(u=t?t.map(a):Abe)+"",(c=l[d])||(c=l[d]=[],r.push(c),c.values=u),c[v-1]=k;return r.domain=o,r}function UF(e){bf.call(this,e)}UF.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:X_},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};De(UF,bf,{transform(e,t){const n=this,i=e.modified();let a;return n.value&&(i||t.modified(n._inputs,!0))?(a=n.value=i?n.init(e):{},t.visit(t.SOURCE,r=>n.add(r))):(a=n.value=n.value||this.init(e),t.visit(t.REM,r=>n.rem(r)),t.visit(t.ADD,r=>n.add(r))),n.changes(),t.visit(t.SOURCE,r=>{dt(r,a[n.cellkey(r)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function BF(e){he.call(this,null,e)}BF.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};De(BF,he,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,a=IF(i,e.groupby,e.field),r=(e.groupby||[]).map(qn),o=e.bandwidth,s=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let d=e.extent,c=e.steps||e.minsteps||25,g=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&me("Invalid density method: "+s),e.resolve==="shared"&&(d||(d=$l(i,e.field)),c=g=e.steps||g),a.forEach(v=>{const b=gF(v,o)[s],x=e.counts?v.length:1,k=d||$l(v);N2(b,k,c,g).forEach(w=>{const E={};for(let T=0;T<r.length;++T)E[r[T]]=v.dims[T];E[l[0]]=w[0],E[l[1]]=w[1]*x,u.push(qt(E))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function HY(e){an.call(this,null,Rbe,e)}De(HY,an);function Rbe(e){return this.value&&!e.modified()?this.value:ZP(e.fields,e.flat)}function YY(e){he.call(this,[],e),this._pending=null}De(YY,he,{transform(e,t){const n=t.dataflow;return this._pending?YT(this,t,this._pending):Ibe(e)?t.StopPropagation:e.values?YT(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(a=>(this._pending=Le(a.data),r=>r.touch(this)))}:n.request(e.url,e.format).then(i=>YT(this,t,Le(i.data)))}});function Ibe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function YT(e,t,n){n.forEach(qt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function VF(e){he.call(this,{},e)}VF.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};De(VF,he,{transform(e,t){const n=e.fields,i=e.index,a=e.values,r=e.default==null?null:e.default,o=e.modified(),s=n.length;let l=o?t.SOURCE:t.ADD,u=t,d=e.as,c,g,v;return a?(g=a.length,s>1&&!d&&me('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==s*g&&me('The "as" parameter has too few output field names.'),d=d||a.map(qn),c=function(b){for(var x=0,k=0,w,E;x<s;++x)if(E=i.get(n[x](b)),E==null)for(w=0;w<g;++w,++k)b[d[k]]=r;else for(w=0;w<g;++w,++k)b[d[k]]=a[w](E)}):(d||me("Missing output field names."),c=function(b){for(var x=0,k;x<s;++x)k=i.get(n[x](b)),b[d[x]]=k??r}),o?u=t.reflow(!0):(v=n.some(b=>t.modified(b.fields)),l|=v?t.MOD:0),t.visit(l,c),u.modifies(d)}});function XY(e){an.call(this,null,Pbe,e)}De(XY,an);function Pbe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,a=-1/0,r,o;for(r=0;r<n;++r)o=t[r],o[0]<i&&(i=o[0]),o[1]>a&&(a=o[1]);return[i,a]}function ZY(e){an.call(this,null,Fbe,e)}De(ZY,an);function Fbe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function JY(e){he.call(this,null,e)}De(JY,he,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function WF(e){bf.call(this,e)}WF.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:X_,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};De(WF,bf,{_transform:bf.prototype.transform,transform(e,t){return this._transform(Nbe(e,t),t)}});function Nbe(e,t){const n=e.field,i=e.value,a=(e.op==="count"?"__count__":e.op)||"sum",r=ca(n).concat(ca(i)),o=Mbe(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>a),fields:o.map(s=>Lbe(s,n,i,r)),as:o.map(s=>s+""),modified:e.modified.bind(e)}}function Lbe(e,t,n,i){return Er(a=>t(a)===e?n(a):NaN,i,e+"")}function Mbe(e,t,n){const i={},a=[];return n.visit(n.SOURCE,r=>{const o=e(r);i[o]||(i[o]=1,a.push(o))}),a.sort(Mm),t?a.slice(0,t):a}function KY(e){L2.call(this,e)}De(KY,L2,{transform(e,t){const n=e.subflow,i=e.field,a=r=>this.subflow(Ze(r),n,t,r);return(e.modified("field")||i&&t.modified(ca(i)))&&me("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,r=>{const o=a(r);i(r).forEach(s=>o.mod(s))}),t.visit(t.ADD,r=>{const o=a(r);i(r).forEach(s=>o.add(qt(s)))}),t.visit(t.REM,r=>{const o=a(r);i(r).forEach(s=>o.rem(s))})):(t.visit(t.MOD,r=>a(r).mod(r)),t.visit(t.ADD,r=>a(r).add(r)),t.visit(t.REM,r=>a(r).rem(r))),t.clean()&&t.runAfter(()=>this.clean()),t}});function GF(e){he.call(this,null,e)}GF.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};De(GF,he,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,a=UY(e.fields,e.as||[]),r=i?(s,l)=>zbe(s,l,i,a):O2;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,s=>{const l=Ze(s);n.rem.push(o[l]),o[l]=null}),t.visit(t.ADD,s=>{const l=r(s,qt({}));o[Ze(s)]=l,n.add.push(l)}),t.visit(t.MOD,s=>{n.mod.push(r(s,o[Ze(s)]))}),n}});function zbe(e,t,n,i){for(let a=0,r=n.length;a<r;++a)t[i[a]]=n[a](e);return t}function QY(e){he.call(this,null,e)}De(QY,he,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function HF(e){he.call(this,null,e)}HF.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const qbe=1e-14;De(HF,he,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const a=t.materialize(t.SOURCE).source,r=IF(a,e.groupby,e.field),o=(e.groupby||[]).map(qn),s=[],l=e.step||.01,u=e.probs||Lr(l/2,1-qbe,l),d=u.length;return r.forEach(c=>{const g=dF(c,u);for(let v=0;v<d;++v){const b={};for(let x=0;x<o.length;++x)b[o[x]]=c.dims[x];b[i[0]]=u[v],b[i[1]]=g[v],s.push(qt(b))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function eX(e){he.call(this,null,e)}De(eX,he,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,a=>{const r=Ze(a);n.rem.push(i[r]),i[r]=null}),t.visit(t.ADD,a=>{const r=sF(a);i[Ze(a)]=r,n.add.push(r)}),t.visit(t.MOD,a=>{const r=i[Ze(a)];for(const o in a)r[o]=a[o],n.modifies(o);n.mod.push(r)})),n}});function YF(e){he.call(this,[],e),this.count=0}YF.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};De(YF,he,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),a=e.size,r=this.value.reduce((d,c)=>(d[Ze(c)]=1,d),{});let o=this.value,s=this.count,l=0;function u(d){let c,g;o.length<a?o.push(d):(g=~~((s+1)*Po()),g<o.length&&g>=l&&(c=o[g],r[Ze(c)]&&n.rem.push(c),o[g]=d)),++s}if(t.rem.length&&(t.visit(t.REM,d=>{const c=Ze(d);r[c]&&(r[c]=-1,n.rem.push(d)),--s}),o=o.filter(d=>r[Ze(d)]!==-1)),(t.rem.length||i)&&o.length<a&&t.source&&(l=s=o.length,t.visit(t.SOURCE,d=>{r[Ze(d)]||u(d)}),l=-1),i&&o.length>a){const d=o.length-a;for(let c=0;c<d;++c)r[Ze(o[c])]=-1,n.rem.push(o[c]);o=o.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{r[Ze(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=o.filter(d=>!r[Ze(d)])),this.count=s,this.value=n.source=o,n}});function XF(e){he.call(this,null,e)}XF.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};De(XF,he,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Lr(e.start,e.stop,e.step||1).map(a=>{const r={};return r[i]=a,qt(r)}),n.add=t.add.concat(this.value),n}});function tX(e){he.call(this,null,e),this.modified(!0)}De(tX,he,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ZF(e){he.call(this,null,e)}const nX=["unit0","unit1"];ZF.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:eF,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:nX}]};De(ZF,he,{transform(e,t){const n=e.field,i=e.interval!==!1,a=e.timezone==="utc",r=this._floor(e,t),o=(a?jm:qm)(r.unit).offset,s=e.as||nX,l=s[0],u=s[1],d=r.step;let c=r.start||1/0,g=r.stop||-1/0,v=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ca(n)))&&(t=t.reflow(!0),v=t.SOURCE,c=1/0,g=-1/0),t.visit(v,b=>{const x=n(b);let k,w;x==null?(b[l]=null,i&&(b[u]=null)):(b[l]=k=w=r(x),i&&(b[u]=w=o(k,d)),k<c&&(c=k),w>g&&(g=w))}),r.start=c,r.stop=g,t.modifies(i?s:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:a}=e.units?{units:e.units,step:e.step||1}:QH({extent:e.extent||$l(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),r=tF(i),o=this.value||{},s=(n?VH:BH)(r,a);return s.unit=At(r),s.units=r,s.step=a,s.start=o.start,s.stop=o.stop,this.value=s}});function iX(e){he.call(this,zm(),e)}De(iX,he,{transform(e,t){const n=t.dataflow,i=e.field,a=this.value,r=s=>a.set(i(s),s);let o=!0;return e.modified("field")||t.modified(i.fields)?(a.clear(),t.visit(t.SOURCE,r)):t.changed()?(t.visit(t.REM,s=>a.delete(i(s))),t.visit(t.ADD,r)):o=!1,this.modified(o),a.empty>n.cleanThreshold&&n.runAfter(a.clean),t.fork()}});function aX(e){he.call(this,null,e)}De(aX,he,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(qh(e.sort)):t.source).map(e.field))}});function jbe(e,t,n,i){const a=a_[e](t,n);return{init:a.init||Ld,update:function(r,o){o[i]=a.next(r)}}}const a_={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=a_.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let a=t.index;if(e<a){for(;a+1<n.length&&!i(n[a],n[a+1]);)++a;e=a}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||me("ntile num must be greater than zero.");const n=a_.cume_dist(),i=n.next;return{init:n.init,next:a=>Math.ceil(t*i(a))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,a=n.data;return i<a.length?e(a[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||me("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const a=i.data;return i.index<=n?t:(n=Ube(e,a,i.index))<0?(n=a.length,t=null):t=e(a[n])}}}};function Ube(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const Bbe=Object.keys(a_);function rX(e){const t=Le(e.ops),n=Le(e.fields),i=Le(e.params),a=Le(e.aggregate_params),r=Le(e.as),o=this.outputs=[],s=this.windows=[],l={},u={},d=[],c=[];let g=!0;function v(b){Le(ca(b)).forEach(x=>l[x]=1)}v(e.sort),t.forEach((b,x)=>{const k=n[x],w=i[x],E=a[x]||null,T=qn(k),O=PY(b,T,r[x]);if(v(k),o.push(O),Me(a_,b))s.push(jbe(b,k,w,O));else{if(k==null&&b!=="count"&&me("Null aggregate field specified."),b==="count"){d.push(O);return}g=!1;let D=u[T];D||(D=u[T]=[],D.field=k,c.push(D)),D.push(FY(b,E,O))}}),(d.length||c.length)&&(this.cell=Vbe(c,d,g)),this.inputs=Object.keys(l)}const oX=rX.prototype;oX.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};oX.update=function(e,t){const n=this.cell,i=this.windows,a=e.data,r=i&&i.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(a[o]);for(o=e.p1;o<e.i1;++o)n.add(a[o]);n.set(t)}for(o=0;o<r;++o)i[o].update(e,t)};function Vbe(e,t,n){e=e.map(l=>LY(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var a=e.length,r=i.agg=Array(a),o=0;o<a;++o)r[o]=new e[o](i);if(i.store)var s=i.data=new TF;return i.add=function(l){if(i.num+=1,!n){s&&s.add(l);for(let u=0;u<a;++u)r[u].add(r[u].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){s&&s.rem(l);for(let u=0;u<a;++u)r[u].rem(r[u].get(l),l)}},i.set=function(l){let u,d;for(s&&s.values(),u=0,d=t.length;u<d;++u)l[t[u]]=i.num;if(!n)for(u=0,d=r.length;u<d;++u)r[u].set(l)},i.init=function(){i.num=0,s&&s.reset();for(let l=0;l<a;++l)r[l].init()},i}function JF(e){he.call(this,{},e),this._mlen=0,this._mods=[]}JF.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Bbe.concat(X_)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};De(JF,he,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=qh(e.sort),a=XD(e.groupby),r=s=>this.group(a(s));let o=this.state;(!o||n)&&(o=this.state=new rX(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,s=>r(s).add(s))):(t.visit(t.REM,s=>r(s).remove(s)),t.visit(t.ADD,s=>r(s).add(s)));for(let s=0,l=this._mlen;s<l;++s)Wbe(this._mods[s],o,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=MY(Ze),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Wbe(e,t,n,i){const a=i.sort,r=a&&!i.ignorePeers,o=i.frame||[null,0],s=e.data(n),l=s.length,u=r?Om(a):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:a||_a(-1)};t.init();for(let c=0;c<l;++c)Gbe(d,o,c,l),r&&Hbe(d,u),t.update(d,s[c])}function Gbe(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function Hbe(e,t){const n=e.i0,i=e.i1-1,a=e.compare,r=e.data,o=r.length-1;n>0&&!a(r[n],r[n-1])&&(e.i0=t.left(r,r[n])),i<o&&!a(r[i],r[i+1])&&(e.i1=t.right(r,r[i]))}const Ybe=Object.freeze(Object.defineProperty({__proto__:null,aggregate:bf,bin:AF,collect:OF,compare:zY,countpattern:DF,cross:CF,density:RF,dotbin:PF,expression:VY,extent:FF,facet:L2,field:WY,filter:LF,flatten:MF,fold:zF,formula:qF,generate:GY,impute:jF,joinaggregate:UF,kde:BF,key:HY,load:YY,lookup:VF,multiextent:XY,multivalues:ZY,params:JY,pivot:WF,prefacet:KY,project:GF,proxy:QY,quantile:HF,relay:eX,sample:YF,sequence:XF,sieve:tX,subflow:NF,timeunit:ZF,tupleindex:iX,values:aX,window:JF},Symbol.toStringTag,{value:"Module"}));function uf(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Xbe=()=>typeof Image<"u"?Image:null;function KF(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const Zbe="identity",Jg="linear",ju="log",Z_="pow",J_="sqrt",M2="symlog",hh="time",ph="utc",yl="sequential",Bm="diverging",Kg="quantile",z2="quantize",q2="threshold",QF="ordinal",ZD="point",sX="band",eN="bin-ordinal",ui="continuous",K_="discrete",Q_="discretizing",zo="interpolating",tN="temporal";function Jbe(e){return function(t){let n=t[0],i=t[1],a;return i<n&&(a=n,n=i,i=a),[e.invert(n),e.invert(i)]}}function Kbe(e){return function(t){const n=e.range();let i=t[0],a=t[1],r=-1,o,s,l,u;for(a<i&&(s=i,i=a,a=s),l=0,u=n.length;l<u;++l)n[l]>=i&&n[l]<=a&&(r<0&&(r=l),o=l);if(!(r<0))return i=e.invertExtent(n[r]),a=e.invertExtent(n[o]),[i[0]===void 0?i[1]:i[0],a[1]===void 0?a[0]:a[1]]}}function nN(){const e=_P().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],a,r,o=!1,s=0,l=0,u=.5;delete e.unknown;function d(){const c=t().length,g=i[1]<i[0],v=i[1-g],b=KF(c,s,l);let x=i[g-0];a=(v-x)/(b||1),o&&(a=Math.floor(a)),x+=(v-x-a*(c-s))*u,r=a*(1-s),o&&(x=Math.round(x),r=Math.round(r));const k=Lr(c).map(w=>x+a*w);return n(g?k.reverse():k)}return e.domain=function(c){return arguments.length?(t(c),d()):t()},e.range=function(c){return arguments.length?(i=[+c[0],+c[1]],d()):i.slice()},e.rangeRound=function(c){return i=[+c[0],+c[1]],o=!0,d()},e.bandwidth=function(){return r},e.step=function(){return a},e.round=function(c){return arguments.length?(o=!!c,d()):o},e.padding=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),s=l,d()):s},e.paddingInner=function(c){return arguments.length?(s=Math.max(0,Math.min(1,c)),d()):s},e.paddingOuter=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),d()):l},e.align=function(c){return arguments.length?(u=Math.max(0,Math.min(1,c)),d()):u},e.invertRange=function(c){if(c[0]==null||c[1]==null)return;const g=i[1]<i[0],v=g?n().reverse():n(),b=v.length-1;let x=+c[0],k=+c[1],w,E,T;if(!(x!==x||k!==k)&&(k<x&&(T=x,x=k,k=T),!(k<v[0]||x>i[1-g])))return w=Math.max(0,gf(v,x)-1),E=x===k?w:gf(v,k)-1,x-v[w]>r+1e-10&&++w,g&&(T=w,w=b-E,E=b-T),w>E?void 0:t().slice(w,E+1)},e.invert=function(c){const g=e.invertRange([c,c]);return g&&g[0]},e.copy=function(){return nN().domain(t()).range(i).round(o).paddingInner(s).paddingOuter(l).align(u)},d()}function lX(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return lX(t())},e}function Qbe(){return lX(nN().paddingInner(1))}var e_e=Array.prototype.map;function t_e(e){return e_e.call(e,ua)}const n_e=Array.prototype.slice;function uX(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(gf(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=t_e(i),n):e.slice()},n.range=function(i){return arguments.length?(t=n_e.call(i),n):t.slice()},n.tickFormat=function(i,a){return KW(e[0],At(e),i??10,a)},n.copy=function(){return uX().domain(n.domain()).range(n.range())},n}const bk=new Map,dX=Symbol("vega_scale");function fX(e){return e[dX]=!0,e}function aj(e){return e&&e[dX]===!0}function i_e(e,t,n){const i=function(){const r=t();return r.invertRange||(r.invertRange=r.invert?Jbe(r):r.invertExtent?Kbe(r):void 0),r.type=e,fX(r)};return i.metadata=bs(Le(n)),i}function Mt(e,t,n){return arguments.length>1?(bk.set(e,i_e(e,t,n)),this):cX(e)?bk.get(e):void 0}Mt(Zbe,QW);Mt(Jg,nk,ui);Mt(ju,tG,[ui,ju]);Mt(Z_,$P,ui);Mt(J_,Phe,ui);Mt(M2,nG,ui);Mt(hh,Xpe,[ui,tN]);Mt(ph,Zpe,[ui,tN]);Mt(yl,OP,[ui,zo]);Mt(`${yl}-${Jg}`,OP,[ui,zo]);Mt(`${yl}-${ju}`,gG,[ui,zo,ju]);Mt(`${yl}-${Z_}`,DP,[ui,zo]);Mt(`${yl}-${J_}`,Jpe,[ui,zo]);Mt(`${yl}-${M2}`,mG,[ui,zo]);Mt(`${Bm}-${Jg}`,yG,[ui,zo]);Mt(`${Bm}-${ju}`,vG,[ui,zo,ju]);Mt(`${Bm}-${Z_}`,CP,[ui,zo]);Mt(`${Bm}-${J_}`,Kpe,[ui,zo]);Mt(`${Bm}-${M2}`,bG,[ui,zo]);Mt(Kg,iG,[Q_,Kg]);Mt(z2,aG,Q_);Mt(q2,rG,Q_);Mt(eN,uX,[K_,Q_]);Mt(QF,_P,K_);Mt(sX,nN,K_);Mt(ZD,Qbe,K_);function cX(e){return bk.has(e)}function Uh(e,t){const n=bk.get(e);return n&&n.metadata[t]}function iN(e){return Uh(e,ui)}function Qg(e){return Uh(e,K_)}function JD(e){return Uh(e,Q_)}function hX(e){return Uh(e,ju)}function a_e(e){return Uh(e,tN)}function pX(e){return Uh(e,zo)}function gX(e){return Uh(e,Kg)}const r_e=["clamp","base","constant","exponent"];function mX(e,t){const n=t[0],i=At(t)-n;return function(a){return e(n+a*i)}}function j2(e,t,n){return uP(aN(t||"rgb",n),e)}function yX(e,t){const n=new Array(t),i=t+1;for(let a=0;a<t;)n[a]=e(++a/i);return n}function vX(e,t,n){const i=n-t;let a,r,o;return!i||!Number.isFinite(i)?_a(.5):(a=(r=e.type).indexOf("-"),r=a<0?r:r.slice(a+1),o=Mt(r)().domain([t,n]).range([0,1]),r_e.forEach(s=>e[s]?o[s](e[s]()):0),o)}function aN(e,t){const n=Uue[o_e(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function o_e(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const s_e={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},l_e={accent:ege,category10:Qpe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:tge,observable10:nge,paired:ige,pastel1:age,pastel2:rge,set1:oge,set2:sge,set3:lge,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function bX(e){if(ye(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function _X(e,t){for(const n in e)rN(n,t(e[n]))}const rj={};_X(l_e,bX);_X(s_e,e=>j2(bX(e)));function rN(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(rj[e]=t,this):rj[e]}const G1="symbol",u_e="discrete",d_e="gradient",f_e=e=>ye(e)?e.map(t=>String(t)):String(e),c_e=(e,t)=>e[1]-t[1],h_e=(e,t)=>t[1]-e[1];function oN(e,t,n){let i;return Lt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(G_(e.domain())/n||1)+1))),Fe(t)&&(i=t.step,t=t.interval),Ne(t)&&(t=e.type===hh?qm(t):e.type==ph?jm(t):me("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function xX(e,t,n){let i=e.range(),a=i[0],r=At(i),o=c_e;if(a>r&&(i=r,r=a,a=i,o=h_e),a=Math.floor(a),r=Math.ceil(r),t=t.map(s=>[s,e(s)]).filter(s=>a<=s[1]&&s[1]<=r).sort(o).map(s=>s[0]),n>0&&t.length>1){const s=[t[0],At(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=s)}return t}function sN(e,t){return e.bins?xX(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function wX(e,t,n,i,a,r){const o=t.type;let s=f_e;if(o===hh||a===hh)s=e.timeFormat(i);else if(o===ph||a===ph)s=e.utcFormat(i);else if(hX(o)){const l=e.formatFloat(i);if(r||t.bins)s=l;else{const u=kX(t,n,!1);s=d=>u(d)?l(d):""}}else if(t.tickFormat){const l=t.domain();s=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(s=e.format(i));return s}function kX(e,t,n){const i=sN(e,t),a=e.base(),r=Math.log(a),o=Math.max(1,a*t/i.length),s=l=>{let u=l/Math.pow(a,Math.round(Math.log(l)/r));return u*a<a-.5&&(u*=a),u<=o};return n?i.filter(s):s}const KD={[Kg]:"quantiles",[z2]:"thresholds",[q2]:"domain"},$X={[Kg]:"quantiles",[z2]:"domain"};function EX(e,t){return e.bins?m_e(e.bins):e.type===ju?kX(e,t,!0):KD[e.type]?g_e(e[KD[e.type]]()):sN(e,t)}function p_e(e,t,n){const i=t[$X[t.type]](),a=i.length;let r=a>1?i[1]-i[0]:i[0],o;for(o=1;o<a;++o)r=Math.min(r,i[o]-i[o-1]);return e.formatSpan(0,r,3*10,n)}function g_e(e){const t=[-1/0].concat(e);return t.max=1/0,t}function m_e(e){const t=e.slice(0,-1);return t.max=At(e),t}const y_e=e=>KD[e.type]||e.bins;function SX(e,t,n,i,a,r,o){const s=$X[t.type]&&r!==hh&&r!==ph?p_e(e,t,a):wX(e,t,n,a,r,o);return i===G1&&y_e(t)?v_e(s):i===u_e?b_e(s):__e(s)}const v_e=e=>(t,n,i)=>{const a=oj(i[n+1],oj(i.max,1/0)),r=sj(t,e),o=sj(a,e);return r&&o?r+"  "+o:o?"< "+o:" "+r},oj=(e,t)=>e??t,b_e=e=>(t,n)=>n?e(t):null,__e=e=>t=>e(t),sj=(e,t)=>Number.isFinite(e)?t(e):null;function x_e(e){const t=e.domain(),n=t.length-1;let i=+t[0],a=+At(t),r=a-i;if(e.type===q2){const o=n?r/n:.1;i-=o,a+=o,r=a-i}return o=>(o-i)/r}function w_e(e,t,n,i){const a=i||t.type;return Ne(n)&&a_e(a)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&a===hh?e.timeFormat("%A, %d %B %Y, %X"):!n&&a===ph?e.utcFormat("%A, %d %B %Y, %X UTC"):SX(e,t,5,null,n,i,!0)}function TX(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),a=w_e(e,t,n.format,n.formatType);if(JD(t.type)){const r=EX(t).slice(1).map(a),o=r.length;return`${o} boundar${o===1?"y":"ies"}: ${r.join(", ")}`}else if(Qg(t.type)){const r=t.domain(),o=r.length,s=o>i?r.slice(0,i-2).map(a).join(", ")+", ending with "+r.slice(-1).map(a):r.map(a).join(", ");return`${o} value${o===1?"":"s"}: ${s}`}else{const r=t.domain();return`values from ${a(r[0])} to ${a(At(r))}`}}let AX=0;function k_e(){AX=0}const _k="p_";function lN(e){return e&&e.gradient}function OX(e,t,n){const i=e.gradient;let a=e.id,r=i==="radial"?_k:"";return a||(a=e.id="gradient_"+AX++,i==="radial"?(e.x1=Xs(e.x1,.5),e.y1=Xs(e.y1,.5),e.r1=Xs(e.r1,0),e.x2=Xs(e.x2,.5),e.y2=Xs(e.y2,.5),e.r2=Xs(e.r2,.5),r=_k):(e.x1=Xs(e.x1,0),e.y1=Xs(e.y1,0),e.x2=Xs(e.x2,1),e.y2=Xs(e.y2,0))),t[a]=e,"url("+(n||"")+"#"+r+a+")"}function Xs(e,t){return e??t}function DX(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(a,r){return n.push({offset:a,color:r}),i}}}const lj={basis:{curve:kge},"basis-closed":{curve:$ge},"basis-open":{curve:Ege},bundle:{curve:Sge,tension:"beta",value:.85},cardinal:{curve:Tge,tension:"tension",value:0},"cardinal-open":{curve:Oge,tension:"tension",value:0},"cardinal-closed":{curve:Age,tension:"tension",value:0},"catmull-rom":{curve:Dge,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Cge,tension:"alpha",value:.5},"catmull-rom-open":{curve:Rge,tension:"alpha",value:.5},linear:{curve:RP},"linear-closed":{curve:Ige},monotone:{horizontal:Fge,vertical:Pge},natural:{curve:Nge},step:{curve:Lge},"step-after":{curve:zge},"step-before":{curve:Mge}};function uN(e,t,n){var i=Me(lj,e)&&lj[e],a=null;return i&&(a=i.curve||i[t||"vertical"],i.tension&&n!=null&&(a=a[i.tension](n))),a}const $_e={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},E_e=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,S_e=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,T_e=/^((\s+,?\s*)|(,\s*))/,A_e=/^[01]/;function em(e){const t=[];return(e.match(E_e)||[]).forEach(i=>{let a=i[0];const r=a.toLowerCase(),o=$_e[r],s=O_e(r,o,i.slice(1).trim()),l=s.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([a,...s.slice(0,o)]),l!==o){r==="m"&&(a=a==="M"?"L":"l");for(let u=o;u<l;u+=o)t.push([a,...s.slice(u,u+o)])}}),t}function O_e(e,t,n){const i=[];for(let a=0;t&&a<n.length;)for(let r=0;r<t;++r){const o=e==="a"&&(r===3||r===4)?A_e:S_e,s=n.slice(a).match(o);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");a+=s[0].length,i.push(+s[0]);const l=n.slice(a).match(T_e);l!==null&&(a+=l[0].length)}return i}const _f=Math.PI/180,D_e=1e-14,Ic=Math.PI/2,il=Math.PI*2,Cp=Math.sqrt(3)/2;var XT={},ZT={},CX=[].join;function C_e(e,t,n,i,a,r,o,s,l){const u=CX.call(arguments);if(XT[u])return XT[u];const d=o*_f,c=Math.sin(d),g=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const v=g*(s-e)*.5+c*(l-t)*.5,b=g*(l-t)*.5-c*(s-e)*.5;let x=v*v/(n*n)+b*b/(i*i);x>1&&(x=Math.sqrt(x),n*=x,i*=x);const k=g/n,w=c/n,E=-c/i,T=g/i,O=k*s+w*l,D=E*s+T*l,P=k*e+w*t,R=E*e+T*t;let q=1/((P-O)*(P-O)+(R-D)*(R-D))-.25;q<0&&(q=0);let H=Math.sqrt(q);r==a&&(H=-H);const z=.5*(O+P)-H*(R-D),Q=.5*(D+R)+H*(P-O),te=Math.atan2(D-Q,O-z);let j=Math.atan2(R-Q,P-z)-te;j<0&&r===1?j+=il:j>0&&r===0&&(j-=il);const K=Math.ceil(Math.abs(j/(Ic+.001))),se=[];for(let ee=0;ee<K;++ee){const oe=te+ee*j/K,Y=te+(ee+1)*j/K;se[ee]=[z,Q,oe,Y,n,i,c,g]}return XT[u]=se}function R_e(e){const t=CX.call(e);if(ZT[t])return ZT[t];var n=e[0],i=e[1],a=e[2],r=e[3],o=e[4],s=e[5],l=e[6],u=e[7];const d=u*o,c=-l*s,g=l*o,v=u*s,b=Math.cos(a),x=Math.sin(a),k=Math.cos(r),w=Math.sin(r),E=.5*(r-a),T=Math.sin(E*.5),O=8/3*T*T/Math.sin(E),D=n+b-O*x,P=i+x+O*b,R=n+k,M=i+w,q=R+O*w,H=M-O*k;return ZT[t]=[d*D+c*P,g*D+v*P,d*q+c*H,g*q+v*H,d*R+c*M,g*R+v*M]}const uo=["l",0,0,0,0,0,0,0];function I_e(e,t,n){const i=uo[0]=e[0];if(i==="a"||i==="A")uo[1]=t*e[1],uo[2]=n*e[2],uo[3]=e[3],uo[4]=e[4],uo[5]=e[5],uo[6]=t*e[6],uo[7]=n*e[7];else if(i==="h"||i==="H")uo[1]=t*e[1];else if(i==="v"||i==="V")uo[1]=n*e[1];else for(var a=1,r=e.length;a<r;++a)uo[a]=(a%2==1?t:n)*e[a];return uo}function r_(e,t,n,i,a,r){var o,s=null,l=0,u=0,d=0,c=0,g,v,b,x,k=0,w=0;n==null&&(n=0),i==null&&(i=0),a==null&&(a=1),r==null&&(r=a),e.beginPath&&e.beginPath();for(var E=0,T=t.length;E<T;++E){switch(o=t[E],(a!==1||r!==1)&&(o=I_e(o,a,r)),o[0]){case"l":l+=o[1],u+=o[2],e.lineTo(l+n,u+i);break;case"L":l=o[1],u=o[2],e.lineTo(l+n,u+i);break;case"h":l+=o[1],e.lineTo(l+n,u+i);break;case"H":l=o[1],e.lineTo(l+n,u+i);break;case"v":u+=o[1],e.lineTo(l+n,u+i);break;case"V":u=o[1],e.lineTo(l+n,u+i);break;case"m":l+=o[1],u+=o[2],k=l,w=u,e.moveTo(l+n,u+i);break;case"M":l=o[1],u=o[2],k=l,w=u,e.moveTo(l+n,u+i);break;case"c":g=l+o[5],v=u+o[6],d=l+o[3],c=u+o[4],e.bezierCurveTo(l+o[1]+n,u+o[2]+i,d+n,c+i,g+n,v+i),l=g,u=v;break;case"C":l=o[5],u=o[6],d=o[3],c=o[4],e.bezierCurveTo(o[1]+n,o[2]+i,d+n,c+i,l+n,u+i);break;case"s":g=l+o[3],v=u+o[4],d=2*l-d,c=2*u-c,e.bezierCurveTo(d+n,c+i,l+o[1]+n,u+o[2]+i,g+n,v+i),d=l+o[1],c=u+o[2],l=g,u=v;break;case"S":g=o[3],v=o[4],d=2*l-d,c=2*u-c,e.bezierCurveTo(d+n,c+i,o[1]+n,o[2]+i,g+n,v+i),l=g,u=v,d=o[1],c=o[2];break;case"q":g=l+o[3],v=u+o[4],d=l+o[1],c=u+o[2],e.quadraticCurveTo(d+n,c+i,g+n,v+i),l=g,u=v;break;case"Q":g=o[3],v=o[4],e.quadraticCurveTo(o[1]+n,o[2]+i,g+n,v+i),l=g,u=v,d=o[1],c=o[2];break;case"t":g=l+o[1],v=u+o[2],s[0].match(/[QqTt]/)===null?(d=l,c=u):s[0]==="t"?(d=2*l-b,c=2*u-x):s[0]==="q"&&(d=2*l-d,c=2*u-c),b=d,x=c,e.quadraticCurveTo(d+n,c+i,g+n,v+i),l=g,u=v,d=l+o[1],c=u+o[2];break;case"T":g=o[1],v=o[2],d=2*l-d,c=2*u-c,e.quadraticCurveTo(d+n,c+i,g+n,v+i),l=g,u=v;break;case"a":uj(e,l+n,u+i,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+i]),l+=o[6],u+=o[7];break;case"A":uj(e,l+n,u+i,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+i]),l=o[6],u=o[7];break;case"z":case"Z":l=k,u=w,e.closePath();break}s=o}}function uj(e,t,n,i){const a=C_e(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let r=0;r<a.length;++r){const o=R_e(a[r]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const dj=.5773502691896257,fj={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,il)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,a=n/2.5,r=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-r),e.lineTo(a,-r),e.lineTo(0,-n),e.lineTo(-a,-r),e.lineTo(-i,-r),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Cp*n,a=i-n*dj,r=n/4;e.moveTo(0,-i-a),e.lineTo(-r,i-a),e.lineTo(r,i-a),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Cp*n,a=i-n*dj;e.moveTo(0,-i-a),e.lineTo(-n,i-a),e.lineTo(n,i-a),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Cp*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Cp*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Cp*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Cp*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function RX(e){return Me(fj,e)?fj[e]:P_e(e)}var JT={};function P_e(e){if(!Me(JT,e)){const t=em(e);JT[e]={draw:function(n,i){r_(n,t,0,0,Math.sqrt(i)/2)}}}return JT[e]}const xd=.448084975506;function F_e(e){return e.x}function N_e(e){return e.y}function L_e(e){return e.width}function M_e(e){return e.height}function tu(e){return typeof e=="function"?e:()=>+e}function qx(e,t,n){return Math.max(t,Math.min(e,n))}function IX(){var e=F_e,t=N_e,n=L_e,i=M_e,a=tu(0),r=a,o=a,s=a,l=null;function u(d,c,g){var v,b=c??+e.call(this,d),x=g??+t.call(this,d),k=+n.call(this,d),w=+i.call(this,d),E=Math.min(k,w)/2,T=qx(+a.call(this,d),0,E),O=qx(+r.call(this,d),0,E),D=qx(+o.call(this,d),0,E),P=qx(+s.call(this,d),0,E);if(l||(l=v=d2()),T<=0&&O<=0&&D<=0&&P<=0)l.rect(b,x,k,w);else{var R=b+k,M=x+w;l.moveTo(b+T,x),l.lineTo(R-O,x),l.bezierCurveTo(R-xd*O,x,R,x+xd*O,R,x+O),l.lineTo(R,M-P),l.bezierCurveTo(R,M-xd*P,R-xd*P,M,R-P,M),l.lineTo(b+D,M),l.bezierCurveTo(b+xd*D,M,b,M-xd*D,b,M-D),l.lineTo(b,x+T),l.bezierCurveTo(b,x+xd*T,b+xd*T,x,b+T,x),l.closePath()}if(v)return l=null,v+""||null}return u.x=function(d){return arguments.length?(e=tu(d),u):e},u.y=function(d){return arguments.length?(t=tu(d),u):t},u.width=function(d){return arguments.length?(n=tu(d),u):n},u.height=function(d){return arguments.length?(i=tu(d),u):i},u.cornerRadius=function(d,c,g,v){return arguments.length?(a=tu(d),r=c!=null?tu(c):a,s=g!=null?tu(g):a,o=v!=null?tu(v):r,u):a},u.context=function(d){return arguments.length?(l=d??null,u):l},u}function PX(){var e,t,n,i,a=null,r,o,s,l;function u(c,g,v){const b=v/2;if(r){var x=s-g,k=c-o;if(x||k){var w=Math.hypot(x,k),E=(x/=w)*l,T=(k/=w)*l,O=Math.atan2(k,x);a.moveTo(o-E,s-T),a.lineTo(c-x*b,g-k*b),a.arc(c,g,b,O-Math.PI,O),a.lineTo(o+E,s+T),a.arc(o,s,l,O,O+Math.PI)}else a.arc(c,g,b,0,il);a.closePath()}else r=1;o=c,s=g,l=b}function d(c){var g,v=c.length,b,x=!1,k;for(a==null&&(a=k=d2()),g=0;g<=v;++g)!(g<v&&i(b=c[g],g,c))===x&&(x=!x)&&(r=0),x&&u(+e(b,g,c),+t(b,g,c),+n(b,g,c));if(k)return a=null,k+""||null}return d.x=function(c){return arguments.length?(e=c,d):e},d.y=function(c){return arguments.length?(t=c,d):t},d.size=function(c){return arguments.length?(n=c,d):n},d.defined=function(c){return arguments.length?(i=c,d):i},d.context=function(c){return arguments.length?(c==null?a=null:a=c,d):a},d}function e0(e,t){return e??t}const t0=e=>e.x||0,n0=e=>e.y||0,z_e=e=>e.width||0,q_e=e=>e.height||0,j_e=e=>(e.x||0)+(e.width||0),U_e=e=>(e.y||0)+(e.height||0),B_e=e=>e.startAngle||0,V_e=e=>e.endAngle||0,W_e=e=>e.padAngle||0,G_e=e=>e.innerRadius||0,H_e=e=>e.outerRadius||0,Y_e=e=>e.cornerRadius||0,X_e=e=>e0(e.cornerRadiusTopLeft,e.cornerRadius)||0,Z_e=e=>e0(e.cornerRadiusTopRight,e.cornerRadius)||0,J_e=e=>e0(e.cornerRadiusBottomRight,e.cornerRadius)||0,K_e=e=>e0(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Q_e=e=>e0(e.size,64),e0e=e=>e.size||1,U2=e=>e.defined!==!1,t0e=e=>RX(e.shape||"circle"),n0e=_ge().startAngle(B_e).endAngle(V_e).padAngle(W_e).innerRadius(G_e).outerRadius(H_e).cornerRadius(Y_e),i0e=AG().x(t0).y1(n0).y0(U_e).defined(U2),a0e=AG().y(n0).x1(t0).x0(j_e).defined(U2),r0e=TG().x(t0).y(n0).defined(U2),o0e=IX().x(t0).y(n0).width(z_e).height(q_e).cornerRadius(X_e,Z_e,J_e,K_e),s0e=wge().type(t0e).size(Q_e),l0e=PX().x(t0).y(n0).defined(U2).size(e0e);function dN(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function u0e(e,t){return n0e.context(e)(t)}function d0e(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?a0e:i0e).curve(uN(i,n.orient,n.tension)).context(e)(t)}function f0e(e,t){const n=t[0],i=n.interpolate||"linear";return r0e.curve(uN(i,n.orient,n.tension)).context(e)(t)}function Vm(e,t,n,i){return o0e.context(e)(t,n,i)}function c0e(e,t){return(t.mark.shape||t.shape).context(e)(t)}function h0e(e,t){return s0e.context(e)(t)}function p0e(e,t){return l0e.context(e)(t)}var FX=1;function NX(){FX=1}function fN(e,t,n){var i=t.clip,a=e._defs,r=t.clip_id||(t.clip_id="clip"+FX++),o=a.clipping[r]||(a.clipping[r]={id:r});return ft(i)?o.path=i(null):dN(n)?o.path=Vm(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+r+")"}function Jn(e){this.clear(),e&&this.union(e)}Jn.prototype={clone(){return new Jn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:a,x2:r,y2:o}=this,s=Math.cos(e),l=Math.sin(e),u=t-t*s+n*l,d=n-t*l-n*s;return[s*i-l*a+u,l*i+s*a+d,s*i-l*o+u,l*i+s*o+d,s*r-l*a+u,l*r+s*a+d,s*r-l*o+u,l*r+s*o+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function B2(e){this.mark=e,this.bounds=this.bounds||new Jn}function V2(e){B2.call(this,e),this.items=this.items||[]}De(V2,B2);class LX{constructor(t){this._pending=0,this._loader=t||S2()}pending(){return this._pending}sanitizeURL(t){const n=this;return cj(n),n._loader.sanitize(t,{context:"href"}).then(i=>(tv(n),i)).catch(()=>(tv(n),null))}loadImage(t){const n=this,i=Xbe();return cj(n),n._loader.sanitize(t,{context:"image"}).then(a=>{const r=a.href;if(!r||!i)throw{url:r};const o=new i,s=Me(a,"crossOrigin")?a.crossOrigin:"anonymous";return s!=null&&(o.crossOrigin=s),o.onload=()=>tv(n),o.onerror=()=>tv(n),o.src=r,o}).catch(a=>(tv(n),{complete:!1,width:0,height:0,src:a&&a.url||""}))}ready(){const t=this;return new Promise(n=>{function i(a){t.pending()?setTimeout(()=>{i(!0)},10):n(a)}i(!1)})}}function cj(e){e._pending+=1}function tv(e){e._pending-=1}function Xu(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?g0e(t,i):0))}return e}function g0e(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const m0e=il-1e-8;let W2,H1,Y1,Wc,QD,X1,eC,tC;const jd=(e,t)=>W2.add(e,t),Z1=(e,t)=>jd(H1=e,Y1=t),hj=e=>jd(e,W2.y1),pj=e=>jd(W2.x1,e),Pc=(e,t)=>QD*e+eC*t,Fc=(e,t)=>X1*e+tC*t,KT=(e,t)=>jd(Pc(e,t),Fc(e,t)),QT=(e,t)=>Z1(Pc(e,t),Fc(e,t));function i0(e,t){return W2=e,t?(Wc=t*_f,QD=tC=Math.cos(Wc),X1=Math.sin(Wc),eC=-X1):(QD=tC=1,Wc=X1=eC=0),y0e}const y0e={beginPath(){},closePath(){},moveTo:QT,lineTo:QT,rect(e,t,n,i){Wc?(KT(e+n,t),KT(e+n,t+i),KT(e,t+i),QT(e,t)):(jd(e+n,t+i),Z1(e,t))},quadraticCurveTo(e,t,n,i){const a=Pc(e,t),r=Fc(e,t),o=Pc(n,i),s=Fc(n,i);gj(H1,a,o,hj),gj(Y1,r,s,pj),Z1(o,s)},bezierCurveTo(e,t,n,i,a,r){const o=Pc(e,t),s=Fc(e,t),l=Pc(n,i),u=Fc(n,i),d=Pc(a,r),c=Fc(a,r);mj(H1,o,l,d,hj),mj(Y1,s,u,c,pj),Z1(d,c)},arc(e,t,n,i,a,r){if(i+=Wc,a+=Wc,H1=n*Math.cos(a)+e,Y1=n*Math.sin(a)+t,Math.abs(a-i)>m0e)jd(e-n,t-n),jd(e+n,t+n);else{const o=u=>jd(n*Math.cos(u)+e,n*Math.sin(u)+t);let s,l;if(o(i),o(a),a!==i)if(i=i%il,i<0&&(i+=il),a=a%il,a<0&&(a+=il),a<i&&(r=!r,s=i,i=a,a=s),r)for(a-=il,s=i-i%Ic,l=0;l<4&&s>a;++l,s-=Ic)o(s);else for(s=i-i%Ic+Ic,l=0;l<4&&s<a;++l,s=s+Ic)o(s)}}};function gj(e,t,n,i){const a=(e-t)/(e+n-2*t);0<a&&a<1&&i(e+(t-e)*a)}function mj(e,t,n,i,a){const r=i-e+3*t-3*n,o=e+n-2*t,s=e-t;let l=0,u=0,d;Math.abs(r)>D_e?(d=o*o+s*r,d>=0&&(d=Math.sqrt(d),l=(-o+d)/r,u=(-o-d)/r)):l=.5*s/o,0<l&&l<1&&a(yj(l,e,t,n,i)),0<u&&u<1&&a(yj(u,e,t,n,i))}function yj(e,t,n,i,a){const r=1-e,o=r*r,s=e*e;return o*r*t+3*o*e*n+3*r*s*i+s*e*a}var df=(df=uf(1,1))?df.getContext("2d"):null;const nC=new Jn;function cN(e){return function(t,n){if(!df)return!0;e(df,t),nC.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:a,x2:r,y2:o}=nC;for(let s=a;s<=o;++s)for(let l=i;l<=r;++l)if(df.isPointInPath(l,s))return!0;return!1}}function hN(e,t){return t.contains(e.x||0,e.y||0)}function MX(e,t){const n=e.x||0,i=e.y||0,a=e.width||0,r=e.height||0;return t.intersects(nC.set(n,i,n+a,i+r))}function zX(e,t){const n=e.x||0,i=e.y||0,a=e.x2!=null?e.x2:n,r=e.y2!=null?e.y2:i;return og(t,n,i,a,r)}function og(e,t,n,i,a){const{x1:r,y1:o,x2:s,y2:l}=e,u=i-t,d=a-n;let c=0,g=1,v,b,x,k;for(k=0;k<4;++k){if(k===0&&(v=-u,b=-(r-t)),k===1&&(v=u,b=s-t),k===2&&(v=-d,b=-(o-n)),k===3&&(v=d,b=l-n),Math.abs(v)<1e-10&&b<0)return!1;if(x=b/v,v<0){if(x>g)return!1;x>c&&(c=x)}else if(v>0){if(x<c)return!1;x<g&&(g=x)}}return!0}function tm(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Zo(e,t){return e??t}function vj(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function v0e(e,t,n){const i=n.width(),a=n.height();let r;if(t.gradient==="radial")r=e.createRadialGradient(n.x1+Zo(t.x1,.5)*i,n.y1+Zo(t.y1,.5)*a,Math.max(i,a)*Zo(t.r1,0),n.x1+Zo(t.x2,.5)*i,n.y1+Zo(t.y2,.5)*a,Math.max(i,a)*Zo(t.r2,.5));else{const o=Zo(t.x1,0),s=Zo(t.y1,0),l=Zo(t.x2,1),u=Zo(t.y2,0);if(o===l||s===u||i===a)r=e.createLinearGradient(n.x1+o*i,n.y1+s*a,n.x1+l*i,n.y1+u*a);else{const d=uf(Math.ceil(i),Math.ceil(a)),c=d.getContext("2d");return c.scale(i,a),c.fillStyle=vj(c.createLinearGradient(o,s,l,u),t.stops),c.fillRect(0,0,i,a),e.createPattern(d,"no-repeat")}}return vj(r,t.stops)}function qX(e,t,n){return lN(n)?v0e(e,n,t.bounds):n}function xk(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=qX(e,t,t.fill),!0):!1}var b0e=[];function nm(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=qX(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||b0e),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function _0e(e,t){return e.zindex-t.zindex||e.index-t.index}function pN(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,a,r;for(a=0,r=t.length;a<r;++a)i=t[a],i.index=a,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(_0e)}function xs(e,t){var n=e.items,i,a;if(!n||!n.length)return;const r=pN(e);if(r&&r.length){for(i=0,a=n.length;i<a;++i)n[i].zindex||t(n[i]);n=r}for(i=0,a=n.length;i<a;++i)t(n[i])}function wk(e,t){var n=e.items,i,a;if(!n||!n.length)return null;const r=pN(e);for(r&&r.length&&(n=r),a=n.length;--a>=0;)if(i=t(n[a]))return i;if(n===r){for(n=e.items,a=n.length;--a>=0;)if(!n[a].zindex&&(i=t(n[a])))return i}return null}function gN(e){return function(t,n,i){xs(n,a=>{(!i||i.intersects(a.bounds))&&jX(e,t,a,a)})}}function x0e(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&jX(e,t,n.items[0],n.items)}}function jX(e,t,n,i){var a=n.opacity==null?1:n.opacity;a!==0&&(e(t,i)||(tm(t,n),n.fill&&xk(t,n,a)&&t.fill(),n.stroke&&nm(t,n,a)&&t.stroke()))}function G2(e){return e=e||Ro,function(t,n,i,a,r,o){return i*=t.pixelRatio,a*=t.pixelRatio,wk(n,s=>{const l=s.bounds;if(!(l&&!l.contains(r,o)||!l)&&e(t,s,i,a,r,o))return s})}}function a0(e,t){return function(n,i,a,r){var o=Array.isArray(i)?i[0]:i,s=t??o.fill,l=o.stroke&&n.isPointInStroke,u,d;return l&&(u=o.strokeWidth,d=o.strokeCap,n.lineWidth=u??1,n.lineCap=d??"butt"),e(n,i)?!1:s&&n.isPointInPath(a,r)||l&&n.isPointInStroke(a,r)}}function mN(e){return G2(a0(e))}function Zc(e,t){return"translate("+e+","+t+")"}function yN(e){return"rotate("+e+")"}function w0e(e,t){return"scale("+e+","+t+")"}function UX(e){return Zc(e.x||0,e.y||0)}function k0e(e){return Zc(e.x||0,e.y||0)+(e.angle?" "+yN(e.angle):"")}function $0e(e){return Zc(e.x||0,e.y||0)+(e.angle?" "+yN(e.angle):"")+(e.scaleX||e.scaleY?" "+w0e(e.scaleX||1,e.scaleY||1):"")}function vN(e,t,n){function i(o,s){o("transform",k0e(s)),o("d",t(null,s))}function a(o,s){return t(i0(o,s.angle),s),Xu(o,s).translate(s.x||0,s.y||0)}function r(o,s){var l=s.x||0,u=s.y||0,d=s.angle||0;o.translate(l,u),d&&o.rotate(d*=_f),o.beginPath(),t(o,s),d&&o.rotate(-d),o.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:i,bound:a,draw:gN(r),pick:mN(r),isect:n||cN(r)}}var E0e=vN("arc",u0e);function S0e(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",a=e.length,r=1/0,o,s;--a>=0;)e[a].defined!==!1&&(s=Math.abs(e[a][i]-n),s<r&&(r=s,o=e[a]));return o}function T0e(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,a,r,o;--i>=0;)if(e[i].defined!==!1&&(a=e[i].x-t[0],r=e[i].y-t[1],o=a*a+r*r,o<n))return e[i];return null}function A0e(e,t){for(var n=e.length,i,a,r;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],a=e[n].y-t[1],r=i*i+a*a,i=e[n].size||1,r<i*i))return e[n];return null}function bN(e,t,n){function i(l,u){var d=u.mark.items;d.length&&l("d",t(null,d))}function a(l,u){var d=u.items;return d.length===0?l:(t(i0(l),d),Xu(l,d[0]))}function r(l,u){l.beginPath(),t(l,u)}const o=a0(r);function s(l,u,d,c,g,v){var b=u.items,x=u.bounds;return!b||!b.length||x&&!x.contains(g,v)?null:(d*=l.pixelRatio,c*=l.pixelRatio,o(l,b,d,c)?b[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:a,draw:x0e(r),pick:s,isect:hN,tip:n}}var O0e=bN("area",d0e,S0e);function D0e(e,t){var n=t.clip;e.save(),ft(n)?(e.beginPath(),n(e),e.clip()):BX(e,t.group)}function BX(e,t){e.beginPath(),dN(t)?Vm(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function VX(e){const t=Zo(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function C0e(e,t){e("transform",UX(t))}function WX(e,t){const n=VX(t);e("d",Vm(null,t,n,n))}function R0e(e,t){e("class","background"),e("aria-hidden",!0),WX(e,t)}function I0e(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?WX(e,t):e("d","")}function P0e(e,t,n){const i=t.clip?fN(n,t,t):null;e("clip-path",i)}function F0e(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let a=0;a<i;++a)e.union(n[a].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Xu(e,t),e.translate(t.x||0,t.y||0)}function o_(e,t,n,i){const a=VX(t);e.beginPath(),Vm(e,t,(n||0)+a,(i||0)+a)}const N0e=a0(o_),L0e=a0(o_,!1),M0e=a0(o_,!0);function z0e(e,t,n,i){xs(t,a=>{const r=a.x||0,o=a.y||0,s=a.strokeForeground,l=a.opacity==null?1:a.opacity;(a.stroke||a.fill)&&l&&(o_(e,a,r,o),tm(e,a),a.fill&&xk(e,a,l)&&e.fill(),a.stroke&&!s&&nm(e,a,l)&&e.stroke()),e.save(),e.translate(r,o),a.clip&&BX(e,a),n&&n.translate(-r,-o),xs(a,u=>{(u.marktype==="group"||i==null||i.includes(u.marktype))&&this.draw(e,u,n,i)}),n&&n.translate(r,o),e.restore(),s&&a.stroke&&l&&(o_(e,a,r,o),tm(e,a),nm(e,a,l)&&e.stroke())})}function q0e(e,t,n,i,a,r){if(t.bounds&&!t.bounds.contains(a,r)||!t.items)return null;const o=n*e.pixelRatio,s=i*e.pixelRatio;return wk(t,l=>{let u,d,c;const g=l.bounds;if(g&&!g.contains(a,r))return;d=l.x||0,c=l.y||0;const v=d+(l.width||0),b=c+(l.height||0),x=l.clip;if(x&&(a<d||a>v||r<c||r>b))return;if(e.save(),e.translate(d,c),d=a-d,c=r-c,x&&dN(l)&&!M0e(e,l,o,s))return e.restore(),null;const k=l.strokeForeground,w=t.interactive!==!1;return w&&k&&l.stroke&&L0e(e,l,o,s)?(e.restore(),l):(u=wk(l,E=>j0e(E,d,c)?this.pick(E,n,i,d,c):null),!u&&w&&(l.fill||!k&&l.stroke)&&N0e(e,l,o,s)&&(u=l),e.restore(),u||null)})}function j0e(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var U0e={type:"group",tag:"g",nested:!1,attr:C0e,bound:F0e,draw:z0e,pick:q0e,isect:MX,content:P0e,background:R0e,foreground:I0e},s_={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function _N(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function xN(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function wN(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function H2(e,t){return e==="center"?t/2:e==="right"?t:0}function Y2(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function B0e(e,t,n){const i=_N(t,n),a=xN(t,i),r=wN(t,i),o=(t.x||0)-H2(t.align,a),s=(t.y||0)-Y2(t.baseline,r),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,s_["xmlns:xlink"],"xlink:href"),e("transform",Zc(o,s)),e("width",a),e("height",r),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function V0e(e,t){const n=t.image,i=xN(t,n),a=wN(t,n),r=(t.x||0)-H2(t.align,i),o=(t.y||0)-Y2(t.baseline,a);return e.set(r,o,r+i,o+a)}function W0e(e,t,n){xs(t,i=>{if(n&&!n.intersects(i.bounds))return;const a=_N(i,this);let r=xN(i,a),o=wN(i,a);if(r===0||o===0)return;let s=(i.x||0)-H2(i.align,r),l=(i.y||0)-Y2(i.baseline,o),u,d,c,g;i.aspect!==!1&&(d=a.width/a.height,c=i.width/i.height,d===d&&c===c&&d!==c&&(c<d?(g=r/d,l+=(o-g)/2,o=g):(g=o*d,s+=(r-g)/2,r=g))),(a.complete||a.toDataURL)&&(tm(e,i),e.globalAlpha=(u=i.opacity)!=null?u:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(a,s,l,r,o))})}var G0e={type:"image",tag:"image",nested:!1,attr:B0e,bound:V0e,draw:W0e,pick:G2(),isect:Ro,get:_N,xOffset:H2,yOffset:Y2},H0e=bN("line",f0e,T0e);function Y0e(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",$0e(t)),e("d",t.path)}function J1(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,a=t.y||0,r=t.scaleX||1,o=t.scaleY||1,s=(t.angle||0)*_f,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=em(n)).path=n),s&&e.rotate&&e.translate?(e.translate(i,a),e.rotate(s),r_(e,l,0,0,r,o),e.rotate(-s),e.translate(-i,-a)):r_(e,l,i,a,r,o)}function X0e(e,t){return J1(i0(e,t.angle),t)?e.set(0,0,0,0):Xu(e,t,!0)}var Z0e={type:"path",tag:"path",nested:!1,attr:Y0e,bound:X0e,draw:gN(J1),pick:mN(J1),isect:cN(J1)};function J0e(e,t){e("d",Vm(null,t))}function K0e(e,t){var n,i;return Xu(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function bj(e,t){e.beginPath(),Vm(e,t)}var Q0e={type:"rect",tag:"path",nested:!1,attr:J0e,bound:K0e,draw:gN(bj),pick:mN(bj),isect:MX};function exe(e,t){e("transform",UX(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function txe(e,t){var n,i;return Xu(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function GX(e,t,n){var i,a,r,o;return t.stroke&&nm(e,t,n)?(i=t.x||0,a=t.y||0,r=t.x2!=null?t.x2:i,o=t.y2!=null?t.y2:a,e.beginPath(),e.moveTo(i,a),e.lineTo(r,o),!0):!1}function nxe(e,t,n){xs(t,i=>{if(!(n&&!n.intersects(i.bounds))){var a=i.opacity==null?1:i.opacity;a&&GX(e,i,a)&&(tm(e,i),e.stroke())}})}function ixe(e,t,n,i){return e.isPointInStroke?GX(e,t,1)&&e.isPointInStroke(n,i):!1}var axe={type:"rule",tag:"line",nested:!1,attr:exe,bound:txe,draw:nxe,pick:G2(ixe),isect:zX},rxe=vN("shape",c0e),oxe=vN("symbol",h0e,hN);const _j=CH();var jr={height:Pl,measureWidth:kN,estimateWidth:kk,width:kk,canvas:HX};HX(!0);function HX(e){jr.width=e&&df?kN:kk}function kk(e,t){return YX(wf(e,t),Pl(e))}function YX(e,t){return~~(.8*e.length*t)}function kN(e,t){return Pl(e)<=0||!(t=wf(e,t))?0:XX(t,X2(e))}function XX(e,t){const n=`(${t}) ${e}`;let i=_j.get(n);return i===void 0&&(df.font=t,i=df.measureText(e).width,_j.set(n,i)),i}function Pl(e){return e.fontSize!=null?+e.fontSize||0:11}function xf(e){return e.lineHeight!=null?e.lineHeight:Pl(e)+2}function sxe(e){return ye(e)?e.length>1?e:e[0]:e}function r0(e){return sxe(e.lineBreak&&e.text&&!ye(e.text)?e.text.split(e.lineBreak):e.text)}function $N(e){const t=r0(e);return(ye(t)?t.length-1:0)*xf(e)}function wf(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?uxe(e,n):n}function lxe(e){if(jr.width===kN){const t=X2(e);return n=>XX(n,t)}else if(jr.width===kk){const t=Pl(e);return n=>YX(n,t)}else return t=>jr.width(e,t)}function uxe(e,t){var n=+e.limit,i=lxe(e);if(i(t)<n)return t;var a=e.ellipsis||"",r=e.dir==="rtl",o=0,s=t.length,l;if(n-=i(a),r){for(;o<s;)l=o+s>>>1,i(t.slice(l))>n?o=l+1:s=l;return a+t.slice(o)}else{for(;o<s;)l=1+(o+s>>>1),i(t.slice(0,l))<n?o=l:s=l-1;return t.slice(0,o)+a}}function o0(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function X2(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Pl(e)+"px "+o0(e,t)}function EN(e){var t=e.baseline,n=Pl(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*xf(e):t==="line-bottom"?.29*n-.5*xf(e):0)}const dxe={left:"start",center:"middle",right:"end"},db=new Jn;function Z2(e){var t=e.x||0,n=e.y||0,i=e.radius||0,a;return i&&(a=(e.theta||0)-Ic,t+=i*Math.cos(a),n+=i*Math.sin(a)),db.x1=t,db.y1=n,db}function fxe(e,t){var n=t.dx||0,i=(t.dy||0)+EN(t),a=Z2(t),r=a.x1,o=a.y1,s=t.angle||0,l;e("text-anchor",dxe[t.align]||"start"),s?(l=Zc(r,o)+" "+yN(s),(n||i)&&(l+=" "+Zc(n,i))):l=Zc(r+n,o+i),e("transform",l)}function SN(e,t,n){var i=jr.height(t),a=t.align,r=Z2(t),o=r.x1,s=r.y1,l=t.dx||0,u=(t.dy||0)+EN(t)-Math.round(.8*i),d=r0(t),c;if(ye(d)?(i+=xf(t)*(d.length-1),c=d.reduce((g,v)=>Math.max(g,jr.width(t,v)),0)):c=jr.width(t,d),a==="center"?l-=c/2:a==="right"&&(l-=c),e.set(l+=o,u+=s,l+c,u+i),t.angle&&!n)e.rotate(t.angle*_f,o,s);else if(n===2)return e.rotatedPoints(t.angle*_f,o,s);return e}function cxe(e,t,n){xs(t,i=>{var a=i.opacity==null?1:i.opacity,r,o,s,l,u,d,c;if(!(n&&!n.intersects(i.bounds)||a===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=X2(i),e.textAlign=i.align||"left",r=Z2(i),o=r.x1,s=r.y1,i.angle&&(e.save(),e.translate(o,s),e.rotate(i.angle*_f),o=s=0),o+=i.dx||0,s+=(i.dy||0)+EN(i),d=r0(i),tm(e,i),ye(d))for(u=xf(i),l=0;l<d.length;++l)c=wf(i,d[l]),i.fill&&xk(e,i,a)&&e.fillText(c,o,s),i.stroke&&nm(e,i,a)&&e.strokeText(c,o,s),s+=u;else c=wf(i,d),i.fill&&xk(e,i,a)&&e.fillText(c,o,s),i.stroke&&nm(e,i,a)&&e.strokeText(c,o,s);i.angle&&e.restore()}})}function hxe(e,t,n,i,a,r){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Z2(t),s=o.x1,l=o.y1,u=SN(db,t,1),d=-t.angle*_f,c=Math.cos(d),g=Math.sin(d),v=c*a-g*r+(s-c*s+g*l),b=g*a+c*r+(l-g*s-c*l);return u.contains(v,b)}function pxe(e,t){const n=SN(db,e,2);return og(t,n[0],n[1],n[2],n[3])||og(t,n[0],n[1],n[4],n[5])||og(t,n[4],n[5],n[6],n[7])||og(t,n[2],n[3],n[6],n[7])}var gxe={type:"text",tag:"text",nested:!1,attr:fxe,bound:SN,draw:cxe,pick:G2(hxe),isect:pxe},mxe=bN("trail",p0e,A0e),Hr={arc:E0e,area:O0e,group:U0e,image:G0e,line:H0e,path:Z0e,rect:Q0e,rule:axe,shape:rxe,symbol:oxe,text:gxe,trail:mxe};function iC(e,t,n){var i=Hr[e.mark.marktype],a=t||i.bound;return i.nested&&(e=e.mark),a(e.bounds||(e.bounds=new Jn),e,n)}var xj={mark:null};function ZX(e,t,n){var i=Hr[e.marktype],a=i.bound,r=e.items,o=r&&r.length,s,l,u,d;if(i.nested)return o?u=r[0]:(xj.mark=e,u=xj),d=iC(u,a,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new Jn,o)for(s=0,l=r.length;s<l;++s)t.union(iC(r[s],a,n));return e.bounds=t}const yxe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function JX(e,t){return JSON.stringify(e,yxe,t)}function KX(e){const t=typeof e=="string"?JSON.parse(e):e;return QX(t)}function QX(e){var t=e.marktype,n=e.items,i,a,r;if(n)for(a=0,r=n.length;a<r;++a)i=t?"mark":"group",n[a][i]=e,n[a].zindex&&(n[a][i].zdirty=!0),(t||i)==="group"&&QX(n[a]);return t&&ZX(e),e}class eZ{constructor(t){arguments.length?this.root=KX(t):(this.root=wj({marktype:"group",name:"root",role:"frame"}),this.root.items=[new V2(this.root)])}toJSON(t){return JX(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const a=wj(t,n);return n.items[i]=a,a.zindex&&(a.group.zdirty=!0),a}}function wj(e,t){const n={bounds:new Jn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Ud(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function TN(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,a=n.length;i<a;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function ii(e,t,n,i){var a=e.childNodes[t],r;return(!a||a.tagName.toLowerCase()!==n.toLowerCase())&&(r=a||null,a=Ud(e.ownerDocument,n,i),e.insertBefore(a,r)),a}function yo(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function tZ(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function J2(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function vxe(e,t,n,i){var a=e&&e.mark,r,o;if(a&&(r=Hr[a.marktype]).tip){for(o=J2(t,n),o[0]-=i[0],o[1]-=i[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=r.tip(a.items,o)}return e}let AN=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||S2(),this._tooltip=n||bxe}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let a=t?t.length:0;--a>=0;)if(t[a].type===n&&(!i||t[a].handler===i))return a;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const a in n)i.push(...n[a]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(a=>{const r=new MouseEvent(t.type,t),o=Ud(null,"a");for(const s in a)o.setAttribute(s,a[s]);o.dispatchEvent(r)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=vxe(n,t,this.canvas(),this._origin);const a=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,a)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),a=this._origin,r=t.bounds,o=r.width(),s=r.height();let l=r.x1+a[0]+i.left,u=r.y1+a[1]+i.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:o,height:s,left:l,top:u,right:l+o,bottom:u+s}}};function bxe(e,t,n,i){e.element().setAttribute("title",i||"")}class s0{constructor(t){this._el=null,this._bgcolor=null,this._loader=new LX(t)}initialize(t,n,i,a,r){return this._el=t,this.resize(n,i,a,r)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,a){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=a||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,a=i._loader[t](n);if(!i._ready){const r=i._call;i._ready=i._loader.ready().then(o=>{o&&r(),i._ready=null})}return a}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const _xe="keydown",xxe="keypress",wxe="keyup",nZ="dragenter",K1="dragleave",iZ="dragover",aC="pointerdown",kxe="pointerup",$k="pointermove",Q1="pointerout",aZ="pointerover",rC="mousedown",$xe="mouseup",rZ="mousemove",Ek="mouseout",oZ="mouseover",Sk="click",Exe="dblclick",Sxe="wheel",sZ="mousewheel",Tk="touchstart",Ak="touchmove",Ok="touchend",Txe=[_xe,xxe,wxe,nZ,K1,iZ,aC,kxe,$k,Q1,aZ,rC,$xe,rZ,Ek,oZ,Sk,Exe,Sxe,sZ,Tk,Ak,Ok],oC=$k,fb=Ek,sC=Sk;class l0 extends AN{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Txe,this.pointermove=$j([$k,rZ],[aZ,oZ],[Q1,Ek]),this.dragover=$j([iZ],[nZ],[K1]),this.pointerout=Ej([Q1,Ek]),this.dragleave=Ej([K1])}initialize(t,n,i){return this._canvas=t&&TN(t,"canvas"),[Sk,rC,aC,$k,Q1,K1].forEach(a=>kj(this,a)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(sZ,t)}pointerdown(t){this._down=this._active,this.fire(aC,t)}mousedown(t){this._down=this._active,this.fire(rC,t)}click(t){this._down===this._active&&(this.fire(Sk,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Tk,t,!0)}touchmove(t){this.fire(Ak,t,!0)}touchend(t){this.fire(Ok,t,!0),this._touch=null}fire(t,n,i){const a=i?this._touch:this._active,r=this._handlers[t];if(n.vegaType=t,t===sC&&a&&a.href?this.handleHref(n,a,a.href):(t===oC||t===fb)&&this.handleTooltip(n,a,t!==fb),r)for(let o=0,s=r.length;o<s;++o)r[o].handler.call(this._obj,n,a)}on(t,n){const i=this.eventName(t),a=this._handlers;return this._handlerIndex(a[i],t,n)<0&&(kj(this,t),(a[i]||(a[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),a=this._handlers[i],r=this._handlerIndex(a,t,n);return r>=0&&a.splice(r,1),this}pickEvent(t){const n=J2(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,a,r){const o=this.context();return Hr[t.marktype].pick.call(this,o,t,n,i,a,r)}}const Axe=e=>e===Tk||e===Ak||e===Ok?[Tk,Ak,Ok]:[e];function kj(e,t){Axe(t).forEach(n=>Oxe(e,n))}function Oxe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function Fv(e,t,n){t.forEach(i=>e.fire(i,n))}function $j(e,t,n){return function(i){const a=this._active,r=this.pickEvent(i);r===a?Fv(this,e,i):((!a||!a.exit)&&Fv(this,n,i),this._active=r,Fv(this,t,i),Fv(this,e,i))}}function Ej(e){return function(t){Fv(this,e,t),this._active=null}}function Dxe(){return typeof window<"u"&&window.devicePixelRatio||1}function Cxe(e,t,n,i,a,r){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),l=o?Dxe():a;e.width=t*l,e.height=n*l;for(const u in r)s[u]=r[u];return o&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=l,s.setTransform(l,0,0,l,l*i[0],l*i[1]),e}class Dk extends s0{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Jn,this._tempb=new Jn}initialize(t,n,i,a,r,o){return this._options=o||{},this._canvas=this._options.externalContext?null:uf(1,1,this._options.type),t&&this._canvas&&(yo(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,a,r)}resize(t,n,i,a){if(super.resize(t,n,i,a),this._canvas)Cxe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const r=this._options.externalContext;r||me("CanvasRenderer is missing a valid canvas or context"),r.scale(this._scale,this._scale),r.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),a=this._origin,r=this._width,o=this._height,s=this._dirty,l=Rxe(a,r,o);i.save();const u=this._redraw||s.empty()?(this._redraw=!1,l.expand(1)):Ixe(i,l.intersect(s),a);return this.clear(-a[0],-a[1],r,o),this.draw(i,t,u,n),i.restore(),s.clear(),this}draw(t,n,i,a){if(n.marktype!=="group"&&a!=null&&!a.includes(n.marktype))return;const r=Hr[n.marktype];n.clip&&D0e(t,n),r.draw.call(this,t,n,i,a),n.clip&&t.restore()}clear(t,n,i,a){const r=this._options,o=this.context();r.type!=="pdf"&&!r.externalContext&&o.clearRect(t,n,i,a),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,i,a))}}const Rxe=(e,t,n)=>new Jn().set(0,0,t,n).translate(-e[0],-e[1]);function Ixe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class lZ extends AN{constructor(t,n){super(t,n);const i=this;i._hrefHandler=eA(i,(a,r)=>{r&&r.href&&i.handleHref(a,r,r.href)}),i._tooltipHandler=eA(i,(a,r)=>{i.handleTooltip(a,r,a.type!==fb)})}initialize(t,n,i){let a=this._svg;return a&&(a.removeEventListener(sC,this._hrefHandler),a.removeEventListener(oC,this._tooltipHandler),a.removeEventListener(fb,this._tooltipHandler)),this._svg=a=t&&TN(t,"svg"),a&&(a.addEventListener(sC,this._hrefHandler),a.addEventListener(oC,this._tooltipHandler),a.addEventListener(fb,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),a=this._handlers;if(this._handlerIndex(a[i],t,n)<0){const o={type:t,handler:n,listener:eA(this,n)};(a[i]||(a[i]=[])).push(o),this._svg&&this._svg.addEventListener(i,o.listener)}return this}off(t,n){const i=this.eventName(t),a=this._handlers[i],r=this._handlerIndex(a,t,n);return r>=0&&(this._svg&&this._svg.removeEventListener(i,a[r].listener),a.splice(r,1)),this}}const eA=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},uZ="aria-hidden",ON="aria-label",DN="role",CN="aria-roledescription",dZ="graphics-object",RN="graphics-symbol",fZ=(e,t,n)=>({[DN]:e,[CN]:t,[ON]:n||void 0}),Pxe=bs(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Sj={axis:{desc:"axis",caption:Lxe},legend:{desc:"legend",caption:Mxe},"title-text":{desc:"title",caption:e=>`Title text '${Aj(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Aj(e)}'`}},Tj={ariaRole:DN,ariaRoleDescription:CN,description:ON};function cZ(e,t){const n=t.aria===!1;if(e(uZ,n||void 0),n||t.description==null)for(const i in Tj)e(Tj[i],void 0);else{const i=t.mark.marktype;e(ON,t.description),e(DN,t.ariaRole||(i==="group"?dZ:RN)),e(CN,t.ariaRoleDescription||`${i} mark`)}}function hZ(e){return e.aria===!1?{[uZ]:!0}:Pxe[e.role]?null:Sj[e.role]?Nxe(e,Sj[e.role]):Fxe(e)}function Fxe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return fZ(n?dZ:RN,`${t} mark container`,e.description)}function Nxe(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return fZ(t.role||RN,t.desc,n.description||i(n))}catch{return null}}function Aj(e){return Le(e.text).join(" ")}function Lxe(e){const t=e.datum,n=e.orient,i=t.title?pZ(e):null,a=e.context,r=a.scales[t.scale].value,o=a.dataflow.locale(),s=r.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Qg(s)?"discrete":s} scale with ${TX(o,r,e)}`}function Mxe(e){const t=e.datum,n=t.title?pZ(e):null,i=`${t.type||""} legend`.trim(),a=t.scales,r=Object.keys(a),o=e.context,s=o.scales[a[r[0]]].value,l=o.dataflow.locale();return qxe(i)+(n?` titled '${n}'`:"")+` for ${zxe(r)} with ${TX(l,s,e)}`}function pZ(e){try{return Le(At(e.items).items[0].text).join(" ")}catch{return null}}function zxe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+At(e)}function qxe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const gZ=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),jxe=e=>gZ(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function IN(){let e="",t="",n="";const i=[],a=()=>t=n="",r=l=>{t&&(e+=`${t}>${n}`,a()),i.push(l)},o=(l,u)=>(u!=null&&(t+=` ${l}="${jxe(u)}"`),s),s={open(l){r(l),t="<"+l;for(var u=arguments.length,d=new Array(u>1?u-1:0),c=1;c<u;c++)d[c-1]=arguments[c];for(const g of d)for(const v in g)o(v,g[v]);return s},close(){const l=i.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,a(),s},attr:o,text:l=>(n+=gZ(l),s),toString:()=>e};return s}const mZ=e=>yZ(IN(),e)+"";function yZ(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let a=0;a<i;++a)e.attr(n[a].name,n[a].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):yZ(e,i)}return e.close()}const Ck={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Rk={blend:"mix-blend-mode"},vZ={fill:"none","stroke-miterlimit":10},nv=0,Oj="http://www.w3.org/2000/xmlns/",ni=s_.xmlns;class PN extends s0{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,a,r){return this._defs={},this._clearDefs(),t&&(this._svg=ii(t,0,"svg",ni),this._svg.setAttributeNS(Oj,"xmlns",ni),this._svg.setAttributeNS(Oj,"xmlns:xlink",s_["xmlns:xlink"]),this._svg.setAttribute("version",s_.version),this._svg.setAttribute("class","marks"),yo(t,1),this._root=ii(this._svg,nv,"g",ni),Bd(this._root,vZ),yo(this._svg,nv+1)),this.background(this._bgcolor),super.initialize(t,n,i,a,r)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,a){return super.resize(t,n,i,a),this._svg&&(Bd(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=ii(t,nv,"rect",ni),Bd(i,{width:this._width,height:this._height,fill:n}));const a=mZ(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),a}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),yo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,a,r,o,s,l,u;for(s=0,l=t.length;s<l;++s)if(i=t[s],a=i.mark,a.marktype!==r&&(r=a.marktype,o=Hr[r]),a.zdirty&&a.dirty!==n&&(this._dirtyAll=!1,Dj(i,n),a.items.forEach(d=>{d.dirty=n})),!a.zdirty){if(i.exit){o.nested&&a.items.length?(u=a.items[0],u._svg&&this._update(o,u._svg,u)):i._svg&&(u=i._svg.parentNode,u&&u.removeChild(i._svg)),i._svg=null;continue}i=o.nested?a.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,Dj(i,n)):this._update(o,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,a){if(!this.isDirty(n))return n._svg;const r=this._svg,o=n.marktype,s=Hr[o],l=n.interactive===!1?"none":null,u=s.tag==="g",d=Cj(n,t,i,"g",r);if(o!=="group"&&a!=null&&!a.includes(o))return yo(d,0),n._svg;d.setAttribute("class",tZ(n));const c=hZ(n);for(const x in c)Ca(d,x,c[x]);u||Ca(d,"pointer-events",l),Ca(d,"clip-path",n.clip?fN(this,n,n.group):null);let g=null,v=0;const b=x=>{const k=this.isDirty(x),w=Cj(x,d,g,s.tag,r);k&&(this._update(s,w,x),u&&Vxe(this,w,x,a)),g=w,++v};return s.nested?n.items.length&&b(n.items[0]):xs(n,b),yo(d,v),d}_update(t,n,i){_u=n,ra=n.__values__,cZ(cb,i),t.attr(cb,i,this);const a=Gxe[t.type];a&&a.call(this,t,n,i),_u&&this.style(_u,i)}style(t,n){if(n!=null){for(const i in Ck){let a=i==="font"?o0(n):n[i];if(a===ra[i])continue;const r=Ck[i];a==null?t.removeAttribute(r):(lN(a)&&(a=OX(a,this._defs.gradient,bZ())),t.setAttribute(r,a+"")),ra[i]=a}for(const i in Rk)ew(t,Rk[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,a=0;for(const r in n.gradient)i||(n.el=i=ii(t,nv+1,"defs",ni)),a=Uxe(i,n.gradient[r],a);for(const r in n.clipping)i||(n.el=i=ii(t,nv+1,"defs",ni)),a=Bxe(i,n.clipping[r],a);i&&(a===0?(t.removeChild(i),n.el=null):yo(i,a))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Dj(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Uxe(e,t,n){let i,a,r;if(t.gradient==="radial"){let o=ii(e,n++,"pattern",ni);Bd(o,{id:_k+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ii(o,0,"rect",ni),Bd(o,{width:1,height:1,fill:`url(${bZ()}#${t.id})`}),e=ii(e,n++,"radialGradient",ni),Bd(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ii(e,n++,"linearGradient",ni),Bd(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,a=t.stops.length;i<a;++i)r=ii(e,i,"stop",ni),r.setAttribute("offset",t.stops[i].offset),r.setAttribute("stop-color",t.stops[i].color);return yo(e,i),n}function Bxe(e,t,n){let i;return e=ii(e,n,"clipPath",ni),e.setAttribute("id",t.id),t.path?(i=ii(e,0,"path",ni),i.setAttribute("d",t.path)):(i=ii(e,0,"rect",ni),Bd(i,{x:0,y:0,width:t.width,height:t.height})),yo(e,1),n+1}function Vxe(e,t,n,i){t=t.lastChild.previousSibling;let a,r=0;xs(n,o=>{a=e.mark(t,o,a,i),++r}),yo(t,1+r)}function Cj(e,t,n,i,a){let r=e._svg,o;if(!r&&(o=t.ownerDocument,r=Ud(o,i,ni),e._svg=r,e.mark&&(r.__data__=e,r.__values__={fill:"default"},i==="g"))){const s=Ud(o,"path",ni);r.appendChild(s),s.__data__=e;const l=Ud(o,"g",ni);r.appendChild(l),l.__data__=e;const u=Ud(o,"path",ni);r.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(r.ownerSVGElement!==a||Wxe(r,n))&&t.insertBefore(r,n?n.nextSibling:t.firstChild),r}function Wxe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let _u=null,ra=null;const Gxe={group(e,t,n){const i=_u=t.childNodes[2];ra=i.__values__,e.foreground(cb,n,this),ra=t.__values__,_u=t.childNodes[1],e.content(cb,n,this);const a=_u=t.childNodes[0];e.background(cb,n,this);const r=n.mark.interactive===!1?"none":null;if(r!==ra.events&&(Ca(i,"pointer-events",r),Ca(a,"pointer-events",r),ra.events=r),n.strokeForeground&&n.stroke){const o=n.fill;Ca(i,"display",null),this.style(a,n),Ca(a,"stroke",null),o&&(n.fill=null),ra=i.__values__,this.style(i,n),o&&(n.fill=o),_u=null}else Ca(i,"display","none")},image(e,t,n){n.smooth===!1?(ew(t,"image-rendering","optimizeSpeed"),ew(t,"image-rendering","pixelated")):ew(t,"image-rendering",null)},text(e,t,n){const i=r0(n);let a,r,o,s;ye(i)?(r=i.map(l=>wf(n,l)),a=r.join(`
`),a!==ra.text&&(yo(t,0),o=t.ownerDocument,s=xf(n),r.forEach((l,u)=>{const d=Ud(o,"tspan",ni);d.__data__=n,d.textContent=l,u&&(d.setAttribute("x",0),d.setAttribute("dy",s)),t.appendChild(d)}),ra.text=a)):(r=wf(n,i),r!==ra.text&&(t.textContent=r,ra.text=r)),Ca(t,"font-family",o0(n)),Ca(t,"font-size",Pl(n)+"px"),Ca(t,"font-style",n.fontStyle),Ca(t,"font-variant",n.fontVariant),Ca(t,"font-weight",n.fontWeight)}};function cb(e,t,n){t!==ra[e]&&(n?Hxe(_u,e,t,n):Ca(_u,e,t),ra[e]=t)}function ew(e,t,n){n!==ra[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ra[t]=n)}function Bd(e,t){for(const n in t)Ca(e,n,t[n])}function Ca(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Hxe(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function bZ(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class _Z extends s0{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=IN();n.open("svg",dt({},s_,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",vZ,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=Hr[n.marktype],a=i.tag,r=[cZ,i.attr];t.open("g",{class:tZ(n),"clip-path":n.clip?fN(this,n,n.group):null},hZ(n),{"pointer-events":a!=="g"&&n.interactive===!1?"none":null});const o=s=>{const l=this.href(s);if(l&&t.open("a",l),t.open(a,this.attr(n,s,r,a!=="g"?a:null)),a==="text"){const u=r0(s);if(ye(u)){const d={x:0,dy:xf(s)};for(let c=0;c<u.length;++c)t.open("tspan",c?d:null).text(wf(s,u[c])).close()}else t.text(wf(s,u))}else if(a==="g"){const u=s.strokeForeground,d=s.fill,c=s.stroke;u&&c&&(s.stroke=null),t.open("path",this.attr(n,s,i.background,"bgrect")).close(),t.open("g",this.attr(n,s,i.content)),xs(s,g=>this.mark(t,g)),t.close(),u&&c?(d&&(s.fill=null),s.stroke=c,t.open("path",this.attr(n,s,i.foreground,"bgrect")).close(),d&&(s.fill=d)):t.open("path",this.attr(n,s,i.foreground,"bgfore")).close()}t.close(),l&&t.close()};return i.nested?n.items&&n.items.length&&o(n.items[0]):xs(n,o),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(a=>{a["xlink:href"]=a.href,a.href=null,(this._hrefs||(this._hrefs={}))[n]=a})}return null}attr(t,n,i,a){const r={},o=(s,l,u,d)=>{r[d||s]=l};return Array.isArray(i)?i.forEach(s=>s(o,n,this)):i(o,n,this),a&&Yxe(r,n,t,a,this._defs),r}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const r in n){const o=n[r],s=o.stops;o.gradient==="radial"?(t.open("pattern",{id:_k+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),t.close(),t.open("radialGradient",{id:r,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:r,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<s.length;++l)t.open("stop",{offset:s[l].offset,"stop-color":s[l].color}).close();t.close()}for(const r in i){const o=i[r];t.open("clipPath",{id:r}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function Yxe(e,t,n,i,a){let r;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(r=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=o0(t),e["font-size"]=Pl(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in Ck){let s=t[o];const l=Ck[o];s==="transparent"&&(l==="fill"||l==="stroke")||s!=null&&(lN(s)&&(s=OX(s,a.gradient,"")),e[l]=s)}for(const o in Rk){const s=t[o];s!=null&&(r=r||[],r.push(`${Rk[o]}: ${s};`))}return r&&(e.style=r.join(" ")),e}const ts={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Xxe(e){ts.svgMarkTypes=e.svgMarkTypes??["text"],ts.svgOnTop=e.svgOnTop??!0,ts.debug=e.debug??!1}class lC extends s0{constructor(t){super(t),this._svgRenderer=new PN(t),this._canvasRenderer=new Dk(t)}initialize(t,n,i,a,r){this._root_el=ii(t,0,"div");const o=ii(this._root_el,0,"div"),s=ii(this._root_el,1,"div");return this._root_el.style.position="relative",ts.debug||(o.style.height="100%",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.height="100%",s.style.width="100%"),this._svgEl=ts.svgOnTop?s:o,this._canvasEl=ts.svgOnTop?o:s,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,a,r),this._svgRenderer.initialize(this._svgEl,n,i,a,r),super.initialize(t,n,i,a,r)}dirty(t){return ts.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const a=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(r=>!ts.svgMarkTypes.includes(r));this._svgRenderer.render(t,ts.svgMarkTypes),this._canvasRenderer.render(t,a)}resize(t,n,i,a){return super.resize(t,n,i,a),this._svgRenderer.resize(t,n,i,a),this._canvasRenderer.resize(t,n,i,a),this}background(t){return ts.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class xZ extends l0{constructor(t,n){super(t,n)}initialize(t,n,i){const a=ii(ii(t,0,"div"),ts.svgOnTop?0:1,"div");return super.initialize(a,n,i)}}const wZ="canvas",kZ="hybrid",$Z="png",EZ="svg",SZ="none",Vd={Canvas:wZ,PNG:$Z,SVG:EZ,Hybrid:kZ,None:SZ},gh={};gh[wZ]=gh[$Z]={renderer:Dk,headless:Dk,handler:l0};gh[EZ]={renderer:PN,headless:_Z,handler:lZ};gh[kZ]={renderer:lC,headless:lC,handler:xZ};gh[SZ]={};function K2(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(gh[e]=t,this):gh[e]}function TZ(e,t,n){const i=[],a=new Jn().union(t),r=e.marktype;return r?AZ(e,a,n,i):r==="group"?OZ(e,a,n,i):me("Intersect scene must be mark node or group item.")}function AZ(e,t,n,i){if(Zxe(e,t,n)){const a=e.items,r=e.marktype,o=a.length;let s=0;if(r==="group")for(;s<o;++s)OZ(a[s],t,n,i);else for(const l=Hr[r].isect;s<o;++s){const u=a[s];DZ(u,t,l)&&i.push(u)}}return i}function Zxe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function OZ(e,t,n,i){n&&n(e.mark)&&DZ(e,t,Hr.group.isect)&&i.push(e);const a=e.items,r=a&&a.length;if(r){const o=e.x||0,s=e.y||0;t.translate(-o,-s);for(let l=0;l<r;++l)AZ(a[l],t,n,i);t.translate(o,s)}return i}function DZ(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const tA=new Jn;function CZ(e){const t=e.clip;if(ft(t))t(i0(tA.clear()));else if(t)tA.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(tA)}const Jxe=1e-9;function FN(e,t,n){return e===t?!0:n==="path"?RZ(e,t):e instanceof Date&&t instanceof Date?+e==+t:Lt(e)&&Lt(t)?Math.abs(e-t)<=Jxe:!e||!t||!Fe(e)&&!Fe(t)?e==t:Kxe(e,t)}function RZ(e,t){return FN(em(e),em(t))}function Kxe(e,t){var n=Object.keys(e),i=Object.keys(t),a,r;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),r=n.length-1;r>=0;r--)if(n[r]!=i[r])return!1;for(r=n.length-1;r>=0;r--)if(a=n[r],!FN(e[a],t[a],a))return!1;return typeof e==typeof t}function Qxe(){NX(),k_e()}const im="top",os="left",us="right",kf="bottom",e1e="top-left",t1e="top-right",n1e="bottom-left",i1e="bottom-right",NN="start",uC="middle",Pa="end",a1e="x",r1e="y",Q2="group",LN="axis",MN="title",o1e="frame",s1e="scope",zN="legend",IZ="row-header",PZ="row-footer",FZ="row-title",NZ="column-header",LZ="column-footer",MZ="column-title",l1e="padding",u1e="symbol",zZ="fit",qZ="fit-x",jZ="fit-y",d1e="pad",qN="none",jx="all",dC="each",jN="flush",Wd="column",Gd="row";function UZ(e){he.call(this,null,e)}De(UZ,he,{transform(e,t){const n=t.dataflow,i=e.mark,a=i.marktype,r=Hr[a],o=r.bound;let s=i.bounds,l;if(r.nested)i.items.length&&n.dirty(i.items[0]),s=Ux(i,o),i.items.forEach(u=>{u.bounds.clear().union(s)});else if(a===Q2||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),s.clear(),i.items.forEach(u=>s.union(Ux(u,o))),i.role){case LN:case zN:case MN:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{s.union(Ux(u,o))}),t.visit(t.MOD,u=>{l=l||s.alignsWith(u.bounds),n.dirty(u),s.union(Ux(u,o))}),l&&(s.clear(),i.items.forEach(u=>s.union(u.bounds)));return CZ(i),t.modifies("bounds")}});function Ux(e,t,n){return t(e.bounds.clear(),e,n)}const Rj=":vega_identifier:";function UN(e){he.call(this,0,e)}UN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};De(UN,he,{transform(e,t){const n=f1e(t.dataflow),i=e.as;let a=n.value;return t.visit(t.ADD,r=>r[i]=r[i]||++a),n.set(this.value=a),t}});function f1e(e){return e._signals[Rj]||(e._signals[Rj]=e.add(0))}function BZ(e){he.call(this,null,e)}De(BZ,he,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,c1e(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===Q2?V2:B2;return t.visit(t.ADD,a=>i.call(a,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function c1e(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function VZ(e){he.call(this,null,e)}const Ij={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,a)=>!a||!WZ(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},WZ=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Pj=(e,t)=>{for(var n=1,i=e.length,a=e[0].bounds,r;n<i;a=r,++n)if(WZ(a,r=e[n].bounds,t))return!0},h1e=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},p1e=(e,t,n)=>{var i=e.range(),a=new Jn;return t===im||t===kf?a.set(i[0],-1/0,i[1],1/0):a.set(-1/0,i[0],1/0,i[1]),a.expand(n||1),r=>a.encloses(r.bounds)},Fj=e=>(e.forEach(t=>t.opacity=1),e),Nj=(e,t)=>e.reflow(t.modified()).modifies("opacity");De(VZ,he,{transform(e,t){const n=Ij[e.method]||Ij.parity,i=e.separation||0;let a=t.materialize(t.SOURCE).source,r,o;if(!a||!a.length)return;if(!e.method)return e.modified("method")&&(Fj(a),t=Nj(t,e)),t;if(a=a.filter(h1e),!a.length)return;if(e.sort&&(a=a.slice().sort(e.sort)),r=Fj(a),t=Nj(t,e),r.length>=3&&Pj(r,i)){do r=n(r,i);while(r.length>=3&&Pj(r,i));r.length<3&&!At(a).opacity&&(r.length>1&&(At(r).opacity=0),At(a).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=p1e(e.boundScale,e.boundOrient,+e.boundTolerance),a.forEach(l=>{o(l)||(l.opacity=0)}));const s=r[0].mark.bounds.clear();return a.forEach(l=>{l.opacity&&s.union(l.bounds)}),t}});function GZ(e){he.call(this,null,e)}De(GZ,he,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const aa=new Jn;function sg(e,t,n){return e[t]===n?0:(e[t]=n,1)}function g1e(e){var t=e.items[0].orient;return t===os||t===us}function m1e(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function y1e(e,t,n,i){var a=t.items[0],r=a.datum,o=a.translate!=null?a.translate:.5,s=a.orient,l=m1e(r),u=a.range,d=a.offset,c=a.position,g=a.minExtent,v=a.maxExtent,b=r.title&&a.items[l[2]].items[0],x=a.titlePadding,k=a.bounds,w=b&&$N(b),E=0,T=0,O,D;switch(aa.clear().union(k),k.clear(),(O=l[0])>-1&&k.union(a.items[O].bounds),(O=l[1])>-1&&k.union(a.items[O].bounds),s){case im:E=c||0,T=-d,D=Math.max(g,Math.min(v,-k.y1)),k.add(0,-D).add(u,0),b&&Bx(e,b,D,x,w,0,-1,k);break;case os:E=-d,T=c||0,D=Math.max(g,Math.min(v,-k.x1)),k.add(-D,0).add(0,u),b&&Bx(e,b,D,x,w,1,-1,k);break;case us:E=n+d,T=c||0,D=Math.max(g,Math.min(v,k.x2)),k.add(0,0).add(D,u),b&&Bx(e,b,D,x,w,1,1,k);break;case kf:E=c||0,T=i+d,D=Math.max(g,Math.min(v,k.y2)),k.add(0,0).add(u,D),b&&Bx(e,b,D,x,0,0,1,k);break;default:E=a.x,T=a.y}return Xu(k.translate(E,T),a),sg(a,"x",E+o)|sg(a,"y",T+o)&&(a.bounds=aa,e.dirty(a),a.bounds=k,e.dirty(a)),a.mark.bounds.clear().union(k)}function Bx(e,t,n,i,a,r,o,s){const l=t.bounds;if(t.auto){const u=o*(n+a+i);let d=0,c=0;e.dirty(t),r?d=(t.x||0)-(t.x=u):c=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-d,-c)),e.dirty(t)}s.union(l)}const Lj=(e,t)=>Math.floor(Math.min(e,t)),Mj=(e,t)=>Math.ceil(Math.max(e,t));function v1e(e){var t=e.items,n=t.length,i=0,a,r;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(a=t[i],r=a.items,a.marktype===Q2)switch(a.role){case LN:case zN:case MN:break;case IZ:o.rowheaders.push(...r);break;case PZ:o.rowfooters.push(...r);break;case NZ:o.colheaders.push(...r);break;case LZ:o.colfooters.push(...r);break;case FZ:o.rowtitle=r[0];break;case MZ:o.coltitle=r[0];break;default:o.marks.push(...r)}return o}function b1e(e){return new Jn().set(0,0,e.width||0,e.height||0)}function _1e(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function yn(e,t,n){const i=Fe(e)?e[t]:e;return i??(n!==void 0?n:0)}function zj(e){return e<0?Math.ceil(-e):0}function HZ(e,t,n){var i=!n.nodirty,a=n.bounds===jN?b1e:_1e,r=aa.set(0,0,0,0),o=yn(n.align,Wd),s=yn(n.align,Gd),l=yn(n.padding,Wd),u=yn(n.padding,Gd),d=n.columns||t.length,c=d<=0?1:Math.ceil(t.length/d),g=t.length,v=Array(g),b=Array(d),x=0,k=Array(g),w=Array(c),E=0,T=Array(g),O=Array(g),D=Array(g),P,R,M,q,H,z,Q,te,W,j,K;for(R=0;R<d;++R)b[R]=0;for(R=0;R<c;++R)w[R]=0;for(R=0;R<g;++R)z=t[R],H=D[R]=a(z),z.x=z.x||0,T[R]=0,z.y=z.y||0,O[R]=0,M=R%d,q=~~(R/d),x=Math.max(x,Q=Math.ceil(H.x2)),E=Math.max(E,te=Math.ceil(H.y2)),b[M]=Math.max(b[M],Q),w[q]=Math.max(w[q],te),v[R]=l+zj(H.x1),k[R]=u+zj(H.y1),i&&e.dirty(t[R]);for(R=0;R<g;++R)R%d===0&&(v[R]=0),R<d&&(k[R]=0);if(o===dC)for(M=1;M<d;++M){for(K=0,R=M;R<g;R+=d)K<v[R]&&(K=v[R]);for(R=M;R<g;R+=d)v[R]=K+b[M-1]}else if(o===jx){for(K=0,R=0;R<g;++R)R%d&&K<v[R]&&(K=v[R]);for(R=0;R<g;++R)R%d&&(v[R]=K+x)}else for(o=!1,M=1;M<d;++M)for(R=M;R<g;R+=d)v[R]+=b[M-1];if(s===dC)for(q=1;q<c;++q){for(K=0,R=q*d,P=R+d;R<P;++R)K<k[R]&&(K=k[R]);for(R=q*d;R<P;++R)k[R]=K+w[q-1]}else if(s===jx){for(K=0,R=d;R<g;++R)K<k[R]&&(K=k[R]);for(R=d;R<g;++R)k[R]=K+E}else for(s=!1,q=1;q<c;++q)for(R=q*d,P=R+d;R<P;++R)k[R]+=w[q-1];for(W=0,R=0;R<g;++R)W=v[R]+(R%d?W:0),T[R]+=W-t[R].x;for(M=0;M<d;++M)for(j=0,R=M;R<g;R+=d)j+=k[R],O[R]+=j-t[R].y;if(o&&yn(n.center,Wd)&&c>1)for(R=0;R<g;++R)H=o===jx?x:b[R%d],W=H-D[R].x2-t[R].x-T[R],W>0&&(T[R]+=W/2);if(s&&yn(n.center,Gd)&&d!==1)for(R=0;R<g;++R)H=s===jx?E:w[~~(R/d)],j=H-D[R].y2-t[R].y-O[R],j>0&&(O[R]+=j/2);for(R=0;R<g;++R)r.union(D[R].translate(T[R],O[R]));switch(W=yn(n.anchor,a1e),j=yn(n.anchor,r1e),yn(n.anchor,Wd)){case Pa:W-=r.width();break;case uC:W-=r.width()/2}switch(yn(n.anchor,Gd)){case Pa:j-=r.height();break;case uC:j-=r.height()/2}for(W=Math.round(W),j=Math.round(j),r.clear(),R=0;R<g;++R)t[R].mark.bounds.clear();for(R=0;R<g;++R)z=t[R],z.x+=T[R]+=W,z.y+=O[R]+=j,r.union(z.mark.bounds.union(z.bounds.translate(T[R],O[R]))),i&&e.dirty(z);return r}function x1e(e,t,n){var i=v1e(t),a=i.marks,r=n.bounds===jN?w1e:k1e,o=n.offset,s=n.columns||a.length,l=s<=0?1:Math.ceil(a.length/s),u=l*s,d,c,g,v,b,x,k;const w=HZ(e,a,n);w.empty()&&w.set(0,0,0,0),i.rowheaders&&(x=yn(n.headerBand,Gd,null),d=Vx(e,i.rowheaders,a,s,l,-yn(o,"rowHeader"),Lj,0,r,"x1",0,s,1,x)),i.colheaders&&(x=yn(n.headerBand,Wd,null),c=Vx(e,i.colheaders,a,s,s,-yn(o,"columnHeader"),Lj,1,r,"y1",0,1,s,x)),i.rowfooters&&(x=yn(n.footerBand,Gd,null),g=Vx(e,i.rowfooters,a,s,l,yn(o,"rowFooter"),Mj,0,r,"x2",s-1,s,1,x)),i.colfooters&&(x=yn(n.footerBand,Wd,null),v=Vx(e,i.colfooters,a,s,s,yn(o,"columnFooter"),Mj,1,r,"y2",u-s,1,s,x)),i.rowtitle&&(b=yn(n.titleAnchor,Gd),k=yn(o,"rowTitle"),k=b===Pa?g+k:d-k,x=yn(n.titleBand,Gd,.5),qj(e,i.rowtitle,k,0,w,x)),i.coltitle&&(b=yn(n.titleAnchor,Wd),k=yn(o,"columnTitle"),k=b===Pa?v+k:c-k,x=yn(n.titleBand,Wd,.5),qj(e,i.coltitle,k,1,w,x))}function w1e(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function k1e(e,t){return e.bounds[t]}function Vx(e,t,n,i,a,r,o,s,l,u,d,c,g,v){var b=n.length,x=0,k=0,w,E,T,O,D,P,R,M,q;if(!b)return x;for(w=d;w<b;w+=c)n[w]&&(x=o(x,l(n[w],u)));if(!t.length)return x;for(t.length>a&&(e.warn("Grid headers exceed limit: "+a),t=t.slice(0,a)),x+=r,E=0,O=t.length;E<O;++E)e.dirty(t[E]),t[E].mark.bounds.clear();for(w=d,E=0,O=t.length;E<O;++E,w+=c){for(P=t[E],D=P.mark.bounds,T=w;T>=0&&(R=n[T])==null;T-=g);s?(M=v==null?R.x:Math.round(R.bounds.x1+v*R.bounds.width()),q=x):(M=x,q=v==null?R.y:Math.round(R.bounds.y1+v*R.bounds.height())),D.union(P.bounds.translate(M-(P.x||0),q-(P.y||0))),P.x=M,P.y=q,e.dirty(P),k=o(k,D[u])}return k}function qj(e,t,n,i,a,r){if(t){e.dirty(t);var o=n,s=n;i?o=Math.round(a.x1+r*a.width()):s=Math.round(a.y1+r*a.height()),t.bounds.translate(o-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=s,e.dirty(t)}}function $1e(e,t){const n=e[t]||{};return(i,a)=>n[i]!=null?n[i]:e[i]!=null?e[i]:a}function E1e(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function S1e(e,t,n,i,a,r,o){const s=$1e(n,t),l=E1e(e,s("offset",0)),u=s("anchor",NN),d=u===Pa?1:u===uC?.5:0,c={align:dC,bounds:s("bounds",jN),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case os:c.anchor={x:Math.floor(i.x1)-l,column:Pa,y:d*(o||i.height()+2*i.y1),row:u};break;case us:c.anchor={x:Math.ceil(i.x2)+l,y:d*(o||i.height()+2*i.y1),row:u};break;case im:c.anchor={y:Math.floor(a.y1)-l,row:Pa,x:d*(r||a.width()+2*a.x1),column:u};break;case kf:c.anchor={y:Math.ceil(a.y2)+l,x:d*(r||a.width()+2*a.x1),column:u};break;case e1e:c.anchor={x:l,y:l};break;case t1e:c.anchor={x:r-l,y:l,column:Pa};break;case n1e:c.anchor={x:l,y:o-l,row:Pa};break;case i1e:c.anchor={x:r-l,y:o-l,column:Pa,row:Pa};break}return c}function T1e(e,t){var n=t.items[0],i=n.datum,a=n.orient,r=n.bounds,o=n.x,s=n.y,l,u;return n._bounds?n._bounds.clear().union(r):n._bounds=r.clone(),r.clear(),O1e(e,n,n.items[0].items[0]),r=A1e(n,r),l=2*n.padding,u=2*n.padding,r.empty()||(l=Math.ceil(r.width()+l),u=Math.ceil(r.height()+u)),i.type===u1e&&D1e(n.items[0].items[0].items[0].items),a!==qN&&(n.x=o=0,n.y=s=0),n.width=l,n.height=u,Xu(r.set(o,s,o+l,s+u),n),n.mark.bounds.clear().union(r),n}function A1e(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function O1e(e,t,n){var i=t.padding,a=i-n.x,r=i-n.y;if(!t.datum.title)(a||r)&&iv(e,n,a,r);else{var o=t.items[1].items[0],s=o.anchor,l=t.titlePadding||0,u=i-o.x,d=i-o.y;switch(o.orient){case os:a+=Math.ceil(o.bounds.width())+l;break;case us:case kf:break;default:r+=o.bounds.height()+l}switch((a||r)&&iv(e,n,a,r),o.orient){case os:d+=Rp(t,n,o,s,1,1);break;case us:u+=Rp(t,n,o,Pa,0,0)+l,d+=Rp(t,n,o,s,1,1);break;case kf:u+=Rp(t,n,o,s,0,0),d+=Rp(t,n,o,Pa,-1,0,1)+l;break;default:u+=Rp(t,n,o,s,0,0)}(u||d)&&iv(e,o,u,d),(u=Math.round(o.bounds.x1-i))<0&&(iv(e,n,-u,0),iv(e,o,-u,0))}}function Rp(e,t,n,i,a,r,o){const s=e.datum.type!=="symbol",l=n.datum.vgrad,u=s&&(r||!l)&&!o?t.items[0]:t,d=u.bounds[a?"y2":"x2"]-e.padding,c=l&&r?d:0,g=l&&r?0:d,v=a<=0?0:$N(n);return Math.round(i===NN?c:i===Pa?g-v:.5*(d-v))}function iv(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function D1e(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function C1e(e,t,n,i,a){var r=t.items[0],o=r.frame,s=r.orient,l=r.anchor,u=r.offset,d=r.padding,c=r.items[0].items[0],g=r.items[1]&&r.items[1].items[0],v=s===os||s===us?i:n,b=0,x=0,k=0,w=0,E=0,T;if(o!==Q2?s===os?(b=a.y2,v=a.y1):s===us?(b=a.y1,v=a.y2):(b=a.x1,v=a.x2):s===os&&(b=i,v=0),T=l===NN?b:l===Pa?v:(b+v)/2,g&&g.text){switch(s){case im:case kf:E=c.bounds.height()+d;break;case os:w=c.bounds.width()+d;break;case us:w=-c.bounds.width()-d;break}aa.clear().union(g.bounds),aa.translate(w-(g.x||0),E-(g.y||0)),sg(g,"x",w)|sg(g,"y",E)&&(e.dirty(g),g.bounds.clear().union(aa),g.mark.bounds.clear().union(aa),e.dirty(g)),aa.clear().union(g.bounds)}else aa.clear();switch(aa.union(c.bounds),s){case im:x=T,k=a.y1-aa.height()-u;break;case os:x=a.x1-aa.width()-u,k=T;break;case us:x=a.x2+aa.width()+u,k=T;break;case kf:x=T,k=a.y2+u;break;default:x=r.x,k=r.y}return sg(r,"x",x)|sg(r,"y",k)&&(aa.translate(x,k),e.dirty(r),r.bounds.clear().union(aa),t.bounds.clear().union(aa),e.dirty(r)),r.bounds}function YZ(e){he.call(this,null,e)}De(YZ,he,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&x1e(n,i,e.layout),I1e(n,i,e)}),R1e(e.mark.group)?t.reflow():t}});function R1e(e){return e&&e.mark.role!=="legend-entry"}function I1e(e,t,n){var i=t.items,a=Math.max(0,t.width||0),r=Math.max(0,t.height||0),o=new Jn().set(0,0,a,r),s=o.clone(),l=o.clone(),u=[],d,c,g,v,b,x;for(b=0,x=i.length;b<x;++b)switch(c=i[b],c.role){case LN:v=g1e(c)?s:l,v.union(y1e(e,c,a,r));break;case MN:d=c;break;case zN:u.push(T1e(e,c));break;case o1e:case s1e:case IZ:case PZ:case FZ:case NZ:case LZ:case MZ:s.union(c.bounds),l.union(c.bounds);break;default:o.union(c.bounds)}if(u.length){const k={};u.forEach(w=>{g=w.orient||us,g!==qN&&(k[g]||(k[g]=[])).push(w)});for(const w in k){const E=k[w];HZ(e,E,S1e(E,w,n.legends,s,l,a,r))}u.forEach(w=>{const E=w.bounds;if(E.equals(w._bounds)||(w.bounds=w._bounds,e.dirty(w),w.bounds=E,e.dirty(w)),n.autosize&&(n.autosize.type===zZ||n.autosize.type===qZ||n.autosize.type===jZ))switch(w.orient){case os:case us:o.add(E.x1,0).add(E.x2,0);break;case im:case kf:o.add(0,E.y1).add(0,E.y2)}else o.union(E)})}o.union(s).union(l),d&&o.union(C1e(e,d,a,r,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),P1e(e,t,o,n)}function P1e(e,t,n,i){const a=i.autosize||{},r=a.type;if(e._autosize<1||!r)return;let o=e._width,s=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),c=Math.max(0,Math.ceil(-n.y1));const g=Math.max(0,Math.ceil(n.x2-l)),v=Math.max(0,Math.ceil(n.y2-d));if(a.contains===l1e){const b=e.padding();o-=b.left+b.right,s-=b.top+b.bottom}r===qN?(u=0,c=0,l=o,d=s):r===zZ?(l=Math.max(0,o-u-g),d=Math.max(0,s-c-v)):r===qZ?(l=Math.max(0,o-u-g),s=d+c+v):r===jZ?(o=l+u+g,d=Math.max(0,s-c-v)):r===d1e&&(o=l+u+g,s=d+c+v),e._resizeView(o,s,l,d,[u,c],a.resize)}const F1e=Object.freeze(Object.defineProperty({__proto__:null,bound:UZ,identifier:UN,mark:BZ,overlap:VZ,render:GZ,viewlayout:YZ},Symbol.toStringTag,{value:"Module"}));function XZ(e){he.call(this,null,e)}De(XZ,he,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=this.value,r=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,s=oN(r,o,e.minstep),l=e.format||wX(n,r,s,e.formatSpecifier,e.formatType,!!e.values),u=e.values?xX(r,e.values,s):sN(r,s);return a&&(i.rem=a),a=u.map((d,c)=>qt({index:c/(u.length-1||1),value:d,label:l(d)})),e.extra&&a.length&&a.push(qt({index:-1,extra:{value:a[0].value},label:""})),i.source=a,i.add=a,this.value=a,i}});function ZZ(e){he.call(this,null,e)}function N1e(){return qt({})}function L1e(e){const t=zm().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}De(ZZ,he,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=e.item||N1e,r=e.key||Ze,o=this.value;return ye(i.encode)&&(i.encode=null),o&&(e.modified("key")||t.modified(r))&&me("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=L1e(r)),t.visit(t.ADD,s=>{const l=r(s);let u=o.get(l);u?u.exit?(o.empty--,i.add.push(u)):i.mod.push(u):(u=a(s),o.set(l,u),i.add.push(u)),u.datum=s,u.exit=!1}),t.visit(t.MOD,s=>{const l=r(s),u=o.get(l);u&&(u.datum=s,i.mod.push(u))}),t.visit(t.REM,s=>{const l=r(s),u=o.get(l);s===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),i}});function JZ(e){he.call(this,null,e)}De(JZ,he,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,a=e.encoders,r=t.encode;if(ye(r))if(n.changed()||r.every(c=>a[c]))r=r[0],n.encode=null;else return t.StopPropagation;var o=r==="enter",s=a.update||$d,l=a.enter||$d,u=a.exit||$d,d=(r&&!o?a[r]:s)||$d;if(t.changed(t.ADD)&&(t.visit(t.ADD,c=>{l(c,e),s(c,e)}),n.modifies(l.output),n.modifies(s.output),d!==$d&&d!==s&&(t.visit(t.ADD,c=>{d(c,e)}),n.modifies(d.output))),t.changed(t.REM)&&u!==$d&&(t.visit(t.REM,c=>{u(c,e)}),n.modifies(u.output)),o||d!==$d){const c=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(c,g=>{const v=l(g,e)||i;(d(g,e)||v)&&n.mod.push(g)}),n.mod.length&&n.modifies(l.output)):t.visit(c,g=>{(d(g,e)||i)&&n.mod.push(g)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function KZ(e){he.call(this,[],e)}De(KZ,he,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=this.value,r=e.type||G1,o=e.scale,s=+e.limit,l=oN(o,e.count==null?5:e.count,e.minstep),u=!!e.values||r===G1,d=e.format||SX(n,o,l,r,e.formatSpecifier,e.formatType,u),c=e.values||EX(o,l),g,v,b,x,k;return a&&(i.rem=a),r===G1?(s&&c.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),a=c.slice(0,s-1),k=!0):a=c,ft(b=e.size)?(!e.values&&o(a[0])===0&&(a=a.slice(1)),x=a.reduce((w,E)=>Math.max(w,b(E,e)),0)):b=_a(x=b||8),a=a.map((w,E)=>qt({index:E,label:d(w,E,a),value:w,offset:x,size:b(w,e)})),k&&(k=c[a.length],a.push(qt({index:a.length,label:`${c.length-a.length} entries`,value:k,offset:x,size:b(k,e)})))):r===d_e?(g=o.domain(),v=vX(o,g[0],At(g)),c.length<3&&!e.values&&g[0]!==At(g)&&(c=[g[0],At(g)]),a=c.map((w,E)=>qt({index:E,label:d(w,E,c),value:w,perc:v(w)}))):(b=c.length-1,v=x_e(o),a=c.map((w,E)=>qt({index:E,label:d(w,E,c),value:w,perc:E?v(w):0,perc2:E===b?1:v(c[E+1])}))),i.source=a,i.add=a,this.value=a,i}});const M1e=e=>e.source.x,z1e=e=>e.source.y,q1e=e=>e.target.x,j1e=e=>e.target.y;function BN(e){he.call(this,{},e)}BN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};De(BN,he,{transform(e,t){var n=e.sourceX||M1e,i=e.sourceY||z1e,a=e.targetX||q1e,r=e.targetY||j1e,o=e.as||"path",s=e.orient||"vertical",l=e.shape||"line",u=jj.get(l+"-"+s)||jj.get(l);return u||me("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[o]=u(n(d),i(d),a(d),r(d))}),t.reflow(e.modified()).modifies(o)}});const QZ=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,U1e=(e,t,n,i)=>QZ(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),eJ=(e,t,n,i)=>{var a=n-e,r=i-t,o=Math.hypot(a,r)/2,s=180*Math.atan2(r,a)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+s+" 0 1 "+n+","+i},B1e=(e,t,n,i)=>eJ(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),tJ=(e,t,n,i)=>{const a=n-e,r=i-t,o=.2*(a+r),s=.2*(r-a);return"M"+e+","+t+"C"+(e+o)+","+(t+s)+" "+(n+s)+","+(i-o)+" "+n+","+i},V1e=(e,t,n,i)=>tJ(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),W1e=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,G1e=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,H1e=(e,t,n,i)=>{const a=Math.cos(e),r=Math.sin(e),o=Math.cos(n),s=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*a+","+t*r+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*o+","+t*s+"L"+i*o+","+i*s},Y1e=(e,t,n,i)=>{const a=(e+n)/2;return"M"+e+","+t+"C"+a+","+t+" "+a+","+i+" "+n+","+i},X1e=(e,t,n,i)=>{const a=(t+i)/2;return"M"+e+","+t+"C"+e+","+a+" "+n+","+a+" "+n+","+i},Z1e=(e,t,n,i)=>{const a=Math.cos(e),r=Math.sin(e),o=Math.cos(n),s=Math.sin(n),l=(t+i)/2;return"M"+t*a+","+t*r+"C"+l*a+","+l*r+" "+l*o+","+l*s+" "+i*o+","+i*s},jj=zm({line:QZ,"line-radial":U1e,arc:eJ,"arc-radial":B1e,curve:tJ,"curve-radial":V1e,"orthogonal-horizontal":W1e,"orthogonal-vertical":G1e,"orthogonal-radial":H1e,"diagonal-horizontal":Y1e,"diagonal-vertical":X1e,"diagonal-radial":Z1e});function VN(e){he.call(this,null,e)}VN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};De(VN,he,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],a=n[1],r=e.field||Fm,o=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(r),d=u.length,c=o,g=(s-o)/QI(u),v=Lr(d),b,x,k;for(e.sort&&v.sort((w,E)=>u[w]-u[E]),b=0;b<d;++b)k=u[v[b]],x=l[v[b]],x[i]=c,x[a]=c+=k*g;return this.value=u,t.reflow(e.modified()).modifies(n)}});const J1e=5;function K1e(e){const t=e.type;return!e.bins&&(t===Jg||t===Z_||t===J_)}function nJ(e){return iN(e)&&e!==yl}const Q1e=bs(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function iJ(e){he.call(this,null,e),this.modified(!0)}De(iJ,he,{transform(e,t){var n=t.dataflow,i=this.value,a=ewe(e);(!i||a!==i.type)&&(this.value=i=Mt(a)());for(a in e)if(!Q1e[a]){if(a==="padding"&&nJ(i.type))continue;ft(i[a])?i[a](e[a]):n.warn("Unsupported scale property: "+a)}return owe(i,e,rwe(i,e,nwe(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ewe(e){var t=e.type,n="",i;return t===yl?yl+"-"+Jg:(twe(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?yl+"-":i===3?Bm+"-":""),(n+t||Jg).toLowerCase())}function twe(e){const t=e.type;return iN(t)&&t!==hh&&t!==ph&&(e.scheme||e.range&&e.range.length&&e.range.every(Ne))}function nwe(e,t,n){const i=iwe(e,t.domainRaw,n);if(i>-1)return i;var a=t.domain,r=e.type,o=t.zero||t.zero===void 0&&K1e(e),s,l;if(!a)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(a=a.slice()).length-1||1,o&&(a[0]>0&&(a[0]=0),a[s]<0&&(a[s]=0)),t.domainMin!=null&&(a[0]=t.domainMin),t.domainMax!=null&&(a[s]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>a[s]?s+1:l<a[0]?0:s;u!==s&&n.warn("Scale domainMid exceeds domain min or max.",l),a.splice(u,0,l)}return nJ(r)&&t.padding&&a[0]!==At(a)&&(a=awe(r,a,t.range,t.padding,t.exponent,t.constant)),e.domain(aJ(r,a,n)),r===QF&&e.unknown(t.domainImplicit?OD:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&oN(e,t.nice)||null),a.length}function iwe(e,t,n){return t?(e.domain(aJ(e.type,t,n)),t.length):-1}function awe(e,t,n,i,a,r){var o=Math.abs(At(n)-n[0]),s=o/(o-2*i),l=e===ju?WP(t,null,s):e===J_?mk(t,null,s,.5):e===Z_?mk(t,null,s,a||1):e===M2?GP(t,null,s,r||1):VP(t,null,s);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function aJ(e,t,n){if(hX(e)){var i=Math.abs(t.reduce((a,r)=>a+(r<0?-1:r>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+Oe(t))}return t}function rwe(e,t,n){let i=t.bins;if(i&&!ye(i)){const a=e.domain(),r=a[0],o=At(a),s=i.step;let l=i.start==null?r:i.start,u=i.stop==null?o:i.stop;s||me("Scale bins parameter missing step property."),l<r&&(l=s*Math.ceil(r/s)),u>o&&(u=s*Math.floor(o/s)),i=Lr(l,u+s/2,s)}return i?e.bins=i:e.bins&&delete e.bins,e.type===eN&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function owe(e,t,n){var i=e.type,a=t.round||!1,r=t.range;if(t.rangeStep!=null)r=swe(i,t,n);else if(t.scheme&&(r=lwe(i,t,n),ft(r))){if(e.interpolator)return e.interpolator(r);me(`Scale type ${i} does not support interpolating color schemes.`)}if(r&&pX(i))return e.interpolator(j2(fC(r,t.reverse),t.interpolate,t.interpolateGamma));r&&t.interpolate&&e.interpolate?e.interpolate(aN(t.interpolate,t.interpolateGamma)):ft(e.round)?e.round(a):ft(e.rangeRound)&&e.interpolate(a?q_:Pf),r&&e.range(fC(r,t.reverse))}function swe(e,t,n){e!==sX&&e!==ZD&&me("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,a=e===ZD?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*KF(n,a,i)]}function lwe(e,t,n){var i=t.schemeExtent,a,r;return ye(t.scheme)?r=j2(t.scheme,t.interpolate,t.interpolateGamma):(a=t.scheme.toLowerCase(),r=rN(a),r||me(`Unrecognized scheme name: ${t.scheme}`)),n=e===q2?n+1:e===eN?n-1:e===Kg||e===z2?+t.schemeCount||J1e:n,pX(e)?Uj(r,i,t.reverse):ft(r)?yX(Uj(r,i),n):e===QF?r:r.slice(0,n)}function Uj(e,t,n){return ft(e)&&(t||n)?mX(e,fC(t||[0,1],n)):e}function fC(e,t){return t?e.slice().reverse():e}function rJ(e){he.call(this,null,e)}De(rJ,he,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(qh(e.sort)),this.modified(n),t}});const Bj="zero",oJ="center",sJ="normalize",lJ=["y0","y1"];function WN(e){he.call(this,null,e)}WN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Bj,values:[Bj,oJ,sJ]},{name:"as",type:"string",array:!0,length:2,default:lJ}]};De(WN,he,{transform(e,t){var n=e.as||lJ,i=n[0],a=n[1],r=qh(e.sort),o=e.field||Fm,s=e.offset===oJ?uwe:e.offset===sJ?dwe:fwe,l,u,d,c;for(l=cwe(t.source,e.groupby,r,o),u=0,d=l.length,c=l.max;u<d;++u)s(l[u],c,o,i,a);return t.reflow(e.modified()).modifies(n)}});function uwe(e,t,n,i,a){for(var r=(t-e.sum)/2,o=e.length,s=0,l;s<o;++s)l=e[s],l[i]=r,l[a]=r+=Math.abs(n(l))}function dwe(e,t,n,i,a){for(var r=1/e.sum,o=0,s=e.length,l=0,u=0,d;l<s;++l)d=e[l],d[i]=o,d[a]=o=r*(u+=Math.abs(n(d)))}function fwe(e,t,n,i,a){for(var r=0,o=0,s=e.length,l=0,u,d;l<s;++l)d=e[l],u=+n(d),u<0?(d[i]=o,d[a]=o+=u):(d[i]=r,d[a]=r+=u)}function cwe(e,t,n,i){var a=[],r=x=>x(d),o,s,l,u,d,c,g,v,b;if(t==null)a.push(e.slice());else for(o={},s=0,l=e.length;s<l;++s)d=e[s],c=t.map(r),g=o[c],g||(o[c]=g=[],a.push(g)),g.push(d);for(c=0,b=0,u=a.length;c<u;++c){for(g=a[c],s=0,v=0,l=g.length;s<l;++s)v+=Math.abs(i(g[s]));g.sum=v,v>b&&(b=v),n&&g.sort(n)}return a.max=b,a}const hwe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:XZ,datajoin:ZZ,encode:JZ,legendentries:KZ,linkpath:BN,pie:VN,scale:iJ,sortitems:rJ,stack:WN},Symbol.toStringTag,{value:"Module"}));var ut=1e-6,uJ=1e-12,_t=Math.PI,Mn=_t/2,Vj=_t/4,Yr=_t*2,oa=180/_t,kn=_t/180,Ut=Math.abs,Wm=Math.atan,Uu=Math.atan2,gt=Math.cos,dJ=Math.exp,Ik=Math.log,nA=Math.pow,lt=Math.sin,xo=Math.sign||function(e){return e>0?1:e<0?-1:0},xr=Math.sqrt,GN=Math.tan;function fJ(e){return e>1?0:e<-1?_t:Math.acos(e)}function Fo(e){return e>1?Mn:e<-1?-Mn:Math.asin(e)}function wo(){}function Pk(e,t){e&&Gj.hasOwnProperty(e.type)&&Gj[e.type](e,t)}var Wj={Feature:function(e,t){Pk(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,a=n.length;++i<a;)Pk(n[i].geometry,t)}},Gj={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){cC(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)cC(n[i],t,0)},Polygon:function(e,t){Hj(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)Hj(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,a=n.length;++i<a;)Pk(n[i],t)}};function cC(e,t,n){var i=-1,a=e.length-n,r;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Hj(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)cC(e[n],t,1);t.polygonEnd()}function Up(e,t){e&&Wj.hasOwnProperty(e.type)?Wj[e.type](e,t):Pk(e,t)}function hC(e){return[Uu(e[1],e[0]),Fo(e[2])]}function am(e){var t=e[0],n=e[1],i=gt(n);return[i*gt(t),i*lt(t),lt(n)]}function Wx(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Fk(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function iA(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Gx(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function pC(e){var t=xr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function gC(e,t){function n(i,a){return i=e(i,a),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,a){return i=t.invert(i,a),i&&e.invert(i[0],i[1])}),n}function mC(e,t){return Ut(e)>_t&&(e-=Math.round(e/Yr)*Yr),[e,t]}mC.invert=mC;function cJ(e,t,n){return(e%=Yr)?t||n?gC(Xj(e),Zj(t,n)):Xj(e):t||n?Zj(t,n):mC}function Yj(e){return function(t,n){return t+=e,Ut(t)>_t&&(t-=Math.round(t/Yr)*Yr),[t,n]}}function Xj(e){var t=Yj(e);return t.invert=Yj(-e),t}function Zj(e,t){var n=gt(e),i=lt(e),a=gt(t),r=lt(t);function o(s,l){var u=gt(l),d=gt(s)*u,c=lt(s)*u,g=lt(l),v=g*n+d*i;return[Uu(c*a-v*r,d*n-g*i),Fo(v*a+c*r)]}return o.invert=function(s,l){var u=gt(l),d=gt(s)*u,c=lt(s)*u,g=lt(l),v=g*a-c*r;return[Uu(c*a+g*r,d*n+v*i),Fo(v*n-d*i)]},o}function pwe(e){e=cJ(e[0]*kn,e[1]*kn,e.length>2?e[2]*kn:0);function t(n){return n=e(n[0]*kn,n[1]*kn),n[0]*=oa,n[1]*=oa,n}return t.invert=function(n){return n=e.invert(n[0]*kn,n[1]*kn),n[0]*=oa,n[1]*=oa,n},t}function gwe(e,t,n,i,a,r){if(n){var o=gt(t),s=lt(t),l=i*n;a==null?(a=t+i*Yr,r=t-l/2):(a=Jj(o,a),r=Jj(o,r),(i>0?a<r:a>r)&&(a+=i*Yr));for(var u,d=a;i>0?d>r:d<r;d-=l)u=hC([o,-s*gt(d),-s*lt(d)]),e.point(u[0],u[1])}}function Jj(e,t){t=am(t),t[0]-=e,pC(t);var n=fJ(-t[1]);return((-t[2]<0?-n:n)+Yr-ut)%Yr}function hJ(){var e=[],t;return{point:function(n,i,a){t.push([n,i,a])},lineStart:function(){e.push(t=[])},lineEnd:wo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function tw(e,t){return Ut(e[0]-t[0])<ut&&Ut(e[1]-t[1])<ut}function Hx(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function pJ(e,t,n,i,a){var r=[],o=[],s,l;if(e.forEach(function(b){if(!((x=b.length-1)<=0)){var x,k=b[0],w=b[x],E;if(tw(k,w)){if(!k[2]&&!w[2]){for(a.lineStart(),s=0;s<x;++s)a.point((k=b[s])[0],k[1]);a.lineEnd();return}w[0]+=2*ut}r.push(E=new Hx(k,b,null,!0)),o.push(E.o=new Hx(k,null,E,!1)),r.push(E=new Hx(w,b,null,!1)),o.push(E.o=new Hx(w,null,E,!0))}}),!!r.length){for(o.sort(t),Kj(r),Kj(o),s=0,l=o.length;s<l;++s)o[s].e=n=!n;for(var u=r[0],d,c;;){for(var g=u,v=!0;g.v;)if((g=g.n)===u)return;d=g.z,a.lineStart();do{if(g.v=g.o.v=!0,g.e){if(v)for(s=0,l=d.length;s<l;++s)a.point((c=d[s])[0],c[1]);else i(g.x,g.n.x,1,a);g=g.n}else{if(v)for(d=g.p.z,s=d.length-1;s>=0;--s)a.point((c=d[s])[0],c[1]);else i(g.x,g.p.x,-1,a);g=g.p}g=g.o,d=g.z,v=!v}while(!g.v);a.lineEnd()}}}function Kj(e){if(t=e.length){for(var t,n=0,i=e[0],a;++n<t;)i.n=a=e[n],a.p=i,i=a;i.n=a=e[0],a.p=i}}function aA(e){return Ut(e[0])<=_t?e[0]:xo(e[0])*((Ut(e[0])+_t)%Yr-_t)}function mwe(e,t){var n=aA(t),i=t[1],a=lt(i),r=[lt(n),-gt(n),0],o=0,s=0,l=new fa;a===1?i=Mn+ut:a===-1&&(i=-Mn-ut);for(var u=0,d=e.length;u<d;++u)if(g=(c=e[u]).length)for(var c,g,v=c[g-1],b=aA(v),x=v[1]/2+Vj,k=lt(x),w=gt(x),E=0;E<g;++E,b=O,k=P,w=R,v=T){var T=c[E],O=aA(T),D=T[1]/2+Vj,P=lt(D),R=gt(D),M=O-b,q=M>=0?1:-1,H=q*M,z=H>_t,Q=k*P;if(l.add(Uu(Q*q*lt(H),w*R+Q*gt(H))),o+=z?M+q*Yr:M,z^b>=n^O>=n){var te=Fk(am(v),am(T));pC(te);var W=Fk(r,te);pC(W);var j=(z^M>=0?-1:1)*Fo(W[2]);(i>j||i===j&&(te[0]||te[1]))&&(s+=z^M>=0?1:-1)}}return(o<-ut||o<ut&&l<-uJ)^s&1}function gJ(e,t,n,i){return function(a){var r=t(a),o=hJ(),s=t(o),l=!1,u,d,c,g={point:v,lineStart:x,lineEnd:k,polygonStart:function(){g.point=w,g.lineStart=E,g.lineEnd=T,d=[],u=[]},polygonEnd:function(){g.point=v,g.lineStart=x,g.lineEnd=k,d=n2(d);var O=mwe(u,i);d.length?(l||(a.polygonStart(),l=!0),pJ(d,vwe,O,n,a)):O&&(l||(a.polygonStart(),l=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),l&&(a.polygonEnd(),l=!1),d=u=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function v(O,D){e(O,D)&&a.point(O,D)}function b(O,D){r.point(O,D)}function x(){g.point=b,r.lineStart()}function k(){g.point=v,r.lineEnd()}function w(O,D){c.push([O,D]),s.point(O,D)}function E(){s.lineStart(),c=[]}function T(){w(c[0][0],c[0][1]),s.lineEnd();var O=s.clean(),D=o.result(),P,R=D.length,M,q,H;if(c.pop(),u.push(c),c=null,!!R){if(O&1){if(q=D[0],(M=q.length-1)>0){for(l||(a.polygonStart(),l=!0),a.lineStart(),P=0;P<M;++P)a.point((H=q[P])[0],H[1]);a.lineEnd()}return}R>1&&O&2&&D.push(D.pop().concat(D.shift())),d.push(D.filter(ywe))}}return g}}function ywe(e){return e.length>1}function vwe(e,t){return((e=e.x)[0]<0?e[1]-Mn-ut:Mn-e[1])-((t=t.x)[0]<0?t[1]-Mn-ut:Mn-t[1])}const Qj=gJ(function(){return!0},bwe,xwe,[-_t,-Mn]);function bwe(e){var t=NaN,n=NaN,i=NaN,a;return{lineStart:function(){e.lineStart(),a=1},point:function(r,o){var s=r>0?_t:-_t,l=Ut(r-t);Ut(l-_t)<ut?(e.point(t,n=(n+o)/2>0?Mn:-Mn),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(r,n),a=0):i!==s&&l>=_t&&(Ut(t-i)<ut&&(t-=i*ut),Ut(r-s)<ut&&(r-=s*ut),n=_we(t,n,r,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),a=0),e.point(t=r,n=o),i=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-a}}}function _we(e,t,n,i){var a,r,o=lt(e-n);return Ut(o)>ut?Wm((lt(t)*(r=gt(i))*lt(n)-lt(i)*(a=gt(t))*lt(e))/(a*r*o)):(t+i)/2}function xwe(e,t,n,i){var a;if(e==null)a=n*Mn,i.point(-_t,a),i.point(0,a),i.point(_t,a),i.point(_t,0),i.point(_t,-a),i.point(0,-a),i.point(-_t,-a),i.point(-_t,0),i.point(-_t,a);else if(Ut(e[0]-t[0])>ut){var r=e[0]<t[0]?_t:-_t;a=n*r/2,i.point(-r,a),i.point(0,a),i.point(r,a)}else i.point(t[0],t[1])}function wwe(e){var t=gt(e),n=2*kn,i=t>0,a=Ut(t)>ut;function r(d,c,g,v){gwe(v,e,n,g,d,c)}function o(d,c){return gt(d)*gt(c)>t}function s(d){var c,g,v,b,x;return{lineStart:function(){b=v=!1,x=1},point:function(k,w){var E=[k,w],T,O=o(k,w),D=i?O?0:u(k,w):O?u(k+(k<0?_t:-_t),w):0;if(!c&&(b=v=O)&&d.lineStart(),O!==v&&(T=l(c,E),(!T||tw(c,T)||tw(E,T))&&(E[2]=1)),O!==v)x=0,O?(d.lineStart(),T=l(E,c),d.point(T[0],T[1])):(T=l(c,E),d.point(T[0],T[1],2),d.lineEnd()),c=T;else if(a&&c&&i^O){var P;!(D&g)&&(P=l(E,c,!0))&&(x=0,i?(d.lineStart(),d.point(P[0][0],P[0][1]),d.point(P[1][0],P[1][1]),d.lineEnd()):(d.point(P[1][0],P[1][1]),d.lineEnd(),d.lineStart(),d.point(P[0][0],P[0][1],3)))}O&&(!c||!tw(c,E))&&d.point(E[0],E[1]),c=E,v=O,g=D},lineEnd:function(){v&&d.lineEnd(),c=null},clean:function(){return x|(b&&v)<<1}}}function l(d,c,g){var v=am(d),b=am(c),x=[1,0,0],k=Fk(v,b),w=Wx(k,k),E=k[0],T=w-E*E;if(!T)return!g&&d;var O=t*w/T,D=-t*E/T,P=Fk(x,k),R=Gx(x,O),M=Gx(k,D);iA(R,M);var q=P,H=Wx(R,q),z=Wx(q,q),Q=H*H-z*(Wx(R,R)-1);if(!(Q<0)){var te=xr(Q),W=Gx(q,(-H-te)/z);if(iA(W,R),W=hC(W),!g)return W;var j=d[0],K=c[0],se=d[1],ee=c[1],oe;K<j&&(oe=j,j=K,K=oe);var Y=K-j,Z=Ut(Y-_t)<ut,ae=Z||Y<ut;if(!Z&&ee<se&&(oe=se,se=ee,ee=oe),ae?Z?se+ee>0^W[1]<(Ut(W[0]-j)<ut?se:ee):se<=W[1]&&W[1]<=ee:Y>_t^(j<=W[0]&&W[0]<=K)){var ne=Gx(q,(-H+te)/z);return iA(ne,R),[W,hC(ne)]}}}function u(d,c){var g=i?e:_t-e,v=0;return d<-g?v|=1:d>g&&(v|=2),c<-g?v|=4:c>g&&(v|=8),v}return gJ(o,s,r,i?[0,-e]:[-_t,e-_t])}function kwe(e,t,n,i,a,r){var o=e[0],s=e[1],l=t[0],u=t[1],d=0,c=1,g=l-o,v=u-s,b;if(b=n-o,!(!g&&b>0)){if(b/=g,g<0){if(b<d)return;b<c&&(c=b)}else if(g>0){if(b>c)return;b>d&&(d=b)}if(b=a-o,!(!g&&b<0)){if(b/=g,g<0){if(b>c)return;b>d&&(d=b)}else if(g>0){if(b<d)return;b<c&&(c=b)}if(b=i-s,!(!v&&b>0)){if(b/=v,v<0){if(b<d)return;b<c&&(c=b)}else if(v>0){if(b>c)return;b>d&&(d=b)}if(b=r-s,!(!v&&b<0)){if(b/=v,v<0){if(b>c)return;b>d&&(d=b)}else if(v>0){if(b<d)return;b<c&&(c=b)}return d>0&&(e[0]=o+d*g,e[1]=s+d*v),c<1&&(t[0]=o+c*g,t[1]=s+c*v),!0}}}}}var Nv=1e9,Yx=-Nv;function mJ(e,t,n,i){function a(u,d){return e<=u&&u<=n&&t<=d&&d<=i}function r(u,d,c,g){var v=0,b=0;if(u==null||(v=o(u,c))!==(b=o(d,c))||l(u,d)<0^c>0)do g.point(v===0||v===3?e:n,v>1?i:t);while((v=(v+c+4)%4)!==b);else g.point(d[0],d[1])}function o(u,d){return Ut(u[0]-e)<ut?d>0?0:3:Ut(u[0]-n)<ut?d>0?2:1:Ut(u[1]-t)<ut?d>0?1:0:d>0?3:2}function s(u,d){return l(u.x,d.x)}function l(u,d){var c=o(u,1),g=o(d,1);return c!==g?c-g:c===0?d[1]-u[1]:c===1?u[0]-d[0]:c===2?u[1]-d[1]:d[0]-u[0]}return function(u){var d=u,c=hJ(),g,v,b,x,k,w,E,T,O,D,P,R={point:M,lineStart:Q,lineEnd:te,polygonStart:H,polygonEnd:z};function M(j,K){a(j,K)&&d.point(j,K)}function q(){for(var j=0,K=0,se=v.length;K<se;++K)for(var ee=v[K],oe=1,Y=ee.length,Z=ee[0],ae,ne,U=Z[0],X=Z[1];oe<Y;++oe)ae=U,ne=X,Z=ee[oe],U=Z[0],X=Z[1],ne<=i?X>i&&(U-ae)*(i-ne)>(X-ne)*(e-ae)&&++j:X<=i&&(U-ae)*(i-ne)<(X-ne)*(e-ae)&&--j;return j}function H(){d=c,g=[],v=[],P=!0}function z(){var j=q(),K=P&&j,se=(g=n2(g)).length;(K||se)&&(u.polygonStart(),K&&(u.lineStart(),r(null,null,1,u),u.lineEnd()),se&&pJ(g,s,j,r,u),u.polygonEnd()),d=u,g=v=b=null}function Q(){R.point=W,v&&v.push(b=[]),D=!0,O=!1,E=T=NaN}function te(){g&&(W(x,k),w&&O&&c.rejoin(),g.push(c.result())),R.point=M,O&&d.lineEnd()}function W(j,K){var se=a(j,K);if(v&&b.push([j,K]),D)x=j,k=K,w=se,D=!1,se&&(d.lineStart(),d.point(j,K));else if(se&&O)d.point(j,K);else{var ee=[E=Math.max(Yx,Math.min(Nv,E)),T=Math.max(Yx,Math.min(Nv,T))],oe=[j=Math.max(Yx,Math.min(Nv,j)),K=Math.max(Yx,Math.min(Nv,K))];kwe(ee,oe,e,t,n,i)?(O||(d.lineStart(),d.point(ee[0],ee[1])),d.point(oe[0],oe[1]),se||d.lineEnd(),P=!1):se&&(d.lineStart(),d.point(j,K),P=!1)}E=j,T=K,O=se}return R}}const l_=e=>e;var rA=new fa,yC=new fa,yJ,vJ,vC,bC,hu={point:wo,lineStart:wo,lineEnd:wo,polygonStart:function(){hu.lineStart=$we,hu.lineEnd=Swe},polygonEnd:function(){hu.lineStart=hu.lineEnd=hu.point=wo,rA.add(Ut(yC)),yC=new fa},result:function(){var e=rA/2;return rA=new fa,e}};function $we(){hu.point=Ewe}function Ewe(e,t){hu.point=bJ,yJ=vC=e,vJ=bC=t}function bJ(e,t){yC.add(bC*e-vC*t),vC=e,bC=t}function Swe(){bJ(yJ,vJ)}var rm=1/0,Nk=rm,u_=-rm,Lk=u_,Mk={point:Twe,lineStart:wo,lineEnd:wo,polygonStart:wo,polygonEnd:wo,result:function(){var e=[[rm,Nk],[u_,Lk]];return u_=Lk=-(Nk=rm=1/0),e}};function Twe(e,t){e<rm&&(rm=e),e>u_&&(u_=e),t<Nk&&(Nk=t),t>Lk&&(Lk=t)}var _C=0,xC=0,Lv=0,zk=0,qk=0,lg=0,wC=0,kC=0,Mv=0,_J,xJ,al,rl,vo={point:mh,lineStart:eU,lineEnd:tU,polygonStart:function(){vo.lineStart=Dwe,vo.lineEnd=Cwe},polygonEnd:function(){vo.point=mh,vo.lineStart=eU,vo.lineEnd=tU},result:function(){var e=Mv?[wC/Mv,kC/Mv]:lg?[zk/lg,qk/lg]:Lv?[_C/Lv,xC/Lv]:[NaN,NaN];return _C=xC=Lv=zk=qk=lg=wC=kC=Mv=0,e}};function mh(e,t){_C+=e,xC+=t,++Lv}function eU(){vo.point=Awe}function Awe(e,t){vo.point=Owe,mh(al=e,rl=t)}function Owe(e,t){var n=e-al,i=t-rl,a=xr(n*n+i*i);zk+=a*(al+e)/2,qk+=a*(rl+t)/2,lg+=a,mh(al=e,rl=t)}function tU(){vo.point=mh}function Dwe(){vo.point=Rwe}function Cwe(){wJ(_J,xJ)}function Rwe(e,t){vo.point=wJ,mh(_J=al=e,xJ=rl=t)}function wJ(e,t){var n=e-al,i=t-rl,a=xr(n*n+i*i);zk+=a*(al+e)/2,qk+=a*(rl+t)/2,lg+=a,a=rl*e-al*t,wC+=a*(al+e),kC+=a*(rl+t),Mv+=a*3,mh(al=e,rl=t)}function kJ(e){this._context=e}kJ.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Yr);break}}},result:wo};var $C=new fa,oA,$J,EJ,zv,qv,d_={point:wo,lineStart:function(){d_.point=Iwe},lineEnd:function(){oA&&SJ($J,EJ),d_.point=wo},polygonStart:function(){oA=!0},polygonEnd:function(){oA=null},result:function(){var e=+$C;return $C=new fa,e}};function Iwe(e,t){d_.point=SJ,$J=zv=e,EJ=qv=t}function SJ(e,t){zv-=e,qv-=t,$C.add(xr(zv*zv+qv*qv)),zv=e,qv=t}let nU,jk,iU,aU;class rU{constructor(t){this._append=t==null?TJ:Pwe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==iU||this._append!==jk){const i=this._radius,a=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,iU=i,jk=this._append,aU=this._,this._=a}this._+=aU;break}}}result(){const t=this._;return this._="",t.length?t:null}}function TJ(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Pwe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return TJ;if(t!==nU){const n=10**t;nU=t,jk=function(a){let r=1;this._+=a[0];for(const o=a.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+a[r]}}return jk}function AJ(e,t){let n=3,i=4.5,a,r;function o(s){return s&&(typeof i=="function"&&r.pointRadius(+i.apply(this,arguments)),Up(s,a(r))),r.result()}return o.area=function(s){return Up(s,a(hu)),hu.result()},o.measure=function(s){return Up(s,a(d_)),d_.result()},o.bounds=function(s){return Up(s,a(Mk)),Mk.result()},o.centroid=function(s){return Up(s,a(vo)),vo.result()},o.projection=function(s){return arguments.length?(a=s==null?(e=null,l_):(e=s).stream,o):e},o.context=function(s){return arguments.length?(r=s==null?(t=null,new rU(n)):new kJ(t=s),typeof i!="function"&&r.pointRadius(i),o):t},o.pointRadius=function(s){return arguments.length?(i=typeof s=="function"?s:(r.pointRadius(+s),+s),o):i},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return t===null&&(r=new rU(n)),o},o.projection(e).digits(n).context(t)}function eE(e){return function(t){var n=new EC;for(var i in e)n[i]=e[i];return n.stream=t,n}}function EC(){}EC.prototype={constructor:EC,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function HN(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Up(n,e.stream(Mk)),t(Mk.result()),i!=null&&e.clipExtent(i),e}function tE(e,t,n){return HN(e,function(i){var a=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=Math.min(a/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),s=+t[0][0]+(a-o*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(r-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([s,l])},n)}function YN(e,t,n){return tE(e,[[0,0],t],n)}function XN(e,t,n){return HN(e,function(i){var a=+t,r=a/(i[1][0]-i[0][0]),o=(a-r*(i[1][0]+i[0][0]))/2,s=-r*i[0][1];e.scale(150*r).translate([o,s])},n)}function ZN(e,t,n){return HN(e,function(i){var a=+t,r=a/(i[1][1]-i[0][1]),o=-r*i[0][0],s=(a-r*(i[1][1]+i[0][1]))/2;e.scale(150*r).translate([o,s])},n)}var oU=16,Fwe=gt(30*kn);function sU(e,t){return+t?Lwe(e,t):Nwe(e)}function Nwe(e){return eE({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Lwe(e,t){function n(i,a,r,o,s,l,u,d,c,g,v,b,x,k){var w=u-i,E=d-a,T=w*w+E*E;if(T>4*t&&x--){var O=o+g,D=s+v,P=l+b,R=xr(O*O+D*D+P*P),M=Fo(P/=R),q=Ut(Ut(P)-1)<ut||Ut(r-c)<ut?(r+c)/2:Uu(D,O),H=e(q,M),z=H[0],Q=H[1],te=z-i,W=Q-a,j=E*te-w*W;(j*j/T>t||Ut((w*te+E*W)/T-.5)>.3||o*g+s*v+l*b<Fwe)&&(n(i,a,r,o,s,l,z,Q,q,O/=R,D/=R,P,x,k),k.point(z,Q),n(z,Q,q,O,D,P,u,d,c,g,v,b,x,k))}}return function(i){var a,r,o,s,l,u,d,c,g,v,b,x,k={point:w,lineStart:E,lineEnd:O,polygonStart:function(){i.polygonStart(),k.lineStart=D},polygonEnd:function(){i.polygonEnd(),k.lineStart=E}};function w(M,q){M=e(M,q),i.point(M[0],M[1])}function E(){c=NaN,k.point=T,i.lineStart()}function T(M,q){var H=am([M,q]),z=e(M,q);n(c,g,d,v,b,x,c=z[0],g=z[1],d=M,v=H[0],b=H[1],x=H[2],oU,i),i.point(c,g)}function O(){k.point=w,i.lineEnd()}function D(){E(),k.point=P,k.lineEnd=R}function P(M,q){T(a=M,q),r=c,o=g,s=v,l=b,u=x,k.point=T}function R(){n(c,g,d,v,b,x,r,o,a,s,l,u,oU,i),k.lineEnd=O,O()}return k}}var Mwe=eE({point:function(e,t){this.stream.point(e*kn,t*kn)}});function zwe(e){return eE({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function qwe(e,t,n,i,a){function r(o,s){return o*=i,s*=a,[t+e*o,n-e*s]}return r.invert=function(o,s){return[(o-t)/e*i,(n-s)/e*a]},r}function lU(e,t,n,i,a,r){if(!r)return qwe(e,t,n,i,a);var o=gt(r),s=lt(r),l=o*e,u=s*e,d=o/e,c=s/e,g=(s*n-o*t)/e,v=(s*t+o*n)/e;function b(x,k){return x*=i,k*=a,[l*x-u*k+t,n-u*x-l*k]}return b.invert=function(x,k){return[i*(d*x-c*k+g),a*(v-c*x-d*k)]},b}function Zu(e){return OJ(function(){return e})()}function OJ(e){var t,n=150,i=480,a=250,r=0,o=0,s=0,l=0,u=0,d,c=0,g=1,v=1,b=null,x=Qj,k=null,w,E,T,O=l_,D=.5,P,R,M,q,H;function z(j){return M(j[0]*kn,j[1]*kn)}function Q(j){return j=M.invert(j[0],j[1]),j&&[j[0]*oa,j[1]*oa]}z.stream=function(j){return q&&H===j?q:q=Mwe(zwe(d)(x(P(O(H=j)))))},z.preclip=function(j){return arguments.length?(x=j,b=void 0,W()):x},z.postclip=function(j){return arguments.length?(O=j,k=w=E=T=null,W()):O},z.clipAngle=function(j){return arguments.length?(x=+j?wwe(b=j*kn):(b=null,Qj),W()):b*oa},z.clipExtent=function(j){return arguments.length?(O=j==null?(k=w=E=T=null,l_):mJ(k=+j[0][0],w=+j[0][1],E=+j[1][0],T=+j[1][1]),W()):k==null?null:[[k,w],[E,T]]},z.scale=function(j){return arguments.length?(n=+j,te()):n},z.translate=function(j){return arguments.length?(i=+j[0],a=+j[1],te()):[i,a]},z.center=function(j){return arguments.length?(r=j[0]%360*kn,o=j[1]%360*kn,te()):[r*oa,o*oa]},z.rotate=function(j){return arguments.length?(s=j[0]%360*kn,l=j[1]%360*kn,u=j.length>2?j[2]%360*kn:0,te()):[s*oa,l*oa,u*oa]},z.angle=function(j){return arguments.length?(c=j%360*kn,te()):c*oa},z.reflectX=function(j){return arguments.length?(g=j?-1:1,te()):g<0},z.reflectY=function(j){return arguments.length?(v=j?-1:1,te()):v<0},z.precision=function(j){return arguments.length?(P=sU(R,D=j*j),W()):xr(D)},z.fitExtent=function(j,K){return tE(z,j,K)},z.fitSize=function(j,K){return YN(z,j,K)},z.fitWidth=function(j,K){return XN(z,j,K)},z.fitHeight=function(j,K){return ZN(z,j,K)};function te(){var j=lU(n,0,0,g,v,c).apply(null,t(r,o)),K=lU(n,i-j[0],a-j[1],g,v,c);return d=cJ(s,l,u),R=gC(t,K),M=gC(d,R),P=sU(R,D),W()}function W(){return q=H=null,z}return function(){return t=e.apply(this,arguments),z.invert=t.invert&&Q,te()}}function JN(e){var t=0,n=_t/3,i=OJ(e),a=i(t,n);return a.parallels=function(r){return arguments.length?i(t=r[0]*kn,n=r[1]*kn):[t*oa,n*oa]},a}function jwe(e){var t=gt(e);function n(i,a){return[i*t,lt(a)/t]}return n.invert=function(i,a){return[i/t,Fo(a*t)]},n}function Uwe(e,t){var n=lt(e),i=(n+lt(t))/2;if(Ut(i)<ut)return jwe(e);var a=1+n*(2*i-n),r=xr(a)/i;function o(s,l){var u=xr(a-2*i*lt(l))/i;return[u*lt(s*=i),r-u*gt(s)]}return o.invert=function(s,l){var u=r-l,d=Uu(s,Ut(u))*xo(u);return u*i<0&&(d-=_t*xo(s)*xo(u)),[d/i,Fo((a-(s*s+u*u)*i*i)/(2*i))]},o}function Uk(){return JN(Uwe).scale(155.424).center([0,33.6442])}function DJ(){return Uk().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Bwe(e){var t=e.length;return{point:function(n,i){for(var a=-1;++a<t;)e[a].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Vwe(){var e,t,n=DJ(),i,a=Uk().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r,o=Uk().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(g,v){l=[g,v]}};function d(g){var v=g[0],b=g[1];return l=null,i.point(v,b),l||(r.point(v,b),l)||(s.point(v,b),l)}d.invert=function(g){var v=n.scale(),b=n.translate(),x=(g[0]-b[0])/v,k=(g[1]-b[1])/v;return(k>=.12&&k<.234&&x>=-.425&&x<-.214?a:k>=.166&&k<.234&&x>=-.214&&x<-.115?o:n).invert(g)},d.stream=function(g){return e&&t===g?e:e=Bwe([n.stream(t=g),a.stream(g),o.stream(g)])},d.precision=function(g){return arguments.length?(n.precision(g),a.precision(g),o.precision(g),c()):n.precision()},d.scale=function(g){return arguments.length?(n.scale(g),a.scale(g*.35),o.scale(g),d.translate(n.translate())):n.scale()},d.translate=function(g){if(!arguments.length)return n.translate();var v=n.scale(),b=+g[0],x=+g[1];return i=n.translate(g).clipExtent([[b-.455*v,x-.238*v],[b+.455*v,x+.238*v]]).stream(u),r=a.translate([b-.307*v,x+.201*v]).clipExtent([[b-.425*v+ut,x+.12*v+ut],[b-.214*v-ut,x+.234*v-ut]]).stream(u),s=o.translate([b-.205*v,x+.212*v]).clipExtent([[b-.214*v+ut,x+.166*v+ut],[b-.115*v-ut,x+.234*v-ut]]).stream(u),c()},d.fitExtent=function(g,v){return tE(d,g,v)},d.fitSize=function(g,v){return YN(d,g,v)},d.fitWidth=function(g,v){return XN(d,g,v)},d.fitHeight=function(g,v){return ZN(d,g,v)};function c(){return e=t=null,d}return d.scale(1070)}function CJ(e){return function(t,n){var i=gt(t),a=gt(n),r=e(i*a);return r===1/0?[2,0]:[r*a*lt(t),r*lt(n)]}}function u0(e){return function(t,n){var i=xr(t*t+n*n),a=e(i),r=lt(a),o=gt(a);return[Uu(t*r,i*o),Fo(i&&n*r/i)]}}var RJ=CJ(function(e){return xr(2/(1+e))});RJ.invert=u0(function(e){return 2*Fo(e/2)});function Wwe(){return Zu(RJ).scale(124.75).clipAngle(180-.001)}var IJ=CJ(function(e){return(e=fJ(e))&&e/lt(e)});IJ.invert=u0(function(e){return e});function Gwe(){return Zu(IJ).scale(79.4188).clipAngle(180-.001)}function nE(e,t){return[e,Ik(GN((Mn+t)/2))]}nE.invert=function(e,t){return[e,2*Wm(dJ(t))-Mn]};function Hwe(){return PJ(nE).scale(961/Yr)}function PJ(e){var t=Zu(e),n=t.center,i=t.scale,a=t.translate,r=t.clipExtent,o=null,s,l,u;t.scale=function(c){return arguments.length?(i(c),d()):i()},t.translate=function(c){return arguments.length?(a(c),d()):a()},t.center=function(c){return arguments.length?(n(c),d()):n()},t.clipExtent=function(c){return arguments.length?(c==null?o=s=l=u=null:(o=+c[0][0],s=+c[0][1],l=+c[1][0],u=+c[1][1]),d()):o==null?null:[[o,s],[l,u]]};function d(){var c=_t*i(),g=t(pwe(t.rotate()).invert([0,0]));return r(o==null?[[g[0]-c,g[1]-c],[g[0]+c,g[1]+c]]:e===nE?[[Math.max(g[0]-c,o),s],[Math.min(g[0]+c,l),u]]:[[o,Math.max(g[1]-c,s)],[l,Math.min(g[1]+c,u)]])}return d()}function Xx(e){return GN((Mn+e)/2)}function Ywe(e,t){var n=gt(e),i=e===t?lt(e):Ik(n/gt(t))/Ik(Xx(t)/Xx(e)),a=n*nA(Xx(e),i)/i;if(!i)return nE;function r(o,s){a>0?s<-Mn+ut&&(s=-Mn+ut):s>Mn-ut&&(s=Mn-ut);var l=a/nA(Xx(s),i);return[l*lt(i*o),a-l*gt(i*o)]}return r.invert=function(o,s){var l=a-s,u=xo(i)*xr(o*o+l*l),d=Uu(o,Ut(l))*xo(l);return l*i<0&&(d-=_t*xo(o)*xo(l)),[d/i,2*Wm(nA(a/u,1/i))-Mn]},r}function Xwe(){return JN(Ywe).scale(109.5).parallels([30,30])}function Bk(e,t){return[e,t]}Bk.invert=Bk;function Zwe(){return Zu(Bk).scale(152.63)}function Jwe(e,t){var n=gt(e),i=e===t?lt(e):(n-gt(t))/(t-e),a=n/i+e;if(Ut(i)<ut)return Bk;function r(o,s){var l=a-s,u=i*o;return[l*lt(u),a-l*gt(u)]}return r.invert=function(o,s){var l=a-s,u=Uu(o,Ut(l))*xo(l);return l*i<0&&(u-=_t*xo(o)*xo(l)),[u/i,a-xo(i)*xr(o*o+l*l)]},r}function Kwe(){return JN(Jwe).scale(131.154).center([0,13.9389])}var hb=1.340264,pb=-.081106,gb=893e-6,mb=.003796,Vk=xr(3)/2,Qwe=12;function FJ(e,t){var n=Fo(Vk*lt(t)),i=n*n,a=i*i*i;return[e*gt(n)/(Vk*(hb+3*pb*i+a*(7*gb+9*mb*i))),n*(hb+pb*i+a*(gb+mb*i))]}FJ.invert=function(e,t){for(var n=t,i=n*n,a=i*i*i,r=0,o,s,l;r<Qwe&&(s=n*(hb+pb*i+a*(gb+mb*i))-t,l=hb+3*pb*i+a*(7*gb+9*mb*i),n-=o=s/l,i=n*n,a=i*i*i,!(Ut(o)<uJ));++r);return[Vk*e*(hb+3*pb*i+a*(7*gb+9*mb*i))/gt(n),Fo(lt(n)/Vk)]};function eke(){return Zu(FJ).scale(177.158)}function NJ(e,t){var n=gt(t),i=gt(e)*n;return[n*lt(e)/i,lt(t)/i]}NJ.invert=u0(Wm);function tke(){return Zu(NJ).scale(144.049).clipAngle(60)}function nke(){var e=1,t=0,n=0,i=1,a=1,r=0,o,s,l=null,u,d,c,g=1,v=1,b=eE({point:function(O,D){var P=T([O,D]);this.stream.point(P[0],P[1])}}),x=l_,k,w;function E(){return g=e*i,v=e*a,k=w=null,T}function T(O){var D=O[0]*g,P=O[1]*v;if(r){var R=P*o-D*s;D=D*o+P*s,P=R}return[D+t,P+n]}return T.invert=function(O){var D=O[0]-t,P=O[1]-n;if(r){var R=P*o+D*s;D=D*o-P*s,P=R}return[D/g,P/v]},T.stream=function(O){return k&&w===O?k:k=b(x(w=O))},T.postclip=function(O){return arguments.length?(x=O,l=u=d=c=null,E()):x},T.clipExtent=function(O){return arguments.length?(x=O==null?(l=u=d=c=null,l_):mJ(l=+O[0][0],u=+O[0][1],d=+O[1][0],c=+O[1][1]),E()):l==null?null:[[l,u],[d,c]]},T.scale=function(O){return arguments.length?(e=+O,E()):e},T.translate=function(O){return arguments.length?(t=+O[0],n=+O[1],E()):[t,n]},T.angle=function(O){return arguments.length?(r=O%360*kn,s=lt(r),o=gt(r),E()):r*oa},T.reflectX=function(O){return arguments.length?(i=O?-1:1,E()):i<0},T.reflectY=function(O){return arguments.length?(a=O?-1:1,E()):a<0},T.fitExtent=function(O,D){return tE(T,O,D)},T.fitSize=function(O,D){return YN(T,O,D)},T.fitWidth=function(O,D){return XN(T,O,D)},T.fitHeight=function(O,D){return ZN(T,O,D)},T}function LJ(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}LJ.invert=function(e,t){var n=t,i=25,a;do{var r=n*n,o=r*r;n-=a=(n*(1.007226+r*(.015085+o*(-.044475+.028874*r-.005916*o)))-t)/(1.007226+r*(.015085*3+o*(-.044475*7+.028874*9*r-.005916*11*o)))}while(Ut(a)>ut&&--i>0);return[e/(.8707+(r=n*n)*(-.131979+r*(-.013791+r*r*r*(.003971-.001529*r)))),n]};function ike(){return Zu(LJ).scale(175.295)}function MJ(e,t){return[gt(t)*lt(e),lt(t)]}MJ.invert=u0(Fo);function ake(){return Zu(MJ).scale(249.5).clipAngle(90+ut)}function zJ(e,t){var n=gt(t),i=1+gt(e)*n;return[n*lt(e)/i,lt(t)/i]}zJ.invert=u0(function(e){return 2*Wm(e)});function rke(){return Zu(zJ).scale(250).clipAngle(142)}function qJ(e,t){return[Ik(GN((Mn+t)/2)),-e]}qJ.invert=function(e,t){return[-t,2*Wm(dJ(e))-Mn]};function oke(){var e=PJ(qJ),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var sn=1e-6,Dt=Math.PI,ko=Dt/2,uU=Dt/4,ws=Dt*2,nu=180/Dt,Cr=Dt/180,zn=Math.abs,ske=Math.atan,f_=Math.atan2,Vn=Math.cos,Wn=Math.sin,lke=Math.sign||function(e){return e>0?1:e<0?-1:0},iE=Math.sqrt;function uke(e){return e>1?0:e<-1?Dt:Math.acos(e)}function c_(e){return e>1?ko:e<-1?-ko:Math.asin(e)}function jv(){}function Wk(e,t){e&&fU.hasOwnProperty(e.type)&&fU[e.type](e,t)}var dU={Feature:function(e,t){Wk(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,a=n.length;++i<a;)Wk(n[i].geometry,t)}},fU={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){SC(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)SC(n[i],t,0)},Polygon:function(e,t){cU(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)cU(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,a=n.length;++i<a;)Wk(n[i],t)}};function SC(e,t,n){var i=-1,a=e.length-n,r;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function cU(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)SC(e[n],t,1);t.polygonEnd()}function dke(e,t){e&&dU.hasOwnProperty(e.type)?dU[e.type](e,t):Wk(e,t)}function TC(e){return[f_(e[1],e[0]),c_(e[2])]}function om(e){var t=e[0],n=e[1],i=Vn(n);return[i*Vn(t),i*Wn(t),Wn(n)]}function Zx(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Gk(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function sA(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Jx(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function AC(e){var t=iE(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function OC(e,t){function n(i,a){return i=e(i,a),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,a){return i=t.invert(i,a),i&&e.invert(i[0],i[1])}),n}function DC(e,t){return zn(e)>Dt&&(e-=Math.round(e/ws)*ws),[e,t]}DC.invert=DC;function fke(e,t,n){return(e%=ws)?t||n?OC(pU(e),gU(t,n)):pU(e):t||n?gU(t,n):DC}function hU(e){return function(t,n){return t+=e,zn(t)>Dt&&(t-=Math.round(t/ws)*ws),[t,n]}}function pU(e){var t=hU(e);return t.invert=hU(-e),t}function gU(e,t){var n=Vn(e),i=Wn(e),a=Vn(t),r=Wn(t);function o(s,l){var u=Vn(l),d=Vn(s)*u,c=Wn(s)*u,g=Wn(l),v=g*n+d*i;return[f_(c*a-v*r,d*n-g*i),c_(v*a+c*r)]}return o.invert=function(s,l){var u=Vn(l),d=Vn(s)*u,c=Wn(s)*u,g=Wn(l),v=g*a-c*r;return[f_(c*a+g*r,d*n+v*i),c_(v*n-d*i)]},o}function cke(e,t,n,i,a,r){if(n){var o=Vn(t),s=Wn(t),l=i*n;a==null?(a=t+i*ws,r=t-l/2):(a=mU(o,a),r=mU(o,r),(i>0?a<r:a>r)&&(a+=i*ws));for(var u,d=a;i>0?d>r:d<r;d-=l)u=TC([o,-s*Vn(d),-s*Wn(d)]),e.point(u[0],u[1])}}function mU(e,t){t=om(t),t[0]-=e,AC(t);var n=uke(-t[1]);return((-t[2]<0?-n:n)+ws-sn)%ws}function jJ(){var e=[],t;return{point:function(n,i,a){t.push([n,i,a])},lineStart:function(){e.push(t=[])},lineEnd:jv,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function nw(e,t){return zn(e[0]-t[0])<sn&&zn(e[1]-t[1])<sn}function Kx(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function UJ(e,t,n,i,a){var r=[],o=[],s,l;if(e.forEach(function(b){if(!((x=b.length-1)<=0)){var x,k=b[0],w=b[x],E;if(nw(k,w)){if(!k[2]&&!w[2]){for(a.lineStart(),s=0;s<x;++s)a.point((k=b[s])[0],k[1]);a.lineEnd();return}w[0]+=2*sn}r.push(E=new Kx(k,b,null,!0)),o.push(E.o=new Kx(k,null,E,!1)),r.push(E=new Kx(w,b,null,!1)),o.push(E.o=new Kx(w,null,E,!0))}}),!!r.length){for(o.sort(t),yU(r),yU(o),s=0,l=o.length;s<l;++s)o[s].e=n=!n;for(var u=r[0],d,c;;){for(var g=u,v=!0;g.v;)if((g=g.n)===u)return;d=g.z,a.lineStart();do{if(g.v=g.o.v=!0,g.e){if(v)for(s=0,l=d.length;s<l;++s)a.point((c=d[s])[0],c[1]);else i(g.x,g.n.x,1,a);g=g.n}else{if(v)for(d=g.p.z,s=d.length-1;s>=0;--s)a.point((c=d[s])[0],c[1]);else i(g.x,g.p.x,-1,a);g=g.p}g=g.o,d=g.z,v=!v}while(!g.v);a.lineEnd()}}}function yU(e){if(t=e.length){for(var t,n=0,i=e[0],a;++n<t;)i.n=a=e[n],a.p=i,i=a;i.n=a=e[0],a.p=i}}function lA(e){return zn(e[0])<=Dt?e[0]:lke(e[0])*((zn(e[0])+Dt)%ws-Dt)}function hke(e,t){var n=lA(t),i=t[1],a=Wn(i),r=[Wn(n),-Vn(n),0],o=0,s=0,l=new fa;a===1?i=ko+sn:a===-1&&(i=-ko-sn);for(var u=0,d=e.length;u<d;++u)if(g=(c=e[u]).length)for(var c,g,v=c[g-1],b=lA(v),x=v[1]/2+uU,k=Wn(x),w=Vn(x),E=0;E<g;++E,b=O,k=P,w=R,v=T){var T=c[E],O=lA(T),D=T[1]/2+uU,P=Wn(D),R=Vn(D),M=O-b,q=M>=0?1:-1,H=q*M,z=H>Dt,Q=k*P;if(l.add(f_(Q*q*Wn(H),w*R+Q*Vn(H))),o+=z?M+q*ws:M,z^b>=n^O>=n){var te=Gk(om(v),om(T));AC(te);var W=Gk(r,te);AC(W);var j=(z^M>=0?-1:1)*c_(W[2]);(i>j||i===j&&(te[0]||te[1]))&&(s+=z^M>=0?1:-1)}}return(o<-sn||o<sn&&l<-1e-12)^s&1}function BJ(e,t,n,i){return function(a){var r=t(a),o=jJ(),s=t(o),l=!1,u,d,c,g={point:v,lineStart:x,lineEnd:k,polygonStart:function(){g.point=w,g.lineStart=E,g.lineEnd=T,d=[],u=[]},polygonEnd:function(){g.point=v,g.lineStart=x,g.lineEnd=k,d=n2(d);var O=hke(u,i);d.length?(l||(a.polygonStart(),l=!0),UJ(d,gke,O,n,a)):O&&(l||(a.polygonStart(),l=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),l&&(a.polygonEnd(),l=!1),d=u=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function v(O,D){e(O,D)&&a.point(O,D)}function b(O,D){r.point(O,D)}function x(){g.point=b,r.lineStart()}function k(){g.point=v,r.lineEnd()}function w(O,D){c.push([O,D]),s.point(O,D)}function E(){s.lineStart(),c=[]}function T(){w(c[0][0],c[0][1]),s.lineEnd();var O=s.clean(),D=o.result(),P,R=D.length,M,q,H;if(c.pop(),u.push(c),c=null,!!R){if(O&1){if(q=D[0],(M=q.length-1)>0){for(l||(a.polygonStart(),l=!0),a.lineStart(),P=0;P<M;++P)a.point((H=q[P])[0],H[1]);a.lineEnd()}return}R>1&&O&2&&D.push(D.pop().concat(D.shift())),d.push(D.filter(pke))}}return g}}function pke(e){return e.length>1}function gke(e,t){return((e=e.x)[0]<0?e[1]-ko-sn:ko-e[1])-((t=t.x)[0]<0?t[1]-ko-sn:ko-t[1])}const vU=BJ(function(){return!0},mke,vke,[-Dt,-ko]);function mke(e){var t=NaN,n=NaN,i=NaN,a;return{lineStart:function(){e.lineStart(),a=1},point:function(r,o){var s=r>0?Dt:-Dt,l=zn(r-t);zn(l-Dt)<sn?(e.point(t,n=(n+o)/2>0?ko:-ko),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(r,n),a=0):i!==s&&l>=Dt&&(zn(t-i)<sn&&(t-=i*sn),zn(r-s)<sn&&(r-=s*sn),n=yke(t,n,r,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),a=0),e.point(t=r,n=o),i=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-a}}}function yke(e,t,n,i){var a,r,o=Wn(e-n);return zn(o)>sn?ske((Wn(t)*(r=Vn(i))*Wn(n)-Wn(i)*(a=Vn(t))*Wn(e))/(a*r*o)):(t+i)/2}function vke(e,t,n,i){var a;if(e==null)a=n*ko,i.point(-Dt,a),i.point(0,a),i.point(Dt,a),i.point(Dt,0),i.point(Dt,-a),i.point(0,-a),i.point(-Dt,-a),i.point(-Dt,0),i.point(-Dt,a);else if(zn(e[0]-t[0])>sn){var r=e[0]<t[0]?Dt:-Dt;a=n*r/2,i.point(-r,a),i.point(0,a),i.point(r,a)}else i.point(t[0],t[1])}function bke(e){var t=Vn(e),n=2*Cr,i=t>0,a=zn(t)>sn;function r(d,c,g,v){cke(v,e,n,g,d,c)}function o(d,c){return Vn(d)*Vn(c)>t}function s(d){var c,g,v,b,x;return{lineStart:function(){b=v=!1,x=1},point:function(k,w){var E=[k,w],T,O=o(k,w),D=i?O?0:u(k,w):O?u(k+(k<0?Dt:-Dt),w):0;if(!c&&(b=v=O)&&d.lineStart(),O!==v&&(T=l(c,E),(!T||nw(c,T)||nw(E,T))&&(E[2]=1)),O!==v)x=0,O?(d.lineStart(),T=l(E,c),d.point(T[0],T[1])):(T=l(c,E),d.point(T[0],T[1],2),d.lineEnd()),c=T;else if(a&&c&&i^O){var P;!(D&g)&&(P=l(E,c,!0))&&(x=0,i?(d.lineStart(),d.point(P[0][0],P[0][1]),d.point(P[1][0],P[1][1]),d.lineEnd()):(d.point(P[1][0],P[1][1]),d.lineEnd(),d.lineStart(),d.point(P[0][0],P[0][1],3)))}O&&(!c||!nw(c,E))&&d.point(E[0],E[1]),c=E,v=O,g=D},lineEnd:function(){v&&d.lineEnd(),c=null},clean:function(){return x|(b&&v)<<1}}}function l(d,c,g){var v=om(d),b=om(c),x=[1,0,0],k=Gk(v,b),w=Zx(k,k),E=k[0],T=w-E*E;if(!T)return!g&&d;var O=t*w/T,D=-t*E/T,P=Gk(x,k),R=Jx(x,O),M=Jx(k,D);sA(R,M);var q=P,H=Zx(R,q),z=Zx(q,q),Q=H*H-z*(Zx(R,R)-1);if(!(Q<0)){var te=iE(Q),W=Jx(q,(-H-te)/z);if(sA(W,R),W=TC(W),!g)return W;var j=d[0],K=c[0],se=d[1],ee=c[1],oe;K<j&&(oe=j,j=K,K=oe);var Y=K-j,Z=zn(Y-Dt)<sn,ae=Z||Y<sn;if(!Z&&ee<se&&(oe=se,se=ee,ee=oe),ae?Z?se+ee>0^W[1]<(zn(W[0]-j)<sn?se:ee):se<=W[1]&&W[1]<=ee:Y>Dt^(j<=W[0]&&W[0]<=K)){var ne=Jx(q,(-H+te)/z);return sA(ne,R),[W,TC(ne)]}}}function u(d,c){var g=i?e:Dt-e,v=0;return d<-g?v|=1:d>g&&(v|=2),c<-g?v|=4:c>g&&(v|=8),v}return BJ(o,s,r,i?[0,-e]:[-Dt,e-Dt])}function _ke(e,t,n,i,a,r){var o=e[0],s=e[1],l=t[0],u=t[1],d=0,c=1,g=l-o,v=u-s,b;if(b=n-o,!(!g&&b>0)){if(b/=g,g<0){if(b<d)return;b<c&&(c=b)}else if(g>0){if(b>c)return;b>d&&(d=b)}if(b=a-o,!(!g&&b<0)){if(b/=g,g<0){if(b>c)return;b>d&&(d=b)}else if(g>0){if(b<d)return;b<c&&(c=b)}if(b=i-s,!(!v&&b>0)){if(b/=v,v<0){if(b<d)return;b<c&&(c=b)}else if(v>0){if(b>c)return;b>d&&(d=b)}if(b=r-s,!(!v&&b<0)){if(b/=v,v<0){if(b>c)return;b>d&&(d=b)}else if(v>0){if(b<d)return;b<c&&(c=b)}return d>0&&(e[0]=o+d*g,e[1]=s+d*v),c<1&&(t[0]=o+c*g,t[1]=s+c*v),!0}}}}}var Uv=1e9,Qx=-Uv;function xke(e,t,n,i){function a(u,d){return e<=u&&u<=n&&t<=d&&d<=i}function r(u,d,c,g){var v=0,b=0;if(u==null||(v=o(u,c))!==(b=o(d,c))||l(u,d)<0^c>0)do g.point(v===0||v===3?e:n,v>1?i:t);while((v=(v+c+4)%4)!==b);else g.point(d[0],d[1])}function o(u,d){return zn(u[0]-e)<sn?d>0?0:3:zn(u[0]-n)<sn?d>0?2:1:zn(u[1]-t)<sn?d>0?1:0:d>0?3:2}function s(u,d){return l(u.x,d.x)}function l(u,d){var c=o(u,1),g=o(d,1);return c!==g?c-g:c===0?d[1]-u[1]:c===1?u[0]-d[0]:c===2?u[1]-d[1]:d[0]-u[0]}return function(u){var d=u,c=jJ(),g,v,b,x,k,w,E,T,O,D,P,R={point:M,lineStart:Q,lineEnd:te,polygonStart:H,polygonEnd:z};function M(j,K){a(j,K)&&d.point(j,K)}function q(){for(var j=0,K=0,se=v.length;K<se;++K)for(var ee=v[K],oe=1,Y=ee.length,Z=ee[0],ae,ne,U=Z[0],X=Z[1];oe<Y;++oe)ae=U,ne=X,Z=ee[oe],U=Z[0],X=Z[1],ne<=i?X>i&&(U-ae)*(i-ne)>(X-ne)*(e-ae)&&++j:X<=i&&(U-ae)*(i-ne)<(X-ne)*(e-ae)&&--j;return j}function H(){d=c,g=[],v=[],P=!0}function z(){var j=q(),K=P&&j,se=(g=n2(g)).length;(K||se)&&(u.polygonStart(),K&&(u.lineStart(),r(null,null,1,u),u.lineEnd()),se&&UJ(g,s,j,r,u),u.polygonEnd()),d=u,g=v=b=null}function Q(){R.point=W,v&&v.push(b=[]),D=!0,O=!1,E=T=NaN}function te(){g&&(W(x,k),w&&O&&c.rejoin(),g.push(c.result())),R.point=M,O&&d.lineEnd()}function W(j,K){var se=a(j,K);if(v&&b.push([j,K]),D)x=j,k=K,w=se,D=!1,se&&(d.lineStart(),d.point(j,K));else if(se&&O)d.point(j,K);else{var ee=[E=Math.max(Qx,Math.min(Uv,E)),T=Math.max(Qx,Math.min(Uv,T))],oe=[j=Math.max(Qx,Math.min(Uv,j)),K=Math.max(Qx,Math.min(Uv,K))];_ke(ee,oe,e,t,n,i)?(O||(d.lineStart(),d.point(ee[0],ee[1])),d.point(oe[0],oe[1]),se||d.lineEnd(),P=!1):se&&(d.lineStart(),d.point(j,K),P=!1)}E=j,T=K,O=se}return R}}const bU=e=>e;var sm=1/0,Hk=sm,h_=-sm,Yk=h_,_U={point:wke,lineStart:jv,lineEnd:jv,polygonStart:jv,polygonEnd:jv,result:function(){var e=[[sm,Hk],[h_,Yk]];return h_=Yk=-(Hk=sm=1/0),e}};function wke(e,t){e<sm&&(sm=e),e>h_&&(h_=e),t<Hk&&(Hk=t),t>Yk&&(Yk=t)}function KN(e){return function(t){var n=new CC;for(var i in e)n[i]=e[i];return n.stream=t,n}}function CC(){}CC.prototype={constructor:CC,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function QN(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),dke(n,e.stream(_U)),t(_U.result()),i!=null&&e.clipExtent(i),e}function VJ(e,t,n){return QN(e,function(i){var a=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=Math.min(a/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),s=+t[0][0]+(a-o*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(r-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([s,l])},n)}function kke(e,t,n){return VJ(e,[[0,0],t],n)}function $ke(e,t,n){return QN(e,function(i){var a=+t,r=a/(i[1][0]-i[0][0]),o=(a-r*(i[1][0]+i[0][0]))/2,s=-r*i[0][1];e.scale(150*r).translate([o,s])},n)}function Eke(e,t,n){return QN(e,function(i){var a=+t,r=a/(i[1][1]-i[0][1]),o=-r*i[0][0],s=(a-r*(i[1][1]+i[0][1]))/2;e.scale(150*r).translate([o,s])},n)}var xU=16,Ske=Vn(30*Cr);function wU(e,t){return+t?Ake(e,t):Tke(e)}function Tke(e){return KN({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Ake(e,t){function n(i,a,r,o,s,l,u,d,c,g,v,b,x,k){var w=u-i,E=d-a,T=w*w+E*E;if(T>4*t&&x--){var O=o+g,D=s+v,P=l+b,R=iE(O*O+D*D+P*P),M=c_(P/=R),q=zn(zn(P)-1)<sn||zn(r-c)<sn?(r+c)/2:f_(D,O),H=e(q,M),z=H[0],Q=H[1],te=z-i,W=Q-a,j=E*te-w*W;(j*j/T>t||zn((w*te+E*W)/T-.5)>.3||o*g+s*v+l*b<Ske)&&(n(i,a,r,o,s,l,z,Q,q,O/=R,D/=R,P,x,k),k.point(z,Q),n(z,Q,q,O,D,P,u,d,c,g,v,b,x,k))}}return function(i){var a,r,o,s,l,u,d,c,g,v,b,x,k={point:w,lineStart:E,lineEnd:O,polygonStart:function(){i.polygonStart(),k.lineStart=D},polygonEnd:function(){i.polygonEnd(),k.lineStart=E}};function w(M,q){M=e(M,q),i.point(M[0],M[1])}function E(){c=NaN,k.point=T,i.lineStart()}function T(M,q){var H=om([M,q]),z=e(M,q);n(c,g,d,v,b,x,c=z[0],g=z[1],d=M,v=H[0],b=H[1],x=H[2],xU,i),i.point(c,g)}function O(){k.point=w,i.lineEnd()}function D(){E(),k.point=P,k.lineEnd=R}function P(M,q){T(a=M,q),r=c,o=g,s=v,l=b,u=x,k.point=T}function R(){n(c,g,d,v,b,x,r,o,a,s,l,u,xU,i),k.lineEnd=O,O()}return k}}var Oke=KN({point:function(e,t){this.stream.point(e*Cr,t*Cr)}});function Dke(e){return KN({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function Cke(e,t,n,i,a){function r(o,s){return o*=i,s*=a,[t+e*o,n-e*s]}return r.invert=function(o,s){return[(o-t)/e*i,(n-s)/e*a]},r}function kU(e,t,n,i,a,r){if(!r)return Cke(e,t,n,i,a);var o=Vn(r),s=Wn(r),l=o*e,u=s*e,d=o/e,c=s/e,g=(s*n-o*t)/e,v=(s*t+o*n)/e;function b(x,k){return x*=i,k*=a,[l*x-u*k+t,n-u*x-l*k]}return b.invert=function(x,k){return[i*(d*x-c*k+g),a*(v-c*x-d*k)]},b}function Rke(e){return Ike(function(){return e})()}function Ike(e){var t,n=150,i=480,a=250,r=0,o=0,s=0,l=0,u=0,d,c=0,g=1,v=1,b=null,x=vU,k=null,w,E,T,O=bU,D=.5,P,R,M,q,H;function z(j){return M(j[0]*Cr,j[1]*Cr)}function Q(j){return j=M.invert(j[0],j[1]),j&&[j[0]*nu,j[1]*nu]}z.stream=function(j){return q&&H===j?q:q=Oke(Dke(d)(x(P(O(H=j)))))},z.preclip=function(j){return arguments.length?(x=j,b=void 0,W()):x},z.postclip=function(j){return arguments.length?(O=j,k=w=E=T=null,W()):O},z.clipAngle=function(j){return arguments.length?(x=+j?bke(b=j*Cr):(b=null,vU),W()):b*nu},z.clipExtent=function(j){return arguments.length?(O=j==null?(k=w=E=T=null,bU):xke(k=+j[0][0],w=+j[0][1],E=+j[1][0],T=+j[1][1]),W()):k==null?null:[[k,w],[E,T]]},z.scale=function(j){return arguments.length?(n=+j,te()):n},z.translate=function(j){return arguments.length?(i=+j[0],a=+j[1],te()):[i,a]},z.center=function(j){return arguments.length?(r=j[0]%360*Cr,o=j[1]%360*Cr,te()):[r*nu,o*nu]},z.rotate=function(j){return arguments.length?(s=j[0]%360*Cr,l=j[1]%360*Cr,u=j.length>2?j[2]%360*Cr:0,te()):[s*nu,l*nu,u*nu]},z.angle=function(j){return arguments.length?(c=j%360*Cr,te()):c*nu},z.reflectX=function(j){return arguments.length?(g=j?-1:1,te()):g<0},z.reflectY=function(j){return arguments.length?(v=j?-1:1,te()):v<0},z.precision=function(j){return arguments.length?(P=wU(R,D=j*j),W()):iE(D)},z.fitExtent=function(j,K){return VJ(z,j,K)},z.fitSize=function(j,K){return kke(z,j,K)},z.fitWidth=function(j,K){return $ke(z,j,K)},z.fitHeight=function(j,K){return Eke(z,j,K)};function te(){var j=kU(n,0,0,g,v,c).apply(null,t(r,o)),K=kU(n,i-j[0],a-j[1],g,v,c);return d=fke(s,l,u),R=OC(t,K),M=OC(d,R),P=wU(R,D),W()}function W(){return q=H=null,z}return function(){return t=e.apply(this,arguments),z.invert=t.invert&&Q,te()}}var Pke=Math.abs,RC=Math.cos,Xk=Math.sin,Fke=1e-6,WJ=Math.PI,IC=WJ/2,$U=Nke(2);function EU(e){return e>1?IC:e<-1?-IC:Math.asin(e)}function Nke(e){return e>0?Math.sqrt(e):0}function Lke(e,t){var n=e*Xk(t),i=30,a;do t-=a=(t+Xk(t)-n)/(1+RC(t));while(Pke(a)>Fke&&--i>0);return t/2}function Mke(e,t,n){function i(a,r){return[e*a*RC(r=Lke(n,r)),t*Xk(r)]}return i.invert=function(a,r){return r=EU(r/t),[a/(e*RC(r)),EU((2*r+Xk(2*r))/n)]},i}var zke=Mke($U/IC,$U,WJ);function qke(){return Rke(zke).scale(169.529)}const jke=AJ(),PC=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Uke(e,t){return function n(){const i=t();return i.type=e,i.path=AJ().projection(i),i.copy=i.copy||function(){const a=n();return PC.forEach(r=>{i[r]&&a[r](i[r]())}),a.path.pointRadius(i.path.pointRadius()),a},fX(i)}}function eL(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Zk[e]=Uke(e,t),this):Zk[e]||null}function GJ(e){return e&&e.path||jke}const Zk={albers:DJ,albersusa:Vwe,azimuthalequalarea:Wwe,azimuthalequidistant:Gwe,conicconformal:Xwe,conicequalarea:Uk,conicequidistant:Kwe,equalEarth:eke,equirectangular:Zwe,gnomonic:tke,identity:nke,mercator:Hwe,mollweide:qke,naturalEarth1:ike,orthographic:ake,stereographic:rke,transversemercator:oke};for(const e in Zk)eL(e,Zk[e]);var Cd=1e-6,SU=Math.abs,e1=Math.ceil;function TU(e,t,n){var i=Lr(e,t-Cd,n).concat(t);return function(a){return i.map(function(r){return[a,r]})}}function AU(e,t,n){var i=Lr(e,t-Cd,n).concat(t);return function(a){return i.map(function(r){return[r,a]})}}function Bke(){var e,t,n,i,a,r,o,s,l=10,u=l,d=90,c=360,g,v,b,x,k=2.5;function w(){return{type:"MultiLineString",coordinates:E()}}function E(){return Lr(e1(i/d)*d,n,d).map(b).concat(Lr(e1(s/c)*c,o,c).map(x)).concat(Lr(e1(t/l)*l,e,l).filter(function(T){return SU(T%d)>Cd}).map(g)).concat(Lr(e1(r/u)*u,a,u).filter(function(T){return SU(T%c)>Cd}).map(v))}return w.lines=function(){return E().map(function(T){return{type:"LineString",coordinates:T}})},w.outline=function(){return{type:"Polygon",coordinates:[b(i).concat(x(o).slice(1),b(n).reverse().slice(1),x(s).reverse().slice(1))]}},w.extent=function(T){return arguments.length?w.extentMajor(T).extentMinor(T):w.extentMinor()},w.extentMajor=function(T){return arguments.length?(i=+T[0][0],n=+T[1][0],s=+T[0][1],o=+T[1][1],i>n&&(T=i,i=n,n=T),s>o&&(T=s,s=o,o=T),w.precision(k)):[[i,s],[n,o]]},w.extentMinor=function(T){return arguments.length?(t=+T[0][0],e=+T[1][0],r=+T[0][1],a=+T[1][1],t>e&&(T=t,t=e,e=T),r>a&&(T=r,r=a,a=T),w.precision(k)):[[t,r],[e,a]]},w.step=function(T){return arguments.length?w.stepMajor(T).stepMinor(T):w.stepMinor()},w.stepMajor=function(T){return arguments.length?(d=+T[0],c=+T[1],w):[d,c]},w.stepMinor=function(T){return arguments.length?(l=+T[0],u=+T[1],w):[l,u]},w.precision=function(T){return arguments.length?(k=+T,g=TU(r,a,90),v=AU(t,e,k),b=TU(s,o,90),x=AU(i,n,k),w):k},w.extentMajor([[-180,-90+Cd],[180,90-Cd]]).extentMinor([[-180,-80-Cd],[180,80+Cd]])}function Vke(){}const iu=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function HJ(){var e=1,t=1,n=s;function i(l,u){return u.map(d=>a(l,d))}function a(l,u){var d=[],c=[];return r(l,u,g=>{n(g,l,u),Wke(g)>0?d.push([g]):c.push(g)}),c.forEach(g=>{for(var v=0,b=d.length,x;v<b;++v)if(Gke((x=d[v])[0],g)!==-1){x.push(g);return}}),{type:"MultiPolygon",value:u,coordinates:d}}function r(l,u,d){var c=[],g=[],v,b,x,k,w,E;for(v=b=-1,k=l[0]>=u,iu[k<<1].forEach(T);++v<e-1;)x=k,k=l[v+1]>=u,iu[x|k<<1].forEach(T);for(iu[k<<0].forEach(T);++b<t-1;){for(v=-1,k=l[b*e+e]>=u,w=l[b*e]>=u,iu[k<<1|w<<2].forEach(T);++v<e-1;)x=k,k=l[b*e+e+v+1]>=u,E=w,w=l[b*e+v+1]>=u,iu[x|k<<1|w<<2|E<<3].forEach(T);iu[k|w<<3].forEach(T)}for(v=-1,w=l[b*e]>=u,iu[w<<2].forEach(T);++v<e-1;)E=w,w=l[b*e+v+1]>=u,iu[w<<2|E<<3].forEach(T);iu[w<<3].forEach(T);function T(O){var D=[O[0][0]+v,O[0][1]+b],P=[O[1][0]+v,O[1][1]+b],R=o(D),M=o(P),q,H;(q=g[R])?(H=c[M])?(delete g[q.end],delete c[H.start],q===H?(q.ring.push(P),d(q.ring)):c[q.start]=g[H.end]={start:q.start,end:H.end,ring:q.ring.concat(H.ring)}):(delete g[q.end],q.ring.push(P),g[q.end=M]=q):(q=c[M])?(H=g[R])?(delete c[q.start],delete g[H.end],q===H?(q.ring.push(P),d(q.ring)):c[H.start]=g[q.end]={start:H.start,end:q.end,ring:H.ring.concat(q.ring)}):(delete c[q.start],q.ring.unshift(D),c[q.start=R]=q):c[R]=g[M]={start:R,end:M,ring:[D,P]}}}function o(l){return l[0]*2+l[1]*(e+1)*4}function s(l,u,d){l.forEach(c=>{var g=c[0],v=c[1],b=g|0,x=v|0,k,w=u[x*e+b];g>0&&g<e&&b===g&&(k=u[x*e+b-1],c[0]=g+(d-k)/(w-k)-.5),v>0&&v<t&&x===v&&(k=u[(x-1)*e+b],c[1]=v+(d-k)/(w-k)-.5)})}return i.contour=a,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),d=Math.floor(l[1]);return u>=0&&d>=0||me("invalid size"),e=u,t=d,i},i.smooth=function(l){return arguments.length?(n=l?s:Vke,i):n===s},i}function Wke(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Gke(e,t){for(var n=-1,i=t.length,a;++n<i;)if(a=Hke(e,t[n]))return a;return 0}function Hke(e,t){for(var n=t[0],i=t[1],a=-1,r=0,o=e.length,s=o-1;r<o;s=r++){var l=e[r],u=l[0],d=l[1],c=e[s],g=c[0],v=c[1];if(Yke(l,c,t))return 0;d>i!=v>i&&n<(g-u)*(i-d)/(v-d)+u&&(a=-a)}return a}function Yke(e,t,n){var i;return Xke(e,t,n)&&Zke(e[i=+(e[0]===t[0])],n[i],t[i])}function Xke(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Zke(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function YJ(e,t,n){return function(i){var a=$l(i),r=n?Math.min(a[0],0):a[0],o=a[1],s=o-r,l=t?mf(r,o,e):s/(e+1);return Lr(r+l,o,l)}}function tL(e){he.call(this,null,e)}tL.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};De(tL,he,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,a=e.field||ba,r=HJ().smooth(e.smooth!==!1),o=e.thresholds||Jke(i,a,e),s=e.as===null?null:e.as||"contour",l=[];return i.forEach(u=>{const d=a(u),c=r.size([d.width,d.height])(d.values,ye(o)?o:o(d.values));Kke(c,d,u,e),c.forEach(g=>{l.push(O2(u,qt(s!=null?{[s]:g}:g)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Jke(e,t,n){const i=YJ(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(a=>rf(t(a).values)))}function Kke(e,t,n,i){let a=i.scale||t.scale,r=i.translate||t.translate;if(ft(a)&&(a=a(n,i)),ft(r)&&(r=r(n,i)),(a===1||a==null)&&!r)return;const o=(Lt(a)?a:a[0])||1,s=(Lt(a)?a:a[1])||1,l=r&&r[0]||0,u=r&&r[1]||0;e.forEach(XJ(t,o,s,l,u))}function XJ(e,t,n,i,a){const r=e.x1||0,o=e.y1||0,s=t*n<0;function l(c){c.forEach(u)}function u(c){s&&c.reverse(),c.forEach(d)}function d(c){c[0]=(c[0]-r)*t+i,c[1]=(c[1]-o)*n+a}return function(c){return c.coordinates.forEach(l),c}}function OU(e,t,n){const i=e>=0?e:cF(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function uA(e){return ft(e)?e:_a(+e)}function ZJ(){var e=l=>l[0],t=l=>l[1],n=Fm,i=[-1,-1],a=960,r=500,o=2;function s(l,u){const d=OU(i[0],l,e)>>o,c=OU(i[1],l,t)>>o,g=d?d+2:0,v=c?c+2:0,b=2*g+(a>>o),x=2*v+(r>>o),k=new Float32Array(b*x),w=new Float32Array(b*x);let E=k;l.forEach(O=>{const D=g+(+e(O)>>o),P=v+(+t(O)>>o);D>=0&&D<b&&P>=0&&P<x&&(k[D+P*b]+=+n(O))}),d>0&&c>0?(Ip(b,x,k,w,d),Pp(b,x,w,k,c),Ip(b,x,k,w,d),Pp(b,x,w,k,c),Ip(b,x,k,w,d),Pp(b,x,w,k,c)):d>0?(Ip(b,x,k,w,d),Ip(b,x,w,k,d),Ip(b,x,k,w,d),E=w):c>0&&(Pp(b,x,k,w,c),Pp(b,x,w,k,c),Pp(b,x,k,w,c),E=w);const T=u?Math.pow(2,-2*o):1/QI(E);for(let O=0,D=b*x;O<D;++O)E[O]*=T;return{values:E,scale:1<<o,width:b,height:x,x1:g,y1:v,x2:g+(a>>o),y2:v+(r>>o)}}return s.x=function(l){return arguments.length?(e=uA(l),s):e},s.y=function(l){return arguments.length?(t=uA(l),s):t},s.weight=function(l){return arguments.length?(n=uA(l),s):n},s.size=function(l){if(!arguments.length)return[a,r];var u=+l[0],d=+l[1];return u>=0&&d>=0||me("invalid size"),a=u,r=d,s},s.cellSize=function(l){return arguments.length?((l=+l)>=1||me("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),s):1<<o},s.bandwidth=function(l){return arguments.length?(l=Le(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&me("invalid bandwidth"),i=l,s):i},s}function Ip(e,t,n,i,a){const r=(a<<1)+1;for(let o=0;o<t;++o)for(let s=0,l=0;s<e+a;++s)s<e&&(l+=n[s+o*e]),s>=a&&(s>=r&&(l-=n[s-r+o*e]),i[s-a+o*e]=l/Math.min(s+1,e-1+r-s,r))}function Pp(e,t,n,i,a){const r=(a<<1)+1;for(let o=0;o<e;++o)for(let s=0,l=0;s<t+a;++s)s<t&&(l+=n[o+s*e]),s>=a&&(s>=r&&(l-=n[o+(s-r)*e]),i[o+(s-a)*e]=l/Math.min(s+1,t-1+r-s,r))}function nL(e){he.call(this,null,e)}nL.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Qke=["x","y","weight","size","cellSize","bandwidth"];function JJ(e,t){return Qke.forEach(n=>t[n]!=null?e[n](t[n]):0),e}De(nL,he,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,a=e$e(i,e.groupby),r=(e.groupby||[]).map(qn),o=JJ(ZJ(),e),s=e.as||"grid",l=[];function u(d,c){for(let g=0;g<r.length;++g)d[r[g]]=c[g];return d}return l=a.map(d=>qt(u({[s]:o(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function e$e(e,t){var n=[],i=d=>d(s),a,r,o,s,l,u;if(t==null)n.push(e);else for(a={},r=0,o=e.length;r<o;++r)s=e[r],l=t.map(i),u=a[l],u||(a[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function iL(e){he.call(this,null,e)}iL.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};De(iL,he,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=HJ().smooth(e.smooth!==!1),a=e.values,r=e.thresholds||YJ(e.count||10,e.nice,!!a),o=e.size,s,l;return a||(a=t.materialize(t.SOURCE).source,s=JJ(ZJ(),e)(a,!0),l=XJ(s,s.scale||1,s.scale||1,0,0),o=[s.width,s.height],a=s.values),r=ye(r)?r:r(a),a=i.size(o)(a,r),l&&a.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(a||[]).map(qt),n}});const FC="Feature",aL="FeatureCollection",t$e="MultiPoint";function rL(e){he.call(this,null,e)}rL.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};De(rL,he,{transform(e,t){var n=this._features,i=this._points,a=e.fields,r=a&&a[0],o=a&&a[1],s=e.geojson||!a&&ba,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(ca(s))||r&&t.modified(ca(r))||o&&t.modified(ca(o)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),s&&t.visit(l,d=>n.push(s(d))),r&&o&&(t.visit(l,d=>{var c=r(d),g=o(d);c!=null&&g!=null&&(c=+c)===c&&(g=+g)===g&&i.push([c,g])}),n=n.concat({type:FC,geometry:{type:t$e,coordinates:i}})),this.value={type:aL,features:n}}});function oL(e){he.call(this,null,e)}oL.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};De(oL,he,{transform(e,t){var n=t.fork(t.ALL),i=this.value,a=e.field||ba,r=e.as||"path",o=n.SOURCE;!i||e.modified()?(this.value=i=GJ(e.projection),n.materialize().reflow()):o=a===ba||t.modified(a.fields)?n.ADD_MOD:n.ADD;const s=n$e(i,e.pointRadius);return n.visit(o,l=>l[r]=i(a(l))),i.pointRadius(s),n.modifies(r)}});function n$e(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function sL(e){he.call(this,null,e)}sL.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};De(sL,he,{transform(e,t){var n=e.projection,i=e.fields[0],a=e.fields[1],r=e.as||["x","y"],o=r[0],s=r[1],l;function u(d){const c=n([i(d),a(d)]);c?(d[o]=c[0],d[s]=c[1]):(d[o]=void 0,d[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(i.fields)||t.modified(a.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(r)}});function lL(e){he.call(this,null,e)}lL.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};De(lL,he,{transform(e,t){var n=t.fork(t.ALL),i=this.value,a=e.as||"shape",r=n.ADD;return(!i||e.modified())&&(this.value=i=i$e(GJ(e.projection),e.field||Co("datum"),e.pointRadius),n.materialize().reflow(),r=n.SOURCE),n.visit(r,o=>o[a]=i),n.modifies(a)}});function i$e(e,t,n){const i=n==null?a=>e(t(a)):a=>{var r=e.pointRadius(),o=e.pointRadius(n)(t(a));return e.pointRadius(r),o};return i.context=a=>(e.context(a),i),i}function uL(e){he.call(this,[],e),this.generator=Bke()}uL.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};De(uL,he,{transform(e,t){var n=this.value,i=this.generator,a;if(!n.length||e.modified())for(const r in e)ft(i[r])&&i[r](e[r]);return a=i(),n.length?t.mod.push(gY(n[0],a)):t.add.push(qt(a)),n[0]=a,t}});function dL(e){he.call(this,null,e)}dL.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};De(dL,he,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",a=e.field||ba,r=r$e(e.opacity,e),o=a$e(e.color,e),s=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?rf(n.map(u=>rf(a(u).values))):0};return n.forEach(u=>{const d=a(u),c=dt({},u,l);i||(c.$max=rf(d.values||[])),u[s]=o$e(d,c,o.dep?o:_a(o(c)),r.dep?r:_a(r(c)))}),t.reflow(!0).modifies(s)}});function a$e(e,t){let n;return ft(e)?(n=i=>yf(e(i,t)),n.dep=KJ(e)):n=_a(yf(e||"#888")),n}function r$e(e,t){let n;return ft(e)?(n=i=>e(i,t),n.dep=KJ(e)):e?n=_a(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function KJ(e){if(!ft(e))return!1;const t=bs(ca(e));return t.$x||t.$y||t.$value||t.$max}function o$e(e,t,n,i){const a=e.width,r=e.height,o=e.x1||0,s=e.y1||0,l=e.x2||a,u=e.y2||r,d=e.values,c=d?k=>d[k]:Ld,g=uf(l-o,u-s),v=g.getContext("2d"),b=v.getImageData(0,0,l-o,u-s),x=b.data;for(let k=s,w=0;k<u;++k){t.$y=k-s;for(let E=o,T=k*a;E<l;++E,w+=4){t.$x=E-o,t.$value=c(E+T);const O=n(t);x[w+0]=O.r,x[w+1]=O.g,x[w+2]=O.b,x[w+3]=~~(255*i(t))}}return v.putImageData(b,0,0),g}function QJ(e){he.call(this,null,e),this.modified(!0)}De(QJ,he,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=l$e(e.type),PC.forEach(i=>{e[i]!=null&&DU(n,i,e[i])})):PC.forEach(i=>{e.modified(i)&&DU(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&s$e(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function s$e(e,t){const n=u$e(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function l$e(e){const t=eL((e||"mercator").toLowerCase());return t||me("Unrecognized projection type: "+e),t()}function DU(e,t,n){ft(e[t])&&e[t](n)}function u$e(e){return e=Le(e),e.length===1?e[0]:{type:aL,features:e.reduce((t,n)=>t.concat(d$e(n)),[])}}function d$e(e){return e.type===aL?e.features:Le(e).filter(t=>t!=null).map(t=>t.type===FC?t:{type:FC,geometry:t})}const f$e=Object.freeze(Object.defineProperty({__proto__:null,contour:iL,geojson:rL,geopath:oL,geopoint:sL,geoshape:lL,graticule:uL,heatmap:dL,isocontour:tL,kde2d:nL,projection:QJ},Symbol.toStringTag,{value:"Module"})),CU={center:Lfe,collide:nce,nbody:hce,link:ace,x:pce,y:gce},Bv="forces",NC=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],c$e=["static","iterations"],eK=["x","y","vx","vy"];function fL(e){he.call(this,null,e)}fL.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:eK}]};De(fL,he,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),a=e.modified(NC),r=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(a||t.changed(t.MOD))&&tK(n,e,0,t)):(this.value=n=p$e(t.source,e),n.on("tick",h$e(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),a||i||e.modified(c$e)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/r)),e.static)for(n.stop();--r>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let s=this._argops,l=0,u=s.length,d;l<u;++l)if(d=s[l],!(d.name!==Bv||d.op._argval.force!=="link")){for(var i=d.op._argops,a=0,r=i.length,o;a<r;++a)if(i[a].name==="links"&&(o=i[a].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(eK)}});function h$e(e,t){return()=>e.touch(t).run()}function p$e(e,t){const n=cce(e),i=n.stop,a=n.restart;let r=!1;return n.stopped=()=>r,n.restart=()=>(r=!1,a()),n.stop=()=>(r=!0,i()),tK(n,t,!0).on("end",()=>r=!0)}function tK(e,t,n,i){var a=Le(t.forces),r,o,s,l;for(r=0,o=NC.length;r<o;++r)s=NC[r],s!==Bv&&t.modified(s)&&e[s](t[s]);for(r=0,o=a.length;r<o;++r)l=Bv+r,s=n||t.modified(Bv,r)?m$e(a[r]):i&&g$e(a[r],i)?e.force(l):null,s&&e.force(l,s);for(o=e.numForces||0;r<o;++r)e.force(Bv+r,null);return e.numForces=a.length,e}function g$e(e,t){var n,i;for(n in e)if(ft(i=e[n])&&t.modified(ca(i)))return 1;return 0}function m$e(e){var t,n;Me(CU,e.force)||me("Unrecognized force: "+e.force),t=CU[e.force]();for(n in e)ft(t[n])&&y$e(t[n],e[n],e);return t}function y$e(e,t,n){e(ft(t)?i=>t(i,n):t)}const v$e=Object.freeze(Object.defineProperty({__proto__:null,force:fL},Symbol.toStringTag,{value:"Module"}));function LC(e,t,n){const i={};return e.each(a=>{const r=a.data;n(r)&&(i[t(r)]=a)}),e.lookup=i,e}function cL(e){he.call(this,null,e)}cL.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const b$e=e=>e.values;De(cL,he,{transform(e,t){t.source||me("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),a=t.clone(),r=this.value;return(!r||i||t.changed())&&(r&&r.each(o=>{o.children&&A2(o.data)&&a.rem.push(o.data)}),this.value=r=bP({values:Le(e.keys).reduce((o,s)=>(o.key(s),o),_$e()).entries(a.source)},b$e),n&&r.each(o=>{o.children&&(o=qt(o.data),a.add.push(o),a.source.push(o))}),LC(r,Ze,Ze)),a.source.root=r,a}});function _$e(){const e=[],t={entries:a=>i(n(a,0),0),key:a=>(e.push(a),t)};function n(a,r){if(r>=e.length)return a;const o=a.length,s=e[r++],l={},u={};let d=-1,c,g,v;for(;++d<o;)c=s(g=a[d])+"",(v=l[c])?v.push(g):l[c]=[g];for(c in l)u[c]=n(l[c],r);return u}function i(a,r){if(++r>e.length)return a;const o=[];for(const s in a)o.push({key:s,values:i(a[s],r)});return o}return t}function Ju(e){he.call(this,null,e)}const x$e=(e,t)=>e.parent===t.parent?1:2;De(Ju,he,{transform(e,t){(!t.source||!t.source.root)&&me(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,a=t.source.root,r=e.as||i;e.field?a.sum(e.field):a.count(),e.sort&&a.sort(qh(e.sort,o=>o.data)),w$e(n,this.params,e),n.separation&&n.separation(e.separation!==!1?x$e:Fm);try{this.value=n(a)}catch(o){me(o)}return a.each(o=>k$e(o,i,r)),t.reflow(e.modified()).modifies(r).modifies("leaf")}});function w$e(e,t,n){for(let i,a=0,r=t.length;a<r;++a)i=t[a],i in n&&e[i](n[i])}function k$e(e,t,n){const i=e.data,a=t.length-1;for(let r=0;r<a;++r)i[n[r]]=e[t[r]];i[n[a]]=e.children?e.children.length:0}const MC=["x","y","r","depth","children"];function hL(e){Ju.call(this,e)}hL.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:MC.length,default:MC}]};De(hL,Ju,{layout:she,params:["radius","size","padding"],fields:MC});const zC=["x0","y0","x1","y1","depth","children"];function pL(e){Ju.call(this,e)}pL.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:zC.length,default:zC}]};De(pL,Ju,{layout:lhe,params:["size","round","padding"],fields:zC});function gL(e){he.call(this,null,e)}gL.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};De(gL,he,{transform(e,t){t.source||me("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),a=t.fork(t.ALL).materialize(t.SOURCE),r=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return a.source=a.source.slice(),r&&(n=a.source.length?LC(jq().id(e.key).parentId(e.parentKey)(a.source),e.key,Ro):LC(jq()([{}]),e.key,e.key)),a.source.root=this.value=n,a}});const RU={tidy:vhe,cluster:Dce},qC=["x","y","depth","children"];function mL(e){Ju.call(this,e)}mL.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:qC.length,default:qC}]};De(mL,Ju,{layout(e){const t=e||"tidy";if(Me(RU,t))return RU[t]();me("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:qC});function yL(e){he.call(this,[],e)}yL.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};De(yL,he,{transform(e,t){const n=this.value,i=t.source&&t.source.root,a=t.fork(t.NO_SOURCE),r={};return i||me("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(a.rem=n,t.visit(t.SOURCE,o=>r[Ze(o)]=1),i.each(o=>{const s=o.data,l=o.parent&&o.parent.data;l&&r[Ze(s)]&&r[Ze(l)]&&a.add.push(qt({source:l,target:s}))}),this.value=a.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>r[Ze(o)]=1),n.forEach(o=>{(r[Ze(o.source)]||r[Ze(o.target)])&&a.mod.push(o)})),a}});const IU={binary:_he,dice:U_,slice:c2,slicedice:xhe,squarify:ZW,resquarify:whe},jC=["x0","y0","x1","y1","depth","children"];function vL(e){Ju.call(this,e)}vL.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:jC.length,default:jC}]};De(vL,Ju,{layout(){const e=bhe();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Me(IU,t)?e.tile(IU[t]):me("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:jC});const $$e=Object.freeze(Object.defineProperty({__proto__:null,nest:cL,pack:hL,partition:pL,stratify:gL,tree:mL,treelinks:yL,treemap:vL},Symbol.toStringTag,{value:"Module"})),dA=4278190080;function E$e(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function S$e(e,t,n,i,a){const r=e.width,o=e.height,s=i||a,l=uf(r,o).getContext("2d"),u=uf(r,o).getContext("2d"),d=s&&uf(r,o).getContext("2d");n.forEach(M=>iw(l,M,!1)),iw(u,t,!1),s&&iw(d,t,!0);const c=fA(l,r,o),g=fA(u,r,o),v=s&&fA(d,r,o),b=e.bitmap(),x=s&&e.bitmap();let k,w,E,T,O,D,P,R;for(w=0;w<o;++w)for(k=0;k<r;++k)O=w*r+k,D=c[O]&dA,R=g[O]&dA,P=s&&v[O]&dA,(D||P||R)&&(E=e(k),T=e(w),!a&&(D||R)&&b.set(E,T),s&&(D||P)&&x.set(E,T));return[b,x]}function fA(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function iw(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(a=>{a.items.forEach(r=>iw(e,r.items,n))}):Hr[i].draw(e,{items:n?t.map(T$e):t})}function T$e(e){const t=O2(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const au=5,Oa=31,p_=32,Rd=new Uint32Array(p_+1),as=new Uint32Array(p_+1);as[0]=0;Rd[0]=~as[0];for(let e=1;e<=p_;++e)as[e]=as[e-1]<<1|1,Rd[e]=~as[e];function A$e(e,t){const n=new Uint32Array(~~((e*t+p_)/p_));function i(r,o){n[r]|=o}function a(r,o){n[r]&=o}return{array:n,get:(r,o)=>{const s=o*e+r;return n[s>>>au]&1<<(s&Oa)},set:(r,o)=>{const s=o*e+r;i(s>>>au,1<<(s&Oa))},clear:(r,o)=>{const s=o*e+r;a(s>>>au,~(1<<(s&Oa)))},getRange:(r,o,s,l)=>{let u=l,d,c,g,v;for(;u>=o;--u)if(d=u*e+r,c=u*e+s,g=d>>>au,v=c>>>au,g===v){if(n[g]&Rd[d&Oa]&as[(c&Oa)+1])return!0}else{if(n[g]&Rd[d&Oa]||n[v]&as[(c&Oa)+1])return!0;for(let b=g+1;b<v;++b)if(n[b])return!0}return!1},setRange:(r,o,s,l)=>{let u,d,c,g,v;for(;o<=l;++o)if(u=o*e+r,d=o*e+s,c=u>>>au,g=d>>>au,c===g)i(c,Rd[u&Oa]&as[(d&Oa)+1]);else for(i(c,Rd[u&Oa]),i(g,as[(d&Oa)+1]),v=c+1;v<g;++v)i(v,4294967295)},clearRange:(r,o,s,l)=>{let u,d,c,g,v;for(;o<=l;++o)if(u=o*e+r,d=o*e+s,c=u>>>au,g=d>>>au,c===g)a(c,as[u&Oa]|Rd[(d&Oa)+1]);else for(a(c,as[u&Oa]),a(g,Rd[(d&Oa)+1]),v=c+1;v<g;++v)a(v,0)},outOfBounds:(r,o,s,l)=>r<0||o<0||l>=t||s>=e}}function O$e(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),a=~~((e+2*n+i)/i),r=~~((t+2*n+i)/i),o=s=>~~((s+n)/i);return o.invert=s=>s*i-n,o.bitmap=()=>A$e(a,r),o.ratio=i,o.padding=n,o.width=e,o.height=t,o}function D$e(e,t,n,i){const a=e.width,r=e.height;return function(o){const s=o.datum.datum.items[i].items,l=s.length,u=o.datum.fontSize,d=jr.width(o.datum,o.datum.text);let c=0,g,v,b,x,k,w,E;for(let T=0;T<l;++T)g=s[T].x,b=s[T].y,v=s[T].x2===void 0?g:s[T].x2,x=s[T].y2===void 0?b:s[T].y2,k=(g+v)/2,w=(b+x)/2,E=Math.abs(v-g+x-b),E>=c&&(c=E,o.x=k,o.y=w);return k=d/2,w=u/2,g=o.x-k,v=o.x+k,b=o.y-w,x=o.y+w,o.align="center",g<0&&v<=a?o.align="left":0<=g&&a<v&&(o.align="right"),o.baseline="middle",b<0&&x<=r?o.baseline="top":0<=b&&r<x&&(o.baseline="bottom"),!0}}function Jk(e,t,n,i,a,r){let o=n/2;return e-o<0||e+o>a||t-(o=i/2)<0||t+o>r}function Hd(e,t,n,i,a,r,o,s){const l=a*r/(i*2),u=e(t-l),d=e(t+l),c=e(n-(r=r/2)),g=e(n+r);return o.outOfBounds(u,c,d,g)||o.getRange(u,c,d,g)||s&&s.getRange(u,c,d,g)}function C$e(e,t,n,i){const a=e.width,r=e.height,o=t[0],s=t[1];function l(u,d,c,g,v){const b=e.invert(u),x=e.invert(d);let k=c,w=r,E;if(!Jk(b,x,g,v,a,r)&&!Hd(e,b,x,v,g,k,o,s)&&!Hd(e,b,x,v,g,v,o,null)){for(;w-k>=1;)E=(k+w)/2,Hd(e,b,x,v,g,E,o,s)?w=E:k=E;if(k>c)return[b,x,k,!0]}}return function(u){const d=u.datum.datum.items[i].items,c=d.length,g=u.datum.fontSize,v=jr.width(u.datum,u.datum.text);let b=n?g:0,x=!1,k=!1,w=0,E,T,O,D,P,R,M,q,H,z,Q,te,W,j,K,se,ee;for(let oe=0;oe<c;++oe){for(E=d[oe].x,O=d[oe].y,T=d[oe].x2===void 0?E:d[oe].x2,D=d[oe].y2===void 0?O:d[oe].y2,E>T&&(ee=E,E=T,T=ee),O>D&&(ee=O,O=D,D=ee),H=e(E),Q=e(T),z=~~((H+Q)/2),te=e(O),j=e(D),W=~~((te+j)/2),M=z;M>=H;--M)for(q=W;q>=te;--q)se=l(M,q,b,v,g),se&&([u.x,u.y,b,x]=se);for(M=z;M<=Q;++M)for(q=W;q<=j;++q)se=l(M,q,b,v,g),se&&([u.x,u.y,b,x]=se);!x&&!n&&(K=Math.abs(T-E+D-O),P=(E+T)/2,R=(O+D)/2,K>=w&&!Jk(P,R,v,g,a,r)&&!Hd(e,P,R,g,v,g,o,null)&&(w=K,u.x=P,u.y=R,k=!0))}return x||k?(P=v/2,R=g/2,o.setRange(e(u.x-P),e(u.y-R),e(u.x+P),e(u.y+R)),u.align="center",u.baseline="middle",!0):!1}}const R$e=[-1,-1,1,1],I$e=[-1,1,-1,1];function P$e(e,t,n,i){const a=e.width,r=e.height,o=t[0],s=t[1],l=e.bitmap();return function(u){const d=u.datum.datum.items[i].items,c=d.length,g=u.datum.fontSize,v=jr.width(u.datum,u.datum.text),b=[];let x=n?g:0,k=!1,w=!1,E=0,T,O,D,P,R,M,q,H,z,Q,te,W;for(let j=0;j<c;++j){for(T=d[j].x,D=d[j].y,O=d[j].x2===void 0?T:d[j].x2,P=d[j].y2===void 0?D:d[j].y2,b.push([e((T+O)/2),e((D+P)/2)]);b.length;)if([q,H]=b.pop(),!(o.get(q,H)||s.get(q,H)||l.get(q,H))){l.set(q,H);for(let K=0;K<4;++K)R=q+R$e[K],M=H+I$e[K],l.outOfBounds(R,M,R,M)||b.push([R,M]);if(R=e.invert(q),M=e.invert(H),z=x,Q=r,!Jk(R,M,v,g,a,r)&&!Hd(e,R,M,g,v,z,o,s)&&!Hd(e,R,M,g,v,g,o,null)){for(;Q-z>=1;)te=(z+Q)/2,Hd(e,R,M,g,v,te,o,s)?Q=te:z=te;z>x&&(u.x=R,u.y=M,x=z,k=!0)}}!k&&!n&&(W=Math.abs(O-T+P-D),R=(T+O)/2,M=(D+P)/2,W>=E&&!Jk(R,M,v,g,a,r)&&!Hd(e,R,M,g,v,g,o,null)&&(E=W,u.x=R,u.y=M,w=!0))}return k||w?(R=v/2,M=g/2,o.setRange(e(u.x-R),e(u.y-M),e(u.x+R),e(u.y+M)),u.align="center",u.baseline="middle",!0):!1}}const F$e=["right","center","left"],N$e=["bottom","middle","top"];function L$e(e,t,n,i){const a=e.width,r=e.height,o=t[0],s=t[1],l=i.length;return function(u){const d=u.boundary,c=u.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>a||d[3]>r)return!1;let g=u.textWidth??0,v,b,x,k,w,E,T,O,D,P,R,M,q,H,z;for(let Q=0;Q<l;++Q){if(v=(n[Q]&3)-1,b=(n[Q]>>>2&3)-1,x=v===0&&b===0||i[Q]<0,k=v&&b?Math.SQRT1_2:1,w=i[Q]<0?-1:1,E=d[1+v]+i[Q]*v*k,R=d[4+b]+w*c*b/2+i[Q]*b*k,O=R-c/2,D=R+c/2,M=e(E),H=e(O),z=e(D),!g)if(PU(M,M,H,z,o,s,E,E,O,D,d,x))g=jr.width(u.datum,u.datum.text);else continue;if(P=E+w*g*v/2,E=P-g/2,T=P+g/2,M=e(E),q=e(T),PU(M,q,H,z,o,s,E,T,O,D,d,x))return u.x=v?v*w<0?T:E:P,u.y=b?b*w<0?D:O:R,u.align=F$e[v*w+1],u.baseline=N$e[b*w+1],o.setRange(M,H,q,z),!0}return!1}}function PU(e,t,n,i,a,r,o,s,l,u,d,c){return!(a.outOfBounds(e,n,t,i)||(c&&r||a).getRange(e,n,t,i))}const cA=0,hA=4,pA=8,gA=0,mA=1,yA=2,M$e={"top-left":cA+gA,top:cA+mA,"top-right":cA+yA,left:hA+gA,middle:hA+mA,right:hA+yA,"bottom-left":pA+gA,bottom:pA+mA,"bottom-right":pA+yA},z$e={naive:D$e,"reduced-search":C$e,floodfill:P$e};function q$e(e,t,n,i,a,r,o,s,l,u,d){if(!e.length)return e;const c=Math.max(i.length,a.length),g=j$e(i,c),v=U$e(a,c),b=B$e(e[0].datum),x=b==="group"&&e[0].datum.items[l].marktype,k=x==="area",w=V$e(b,x,s,l),E=u===null||u===1/0,T=k&&d==="naive";let O=-1,D=-1;const P=e.map(H=>{const z=E?jr.width(H,H.text):void 0;return O=Math.max(O,z),D=Math.max(D,H.fontSize),{datum:H,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:w(H),textWidth:z}});u=u===null||u===1/0?Math.max(O,D)+Math.max(...i):u;const R=O$e(t[0],t[1],u);let M;if(!T){n&&P.sort((Q,te)=>n(Q.datum,te.datum));let H=!1;for(let Q=0;Q<v.length&&!H;++Q)H=v[Q]===5||g[Q]<0;const z=(b&&o||k)&&e.map(Q=>Q.datum);M=r.length||z?S$e(R,z||[],r,H,k):E$e(R,o&&P)}const q=k?z$e[d](R,M,o,l):L$e(R,M,v,g);return P.forEach(H=>H.opacity=+q(H)),P}function j$e(e,t){const n=new Float64Array(t),i=e.length;for(let a=0;a<i;++a)n[a]=e[a]||0;for(let a=i;a<t;++a)n[a]=n[i-1];return n}function U$e(e,t){const n=new Int8Array(t),i=e.length;for(let a=0;a<i;++a)n[a]|=M$e[e[a]];for(let a=i;a<t;++a)n[a]=n[i-1];return n}function B$e(e){return e&&e.mark&&e.mark.marktype}function V$e(e,t,n,i){const a=r=>[r.x,r.x,r.x,r.y,r.y,r.y];return e?e==="line"||e==="area"?r=>a(r.datum):t==="line"?r=>{const o=r.datum.items[i].items;return a(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:r=>{const o=r.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:a}const UC=["x","y","opacity","align","baseline"],nK=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function bL(e){he.call(this,null,e)}bL.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:nK},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:UC.length,default:UC}]};De(bL,he,{transform(e,t){function n(r){const o=e[r];return ft(o)&&t.modified(o.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&me("Size parameter should be specified as a [width, height] array.");const a=e.as||UC;return q$e(t.materialize(t.SOURCE).source||[],e.size,e.sort,Le(e.offset==null?1:e.offset),Le(e.anchor||nK),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(r=>{const o=r.datum;o[a[0]]=r.x,o[a[1]]=r.y,o[a[2]]=r.opacity,o[a[3]]=r.align,o[a[4]]=r.baseline}),t.reflow(i).modifies(a)}});const W$e=Object.freeze(Object.defineProperty({__proto__:null,label:bL},Symbol.toStringTag,{value:"Module"}));function iK(e,t){var n=[],i=function(d){return d(s)},a,r,o,s,l,u;if(t==null)n.push(e);else for(a={},r=0,o=e.length;r<o;++r)s=e[r],l=t.map(i),u=a[l],u||(a[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function _L(e){he.call(this,null,e)}_L.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};De(_L,he,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,a=iK(i,e.groupby),r=(e.groupby||[]).map(qn),o=r.length,s=e.as||[qn(e.x),qn(e.y)],l=[];a.forEach(u=>{IY(u,e.x,e.y,e.bandwidth||.3).forEach(d=>{const c={};for(let g=0;g<o;++g)c[r[g]]=u.dims[g];c[s[0]]=d[0],c[s[1]]=d[1],l.push(qt(c))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const BC={constant:$F,linear:EF,log:OY,exp:DY,pow:CY,quad:SF,poly:RY},G$e=(e,t)=>e==="poly"?t:e==="quad"?2:1;function xL(e){he.call(this,null,e)}xL.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(BC)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};De(xL,he,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,a=iK(i,e.groupby),r=(e.groupby||[]).map(qn),o=e.method||"linear",s=e.order==null?3:e.order,l=G$e(o,s),u=e.as||[qn(e.x),qn(e.y)],d=BC[o],c=[];let g=e.extent;Me(BC,o)||me("Invalid regression method: "+o),g!=null&&o==="log"&&g[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),g=null),a.forEach(v=>{if(v.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const x=d(v,e.x,e.y,s);if(e.params){c.push(qt({keys:v.dims,coef:x.coef,rSquared:x.rSquared}));return}const k=g||$l(v,e.x),w=E=>{const T={};for(let O=0;O<r.length;++O)T[r[O]]=v.dims[O];T[u[0]]=E[0],T[u[1]]=E[1],c.push(qt(T))};o==="linear"||o==="constant"?k.forEach(E=>w([E,x.predict(E)])):N2(x.predict,k,25,200).forEach(w)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const H$e=Object.freeze(Object.defineProperty({__proto__:null,loess:_L,regression:xL},Symbol.toStringTag,{value:"Module"}));function wL(e){he.call(this,null,e)}wL.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Y$e=[-1e5,-1e5,1e5,1e5];De(wL,he,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let a=e.size;a=a?[0,0,a[0],a[1]]:(a=e.extent)?[a[0][0],a[0][1],a[1][0],a[1][1]]:Y$e;const r=this.value=pP.from(i,e.x,e.y).voronoi(a);for(let o=0,s=i.length;o<s;++o){const l=r.cellPolygon(o);i[o][n]=l&&!Z$e(l)?X$e(l):null}return t.reflow(e.modified()).modifies(n)}});function X$e(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function Z$e(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const J$e=Object.freeze(Object.defineProperty({__proto__:null,voronoi:wL},Symbol.toStringTag,{value:"Module"}));var vA=Math.PI/180,Vv=64,aw=2048;function K$e(){var e=[256,256],t,n,i,a,r,o,s,l=aK,u=[],d=Math.random,c={};c.layout=function(){for(var b=g(uf()),x=a2e((e[0]>>5)*e[1]),k=null,w=u.length,E=-1,T=[],O=u.map(P=>({text:t(P),font:n(P),style:a(P),weight:r(P),rotate:o(P),size:~~(i(P)+1e-14),padding:s(P),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:P})).sort((P,R)=>R.size-P.size);++E<w;){var D=O[E];D.x=e[0]*(d()+.5)>>1,D.y=e[1]*(d()+.5)>>1,Q$e(b,D,O,E),D.hasText&&v(x,D,k)&&(T.push(D),k?t2e(k,D):k=[{x:D.x+D.x0,y:D.y+D.y0},{x:D.x+D.x1,y:D.y+D.y1}],D.x-=e[0]>>1,D.y-=e[1]>>1)}return T};function g(b){b.width=b.height=1;var x=Math.sqrt(b.getContext("2d").getImageData(0,0,1,1).data.length>>2);b.width=(Vv<<5)/x,b.height=aw/x;var k=b.getContext("2d");return k.fillStyle=k.strokeStyle="red",k.textAlign="center",{context:k,ratio:x}}function v(b,x,k){for(var w=x.x,E=x.y,T=Math.hypot(e[0],e[1]),O=l(e),D=d()<.5?1:-1,P=-D,R,M,q;(R=O(P+=D))&&(M=~~R[0],q=~~R[1],!(Math.min(Math.abs(M),Math.abs(q))>=T));)if(x.x=w+M,x.y=E+q,!(x.x+x.x0<0||x.y+x.y0<0||x.x+x.x1>e[0]||x.y+x.y1>e[1])&&(!k||!e2e(x,b,e[0]))&&(!k||n2e(x,k))){for(var H=x.sprite,z=x.width>>5,Q=e[0]>>5,te=x.x-(z<<4),W=te&127,j=32-W,K=x.y1-x.y0,se=(x.y+x.y0)*Q+(te>>5),ee,oe=0;oe<K;oe++){ee=0;for(var Y=0;Y<=z;Y++)b[se+Y]|=ee<<j|(Y<z?(ee=H[oe*z+Y])>>>W:0);se+=Q}return x.sprite=null,!0}return!1}return c.words=function(b){return arguments.length?(u=b,c):u},c.size=function(b){return arguments.length?(e=[+b[0],+b[1]],c):e},c.font=function(b){return arguments.length?(n=gc(b),c):n},c.fontStyle=function(b){return arguments.length?(a=gc(b),c):a},c.fontWeight=function(b){return arguments.length?(r=gc(b),c):r},c.rotate=function(b){return arguments.length?(o=gc(b),c):o},c.text=function(b){return arguments.length?(t=gc(b),c):t},c.spiral=function(b){return arguments.length?(l=r2e[b]||b,c):l},c.fontSize=function(b){return arguments.length?(i=gc(b),c):i},c.padding=function(b){return arguments.length?(s=gc(b),c):s},c.random=function(b){return arguments.length?(d=b,c):d},c}function Q$e(e,t,n,i){if(!t.sprite){var a=e.context,r=e.ratio;a.clearRect(0,0,(Vv<<5)/r,aw/r);var o=0,s=0,l=0,u=n.length,d,c,g,v,b;for(--i;++i<u;){if(t=n[i],a.save(),a.font=t.style+" "+t.weight+" "+~~((t.size+1)/r)+"px "+t.font,d=a.measureText(t.text+"m").width*r,g=t.size<<1,t.rotate){var x=Math.sin(t.rotate*vA),k=Math.cos(t.rotate*vA),w=d*k,E=d*x,T=g*k,O=g*x;d=Math.max(Math.abs(w+O),Math.abs(w-O))+31>>5<<5,g=~~Math.max(Math.abs(E+T),Math.abs(E-T))}else d=d+31>>5<<5;if(g>l&&(l=g),o+d>=Vv<<5&&(o=0,s+=l,l=0),s+g>=aw)break;a.translate((o+(d>>1))/r,(s+(g>>1))/r),t.rotate&&a.rotate(t.rotate*vA),a.fillText(t.text,0,0),t.padding&&(a.lineWidth=2*t.padding,a.strokeText(t.text,0,0)),a.restore(),t.width=d,t.height=g,t.xoff=o,t.yoff=s,t.x1=d>>1,t.y1=g>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=d}for(var D=a.getImageData(0,0,(Vv<<5)/r,aw/r).data,P=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,c=d>>5,g=t.y1-t.y0,v=0;v<g*c;v++)P[v]=0;if(o=t.xoff,o==null)return;s=t.yoff;var R=0,M=-1;for(b=0;b<g;b++){for(v=0;v<d;v++){var q=c*b+(v>>5),H=D[(s+b)*(Vv<<5)+(o+v)<<2]?1<<31-v%32:0;P[q]|=H,R|=H}R?M=b:(t.y0++,g--,b--,s++)}t.y1=t.y0+M,t.sprite=P.slice(0,(t.y1-t.y0)*c)}}}function e2e(e,t,n){n>>=5;for(var i=e.sprite,a=e.width>>5,r=e.x-(a<<4),o=r&127,s=32-o,l=e.y1-e.y0,u=(e.y+e.y0)*n+(r>>5),d,c=0;c<l;c++){d=0;for(var g=0;g<=a;g++)if((d<<s|(g<a?(d=i[c*a+g])>>>o:0))&t[u+g])return!0;u+=n}return!1}function t2e(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function n2e(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function aK(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function i2e(e){var t=4,n=t*e[0]/e[1],i=0,a=0;return function(r){var o=r<0?-1:1;switch(Math.sqrt(1+4*o*r)-o&3){case 0:i+=n;break;case 1:a+=t;break;case 2:i-=n;break;default:a-=t;break}return[i,a]}}function a2e(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function gc(e){return typeof e=="function"?e:function(){return e}}var r2e={archimedean:aK,rectangular:i2e};const rK=["x","y","font","fontSize","fontStyle","fontWeight","angle"],o2e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function kL(e){he.call(this,K$e(),e)}kL.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:rK}]};De(kL,he,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&me("Wordcloud size dimensions must be non-zero.");function n(b){const x=e[b];return ft(x)&&t.modified(x.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||o2e.some(n)))return;const a=t.materialize(t.SOURCE).source,r=this.value,o=e.as||rK;let s=e.fontSize||14,l;if(ft(s)?l=e.fontSizeRange:s=_a(s),l){const b=s,x=Mt("sqrt")().domain($l(a,b)).range(l);s=k=>x(b(k))}a.forEach(b=>{b[o[0]]=NaN,b[o[1]]=NaN,b[o[3]]=0});const u=r.words(a).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(Po).layout(),d=r.size(),c=d[0]>>1,g=d[1]>>1,v=u.length;for(let b=0,x,k;b<v;++b)x=u[b],k=x.datum,k[o[0]]=x.x+c,k[o[1]]=x.y+g,k[o[2]]=x.font,k[o[3]]=x.size,k[o[4]]=x.style,k[o[5]]=x.weight,k[o[6]]=x.rotate;return t.reflow(i).modifies(o)}});const s2e=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:kL},Symbol.toStringTag,{value:"Module"})),l2e=e=>new Uint8Array(e),u2e=e=>new Uint16Array(e),yb=e=>new Uint32Array(e);function d2e(){let e=8,t=[],n=yb(0),i=t1(0,e),a=t1(0,e);return{data:()=>t,seen:()=>n=f2e(n,t.length),add(r){for(let o=0,s=t.length,l=r.length,u;o<l;++o)u=r[o],u._index=s++,t.push(u)},remove(r,o){const s=t.length,l=Array(s-r),u=t;let d,c,g;for(c=0;!o[c]&&c<s;++c)l[c]=t[c],u[c]=c;for(g=c;c<s;++c)d=t[c],o[c]?u[c]=-1:(u[c]=g,i[g]=i[c],a[g]=a[c],l[g]=d,d._index=g++),i[c]=0;return t=l,u},size:()=>t.length,curr:()=>i,prev:()=>a,reset:r=>a[r]=i[r],all:()=>e<257?255:e<65537?65535:4294967295,set(r,o){i[r]|=o},clear(r,o){i[r]&=~o},resize(r,o){const s=i.length;(r>s||o>e)&&(e=Math.max(o,e),i=t1(r,e,i),a=t1(r,e))}}}function f2e(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function t1(e,t,n){const i=(t<257?l2e:t<65537?u2e:yb)(e);return n&&i.set(n),i}function FU(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(a,r){const o=this,s=o.bisect(o.range,a.value),l=a.index,u=s[0],d=s[1],c=l.length;let g;for(g=0;g<u;++g)r[l[g]]|=i;for(g=d;g<c;++g)r[l[g]]|=i;return o}}}function NU(){let e=yb(0),t=[],n=0;function i(s,l,u){if(!l.length)return[];const d=n,c=l.length,g=yb(c);let v=Array(c),b,x,k;for(k=0;k<c;++k)v[k]=s(l[k]),g[k]=k;if(v=c2e(v,g),d)b=t,x=e,t=Array(d+c),e=yb(d+c),h2e(u,b,x,d,v,g,c,t,e);else{if(u>0)for(k=0;k<c;++k)g[k]+=u;t=v,e=g}return n=d+c,{index:g,value:v}}function a(s,l){const u=n;let d,c,g;for(c=0;!l[e[c]]&&c<u;++c);for(g=c;c<u;++c)l[d=e[c]]||(e[g]=d,t[g]=t[c],++g);n=u-s}function r(s){for(let l=0,u=n;l<u;++l)e[l]=s[e[l]]}function o(s,l){let u;return l?u=l.length:(l=t,u=n),[gse(l,s[0],0,u),gf(l,s[1],0,u)]}return{insert:i,remove:a,bisect:o,reindex:r,index:()=>e,size:()=>n}}function c2e(e,t){return e.sort.call(t,(n,i)=>{const a=e[n],r=e[i];return a<r?-1:a>r?1:0}),vse(e,t)}function h2e(e,t,n,i,a,r,o,s,l){let u=0,d=0,c;for(c=0;u<i&&d<o;++c)t[u]<a[d]?(s[c]=t[u],l[c]=n[u++]):(s[c]=a[d],l[c]=r[d++]+e);for(;u<i;++u,++c)s[c]=t[u],l[c]=n[u];for(;d<o;++d,++c)s[c]=a[d],l[c]=r[d]+e}function $L(e){he.call(this,d2e(),e),this._indices=null,this._dims=null}$L.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};De($L,he,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,a=this._indices={},r=this._dims=[],o=i.length;let s=0,l,u;for(;s<o;++s)l=n[s].fname,u=a[l]||(a[l]=NU()),r.push(FU(u,s,i[s]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,a=e.query,r=this._indices,o=this._dims,s=this.value,l=s.curr(),u=s.prev(),d=s.all(),c=n.rem=n.add,g=n.mod,v=a.length,b={};let x,k,w,E,T,O,D,P,R;if(u.set(l),t.rem.length&&(T=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(O={},E=t.mod,D=0,P=E.length;D<P;++D)O[E[D]._index]=1;for(D=0;D<v;++D)R=i[D],(!o[D]||e.modified("fields",D)||t.modified(R.fields))&&(w=R.fname,(x=b[w])||(r[w]=k=NU(),b[w]=x=k.insert(R,t.source,0)),o[D]=FU(k,D,a[D]).onAdd(x,l));for(D=0,P=s.data().length;D<P;++D)T[D]||(u[D]!==l[D]?c.push(D):O[D]&&l[D]!==d&&g.push(D));return s.mask=(1<<v)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let a=0;return t.rem.length&&(this.remove(e,t,n),a|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(a|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),a|=(1<<i)-1),t.mod.length&&(this.modify(t,n),a|=(1<<i)-1),this.value.mask=a,n},insert(e,t,n){const i=t.add,a=this.value,r=this._dims,o=this._indices,s=e.fields,l={},u=n.add,d=a.size()+i.length,c=r.length;let g=a.size(),v,b,x;a.resize(d,c),a.add(i);const k=a.curr(),w=a.prev(),E=a.all();for(v=0;v<c;++v)b=s[v].fname,x=l[b]||(l[b]=o[b].insert(s[v],i,g)),r[v].onAdd(x,k);for(;g<d;++g)w[g]=E,k[g]!==E&&u.push(g)},modify(e,t){const n=t.mod,i=this.value,a=i.curr(),r=i.all(),o=e.mod;let s,l,u;for(s=0,l=o.length;s<l;++s)u=o[s]._index,a[u]!==r&&n.push(u)},remove(e,t,n){const i=this._indices,a=this.value,r=a.curr(),o=a.prev(),s=a.all(),l={},u=n.rem,d=t.rem;let c,g,v,b;for(c=0,g=d.length;c<g;++c)v=d[c]._index,l[v]=1,o[v]=b=r[v],r[v]=s,b!==s&&u.push(v);for(v in i)i[v].remove(g,l);return this.reindex(t,g,l),l},reindex(e,t,n){const i=this._indices,a=this.value;e.runAfter(()=>{const r=a.remove(t,n);for(const o in i)i[o].reindex(r)})},update(e,t,n){const i=this._dims,a=e.query,r=t.stamp,o=i.length;let s=0,l,u;for(n.filters=0,u=0;u<o;++u)e.modified("query",u)&&(l=u,++s);if(s===1)s=i[l].one,this.incrementOne(i[l],a[l],n.add,n.rem);else for(u=0,s=0;u<o;++u)e.modified("query",u)&&(s|=i[u].one,this.incrementAll(i[u],a[u],r,n.add),n.rem=n.add);return s},incrementAll(e,t,n,i){const a=this.value,r=a.seen(),o=a.curr(),s=a.prev(),l=e.index(),u=e.bisect(e.range),d=e.bisect(t),c=d[0],g=d[1],v=u[0],b=u[1],x=e.one;let k,w,E;if(c<v)for(k=c,w=Math.min(v,g);k<w;++k)E=l[k],r[E]!==n&&(s[E]=o[E],r[E]=n,i.push(E)),o[E]^=x;else if(c>v)for(k=v,w=Math.min(c,b);k<w;++k)E=l[k],r[E]!==n&&(s[E]=o[E],r[E]=n,i.push(E)),o[E]^=x;if(g>b)for(k=Math.max(c,b),w=g;k<w;++k)E=l[k],r[E]!==n&&(s[E]=o[E],r[E]=n,i.push(E)),o[E]^=x;else if(g<b)for(k=Math.max(v,g),w=b;k<w;++k)E=l[k],r[E]!==n&&(s[E]=o[E],r[E]=n,i.push(E)),o[E]^=x;e.range=t.slice()},incrementOne(e,t,n,i){const a=this.value,r=a.curr(),o=e.index(),s=e.bisect(e.range),l=e.bisect(t),u=l[0],d=l[1],c=s[0],g=s[1],v=e.one;let b,x,k;if(u<c)for(b=u,x=Math.min(c,d);b<x;++b)k=o[b],r[k]^=v,n.push(k);else if(u>c)for(b=c,x=Math.min(u,g);b<x;++b)k=o[b],r[k]^=v,i.push(k);if(d>g)for(b=Math.max(u,g),x=d;b<x;++b)k=o[b],r[k]^=v,n.push(k);else if(d<g)for(b=Math.max(c,d),x=g;b<x;++b)k=o[b],r[k]^=v,i.push(k);e.range=t.slice()}});function EL(e){he.call(this,null,e)}EL.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};De(EL,he,{transform(e,t){const n=~(e.ignore||0),i=e.filter,a=i.mask;if(!(a&n))return t.StopPropagation;const r=t.fork(t.ALL),o=i.data(),s=i.curr(),l=i.prev(),u=d=>s[d]&n?null:o[d];return r.filter(r.MOD,u),a&a-1?(r.filter(r.ADD,d=>{const c=s[d]&n;return!c&&c^l[d]&n?o[d]:null}),r.filter(r.REM,d=>{const c=s[d]&n;return c&&!(c^(c^l[d]&n))?o[d]:null})):(r.filter(r.ADD,u),r.filter(r.REM,d=>(s[d]&n)===a?o[d]:null)),r.filter(r.SOURCE,d=>u(d._index))}});const p2e=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:$L,resolvefilter:EL},Symbol.toStringTag,{value:"Module"})),g2e="RawCode",yh="Literal",m2e="Property",y2e="Identifier",v2e="ArrayExpression",b2e="BinaryExpression",oK="CallExpression",_2e="ConditionalExpression",x2e="LogicalExpression",w2e="MemberExpression",k2e="ObjectExpression",$2e="UnaryExpression";function As(e){this.type=e}As.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=E2e(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function E2e(e){switch(e.type){case v2e:return e.elements;case b2e:case x2e:return[e.left,e.right];case oK:return[e.callee].concat(e.arguments);case _2e:return[e.test,e.consequent,e.alternate];case w2e:return[e.object,e.property];case k2e:return e.properties;case m2e:return[e.key,e.value];case $2e:return[e.argument];case y2e:case yh:case g2e:default:return[]}}var Fl,Be,pe,pa,Ht,aE=1,d0=2,vh=3,zf=4,rE=5,Bh=6,ar=7,f0=8,S2e=9;Fl={};Fl[aE]="Boolean";Fl[d0]="<end>";Fl[vh]="Identifier";Fl[zf]="Keyword";Fl[rE]="Null";Fl[Bh]="Numeric";Fl[ar]="Punctuator";Fl[f0]="String";Fl[S2e]="RegularExpression";var T2e="ArrayExpression",A2e="BinaryExpression",O2e="CallExpression",D2e="ConditionalExpression",sK="Identifier",C2e="Literal",R2e="LogicalExpression",I2e="MemberExpression",P2e="ObjectExpression",F2e="Property",N2e="UnaryExpression",xi="Unexpected token %0",L2e="Unexpected number",M2e="Unexpected string",z2e="Unexpected identifier",q2e="Unexpected reserved word",j2e="Unexpected end of input",VC="Invalid regular expression",bA="Invalid regular expression: missing /",lK="Octal literals are not allowed in strict mode.",U2e="Duplicate data property in object literal not allowed in strict mode",Ui="ILLEGAL",g_="Disabled.",B2e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),V2e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function oE(e,t){if(!e)throw new Error("ASSERT: "+t)}function uu(e){return e>=48&&e<=57}function SL(e){return"0123456789abcdefABCDEF".includes(e)}function vb(e){return"01234567".includes(e)}function W2e(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function m_(e){return e===10||e===13||e===8232||e===8233}function c0(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&B2e.test(String.fromCharCode(e))}function Kk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&V2e.test(String.fromCharCode(e))}const G2e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function uK(){for(;pe<pa;){const e=Be.charCodeAt(pe);if(W2e(e)||m_(e))++pe;else break}}function WC(e){var t,n,i,a=0;for(n=e==="u"?4:2,t=0;t<n;++t)pe<pa&&SL(Be[pe])?(i=Be[pe++],a=a*16+"0123456789abcdef".indexOf(i.toLowerCase())):Pt({},xi,Ui);return String.fromCharCode(a)}function H2e(){var e,t,n,i;for(e=Be[pe],t=0,e==="}"&&Pt({},xi,Ui);pe<pa&&(e=Be[pe++],!!SL(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Pt({},xi,Ui),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function dK(){var e,t;for(e=Be.charCodeAt(pe++),t=String.fromCharCode(e),e===92&&(Be.charCodeAt(pe)!==117&&Pt({},xi,Ui),++pe,e=WC("u"),(!e||e==="\\"||!c0(e.charCodeAt(0)))&&Pt({},xi,Ui),t=e);pe<pa&&(e=Be.charCodeAt(pe),!!Kk(e));)++pe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Be.charCodeAt(pe)!==117&&Pt({},xi,Ui),++pe,e=WC("u"),(!e||e==="\\"||!Kk(e.charCodeAt(0)))&&Pt({},xi,Ui),t+=e);return t}function Y2e(){var e,t;for(e=pe++;pe<pa;){if(t=Be.charCodeAt(pe),t===92)return pe=e,dK();if(Kk(t))++pe;else break}return Be.slice(e,pe)}function X2e(){var e,t,n;return e=pe,t=Be.charCodeAt(pe)===92?dK():Y2e(),t.length===1?n=vh:G2e.hasOwnProperty(t)?n=zf:t==="null"?n=rE:t==="true"||t==="false"?n=aE:n=vh,{type:n,value:t,start:e,end:pe}}function _A(){var e=pe,t=Be.charCodeAt(pe),n,i=Be[pe],a,r,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++pe,{type:ar,value:String.fromCharCode(t),start:e,end:pe};default:if(n=Be.charCodeAt(pe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return pe+=2,{type:ar,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:pe};case 33:case 61:return pe+=2,Be.charCodeAt(pe)===61&&++pe,{type:ar,value:Be.slice(e,pe),start:e,end:pe}}}if(o=Be.substr(pe,4),o===">>>=")return pe+=4,{type:ar,value:o,start:e,end:pe};if(r=o.substr(0,3),r===">>>"||r==="<<="||r===">>=")return pe+=3,{type:ar,value:r,start:e,end:pe};if(a=r.substr(0,2),i===a[1]&&"+-<>&|".includes(i)||a==="=>")return pe+=2,{type:ar,value:a,start:e,end:pe};if(a==="//"&&Pt({},xi,Ui),"<>=!+-*%&|^/".includes(i))return++pe,{type:ar,value:i,start:e,end:pe};Pt({},xi,Ui)}function Z2e(e){let t="";for(;pe<pa&&SL(Be[pe]);)t+=Be[pe++];return t.length===0&&Pt({},xi,Ui),c0(Be.charCodeAt(pe))&&Pt({},xi,Ui),{type:Bh,value:parseInt("0x"+t,16),start:e,end:pe}}function J2e(e){let t="0"+Be[pe++];for(;pe<pa&&vb(Be[pe]);)t+=Be[pe++];return(c0(Be.charCodeAt(pe))||uu(Be.charCodeAt(pe)))&&Pt({},xi,Ui),{type:Bh,value:parseInt(t,8),octal:!0,start:e,end:pe}}function LU(){var e,t,n;if(n=Be[pe],oE(uu(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=pe,e="",n!=="."){if(e=Be[pe++],n=Be[pe],e==="0"){if(n==="x"||n==="X")return++pe,Z2e(t);if(vb(n))return J2e(t);n&&uu(n.charCodeAt(0))&&Pt({},xi,Ui)}for(;uu(Be.charCodeAt(pe));)e+=Be[pe++];n=Be[pe]}if(n==="."){for(e+=Be[pe++];uu(Be.charCodeAt(pe));)e+=Be[pe++];n=Be[pe]}if(n==="e"||n==="E")if(e+=Be[pe++],n=Be[pe],(n==="+"||n==="-")&&(e+=Be[pe++]),uu(Be.charCodeAt(pe)))for(;uu(Be.charCodeAt(pe));)e+=Be[pe++];else Pt({},xi,Ui);return c0(Be.charCodeAt(pe))&&Pt({},xi,Ui),{type:Bh,value:parseFloat(e),start:t,end:pe}}function K2e(){var e="",t,n,i,a,r=!1;for(t=Be[pe],oE(t==="'"||t==='"',"String literal must starts with a quote"),n=pe,++pe;pe<pa;)if(i=Be[pe++],i===t){t="";break}else if(i==="\\")if(i=Be[pe++],!i||!m_(i.charCodeAt(0)))switch(i){case"u":case"x":Be[pe]==="{"?(++pe,e+=H2e()):e+=WC(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:vb(i)?(a="01234567".indexOf(i),a!==0&&(r=!0),pe<pa&&vb(Be[pe])&&(r=!0,a=a*8+"01234567".indexOf(Be[pe++]),"0123".includes(i)&&pe<pa&&vb(Be[pe])&&(a=a*8+"01234567".indexOf(Be[pe++]))),e+=String.fromCharCode(a)):e+=i;break}else i==="\r"&&Be[pe]===`
`&&++pe;else{if(m_(i.charCodeAt(0)))break;e+=i}return t!==""&&Pt({},xi,Ui),{type:f0,value:e,octal:r,start:n,end:pe}}function Q2e(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,a)=>{if(parseInt(a,16)<=1114111)return"x";Pt({},VC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Pt({},VC)}try{return new RegExp(e,t)}catch{return null}}function eEe(){var e,t,n,i,a;for(e=Be[pe],oE(e==="/","Regular expression literal must start with a slash"),t=Be[pe++],n=!1,i=!1;pe<pa;)if(e=Be[pe++],t+=e,e==="\\")e=Be[pe++],m_(e.charCodeAt(0))&&Pt({},bA),t+=e;else if(m_(e.charCodeAt(0)))Pt({},bA);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||Pt({},bA),a=t.substr(1,t.length-2),{value:a,literal:t}}function tEe(){var e,t,n;for(t="",n="";pe<pa&&(e=Be[pe],!!Kk(e.charCodeAt(0)));)++pe,e==="\\"&&pe<pa?Pt({},xi,Ui):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Pt({},VC,n),{value:n,literal:t}}function nEe(){var e,t,n,i;return Ht=null,uK(),e=pe,t=eEe(),n=tEe(),i=Q2e(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:pe}}function iEe(e){return e.type===vh||e.type===zf||e.type===aE||e.type===rE}function fK(){if(uK(),pe>=pa)return{type:d0,start:pe,end:pe};const e=Be.charCodeAt(pe);return c0(e)?X2e():e===40||e===41||e===59?_A():e===39||e===34?K2e():e===46?uu(Be.charCodeAt(pe+1))?LU():_A():uu(e)?LU():_A()}function lr(){const e=Ht;return pe=e.end,Ht=fK(),pe=e.end,e}function cK(){const e=pe;Ht=fK(),pe=e}function aEe(e){const t=new As(T2e);return t.elements=e,t}function MU(e,t,n){const i=new As(e==="||"||e==="&&"?R2e:A2e);return i.operator=e,i.left=t,i.right=n,i}function rEe(e,t){const n=new As(O2e);return n.callee=e,n.arguments=t,n}function oEe(e,t,n){const i=new As(D2e);return i.test=e,i.consequent=t,i.alternate=n,i}function TL(e){const t=new As(sK);return t.name=e,t}function Wv(e){const t=new As(C2e);return t.value=e.value,t.raw=Be.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function zU(e,t,n){const i=new As(I2e);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function sEe(e){const t=new As(P2e);return t.properties=e,t}function qU(e,t,n){const i=new As(F2e);return i.key=t,i.value=n,i.kind=e,i}function lEe(e,t){const n=new As(N2e);return n.operator=e,n.argument=t,n.prefix=!0,n}function Pt(e,t){var n,i=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,(r,o)=>(oE(o<i.length,"Message reference must be in range"),i[o]));throw n=new Error(a),n.index=pe,n.description=a,n}function sE(e){e.type===d0&&Pt(e,j2e),e.type===Bh&&Pt(e,L2e),e.type===f0&&Pt(e,M2e),e.type===vh&&Pt(e,z2e),e.type===zf&&Pt(e,q2e),Pt(e,xi,e.value)}function ga(e){const t=lr();(t.type!==ar||t.value!==e)&&sE(t)}function fn(e){return Ht.type===ar&&Ht.value===e}function xA(e){return Ht.type===zf&&Ht.value===e}function uEe(){const e=[];for(pe=Ht.start,ga("[");!fn("]");)fn(",")?(lr(),e.push(null)):(e.push(bh()),fn("]")||ga(","));return lr(),aEe(e)}function jU(){pe=Ht.start;const e=lr();return e.type===f0||e.type===Bh?(e.octal&&Pt(e,lK),Wv(e)):TL(e.value)}function dEe(){var e,t,n,i;if(pe=Ht.start,e=Ht,e.type===vh)return n=jU(),ga(":"),i=bh(),qU("init",n,i);if(e.type===d0||e.type===ar)sE(e);else return t=jU(),ga(":"),i=bh(),qU("init",t,i)}function fEe(){var e=[],t,n,i,a={},r=String;for(pe=Ht.start,ga("{");!fn("}");)t=dEe(),t.key.type===sK?n=t.key.name:n=r(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(a,i)?Pt({},U2e):a[i]=!0,e.push(t),fn("}")||ga(",");return ga("}"),sEe(e)}function cEe(){ga("(");const e=AL();return ga(")"),e}const hEe={if:1};function pEe(){var e,t,n;if(fn("("))return cEe();if(fn("["))return uEe();if(fn("{"))return fEe();if(e=Ht.type,pe=Ht.start,e===vh||hEe[Ht.value])n=TL(lr().value);else if(e===f0||e===Bh)Ht.octal&&Pt(Ht,lK),n=Wv(lr());else{if(e===zf)throw new Error(g_);e===aE?(t=lr(),t.value=t.value==="true",n=Wv(t)):e===rE?(t=lr(),t.value=null,n=Wv(t)):fn("/")||fn("/=")?(n=Wv(nEe()),cK()):sE(lr())}return n}function gEe(){const e=[];if(ga("("),!fn(")"))for(;pe<pa&&(e.push(bh()),!fn(")"));)ga(",");return ga(")"),e}function mEe(){pe=Ht.start;const e=lr();return iEe(e)||sE(e),TL(e.value)}function yEe(){return ga("."),mEe()}function vEe(){ga("[");const e=AL();return ga("]"),e}function bEe(){var e,t,n;for(e=pEe();;)if(fn("."))n=yEe(),e=zU(".",e,n);else if(fn("("))t=gEe(),e=rEe(e,t);else if(fn("["))n=vEe(),e=zU("[",e,n);else break;return e}function UU(){const e=bEe();if(Ht.type===ar&&(fn("++")||fn("--")))throw new Error(g_);return e}function rw(){var e,t;if(Ht.type!==ar&&Ht.type!==zf)t=UU();else{if(fn("++")||fn("--"))throw new Error(g_);if(fn("+")||fn("-")||fn("~")||fn("!"))e=lr(),t=rw(),t=lEe(e.value,t);else{if(xA("delete")||xA("void")||xA("typeof"))throw new Error(g_);t=UU()}}return t}function BU(e){let t=0;if(e.type!==ar&&e.type!==zf)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function _Ee(){var e,t,n,i,a,r,o,s,l,u;if(e=Ht,l=rw(),i=Ht,a=BU(i),a===0)return l;for(i.prec=a,lr(),t=[e,Ht],o=rw(),r=[l,i,o];(a=BU(Ht))>0;){for(;r.length>2&&a<=r[r.length-2].prec;)o=r.pop(),s=r.pop().value,l=r.pop(),t.pop(),n=MU(s,l,o),r.push(n);i=lr(),i.prec=a,r.push(i),t.push(Ht),n=rw(),r.push(n)}for(u=r.length-1,n=r[u],t.pop();u>1;)t.pop(),n=MU(r[u-1].value,r[u-2],n),u-=2;return n}function bh(){var e,t,n;return e=_Ee(),fn("?")&&(lr(),t=bh(),ga(":"),n=bh(),e=oEe(e,t,n)),e}function AL(){const e=bh();if(fn(","))throw new Error(g_);return e}function hK(e){Be=e,pe=0,pa=Be.length,Ht=null,cK();const t=AL();if(Ht.type!==d0)throw new Error("Unexpect token after expression.");return t}var pK={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function gK(e){function t(o,s,l,u){let d=e(s[0]);return l&&(d=l+"("+d+")",l.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+o+(u<0?"":u===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(o,s,l){return u=>t(o,u,s,l)}const i="new Date",a="String",r="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&me("Missing arguments to clamp function."),o.length>3&&me("Too many arguments to clamp function.");const s=o.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",a,0),lower:n("toLowerCase",a,0),substring:n("substring",a),split:n("split",a),trim:n("trim",a,0),btoa:"btoa",atob:"atob",regexp:r,test:n("test",r),if:function(o){o.length<3&&me("Missing arguments to if function."),o.length>3&&me("Too many arguments to if function.");const s=o.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function xEe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function mK(e){e=e||{};const t=e.allowed?bs(e.allowed):{},n=e.forbidden?bs(e.forbidden):{},i=e.constants||pK,a=(e.functions||gK)(c),r=e.globalvar,o=e.fieldvar,s=ft(r)?r:b=>`${r}["${b}"]`;let l={},u={},d=0;function c(b){if(Ne(b))return b;const x=g[b.type];return x==null&&me("Unsupported type: "+b.type),x(b)}const g={Literal:b=>b.raw,Identifier:b=>{const x=b.name;return d>0?x:Me(n,x)?me("Illegal identifier: "+x):Me(i,x)?i[x]:Me(t,x)?x:(l[x]=1,s(x))},MemberExpression:b=>{const x=!b.computed,k=c(b.object);x&&(d+=1);const w=c(b.property);return k===o&&(u[xEe(w)]=1),x&&(d-=1),k+(x?"."+w:"["+w+"]")},CallExpression:b=>{b.callee.type!=="Identifier"&&me("Illegal callee type: "+b.callee.type);const x=b.callee.name,k=b.arguments,w=Me(a,x)&&a[x];return w||me("Unrecognized function: "+x),ft(w)?w(k):w+"("+k.map(c).join(",")+")"},ArrayExpression:b=>"["+b.elements.map(c).join(",")+"]",BinaryExpression:b=>"("+c(b.left)+" "+b.operator+" "+c(b.right)+")",UnaryExpression:b=>"("+b.operator+c(b.argument)+")",ConditionalExpression:b=>"("+c(b.test)+"?"+c(b.consequent)+":"+c(b.alternate)+")",LogicalExpression:b=>"("+c(b.left)+b.operator+c(b.right)+")",ObjectExpression:b=>"{"+b.properties.map(c).join(",")+"}",Property:b=>{d+=1;const x=c(b.key);return d-=1,x+":"+c(b.value)}};function v(b){const x={code:c(b),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},x}return v.functions=a,v.constants=i,v}var Qk=1e-6,VU=1e-12,h0=Math.PI,WU=h0/2,yK=h0/4,GU=h0*2,bb=180/h0,xa=h0/180,OL=Math.abs,lE=Math.atan2,Va=Math.cos,GC=Math.hypot,Wa=Math.sin,vK=Math.sqrt;function DL(e){return e>1?WU:e<-1?-WU:Math.asin(e)}function Gv(){}function e$(e,t){e&&YU.hasOwnProperty(e.type)&&YU[e.type](e,t)}var HU={Feature:function(e,t){e$(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,a=n.length;++i<a;)e$(n[i].geometry,t)}},YU={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){HC(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)HC(n[i],t,0)},Polygon:function(e,t){XU(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)XU(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,a=n.length;++i<a;)e$(n[i],t)}};function HC(e,t,n){var i=-1,a=e.length-n,r;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function XU(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)HC(e[n],t,1);t.polygonEnd()}function CL(e,t){e&&HU.hasOwnProperty(e.type)?HU[e.type](e,t):e$(e,t)}var t$=new fa,n$=new fa,bK,_K,YC,XC,ZC,Sl={point:Gv,lineStart:Gv,lineEnd:Gv,polygonStart:function(){t$=new fa,Sl.lineStart=wEe,Sl.lineEnd=kEe},polygonEnd:function(){var e=+t$;n$.add(e<0?GU+e:e),this.lineStart=this.lineEnd=this.point=Gv},sphere:function(){n$.add(GU)}};function wEe(){Sl.point=$Ee}function kEe(){xK(bK,_K)}function $Ee(e,t){Sl.point=xK,bK=e,_K=t,e*=xa,t*=xa,YC=e,XC=Va(t=t/2+yK),ZC=Wa(t)}function xK(e,t){e*=xa,t*=xa,t=t/2+yK;var n=e-YC,i=n>=0?1:-1,a=i*n,r=Va(t),o=Wa(t),s=ZC*o,l=XC*r+s*Va(a),u=s*i*Wa(a);t$.add(lE(u,l)),YC=e,XC=r,ZC=o}function EEe(e){return n$=new fa,CL(e,Sl),n$*2}function SEe(e){return[lE(e[1],e[0]),DL(e[2])]}function TEe(e){var t=e[0],n=e[1],i=Va(n);return[i*Va(t),i*Wa(t),Wa(n)]}function ZU(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function AEe(e){var t=vK(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var wn,sr,Fn,Pr,Oc,wK,kK,xg,_b,Id,Bu,du={point:JC,lineStart:JU,lineEnd:KU,polygonStart:function(){du.point=EK,du.lineStart=OEe,du.lineEnd=DEe,_b=new fa,Sl.polygonStart()},polygonEnd:function(){Sl.polygonEnd(),du.point=JC,du.lineStart=JU,du.lineEnd=KU,t$<0?(wn=-(Fn=180),sr=-(Pr=90)):_b>Qk?Pr=90:_b<-Qk&&(sr=-90),Bu[0]=wn,Bu[1]=Fn},sphere:function(){wn=-(Fn=180),sr=-(Pr=90)}};function JC(e,t){Id.push(Bu=[wn=e,Fn=e]),t<sr&&(sr=t),t>Pr&&(Pr=t)}function $K(e,t){var n=TEe([e*xa,t*xa]);if(xg){var i=ZU(xg,n),a=[i[1],-i[0],0],r=ZU(a,i);AEe(r),r=SEe(r);var o=e-Oc,s=o>0?1:-1,l=r[0]*bb*s,u,d=OL(o)>180;d^(s*Oc<l&&l<s*e)?(u=r[1]*bb,u>Pr&&(Pr=u)):(l=(l+360)%360-180,d^(s*Oc<l&&l<s*e)?(u=-r[1]*bb,u<sr&&(sr=u)):(t<sr&&(sr=t),t>Pr&&(Pr=t))),d?e<Oc?Ir(wn,e)>Ir(wn,Fn)&&(Fn=e):Ir(e,Fn)>Ir(wn,Fn)&&(wn=e):Fn>=wn?(e<wn&&(wn=e),e>Fn&&(Fn=e)):e>Oc?Ir(wn,e)>Ir(wn,Fn)&&(Fn=e):Ir(e,Fn)>Ir(wn,Fn)&&(wn=e)}else Id.push(Bu=[wn=e,Fn=e]);t<sr&&(sr=t),t>Pr&&(Pr=t),xg=n,Oc=e}function JU(){du.point=$K}function KU(){Bu[0]=wn,Bu[1]=Fn,du.point=JC,xg=null}function EK(e,t){if(xg){var n=e-Oc;_b.add(OL(n)>180?n+(n>0?360:-360):n)}else wK=e,kK=t;Sl.point(e,t),$K(e,t)}function OEe(){Sl.lineStart()}function DEe(){EK(wK,kK),Sl.lineEnd(),OL(_b)>Qk&&(wn=-(Fn=180)),Bu[0]=wn,Bu[1]=Fn,xg=null}function Ir(e,t){return(t-=e)<0?t+360:t}function CEe(e,t){return e[0]-t[0]}function QU(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function REe(e){var t,n,i,a,r,o,s;if(Pr=Fn=-(wn=sr=1/0),Id=[],CL(e,du),n=Id.length){for(Id.sort(CEe),t=1,i=Id[0],r=[i];t<n;++t)a=Id[t],QU(i,a[0])||QU(i,a[1])?(Ir(i[0],a[1])>Ir(i[0],i[1])&&(i[1]=a[1]),Ir(a[0],i[1])>Ir(i[0],i[1])&&(i[0]=a[0])):r.push(i=a);for(o=-1/0,n=r.length-1,t=0,i=r[n];t<=n;i=a,++t)a=r[t],(s=Ir(i[1],a[0]))>o&&(o=s,wn=a[0],Fn=i[1])}return Id=Bu=null,wn===1/0||sr===1/0?[[NaN,NaN],[NaN,NaN]]:[[wn,sr],[Fn,Pr]]}var Hv,i$,a$,r$,o$,s$,l$,u$,KC,QC,eR,SK,TK,Fa,Na,La,ds={sphere:Gv,point:RL,lineStart:eB,lineEnd:tB,polygonStart:function(){ds.lineStart=FEe,ds.lineEnd=NEe},polygonEnd:function(){ds.lineStart=eB,ds.lineEnd=tB}};function RL(e,t){e*=xa,t*=xa;var n=Va(t);p0(n*Va(e),n*Wa(e),Wa(t))}function p0(e,t,n){++Hv,a$+=(e-a$)/Hv,r$+=(t-r$)/Hv,o$+=(n-o$)/Hv}function eB(){ds.point=IEe}function IEe(e,t){e*=xa,t*=xa;var n=Va(t);Fa=n*Va(e),Na=n*Wa(e),La=Wa(t),ds.point=PEe,p0(Fa,Na,La)}function PEe(e,t){e*=xa,t*=xa;var n=Va(t),i=n*Va(e),a=n*Wa(e),r=Wa(t),o=lE(vK((o=Na*r-La*a)*o+(o=La*i-Fa*r)*o+(o=Fa*a-Na*i)*o),Fa*i+Na*a+La*r);i$+=o,s$+=o*(Fa+(Fa=i)),l$+=o*(Na+(Na=a)),u$+=o*(La+(La=r)),p0(Fa,Na,La)}function tB(){ds.point=RL}function FEe(){ds.point=LEe}function NEe(){AK(SK,TK),ds.point=RL}function LEe(e,t){SK=e,TK=t,e*=xa,t*=xa,ds.point=AK;var n=Va(t);Fa=n*Va(e),Na=n*Wa(e),La=Wa(t),p0(Fa,Na,La)}function AK(e,t){e*=xa,t*=xa;var n=Va(t),i=n*Va(e),a=n*Wa(e),r=Wa(t),o=Na*r-La*a,s=La*i-Fa*r,l=Fa*a-Na*i,u=GC(o,s,l),d=DL(u),c=u&&-d/u;KC.add(c*o),QC.add(c*s),eR.add(c*l),i$+=d,s$+=d*(Fa+(Fa=i)),l$+=d*(Na+(Na=a)),u$+=d*(La+(La=r)),p0(Fa,Na,La)}function MEe(e){Hv=i$=a$=r$=o$=s$=l$=u$=0,KC=new fa,QC=new fa,eR=new fa,CL(e,ds);var t=+KC,n=+QC,i=+eR,a=GC(t,n,i);return a<VU&&(t=s$,n=l$,i=u$,i$<Qk&&(t=a$,n=r$,i=o$),a=GC(t,n,i),a<VU)?[NaN,NaN]:[lE(n,t)*bb,DL(i/a)*bb]}const nB=Symbol("vega_selection_getter");function OK(e){return(!e.getter||!e.getter[nB])&&(e.getter=Co(e.field),e.getter[nB]=!0),e.getter}const IL="intersect",iB="union",zEe="vlMulti",qEe="vlPoint",aB="or",jEe="and",tl="_vgsid_",y_=Co(tl),UEe="E",BEe="R",VEe="R-E",WEe="R-LE",GEe="R-RE",HEe="E-LT",YEe="E-LTE",XEe="E-GT",ZEe="E-GTE",JEe="E-VALID",KEe="E-ONE",d$="index:unit";function rB(e,t){for(var n=t.fields,i=t.values,a=n.length,r=0,o,s;r<a;++r)if(s=n[r],o=OK(s)(e),sf(o)&&(o=ua(o)),sf(i[r])&&(i[r]=ua(i[r])),ye(i[r])&&sf(i[r][0])&&(i[r]=i[r].map(ua)),s.type===UEe){if(ye(i[r])?!i[r].includes(o):o!==i[r])return!1}else if(s.type===BEe){if(!rg(o,i[r]))return!1}else if(s.type===GEe){if(!rg(o,i[r],!0,!1))return!1}else if(s.type===VEe){if(!rg(o,i[r],!1,!1))return!1}else if(s.type===WEe){if(!rg(o,i[r],!1,!0))return!1}else if(s.type===HEe){if(o>=i[r])return!1}else if(s.type===YEe){if(o>i[r])return!1}else if(s.type===XEe){if(o<=i[r])return!1}else if(s.type===ZEe){if(o<i[r])return!1}else if(s.type===JEe){if(o===null||isNaN(o))return!1}else if(s.type===KEe&&i[r].indexOf(o)===-1)return!1;return!0}function QEe(e,t,n){for(var i=this.context.data[e],a=i?i.values.value:[],r=i?i[d$]&&i[d$].value:void 0,o=n===IL,s=a.length,l=0,u,d,c,g,v;l<s;++l)if(u=a[l],r&&o){if(d=d||{},c=d[g=u.unit]||0,c===-1)continue;if(v=rB(t,u),d[g]=v?-1:++c,v&&r.size===1)return!0;if(!v&&c===r.get(g).count)return!1}else if(v=rB(t,u),o^v)return v;return s&&o}const DK=Om(y_),eSe=DK.left,tSe=DK.right;function nSe(e,t,n){const i=this.context.data[e],a=i?i.values.value:[],r=i?i[d$]&&i[d$].value:void 0,o=n===IL,s=y_(t),l=eSe(a,s);if(l===a.length||y_(a[l])!==s)return!1;if(r&&o){if(r.size===1)return!0;if(tSe(a,s)-l<r.size)return!1}return!0}function iSe(e,t){return e.map(n=>dt(t.fields?{values:t.fields.map(i=>OK(i)(n.datum))}:{[tl]:y_(n.datum)},t))}function aSe(e,t,n,i){for(var a=this.context.data[e],r=a?a.values.value:[],o={},s={},l={},u,d,c,g,v,b,x,k,w,E,T=r.length,O=0,D,P;O<T;++O)if(u=r[O],g=u.unit,d=u.fields,c=u.values,d&&c){for(D=0,P=d.length;D<P;++D)v=d[D],x=o[v.field]||(o[v.field]={}),k=x[g]||(x[g]=[]),l[v.field]=w=v.type.charAt(0),E=wA[`${w}_union`],x[g]=E(k,Le(c[D]));n&&(k=s[g]||(s[g]=[]),k.push(Le(c).reduce((R,M,q)=>(R[d[q].field]=M,R),{})))}else v=tl,b=y_(u),x=o[v]||(o[v]={}),k=x[g]||(x[g]=[]),k.push(b),n&&(k=s[g]||(s[g]=[]),k.push({[tl]:b}));if(t=t||iB,o[tl]?o[tl]=wA[`${tl}_${t}`](...Object.values(o[tl])):Object.keys(o).forEach(R=>{o[R]=Object.keys(o[R]).map(M=>o[R][M]).reduce((M,q)=>M===void 0?q:wA[`${l[R]}_${t}`](M,q))}),r=Object.keys(s),n&&r.length){const R=i?qEe:zEe;o[R]=t===iB?{[aB]:r.reduce((M,q)=>(M.push(...s[q]),M),[])}:{[jEe]:r.map(M=>({[aB]:s[M]}))}}return o}var wA={[`${tl}_union`]:Sse,[`${tl}_intersect`]:$se,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=ua(t[0]),i=ua(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=ua(t[0]),i=ua(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const rSe=":",oSe="@";function PL(e,t,n,i){t[0].type!==yh&&me("First argument to selection functions must be a string literal.");const a=t[0].value,r=t.length>=2&&At(t).value,o="unit",s=oSe+o,l=rSe+a;r===IL&&!Me(i,s)&&(i[s]=n.getData(a).indataRef(n,o)),Me(i,l)||(i[l]=n.getData(a).tuplesRef())}function CK(e){const t=this.context.data[e];return t?t.values.value:[]}function sSe(e,t,n){const i=this.context.data[e]["index:"+t],a=i?i.value.get(n):void 0;return a&&a.count}function lSe(e,t){const n=this.context.dataflow,i=this.context.data[e],a=i.input;return n.pulse(a,n.changeset().remove(Ro).insert(t)),1}function uSe(e,t,n){if(e){const i=this.context.dataflow,a=e.mark.source;i.pulse(a,i.changeset().encode(e,t))}return n!==void 0?n:e}const g0=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},dSe=g0("format"),RK=g0("timeFormat"),fSe=g0("utcFormat"),cSe=g0("timeParse"),hSe=g0("utcParse"),n1=new Date(2e3,0,1);function uE(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(n1.setYear(2e3),n1.setMonth(e),n1.setDate(t),RK.call(this,n1,n))}function pSe(e){return uE.call(this,e,1,"%B")}function gSe(e){return uE.call(this,e,1,"%b")}function mSe(e){return uE.call(this,0,2+e,"%A")}function ySe(e){return uE.call(this,0,2+e,"%a")}const vSe=":",bSe="@",tR="%",IK="$";function FL(e,t,n,i){t[0].type!==yh&&me("First argument to data functions must be a string literal.");const a=t[0].value,r=vSe+a;if(!Me(r,i))try{i[r]=n.getData(a).tuplesRef()}catch{}}function _Se(e,t,n,i){t[0].type!==yh&&me("First argument to indata must be a string literal."),t[1].type!==yh&&me("Second argument to indata must be a string literal.");const a=t[0].value,r=t[1].value,o=bSe+r;Me(o,i)||(i[o]=n.getData(a).indataRef(n,r))}function Ua(e,t,n,i){if(t[0].type===yh)oB(n,i,t[0].value);else for(e in n.scales)oB(n,i,e)}function oB(e,t,n){const i=tR+n;if(!Me(t,i))try{t[i]=e.scaleRef(n)}catch{}}function Nl(e,t){if(Ne(e)){const n=t.scales[e];return n&&aj(n.value)?n.value:void 0}else if(ft(e))return aj(e)?e:void 0}function xSe(e,t,n){t.__bandwidth=a=>a&&a.bandwidth?a.bandwidth():0,n._bandwidth=Ua,n._range=Ua,n._scale=Ua;const i=a=>"_["+(a.type===yh?Oe(tR+a.value):Oe(tR)+"+"+e(a))+"]";return{_bandwidth:a=>`this.__bandwidth(${i(a[0])})`,_range:a=>`${i(a[0])}.range()`,_scale:a=>`${i(a[0])}(${e(a[1])})`}}function NL(e,t){return function(n,i,a){if(n){const r=Nl(n,(a||this).context);return r&&r.path[e](i)}else return t(i)}}const wSe=NL("area",EEe),kSe=NL("bounds",REe),$Se=NL("centroid",MEe);function ESe(e,t){const n=Nl(e,(t||this).context);return n&&n.scale()}function SSe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function LL(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function TSe(){return LL(this.context.dataflow,"warn",arguments)}function ASe(){return LL(this.context.dataflow,"info",arguments)}function OSe(){return LL(this.context.dataflow,"debug",arguments)}function kA(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function nR(e){const t=yf(e),n=kA(t.r),i=kA(t.g),a=kA(t.b);return .2126*n+.7152*i+.0722*a}function DSe(e,t){const n=nR(e),i=nR(t),a=Math.max(n,i),r=Math.min(n,i);return(a+.05)/(r+.05)}function CSe(){const e=[].slice.call(arguments);return e.unshift({}),dt(...e)}function PK(e,t){return e===t||e!==e&&t!==t?!0:ye(e)?ye(t)&&e.length===t.length?RSe(e,t):!1:Fe(e)&&Fe(t)?FK(e,t):!1}function RSe(e,t){for(let n=0,i=e.length;n<i;++n)if(!PK(e[n],t[n]))return!1;return!0}function FK(e,t){for(const n in e)if(!PK(e[n],t[n]))return!1;return!0}function sB(e){return t=>FK(e,t)}function ISe(e,t,n,i,a,r){const o=this.context.dataflow,s=this.context.data[e],l=s.input,u=o.stamp();let d=s.changes,c,g;if(o._trigger===!1||!(l.value.length||t||i))return 0;if((!d||d.stamp<u)&&(s.changes=d=o.changeset(),d.stamp=u,o.runAfter(()=>{s.modified=!0,o.pulse(l,d).run()},!0,1)),n&&(c=n===!0?Ro:ye(n)||A2(n)?n:sB(n),d.remove(c)),t&&d.insert(t),i&&(c=sB(i),l.value.some(c)?d.remove(c):d.insert(i)),a)for(g in r)d.modify(a,g,r[g]);return 1}function PSe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function FSe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const lB={};function NSe(e,t){const n=lB[t]||(lB[t]=Co(t));return ye(e)?e.map(n):n(e)}function dE(e){return ye(e)||ArrayBuffer.isView(e)?e:null}function ML(e){return dE(e)||(Ne(e)?e:null)}function LSe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return dE(e).join(...n)}function MSe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ML(e).indexOf(...n)}function zSe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ML(e).lastIndexOf(...n)}function qSe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ML(e).slice(...n)}function jSe(e,t,n){return ft(n)&&me("Function argument passed to replace."),!Ne(t)&&!XP(t)&&me("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function USe(e){return dE(e).slice().reverse()}function BSe(e){return dE(e).slice().sort(Mm)}function VSe(e,t,n){return KF(e||0,t||0,n||0)}function WSe(e,t){const n=Nl(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function GSe(e,t){const n=Nl(e,(t||this).context);return n?n.copy():void 0}function HSe(e,t){const n=Nl(e,(t||this).context);return n?n.domain():[]}function YSe(e,t,n){const i=Nl(e,(n||this).context);return i?ye(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function XSe(e,t){const n=Nl(e,(t||this).context);return n&&n.range?n.range():[]}function ZSe(e,t,n){const i=Nl(e,(n||this).context);return i?i(t):void 0}function JSe(e,t,n,i,a){e=Nl(e,(a||this).context);const r=DX(t,n);let o=e.domain(),s=o[0],l=At(o),u=ba;return l-s?u=vX(e,s,l):e=(e.interpolator?Mt("sequential")().interpolator(e.interpolator()):Mt("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,l=1]),e.ticks&&(o=e.ticks(+i||15),s!==o[0]&&o.unshift(s),l!==At(o)&&o.push(l)),o.forEach(d=>r.stop(u(d),e(d))),r}function KSe(e,t,n){const i=Nl(e,(n||this).context);return function(a){return i?i.path.context(a)(t):""}}function QSe(e){let t=null;return function(n){return n?r_(n,t=t||em(e)):e}}const NK=e=>e.data;function LK(e,t){const n=CK.call(t,e);return n.root&&n.root.lookup||{}}function eTe(e,t,n){const i=LK(e,this),a=i[t],r=i[n];return a&&r?a.path(r).map(NK):void 0}function tTe(e,t){const n=LK(e,this)[t];return n?n.ancestors().map(NK):void 0}const MK=()=>typeof window<"u"&&window||null;function nTe(){const e=MK();return e?e.screen:{}}function iTe(){const e=MK();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function aTe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function zK(e,t,n){if(!e)return[];const[i,a]=e,r=new Jn().set(i[0],i[1],a[0],a[1]),o=n||this.context.dataflow.scenegraph().root;return TZ(o,r,rTe(t))}function rTe(e){let t=null;if(e){const n=Le(e.marktype),i=Le(e.markname);t=a=>(!n.length||n.some(r=>a.marktype===r))&&(!i.length||i.some(r=>a.name===r))}return t}function oTe(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Le(e);const a=e[e.length-1];return a===void 0||Math.hypot(a[0]-t,a[1]-n)>i?[...e,[t,n]]:e}function sTe(e){return Le(e).reduce((t,n,i)=>{let[a,r]=n;return t+=i==0?`M ${a},${r} `:i===e.length-1?" Z":`L ${a},${r} `},"")}function lTe(e,t,n){const{x:i,y:a,mark:r}=n,o=new Jn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(i,a),zK([[o.x1,o.y1],[o.x2,o.y2]],e,r).filter(l=>uTe(l.x,l.y,t))}function uTe(e,t,n){let i=0;for(let a=0,r=n.length-1;a<n.length;r=a++){const[o,s]=n[r],[l,u]=n[a];u>t!=s>t&&e<(o-l)*(t-u)/(s-u)+l&&i++}return i&1}const v_={random(){return Po()},cumulativeNormal:I2,cumulativeLogNormal:vF,cumulativeUniform:wF,densityNormal:hF,densityLogNormal:yF,densityUniform:xF,quantileNormal:P2,quantileLogNormal:bF,quantileUniform:kF,sampleNormal:R2,sampleLogNormal:mF,sampleUniform:_F,isArray:ye,isBoolean:Mf,isDate:sf,isDefined(e){return e!==void 0},isNumber:Lt,isObject:Fe,isRegExp:XP,isString:Ne,isTuple:A2,isValid(e){return e!=null&&e===e},toBoolean:JP,toDate(e){return KP(e)},toNumber:ua,toString:QP,indexof:MSe,join:LSe,lastindexof:zSe,replace:jSe,reverse:USe,sort:BSe,slice:qSe,flush:AH,lerp:DH,merge:CSe,pad:IH,peek:At,pluck:NSe,span:G_,inrange:rg,truncate:PH,rgb:yf,lab:Zw,hcl:Jw,hsl:Yw,luminance:nR,contrast:DSe,sequence:Lr,format:dSe,utcFormat:fSe,utcParse:hSe,utcOffset:HH,utcSequence:ZH,timeFormat:RK,timeParse:cSe,timeOffset:GH,timeSequence:XH,timeUnitSpecifier:FH,monthFormat:pSe,monthAbbrevFormat:gSe,dayFormat:mSe,dayAbbrevFormat:ySe,quarter:$H,utcquarter:EH,week:LH,utcweek:qH,dayofyear:NH,utcdayofyear:zH,warn:TSe,info:ASe,debug:OSe,extent(e){return $l(e)},inScope:SSe,intersect:zK,clampRange:SH,pinchDistance:PSe,pinchAngle:FSe,screen:nTe,containerSize:aTe,windowSize:iTe,bandspace:VSe,setdata:lSe,pathShape:QSe,panLinear:_H,panLog:xH,panPow:wH,panSymlog:kH,zoomLinear:VP,zoomLog:WP,zoomPow:mk,zoomSymlog:GP,encode:uSe,modify:ISe,lassoAppend:oTe,lassoPath:sTe,intersectLasso:lTe},dTe=["view","item","group","xy","x","y"],fTe="event.vega.",qK="this.",zL={},jK={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Oe(IK+e)}]`,functions:cTe,constants:pK,visitors:zL},iR=mK(jK);function cTe(e){const t=gK(e);dTe.forEach(n=>t[n]=fTe+n);for(const n in v_)t[n]=qK+n;return dt(t,xSe(e,v_,zL)),t}function Yn(e,t,n){return arguments.length===1?v_[e]:(v_[e]=t,n&&(zL[e]=n),iR&&(iR.functions[e]=qK+e),this)}Yn("bandwidth",WSe,Ua);Yn("copy",GSe,Ua);Yn("domain",HSe,Ua);Yn("range",XSe,Ua);Yn("invert",YSe,Ua);Yn("scale",ZSe,Ua);Yn("gradient",JSe,Ua);Yn("geoArea",wSe,Ua);Yn("geoBounds",kSe,Ua);Yn("geoCentroid",$Se,Ua);Yn("geoShape",KSe,Ua);Yn("geoScale",ESe,Ua);Yn("indata",sSe,_Se);Yn("data",CK,FL);Yn("treePath",eTe,FL);Yn("treeAncestors",tTe,FL);Yn("vlSelectionTest",QEe,PL);Yn("vlSelectionIdTest",nSe,PL);Yn("vlSelectionResolve",aSe,PL);Yn("vlSelectionTuples",iSe);function Tl(e,t){const n={};let i;try{e=Ne(e)?e:Oe(e)+"",i=hK(e)}catch{me("Expression parse error: "+e)}i.visit(r=>{if(r.type!==oK)return;const o=r.callee.name,s=jK.visitors[o];s&&s(o,r.arguments,t,n)});const a=iR(i);return a.globals.forEach(r=>{const o=IK+r;!Me(n,o)&&t.getSignal(r)&&(n[o]=t.signalRef(r))}),{$expr:dt({code:a.code},t.options.ast?{ast:i}:null),$fields:a.fields,$params:n}}function hTe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const pTe=bs(["rule"]),uB=bs(["group","image","rect"]);function gTe(e,t){let n="";return pTe[t]||(e.x2&&(e.x?(uB[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(uB[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function qL(e){return(e+"").toLowerCase()}function mTe(e){return qL(e)==="operator"}function yTe(e){return qL(e)==="collect"}function av(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function vTe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var bTe={operator:(e,t)=>av(e,["_"],t.code),parameter:(e,t)=>av(e,["datum","_"],t.code),event:(e,t)=>av(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return av(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let a="var o=item,datum=o.datum,m=0,$;";for(const r in i){const o="o["+Oe(r)+"]";a+=`$=${i[r].code};if(${o}!==$)${o}=$,m=1;`}return a+=gTe(i,n),a+="return m;",av(e,["item","_"],a)},codegen:{get(e){const t=`[${e.map(Oe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(r,o)=>{const s=t[o];let l,u;return r.path?(l=`a${r.path}`,u=`b${r.path}`):((n=n||{})["f"+o]=r,l=`this.f${o}(a)`,u=`this.f${o}(b)`),vTe(l,u,-s,s)},a=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?a.bind(n):a}}};function _Te(e){const t=this;mTe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function xTe(e){const t=this;if(e.params){const n=t.get(e.id);n||me("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function wTe(e,t){t=t||{};const n=this;for(const i in e){const a=e[i];t[i]=ye(a)?a.map(r=>dB(r,n,t)):dB(a,n,t)}return t}function dB(e,t,n){if(!e||!Fe(e))return e;for(let i=0,a=fB.length,r;i<a;++i)if(r=fB[i],Me(e,r.key))return r.parse(e,t,n);return e}var fB=[{key:"$ref",parse:kTe},{key:"$key",parse:ETe},{key:"$expr",parse:$Te},{key:"$field",parse:STe},{key:"$encode",parse:ATe},{key:"$compare",parse:TTe},{key:"$context",parse:OTe},{key:"$subflow",parse:DTe},{key:"$tupleid",parse:CTe}];function kTe(e,t){return t.get(e.$ref)||me("Operator not defined: "+e.$ref)}function $Te(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Er(t.parameterExpression(e.$expr),e.$fields))}function ETe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=ZP(e.$key,e.$flat,t.expr.codegen))}function STe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Co(e.$field,e.$name,t.expr.codegen))}function TTe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Le(e.$compare).map(a=>a&&a.$tupleid?Ze:a);return t.fn[n]||(t.fn[n]=HP(i,e.$order,t.expr.codegen))}function ATe(e,t){const n=e.$encode,i={};for(const a in n){const r=n[a];i[a]=Er(t.encodeExpression(r.$expr),r.$fields),i[a].output=r.$output}return i}function OTe(e,t){return t}function DTe(e,t){const n=e.$subflow;return function(i,a,r){const o=t.fork().parse(n),s=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(r),s.detachSubflow=()=>t.detach(o),s}}function CTe(){return Ze}function RTe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,a;e.source?i=t.events(e.source,e.type,n):e.merge&&(a=e.merge.map(r=>t.get(r)),i=a[0].merge.apply(a[0],a.slice(1))),e.between&&(a=e.between.map(r=>t.get(r)),i=i.between(a[0],a[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&me("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function ITe(e){var t=this,n=Fe(n=e.source)?n.$ref:n,i=t.get(n),a=null,r=e.update,o=void 0;i||me("Source not defined: "+e.source),a=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),r&&r.$expr&&(r.$params&&(o=t.parseParameters(r.$params)),r=t.handlerExpression(r.$expr)),t.update(e,i,a,r,o)}const PTe={skip:!0};function FTe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(r=>{const o=t.signals[r];e.signals(r,o)&&(i[r]=o.value)})}if(e.data){var a=n.data={};Object.keys(t.data).forEach(r=>{const o=t.data[r];e.data(r,o)&&(a[r]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(r=>r.getState(e))),n}function NTe(e){var t=this,n=t.dataflow,i=e.data,a=e.signals;Object.keys(a||{}).forEach(r=>{n.update(t.signals[r],a[r],PTe)}),Object.keys(i||{}).forEach(r=>{n.pulse(t.data[r].input,n.changeset().remove(Ro).insert(i[r]))}),(e.subcontext||[]).forEach((r,o)=>{const s=t.subcontext[o];s&&s.setState(r)})}function UK(e,t,n,i){return new BK(e,t,n,i)}function BK(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||bTe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function cB(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}BK.prototype=cB.prototype={fork(){const e=new cB(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,a=e.value;if(n.set(e.id,t),yTe(e.type)&&a&&(a.$ingest?i.ingest(t,a.$ingest,a.$format):a.$request?i.preload(t,a.$request,a.$format):i.pulse(t,i.changeset().insert(a))),e.root&&(n.root=t),e.parent){let r=n.get(e.parent.$ref);r?(i.connect(r,[t]),t.targets().add(r)):(n.unresolved=n.unresolved||[]).push(()=>{r=n.get(e.parent.$ref),i.connect(r,[t]),t.targets().add(r)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const r in e.data){const o=n.data[r]||(n.data[r]={});e.data[r].forEach(s=>o[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[qL(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,a){this.dataflow.on(t,n,i,a,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:hTe,parseOperator:_Te,parseOperatorParameters:xTe,parseParameters:wTe,parseStream:RTe,parseUpdate:ITe,getState:FTe,setState:NTe};function LTe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),VK(t,e.description()))}function VK(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function MTe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const $A="default";function zTe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:$A,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const a=t.value,r=a?Ne(a)?a:a.user:$A,o=i.item&&i.item.cursor||null;return a&&r===a.user&&o==a.item?a:{user:r,item:o}}),e.add(null,function(n){let i=n.cursor,a=this.value;return Ne(i)||(a=i.item,i=i.user),aR(e,i&&i!==$A?i:a||i),a},{cursor:t})}function aR(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function f$(e,t){var n=e._runtime.data;return Me(n,t)||me("Unrecognized data set: "+t),n[t]}function qTe(e,t){return arguments.length<2?f$(this,e).values.value:fE.call(this,e,jh().remove(Ro).insert(t))}function fE(e,t){mY(t)||me("Second argument to changes must be a changeset.");const n=f$(this,e);return n.modified=!0,this.pulse(n.input,t)}function jTe(e,t){return fE.call(this,e,jh().insert(t))}function UTe(e,t){return fE.call(this,e,jh().remove(t))}function WK(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function GK(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function cE(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function BTe(e){var t=cE(e),n=WK(e),i=GK(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(a=>{try{a(n,i)}catch(r){e.error(r)}})}function VTe(e,t,n){var i=e._renderer,a=i&&i.canvas(),r,o,s;return a&&(s=cE(e),o=t.changedTouches?t.changedTouches[0]:t,r=J2(o,a),r[0]-=s[0],r[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=WTe(e,n,r),t}function WTe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function a(o){var s=i,l;if(o){for(l=t;l;l=l.mark.group)if(l.mark.name===o){s=l;break}}return s&&s.mark&&s.mark.interactive?s:{}}function r(o){if(!o)return n;Ne(o)&&(o=a(o));const s=n.slice();for(;o;)s[0]-=o.x||0,s[1]-=o.y||0,o=o.mark&&o.mark.group;return s}return{view:_a(e),item:_a(t||{}),group:a,xy:r,x:o=>r(o)[0],y:o=>r(o)[1]}}const hB="view",GTe="timer",HTe="window",YTe={trap:!1};function XTe(e){const t=dt({defaults:{}},e),n=(i,a)=>{a.forEach(r=>{ye(i[r])&&(i[r]=bs(i[r]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function HK(e,t,n,i){e._eventListeners.push({type:n,sources:Le(t),handler:i})}function ZTe(e,t){var n=e._eventConfig.defaults,i=n.prevent,a=n.allow;return i===!1||a===!0?!1:i===!0||a===!1?!0:i?i[t]:a?!a[t]:e.preventDefault()}function i1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Fe(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function JTe(e,t,n){var i=this,a=new C2(n),r=function(u,d){i.runAsync(null,()=>{e===hB&&ZTe(i,t)&&u.preventDefault(),a.receive(VTe(i,u,d))})},o;if(e===GTe)i1(i,"timer",t)&&i.timer(r,t);else if(e===hB)i1(i,"view",t)&&i.addEventListener(t,r,YTe);else if(e===HTe?i1(i,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&i1(i,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)i.warn("Can not resolve event source: "+e);else{for(var s=0,l=o.length;s<l;++s)o[s].addEventListener(t,r);HK(i,o,t,r)}return a}function pB(e){return e.item}function gB(e){return e.item.mark.source}function mB(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function KTe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",pB),gB,mB(e)),this.on(this.events("view","pointerout",pB),gB,mB(t)),this}function QTe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,a,r,o,s,l;for(a=t.length;--a>=0;)t[a].stop();for(a=i.length;--a>=0;)for(o=i[a],r=o.sources.length;--r>=0;)o.sources[r].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),a=n.length;--a>=0;)l=n[a].type,s=n[a].handler,this._handler.off(l,s);return this}function Ur(e,t,n){const i=document.createElement(e);for(const a in t)i.setAttribute(a,t[a]);return n!=null&&(i.textContent=n),i}const eAe="vega-bind",tAe="vega-bind-name",nAe="vega-bind-radio";function iAe(e,t,n){if(!t)return;const i=n.param;let a=n.state;return a||(a=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(i.signal)&&e.runAsync(null,()=>{a.source=!0,e.signal(i.signal,o)})}},i.debounce&&(a.update=YP(i.debounce,a.update))),(i.input==null&&i.element?aAe:oAe)(a,t,i,e),a.active||(e.on(e._signals[i.signal],null,()=>{a.source?a.source=!1:a.set(e.signal(i.signal))}),a.active=!0),a}function aAe(e,t,n,i){const a=n.event||"input",r=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(a,r),HK(i,t,a,r),e.set=o=>{t.value=o,t.dispatchEvent(rAe(a))}}function rAe(e){return typeof Event<"u"?new Event(e):{type:e}}function oAe(e,t,n,i){const a=i.signal(n.signal),r=Ur("div",{class:eAe}),o=n.input==="radio"?r:r.appendChild(Ur("label"));o.appendChild(Ur("span",{class:tAe},n.name||n.signal)),t.appendChild(r);let s=sAe;switch(n.input){case"checkbox":s=lAe;break;case"select":s=uAe;break;case"radio":s=dAe;break;case"range":s=fAe;break}s(e,o,n,a)}function sAe(e,t,n,i){const a=Ur("input");for(const r in n)r!=="signal"&&r!=="element"&&a.setAttribute(r==="input"?"type":r,n[r]);a.setAttribute("name",n.signal),a.value=i,t.appendChild(a),a.addEventListener("input",()=>e.update(a.value)),e.elements=[a],e.set=r=>a.value=r}function lAe(e,t,n,i){const a={type:"checkbox",name:n.signal};i&&(a.checked=!0);const r=Ur("input",a);t.appendChild(r),r.addEventListener("change",()=>e.update(r.checked)),e.elements=[r],e.set=o=>r.checked=!!o||null}function uAe(e,t,n,i){const a=Ur("select",{name:n.signal}),r=n.labels||[];n.options.forEach((o,s)=>{const l={value:o};c$(o,i)&&(l.selected=!0),a.appendChild(Ur("option",l,(r[s]||o)+""))}),t.appendChild(a),a.addEventListener("change",()=>{e.update(n.options[a.selectedIndex])}),e.elements=[a],e.set=o=>{for(let s=0,l=n.options.length;s<l;++s)if(c$(n.options[s],o)){a.selectedIndex=s;return}}}function dAe(e,t,n,i){const a=Ur("span",{class:nAe}),r=n.labels||[];t.appendChild(a),e.elements=n.options.map((o,s)=>{const l={type:"radio",name:n.signal,value:o};c$(o,i)&&(l.checked=!0);const u=Ur("input",l);u.addEventListener("change",()=>e.update(o));const d=Ur("label",{},(r[s]||o)+"");return d.prepend(u),a.appendChild(d),u}),e.set=o=>{const s=e.elements,l=s.length;for(let u=0;u<l;++u)c$(s[u].value,o)&&(s[u].checked=!0)}}function fAe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const a=n.max!=null?n.max:Math.max(100,+i)||100,r=n.min||Math.min(0,a,+i)||0,o=n.step||mf(r,a,100),s=Ur("input",{type:"range",name:n.signal,min:r,max:a,step:o});s.value=i;const l=Ur("span",{},+i);t.appendChild(s),t.appendChild(l);const u=()=>{l.textContent=s.value,e.update(+s.value)};s.addEventListener("input",u),s.addEventListener("change",u),e.elements=[s],e.set=d=>{s.value=d,l.textContent=d}}function c$(e,t){return e===t||e+""==t+""}function YK(e,t,n,i,a,r){return t=t||new i(e.loader()),t.initialize(n,WK(e),GK(e),cE(e),a,r).background(e.background())}function jL(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function cAe(e,t,n,i){const a=new i(e.loader(),jL(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,cE(e),e);return t&&t.handlers().forEach(r=>{a.on(r.type,r.handler)}),a}function hAe(e,t){const n=this,i=n._renderType,a=n._eventConfig.bind,r=K2(i);e=n._el=e?EA(n,e,!0):null,LTe(n),r||n.error("Unrecognized renderer type: "+i);const o=r.handler||l0,s=e?r.renderer:r.headless;return n._renderer=s?YK(n,n._renderer,e,s):null,n._handler=cAe(n,n._handler,e,o),n._redraw=!0,e&&a!=="none"&&(t=t?n._elBind=EA(n,t,!0):e.appendChild(Ur("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&a!=="container"&&(l.element=EA(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{iAe(n,l.element||t,l)})),n}function EA(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const rv=e=>+e||0,pAe=e=>({top:e,bottom:e,left:e,right:e});function yB(e){return Fe(e)?{top:rv(e.top),bottom:rv(e.bottom),left:rv(e.left),right:rv(e.right)}:pAe(rv(e))}async function UL(e,t,n,i){const a=K2(t),r=a&&a.headless;return r||me("Unrecognized renderer type: "+t),await e.runAsync(),YK(e,null,null,r,n,i).renderAsync(e._scenegraph.root)}async function gAe(e,t){e!==Vd.Canvas&&e!==Vd.SVG&&e!==Vd.PNG&&me("Unrecognized image type: "+e);const n=await UL(this,e,t);return e===Vd.SVG?mAe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function mAe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function yAe(e,t){return(await UL(this,Vd.Canvas,e,t)).canvas()}async function vAe(e){return(await UL(this,Vd.SVG,e)).svg()}function bAe(e,t,n){return UK(e,Zg,v_,n).parse(t)}function _Ae(e){var t=this._runtime.scales;return Me(t,e)||me("Unrecognized scale or projection: "+e),t[e].value}var XK="width",ZK="height",BL="padding",vB={skip:!0};function JK(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===BL?i.left+i.right:0)}function KK(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===BL?i.top+i.bottom:0)}function xAe(e){var t=e._signals,n=t[XK],i=t[ZK],a=t[BL];function r(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=JK(e,s.size),r()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=KK(e,s.size),r()},{size:i});const o=e.add(null,r,{pad:a});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=a.rank+1}function wAe(e,t,n,i,a,r){this.runAfter(o=>{let s=0;o._autosize=0,o.width()!==n&&(s=1,o.signal(XK,n,vB),o._resizeWidth.skip(!0)),o.height()!==i&&(s=1,o.signal(ZK,i,vB),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==a[0]||o._origin[1]!==a[1])&&(o._resize=1,o._origin=a),s&&o.run("enter"),r&&o.runAfter(l=>l.resize())},!1,1)}function kAe(e){return this._runtime.getState(e||{data:$Ae,signals:EAe,recurse:!0})}function $Ae(e,t){return t.modified&&ye(t.input.value)&&!e.startsWith("_:vega:_")}function EAe(e,t){return!(e==="parent"||t instanceof Zg.proxy)}function SAe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function TAe(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Hue(n,t))}function AAe(e,t,n,i){const a=e.element();a&&a.setAttribute("title",OAe(i))}function OAe(e){return e==null?"":ye(e)?QK(e):Fe(e)&&!sf(e)?DAe(e):e+""}function DAe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ye(n)?QK(n):eQ(n))}).join(`
`)}function QK(e){return"["+e.map(eQ).join(", ")+"]"}function eQ(e){return ye(e)?"[]":Fe(e)&&!sf(e)?"{}":e}function CAe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function tQ(e,t){const n=this;if(t=t||{},_g.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const r=dt({},e.locale,t.locale);n.locale(oY(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Vd.Canvas,n._scenegraph=new eZ;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||AAe,n._redraw=!0,n._handler=new l0().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=XTe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const a=bAe(n,e,t.expr);n._runtime=a,n._signals=a.signals,n._bind=(e.bindings||[]).map(r=>({state:null,param:dt({},r)})),a.root&&a.root.set(i),i.source=a.data.root.input,n.pulse(a.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=JK(n,n._width),n._viewHeight=KK(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,xAe(n),MTe(n),zTe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function a1(e,t){return Me(e._signals,t)?e._signals[t]:me("Unrecognized signal name: "+Oe(t))}function nQ(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function bB(e,t,n,i){let a=nQ(n,i);return a||(a=jL(e,()=>i(t,n.value)),a.handler=i,e.on(n,null,a)),e}function _B(e,t,n){const i=nQ(t,n);return i&&t._targets.remove(i),e}De(tQ,_g,{async evaluate(e,t,n){if(await _g.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,BTe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&V1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&VK(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=a1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",yB(e)):yB(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(K2(e)||me("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(_g.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(a1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:wAe,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=jL(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,a,r;--i>=0;)if(r=n[i].type,a=n[i].handler,e===r&&(t===a||t===a.raw)){this._handler.off(r,a);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return bB(this,e,a1(this,e),t)},removeSignalListener(e,t){return _B(this,a1(this,e),t)},addDataListener(e,t){return bB(this,e,f$(this,e).values,t)},removeDataListener(e,t){return _B(this,f$(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=aR(this,null);this._globalCursor=!!e,t&&aR(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:TAe,events:JTe,finalize:QTe,hover:KTe,data:qTe,change:fE,insert:jTe,remove:UTe,scale:_Ae,initialize:hAe,toImageURL:gAe,toCanvas:yAe,toSVG:vAe,getState:kAe,setState:SAe,_watchPixelRatio:CAe});const RAe="view",h$="[",p$="]",iQ="{",aQ="}",IAe=":",rQ=",",PAe="@",FAe=">",NAe=/[[\]{}]/,LAe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let oQ,sQ;function qf(e,t,n){return oQ=t||RAe,sQ=n||LAe,lQ(e.trim()).map(rR)}function MAe(e){return sQ[e]}function xb(e,t,n,i,a){const r=e.length;let o=0,s;for(;t<r;++t){if(s=e[t],!o&&s===n)return t;a&&a.indexOf(s)>=0?--o:i&&i.indexOf(s)>=0&&++o}return t}function lQ(e){const t=[],n=e.length;let i=0,a=0;for(;a<n;)a=xb(e,a,rQ,h$+iQ,p$+aQ),t.push(e.substring(i,a).trim()),i=++a;if(t.length===0)throw"Empty event selector: "+e;return t}function rR(e){return e[0]==="["?zAe(e):qAe(e)}function zAe(e){const t=e.length;let n=1,i;if(n=xb(e,n,p$,h$,p$),n===t)throw"Empty between selector: "+e;if(i=lQ(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==FAe)throw"Expected '>' after between selector: "+e;i=i.map(rR);const a=rR(e.slice(1).trim());return a.between?{between:i,stream:a}:(a.between=i,a)}function qAe(e){const t={source:oQ},n=[];let i=[0,0],a=0,r=0,o=e.length,s=0,l,u;if(e[o-1]===aQ){if(s=e.lastIndexOf(iQ),s>=0){try{i=jAe(e.substring(s+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),o=e.length}else throw"Unmatched right brace: "+e;s=0}if(!o)throw e;if(e[0]===PAe&&(a=++s),l=xb(e,s,IAe),l<o&&(n.push(e.substring(r,l).trim()),r=s=++l),s=xb(e,s,h$),s===o)n.push(e.substring(r,o).trim());else if(n.push(e.substring(r,s).trim()),u=[],r=++s,r===o)throw"Unmatched left bracket: "+e;for(;s<o;){if(s=xb(e,s,p$),s===o)throw"Unmatched left bracket: "+e;if(u.push(e.substring(r,s).trim()),s<o-1&&e[++s]!==h$)throw"Expected left bracket: "+e;r=++s}if(!(o=n.length)||NAe.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],a?t.markname=n[0].slice(1):MAe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function jAe(e){const t=e.split(rQ);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function UAe(e){return Fe(e)?e:{type:e||"pad"}}const ov=e=>+e||0,BAe=e=>({top:e,bottom:e,left:e,right:e});function VAe(e){return Fe(e)?e.signal?e:{top:ov(e.top),bottom:ov(e.bottom),left:ov(e.left),right:ov(e.right)}:BAe(ov(e))}const wi=e=>Fe(e)&&!ye(e)?dt({},e):{value:e};function xB(e,t,n,i){return n!=null?(Fe(n)&&!ye(n)||ye(n)&&n.length&&Fe(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Yi(e,t,n){for(const i in t)xB(e,i,t[i]);for(const i in n)xB(e,i,n[i],"update")}function Gm(e,t,n){for(const i in t)n&&Me(n,i)||(e[i]=dt(e[i]||{},t[i]));return e}function Bp(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const VL="mark",WL="frame",GL="scope",WAe="axis",GAe="axis-domain",HAe="axis-grid",YAe="axis-label",XAe="axis-tick",ZAe="axis-title",JAe="legend",KAe="legend-band",QAe="legend-entry",eOe="legend-gradient",uQ="legend-label",tOe="legend-symbol",nOe="legend-title",iOe="title",aOe="title-text",rOe="title-subtitle";function oOe(e,t,n,i,a){const r={},o={};let s,l,u,d;l="lineBreak",t==="text"&&a[l]!=null&&!Bp(l,e)&&SA(r,l,a[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===WL?a.group:n===VL?dt({},a.mark,a[t]):null;for(l in d)u=Bp(l,e)||(l==="fill"||l==="stroke")&&(Bp("fill",e)||Bp("stroke",e)),u||SA(r,l,d[l]);Le(i).forEach(c=>{const g=a.style&&a.style[c];for(const v in g)Bp(v,e)||SA(r,v,g[v])}),e=dt({},e);for(l in r)d=r[l],d.signal?(s=s||{})[l]=d:o[l]=d;return e.enter=dt(o,e.enter),s&&(e.update=dt(s,e.update)),e}function SA(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const dQ=e=>Ne(e)?Oe(e):e.signal?`(${e.signal})`:fQ(e);function hE(e){if(e.gradient!=null)return lOe(e);let t=e.signal?`(${e.signal})`:e.color?sOe(e.color):e.field!=null?fQ(e.field):e.value!==void 0?Oe(e.value):void 0;return e.scale!=null&&(t=uOe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${ow(e.exponent)})`),e.mult!=null&&(t+=`*${ow(e.mult)}`),e.offset!=null&&(t+=`+${ow(e.offset)}`),e.round&&(t=`round(${t})`),t}const r1=(e,t,n,i)=>`(${e}(${[t,n,i].map(hE).join(",")})+'')`;function sOe(e){return e.c?r1("hcl",e.h,e.c,e.l):e.h||e.s?r1("hsl",e.h,e.s,e.l):e.l||e.a?r1("lab",e.l,e.a,e.b):e.r||e.g||e.b?r1("rgb",e.r,e.g,e.b):null}function lOe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Oe(n));for(;t.length&&At(t)==null;)t.pop();return t.unshift(dQ(e.gradient)),`gradient(${t.join(",")})`}function ow(e){return Fe(e)?"("+hE(e)+")":e}function fQ(e){return cQ(Fe(e)?e:{datum:e})}function cQ(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):me("Invalid field reference: "+Oe(e));return e.signal||(i=Ne(i)?Il(i).map(Oe).join("]["):cQ(i)),t+"["+i+"]"}function uOe(e,t){const n=dQ(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+ow(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function dOe(e){let t="";return e.forEach(n=>{const i=hE(n);t+=n.test?`(${n.test})?${i}:`:i}),At(t)===":"&&(t+="null"),t}function hQ(e,t,n,i,a,r){const o={};r=r||{},r.encoders={$encode:o},e=oOe(e,t,n,i,a.config);for(const s in e)o[s]=fOe(e[s],t,r,a);return r}function fOe(e,t,n,i){const a={},r={};for(const o in e)e[o]!=null&&(a[o]=hOe(cOe(e[o]),i,n,r));return{$expr:{marktype:t,channels:a},$fields:Object.keys(r),$output:Object.keys(e)}}function cOe(e){return ye(e)?dOe(e):hE(e)}function hOe(e,t,n,i){const a=Tl(e,t);return a.$fields.forEach(r=>i[r]=1),dt(n,a.$params),a.$expr}const pOe="outer",gOe=["value","update","init","react","bind"];function wB(e,t){me(e+' for "outer" push: '+Oe(t))}function pQ(e,t){const n=e.name;if(e.push===pOe)t.signals[n]||wB("No prior signal definition",n),gOe.forEach(i=>{e[i]!==void 0&&wB("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function oR(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function pE(e,t,n,i){return new oR(e,t,n,i)}function g$(e,t){return pE("operator",e,t)}function Xe(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function b_(e,t){return t?{$field:e,$name:t}:{$field:e}}const sR=b_("key");function kB(e,t){return{$compare:e,$order:t}}function mOe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const yOe="ascending",vOe="descending";function bOe(e){return Fe(e)?(e.order===vOe?"-":"+")+gE(e.op,e.field):""}function gE(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const HL="scope",lR="view";function si(e){return e&&e.signal}function _Oe(e){return e&&e.expr}function sw(e){if(si(e))return!0;if(Fe(e)){for(const t in e)if(sw(e[t]))return!0}return!1}function ns(e,t){return e??t}function Jc(e){return e&&e.signal||e}const $B="timer";function __(e,t){return(e.merge?wOe:e.stream?kOe:e.type?$Oe:me("Invalid stream specification: "+Oe(e)))(e,t)}function xOe(e){return e===HL?lR:e||lR}function wOe(e,t){const n=e.merge.map(a=>__(a,t)),i=YL({merge:n},e,t);return t.addStream(i).id}function kOe(e,t){const n=__(e.stream,t),i=YL({stream:n},e,t);return t.addStream(i).id}function $Oe(e,t){let n;e.type===$B?(n=t.event($B,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(xOe(e.source),e.type);const i=YL({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function YL(e,t,n){let i=t.between;return i&&(i.length!==2&&me('Stream "between" parameter must have 2 entries: '+Oe(t)),e.between=[__(i[0],n),__(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(EOe(t.marktype,t.markname,t.markrole)),t.source===HL&&i.push("inScope(event.item)"),i.length&&(e.filter=Tl("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function EOe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const SOe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function TOe(e,t,n){const i=e.encode,a={target:n};let r=e.events,o=e.update,s=[];r||me("Signal update missing events specification."),Ne(r)&&(r=qf(r,t.isSubscope()?HL:lR)),r=Le(r).filter(l=>l.signal||l.scale?(s.push(l),0):1),s.length>1&&(s=[OOe(s)]),r.length&&s.push(r.length>1?{merge:r}:r[0]),i!=null&&(o&&me("Signal encode and update are mutually exclusive."),o="encode(item(),"+Oe(i)+")"),a.update=Ne(o)?Tl(o,t):o.expr!=null?Tl(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:SOe,$params:{$value:t.signalRef(o.signal)}}:me("Invalid signal update specification."),e.force&&(a.options={force:!0}),s.forEach(l=>t.addUpdate(dt(AOe(l,t),a)))}function AOe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):__(e,t)}}function OOe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function DOe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?me("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Tl(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(a=>TOe(a,t,n.id))}const tn=e=>(t,n,i)=>pE(e,n,t||void 0,i),gQ=tn("aggregate"),COe=tn("axisticks"),mQ=tn("bound"),Os=tn("collect"),EB=tn("compare"),ROe=tn("datajoin"),yQ=tn("encode"),IOe=tn("expression"),POe=tn("facet"),FOe=tn("field"),NOe=tn("key"),LOe=tn("legendentries"),MOe=tn("load"),zOe=tn("mark"),qOe=tn("multiextent"),jOe=tn("multivalues"),UOe=tn("overlap"),BOe=tn("params"),vQ=tn("prefacet"),VOe=tn("projection"),WOe=tn("proxy"),GOe=tn("relay"),bQ=tn("render"),HOe=tn("scale"),Vh=tn("sieve"),YOe=tn("sortitems"),_Q=tn("viewlayout"),XOe=tn("values");let ZOe=0;const xQ={min:"min",max:"max",count:"sum"};function JOe(e,t){const n=e.type||"linear";cX(n)||me("Unrecognized scale type: "+Oe(n)),t.addScale(e.name,{type:n,domain:void 0})}function KOe(e,t){const n=t.getScale(e.name).params;let i;n.domain=wQ(e.domain,e,t),e.range!=null&&(n.range=$Q(e,t,n)),e.interpolate!=null&&lDe(e.interpolate,n),e.nice!=null&&(n.nice=sDe(e.nice,t)),e.bins!=null&&(n.bins=oDe(e.bins,t));for(i in e)Me(n,i)||i==="name"||(n[i]=$o(e[i],t))}function $o(e,t){return Fe(e)?e.signal?t.signalRef(e.signal):me("Unsupported object: "+Oe(e)):e}function lw(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>$o(n,t))}function mE(e){me("Can not find data set: "+Oe(e))}function wQ(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&me("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ye(e)?QOe:e.fields?tDe:eDe)(e,t,n)}function QOe(e,t,n){return e.map(i=>$o(i,n))}function eDe(e,t,n){const i=n.getData(e.data);return i||mE(e.data),Qg(t.type)?i.valuesRef(n,e.field,kQ(e.sort,!1)):gX(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function tDe(e,t,n){const i=e.data,a=e.fields.reduce((r,o)=>(o=Ne(o)?{data:i,field:o}:ye(o)||o.signal?nDe(o,n):o,r.push(o),r),[]);return(Qg(t.type)?iDe:gX(t.type)?aDe:rDe)(e,n,a)}function nDe(e,t){const n="_:vega:_"+ZOe++,i=Os({});if(ye(e))i.value={$ingest:e};else if(e.signal){const a="setdata("+Oe(n)+","+e.signal+")";i.params.input=t.signalRef(a)}return t.addDataPipeline(n,[i,Vh({})]),{data:n,field:"data"}}function iDe(e,t,n){const i=kQ(e.sort,!0);let a,r;const o=n.map(u=>{const d=t.getData(u.data);return d||mE(u.data),d.countsRef(t,u.field,i)}),s={groupby:sR,pulse:o};i&&(a=i.op||"count",r=i.field?gE(a,i.field):"count",s.ops=[xQ[a]],s.fields=[t.fieldRef(r)],s.as=[r]),a=t.add(gQ(s));const l=t.add(Os({pulse:Xe(a)}));return r=t.add(XOe({field:sR,sort:t.sortRef(i),pulse:Xe(l)})),Xe(r)}function kQ(e,t){return e&&(!e.field&&!e.op?Fe(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?me("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!xQ[e.op]&&me("Multiple domain scales can not be sorted using "+e.op)),e}function aDe(e,t,n){const i=n.map(a=>{const r=t.getData(a.data);return r||mE(a.data),r.domainRef(t,a.field)});return Xe(t.add(jOe({values:i})))}function rDe(e,t,n){const i=n.map(a=>{const r=t.getData(a.data);return r||mE(a.data),r.extentRef(t,a.field)});return Xe(t.add(qOe({extents:i})))}function oDe(e,t){return e.signal||ye(e)?lw(e,t):t.objectProperty(e)}function sDe(e,t){return e.signal?t.signalRef(e.signal):Fe(e)?{interval:$o(e.interval),step:$o(e.step)}:$o(e)}function lDe(e,t){t.interpolate=$o(e.type||e),e.gamma!=null&&(t.interpolateGamma=$o(e.gamma))}function $Q(e,t,n){const i=t.config.range;let a=e.range;if(a.signal)return t.signalRef(a.signal);if(Ne(a)){if(i&&Me(i,a))return e=dt({},e,{range:i[a]}),$Q(e,t,n);a==="width"?a=[0,{signal:"width"}]:a==="height"?a=Qg(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:me("Unrecognized scale range value: "+Oe(a))}else if(a.scheme){n.scheme=ye(a.scheme)?lw(a.scheme,t):$o(a.scheme,t),a.extent&&(n.schemeExtent=lw(a.extent,t)),a.count&&(n.schemeCount=$o(a.count,t));return}else if(a.step){n.rangeStep=$o(a.step,t);return}else{if(Qg(e.type)&&!ye(a))return wQ(a,e,t);ye(a)||me("Unsupported range type: "+Oe(a))}return a.map(r=>(ye(r)?lw:$o)(r,t))}function uDe(e,t){const n=t.config.projection||{},i={};for(const a in e)a!=="name"&&(i[a]=uR(e[a],a,t));for(const a in n)i[a]==null&&(i[a]=uR(n[a],a,t));t.addProjection(e.name,i)}function uR(e,t,n){return ye(e)?e.map(i=>uR(i,t,n)):Fe(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:me("Unsupported parameter object: "+Oe(e)):e}const Ds="top",Hm="left",Ym="right",$f="bottom",EQ="center",dDe="vertical",fDe="start",cDe="middle",hDe="end",dR="index",XL="label",pDe="offset",lm="perc",gDe="perc2",To="value",m0="guide-label",ZL="guide-title",mDe="group-title",yDe="group-subtitle",SB="symbol",uw="gradient",fR="discrete",cR="size",vDe="shape",bDe="fill",_De="stroke",xDe="strokeWidth",wDe="strokeDash",kDe="opacity",JL=[cR,vDe,bDe,_De,xDe,wDe,kDe],y0={name:1,style:1,interactive:1},Ot={value:0},Ao={value:1},yE="group",SQ="rect",KL="rule",$De="symbol",Wh="text";function x_(e){return e.type=yE,e.interactive=e.interactive||!1,e}function Sr(e,t){const n=(i,a)=>ns(e[i],ns(t[i],a));return n.isVertical=i=>dDe===ns(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ns(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ns(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ns(e.columns,ns(t.columns,+n.isVertical(!0))),n}function TQ(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function EDe(e,t,n){const i=t.config.style[n];return i&&i[e]}function vE(e,t,n){return`item.anchor === '${fDe}' ? ${e} : item.anchor === '${hDe}' ? ${t} : ${n}`}const QL=vE(Oe(Hm),Oe(Ym),Oe(EQ));function SDe(e){const t=e("tickBand");let n=e("tickOffset"),i,a;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},a={signal:`(${t.signal}) === 'extent'`},Fe(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,a=!0,n=0):(i=.5,a=!1):(i=e("bandPosition"),a=e("tickExtra")),{extra:a,band:i,offset:n}}function AQ(e,t){return t?e?Fe(e)?Object.assign({},e,{offset:AQ(e.offset,t)}):{value:e,offset:t}:t:e}function Xr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Gm(e.encode,t,y0)):e.interactive=!1,e}function TDe(e,t,n,i){const a=Sr(e,n),r=a.isVertical(),o=a.gradientThickness(),s=a.gradientLength();let l,u,d,c,g;r?(u=[0,1],d=[0,0],c=o,g=s):(u=[0,0],d=[1,0],c=s,g=o);const v={enter:l={opacity:Ot,x:Ot,y:Ot,width:wi(c),height:wi(g)},update:dt({},l,{opacity:Ao,fill:{gradient:t,start:u,stop:d}}),exit:{opacity:Ot}};return Yi(v,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),Xr({type:SQ,role:eOe,encode:v},i)}function ADe(e,t,n,i,a){const r=Sr(e,n),o=r.isVertical(),s=r.gradientThickness(),l=r.gradientLength();let u,d,c,g,v="";o?(u="y",c="y2",d="x",g="width",v="1-"):(u="x",c="x2",d="y",g="height");const b={opacity:Ot,fill:{scale:t,field:To}};b[u]={signal:v+"datum."+lm,mult:l},b[d]=Ot,b[c]={signal:v+"datum."+gDe,mult:l},b[g]=wi(s);const x={enter:b,update:dt({},b,{opacity:Ao}),exit:{opacity:Ot}};return Yi(x,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),Xr({type:SQ,role:KAe,key:To,from:a,encode:x},i)}const ODe=`datum.${lm}<=0?"${Hm}":datum.${lm}>=1?"${Ym}":"${EQ}"`,DDe=`datum.${lm}<=0?"${$f}":datum.${lm}>=1?"${Ds}":"${cDe}"`;function TB(e,t,n,i){const a=Sr(e,t),r=a.isVertical(),o=wi(a.gradientThickness()),s=a.gradientLength();let l=a("labelOverlap"),u,d,c,g,v="";const b={enter:u={opacity:Ot},update:d={opacity:Ao,text:{field:XL}},exit:{opacity:Ot}};return Yi(b,{fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:ns(e.labelLimit,t.gradientLabelLimit)}),r?(u.align={value:"left"},u.baseline=d.baseline={signal:DDe},c="y",g="x",v="1-"):(u.align=d.align={signal:ODe},u.baseline={value:"top"},c="x",g="y"),u[c]=d[c]={signal:v+"datum."+lm,mult:s},u[g]=d[g]=o,o.offset=ns(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:a("labelSeparation"),method:l,order:"datum."+dR}:void 0,Xr({type:Wh,role:uQ,style:m0,key:To,from:i,encode:b,overlap:l},n)}function CDe(e,t,n,i,a){const r=Sr(e,t),o=n.entries,s=!!(o&&o.interactive),l=o?o.name:void 0,u=r("clipHeight"),d=r("symbolOffset"),c={data:"value"},g=`(${a}) ? datum.${pDe} : datum.${cR}`,v=u?wi(u):{field:cR},b=`datum.${dR}`,x=`max(1, ${a})`;let k,w,E,T,O;v.mult=.5,k={enter:w={opacity:Ot,x:{signal:g,mult:.5,offset:d},y:v},update:E={opacity:Ao,x:w.x,y:w.y},exit:{opacity:Ot}};let D=null,P=null;e.fill||(D=t.symbolBaseFillColor,P=t.symbolBaseStrokeColor),Yi(k,{fill:r("symbolFillColor",D),shape:r("symbolType"),size:r("symbolSize"),stroke:r("symbolStrokeColor",P),strokeDash:r("symbolDash"),strokeDashOffset:r("symbolDashOffset"),strokeWidth:r("symbolStrokeWidth")},{opacity:r("symbolOpacity")}),JL.forEach(H=>{e[H]&&(E[H]=w[H]={scale:e[H],field:To})});const R=Xr({type:$De,role:tOe,key:To,from:c,clip:u?!0:void 0,encode:k},n.symbols),M=wi(d);M.offset=r("labelOffset"),k={enter:w={opacity:Ot,x:{signal:g,offset:M},y:v},update:E={opacity:Ao,text:{field:XL},x:w.x,y:w.y},exit:{opacity:Ot}},Yi(k,{align:r("labelAlign"),baseline:r("labelBaseline"),fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:r("labelLimit")});const q=Xr({type:Wh,role:uQ,style:m0,key:To,from:c,encode:k},n.labels);return k={enter:{noBound:{value:!u},width:Ot,height:u?wi(u):Ot,opacity:Ot},exit:{opacity:Ot},update:E={opacity:Ao,row:{signal:null},column:{signal:null}}},r.isVertical(!0)?(T=`ceil(item.mark.items.length / ${x})`,E.row.signal=`${b}%${T}`,E.column.signal=`floor(${b} / ${T})`,O={field:["row",b]}):(E.row.signal=`floor(${b} / ${x})`,E.column.signal=`${b} % ${x}`,O={field:b}),E.column.signal=`(${a})?${E.column.signal}:${b}`,i={facet:{data:i,name:"value",groupby:dR}},x_({role:GL,from:i,encode:Gm(k,o,y0),marks:[R,q],name:l,interactive:s,sort:O})}function RDe(e,t){const n=Sr(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const eM='item.orient === "left"',tM='item.orient === "right"',bE=`(${eM} || ${tM})`,IDe=`datum.vgrad && ${bE}`,PDe=vE('"top"','"bottom"','"middle"'),FDe=vE('"right"','"left"','"center"'),NDe=`datum.vgrad && ${tM} ? (${FDe}) : (${bE} && !(datum.vgrad && ${eM})) ? "left" : ${QL}`,LDe=`item._anchor || (${bE} ? "middle" : "start")`,MDe=`${IDe} ? (${eM} ? -90 : 90) : 0`,zDe=`${bE} ? (datum.vgrad ? (${tM} ? "bottom" : "top") : ${PDe}) : "top"`;function qDe(e,t,n,i){const a=Sr(e,t),r={enter:{opacity:Ot},update:{opacity:Ao,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ot}};return Yi(r,{orient:a("titleOrient"),_anchor:a("titleAnchor"),anchor:{signal:LDe},angle:{signal:MDe},align:{signal:NDe},baseline:{signal:zDe},text:e.title,fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),baseline:a("titleBaseline")}),Xr({type:Wh,role:nOe,style:ZL,from:i,encode:r},n)}function jDe(e,t){let n;return Fe(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+AB(e.path)+")":e.sphere&&(n="geoShape("+AB(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function AB(e){return Fe(e)&&e.signal?e.signal:Oe(e)}function OQ(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===yE?GL:t||VL}function UDe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||OQ(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function BDe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function nM(e,t){const n=bY(e.type);n||me("Unrecognized transform type: "+Oe(e.type));const i=pE(n.type.toLowerCase(),null,DQ(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function DQ(e,t,n){const i={},a=e.params.length;for(let r=0;r<a;++r){const o=e.params[r];i[o.name]=VDe(o,t,n)}return i}function VDe(e,t,n){const i=e.type,a=t[e.name];if(i==="index")return WDe(e,t,n);if(a===void 0){e.required&&me("Missing required "+Oe(t.type)+" parameter: "+Oe(e.name));return}else{if(i==="param")return GDe(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!si(a)?a.map(r=>OB(e,r,n)):OB(e,a,n)}function OB(e,t,n){const i=e.type;if(si(t))return CB(i)?me("Expression references can not be signals."):TA(i)?n.fieldRef(t):RB(i)?n.compareRef(t):n.signalRef(t.signal);{const a=e.expr||TA(i);return a&&HDe(t)?n.exprRef(t.expr,t.as):a&&YDe(t)?b_(t.field,t.as):CB(i)?Tl(t,n):XDe(i)?Xe(n.getData(t).values):TA(i)?b_(t):RB(i)?n.compareRef(t):t}}function WDe(e,t,n){return Ne(t.from)||me('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function GDe(e,t,n){const i=t[e.name];return e.array?(ye(i)||me("Expected an array of sub-parameters. Instead: "+Oe(i)),i.map(a=>DB(e,a,n))):DB(e,i,n)}function DB(e,t,n){const i=e.params.length;let a;for(let o=0;o<i;++o){a=e.params[o];for(const s in a.key)if(a.key[s]!==t[s]){a=null;break}if(a)break}a||me("Unsupported parameter: "+Oe(t));const r=dt(DQ(a,t,n),a.key);return Xe(n.add(BOe(r)))}const HDe=e=>e&&e.expr,YDe=e=>e&&e.field,XDe=e=>e==="data",CB=e=>e==="expr",TA=e=>e==="field",RB=e=>e==="compare";function ZDe(e,t,n){let i,a,r,o,s;return e?(i=e.facet)&&(t||me("Only group marks can be faceted."),i.field!=null?o=s=dw(i,n):(e.data?s=Xe(n.getData(e.data).aggregate):(r=nM(dt({type:"aggregate",groupby:Le(i.groupby)},i.aggregate),n),r.params.key=n.keyRef(i.groupby),r.params.pulse=dw(i,n),o=s=Xe(n.add(r))),a=n.keyRef(i.groupby,!0))):o=Xe(n.add(Os(null,[{}]))),o||(o=dw(e,n)),{key:a,pulse:o,parent:s}}function dw(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Xe(t.getData(e.data).output)}function _h(e,t,n,i,a){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=a,this.index={}}_h.fromEntries=function(e,t){const n=t.length,i=t[n-1],a=t[n-2];let r=t[0],o=null,s=1;for(r&&r.type==="load"&&(r=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=Xe(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(o=t[s]);return new _h(e,r,a,i,o)};function CQ(e){return Ne(e)?e:null}function IB(e,t,n){const i=gE(n.op,n.field);let a;if(t.ops){for(let r=0,o=t.as.length;r<o;++r)if(t.as[r]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((a=n.op.signal)?e.signalRef(a):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function sv(e,t,n,i,a,r,o){const s=t[n]||(t[n]={}),l=bOe(r);let u=CQ(a),d,c;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),d=s[u]),!d){const g=r?{field:sR,pulse:t.countsRef(e,a,r)}:{field:e.fieldRef(a),pulse:Xe(t.output)};l&&(g.sort=e.sortRef(r)),c=e.add(pE(i,void 0,g)),o&&(t.index[a]=c),d=Xe(c),u!=null&&(s[u]=d)}return d}_h.prototype={countsRef(e,t,n){const i=this,a=i.counts||(i.counts={}),r=CQ(t);let o,s,l;return r!=null&&(e=i.scope,o=a[r]),o?n&&n.field&&IB(e,o.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Xe(i.output)},n&&n.field&&IB(e,l,n),s=e.add(gQ(l)),o=e.add(Os({pulse:Xe(s)})),o={agg:s,ref:Xe(o)},r!=null&&(a[r]=o)),o.ref},tuplesRef(){return Xe(this.values)},extentRef(e,t){return sv(e,this,"extent","extent",t,!1)},domainRef(e,t){return sv(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return sv(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return sv(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return sv(e,this,"indata","tupleindex",t,!0,!0)}};function JDe(e,t,n){const i=e.from.facet,a=i.name,r=dw(i,t);let o;i.name||me("Facet must have a name: "+Oe(i)),i.data||me("Facet must reference a data set: "+Oe(i)),i.field?o=t.add(vQ({field:t.fieldRef(i.field),pulse:r})):i.groupby?o=t.add(POe({key:t.keyRef(i.groupby),group:Xe(t.proxy(n.parent)),pulse:r})):me("Facet must specify groupby or field: "+Oe(i));const s=t.fork(),l=s.add(Os()),u=s.add(Vh({pulse:Xe(l)}));s.addData(a,new _h(s,l,l,u)),s.addSignal("parent",null),o.params.subflow={$subflow:s.parse(e).toRuntime()}}function KDe(e,t,n){const i=t.add(vQ({pulse:n.pulse})),a=t.fork();a.add(Vh()),a.addSignal("parent",null),i.params.subflow={$subflow:a.parse(e).toRuntime()}}function RQ(e,t,n){const i=e.remove,a=e.insert,r=e.toggle,o=e.modify,s=e.values,l=t.add(g$()),u="if("+e.trigger+',modify("'+n+'",'+[a,i,r,o,s].map(c=>c??"null").join(",")+"),0)",d=Tl(u,t);l.update=d.$expr,l.params=d.$params}function _E(e,t){const n=OQ(e),i=e.type===yE,a=e.from&&e.from.facet,r=e.overlap;let o=e.layout||n===GL||n===WL,s,l,u,d,c,g,v;const b=n===VL||o||a,x=ZDe(e.from,i,t);l=t.add(ROe({key:x.key||(e.key?b_(e.key):void 0),pulse:x.pulse,clean:!i}));const k=Xe(l);l=u=t.add(Os({pulse:k})),l=t.add(zOe({markdef:UDe(e),interactive:BDe(e.interactive,t),clip:jDe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Xe(l)}));const w=Xe(l);l=d=t.add(yQ(hQ(e.encode,e.type,n,e.style,t,{mod:!1,pulse:w}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(P=>{const R=nM(P,t),M=R.metadata;(M.generates||M.changes)&&me("Mark transforms should not generate new data."),M.nomod||(d.params.mod=!0),R.params.pulse=Xe(l),t.add(l=R)}),e.sort&&(l=t.add(YOe({sort:t.compareRef(e.sort),pulse:Xe(l)})));const E=Xe(l);(a||o)&&(o=t.add(_Q({layout:t.objectProperty(e.layout),legends:t.legends,mark:w,pulse:E})),g=Xe(o));const T=t.add(mQ({mark:w,pulse:g||E}));v=Xe(T),i&&(b&&(s=t.operators,s.pop(),o&&s.pop()),t.pushState(E,g||v,k),a?JDe(e,t,x):b?KDe(e,t,x):t.parse(e),t.popState(),b&&(o&&s.push(o),s.push(T))),r&&(v=QDe(r,v,t));const O=t.add(bQ({pulse:v})),D=t.add(Vh({pulse:Xe(O)},void 0,t.parent()));e.name!=null&&(c=e.name,t.addData(c,new _h(t,u,O,D)),e.on&&e.on.forEach(P=>{(P.insert||P.remove||P.toggle)&&me("Marks only support modify triggers."),RQ(P,t,c)}))}function QDe(e,t,n){const i=e.method,a=e.bound,r=e.separation,o={separation:si(r)?n.signalRef(r.signal):r,method:si(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),a){const s=a.tolerance;o.boundTolerance=si(s)?n.signalRef(s.signal):+s,o.boundScale=n.scaleRef(a.scale),o.boundOrient=a.orient}return Xe(n.add(UOe(o)))}function eCe(e,t){const n=t.config.legend,i=e.encode||{},a=Sr(e,n),r=i.legend||{},o=r.name||void 0,s=r.interactive,l=r.style,u={};let d=0,c,g,v;JL.forEach(T=>e[T]?(u[T]=e[T],d=d||e[T]):0),d||me("Missing valid scale for legend.");const b=tCe(e,t.scaleType(d)),x={title:e.title!=null,scales:u,type:b,vgrad:b!=="symbol"&&a.isVertical()},k=Xe(t.add(Os(null,[x]))),w={enter:{x:{value:0},y:{value:0}}},E=Xe(t.add(LOe(g={type:b,scale:t.scaleRef(d),count:t.objectProperty(a("tickCount")),limit:t.property(a("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return b===uw?(v=[TDe(e,d,n,i.gradient),TB(e,n,i.labels,E)],g.count=g.count||t.signalRef(`max(2,2*floor((${Jc(a.gradientLength())})/100))`)):b===fR?v=[ADe(e,d,n,i.gradient,E),TB(e,n,i.labels,E)]:(c=RDe(e,n),v=[CDe(e,n,i,E,Jc(c.columns))],g.size=aCe(e,t,v[0].marks)),v=[x_({role:QAe,from:k,encode:w,marks:v,layout:c,interactive:s})],x.title&&v.push(qDe(e,n,i.title,k)),_E(x_({role:JAe,from:k,encode:Gm(iCe(a,e,n),r,y0),marks:v,aria:a("aria"),description:a("description"),zindex:a("zindex"),name:o,interactive:s,style:l}),t)}function tCe(e,t){let n=e.type||SB;return!e.type&&nCe(e)===1&&(e.fill||e.stroke)&&(n=iN(t)?uw:JD(t)?fR:SB),n!==uw?n:JD(t)?fR:uw}function nCe(e){return JL.reduce((t,n)=>t+(e[n]?1:0),0)}function iCe(e,t,n){const i={enter:{},update:{}};return Yi(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function aCe(e,t,n){const i=Jc(PB("size",e,n)),a=Jc(PB("strokeWidth",e,n)),r=Jc(rCe(n[1].encode,t,m0));return Tl(`max(ceil(sqrt(${i})+${a}),${r})`,t)}function PB(e,t,n){return t[e]?`scale("${t[e]}",datum)`:TQ(e,n[0].encode)}function rCe(e,t,n){return TQ("fontSize",e)||EDe("fontSize",t,n)}const oCe=`item.orient==="${Hm}"?-90:item.orient==="${Ym}"?90:0`;function sCe(e,t){e=Ne(e)?{text:e}:e;const n=Sr(e,t.config.title),i=e.encode||{},a=i.group||{},r=a.name||void 0,o=a.interactive,s=a.style,l=[],u={},d=Xe(t.add(Os(null,[u])));return l.push(dCe(e,n,lCe(e),d)),e.subtitle&&l.push(fCe(e,n,i.subtitle,d)),_E(x_({role:iOe,from:d,encode:uCe(n,a),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:r,interactive:o,style:s}),t)}function lCe(e){const t=e.encode;return t&&t.title||dt({name:e.name,interactive:e.interactive,style:e.style},t)}function uCe(e,t){const n={enter:{},update:{}};return Yi(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:QL},angle:{signal:oCe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Gm(n,t,y0)}function dCe(e,t,n,i){const a={value:0},r=e.text,o={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return Yi(o,{text:r,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Xr({type:Wh,role:aOe,style:mDe,from:i,encode:o},n)}function fCe(e,t,n,i){const a={value:0},r=e.subtitle,o={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return Yi(o,{text:r,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Xr({type:Wh,role:rOe,style:yDe,from:i,encode:o},n)}function cCe(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(nM(i,t))}),e.on&&e.on.forEach(i=>{RQ(i,t,e.name)}),t.addDataPipeline(e.name,hCe(e,t,n))}function hCe(e,t,n){const i=[];let a=null,r=!1,o=!1,s,l,u,d,c;for(e.values?si(e.values)||sw(e.format)?(i.push(FB(t,e)),i.push(a=mc())):i.push(a=mc({$ingest:e.values,$format:e.format})):e.url?sw(e.url)||sw(e.format)?(i.push(FB(t,e)),i.push(a=mc())):i.push(a=mc({$request:e.url,$format:e.format})):e.source&&(a=s=Le(e.source).map(g=>Xe(t.getData(g).output)),i.push(null)),l=0,u=n.length;l<u;++l)d=n[l],c=d.metadata,!a&&!c.source&&i.push(a=mc()),i.push(d),c.generates&&(o=!0),c.modifies&&!o&&(r=!0),c.source?a=d:c.changes&&(a=null);return s&&(u=s.length-1,i[0]=GOe({derive:r,pulse:u?s:s[0]}),(r||u)&&i.splice(1,0,mc())),a||i.push(mc()),i.push(Vh({})),i}function mc(e){const t=Os({},e);return t.metadata={source:!0},t}function FB(e,t){return MOe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const IQ=e=>e===$f||e===Ds,xE=(e,t,n)=>si(e)?yCe(e.signal,t,n):e===Hm||e===Ds?t:n,ki=(e,t,n)=>si(e)?gCe(e.signal,t,n):IQ(e)?t:n,gs=(e,t,n)=>si(e)?mCe(e.signal,t,n):IQ(e)?n:t,PQ=(e,t,n)=>si(e)?vCe(e.signal,t,n):e===Ds?{value:t}:{value:n},pCe=(e,t,n)=>si(e)?bCe(e.signal,t,n):e===Ym?{value:t}:{value:n},gCe=(e,t,n)=>FQ(`${e} === '${Ds}' || ${e} === '${$f}'`,t,n),mCe=(e,t,n)=>FQ(`${e} !== '${Ds}' && ${e} !== '${$f}'`,t,n),yCe=(e,t,n)=>iM(`${e} === '${Hm}' || ${e} === '${Ds}'`,t,n),vCe=(e,t,n)=>iM(`${e} === '${Ds}'`,t,n),bCe=(e,t,n)=>iM(`${e} === '${Ym}'`,t,n),FQ=(e,t,n)=>(t=t!=null?wi(t):t,n=n!=null?wi(n):n,NB(t)&&NB(n)?(t=t?t.signal||Oe(t.value):null,n=n?n.signal||Oe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[dt({test:e},t)].concat(n||[])),NB=e=>e==null||Object.keys(e).length===1,iM=(e,t,n)=>({signal:`${e} ? (${ug(t)}) : (${ug(n)})`}),_Ce=(e,t,n,i,a)=>({signal:(i!=null?`${e} === '${Hm}' ? (${ug(i)}) : `:"")+(n!=null?`${e} === '${$f}' ? (${ug(n)}) : `:"")+(a!=null?`${e} === '${Ym}' ? (${ug(a)}) : `:"")+(t!=null?`${e} === '${Ds}' ? (${ug(t)}) : `:"")+"(null)"}),ug=e=>si(e)?e.signal:e==null?null:Oe(e),xCe=(e,t)=>t===0?0:si(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},wg=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Fp(e,t,n,i){let a;if(t&&Me(t,e))return t[e];if(Me(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":a="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":a=e[5].toLowerCase()+e.slice(6)}return i[ZL][a]}else if(e.startsWith("label")){switch(e){case"labelColor":a="fill";break;case"labelFont":case"labelFontSize":a=e[5].toLowerCase()+e.slice(6)}return i[m0][a]}return null}function LB(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function wCe(e,t){var n=t.config,i=n.style,a=n.axis,r=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,s,l,u;if(si(o)){const c=LB([n.axisX,n.axisY]),g=LB([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(u of c)s[u]=ki(o,Fp(u,n.axisX,a,i),Fp(u,n.axisY,a,i));l={};for(u of g)l[u]=_Ce(o.signal,Fp(u,n.axisTop,a,i),Fp(u,n.axisBottom,a,i),Fp(u,n.axisLeft,a,i),Fp(u,n.axisRight,a,i))}else s=o===Ds||o===$f?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return s||l||r?dt({},a,s,l,r):a}function kCe(e,t,n,i){const a=Sr(e,t),r=e.orient;let o,s;const l={enter:o={opacity:Ot},update:s={opacity:Ao},exit:{opacity:Ot}};Yi(l,{stroke:a("domainColor"),strokeCap:a("domainCap"),strokeDash:a("domainDash"),strokeDashOffset:a("domainDashOffset"),strokeWidth:a("domainWidth"),strokeOpacity:a("domainOpacity")});const u=MB(e,0),d=MB(e,1);return o.x=s.x=ki(r,u,Ot),o.x2=s.x2=ki(r,d),o.y=s.y=gs(r,u,Ot),o.y2=s.y2=gs(r,d),Xr({type:KL,role:GAe,from:i,encode:l},n)}function MB(e,t){return{scale:e.scale,range:t}}function $Ce(e,t,n,i,a){const r=Sr(e,t),o=e.orient,s=e.gridScale,l=xE(o,1,-1),u=ECe(e.offset,l);let d,c,g;const v={enter:d={opacity:Ot},update:g={opacity:Ao},exit:c={opacity:Ot}};Yi(v,{stroke:r("gridColor"),strokeCap:r("gridCap"),strokeDash:r("gridDash"),strokeDashOffset:r("gridDashOffset"),strokeOpacity:r("gridOpacity"),strokeWidth:r("gridWidth")});const b={scale:e.scale,field:To,band:a.band,extra:a.extra,offset:a.offset,round:r("tickRound")},x=ki(o,{signal:"height"},{signal:"width"}),k=s?{scale:s,range:0,mult:l,offset:u}:{value:0,offset:u},w=s?{scale:s,range:1,mult:l,offset:u}:dt(x,{mult:l,offset:u});return d.x=g.x=ki(o,b,k),d.y=g.y=gs(o,b,k),d.x2=g.x2=gs(o,w),d.y2=g.y2=ki(o,w),c.x=ki(o,b),c.y=gs(o,b),Xr({type:KL,role:HAe,key:To,from:i,encode:v},n)}function ECe(e,t){if(t!==1)if(!Fe(e))e=si(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=dt({},e);for(;n.mult!=null;)if(Fe(n.mult))n=n.mult=dt({},n.mult);else return n.mult=si(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function SCe(e,t,n,i,a,r){const o=Sr(e,t),s=e.orient,l=xE(s,-1,1);let u,d,c;const g={enter:u={opacity:Ot},update:c={opacity:Ao},exit:d={opacity:Ot}};Yi(g,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const v=wi(a);v.mult=l;const b={scale:e.scale,field:To,band:r.band,extra:r.extra,offset:r.offset,round:o("tickRound")};return c.y=u.y=ki(s,Ot,b),c.y2=u.y2=ki(s,v),d.x=ki(s,b),c.x=u.x=gs(s,Ot,b),c.x2=u.x2=gs(s,v),d.y=gs(s,b),Xr({type:KL,role:XAe,key:To,from:i,encode:g},n)}function AA(e,t,n,i,a){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+a+")"}}function TCe(e,t,n,i,a,r){const o=Sr(e,t),s=e.orient,l=e.scale,u=xE(s,-1,1),d=Jc(o("labelFlush")),c=Jc(o("labelFlushOffset")),g=o("labelAlign"),v=o("labelBaseline");let b=d===0||!!d,x;const k=wi(a);k.mult=u,k.offset=wi(o("labelPadding")||0),k.offset.mult=u;const w={scale:l,field:To,band:.5,offset:AQ(r.offset,o("labelOffset"))},E=ki(s,b?AA(l,d,'"left"','"right"','"center"'):{value:"center"},pCe(s,"left","right")),T=ki(s,PQ(s,"bottom","top"),b?AA(l,d,'"top"','"bottom"','"middle"'):{value:"middle"}),O=AA(l,d,`-(${c})`,c,0);b=b&&c;const D={opacity:Ot,x:ki(s,w,k),y:gs(s,w,k)},P={enter:D,update:x={opacity:Ao,text:{field:XL},x:D.x,y:D.y,align:E,baseline:T},exit:{opacity:Ot,x:D.x,y:D.y}};Yi(P,{dx:!g&&b?ki(s,O):null,dy:!v&&b?gs(s,O):null}),Yi(P,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:g,baseline:v});const R=o("labelBound");let M=o("labelOverlap");return M=M||R?{separation:o("labelSeparation"),method:M,order:"datum.index",bound:R?{scale:l,orient:s,tolerance:R}:null}:void 0,x.align!==E&&(x.align=wg(x.align,E)),x.baseline!==T&&(x.baseline=wg(x.baseline,T)),Xr({type:Wh,role:YAe,style:m0,key:To,from:i,encode:P,overlap:M},n)}function ACe(e,t,n,i){const a=Sr(e,t),r=e.orient,o=xE(r,-1,1);let s,l;const u={enter:s={opacity:Ot,anchor:wi(a("titleAnchor",null)),align:{signal:QL}},update:l=dt({},s,{opacity:Ao,text:wi(e.title)}),exit:{opacity:Ot}},d={signal:`lerp(range("${e.scale}"), ${vE(0,1,.5)})`};return l.x=ki(r,d),l.y=gs(r,d),s.angle=ki(r,Ot,xCe(o,90)),s.baseline=ki(r,PQ(r,$f,Ds),{value:$f}),l.angle=s.angle,l.baseline=s.baseline,Yi(u,{fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),angle:a("titleAngle"),baseline:a("titleBaseline")}),OCe(a,r,u,n),u.update.align=wg(u.update.align,s.align),u.update.angle=wg(u.update.angle,s.angle),u.update.baseline=wg(u.update.baseline,s.baseline),Xr({type:Wh,role:ZAe,style:ZL,from:i,encode:u},n)}function OCe(e,t,n,i){const a=(s,l)=>s!=null?(n.update[l]=wg(wi(s),n.update[l]),!1):!Bp(l,i),r=a(e("titleX"),"x"),o=a(e("titleY"),"y");n.enter.auto=o===r?wi(o):ki(t,wi(o),wi(r))}function DCe(e,t){const n=wCe(e,t),i=e.encode||{},a=i.axis||{},r=a.name||void 0,o=a.interactive,s=a.style,l=Sr(e,n),u=SDe(l),d={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},c=Xe(t.add(Os({},[d]))),g=Xe(t.add(COe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),v=[];let b;return d.grid&&v.push($Ce(e,n,i.grid,g,u)),d.ticks&&(b=l("tickSize"),v.push(SCe(e,n,i.ticks,g,b,u))),d.labels&&(b=d.ticks?b:0,v.push(TCe(e,n,i.labels,g,b,u))),d.domain&&v.push(kCe(e,n,i.domain,c)),d.title&&v.push(ACe(e,n,i.title,c)),_E(x_({role:WAe,from:c,encode:Gm(CCe(l,e),a,y0),marks:v,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:r,interactive:o,style:s}),t)}function CCe(e,t){const n={enter:{},update:{}};return Yi(n,{orient:e("orient"),offset:e("offset")||0,position:ns(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function NQ(e,t,n){const i=Le(e.signals),a=Le(e.scales);return n||i.forEach(r=>pQ(r,t)),Le(e.projections).forEach(r=>uDe(r,t)),a.forEach(r=>JOe(r,t)),Le(e.data).forEach(r=>cCe(r,t)),a.forEach(r=>KOe(r,t)),(n||i).forEach(r=>DOe(r,t)),Le(e.axes).forEach(r=>DCe(r,t)),Le(e.marks).forEach(r=>_E(r,t)),Le(e.legends).forEach(r=>eCe(r,t)),e.title&&sCe(e.title,t),t.parseLambdas(),t}const RCe=e=>Gm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function ICe(e,t){const n=t.config,i=Xe(t.root=t.add(g$())),a=PCe(e,n);a.forEach(u=>pQ(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const r=t.add(Os()),o=t.add(yQ(hQ(RCe(e.encode),yE,WL,e.style,t,{pulse:Xe(r)}))),s=t.add(_Q({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Xe(o)}));t.operators.pop(),t.pushState(Xe(o),Xe(s),null),NQ(e,t,a),t.operators.push(s);let l=t.add(mQ({mark:i,pulse:Xe(s)}));return l=t.add(bQ({pulse:Xe(l)})),l=t.add(Vh({pulse:Xe(l)})),t.addData("root",new _h(t,r,r,l)),t}function lv(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function PCe(e,t){const n=o=>ns(e[o],t[o]),i=[lv("background",n("background")),lv("autosize",UAe(n("autosize"))),lv("padding",VAe(n("padding"))),lv("width",n("width")||0),lv("height",n("height")||0)],a=i.reduce((o,s)=>(o[s.name]=s,o),{}),r={};return Le(e.signals).forEach(o=>{Me(a,o.name)?o=dt(a[o.name],o):i.push(o),r[o.name]=o}),Le(t.signals).forEach(o=>{!Me(r,o.name)&&!Me(a,o.name)&&i.push(o)}),i}function LQ(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function zB(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}LQ.prototype=zB.prototype={parse(e){return NQ(e,this)},fork(){return new zB(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof oR?Xe(e):e;return this.add(WOe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,a,r){let o,s;i&&(o=i.data||(i.data={}),s=o[a]||(o[a]=[]),s.push(r))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Xe(this.add(Vh({pulse:e})))),this._parent.push(t),this._lookup.push(n?Xe(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return At(this._parent)},encode(){return At(this._encode)},lookup(){return At(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Ne(e))return b_(e,t);e.signal||me("Unsupported field reference: "+Oe(e));const n=e.signal;let i=this.field[n];if(!i){const a={name:this.signalRef(n)};t&&(a.as=t),this.field[n]=i=Xe(this.add(FOe(a)))}return i},compareRef(e){let t=!1;const n=r=>si(r)?(t=!0,this.signalRef(r.signal)):_Oe(r)?(t=!0,this.exprRef(r.expr)):r,i=Le(e.field).map(n),a=Le(e.order).map(n);return t?Xe(this.add(EB({fields:i,orders:a}))):kB(i,a)},keyRef(e,t){let n=!1;const i=r=>si(r)?(n=!0,Xe(a[r.signal])):r,a=this.signals;return e=Le(e).map(i),n?Xe(this.add(NOe({fields:e,flat:t}))):mOe(e,t)},sortRef(e){if(!e)return e;const t=gE(e.op,e.field),n=e.order||yOe;return n.signal?Xe(this.add(EB({fields:t,orders:this.signalRef(n.signal)}))):kB(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return Me(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&me("Duplicate signal name: "+Oe(e));const n=t instanceof oR?t:this.add(g$(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||me("Unrecognized signal name: "+Oe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Xe(this.signals[e]):(Me(this.lambdas,e)||(this.lambdas[e]=this.add(g$(null))),Xe(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],a=Tl(i,this),r=this.lambdas[i];r.params=a.$params,r.update=a.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Fe(e)?e:this.signalRef(e.signal||aM(e))},exprRef(e,t){const n={expr:Tl(e,this)};return t&&(n.expr.$name=t),Xe(this.add(IOe(n)))},addBinding(e,t){this.bindings||me("Nested signals do not support binding: "+Oe(e)),this.bindings.push(dt({signal:e},t))},addScaleProj(e,t){Me(this.scales,e)&&me("Duplicate scale or projection name: "+Oe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,HOe(t))},addProjection(e,t){this.addScaleProj(e,VOe(t))},getScale(e){return this.scales[e]||me("Unrecognized scale name: "+Oe(e)),this.scales[e]},scaleRef(e){return Xe(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Me(this.data,e)&&me("Duplicate data set name: "+Oe(e)),this.data[e]=t},getData(e){return this.data[e]||me("Undefined data set name: "+Oe(e)),this.data[e]},addDataPipeline(e,t){return Me(this.data,e)&&me("Duplicate data set name: "+Oe(e)),this.addData(e,_h.fromEntries(this,t))}};function aM(e){return(ye(e)?FCe:NCe)(e)}function FCe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const a=e[i];n+=(i>0?",":"")+(Fe(a)?a.signal||aM(a):Oe(a))}return n+"]"}function NCe(e){let t="{",n=0,i,a;for(i in e)a=e[i],t+=(++n>1?",":"")+Oe(i)+":"+(Fe(a)?a.signal||aM(a):Oe(a));return t+"}"}function LCe(){const e="sans-serif",i="#4c78a8",a="#000",r="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:a},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:a,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:a,font:e,fontSize:10},"guide-title":{fill:a,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:a,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:a,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function MCe(e,t,n){return Fe(e)||me("Input Vega specification must be an object."),t=Nm(LCe(),t,e.config),ICe(e,new LQ(t,n)).toRuntime()}var zCe="5.33.0";dt(Zg,Ybe,F1e,hwe,f$e,v$e,W$e,$$e,H$e,J$e,s2e,p2e);const qCe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Jn,CanvasHandler:l0,CanvasRenderer:Dk,DATE:_r,DAY:la,DAYOFYEAR:El,Dataflow:_g,Debug:gH,Error:jP,EventStream:C2,Gradient:DX,GroupItem:V2,HOURS:Wr,Handler:AN,HybridHandler:xZ,HybridRenderer:lC,Info:pH,Item:B2,MILLISECONDS:_s,MINUTES:Gr,MONTH:ha,Marks:Hr,MultiPulse:lF,None:hH,Operator:an,Parameters:D2,Pulse:lf,QUARTER:br,RenderType:Vd,Renderer:s0,ResourceLoader:LX,SECONDS:Io,SVGHandler:lZ,SVGRenderer:PN,SVGStringRenderer:_Z,Scenegraph:eZ,TIME_UNITS:eF,Transform:he,View:tQ,WEEK:ri,Warn:UP,YEAR:Wi,accessor:Er,accessorFields:ca,accessorName:qn,array:Le,ascending:Mm,bandwidthNRD:cF,bin:wY,bootstrapCI:kY,boundClip:CZ,boundContext:i0,boundItem:iC,boundMark:ZX,boundStroke:Xu,changeset:jh,clampRange:SH,codegenExpression:mK,compare:HP,constant:_a,cumulativeLogNormal:vF,cumulativeNormal:I2,cumulativeUniform:wF,dayofyear:NH,debounce:YP,defaultLocale:iF,definition:bY,densityLogNormal:yF,densityNormal:hF,densityUniform:xF,domChild:ii,domClear:yo,domCreate:Ud,domFind:TN,dotbin:$Y,error:me,expressionFunction:Yn,extend:dt,extent:$l,extentIndex:TH,falsy:$d,fastmap:zm,field:Co,flush:AH,font:X2,fontFamily:o0,fontSize:Pl,format:B1,formatLocale:yk,formats:oF,hasOwnProperty:Me,id:W_,identity:ba,inferType:lY,inferTypes:uY,ingest:qt,inherits:De,inrange:rg,interpolate:aN,interpolateColors:j2,interpolateRange:mX,intersect:TZ,intersectBoxLine:og,intersectPath:cN,intersectPoint:hN,intersectRule:zX,isArray:ye,isBoolean:Mf,isDate:sf,isFunction:ft,isIterable:OH,isNumber:Lt,isObject:Fe,isRegExp:XP,isString:Ne,isTuple:A2,key:ZP,lerp:DH,lineHeight:xf,loader:S2,locale:oY,logger:BP,lruCache:CH,markup:IN,merge:RH,mergeConfig:Nm,multiLineOffset:$N,one:Fm,pad:IH,panLinear:_H,panLog:xH,panPow:wH,panSymlog:kH,parse:MCe,parseExpression:hK,parseSelector:qf,path:d2,pathCurves:uN,pathEqual:RZ,pathParse:em,pathRectangle:IX,pathRender:r_,pathSymbols:RX,pathTrail:PX,peek:At,point:J2,projection:eL,quantileLogNormal:bF,quantileNormal:P2,quantileUniform:kF,quantiles:dF,quantizeInterpolator:yX,quarter:$H,quartiles:fF,get random(){return Po},randomInteger:Kve,randomKDE:gF,randomLCG:Jve,randomLogNormal:SY,randomMixture:TY,randomNormal:pF,randomUniform:AY,read:cY,regressionConstant:$F,regressionExp:DY,regressionLinear:EF,regressionLoess:IY,regressionLog:OY,regressionPoly:RY,regressionPow:CY,regressionQuad:SF,renderModule:K2,repeat:Tv,resetDefaultLocale:Yye,resetSVGClipId:NX,resetSVGDefIds:Qxe,responseType:fY,runtimeContext:UK,sampleCurve:N2,sampleLogNormal:mF,sampleNormal:R2,sampleUniform:_F,scale:Mt,sceneEqual:FN,sceneFromJSON:KX,scenePickVisit:wk,sceneToJSON:JX,sceneVisit:xs,sceneZOrder:pN,scheme:rN,serializeXML:mZ,setHybridRendererOptions:Xxe,setRandom:Xve,span:G_,splitAccessPath:Il,stringValue:Oe,textMetrics:jr,timeBin:QH,timeFloor:BH,timeFormatLocale:n_,timeInterval:qm,timeOffset:GH,timeSequence:XH,timeUnitSpecifier:FH,timeUnits:tF,toBoolean:JP,toDate:KP,toNumber:ua,toSet:bs,toString:QP,transform:_Y,transforms:Zg,truncate:PH,truthy:Ro,tupleid:Ze,typeParsers:YD,utcFloor:VH,utcInterval:jm,utcOffset:HH,utcSequence:ZH,utcdayofyear:zH,utcquarter:EH,utcweek:qH,version:zCe,visitArray:Od,week:LH,writeConfig:Lm,zero:Ld,zoomLinear:VP,zoomLog:WP,zoomPow:mk,zoomSymlog:GP},Symbol.toStringTag,{value:"Module"}));function jCe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var UCe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},BCe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},VCe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const WCe=Array.prototype.slice,yc=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,WCe.call(t,1))},GCe=(e,t,n,i,a,r,o)=>new Date(e,t||0,n??1,i||0,a||0,r||0,o||0);var HCe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:GCe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return yc("join",arguments)},indexof:function(){return yc("indexOf",arguments)},lastindexof:function(){return yc("lastIndexOf",arguments)},slice:function(){return yc("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Mm),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return yc("substring",arguments,String)},split:function(){return yc("split",arguments,String)},replace:function(){return yc("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const YCe=["view","item","group","xy","x","y"],hR=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&hR.add(setImmediate);const XCe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:UCe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const a=e(t.property);if(n&&(e.memberDepth-=1),hR.has(i[a])){console.error(`Prevented interpretation of member "${a}" which could lead to insecure code execution`);return}return i[a]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||HCe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>BCe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>VCe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const a=e(i.key);return e.memberDepth-=1,hR.has(e(i.value))?console.error(`Prevented interpretation of property "${a}" which could lead to insecure code execution`):n[a]=e(i.value),n},{})};function uv(e,t,n,i,a,r){const o=s=>XCe[s.type](o,s);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=i,o.event=a,o.item=r,YCe.forEach(s=>o.fn[s]=function(){return a.vega[s](...arguments)}),o(e)}var ZCe={operator(e,t){const n=t.ast,i=e.functions;return a=>uv(n,i,a)},parameter(e,t){const n=t.ast,i=e.functions;return(a,r)=>uv(n,i,r,a)},event(e,t){const n=t.ast,i=e.functions;return a=>uv(n,i,void 0,void 0,a)},handler(e,t){const n=t.ast,i=e.functions;return(a,r)=>{const o=r.item&&r.item.datum;return uv(n,i,a,o,r)}},encode(e,t){const{marktype:n,channels:i}=t,a=e.functions,r=n==="group"||n==="image"||n==="rect";return(o,s)=>{const l=o.datum;let u=0,d;for(const c in i)d=uv(i[c].ast,a,s,l,void 0,o),o[c]!==d&&(o[c]=d,u=1);return n!=="rule"&&jCe(o,i,r),u}}};const JCe="5.23.0",KCe={version:JCe};function rM(e){return $e(e,"or")}function oM(e){return $e(e,"and")}function sM(e){return $e(e,"not")}function fw(e,t){if(sM(e))fw(e.not,t);else if(oM(e))for(const n of e.and)fw(n,t);else if(rM(e))for(const n of e.or)fw(n,t);else t(e)}function kg(e,t){return sM(e)?{not:kg(e.not,t)}:oM(e)?{and:e.and.map(n=>kg(n,t))}:rM(e)?{or:e.or.map(n=>kg(n,t))}:t(e)}const nt=structuredClone;function MQ(e){throw new Error(e)}function um(e,t){const n={};for(const i of t)Me(e,i)&&(n[i]=e[i]);return n}function yr(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>en(e)).join(",")})`};function St(e){if(Lt(e))return e;const t=Ne(e)?e:en(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const a=t.charCodeAt(i);n=(n<<5)-n+a,n=n&n}return n}function pR(e){return e===!1||e===null}function xt(e,t){return e.includes(t)}function dm(e,t){let n=0;for(const[i,a]of e.entries())if(t(a,i,n++))return!0;return!1}function lM(e,t){let n=0;for(const[i,a]of e.entries())if(!t(a,i,n++))return!1;return!0}function zQ(e,...t){for(const n of t)QCe(e,n??{});return e}function QCe(e,t){for(const n of ke(t))Lm(e,n,t[n],!0)}function ul(e,t){const n=[],i={};let a;for(const r of e)a=t(r),!(a in i)&&(i[a]=1,n.push(r));return n}function eRe(e,t){const n=ke(e),i=ke(t);if(n.length!==i.length)return!1;for(const a of n)if(e[a]!==t[a])return!1;return!0}function qQ(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function uM(e,t){for(const n of e)if(t.has(n))return!0;return!1}function gR(e){const t=new Set;for(const n of e){const a=Il(n).map((o,s)=>s===0?o:`[${o}]`),r=a.map((o,s)=>a.slice(0,s+1).join(""));for(const o of r)t.add(o)}return t}function dM(e,t){return e===void 0||t===void 0?!0:uM(gR(e),gR(t))}function Qt(e){return ke(e).length===0}const ke=Object.keys,Gi=Object.values,Ef=Object.entries;function w_(e){return e===!0||e===!1}function bn(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function wb(e,t){return sM(e)?`!(${wb(e.not,t)})`:oM(e)?`(${e.and.map(n=>wb(n,t)).join(") && (")})`:rM(e)?`(${e.or.map(n=>wb(n,t)).join(") || (")})`:t(e)}function m$(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&m$(e[n],t)&&delete e[n],Qt(e)}function v0(e){return e.charAt(0).toUpperCase()+e.substr(1)}function fM(e,t="datum"){const n=Il(e),i=[];for(let a=1;a<=n.length;a++){const r=`[${n.slice(0,a).map(Oe).join("][")}]`;i.push(`${t}${r}`)}return i.join(" && ")}function jQ(e,t="datum"){return`${t}[${Oe(Il(e).join("."))}]`}function Gt(e){return`datum['${e.replaceAll("'","\\'")}']`}function tRe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function No(e){return`${Il(e).map(tRe).join("\\.")}`}function xh(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Xm(e){return`${Il(e).join(".")}`}function fm(e){return e?Il(e).length:0}function Gn(...e){return e.find(t=>t!==void 0)}let UQ=42;function BQ(e){const t=++UQ;return e?String(e)+t:t}function nRe(){UQ=42}function VQ(e){return WQ(e)?e:`__${e}`}function WQ(e){return e.startsWith("__")}function k_(e){if(e!==void 0)return(e%360+360)%360}function wE(e){return Lt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const qB=Object.getPrototypeOf(structuredClone({}));function Mr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!Mr(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const r of e.entries())if(!t.has(r[0]))return!1;for(const r of e.entries())if(!Mr(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==qB.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==qB.toString)return e.toString()===t.toString();const a=Object.keys(e);if(n=a.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;for(i=n;i--!==0;){const r=a[i];if(!Mr(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function en(e){const t=[];return function n(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let a,r;if(Array.isArray(i)){for(r="[",a=0;a<i.length;a++)a&&(r+=","),r+=n(i[a])||"null";return r+"]"}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const o=t.push(i)-1,s=Object.keys(i).sort();for(r="",a=0;a<s.length;a++){const l=s[a],u=n(i[l]);u&&(r&&(r+=","),r+=JSON.stringify(l)+":"+u)}return t.splice(o,1),`{${r}}`}(e)}function $e(e,t){return Fe(e)&&Me(e,t)&&e[t]!==void 0}const Tu="row",Au="column",kE="facet",_n="x",Oi="y",Cs="x2",Ll="y2",jf="xOffset",Zm="yOffset",Rs="radius",Ku="radius2",qo="theta",Qu="theta2",Is="latitude",Ps="longitude",Fs="latitude2",Lo="longitude2",Uf="time",wr="color",Ml="fill",zl="stroke",kr="shape",ed="size",Gh="angle",td="opacity",Bf="fillOpacity",Vf="strokeOpacity",Wf="strokeWidth",Gf="strokeDash",b0="text",cm="order",_0="detail",$E="key",wh="tooltip",EE="href",SE="url",TE="description",iRe={x:1,y:1,x2:1,y2:1},GQ={theta:1,theta2:1,radius:1,radius2:1};function HQ(e){return Me(GQ,e)}const cM={longitude:1,longitude2:1,latitude:1,latitude2:1};function YQ(e){switch(e){case Is:return"y";case Fs:return"y2";case Ps:return"x";case Lo:return"x2"}}function XQ(e){return Me(cM,e)}const aRe=ke(cM),hM={...iRe,...GQ,...cM,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function $g(e){return e===wr||e===Ml||e===zl}const ZQ={row:1,column:1,facet:1},Eo=ke(ZQ),pM={...hM,...ZQ},rRe=ke(pM),{order:F7e,detail:N7e,tooltip:L7e,...oRe}=pM,{row:M7e,column:z7e,facet:q7e,...sRe}=oRe;function lRe(e){return Me(sRe,e)}function JQ(e){return Me(pM,e)}const uRe=[Cs,Ll,Fs,Lo,Qu,Ku];function KQ(e){return Hh(e)!==e}function Hh(e){switch(e){case Cs:return _n;case Ll:return Oi;case Fs:return Is;case Lo:return Ps;case Qu:return qo;case Ku:return Rs}return e}function Sf(e){if(HQ(e))switch(e){case qo:return"startAngle";case Qu:return"endAngle";case Rs:return"outerRadius";case Ku:return"innerRadius"}return e}function ql(e){switch(e){case _n:return Cs;case Oi:return Ll;case Is:return Fs;case Ps:return Lo;case qo:return Qu;case Rs:return Ku}}function $r(e){switch(e){case _n:case Cs:return"width";case Oi:case Ll:return"height"}}function QQ(e){switch(e){case _n:return"xOffset";case Oi:return"yOffset";case Cs:return"x2Offset";case Ll:return"y2Offset";case qo:return"thetaOffset";case Rs:return"radiusOffset";case Qu:return"theta2Offset";case Ku:return"radius2Offset"}}function gM(e){switch(e){case _n:return"xOffset";case Oi:return"yOffset"}}function dRe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const fRe=ke(hM),{x:j7e,y:U7e,x2:B7e,y2:V7e,xOffset:W7e,yOffset:G7e,latitude:H7e,longitude:Y7e,latitude2:X7e,longitude2:Z7e,theta:J7e,theta2:K7e,radius:Q7e,radius2:e6e,...mM}=hM,cRe=ke(mM),yM={x:1,y:1},nd=ke(yM);function Hn(e){return Me(yM,e)}const vM={theta:1,radius:1},hRe=ke(vM);function AE(e){return e==="width"?_n:Oi}const eee={xOffset:1,yOffset:1};function x0(e){return Me(eee,e)}const pRe={time:1};function OA(e){return e in pRe}const{text:t6e,tooltip:n6e,href:i6e,url:a6e,description:r6e,detail:o6e,key:s6e,order:l6e,...tee}=mM,gRe=ke(tee);function mRe(e){return Me(mM,e)}function yRe(e){switch(e){case wr:case Ml:case zl:case ed:case kr:case td:case Wf:case Gf:return!0;case Bf:case Vf:case Gh:case Uf:return!1}}const nee={...yM,...vM,...eee,...tee},bM=ke(nee);function jl(e){return Me(nee,e)}function vRe(e,t){return _Re(e)[t]}const iee={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:u6e,...bRe}=iee;function _Re(e){switch(e){case wr:case Ml:case zl:case TE:case _0:case $E:case wh:case EE:case cm:case td:case Bf:case Vf:case Wf:case kE:case Tu:case Au:return iee;case _n:case Oi:case jf:case Zm:case Is:case Ps:case Uf:return bRe;case Cs:case Ll:case Fs:case Lo:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ed:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Gf:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case kr:return{point:"always",geoshape:"always"};case b0:return{text:"always"};case Gh:return{point:"always",square:"always",text:"always"};case SE:return{image:"always"};case qo:return{text:"always",arc:"always"};case Rs:return{text:"always",arc:"always"};case Qu:case Ku:return{arc:"always"}}}function DA(e){switch(e){case _n:case Oi:case qo:case Rs:case jf:case Zm:case ed:case Gh:case Wf:case td:case Bf:case Vf:case Uf:case Cs:case Ll:case Qu:case Ku:return;case kE:case Tu:case Au:case kr:case Gf:case b0:case wh:case EE:case SE:case TE:return"discrete";case wr:case Ml:case zl:return"flexible";case Is:case Ps:case Fs:case Lo:case _0:case $E:case cm:return}}const xRe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},wRe={count:1,min:1,max:1};function Vu(e){return $e(e,"argmin")}function Hf(e){return $e(e,"argmax")}function _M(e){return Ne(e)&&Me(xRe,e)}const kRe=new Set(["count","valid","missing","distinct"]);function OE(e){return Ne(e)&&kRe.has(e)}function $Re(e){return Ne(e)&&xt(["min","max"],e)}const ERe=new Set(["count","sum","distinct","valid","missing"]),SRe=new Set(["mean","average","median","q1","q3","min","max"]);function aee(e){return Mf(e)&&(e=jE(e,void 0)),"bin"+ke(e).map(t=>DE(e[t])?bn(`_${t}_${Ef(e[t])}`):bn(`_${t}_${e[t]}`)).join("")}function ln(e){return e===!0||Yh(e)&&!e.binned}function Ni(e){return e==="binned"||Yh(e)&&e.binned===!0}function Yh(e){return Fe(e)}function DE(e){return $e(e,"param")}function jB(e){switch(e){case Tu:case Au:case ed:case wr:case Ml:case zl:case Wf:case td:case Bf:case Vf:case kr:return 6;case Gf:return 4;default:return 10}}function w0(e){return $e(e,"expr")}function Mi(e,{level:t}={level:0}){const n=ke(e||{}),i={};for(const a of n)i[a]=t===0?Fr(e[a]):Mi(e[a],{level:t-1});return i}function ree(e){const{anchor:t,frame:n,offset:i,orient:a,angle:r,limit:o,color:s,subtitleColor:l,subtitleFont:u,subtitleFontSize:d,subtitleFontStyle:c,subtitleFontWeight:g,subtitleLineHeight:v,subtitlePadding:b,...x}=e,k={...x,...s?{fill:s}:{}},w={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...a?{orient:a}:{},...r!==void 0?{angle:r}:{},...o!==void 0?{limit:o}:{}},E={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...d?{subtitleFontSize:d}:{},...c?{subtitleFontStyle:c}:{},...g?{subtitleFontWeight:g}:{},...v?{subtitleLineHeight:v}:{},...b?{subtitlePadding:b}:{}},T=um(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:k,subtitleMarkConfig:T,nonMarkTitleProperties:w,subtitle:E}}function Pd(e){return Ne(e)||ye(e)&&Ne(e[0])}function We(e){return $e(e,"signal")}function Xh(e){return $e(e,"step")}function TRe(e){return ye(e)?!1:$e(e,"fields")&&!$e(e,"data")}function ARe(e){return ye(e)?!1:$e(e,"fields")&&$e(e,"data")}function xu(e){return ye(e)?!1:$e(e,"field")&&$e(e,"data")}const ORe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},DRe=ke(ORe),CRe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},mR=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function oee(e){const t=ye(e.condition)?e.condition.map(UB):UB(e.condition);return{...Fr(e),condition:t}}function Fr(e){if(w0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function UB(e){if(w0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function cn(e){if(w0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return We(e)?e:e!==void 0?{value:e}:void 0}function RRe(e){return We(e)?e.signal:Oe(e)}function BB(e){return We(e)?e.signal:Oe(e.value)}function fs(e){return We(e)?e.signal:e==null?null:Oe(e)}function IRe(e,t,n){for(const i of n){const a=Al(i,t.markDef,t.config);a!==void 0&&(e[i]=cn(a))}return e}function see(e){return[].concat(e.type,e.style??[])}function Kt(e,t,n,i={}){const{vgChannel:a,ignoreVgConfig:r}=i;return a&&$e(t,a)?t[a]:t[e]!==void 0?t[e]:r&&(!a||a===e)?void 0:Al(e,t,n,i)}function Al(e,t,n,{vgChannel:i}={}){const a=yR(e,t,n.style);return Gn(i?a:void 0,a,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function yR(e,t,n){return lee(e,see(t),n)}function lee(e,t,n){t=Le(t);let i;for(const a of t){const r=n[a];$e(r,e)&&(i=r[e])}return i}function uee(e,t){return Le(e).reduce((n,i)=>(n.field.push(Ie(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function dee(e,t){const n=[...e];return t.forEach(i=>{for(const a of n)if(Mr(a,i))return;n.push(i)}),n}function fee(e,t){return Mr(e,t)||!t?e:e?[...Le(e),...Le(t)].join(", "):t}function cee(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((Pd(n)||We(n))&&(Pd(i)||We(i)))return{explicit:e.explicit,value:fee(n,i)};if(Pd(n)||We(n))return{explicit:e.explicit,value:n};if(Pd(i)||We(i))return{explicit:e.explicit,value:i};if(!Pd(n)&&!We(n)&&!Pd(i)&&!We(i))return{explicit:e.explicit,value:dee(n,i)};throw new Error("It should never reach here")}function xM(e){return`Invalid specification ${en(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const PRe='Autosize "fit" only works for single views and layered views.';function VB(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function WB(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function GB(e){return e?`Dropping "fit-${e}" because spec has discrete ${$r(e)}.`:'Dropping "fit" because spec has discrete size.'}function wM(e){return`Unknown field for ${e}. Cannot calculate view size.`}function HB(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function FRe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function NRe(e){return`The "nearest" transform is not supported for ${e} marks.`}function hee(e){return`Selection not supported for ${e} yet.`}function LRe(e){return`Cannot find a selection named "${e}".`}const MRe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",zRe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",qRe="Legend bindings are only supported for selections over an individual field or encoding channel.";function jRe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function URe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const BRe="The same selection must be used to override scale domains in a layered view.",VRe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function WRe(e){return`Unknown repeated value "${e}".`}function YB(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const GRe="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",kM="Animation involving facet, layer, or concat is currently unsupported.";function HRe(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Oe(e)}.`}function YRe(e,t,n,i){return(e.length?"Multiple ":"No ")+`matching ${Oe(t)} encoding found for selection ${Oe(n.param)}. Using "field": ${Oe(i)}.`}const XRe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function ZRe(e){return`Unrecognized parse "${e}".`}function XB(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const JRe="Attempt to add the same child twice.";function KRe(e){return`Ignoring an invalid transform: ${en(e)}.`}const QRe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function ZB(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function eIe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${en(t)} is overridden by a child projection ${en(n)}.`}const tIe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function nIe(e){return`${e}Offset dropped because ${e} is continuous`}function iIe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${en(n)}}.`}function pee(e){return`Invalid field type "${e}".`}function aIe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function rIe(e){return`Invalid aggregation operator "${e}".`}function gee(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function oIe(e){return`Position range does not support relative band size for ${e}.`}function vR(e,t){return`Dropping ${en(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const sIe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function CE(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function lIe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function uIe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function dIe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function fIe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function CA(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function cIe(e){return`The ${e} for range marks cannot be an expression`}function hIe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function pIe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function gIe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function mIe(e){return`Cannot use the relative band size with ${e} scale.`}function yIe(e){return`Using unaggregated domain with raw field has no effect (${en(e)}).`}function vIe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function bIe(e){return`Unaggregated domain is currently unsupported for log scale (${en(e)}).`}function _Ie(e){return`Cannot apply size to non-oriented mark "${e}".`}function xIe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function wIe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function mee(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function yee(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function kIe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${en(n)} and ${en(i)}). Using ${en(n)}.`}function $Ie(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${en(n)} and ${en(i)}). Using the union of the two domains.`}function EIe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function SIe(e){return`Dropping sort property ${en(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const JB="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",TIe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",AIe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",OIe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function DIe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function CIe(e){return`Stack is applied to a non-linear scale (${e}).`}function RIe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function y$(e,t){return`Invalid ${e}: ${en(t)}.`}function IIe(e){return`Dropping day from datetime ${en(e)} as day cannot be combined with other units.`}function PIe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function FIe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function NIe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function KB(e){return`1D error band does not support ${e}.`}function vee(e){return`Channel ${e} is required for "binned" bin.`}function LIe(e){return`Channel ${e} should not be used with "binned" bin.`}function MIe(e){return`Domain for ${e} is required for threshold scale.`}const bee=BP(UP);let kh=bee;function zIe(e){return kh=e,kh}function qIe(){return kh=bee,kh}function $M(...e){kh.error(...e)}function Ee(...e){kh.warn(...e)}function jIe(...e){kh.debug(...e)}function Zh(e){if(e&&Fe(e)){for(const t of SM)if($e(e,t))return!0}return!1}const _ee=["january","february","march","april","may","june","july","august","september","october","november","december"],UIe=_ee.map(e=>e.substr(0,3)),xee=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],BIe=xee.map(e=>e.substr(0,3));function VIe(e){if(wE(e)&&(e=+e),Lt(e))return e>4&&Ee(y$("quarter",e)),e-1;throw new Error(y$("quarter",e))}function WIe(e){if(wE(e)&&(e=+e),Lt(e))return e-1;{const t=e.toLowerCase(),n=_ee.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),a=UIe.indexOf(i);if(a!==-1)return a;throw new Error(y$("month",e))}}function GIe(e){if(wE(e)&&(e=+e),Lt(e))return e%7;{const t=e.toLowerCase(),n=xee.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),a=BIe.indexOf(i);if(a!==-1)return a;throw new Error(y$("day",e))}}function EM(e,t){const n=[];if(t&&e.day!==void 0&&ke(e).length>1&&(Ee(IIe(e)),e=nt(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?WIe(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?VIe(e.quarter):e.quarter;n.push(Lt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?GIe(e.day):e.day;n.push(Lt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const a=e[i];n.push(typeof a>"u"?0:a)}return n}function $h(e){const n=EM(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function HIe(e){const n=EM(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function YIe(e){const t=EM(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const wee={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},SM=ke(wee);function XIe(e){return Me(wee,e)}function Jh(e){return Fe(e)?e.binned:kee(e)}function kee(e){return e&&e.startsWith("binned")}function TM(e){return e.startsWith("utc")}function ZIe(e){return e.substring(3)}const JIe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function RE(e){return SM.filter(t=>Eee(e,t))}function $ee(e){const t=RE(e);return t[t.length-1]}function Eee(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function KIe(e,t,{end:n}={end:!1}){const i=fM(t),a=TM(e)?"utc":"";function r(l){return l==="quarter"?`(${a}quarter(${i})-1)`:`${a}${l}(${i})`}let o;const s={};for(const l of SM)Eee(e,l)&&(s[l]=r(l),o=l);return n&&(s[o]+="+1"),HIe(s)}function See(e){if(!e)return;const t=RE(e);return`timeUnitSpecifier(${en(t)}, ${en(JIe)})`}function QIe(e,t,n){if(!e)return;const i=See(e);return`${n||TM(e)?"utc":"time"}Format(${t}, ${i})`}function Si(e){if(!e)return;let t;return Ne(e)?kee(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Fe(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),TM(t.unit)&&(t.utc=!0,t.unit=ZIe(t.unit)),t}function ePe(e){const{utc:t,...n}=Si(e);return n.unit?(t?"utc":"")+ke(n).map(i=>bn(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+ke(n).map(i=>bn(`_${i}_${n[i]}`)).join("")}function Tee(e,t=n=>n){const n=Si(e),i=$ee(n.unit);if(i&&i!=="day"){const a={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:r,part:o}=Aee(i,n.step),s={...a,[o]:+a[o]+r};return`${t($h(s))} - ${t($h(a))}`}}const tPe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function nPe(e){return Me(tPe,e)}function Aee(e,t=1){if(nPe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function iPe(e){return $e(e,"param")}function AM(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function OM(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function DM(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function CM(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function RM(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function IM(e){if(e!=null&&e.field){if(ye(e.range)&&e.range.length===2)return!0;if(We(e.range))return!0}return!1}function PM(e){return!!(e!=null&&e.field)&&(ye(e.oneOf)||ye(e.in))}function aPe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function Oee(e){return PM(e)||AM(e)||IM(e)||OM(e)||CM(e)||DM(e)||RM(e)}function Zs(e,t){return UE(e,{timeUnit:t,wrapTime:!0})}function rPe(e,t){return e.map(n=>Zs(n,t))}function Dee(e,t=!0){const{field:n}=e,i=Si(e.timeUnit),{unit:a,binned:r}=i||{},o=Ie(e,{expr:"datum"}),s=a?`time(${r?o:KIe(a,n)})`:o;if(AM(e))return`${s}===${Zs(e.equal,a)}`;if(OM(e)){const l=e.lt;return`${s}<${Zs(l,a)}`}else if(CM(e)){const l=e.gt;return`${s}>${Zs(l,a)}`}else if(DM(e)){const l=e.lte;return`${s}<=${Zs(l,a)}`}else if(RM(e)){const l=e.gte;return`${s}>=${Zs(l,a)}`}else{if(PM(e))return`indexof([${rPe(e.oneOf,a).join(",")}], ${s}) !== -1`;if(aPe(e))return IE(s,e.valid);if(IM(e)){const{range:l}=Mi(e),u=We(l)?{signal:`${l.signal}[0]`}:l[0],d=We(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&d!==null&&t)return"inrange("+s+", ["+Zs(u,a)+", "+Zs(d,a)+"])";const c=[];return u!==null&&c.push(`${s} >= ${Zs(u,a)}`),d!==null&&c.push(`${s} <= ${Zs(d,a)}`),c.length>0?c.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${en(e)}`)}function IE(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function oPe(e){return Oee(e)&&e.timeUnit?{...e,timeUnit:Si(e.timeUnit)}:e}const k0={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function sPe(e){return e==="quantitative"||e==="temporal"}function Cee(e){return e==="ordinal"||e==="nominal"}const Eh=k0.quantitative,FM=k0.ordinal,hm=k0.temporal,NM=k0.nominal,Jm=k0.geojson;function lPe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Eh:return"quantitative";case"t":case hm:return"temporal";case"o":case FM:return"ordinal";case"n":case NM:return"nominal";case Jm:return"geojson"}}const zi={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},bR={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function uPe(e,t){const n=bR[e],i=bR[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const dPe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function QB(e){return dPe[e]}const Ree=new Set(["linear","log","pow","sqrt","symlog"]),Iee=new Set([...Ree,"time","utc"]);function Pee(e){return Ree.has(e)}const Fee=new Set(["quantile","quantize","threshold"]),fPe=new Set([...Iee,...Fee,"sequential","identity"]),cPe=new Set(["ordinal","bin-ordinal","point","band"]);function Ti(e){return cPe.has(e)}function ks(e){return fPe.has(e)}function dl(e){return Iee.has(e)}function pm(e){return Fee.has(e)}const hPe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function pPe(e){return!Ne(e)&&$e(e,"name")}function Nee(e){return $e(e,"param")}function gPe(e){return $e(e,"unionWith")}function mPe(e){return Fe(e)&&"field"in e}const yPe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:d6e,domain:f6e,range:c6e,rangeMax:h6e,rangeMin:p6e,scheme:g6e,...vPe}=yPe,bPe=ke(vPe);function _R(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return dl(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return dl(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return dl(e);case"nice":return dl(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ks(e)&&!xt(["log","time","utc","threshold","quantile"],e)}}function Lee(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return $g(e)?void 0:gIe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function _Pe(e,t){return xt([FM,NM],t)?e===void 0||Ti(e):t===hm?xt([zi.TIME,zi.UTC,void 0],e):t===Eh?Pee(e)||pm(e)||e===void 0:!0}function xPe(e,t,n=!1){if(!jl(e))return!1;switch(e){case _n:case Oi:case jf:case Zm:case qo:case Rs:return dl(t)||t==="band"?!0:t==="point"?!n:!1;case Uf:return xt(["linear","band"],t);case ed:case Wf:case td:case Bf:case Vf:case Gh:return dl(t)||pm(t)||xt(["band","point","ordinal"],t);case wr:case Ml:case zl:return t!=="band";case Gf:case kr:return t==="ordinal"||pm(t)}}function wPe(e){return Fe(e)&&"value"in e}const Za={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Mee=Za.arc,PE=Za.area,FE=Za.bar,kPe=Za.image,NE=Za.line,LE=Za.point,$Pe=Za.rect,v$=Za.rule,zee=Za.text,LM=Za.tick,EPe=Za.trail,MM=Za.circle,zM=Za.square,qee=Za.geoshape;function Yf(e){return["line","area","trail"].includes(e)}function $_(e){return["rect","bar","image","arc","tick"].includes(e)}const SPe=new Set(ke(Za));function Ol(e){return $e(e,"type")}const TPe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],APe=["fill","fillOpacity"],OPe=[...TPe,...APe],DPe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},e4=ke(DPe),RA=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],CPe={area:["line","point"],bar:RA,rect:RA,line:["point"],tick:["bandSize","thickness",...RA]},RPe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},IPe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},jee=ke(IPe);function Sh(e){return $e(e,"band")}const PPe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},FPe=5,qM={binSpacing:0,continuousBandSize:FPe,minBandSize:.25,timeUnitBandPosition:.5},NPe={...qM,binSpacing:1},LPe={...qM,thickness:1};function MPe(e){return Ol(e)?e.type:e}function Uee(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function jM({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:a}){var s,l;if(!i||!ks(i)||a)return"always-valid";const r=Uee(Kt("invalid",e,t),{isPath:Yf(e.type)});return((l=(s=t.scale)==null?void 0:s.invalid)==null?void 0:l[n])!==void 0?"show":r}function zPe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function Bee({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const a=`${i}[0]`,r=`peek(${i})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?a:r})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?a:r})`}}function Vee({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:a,config:r}){var d;const o=n==null?void 0:n.get("type"),s=Es(t),l=OE(s==null?void 0:s.aggregate),u=jM({scaleChannel:e,markDef:a,config:r,scaleType:o,isCountAggregate:l});if(s&&u==="show"){const c=((d=r.scale.invalid)==null?void 0:d[e])??"zero-or-min";return{test:IE(Ie(s,{expr:"datum"}),!1),...qPe(c,n,i)}}}function qPe(e,t,n){if(wPe(e)){const{value:i}=e;return We(i)?{signal:i.signal}:{value:i}}return Bee({scale:t,scaleName:n,mode:"zeroOrMin"})}function UM(e){const{channel:t,channelDef:n,markDef:i,scale:a,scaleName:r,config:o}=e,s=Hh(t),l=BM(e),u=Vee({scaleChannel:s,channelDef:n,scale:a,scaleName:r,markDef:i,config:o});return u!==void 0?[u,l]:l}function jPe(e){const{datum:t}=e;return Zh(t)?$h(t):`${en(t)}`}function Kc(e,t,n,i){const a={};if(t&&(a.scale=t),Ul(e)){const{datum:r}=e;Zh(r)?a.signal=$h(r):We(r)?a.signal=r.signal:w0(r)?a.signal=r.expr:a.value=r}else a.field=Ie(e,n);if(i){const{offset:r,band:o}=i;r&&(a.offset=r),o&&(a.band=o)}return a}function b$({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:a,endSuffix:r="end",bandPosition:o=.5}){const s=!We(o)&&0<o&&o<1?"datum":void 0,l=Ie(t,{expr:s,suffix:a}),u=n!==void 0?Ie(n,{expr:s}):Ie(t,{suffix:r,expr:s}),d={};if(o===0||o===1){d.scale=e;const c=o===0?l:u;d.field=c}else{const c=We(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${u}`:`${1-o} * ${l} + ${o} * ${u}`;d.signal=`scale("${e}", ${c})`}return i&&(d.offset=i),d}function UPe({scaleName:e,fieldDef:t}){const n=Ie(t,{expr:"datum"}),i=Ie(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function BM({channel:e,channelDef:t,channel2Def:n,markDef:i,config:a,scaleName:r,scale:o,stack:s,offset:l,defaultRef:u,bandPosition:d}){if(t){if(rt(t)){const c=o==null?void 0:o.get("type");if(Ga(t)){d??(d=Tf({fieldDef:t,fieldDef2:n,markDef:i,config:a}));const{bin:g,timeUnit:v,type:b}=t;if(ln(g)||d&&v&&b===hm)return s!=null&&s.impute?Kc(t,r,{binSuffix:"mid"},{offset:l}):d&&!Ti(c)?b$({scaleName:r,fieldOrDatumDef:t,bandPosition:d,offset:l}):Kc(t,r,A0(t,e)?{binSuffix:"range"}:{},{offset:l});if(Ni(g)){if(Te(n))return b$({scaleName:r,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:l});Ee(vee(e===_n?Cs:Ll))}}return Kc(t,r,Ti(c)?{binSuffix:"range"}:{},{offset:l,band:c==="band"?d??t.bandPosition??.5:void 0})}else if($s(t)){const c=t.value,g=l?{offset:l}:{};return{...kb(e,c),...g}}}return ft(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function kb(e,t){return xt(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:xt(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:cn(t)}function Th(e){return e&&e!=="number"&&e!=="time"}function Wee(e,t,n){return`${e}(${t}${n?`, ${en(n)}`:""})`}const BPe="  ";function VM({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:a,config:r}){var l,u;if(Th(n))return cs({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:r});const o=Gee(e,i,a),s=gm(e);if(t===void 0&&n===void 0&&r.customFormatTypes){if(s==="quantitative"){if(a&&r.normalizedNumberFormatType)return cs({fieldOrDatumDef:e,format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,expr:i,config:r});if(r.numberFormatType)return cs({fieldOrDatumDef:e,format:r.numberFormat,formatType:r.numberFormatType,expr:i,config:r})}if(s==="temporal"&&r.timeFormatType&&Te(e)&&e.timeUnit===void 0)return cs({fieldOrDatumDef:e,format:r.timeFormat,formatType:r.timeFormatType,expr:i,config:r})}if(ym(e)){const d=WPe({field:o,timeUnit:Te(e)?(l=Si(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:r.timeFormatType,rawTimeFormat:r.timeFormat,isUTCScale:Kh(e)&&((u=e.scale)==null?void 0:u.type)===zi.UTC});return d?{signal:d}:void 0}if(t=xR({type:s,specifiedFormat:t,config:r,normalizeStack:a}),Te(e)&&ln(e.bin)){const d=Ie(e,{expr:i,binSuffix:"end"});return{signal:$0(o,d,t,n,r)}}else return t||gm(e)==="quantitative"?{signal:`${Xee(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function Gee(e,t,n){return Te(e)?n?`${Ie(e,{expr:t,suffix:"end"})}-${Ie(e,{expr:t,suffix:"start"})}`:Ie(e,{expr:t}):jPe(e)}function cs({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:a,config:r,field:o}){if(o??(o=Gee(e,i,a)),o!=="datum.value"&&Te(e)&&ln(e.bin)){const s=Ie(e,{expr:i,binSuffix:"end"});return{signal:$0(o,s,t,n,r)}}return{signal:Wee(n,o,t)}}function Hee(e,t,n,i,a,r){var o;if(!(Ne(i)&&Th(i))&&!(n===void 0&&i===void 0&&a.customFormatTypes&&gm(e)==="quantitative"&&(a.normalizedNumberFormatType&&mm(e)&&e.stack==="normalize"||a.numberFormatType))){if(mm(e)&&e.stack==="normalize"&&a.normalizedNumberFormat)return xR({type:"quantitative",config:a,normalizeStack:!0});if(ym(e)){const s=Te(e)?(o=Si(e.timeUnit))==null?void 0:o.unit:void 0;return s===void 0&&a.customFormatTypes&&a.timeFormatType?void 0:VPe({specifiedFormat:n,timeUnit:s,config:a,omitTimeFormatConfig:r})}return xR({type:t,specifiedFormat:n,config:a})}}function Yee(e,t,n){var i;if(e&&(We(e)||e==="number"||e==="time"))return e;if(ym(t)&&n!=="time"&&n!=="utc")return Te(t)&&((i=Si(t==null?void 0:t.timeUnit))!=null&&i.utc)?"utc":"time"}function xR({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Ne(t))return t;if(e===Eh)return i?n.normalizedNumberFormat:n.numberFormat}function VPe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:See(t)}:i?void 0:n.timeFormat)}function Xee(e,t){return`format(${e}, "${t||""}")`}function t4(e,t,n,i){return Th(n)?Wee(n,e,t):Xee(e,(Ne(t)?t:void 0)??i.numberFormat)}function $0(e,t,n,i,a){if(n===void 0&&i===void 0&&a.customFormatTypes&&a.numberFormatType)return $0(e,t,a.numberFormat,a.numberFormatType,a);const r=t4(e,n,i,a),o=t4(t,n,i,a);return`${IE(e,!1)} ? "null" : ${r} + "${BPe}" + ${o}`}function WPe({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:a,isUTCScale:r}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:(n=Ne(n)?n:a,`${r?"utc":"time"}Format(${e}, '${n}')`):QIe(t,e,r)}const ME="min",GPe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function n4(e){return Me(GPe,e)}function HPe(e){return $e(e,"encoding")}function Ou(e){return e&&(e.op==="count"||$e(e,"field"))}function Zee(e){return e&&ye(e)}function E0(e){return $e(e,"row")||$e(e,"column")}function WM(e){return $e(e,"header")}function zE(e){return $e(e,"facet")}function YPe(e){return $e(e,"param")}function XPe(e){return!Ne(e)&&$e(e,"repeat")}function i4(e){const{field:t,timeUnit:n,bin:i,aggregate:a}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...a?{aggregate:a}:{},field:t}}function GM(e){return $e(e,"sort")}function Tf({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(rt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Te(e)){const{timeUnit:a,bin:r}=e;if(a&&!t)return Al("timeUnitBandPosition",n,i);if(ln(r))return .5}}function Jee({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:a,scaleType:r,useVlSizeChannel:o}){var u,d,c;const s=$r(e),l=Kt(o?"size":s,i,a,{vgChannel:s});if(l!==void 0)return l;if(Te(t)){const{timeUnit:g,bin:v}=t;if(g&&!n)return{band:Al("timeUnitBandSize",i,a)};if(ln(v)&&!Ti(r))return{band:1}}if($_(i.type))return r?Ti(r)?((u=a[i.type])==null?void 0:u.discreteBandSize)||{band:1}:(d=a[i.type])==null?void 0:d.continuousBandSize:(c=a[i.type])==null?void 0:c.discreteBandSize}function Kee(e,t,n,i){return ln(e.bin)||e.timeUnit&&Ga(e)&&e.type==="temporal"?Tf({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function Qee(e){return $e(e,"sort")&&!$e(e,"field")}function S0(e){return $e(e,"condition")}function qE(e){const t=e==null?void 0:e.condition;return!!t&&!ye(t)&&Te(t)}function T0(e){const t=e==null?void 0:e.condition;return!!t&&!ye(t)&&rt(t)}function ZPe(e){const t=e==null?void 0:e.condition;return!!t&&(ye(t)||$s(t))}function Te(e){return $e(e,"field")||(e==null?void 0:e.aggregate)==="count"}function gm(e){return e==null?void 0:e.type}function Ul(e){return $e(e,"datum")}function Yd(e){return Ga(e)&&!x$(e)||_$(e)}function a4(e){return Ga(e)&&e.type==="quantitative"&&!e.bin||_$(e)}function _$(e){return Ul(e)&&Lt(e.datum)}function rt(e){return Te(e)||Ul(e)}function Ga(e){return e&&($e(e,"field")||e.aggregate==="count")&&$e(e,"type")}function $s(e){return $e(e,"value")}function Kh(e){return $e(e,"scale")||$e(e,"sort")}function mm(e){return $e(e,"axis")||$e(e,"stack")||$e(e,"impute")}function ete(e){return $e(e,"legend")}function tte(e){return $e(e,"format")||$e(e,"formatType")}function JPe(e){return yr(e,["legend","axis","header","scale"])}function KPe(e){return $e(e,"op")}function Ie(e,t={}){let n=e.field;const i=t.prefix;let a=t.suffix,r="";if(eFe(e))n=VQ("count");else{let o;if(!t.nofn)if(KPe(e))o=e.op;else{const{bin:s,aggregate:l,timeUnit:u}=e;ln(s)?(o=aee(s),a=(t.binSuffix??"")+(t.suffix??"")):l?Hf(l)?(r=`["${n}"]`,n=`argmax_${l.argmax}`):Vu(l)?(r=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):u&&!Jh(u)&&(o=ePe(u),a=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return a&&(n=`${n}_${a}`),i&&(n=`${i}_${n}`),t.forAs?Xm(n):t.expr?jQ(n,t.expr)+r:No(n)+r}function x$(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Te(e)&&!!e.bin;case"temporal":return!1}throw new Error(pee(e.type))}function QPe(e){var t;return Kh(e)&&pm((t=e.scale)==null?void 0:t.type)}function eFe(e){return e.aggregate==="count"}function tFe(e,t){var o;const{field:n,bin:i,timeUnit:a,aggregate:r}=e;if(r==="count")return t.countTitle;if(ln(i))return`${n} (binned)`;if(a&&!Jh(a)){const s=(o=Si(a))==null?void 0:o.unit;if(s)return`${n} (${RE(s).join("-")})`}else if(r)return Hf(r)?`${n} for max ${r.argmax}`:Vu(r)?`${n} for min ${r.argmin}`:`${v0(r)} of ${n}`;return n}function nFe(e){const{aggregate:t,bin:n,timeUnit:i,field:a}=e;if(Hf(t))return`${a} for argmax(${t.argmax})`;if(Vu(t))return`${a} for argmin(${t.argmin})`;const r=i&&!Jh(i)?Si(i):void 0,o=t||(r==null?void 0:r.unit)||(r==null?void 0:r.maxbins)&&"timeunit"||ln(n)&&"bin";return o?`${o.toUpperCase()}(${a})`:a}const nte=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return nFe(e);default:return tFe(e,t)}};let ite=nte;function ate(e){ite=e}function iFe(){ate(nte)}function Eg(e,t,{allowDisabling:n,includeDefault:i=!0}){var s;const a=(s=HM(e))==null?void 0:s.title;if(!Te(e))return a??e.title;const r=e,o=i?YM(r,t):void 0;return n?Gn(a,r.title,o):a??r.title??o}function HM(e){if(mm(e)&&e.axis)return e.axis;if(ete(e)&&e.legend)return e.legend;if(WM(e)&&e.header)return e.header}function YM(e,t){return ite(e,t)}function w$(e){if(tte(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=HM(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function aFe(e,t){var r;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(GM(e)&&ye(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:a}=e;if(a)return"temporal";if(i||n&&!Hf(n)&&!Vu(n))return"quantitative";if(Kh(e)&&((r=e.scale)!=null&&r.type))switch(bR[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Es(e){if(Te(e))return e;if(qE(e))return e.condition}function oi(e){if(rt(e))return e;if(T0(e))return e.condition}function rte(e,t,n,i={}){if(Ne(e)||Lt(e)||Mf(e)){const a=Ne(e)?"string":Lt(e)?"number":"boolean";return Ee(iIe(t,a,e)),{value:e}}return rt(e)?k$(e,t,n,i):T0(e)?{...e,condition:k$(e.condition,t,n,i)}:e}function k$(e,t,n,i){if(tte(e)){const{format:a,formatType:r,...o}=e;if(Th(r)&&!n.customFormatTypes)return Ee(ZB(t)),k$(o,t,n,i)}else{const a=mm(e)?"axis":ete(e)?"legend":WM(e)?"header":null;if(a&&e[a]){const{format:r,formatType:o,...s}=e[a];if(Th(o)&&!n.customFormatTypes)return Ee(ZB(t)),k$({...e,[a]:s},t,n,i)}}return Te(e)?XM(e,t,i):rFe(e)}function rFe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Lt(n)?"quantitative":Ne(n)?"nominal":Zh(n)?"temporal":void 0,{...e,type:t}}function XM(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:a,bin:r,field:o}=e,s={...e};if(!n&&i&&!_M(i)&&!Hf(i)&&!Vu(i)&&(Ee(rIe(i)),delete s.aggregate),a&&(s.timeUnit=Si(a)),o&&(s.field=`${o}`),ln(r)&&(s.bin=jE(r,t)),Ni(r)&&!Hn(t)&&Ee(LIe(t)),Ga(s)){const{type:l}=s,u=lPe(l);l!==u&&(s.type=u),l!=="quantitative"&&OE(i)&&(Ee(aIe(l,i)),s.type="quantitative")}else if(!KQ(t)){const l=aFe(s,t);s.type=l}if(Ga(s)){const{compatible:l,warning:u}=oFe(s,t)||{};l===!1&&Ee(u)}if(GM(s)&&Ne(s.sort)){const{sort:l}=s;if(n4(l))return{...s,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&n4(u))return{...s,sort:{encoding:u,order:"descending"}}}if(WM(s)){const{header:l}=s;if(l){const{orient:u,...d}=l;if(u)return{...s,header:{...d,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return s}function jE(e,t){return Mf(e)?{maxbins:jB(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:jB(t)}:e}const Np={compatible:!0};function oFe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Tu:case Au:case kE:return x$(e)?Np:{compatible:!1,warning:uIe(t)};case _n:case Oi:case jf:case Zm:case wr:case Ml:case zl:case b0:case _0:case $E:case wh:case EE:case SE:case Gh:case qo:case Rs:case TE:return Np;case Ps:case Lo:case Is:case Fs:return n!==Eh?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Np;case td:case Bf:case Vf:case Wf:case ed:case Qu:case Ku:case Cs:case Ll:case Uf:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Np;case kr:case Gf:return!x$(e)&&!QPe(e)?{compatible:!1,warning:dIe(t)}:Np;case cm:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Np}}function ym(e){const{formatType:t}=w$(e);return t==="time"||!t&&sFe(e)}function sFe(e){return e&&(e.type==="temporal"||Te(e)&&!!e.timeUnit)}function UE(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:a}){var l;const r=t&&((l=Si(t))==null?void 0:l.unit);let o=r||n==="temporal",s;return w0(e)?s=e.expr:We(e)?s=e.signal:Zh(e)?(o=!0,s=$h(e)):(Ne(e)||Lt(e))&&o&&(s=`datetime(${en(e)})`,XIe(r)&&(Lt(e)&&e<1e4||Ne(e)&&isNaN(Date.parse(e)))&&(s=$h({[r]:e}))),s?i&&o?`time(${s})`:s:a?void 0:en(e)}function ote(e,t){const{type:n}=e;return t.map(i=>{const a=Te(e)&&!Jh(e.timeUnit)?e.timeUnit:void 0,r=UE(i,{timeUnit:a,type:n,undefinedIfExprNotRequired:!0});return r!==void 0?{signal:r}:i})}function A0(e,t){return ln(e.bin)?jl(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const r4={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function O0(e){return e==null?void 0:e.condition}const ste=["domain","grid","labels","ticks","title"],lFe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},lte={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},uFe={...lte,style:1,labelExpr:1,encoding:1};function o4(e){return Me(uFe,e)}const dFe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},ute=ke(dFe);function id(e){return $e(e,"mark")}class BE{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return id(t)?MPe(t.mark)===this.name:!1}}function Qc(e,t){const n=e&&e[t];return n?ye(n)?dm(n,i=>!!i.field):Te(n)||qE(n):!1}function dte(e,t){const n=e&&e[t];return n?ye(n)?dm(n,i=>!!i.field):Te(n)||Ul(n)||T0(n):!1}function fte(e,t){if(Hn(t)){const n=e[t];if((Te(n)||Ul(n))&&(Cee(n.type)||Te(n)&&n.timeUnit)){const i=gM(t);return dte(e,i)}}return!1}function cte(e){return dm(rRe,t=>{if(Qc(e,t)){const n=e[t];if(ye(n))return dm(n,i=>!!i.aggregate);{const i=Es(n);return i&&!!i.aggregate}}return!1})}function hte(e,t){const n=[],i=[],a=[],r=[],o={};return ZM(e,(s,l)=>{if(Te(s)){const{field:u,aggregate:d,bin:c,timeUnit:g,...v}=s;if(d||g||c){const b=HM(s),x=b==null?void 0:b.title;let k=Ie(s,{forAs:!0});const w={...x?[]:{title:Eg(s,t,{allowDisabling:!0})},...v,field:k};if(d){let E;if(Hf(d)?(E="argmax",k=Ie({op:"argmax",field:d.argmax},{forAs:!0}),w.field=`${k}.${u}`):Vu(d)?(E="argmin",k=Ie({op:"argmin",field:d.argmin},{forAs:!0}),w.field=`${k}.${u}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(E=d),E){const T={op:E,as:k};u&&(T.field=u),r.push(T)}}else if(n.push(k),Ga(s)&&ln(c)){if(i.push({bin:c,field:u,as:k}),n.push(Ie(s,{binSuffix:"end"})),A0(s,l)&&n.push(Ie(s,{binSuffix:"range"})),Hn(l)){const E={field:`${k}_end`};o[`${l}2`]=E}w.bin="binned",KQ(l)||(w.type=Eh)}else if(g&&!Jh(g)){a.push({timeUnit:g,field:u,as:k});const E=Ga(s)&&s.type!==hm&&"time";E&&(l===b0||l===wh?w.formatType=E:mRe(l)?w.legend={formatType:E,...w.legend}:Hn(l)&&(w.axis={formatType:E,...w.axis}))}o[l]=w}else n.push(u),o[l]=e[l]}else o[l]=e[l]}),{bins:i,timeUnits:a,aggregate:r,groupby:n,encoding:o}}function fFe(e,t,n){const i=vRe(t,n);if(i){if(i==="binned"){const a=e[t===Cs?_n:Oi];return!!(Te(a)&&Te(e[t])&&Ni(a.bin))}}else return!1;return!0}function cFe(e,t,n,i){const a={};for(const r of ke(e))JQ(r)||Ee(lIe(r));for(let r of fRe){if(!e[r])continue;const o=e[r];if(x0(r)){const s=dRe(r),l=a[s];if(Te(l)&&sPe(l.type)&&Te(o)&&!l.timeUnit){Ee(nIe(s));continue}}if(r==="angle"&&t==="arc"&&!e.theta&&(Ee(tIe),r=qo),!fFe(e,r,t)){Ee(CE(r,t));continue}if(r===ed&&t==="line"){const s=Es(e[r]);if(s!=null&&s.aggregate){Ee(sIe);continue}}if(r===wr&&(n?"fill"in e:"stroke"in e)){Ee(gee("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(r===_0||r===cm&&!ye(o)&&!$s(o)||r===wh&&ye(o)){if(o){if(r===cm){const s=e[r];if(Qee(s)){a[r]=s;continue}}a[r]=Le(o).reduce((s,l)=>(Te(l)?s.push(XM(l,r)):Ee(vR(l,r)),s),[])}}else{if(r===wh&&o===null)a[r]=null;else if(!Te(o)&&!Ul(o)&&!$s(o)&&!S0(o)&&!We(o)){Ee(vR(o,r));continue}a[r]=rte(o,r,i)}}return a}function VE(e,t){const n={};for(const i of ke(e)){const a=rte(e[i],i,t,{compositeMark:!0});n[i]=a}return n}function hFe(e){const t=[];for(const n of ke(e))if(Qc(e,n)){const i=e[n],a=Le(i);for(const r of a)Te(r)?t.push(r):qE(r)&&t.push(r.condition)}return t}function ZM(e,t,n){if(e)for(const i of ke(e)){const a=e[i];if(ye(a))for(const r of a)t.call(n,r,i);else t.call(n,a,i)}}function pFe(e,t,n,i){return e?ke(e).reduce((a,r)=>{const o=e[r];return ye(o)?o.reduce((s,l)=>t.call(i,s,l,r),a):t.call(i,a,o,r)},n):n}function pte(e,t){return ke(t).reduce((n,i)=>{switch(i){case _n:case Oi:case EE:case TE:case SE:case Cs:case Ll:case jf:case Zm:case qo:case Qu:case Rs:case Ku:case Uf:case Is:case Ps:case Fs:case Lo:case b0:case kr:case Gh:case wh:return n;case cm:if(e==="line"||e==="trail")return n;case _0:case $E:{const a=t[i];if(ye(a)||Te(a))for(const r of Le(a))r.aggregate||n.push(Ie(r,{}));return n}case ed:if(e==="trail")return n;case wr:case Ml:case zl:case td:case Bf:case Vf:case Gf:case Wf:{const a=Es(t[i]);return a&&!a.aggregate&&n.push(Ie(a,{})),n}}},[])}function gFe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,a;if(ye(t)){for(const r of t)r.aggregate?(i||(i=[]),i.push(r)):(a||(a=[]),a.push(r));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:a=t;return ye(a)&&a.length===1&&(a=a[0]),{customTooltipWithoutAggregatedField:a,filteredEncoding:n}}function wR(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const a=e.map(({fieldPrefix:o,titlePrefix:s})=>{const l=i?` of ${JM(t)}`:"";return{field:o+t.field,type:t.type,title:We(s)?{signal:`${s}"${escape(l)}"`}:s+l}}),r=hFe(n).map(JPe);return{tooltip:[...a,...ul(r,St)]}}function JM(e){const{title:t,field:n}=e;return Gn(t,n)}function KM(e,t,n,i,a){const{scale:r,axis:o}=n;return({partName:s,mark:l,positionPrefix:u,endPositionPrefix:d=void 0,extraEncoding:c={}})=>{const g=JM(n);return gte(e,s,a,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...g!==void 0?{title:g}:{},...r!==void 0?{scale:r}:{},...o!==void 0?{axis:o}:{}},...Ne(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...c}})}}function gte(e,t,n,i){const{clip:a,color:r,opacity:o}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...a?{clip:a}:{},...r?{color:r}:{},...o?{opacity:o}:{},...Ol(i.mark)?i.mark:{type:i.mark},style:`${s}-${String(t)}`,...Mf(e[t])?{}:e[t]}}]:[]}function mte(e,t,n){const{encoding:i}=e,a=t==="vertical"?"y":"x",r=i[a],o=i[`${a}2`],s=i[`${a}Error`],l=i[`${a}Error2`];return{continuousAxisChannelDef:o1(r,n),continuousAxisChannelDef2:o1(o,n),continuousAxisChannelDefError:o1(s,n),continuousAxisChannelDefError2:o1(l,n),continuousAxis:a}}function o1(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...i}=e;return n!==t&&Ee(NIe(n,t)),i}else return e}function yte(e,t){const{mark:n,encoding:i}=e,{x:a,y:r}=i;if(Ol(n)&&n.orient)return n.orient;if(Yd(a)){if(Yd(r)){const o=Te(a)&&a.aggregate,s=Te(r)&&r.aggregate;if(!o&&s===t)return"vertical";if(!s&&o===t)return"horizontal";if(o===t&&s===t)throw new Error("Both x and y cannot have aggregate");return ym(r)&&!ym(a)?"horizontal":"vertical"}return"horizontal"}else{if(Yd(r))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const $$="boxplot",mFe=["box","median","outliers","rule","ticks"],yFe=new BE($$,bte);function vte(e){return Lt(e)?"tukey":e}function bte(e,{config:t}){e={...e,encoding:VE(e.encoding,t)};const{mark:n,encoding:i,params:a,projection:r,...o}=e,s=Ol(n)?n:{type:n};a&&Ee(hee("boxplot"));const l=s.extent??t.boxplot.extent,u=Kt("size",s,t),d=s.invalid,c=vte(l),{bins:g,timeUnits:v,transform:b,continuousAxisChannelDef:x,continuousAxis:k,groupby:w,aggregate:E,encodingWithoutContinuousAxis:T,ticksOrient:O,boxOrient:D,customTooltipWithoutAggregatedField:P}=vFe(e,l,t),R=Xm(x.field),{color:M,size:q,...H}=T,z=wa=>KM(s,k,x,wa,t.boxplot),Q=z(H),te=z(T),W=(Fe(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",j=z({...H,...q?{size:q}:{},color:{condition:{test:`${Gt(`lower_box_${x.field}`)} >= ${Gt(`upper_box_${x.field}`)}`,...M||{value:W}}}}),K=wR([{fieldPrefix:c==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:c==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],x,T),se={type:"tick",color:"black",opacity:1,orient:O,invalid:d,aria:!1},ee=c==="min-max"?K:wR([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],x,T),oe=[...Q({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:ee}),...Q({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:ee}),...Q({partName:"ticks",mark:se,positionPrefix:"lower_whisker",extraEncoding:ee}),...Q({partName:"ticks",mark:se,positionPrefix:"upper_whisker",extraEncoding:ee})],Y=[...c!=="tukey"?oe:[],...te({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:D,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:K}),...j({partName:"median",mark:{type:"tick",invalid:d,...Fe(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:O,aria:!1},positionPrefix:"mid_box",extraEncoding:K})];if(c==="min-max")return{...o,transform:(o.transform??[]).concat(b),layer:Y};const Z=Gt(`lower_box_${x.field}`),ae=Gt(`upper_box_${x.field}`),ne=`(${ae} - ${Z})`,U=`${Z} - ${l} * ${ne}`,X=`${ae} + ${l} * ${ne}`,ue=Gt(x.field),Ce={joinaggregate:_te(x.field),groupby:w},ie={transform:[{filter:`(${U} <= ${ue}) && (${ue} <= ${X})`},{aggregate:[{op:"min",field:x.field,as:`lower_whisker_${R}`},{op:"max",field:x.field,as:`upper_whisker_${R}`},{op:"min",field:`lower_box_${x.field}`,as:`lower_box_${R}`},{op:"max",field:`upper_box_${x.field}`,as:`upper_box_${R}`},...E],groupby:w}],layer:oe},{tooltip:_e,...xe}=H,{scale:ve,axis:G}=x,kt=JM(x),pt=yr(G,["title"]),Rt=gte(s,"outliers",t.boxplot,{transform:[{filter:`(${ue} < ${U}) || (${ue} > ${X})`}],mark:"point",encoding:{[k]:{field:x.field,type:x.type,...kt!==void 0?{title:kt}:{},...ve!==void 0?{scale:ve}:{},...Qt(pt)?{}:{axis:pt}},...xe,...M?{color:M}:{},...P?{tooltip:P}:{}}})[0];let Jt;const Cn=[...g,...v,Ce];return Rt?Jt={transform:Cn,layer:[Rt,ie]}:(Jt=ie,Jt.transform.unshift(...Cn)),{...o,layer:[Jt,{transform:b,layer:Y}]}}function _te(e){const t=Xm(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function vFe(e,t,n){const i=yte(e,$$),{continuousAxisChannelDef:a,continuousAxis:r}=mte(e,i,$$),o=a.field,s=Xm(o),l=vte(t),u=[..._te(o),{op:"median",field:o,as:`mid_box_${s}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+s},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+s}],d=l==="min-max"||l==="tukey"?[]:[{calculate:`${Gt(`upper_box_${s}`)} - ${Gt(`lower_box_${s}`)}`,as:`iqr_${s}`},{calculate:`min(${Gt(`upper_box_${s}`)} + ${Gt(`iqr_${s}`)} * ${t}, ${Gt(`max_${s}`)})`,as:`upper_whisker_${s}`},{calculate:`max(${Gt(`lower_box_${s}`)} - ${Gt(`iqr_${s}`)} * ${t}, ${Gt(`min_${s}`)})`,as:`lower_whisker_${s}`}],{[r]:c,...g}=e.encoding,{customTooltipWithoutAggregatedField:v,filteredEncoding:b}=gFe(g),{bins:x,timeUnits:k,aggregate:w,groupby:E,encoding:T}=hte(b,n),O=i==="vertical"?"horizontal":"vertical",D=i,P=[...x,...k,{aggregate:[...w,...u],groupby:E},...d];return{bins:x,timeUnits:k,transform:P,groupby:E,aggregate:w,continuousAxisChannelDef:a,continuousAxis:r,encodingWithoutContinuousAxis:T,ticksOrient:O,boxOrient:D,customTooltipWithoutAggregatedField:v}}const QM="errorbar",bFe=["ticks","rule"],_Fe=new BE(QM,xte);function xte(e,{config:t}){e={...e,encoding:VE(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:a,encodingWithoutContinuousAxis:r,ticksOrient:o,markDef:s,outerSpec:l,tooltipEncoding:u}=wte(e,QM,t);delete r.size;const d=KM(s,a,i,r,t.errorbar),c=s.thickness,g=s.size,v={type:"tick",orient:o,aria:!1,...c!==void 0?{thickness:c}:{},...g!==void 0?{size:g}:{}},b=[...d({partName:"ticks",mark:v,positionPrefix:"lower",extraEncoding:u}),...d({partName:"ticks",mark:v,positionPrefix:"upper",extraEncoding:u}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...c!==void 0?{size:c}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...b.length>1?{layer:b}:{...b[0]}}}function xFe(e,t){const{encoding:n}=e;if(wFe(n))return{orient:yte(e,t),inputType:"raw"};const i=kFe(n),a=$Fe(n),r=n.x,o=n.y;if(i){if(a)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const s=n.x2,l=n.y2;if(rt(s)&&rt(l))throw new Error(`${t} cannot have both x2 and y2`);if(rt(s)){if(Yd(r))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(rt(l)){if(Yd(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const s=n.xError,l=n.xError2,u=n.yError,d=n.yError2;if(rt(l)&&!rt(s))throw new Error(`${t} cannot have xError2 without xError`);if(rt(d)&&!rt(u))throw new Error(`${t} cannot have yError2 without yError`);if(rt(s)&&rt(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(rt(s)){if(Yd(r))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(rt(u)){if(Yd(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function wFe(e){return(rt(e.x)||rt(e.y))&&!rt(e.x2)&&!rt(e.y2)&&!rt(e.xError)&&!rt(e.xError2)&&!rt(e.yError)&&!rt(e.yError2)}function kFe(e){return rt(e.x2)||rt(e.y2)}function $Fe(e){return rt(e.xError)||rt(e.xError2)||rt(e.yError)||rt(e.yError2)}function wte(e,t,n){const{mark:i,encoding:a,params:r,projection:o,...s}=e,l=Ol(i)?i:{type:i};r&&Ee(hee(t));const{orient:u,inputType:d}=xFe(e,t),{continuousAxisChannelDef:c,continuousAxisChannelDef2:g,continuousAxisChannelDefError:v,continuousAxisChannelDefError2:b,continuousAxis:x}=mte(e,u,t),{errorBarSpecificAggregate:k,postAggregateCalculates:w,tooltipSummary:E,tooltipTitleWithFieldName:T}=EFe(l,c,g,v,b,d,t,n),{[x]:O,[x==="x"?"x2":"y2"]:D,[x==="x"?"xError":"yError"]:P,[x==="x"?"xError2":"yError2"]:R,...M}=a,{bins:q,timeUnits:H,aggregate:z,groupby:Q,encoding:te}=hte(M,n),W=[...z,...k],j=d!=="raw"?[]:Q,K=wR(E,c,te,T);return{transform:[...s.transform??[],...q,...H,...W.length===0?[]:[{aggregate:W,groupby:j}],...w],groupby:j,continuousAxisChannelDef:c,continuousAxis:x,encodingWithoutContinuousAxis:te,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:s,tooltipEncoding:K}}function EFe(e,t,n,i,a,r,o,s){let l=[],u=[];const d=t.field;let c,g=!1;if(r==="raw"){const v=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,b=e.extent?e.extent:v==="mean"?"stderr":"iqr";if(v==="median"!=(b==="iqr")&&Ee(FIe(v,b,o)),b==="stderr"||b==="stdev")l=[{op:b,field:d,as:`extent_${d}`},{op:v,field:d,as:`center_${d}`}],u=[{calculate:`${Gt(`center_${d}`)} + ${Gt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${Gt(`center_${d}`)} - ${Gt(`extent_${d}`)}`,as:`lower_${d}`}],c=[{fieldPrefix:"center_",titlePrefix:v0(v)},{fieldPrefix:"upper_",titlePrefix:s4(v,b,"+")},{fieldPrefix:"lower_",titlePrefix:s4(v,b,"-")}],g=!0;else{let x,k,w;b==="ci"?(x="mean",k="ci0",w="ci1"):(x="median",k="q1",w="q3"),l=[{op:k,field:d,as:`lower_${d}`},{op:w,field:d,as:`upper_${d}`},{op:x,field:d,as:`center_${d}`}],c=[{fieldPrefix:"upper_",titlePrefix:Eg({field:d,aggregate:w,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Eg({field:d,aggregate:k,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Eg({field:d,aggregate:x,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ee(PIe(e.center,e.extent)),r==="aggregated-upper-lower"?(c=[],u=[{calculate:Gt(n.field),as:`upper_${d}`},{calculate:Gt(d),as:`lower_${d}`}]):r==="aggregated-error"&&(c=[{fieldPrefix:"",titlePrefix:d}],u=[{calculate:`${Gt(d)} + ${Gt(i.field)}`,as:`upper_${d}`}],a?u.push({calculate:`${Gt(d)} + ${Gt(a.field)}`,as:`lower_${d}`}):u.push({calculate:`${Gt(d)} - ${Gt(i.field)}`,as:`lower_${d}`}));for(const v of u)c.push({fieldPrefix:v.as.substring(0,6),titlePrefix:xh(xh(v.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:c,tooltipTitleWithFieldName:g}}function s4(e,t,n){return`${v0(e)} ${n} ${t}`}const e3="errorband",SFe=["band","borders"],TFe=new BE(e3,kte);function kte(e,{config:t}){e={...e,encoding:VE(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:a,encodingWithoutContinuousAxis:r,markDef:o,outerSpec:s,tooltipEncoding:l}=wte(e,e3,t),u=o,d=KM(u,a,i,r,t.errorband),c=e.encoding.x!==void 0&&e.encoding.y!==void 0;let g={type:c?"area":"rect"},v={type:c?"line":"rule"};const b={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return c?(g={...g,...b,ariaRoleDescription:"errorband"},v={...v,...b,aria:!1}):u.interpolate?Ee(KB("interpolate")):u.tension&&Ee(KB("tension")),{...s,transform:n,layer:[...d({partName:"band",mark:g,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...d({partName:"borders",mark:v,positionPrefix:"lower",extraEncoding:l}),...d({partName:"borders",mark:v,positionPrefix:"upper",extraEncoding:l})]}}const $te={};function t3(e,t,n){const i=new BE(e,t);$te[e]={normalizer:i,parts:n}}function AFe(){return ke($te)}t3($$,bte,mFe);t3(QM,xte,bFe);t3(e3,kte,SFe);const OFe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Ete={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Ste={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},DFe=ke(Ete),CFe=ke(Ste),RFe={header:1,headerRow:1,headerColumn:1,headerFacet:1},Tte=ke(RFe),Ate=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],IFe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},PFe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ss="_vgsid_",FFe={point:{on:"click",fields:[Ss],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function n3(e){return e==="legend"||!!(e!=null&&e.legend)}function IA(e){return n3(e)&&Fe(e)}function i3(e){return!!(e!=null&&e.select)}function Ote(e){const t=[];for(const n of e||[]){if(i3(n))continue;const{expr:i,bind:a,...r}=n;if(a&&i){const o={...r,bind:a,init:i};t.push(o)}else{const o={...r,...i?{update:i}:{},...a?{bind:a}:{}};t.push(o)}}return t}function NFe(e){return WE(e)||r3(e)||a3(e)}function a3(e){return $e(e,"concat")}function WE(e){return $e(e,"vconcat")}function r3(e){return $e(e,"hconcat")}function Dte({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Dl(e){return $e(e,"step")}function l4(e){return $e(e,"view")||$e(e,"width")||$e(e,"height")}const u4=20,LFe={align:1,bounds:1,center:1,columns:1,spacing:1},MFe=ke(LFe);function zFe(e,t,n){const i=n[t],a={},{spacing:r,columns:o}=i;r!==void 0&&(a.spacing=r),o!==void 0&&(zE(e)&&!E0(e.facet)||a3(e))&&(a.columns=o),WE(e)&&(a.columns=1);for(const s of MFe)if(e[s]!==void 0)if(s==="spacing"){const l=e[s];a[s]=Lt(l)?l:{row:l.row??r,column:l.column??r}}else a[s]=e[s];return a}function kR(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function $R(e,t){const n=E$(e,t);return Dl(n)?n.step:Cte}function E$(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Gn(n,{step:e.step})}const Cte=20,qFe={continuousWidth:200,continuousHeight:200,step:Cte},jFe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:qFe,mark:RPe,arc:{},area:{},bar:NPe,circle:{},geoshape:{},image:{},line:{},point:{},rect:qM,rule:{color:"black"},square:{},text:{color:"black"},tick:LPe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:hPe,projection:{},legend:IFe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:FFe,style:{},title:{},facet:{spacing:u4},concat:{spacing:u4},normalizedNumberFormat:".0%"},ru=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],d4={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},f4={blue:ru[0],orange:ru[1],red:ru[2],teal:ru[3],green:ru[4],yellow:ru[5],purple:ru[6],pink:ru[7],brown:ru[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function UFe(e={}){return{signals:[{name:"color",value:Fe(e)?{...f4,...e}:f4}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function BFe(e){return{signals:[{name:"fontSize",value:Fe(e)?{...d4,...e}:d4}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function VFe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Rte(e){const t=ke(e||{}),n={};for(const i of t){const a=e[i];n[i]=O0(a)?oee(a):Fr(a)}return n}function WFe(e){const t=ke(e),n={};for(const i of t)n[i]=Rte(e[i]);return n}const GFe=[...jee,...ute,...Tte,"background","padding","legend","lineBreak","scale","style","title","view"];function Ite(e={}){const{color:t,font:n,fontSize:i,selection:a,...r}=e,o=Nm({},nt(jFe),n?VFe(n):{},t?UFe(t):{},i?BFe(i):{},r||{});a&&Lm(o,"selection",a,!0);const s=yr(o,GFe);for(const l of["background","lineBreak","padding"])o[l]&&(s[l]=Fr(o[l]));for(const l of jee)o[l]&&(s[l]=Mi(o[l]));for(const l of ute)o[l]&&(s[l]=Rte(o[l]));for(const l of Tte)o[l]&&(s[l]=Mi(o[l]));if(o.legend&&(s.legend=Mi(o.legend)),o.scale){const{invalid:l,...u}=o.scale,d=Mi(l,{level:1});s.scale={...Mi(u),...ke(d).length>0?{invalid:d}:{}}}return o.style&&(s.style=WFe(o.style)),o.title&&(s.title=Mi(o.title)),o.view&&(s.view=Mi(o.view)),s}const HFe=new Set(["view",...SPe]),YFe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],XFe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...CPe};function ZFe(e){e=nt(e);for(const t of YFe)delete e[t];if(e.axis)for(const t in e.axis)O0(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of OFe)delete e.legend[t];if(e.mark){for(const t of e4)delete e.mark[t];e.mark.tooltip&&Fe(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Ote(e.params)),delete e.params);for(const t of HFe){for(const i of e4)delete e[t][i];const n=XFe[t];if(n)for(const i of n)delete e[t][i];KFe(e,t)}for(const t of AFe())delete e[t];JFe(e);for(const t in e)Fe(e[t])&&Qt(e[t])&&delete e[t];return Qt(e)?void 0:e}function JFe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=ree(e.title);Qt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Qt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Qt(i)?delete e.title:e.title=i}function KFe(e,t,n,i){const a=e[t];t==="view"&&(n="cell");const r={...a,...e.style[n??t]};Qt(r)||(e.style[n??t]=r),delete e[t]}function GE(e){return $e(e,"layer")}function QFe(e){return $e(e,"repeat")}function eNe(e){return!ye(e.repeat)&&$e(e.repeat,"layer")}class o3{map(t,n){return zE(t)?this.mapFacet(t,n):QFe(t)?this.mapRepeat(t,n):r3(t)?this.mapHConcat(t,n):WE(t)?this.mapVConcat(t,n):a3(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(GE(t))return this.mapLayer(t,n);if(id(t))return this.mapUnit(t,n);throw new Error(xM(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...a}=t;return{...a,concat:i.map(r=>this.map(r,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const tNe={zero:1,center:1,normalize:1};function nNe(e){return Me(tNe,e)}const iNe=new Set([Mee,FE,PE,v$,LE,MM,zM,NE,zee,LM]),aNe=new Set([FE,PE,Mee]);function Lp(e){return Te(e)&&gm(e)==="quantitative"&&!e.bin}function c4(e,t,{orient:n,type:i}){const a=t==="x"?"y":"radius",r=t==="x"&&["bar","area"].includes(i),o=e[t],s=e[a];if(Te(o)&&Te(s))if(Lp(o)&&Lp(s)){if(o.stack)return t;if(s.stack)return a;const l=Te(o)&&!!o.aggregate,u=Te(s)&&!!s.aggregate;if(l!==u)return l?t:a;if(r){if(n==="vertical")return a;if(n==="horizontal")return t}}else{if(Lp(o))return t;if(Lp(s))return a}else{if(Lp(o))return r&&n==="vertical"?void 0:t;if(Lp(s))return r&&n==="horizontal"?void 0:a}}function rNe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Pte(e,t){var x,k;const n=Ol(e)?e:{type:e},i=n.type;if(!iNe.has(i))return null;const a=c4(t,"x",n)||c4(t,"theta",n);if(!a)return null;const r=t[a],o=Te(r)?Ie(r,{}):void 0,s=rNe(a),l=[],u=new Set;if(t[s]){const w=t[s],E=Te(w)?Ie(w,{}):void 0;E&&E!==o&&(l.push(s),u.add(E))}const d=s==="x"?"xOffset":"yOffset",c=t[d],g=Te(c)?Ie(c,{}):void 0;g&&g!==o&&(l.push(d),u.add(g));const v=cRe.reduce((w,E)=>{if(E!=="tooltip"&&Qc(t,E)){const T=t[E];for(const O of Le(T)){const D=Es(O);if(D.aggregate)continue;const P=Ie(D,{});(!P||!u.has(P))&&w.push({channel:E,fieldDef:D})}}return w},[]);let b;return r.stack!==void 0?Mf(r.stack)?b=r.stack?"zero":null:b=r.stack:aNe.has(i)&&(b="zero"),!b||!nNe(b)||cte(t)&&v.length===0?null:((x=r==null?void 0:r.scale)!=null&&x.type&&((k=r==null?void 0:r.scale)==null?void 0:k.type)!==zi.LINEAR&&r!=null&&r.stack&&Ee(CIe(r.scale.type)),rt(t[ql(a)])?(r.stack!==void 0&&Ee(DIe(a)),null):(Te(r)&&r.aggregate&&!ERe.has(r.aggregate)&&Ee(RIe(r.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:a,impute:r.impute===null?!1:Yf(i),stackBy:v,offset:b}))}function Fte(e,t,n){const i=Mi(e),a=Kt("orient",i,n);if(i.orient=uNe(i.type,t,a),a!==void 0&&a!==i.orient&&Ee(pIe(i.orient,a)),i.type==="bar"&&i.orient){const l=Kt("cornerRadiusEnd",i,n);if(l!==void 0){const u=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:PPe[i.orient];for(const d of u)i[d]=l;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const r=Kt("opacity",i,n),o=Kt("fillOpacity",i,n);return r===void 0&&o===void 0&&(i.opacity=sNe(i.type,t)),Kt("cursor",i,n)===void 0&&(i.cursor=oNe(i,t,n)),i}function oNe(e,t,n){return t.href||e.href||Kt("href",e,n)?"pointer":e.cursor}function sNe(e,t){if(xt([LE,LM,MM,zM],e)&&!cte(t))return .7}function lNe(e,t,{graticule:n}){if(n)return!1;const i=Al("filled",e,t),a=e.type;return Gn(i,a!==LE&&a!==NE&&a!==v$)}function uNe(e,t,n){switch(e){case LE:case MM:case zM:case zee:case $Pe:case kPe:return}const{x:i,y:a,x2:r,y2:o}=t;switch(e){case FE:if(Te(i)&&(Ni(i.bin)||Te(a)&&a.aggregate&&!i.aggregate))return"vertical";if(Te(a)&&(Ni(a.bin)||Te(i)&&i.aggregate&&!a.aggregate))return"horizontal";if(o||r){if(n)return n;if(!r)return(Te(i)&&i.type===Eh&&!ln(i.bin)||_$(i))&&Te(a)&&Ni(a.bin)?"horizontal":"vertical";if(!o)return(Te(a)&&a.type===Eh&&!ln(a.bin)||_$(a))&&Te(i)&&Ni(i.bin)?"vertical":"horizontal"}case v$:if(r&&!(Te(i)&&Ni(i.bin))&&o&&!(Te(a)&&Ni(a.bin)))return;case PE:if(o)return Te(a)&&Ni(a.bin)?"horizontal":"vertical";if(r)return Te(i)&&Ni(i.bin)?"vertical":"horizontal";if(e===v$){if(i&&!a)return"vertical";if(a&&!i)return"horizontal"}case NE:case LM:{const s=a4(i),l=a4(a);if(n)return n;if(s&&!l)return e!=="tick"?"horizontal":"vertical";if(!s&&l)return e!=="tick"?"vertical":"horizontal";if(s&&l)return"vertical";{const u=Ga(i)&&i.type===hm,d=Ga(a)&&a.type===hm;if(u&&!d)return"vertical";if(!u&&d)return"horizontal"}return}}return"vertical"}function dNe(e){const{point:t,line:n,...i}=e;return ke(i).length>1?i:i.type}function fNe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:yr(e[t],["point","line"])});return e}function PA(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Fe(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Fe(t.point)?t.point:{}:void 0}function h4(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class cNe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(id(t)){const{mark:i,encoding:a}=t,r=Ol(i)?i:{type:i};switch(r.type){case"line":case"rule":case"trail":return!!PA(r,n[r.type],a);case"area":return!!PA(r,n[r.type],a)||!!h4(r,n[r.type])}}return!1}run(t,n,i){const{config:a}=n,{params:r,projection:o,mark:s,name:l,encoding:u,...d}=t,c=VE(u,a),g=Ol(s)?s:{type:s},v=PA(g,a[g.type],c),b=g.type==="area"&&h4(g,a[g.type]),x=[{name:l,...r?{params:r}:{},mark:dNe({...g.type==="area"&&g.opacity===void 0&&g.fillOpacity===void 0?{opacity:.7}:{},...g}),encoding:yr(c,["shape"])}],k=Pte(Fte(g,c,a),c);let w=c;if(k){const{fieldChannel:E,offset:T}=k;w={...c,[E]:{...c[E],...T?{stack:T}:{}}}}return w=yr(w,["y2","x2"]),b&&x.push({...o?{projection:o}:{},mark:{type:"line",...um(g,["clip","interpolate","tension","tooltip"]),...b},encoding:w}),v&&x.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...um(g,["clip","tooltip"]),...v},encoding:w}),i({...d,layer:x},{...n,config:fNe(a)})}}function hNe(e,t){return t?E0(e)?Lte(e,t):Nte(e,t):e}function FA(e,t){return t?Lte(e,t):e}function ER(e,t,n){const i=t[e];if(XPe(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};Ee(WRe(i.repeat));return}return t}function Nte(e,t){if(e=ER("field",e,t),e!==void 0){if(e===null)return null;if(GM(e)&&Ou(e.sort)){const n=ER("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function p4(e,t){if(Te(e))return Nte(e,t);{const n=ER("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function g4(e,t){if(rt(e)){const n=p4(e,t);if(n)return n;if(S0(e))return{condition:e.condition}}else{if(T0(e)){const n=p4(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...a}=e;return a}}return e}}function Lte(e,t){const n={};for(const i in e)if($e(e,i)){const a=e[i];if(ye(a))n[i]=a.map(r=>g4(r,t)).filter(r=>r);else{const r=g4(a,t);r!==void 0&&(n[i]=r)}}return n}class pNe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(id(t)){const{encoding:n,mark:i}=t;if(i==="line"||Ol(i)&&i.type==="line")for(const a of uRe){const r=Hh(a),o=n[r];if(n[a]&&(Te(o)&&!Ni(o.bin)||Ul(o)))return!0}}return!1}run(t,n,i){const{encoding:a,mark:r}=t;return Ee(hIe(!!a.x2,!!a.y2)),i({...t,mark:Fe(r)?{...r,type:"rule"}:"rule"},n)}}class gNe extends o3{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[yFe,_Fe,TFe,new cNe,new pNe]}map(t,n){if(id(t)){const i=Qc(t.encoding,Tu),a=Qc(t.encoding,Au),r=Qc(t.encoding,kE);if(i||a||r)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:a}=n,r=FA(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...r?{encoding:r}:{}};if(i||a)return this.mapUnitWithParentEncodingOrProjection(o,n);const s=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,n.config))return l.run(o,n,s);return o}mapRepeat(t,n){return eNe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:a,...r}=t,{row:o,column:s,layer:l}=i,{repeater:u={},repeaterPrefix:d=""}=n;return o||s?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...s?{column:s}:{}},spec:{repeat:{layer:l},spec:a}},n):{...r,layer:l.map(c=>{const g={...u,layer:c},v=`${(a.name?`${a.name}_`:"")+d}child__layer_${bn(c)}`,b=this.mapLayerOrUnit(a,{...n,repeater:g,repeaterPrefix:v});return b.name=v,b})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:a,data:r,...o}=t;!ye(i)&&t.columns&&(t=yr(t,["columns"]),Ee(YB("repeat")));const s=[],{repeater:l={},repeaterPrefix:u=""}=n,d=!ye(i)&&i.row||[l?l.row:null],c=!ye(i)&&i.column||[l?l.column:null],g=ye(i)&&i||[l?l.repeat:null];for(const b of g)for(const x of d)for(const k of c){const w={repeat:b,row:x,column:k,layer:l.layer},E=(a.name?`${a.name}_`:"")+u+"child__"+(ye(i)?`${bn(b)}`:(i.row?`row_${bn(x)}`:"")+(i.column?`column_${bn(k)}`:"")),T=this.map(a,{...n,repeater:w,repeaterPrefix:E});T.name=E,s.push(yr(T,["data"]))}const v=ye(i)?t.columns:i.column?i.column.length:1;return{data:a.data??r,align:"all",...o,columns:v,concat:s}}mapFacet(t,n){const{facet:i}=t;return E0(i)&&t.columns&&(t=yr(t,["columns"]),Ee(YB("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:a}=t,{parentEncoding:r,parentProjection:o,config:s}=n,l=y4({parentProjection:o,projection:a}),u=m4({parentEncoding:r,encoding:FA(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:s})}mapFacetedUnit(t,n){const{row:i,column:a,facet:r,...o}=t.encoding,{mark:s,width:l,projection:u,height:d,view:c,params:g,encoding:v,...b}=t,{facetMapping:x,layout:k}=this.getFacetMappingAndLayout({row:i,column:a,facet:r},n),w=FA(o,n.repeater);return this.mapFacet({...b,...k,facet:x,spec:{...l?{width:l}:{},...d?{height:d}:{},...c?{view:c}:{},...u?{projection:u}:{},mark:s,encoding:w,...g?{params:g}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:a,facet:r}=t;if(i||a){r&&Ee(fIe([...i?[Tu]:[],...a?[Au]:[]]));const o={},s={};for(const l of[Tu,Au]){const u=t[l];if(u){const{align:d,center:c,spacing:g,columns:v,...b}=u;o[l]=b;for(const x of["align","center","spacing"])u[x]!==void 0&&(s[x]??(s[x]={}),s[x][l]=u[x])}}return{facetMapping:o,layout:s}}else{const{align:o,center:s,spacing:l,columns:u,...d}=r;return{facetMapping:hNe(d,n.repeater),layout:{...o?{align:o}:{},...s?{center:s}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...a}){const{encoding:r,projection:o,...s}=t,l={...a,parentEncoding:m4({parentEncoding:n,encoding:r,layer:!0}),parentProjection:y4({parentProjection:i,projection:o})};return super.mapLayer({...s,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function m4({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const a=new Set([...ke(e),...ke(t)]);for(const r of a){const o=t[r],s=e[r];if(rt(o)){const l={...s,...o};i[r]=l}else T0(o)?i[r]={...o,condition:{...s,...o.condition}}:o||o===null?i[r]=o:(n||$s(s)||We(s)||rt(s)||ye(s))&&(i[r]=s)}}else i=t;return!i||Qt(i)?void 0:i}function y4(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ee(eIe({parentProjection:t,projection:n})),n??t}function s3(e){return $e(e,"filter")}function mNe(e){return $e(e,"stop")}function Mte(e){return $e(e,"lookup")}function yNe(e){return $e(e,"data")}function vNe(e){return $e(e,"param")}function bNe(e){return $e(e,"pivot")}function _Ne(e){return $e(e,"density")}function xNe(e){return $e(e,"quantile")}function wNe(e){return $e(e,"regression")}function kNe(e){return $e(e,"loess")}function $Ne(e){return $e(e,"sample")}function ENe(e){return $e(e,"window")}function SNe(e){return $e(e,"joinaggregate")}function TNe(e){return $e(e,"flatten")}function ANe(e){return $e(e,"calculate")}function zte(e){return $e(e,"bin")}function ONe(e){return $e(e,"impute")}function DNe(e){return $e(e,"timeUnit")}function CNe(e){return $e(e,"aggregate")}function RNe(e){return $e(e,"stack")}function INe(e){return $e(e,"fold")}function PNe(e){return $e(e,"extent")&&!$e(e,"density")&&!$e(e,"regression")}function FNe(e){return e.map(t=>s3(t)?{filter:kg(t.filter,oPe)}:t)}class NNe extends o3{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=v4(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=v4(t,n),t.encoding){const i={};for(const[a,r]of Ef(t.encoding))i[a]=qte(r,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...a}=t;return i?{...a,params:Ef(i).map(([r,o])=>{const{init:s,bind:l,empty:u,...d}=o;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[r]=u!=="none";for(const c of Gi(n.selectionPredicates[r]??{}))c.empty=u!=="none";return{name:r,value:s,select:d,bind:l}})}:t}}function v4(e,t){const{transform:n,...i}=e;if(n){const a=n.map(r=>{if(s3(r))return{filter:SR(r,t)};if(zte(r)&&Yh(r.bin))return{...r,bin:jte(r.bin)};if(Mte(r)){const{selection:o,...s}=r.from;return o?{...r,from:{param:o,...s}}:r}return r});return{...i,transform:a}}return e}function qte(e,t){var i,a;const n=nt(e);if(Te(n)&&Yh(n.bin)&&(n.bin=jte(n.bin)),Kh(n)&&((a=(i=n.scale)==null?void 0:i.domain)!=null&&a.selection)){const{selection:r,...o}=n.scale.domain;n.scale.domain={...o,...r?{param:r}:{}}}if(S0(n))if(ye(n.condition))n.condition=n.condition.map(r=>{const{selection:o,param:s,test:l,...u}=r;return s?r:{...u,test:SR(r,t)}});else{const{selection:r,param:o,test:s,...l}=qte(n.condition,t);n.condition=o?n.condition:{...l,test:SR(n.condition,t)}}return n}function jte(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function SR(e,t){const n=i=>kg(i,a=>{var r;const o=t.emptySelections[a]??!0,s={param:a,empty:o};return(r=t.selectionPredicates)[a]??(r[a]=[]),t.selectionPredicates[a].push(s),s});return e.selection?n(e.selection):kg(e.test||e.filter,i=>i.selection?n(i.selection):i)}class TR extends o3{map(t,n){const i=n.selections??[];if(t.params&&!id(t)){const a=[];for(const r of t.params)i3(r)?i.push(r):a.push(r);t.params=a}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const a=(n.path??[]).concat(t.name),r=[];for(const o of i)if(!o.views||!o.views.length)r.push(o);else for(const s of o.views)(Ne(s)&&(s===t.name||a.includes(s))||ye(s)&&s.map(l=>a.indexOf(l)).every((l,u,d)=>l!==-1&&(u===0||l>d[u-1])))&&r.push(o);return r.length&&(t.params=r),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=TR.prototype[e];TR.prototype[e]=function(n,i){return t.call(this,n,LNe(n,i))}}function LNe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Ute(e,t){t===void 0&&(t=Ite(e.config));const n=jNe(e,t),{width:i,height:a}=e,r=UNe(n,{width:i,height:a,autosize:e.autosize},t);return{...n,...r?{autosize:r}:{}}}const MNe=new gNe,zNe=new NNe,qNe=new TR;function jNe(e,t={}){const n={config:t};return qNe.map(MNe.map(zNe.map(e,n),n),n)}function b4(e){return Ne(e)?{type:e}:e??{}}function UNe(e,t,n){let{width:i,height:a}=t;const r=id(e)||GE(e),o={};r?i=="container"&&a=="container"?(o.type="fit",o.contains="padding"):i=="container"?(o.type="fit-x",o.contains="padding"):a=="container"&&(o.type="fit-y",o.contains="padding"):(i=="container"&&(Ee(VB("width")),i=void 0),a=="container"&&(Ee(VB("height")),a=void 0));const s={type:"pad",...o,...n?b4(n.autosize):{},...b4(e.autosize)};if(s.type==="fit"&&!r&&(Ee(PRe),s.type="pad"),i=="container"&&!(s.type=="fit"||s.type=="fit-x")&&Ee(WB("width")),a=="container"&&!(s.type=="fit"||s.type=="fit-y")&&Ee(WB("height")),!Mr(s,{type:"pad"}))return s}function BNe(e){return["fit","fit-x","fit-y"].includes(e)}function VNe(e){return e?`fit-${AE(e)}`:"fit"}const WNe=["background","padding"];function _4(e,t){const n={};for(const i of WNe)e&&e[i]!==void 0&&(n[i]=Fr(e[i]));return t&&(n.params=e.params),n}class ad{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ad(nt(this.explicit),nt(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Gn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ke(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function el(e){return{explicit:!0,value:e}}function Dr(e){return{explicit:!1,value:e}}function Bte(e){return(t,n,i,a)=>{const r=e(t.value,n.value);return r>0?t:r<0?n:HE(t,n,i,a)}}function HE(e,t,n,i){return e.explicit&&t.explicit&&Ee(kIe(n,i,e.value,t.value)),e}function Af(e,t,n,i,a=HE){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Mr(e.value,t.value)?e:a(e,t,n,i)}class GNe extends ad{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function vm(e){return $e(e,"url")}function E_(e){return $e(e,"values")}function Vte(e){return $e(e,"name")&&!vm(e)&&!E_(e)&&!ff(e)}function ff(e){return e&&(Wte(e)||Gte(e)||l3(e))}function Wte(e){return $e(e,"sequence")}function Gte(e){return $e(e,"sphere")}function l3(e){return $e(e,"graticule")}var An;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(An||(An={}));function Hte({invalid:e,isPath:t}){switch(Uee(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function HNe(e){const{marks:t,scales:n}=Hte(e);return t===n?An.Main:n==="include-invalid-values"?An.PreFilterInvalid:An.PostFilterInvalid}class Zt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ee(JRe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const a of this._children)a.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class vr extends Zt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,a){super(t,n),this.type=i,this.refCounts=a,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${BQ()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function NA(e){return e.as!==void 0}function x4(e){return`${e}_end`}class vl extends Zt{clone(){return new vl(null,nt(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((a,r,o)=>{const{field:s,timeUnit:l}=r;if(l){let u;if(Jh(l)){if(En(n)){const{mark:d,markDef:c,config:g}=n,v=Tf({fieldDef:r,markDef:c,config:g});($_(d)||v)&&(u={timeUnit:Si(l),field:s})}}else u={as:Ie(r,{forAs:!0}),field:s,timeUnit:l};if(En(n)){const{mark:d,markDef:c,config:g}=n,v=Tf({fieldDef:r,markDef:c,config:g});$_(d)&&Hn(o)&&v!==.5&&(u.rectBandPosition=v)}u&&(a[St(u)]=u)}return a},{});return Qt(i)?null:new vl(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...a}={...n},r=Si(i),o={...a,timeUnit:r};return new vl(t,{[St(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,a]of Ef(this.timeUnits)){const r=NA(a)?a.as:`${a.field}_end`;t.has(r)||(n[i]=a)}this.timeUnits=n}producedFields(){return new Set(Gi(this.timeUnits).map(t=>NA(t)?t.as:x4(t.field)))}dependentFields(){return new Set(Gi(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${St(this.timeUnits)}`}assemble(){const t=[];for(const n of Gi(this.timeUnits)){const{rectBandPosition:i}=n,a=Si(n.timeUnit);if(NA(n)){const{field:r,as:o}=n,{unit:s,utc:l,...u}=a,d=[o,`${o}_end`];t.push({field:No(r),type:"timeunit",...s?{units:RE(s)}:{},...l?{timezone:"utc"}:{},...u,as:d}),t.push(...w4(d,i,a))}else if(n){const{field:r}=n,o=r.replaceAll("\\.","."),s=Yte({timeUnit:a,field:o}),l=x4(o);t.push({type:"formula",expr:s,as:l}),t.push(...w4([o,l],i,a))}}return t}}const YE="offsetted_rect_start",XE="offsetted_rect_end";function Yte({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:a}=e,r=$ee(i),{part:o,step:s}=Aee(r,e.step);return`${a?"utcOffset":"timeOffset"}('${o}', ${Gt(t)}, ${n?-s:s})`}function w4([e,t],n,i){if(n!==void 0&&n!==.5){const a=Gt(e),r=Gt(t);return[{type:"formula",expr:k4([Yte({timeUnit:i,field:e,reverse:!0}),a],n+.5),as:`${e}_${YE}`},{type:"formula",expr:k4([a,r],n+.5),as:`${e}_${XE}`}]}return[]}function k4([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const D0="_tuple_fields";class YNe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const XNe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,a=t.project??(t.project=new YNe),r={},o={},s=new Set,l=(b,x)=>{const k=x==="visual"?b.channel:b.field;let w=bn(`${i}_${k}`);for(let E=1;s.has(w);E++)w=bn(`${i}_${k}_${E}`);return s.add(w),{[x]:w}},u=t.type,d=e.config.selection[u],c=n.value!==void 0?Le(n.value):null;let{fields:g,encodings:v}=Fe(n.select)?n.select:{};if(!g&&!v&&c){for(const b of c)if(Fe(b))for(const x of ke(b))lRe(x)?(v||(v=[])).push(x):u==="interval"?(Ee(VRe),v=d.encodings):(g??(g=[])).push(x)}!g&&!v&&(v=d.encodings,"fields"in d&&(g=d.fields));for(const b of v??[]){const x=e.fieldDef(b);if(x){let k=x.field;if(x.aggregate){Ee(FRe(b,x.aggregate));continue}else if(!k){Ee(HB(b));continue}if(x.timeUnit&&!Jh(x.timeUnit)){k=e.vgField(b);const w={timeUnit:x.timeUnit,as:k,field:x.field};o[St(w)]=w}if(!r[k]){const w=u==="interval"&&jl(b)&&ks(e.getScaleComponent(b).get("type"))?"R":x.bin?"R-RE":"E",E={field:k,channel:b,type:w,index:a.items.length};E.signals={...l(E,"data"),...l(E,"visual")},a.items.push(r[k]=E),a.hasField[k]=r[k],a.hasSelectionId=a.hasSelectionId||k===Ss,XQ(b)?(E.geoChannel=b,E.channel=YQ(b),a.hasChannel[E.channel]=r[k]):a.hasChannel[b]=r[k]}}else Ee(HB(b))}for(const b of g??[]){if(a.hasField[b])continue;const x={type:"E",field:b,index:a.items.length};x.signals={...l(x,"data")},a.items.push(x),a.hasField[b]=x,a.hasSelectionId=a.hasSelectionId||b===Ss}c&&(t.init=c.map(b=>a.items.map(x=>Fe(b)?b[x.geoChannel||x.channel]!==void 0?b[x.geoChannel||x.channel]:b[x.field]:b))),Qt(o)||(a.timeUnit=new vl(null,o))},signals:(e,t,n)=>{const i=t.name+D0;return n.filter(r=>r.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(Kte)})}},Xte="_curr",cw="anim_value",Vp="anim_clock",AR="eased_anim_clock",Zte="min_extent",Jte="max_range_extent",LA="last_tick_at",MA="is_playing",ZNe=1/60*1e3,JNe=(e,t)=>[{name:AR,update:Vp},{name:`${e}_domain`,init:`domain('${t}')`},{name:Zte,init:`extent(${e}_domain)[0]`},{name:Jte,init:`extent(range('${t}'))[1]`},{name:cw,update:`invert('${t}', ${AR})`}],KNe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(bl(t)&&(n=n.concat([{name:Vp,init:"0",on:[{events:{type:"timer",throttle:ZNe},update:`${MA} ? (${Vp} + (now() - ${LA}) > ${Jte} ? 0 : ${Vp} + (now() - ${LA})) : ${Vp}`}]},{name:LA,init:"now()",on:[{events:[{signal:Vp},{signal:MA}],update:"now()"}]},{name:MA,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,a=i+D0,r=t.project,o="(item().isVoronoi ? datum.datum : datum)",s=Gi(e.component.selection??{}).reduce((d,c)=>c.type==="interval"?d.concat(c.name+Sg):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`;let u=`unit: ${eh(e)}, `;if(t.project.hasSelectionId)u+=`${Ss}: ${o}[${Oe(Ss)}]`;else if(bl(t))u+=`fields: ${a}, values: [${cw} ? ${cw} : ${Zte}]`;else{const d=r.items.map(c=>{const g=e.fieldDef(c.channel);return g!=null&&g.bin?`[${o}[${Oe(e.vgField(c.channel,{}))}], ${o}[${Oe(e.vgField(c.channel,{binSuffix:"end"}))}]]`:`${o}[${Oe(c.field)}]`}).join(", ");u+=`fields: ${a}, values: [${d}]`}if(bl(t))return n.concat(JNe(t.name,e.scaleName(Uf)),[{name:i+Gu,on:[{events:[{signal:AR},{signal:cw}],update:`{${u}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+Gu,on:d?[{events:d,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function Kte(e){const{signals:t,hasLegend:n,index:i,...a}=e;return a.field=No(a.field),a}function Ah(e,t=!0,n=ba){if(ye(e)){const i=e.map(a=>Ah(a,t,n));return t?`[${i.join(", ")}]`:i}else if(Zh(e))return n(t?$h(e):YIe(e));return t?n(en(e)):e}function QNe(e,t){for(const n of Gi(e.component.selection??{})){const i=n.name;let a=`${i}${Gu}, ${n.resolve==="global"?"true":`{unit: ${eh(e)}}`}`;for(const r of JE)r.defined(n)&&(r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(a=r.modifyExpr(e,n,a)));t.push({name:i+SLe,on:[{events:{signal:n.name+Gu},update:`modify(${Oe(n.name+Oh)}, ${a})`}]})}return u3(t)}function eLe(e,t){if(e.component.selection&&ke(e.component.selection).length){const n=Oe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:qf("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return u3(t)}function tLe(e,t){let n=!1;for(const i of Gi(e.component.selection??{})){const a=i.name,r=Oe(a+Oh);if(t.filter(s=>s.name===a).length===0){const s=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${gne}(${r}, ${Oe(s)}${l}`})}n=!0;for(const s of JE)s.defined(i)&&s.topLevelSignals&&(t=s.topLevelSignals(e,i,t))}return n&&t.filter(a=>a.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),u3(t)}function nLe(e,t){const n=[],i=[],a=eh(e,{escape:!1});for(const r of Gi(e.component.selection??{})){const o={name:r.name+Oh};if(r.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Ss}}]),r.init){const l=r.project.items.map(Kte);o.values=r.project.hasSelectionId?r.init.map(u=>({unit:a,[Ss]:Ah(u,!1)[0]})):r.init.map(u=>({unit:a,fields:l,values:Ah(u,!1)}))}if([...n,...t].filter(l=>l.name===r.name+Oh).length||n.push(o),bl(r)&&t.length){const l=e.lookupDataSource(e.getDataName(An.Main)),u=t.find(c=>c.name===l),d=u.transform.find(c=>c.type==="filter"&&c.expr.includes("vlSelectionTest"));if(d){u.transform=u.transform.filter(g=>g!==d);const c={name:u.name+Xte,source:u.name,transform:[d]};i.push(c)}}}return n.concat(t,i)}function Qte(e,t){for(const n of Gi(e.component.selection??{}))for(const i of JE)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function iLe(e,t){for(const n of e.children)En(n)&&(t=Qte(n,t));return t}function aLe(e,t,n,i){const a=Sne(e,t.param,t);return{signal:ks(n.get("type"))&&ye(i)&&i[0]>i[1]?`isValid(${a}) && reverse(${a})`:a}}function u3(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Du={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const a=i.channel;if(!jl(a))continue;const r=e.getScaleComponent(a),o=r?r.get("type"):void 0;if(o=="sequential"&&Ee(zRe),!r||!ks(o)){Ee(MRe);continue}r.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(o=>n.filter(s=>s.name===o.signals.data).length===0);if(!e.parent||DR(e)||i.length===0)return n;const a=n.find(o=>o.name===t.name);let r=a.update;if(r.includes(gne))a.update=`{${i.map(o=>`${Oe(No(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of i){const s=`${Oe(No(o.field))}: ${o.signals.data}`;r.includes(s)||(r=`${r.substring(0,r.length-1)}, ${s}}`)}a.update=r}return n.concat(i.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!DR(e))for(const i of t.scales){const a=n.find(r=>r.name===i.signals.data);a.push="outer",delete a.value,delete a.update}return n}};function OR(e,t){return`domain(${Oe(e.scaleName(t))})`}function DR(e){return e.parent&&ny(e.parent)&&(!e.parent.parent||DR(e.parent.parent))}const Sg="_brush",ene="_scale_trigger",dv="geo_interval_init_tick",tne="_init",rLe="_center",oLe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const a={...Fe(n.select)?n.select:{}};a.fields=[Ss],a.encodings||(a.encodings=n.value?ke(n.value):[Ps,Is]),n.select={type:"interval",...a}}if(t.translate&&!Du.defined(t)){const a=`!event.item || event.item.mark.name !== ${Oe(t.name+Sg)}`;for(const r of t.events){if(!r.between){Ee(`${r} is not an ordered event stream for interval selections.`);continue}const o=Le((i=r.between[0]).filter??(i.filter=[]));o.includes(a)||o.push(a)}}},signals:(e,t,n)=>{const i=t.name,a=i+Gu,r=Gi(t.project.hasChannel).filter(s=>s.channel===_n||s.channel===Oi),o=t.init?t.init[0]:null;if(n.push(...r.reduce((s,l)=>s.concat(sLe(e,t,l,o&&o[l.index])),[])),e.hasProjection){const s=Oe(e.projectionName()),l=e.projectionName()+rLe,{x:u,y:d}=t.project.hasChannel,c=u&&u.signals.visual,g=d&&d.signals.visual,v=u?o&&o[u.index]:`${l}[0]`,b=d?o&&o[d.index]:`${l}[1]`,x=D=>e.getSizeSignalRef(D).signal,k=`[[${c?c+"[0]":"0"}, ${g?g+"[0]":"0"}],[${c?c+"[1]":x("width")}, ${g?g+"[1]":x("height")}]]`;o&&(n.unshift({name:i+tne,init:`[scale(${s}, [${u?v[0]:v}, ${d?b[0]:b}]), scale(${s}, [${u?v[1]:v}, ${d?b[1]:b}])]`}),(!u||!d)&&(n.find(P=>P.name===l)||n.unshift({name:l,update:`invert(${s}, [${x("width")}/2, ${x("height")}/2])`})));const w=`intersect(${k}, {markname: ${Oe(e.getName("marks"))}}, unit.mark)`,E=`{unit: ${eh(e)}}`,T=`vlSelectionTuples(${w}, ${E})`,O=r.map(D=>D.signals.visual);return n.concat({name:a,on:[{events:[...O.length?[{signal:O.join(" || ")}]:[],...o?[{signal:dv}]:[]],update:T}]})}else{if(!Du.defined(t)){const u=i+ene,d=r.map(c=>{const g=c.channel,{data:v,visual:b}=c.signals,x=Oe(e.scaleName(g)),k=e.getScaleComponent(g).get("type"),w=ks(k)?"+":"";return`(!isArray(${v}) || (${w}invert(${x}, ${b})[0] === ${w}${v}[0] && ${w}invert(${x}, ${b})[1] === ${w}${v}[1]))`});d.length&&n.push({name:u,value:{},on:[{events:r.map(c=>({scale:e.scaleName(c.channel)})),update:d.join(" && ")+` ? ${u} : {}`}]})}const s=r.map(u=>u.signals.data),l=`unit: ${eh(e)}, fields: ${i+D0}, values`;return n.concat({name:a,...o?{init:`{${l}: ${Ah(o)}}`}:{},...s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(En(e)&&e.hasProjection&&t.init&&(n.filter(a=>a.name===dv).length||n.unshift({name:dv,value:null,on:[{events:"timer{1}",update:`${dv} === null ? {} : ${dv}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:a,y:r}=t.project.hasChannel,o=a==null?void 0:a.signals.visual,s=r==null?void 0:r.signals.visual,l=`data(${Oe(t.name+Oh)})`;if(Du.defined(t)||!a&&!r)return n;const u={x:a!==void 0?{signal:`${o}[0]`}:{value:0},y:r!==void 0?{signal:`${s}[0]`}:{value:0},x2:a!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const k of ke(u))u[k]=[{test:`${l}.length && ${l}[0].unit === ${eh(e)}`,...u[k]},{value:0}];const{fill:d,fillOpacity:c,cursor:g,...v}=t.mark,b=ke(v).reduce((k,w)=>(k[w]=[{test:[a!==void 0&&`${o}[0] !== ${o}[1]`,r!==void 0&&`${s}[0] !== ${s}[1]`].filter(E=>E).join(" && "),value:v[w]},{value:null}],k),{}),x=g??(t.translate?"move":null);return[{name:`${i+Sg}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:c}},update:u}},...n,{name:i+Sg,type:"rect",clip:!0,encode:{enter:{...x?{cursor:{value:x}}:{},fill:{value:"transparent"}},update:{...u,...b}}}]}};function sLe(e,t,n,i){const a=!e.hasProjection,r=n.channel,o=n.signals.visual,s=Oe(a?e.scaleName(r):e.projectionName()),l=g=>`scale(${s}, ${g})`,u=e.getSizeSignalRef(r===_n?"width":"height").signal,d=`${r}(unit)`,c=t.events.reduce((g,v)=>[...g,{events:v.between[0],update:`[${d}, ${d}]`},{events:v,update:`[${o}[0], clamp(${d}, 0, ${u})]`}],[]);if(a){const g=n.signals.data,v=Du.defined(t),b=e.getScaleComponent(r),x=b?b.get("type"):void 0,k=i?{init:Ah(i,!0,l)}:{value:[]};return c.push({events:{signal:t.name+ene},update:ks(x)?`[${l(`${g}[0]`)}, ${l(`${g}[1]`)}]`:"[0, 0]"}),v?[{name:g,on:[]}]:[{name:o,...k,on:c},{name:g,...i?{init:Ah(i)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${s}, ${o})`}]}]}else{const g=r===_n?0:1,v=t.name+tne,b=i?{init:`[${v}[0][${g}], ${v}[1][${g}]]`}:{value:[]};return[{name:o,...b,on:c}]}}function Km({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:a}){const r=S0(t)&&t.condition;let o=[];r&&(o=Le(r).map(u=>{const d=a(u);if(YPe(u)){const{param:c,empty:g}=u;return{test:Ene(e,{param:c,empty:g}),...d}}else return{test:O$(e,u.test),...d}})),i!==void 0&&o.push(i);const s=a(t);return s!==void 0&&o.push(s),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function d3(e,t="text"){const n=e.encoding[t];return Km({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>ZE(i,e.config),invalidValueRef:void 0})}function ZE(e,t,n="datum"){if(e){if($s(e))return cn(e.value);if(rt(e)){const{format:i,formatType:a}=w$(e);return VM({fieldOrDatumDef:e,format:i,formatType:a,expr:n,config:t})}}}function nne(e,t={}){const{encoding:n,markDef:i,config:a,stack:r}=e,o=n.tooltip;if(ye(o))return{tooltip:$4({tooltip:o},r,a,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Km({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:u=>{const d=ZE(u,a,s);if(d)return d;if(u===null)return;let c=Kt("tooltip",i,a);if(c===!0&&(c={content:"encoding"}),Ne(c))return{value:c};if(Fe(c))return We(c)?c:c.content==="encoding"?$4(n,r,a,t):{signal:s}},invalidValueRef:void 0})}}function ine(e,t,n,{reactiveGeom:i}={}){const a={...n,...n.tooltipFormat},r=new Set,o=i?"datum.datum":"datum",s=[];function l(d,c){const g=Hh(c),v=Ga(d)?d:{...d,type:e[g].type},b=v.title||YM(v,a),x=Le(b).join(", ").replaceAll(/"/g,'\\"');let k;if(Hn(c)){const w=c==="x"?"x2":"y2",E=Es(e[w]);if(Ni(v.bin)&&E){const T=Ie(v,{expr:o}),O=Ie(E,{expr:o}),{format:D,formatType:P}=w$(v);k=$0(T,O,D,P,a),r.add(w)}}if((Hn(c)||c===qo||c===Rs)&&t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:w,formatType:E}=w$(v);k=VM({fieldOrDatumDef:v,format:w,formatType:E,expr:o,config:a,normalizeStack:!0}).signal}k??(k=ZE(v,a,o).signal),s.push({channel:c,key:x,value:k})}ZM(e,(d,c)=>{Te(d)?l(d,c):qE(d)&&l(d.condition,c)});const u={};for(const{channel:d,key:c,value:g}of s)!r.has(d)&&!u[c]&&(u[c]=g);return u}function $4(e,t,n,{reactiveGeom:i}={}){const a=ine(e,t,n,{reactiveGeom:i}),r=Ef(a).map(([o,s])=>`"${o}": ${s}`);return r.length>0?{signal:`{${r.join(", ")}}`}:void 0}function lLe(e){const{markDef:t,config:n}=e,i=Kt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...uLe(e),...dLe(e)}}function uLe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const a=Kt("ariaRoleDescription",n,i);return a!=null?{ariaRoleDescription:{value:a}}:Me(CRe,t)?{}:{ariaRoleDescription:{value:t}}}function dLe(e){const{encoding:t,markDef:n,config:i,stack:a}=e,r=t.description;if(r)return Km({model:e,channelDef:r,vgChannel:"description",mainRefFn:l=>ZE(l,e.config),invalidValueRef:void 0});const o=Kt("description",n,i);if(o!=null)return{description:cn(o)};if(i.aria===!1)return{};const s=ine(t,a,i);if(!Qt(s))return{description:{signal:Ef(s).map(([l,u],d)=>`"${d>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function ji(e,t,n={}){const{markDef:i,encoding:a,config:r}=t,{vgChannel:o}=n;let{defaultRef:s,defaultValue:l}=n;const u=a[e];s===void 0&&(l??(l=Kt(e,i,r,{vgChannel:o,ignoreVgConfig:!S0(u)})),l!==void 0&&(s=cn(l)));const d={markDef:i,config:r,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},c=Vee({...d,scaleChannel:e,channelDef:u});return Km({model:t,channelDef:u,vgChannel:o??e,invalidValueRef:c,mainRefFn:v=>BM({...d,channel:e,channelDef:v,stack:null,defaultRef:s})})}function ane(e,t={filled:void 0}){const{markDef:n,encoding:i,config:a}=e,{type:r}=n,o=t.filled??Kt("filled",n,a),s=xt(["bar","point","circle","square","geoshape"],r)?"transparent":void 0,l=Kt(o===!0?"color":void 0,n,a,{vgChannel:"fill"})??a.mark[o===!0&&"color"]??s,u=Kt(o===!1?"color":void 0,n,a,{vgChannel:"stroke"})??a.mark[o===!1&&"color"],d=o?"fill":"stroke",c={...l?{fill:cn(l)}:{},...u?{stroke:cn(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ee(gee("property",{fill:"fill"in n,stroke:"stroke"in n})),{...c,...ji("color",e,{vgChannel:d,defaultValue:o?l:u}),...ji("fill",e,{defaultValue:i.fill?l:void 0}),...ji("stroke",e,{defaultValue:i.stroke?u:void 0})}}function fLe(e){const{encoding:t,mark:n}=e,i=t.order;return!Yf(n)&&$s(i)?Km({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:a=>cn(a.value),invalidValueRef:void 0}):{}}function bm({channel:e,markDef:t,encoding:n={},model:i,bandPosition:a}){const r=`${e}Offset`,o=t[r],s=n[r];if((r==="xOffset"||r==="yOffset")&&s)return{offsetType:"encoding",offset:BM({channel:r,channelDef:s,markDef:t,config:i==null?void 0:i.config,scaleName:i.scaleName(r),scale:i.getScaleComponent(r),stack:null,defaultRef:cn(o),bandPosition:a})};const l=t[r];return l?{offsetType:"visual",offset:l}:{}}function qa(e,t,{defaultPos:n,vgChannel:i}){const{encoding:a,markDef:r,config:o,stack:s}=t,l=a[e],u=a[ql(e)],d=t.scaleName(e),c=t.getScaleComponent(e),{offset:g,offsetType:v}=bm({channel:e,markDef:r,encoding:a,model:t,bandPosition:.5}),b=f3({model:t,defaultPos:n,channel:e,scaleName:d,scale:c}),x=!l&&Hn(e)&&(a.latitude||a.longitude)?{field:t.getName(e)}:cLe({channel:e,channelDef:l,channel2Def:u,markDef:r,config:o,scaleName:d,scale:c,stack:s,offset:g,defaultRef:b,bandPosition:v==="encoding"?0:void 0});return x?{[i||e]:x}:void 0}function cLe(e){const{channel:t,channelDef:n,scaleName:i,stack:a,offset:r,markDef:o}=e;if(rt(n)&&a&&t===a.fieldChannel){if(Te(n)){let s=n.bandPosition;if(s===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return b$({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:r})}return Kc(n,i,{suffix:"end"},{offset:r})}return UM(e)}function f3({model:e,defaultPos:t,channel:n,scaleName:i,scale:a}){const{markDef:r,config:o}=e;return()=>{const s=Hh(n),l=Sf(n),u=Kt(n,r,o,{vgChannel:l});if(u!==void 0)return kb(n,u);switch(t){case"zeroOrMin":return E4({scaleName:i,scale:a,mode:"zeroOrMin",mainChannel:s,config:o});case"zeroOrMax":return E4({scaleName:i,scale:a,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:s,config:o});case"mid":return{...e[$r(n)],mult:.5}}}}function E4({mainChannel:e,config:t,...n}){const i=Bee(n),{mode:a}=n;if(i)return i;switch(e){case"radius":{if(a==="zeroOrMin")return{value:0};const{widthSignal:r,heightSignal:o}=a.zeroOrMax;return{signal:`min(${r},${o})/2`}}case"theta":return a==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return a==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return a==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const hLe={left:"x",center:"xc",right:"x2"},pLe={top:"y",middle:"yc",bottom:"y2"};function rne(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Sf(e);const a=e==="x"?"align":"baseline",r=Kt(a,t,n);let o;return We(r)?(Ee(cIe(a)),o=void 0):o=r,e==="x"?hLe[o||(i==="top"?"left":"center")]:pLe[o||i]}function S$(e,t,{defaultPos:n,defaultPos2:i,range:a}){return a?one(e,t,{defaultPos:n,defaultPos2:i}):qa(e,t,{defaultPos:n})}function one(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:a,config:r}=t,o=ql(e),s=$r(e),l=gLe(t,i,o),u=l[s]?rne(e,a,r):Sf(e);return{...qa(e,t,{defaultPos:n,vgChannel:u}),...l}}function gLe(e,t,n){const{encoding:i,mark:a,markDef:r,stack:o,config:s}=e,l=Hh(n),u=$r(n),d=Sf(n),c=i[l],g=e.scaleName(l),v=e.getScaleComponent(l),{offset:b}=n in i||n in r?bm({channel:n,markDef:r,encoding:i,model:e}):bm({channel:l,markDef:r,encoding:i,model:e});if(!c&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const k=$r(n),w=e.markDef[k];return w!=null?{[k]:{value:w}}:{[d]:{field:e.getName(n)}}}const x=mLe({channel:n,channelDef:c,channel2Def:i[n],markDef:r,config:s,scaleName:g,scale:v,stack:o,offset:b,defaultRef:void 0});return x!==void 0?{[d]:x}:s1(n,r)||s1(n,{[n]:yR(n,r,s.style),[u]:yR(u,r,s.style)})||s1(n,s[a])||s1(n,s.mark)||{[d]:f3({model:e,defaultPos:t,channel:n,scaleName:g,scale:v})()}}function mLe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:a,scaleName:r,scale:o,stack:s,offset:l,defaultRef:u}){return rt(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?Kc(t,r,{suffix:"start"},{offset:l}):UM({channel:e,channelDef:n,scaleName:r,scale:o,stack:s,markDef:i,config:a,offset:l,defaultRef:u})}function s1(e,t){const n=$r(e),i=Sf(e);if(t[i]!==void 0)return{[i]:kb(e,t[i])};if(t[e]!==void 0)return{[i]:kb(e,t[e])};if(t[n]){const a=t[n];if(Sh(a))Ee(oIe(n));else return{[n]:kb(e,a)}}}function Wu(e,t){const{config:n,encoding:i,markDef:a}=e,r=a.type,o=ql(t),s=$r(t),l=i[t],u=i[o],d=e.getScaleComponent(t),c=d?d.get("type"):void 0,g=a.orient,v=i[s]??i.size??Kt("size",a,n,{vgChannel:s}),b=QQ(t),x=r==="bar"&&(t==="x"?g==="vertical":g==="horizontal")||r==="tick"&&(t==="y"?g==="vertical":g==="horizontal");return Te(l)&&(ln(l.bin)||Ni(l.bin)||l.timeUnit&&!u)&&!(v&&!Sh(v))&&!i[b]&&!Ti(c)?bLe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(rt(l)&&Ti(c)||x)&&!u?vLe(l,t,e):one(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function yLe(e,t,n,i,a,r,o){if(Sh(a))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;a.band!==1&&(u=`${a.band} * ${u}`);const d=Al("minBandSize",{type:o},i);return{signal:d?`max(${fs(d)}, ${u})`:u}}else a.band!==1&&(Ee(mIe(l)),a=void 0)}else return{mult:a.band,field:{group:e}};else{if(We(a))return a;if(a)return{value:a}}if(n){const l=n.get("range");if(Xh(l)&&Lt(l.step))return{value:l.step-2}}if(!r){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:d,tickBandPaddingInner:c}=i.scale,g=Gn(l,o==="tick"?c:o==="bar"?u:d);if(We(g))return{signal:`(1 - (${g.signal})) * ${e}`};if(Lt(g))return{signal:`${1-g} * ${e}`}}return{value:$R(i.view,e)-2}}function vLe(e,t,n){var q,H;const{markDef:i,encoding:a,config:r,stack:o}=n,s=i.orient,l=n.scaleName(t),u=n.getScaleComponent(t),d=$r(t),c=ql(t),g=QQ(t),v=n.scaleName(g),b=n.getScaleComponent(gM(t)),x=i.type==="tick"||s==="horizontal"&&t==="y"||s==="vertical"&&t==="x";let k;(a.size||i.size)&&(x?k=ji("size",n,{vgChannel:d,defaultRef:cn(i.size)}):Ee(_Ie(i.type)));const w=!!k,E=Jee({channel:t,fieldDef:e,markDef:i,config:r,scaleType:(q=u||b)==null?void 0:q.get("type"),useVlSizeChannel:x});k=k||{[d]:yLe(d,v||l,b||u,r,E,!!e,i.type)};const T=((H=u||b)==null?void 0:H.get("type"))==="band"&&Sh(E)&&!w?"top":"middle",O=rne(t,i,r,T),D=O==="xc"||O==="yc",{offset:P,offsetType:R}=bm({channel:t,markDef:i,encoding:a,model:n,bandPosition:D?.5:0}),M=UM({channel:t,channelDef:e,markDef:i,config:r,scaleName:l,scale:u,stack:o,offset:P,defaultRef:f3({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:D?R==="encoding"?0:.5:We(E)?{signal:`(1-${E})/2`}:Sh(E)?(1-E.band)/2:0});if(d)return{[O]:M,...k};{const z=Sf(c),Q=k[d],te=P?{...Q,offset:P}:Q;return{[O]:M,[z]:ye(M)?[M[0],{...M[1],offset:te}]:{...M,offset:te}}}}function S4(e,t,n,i,a,r,o){if(HQ(e))return 0;const s=e==="x"||e==="y2",l=s?-t/2:t/2;if(We(n)||We(a)||We(i)||r){const u=fs(n),d=fs(a),c=fs(i),g=fs(r),b=r?`(${o} < ${g} ? ${s?"":"-"}0.5 * (${g} - (${o})) : ${l})`:l,x=c?`${c} + `:"",k=u?`(${u} ? -1 : 1) * `:"",w=d?`(${d} + ${b})`:b;return{signal:x+k+w}}else return a=a||0,i+(n?-a-l:+a+l)}function bLe({fieldDef:e,fieldDef2:t,channel:n,model:i}){var H;const{config:a,markDef:r,encoding:o}=i,s=i.getScaleComponent(n),l=i.scaleName(n),u=s?s.get("type"):void 0,d=s.get("reverse"),c=Jee({channel:n,fieldDef:e,markDef:r,config:a,scaleType:u}),g=(H=i.component.axes[n])==null?void 0:H[0],v=(g==null?void 0:g.get("translate"))??.5,b=Hn(n)?Kt("binSpacing",r,a)??0:0,x=ql(n),k=Sf(n),w=Sf(x),E=Al("minBandSize",r,a),{offset:T}=bm({channel:n,markDef:r,encoding:o,model:i,bandPosition:0}),{offset:O}=bm({channel:x,markDef:r,encoding:o,model:i,bandPosition:0}),D=UPe({fieldDef:e,scaleName:l}),P=S4(n,b,d,v,T,E,D),R=S4(x,b,d,v,O??T,E,D),M=We(c)?{signal:`(1-${c.signal})/2`}:Sh(c)?(1-c.band)/2:.5,q=Tf({fieldDef:e,fieldDef2:t,markDef:r,config:a});if(ln(e.bin)||e.timeUnit){const z=e.timeUnit&&q!==.5;return{[w]:T4({fieldDef:e,scaleName:l,bandPosition:M,offset:R,useRectOffsetField:z}),[k]:T4({fieldDef:e,scaleName:l,bandPosition:We(M)?{signal:`1-${M.signal}`}:1-M,offset:P,useRectOffsetField:z})}}else if(Ni(e.bin)){const z=Kc(e,l,{},{offset:R});if(Te(t))return{[w]:z,[k]:Kc(t,l,{},{offset:P})};if(Yh(e.bin)&&e.bin.step)return{[w]:z,[k]:{signal:`scale("${l}", ${Ie(e,{expr:"datum"})} + ${e.bin.step})`,offset:P}}}Ee(vee(x))}function T4({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:a}){return b$({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...a?{startSuffix:YE,endSuffix:XE}:{}})}const _Le=new Set(["aria","width","height"]);function jo(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?ane(e):{};return{...xLe(e.markDef,t),...A4("fill",n),...A4("stroke",i),...ji("opacity",e),...ji("fillOpacity",e),...ji("strokeOpacity",e),...ji("strokeWidth",e),...ji("strokeDash",e),...fLe(e),...nne(e),...d3(e,"href"),...lLe(e)}}function A4(e,t){return t?{[e]:t}:{}}function xLe(e,t){return DRe.reduce((n,i)=>(!_Le.has(i)&&$e(e,i)&&t[i]!=="ignore"&&(n[i]=cn(e[i])),n),{})}function c3(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((a,r)=>{var u;let o;if(!jl(r)||!(o=e.getScaleType(r)))return;const s=OE(a.aggregate),l=jM({scaleChannel:r,markDef:n,config:t,scaleType:o,isCountAggregate:s});if(zPe(l)){const d=e.vgField(r,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});d&&i.add(d)}}),i.size>0)return{defined:{signal:[...i].map(r=>IE(r,!0)).join(" && ")}}}function O4(e,t){if(t!==void 0)return{[e]:cn(t)}}const zA="voronoi",sne={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(zA)},marks:(e,t,n)=>{const{x:i,y:a}=t.project.hasChannel,r=e.mark;if(Yf(r))return Ee(NRe(r)),n;const o={name:e.getName(zA),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...nne(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!a?"datum.datum.x || 0":"0"},y:{expr:a||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,l=!1;return n.forEach((u,d)=>{const c=u.name??"";c===e.component.mark[0].name?s=d:c.includes(zA)&&(l=!0)}),l||n.splice(s+1,0,o),n}},lne={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!n3(e.bind),parse:(e,t,n)=>mne(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,a=t.project,r=t.bind,o=t.init&&t.init[0],s=sne.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return a.items.forEach((l,u)=>{const d=bn(`${i}_${l.field}`);n.filter(g=>g.name===d).length||n.unshift({name:d,...o?{init:Ah(o[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${Oe(l.field)}] : null`}]:[],bind:r[l.field]??r[l.channel]??r})}),n},signals:(e,t,n)=>{const i=t.name,a=t.project,r=n.find(u=>u.name===i+Gu),o=i+D0,s=a.items.map(u=>bn(`${i}_${u.field}`)),l=s.map(u=>`${u} !== null`).join(" && ");return s.length&&(r.update=`${l} ? {fields: ${o}, values: [${s.join(", ")}]} : null`),delete r.value,delete r.on,n}},T$="_toggle",une={defined:e=>e.type==="point"&&!bl(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+T$,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Gu,i=t.name+T$;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${eh(e)}}, `)+`${i} ? ${n} : null`}},wLe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!bl(e),parse:(e,t)=>{t.clear&&(t.clear=Ne(t.clear)?qf(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(lne.defined(t))for(const i of t.project.items){const a=n.findIndex(r=>r.name===bn(`${t.name}_${i.field}`));a!==-1&&n[a].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(a,r){a!==-1&&n[a].on&&n[a].on.push({events:t.clear,update:r})}if(t.type==="interval")for(const a of t.project.items){const r=n.findIndex(o=>o.name===a.signals.visual);if(i(r,"[0, 0]"),r===-1){const o=n.findIndex(s=>s.name===a.signals.data);i(o,"null")}}else{let a=n.findIndex(r=>r.name===t.name+Gu);i(a,"null"),une.defined(t)&&(a=n.findIndex(r=>r.name===t.name+T$),i(a,"false"))}return n}},dne={defined:e=>{const t=e.resolve==="global"&&e.bind&&n3(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ss;return t&&!n&&Ee(qRe),t&&n},parse:(e,t,n)=>{const i=nt(n);if(i.select=Ne(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},mne(t,i),Fe(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const s of t.events)s.filter=Le(s.filter??[]),s.filter.includes(o)||s.filter.push(o)}const a=IA(t.bind)?t.bind.legend:"click",r=Ne(a)?qf(a,"view"):Le(a);t.bind={legend:{merge:r}}},topLevelSignals:(e,t,n)=>{const i=t.name,a=IA(t.bind)&&t.bind.legend,r=o=>s=>{const l=nt(s);return l.markname=o,l};for(const o of t.project.items){if(!o.hasLegend)continue;const s=`${bn(o.field)}_legend`,l=`${i}_${s}`;if(n.filter(d=>d.name===l).length===0){const d=a.merge.map(r(`${s}_symbols`)).concat(a.merge.map(r(`${s}_labels`))).concat(a.merge.map(r(`${s}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:a.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,a=t.project,r=n.find(g=>g.name===i+Gu),o=i+D0,s=a.items.filter(g=>g.hasLegend).map(g=>bn(`${i}_${bn(g.field)}_legend`)),u=`${s.map(g=>`${g} !== null`).join(" && ")} ? {fields: ${o}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?r.on.push({events:s.map(g=>({signal:g})),update:u}):s.length>0&&(r.update=u,delete r.value,delete r.on);const d=n.find(g=>g.name===i+T$),c=IA(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:c}):d.on[0].events=c),n}};function kLe(e,t,n){var a;const i=(a=e.fieldDef(t))==null?void 0:a.field;for(const r of Gi(e.component.selection??{})){const o=r.project.hasField[i]??r.project.hasChannel[t];if(o&&dne.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),o.hasLegend=!0}}}const fne="_translate_anchor",cne="_translate_delta",$Le={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,a=Du.defined(t),r=i+fne,{x:o,y:s}=t.project.hasChannel;let l=qf(t.translate,"scope");return a||(l=l.map(u=>(u.between[0].markname=i+Sg,u))),n.push({name:r,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${a?OR(e,_n):`slice(${o.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${a?OR(e,Oi):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:i+cne,value:{},on:[{events:l,update:`{x: ${r}.x - x(unit), y: ${r}.y - y(unit)}`}]}),o!==void 0&&D4(e,t,o,"width",n),s!==void 0&&D4(e,t,s,"height",n),n}};function D4(e,t,n,i,a){const r=t.name,o=r+fne,s=r+cne,l=n.channel,u=Du.defined(t),d=a.find(D=>D.name===n.signals[u?"data":"visual"]),c=e.getSizeSignalRef(i).signal,g=e.getScaleComponent(l),v=g&&g.get("type"),b=g&&g.get("reverse"),x=u?l===_n?b?"":"-":b?"-":"":"",k=`${o}.extent_${l}`,w=`${x}${s}.${l} / ${u?`${c}`:`span(${k})`}`,E=!u||!g?"panLinear":v==="log"?"panLog":v==="symlog"?"panSymlog":v==="pow"?"panPow":"panLinear",T=u?v==="pow"?`, ${g.get("exponent")??1}`:v==="symlog"?`, ${g.get("constant")??1}`:"":"",O=`${E}(${k}, ${w}${T})`;d.on.push({events:{signal:s},update:u?O:`clampRange(${O}, 0, ${c})`})}const hne="_zoom_anchor",pne="_zoom_delta",ELe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,a=Du.defined(t),r=i+pne,{x:o,y:s}=t.project.hasChannel,l=Oe(e.scaleName(_n)),u=Oe(e.scaleName(Oi));let d=qf(t.zoom,"scope");return a||(d=d.map(c=>(c.markname=i+Sg,c))),n.push({name:i+hne,on:[{events:d,update:a?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(c=>c).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:r,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&C4(e,t,o,"width",n),s!==void 0&&C4(e,t,s,"height",n),n}};function C4(e,t,n,i,a){const r=t.name,o=n.channel,s=Du.defined(t),l=a.find(E=>E.name===n.signals[s?"data":"visual"]),u=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(o),c=d&&d.get("type"),g=s?OR(e,o):l.name,v=r+pne,b=`${r}${hne}.${o}`,x=!s||!d?"zoomLinear":c==="log"?"zoomLog":c==="symlog"?"zoomSymlog":c==="pow"?"zoomPow":"zoomLinear",k=s?c==="pow"?`, ${d.get("exponent")??1}`:c==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${x}(${g}, ${b}, ${v}${k})`;l.on.push({events:{signal:v},update:s?w:`clampRange(${w}, 0, ${u})`})}const Oh="_store",Gu="_tuple",SLe="_modify",gne="vlSelectionResolve",JE=[KNe,oLe,XNe,une,lne,Du,dne,wLe,$Le,ELe,sne];function TLe(e){let t=e.parent;for(;t&&!Br(t);)t=t.parent;return t}function eh(e,{escape:t}={escape:!0}){let n=t?Oe(e.name):e.name;const i=TLe(e);if(i){const{facet:a}=i;for(const r of Eo)a[r]&&(n+=` + '__facet_${r}_' + (facet[${Oe(i.vgField(r))}])`)}return n}function h3(e){return Gi(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function mne(e,t){(Ne(t.select)||!t.select.on)&&delete e.events,(Ne(t.select)||!t.select.clear)&&delete e.clear,(Ne(t.select)||!t.select.toggle)&&delete e.toggle}function bl(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}const ALe="RawCode",OLe="Literal",DLe="Property",CLe="Identifier",RLe="ArrayExpression",ILe="BinaryExpression",PLe="CallExpression",FLe="ConditionalExpression",NLe="LogicalExpression",LLe="MemberExpression",MLe="ObjectExpression",zLe="UnaryExpression";function Ns(e){this.type=e}Ns.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=qLe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function qLe(e){switch(e.type){case RLe:return e.elements;case ILe:case NLe:return[e.left,e.right];case PLe:return[e.callee].concat(e.arguments);case FLe:return[e.test,e.consequent,e.alternate];case LLe:return[e.object,e.property];case MLe:return e.properties;case DLe:return[e.key,e.value];case zLe:return[e.argument];case CLe:case OLe:case ALe:default:return[]}}var Bl,Ve,ge,ma,Yt,KE=1,C0=2,Dh=3,Xf=4,QE=5,Qh=6,rr=7,R0=8,jLe=9;Bl={};Bl[KE]="Boolean";Bl[C0]="<end>";Bl[Dh]="Identifier";Bl[Xf]="Keyword";Bl[QE]="Null";Bl[Qh]="Numeric";Bl[rr]="Punctuator";Bl[R0]="String";Bl[jLe]="RegularExpression";var ULe="ArrayExpression",BLe="BinaryExpression",VLe="CallExpression",WLe="ConditionalExpression",yne="Identifier",GLe="Literal",HLe="LogicalExpression",YLe="MemberExpression",XLe="ObjectExpression",ZLe="Property",JLe="UnaryExpression",$i="Unexpected token %0",KLe="Unexpected number",QLe="Unexpected string",eMe="Unexpected identifier",tMe="Unexpected reserved word",nMe="Unexpected end of input",CR="Invalid regular expression",qA="Invalid regular expression: missing /",vne="Octal literals are not allowed in strict mode.",iMe="Duplicate data property in object literal not allowed in strict mode",Bi="ILLEGAL",S_="Disabled.",aMe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),rMe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function eS(e,t){if(!e)throw new Error("ASSERT: "+t)}function fu(e){return e>=48&&e<=57}function p3(e){return"0123456789abcdefABCDEF".includes(e)}function $b(e){return"01234567".includes(e)}function oMe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function T_(e){return e===10||e===13||e===8232||e===8233}function I0(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&aMe.test(String.fromCharCode(e))}function A$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&rMe.test(String.fromCharCode(e))}const sMe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function bne(){for(;ge<ma;){const e=Ve.charCodeAt(ge);if(oMe(e)||T_(e))++ge;else break}}function RR(e){var t,n,i,a=0;for(n=e==="u"?4:2,t=0;t<n;++t)ge<ma&&p3(Ve[ge])?(i=Ve[ge++],a=a*16+"0123456789abcdef".indexOf(i.toLowerCase())):Ft({},$i,Bi);return String.fromCharCode(a)}function lMe(){var e,t,n,i;for(e=Ve[ge],t=0,e==="}"&&Ft({},$i,Bi);ge<ma&&(e=Ve[ge++],!!p3(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ft({},$i,Bi),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function _ne(){var e,t;for(e=Ve.charCodeAt(ge++),t=String.fromCharCode(e),e===92&&(Ve.charCodeAt(ge)!==117&&Ft({},$i,Bi),++ge,e=RR("u"),(!e||e==="\\"||!I0(e.charCodeAt(0)))&&Ft({},$i,Bi),t=e);ge<ma&&(e=Ve.charCodeAt(ge),!!A$(e));)++ge,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ve.charCodeAt(ge)!==117&&Ft({},$i,Bi),++ge,e=RR("u"),(!e||e==="\\"||!A$(e.charCodeAt(0)))&&Ft({},$i,Bi),t+=e);return t}function uMe(){var e,t;for(e=ge++;ge<ma;){if(t=Ve.charCodeAt(ge),t===92)return ge=e,_ne();if(A$(t))++ge;else break}return Ve.slice(e,ge)}function dMe(){var e,t,n;return e=ge,t=Ve.charCodeAt(ge)===92?_ne():uMe(),t.length===1?n=Dh:sMe.hasOwnProperty(t)?n=Xf:t==="null"?n=QE:t==="true"||t==="false"?n=KE:n=Dh,{type:n,value:t,start:e,end:ge}}function jA(){var e=ge,t=Ve.charCodeAt(ge),n,i=Ve[ge],a,r,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ge,{type:rr,value:String.fromCharCode(t),start:e,end:ge};default:if(n=Ve.charCodeAt(ge+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ge+=2,{type:rr,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ge};case 33:case 61:return ge+=2,Ve.charCodeAt(ge)===61&&++ge,{type:rr,value:Ve.slice(e,ge),start:e,end:ge}}}if(o=Ve.substr(ge,4),o===">>>=")return ge+=4,{type:rr,value:o,start:e,end:ge};if(r=o.substr(0,3),r===">>>"||r==="<<="||r===">>=")return ge+=3,{type:rr,value:r,start:e,end:ge};if(a=r.substr(0,2),i===a[1]&&"+-<>&|".includes(i)||a==="=>")return ge+=2,{type:rr,value:a,start:e,end:ge};if(a==="//"&&Ft({},$i,Bi),"<>=!+-*%&|^/".includes(i))return++ge,{type:rr,value:i,start:e,end:ge};Ft({},$i,Bi)}function fMe(e){let t="";for(;ge<ma&&p3(Ve[ge]);)t+=Ve[ge++];return t.length===0&&Ft({},$i,Bi),I0(Ve.charCodeAt(ge))&&Ft({},$i,Bi),{type:Qh,value:parseInt("0x"+t,16),start:e,end:ge}}function cMe(e){let t="0"+Ve[ge++];for(;ge<ma&&$b(Ve[ge]);)t+=Ve[ge++];return(I0(Ve.charCodeAt(ge))||fu(Ve.charCodeAt(ge)))&&Ft({},$i,Bi),{type:Qh,value:parseInt(t,8),octal:!0,start:e,end:ge}}function R4(){var e,t,n;if(n=Ve[ge],eS(fu(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ge,e="",n!=="."){if(e=Ve[ge++],n=Ve[ge],e==="0"){if(n==="x"||n==="X")return++ge,fMe(t);if($b(n))return cMe(t);n&&fu(n.charCodeAt(0))&&Ft({},$i,Bi)}for(;fu(Ve.charCodeAt(ge));)e+=Ve[ge++];n=Ve[ge]}if(n==="."){for(e+=Ve[ge++];fu(Ve.charCodeAt(ge));)e+=Ve[ge++];n=Ve[ge]}if(n==="e"||n==="E")if(e+=Ve[ge++],n=Ve[ge],(n==="+"||n==="-")&&(e+=Ve[ge++]),fu(Ve.charCodeAt(ge)))for(;fu(Ve.charCodeAt(ge));)e+=Ve[ge++];else Ft({},$i,Bi);return I0(Ve.charCodeAt(ge))&&Ft({},$i,Bi),{type:Qh,value:parseFloat(e),start:t,end:ge}}function hMe(){var e="",t,n,i,a,r=!1;for(t=Ve[ge],eS(t==="'"||t==='"',"String literal must starts with a quote"),n=ge,++ge;ge<ma;)if(i=Ve[ge++],i===t){t="";break}else if(i==="\\")if(i=Ve[ge++],!i||!T_(i.charCodeAt(0)))switch(i){case"u":case"x":Ve[ge]==="{"?(++ge,e+=lMe()):e+=RR(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:$b(i)?(a="01234567".indexOf(i),a!==0&&(r=!0),ge<ma&&$b(Ve[ge])&&(r=!0,a=a*8+"01234567".indexOf(Ve[ge++]),"0123".includes(i)&&ge<ma&&$b(Ve[ge])&&(a=a*8+"01234567".indexOf(Ve[ge++]))),e+=String.fromCharCode(a)):e+=i;break}else i==="\r"&&Ve[ge]===`
`&&++ge;else{if(T_(i.charCodeAt(0)))break;e+=i}return t!==""&&Ft({},$i,Bi),{type:R0,value:e,octal:r,start:n,end:ge}}function pMe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,a)=>{if(parseInt(a,16)<=1114111)return"x";Ft({},CR)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ft({},CR)}try{return new RegExp(e,t)}catch{return null}}function gMe(){var e,t,n,i,a;for(e=Ve[ge],eS(e==="/","Regular expression literal must start with a slash"),t=Ve[ge++],n=!1,i=!1;ge<ma;)if(e=Ve[ge++],t+=e,e==="\\")e=Ve[ge++],T_(e.charCodeAt(0))&&Ft({},qA),t+=e;else if(T_(e.charCodeAt(0)))Ft({},qA);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||Ft({},qA),a=t.substr(1,t.length-2),{value:a,literal:t}}function mMe(){var e,t,n;for(t="",n="";ge<ma&&(e=Ve[ge],!!A$(e.charCodeAt(0)));)++ge,e==="\\"&&ge<ma?Ft({},$i,Bi):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ft({},CR,n),{value:n,literal:t}}function yMe(){var e,t,n,i;return Yt=null,bne(),e=ge,t=gMe(),n=mMe(),i=pMe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ge}}function vMe(e){return e.type===Dh||e.type===Xf||e.type===KE||e.type===QE}function xne(){if(bne(),ge>=ma)return{type:C0,start:ge,end:ge};const e=Ve.charCodeAt(ge);return I0(e)?dMe():e===40||e===41||e===59?jA():e===39||e===34?hMe():e===46?fu(Ve.charCodeAt(ge+1))?R4():jA():fu(e)?R4():jA()}function ur(){const e=Yt;return ge=e.end,Yt=xne(),ge=e.end,e}function wne(){const e=ge;Yt=xne(),ge=e}function bMe(e){const t=new Ns(ULe);return t.elements=e,t}function I4(e,t,n){const i=new Ns(e==="||"||e==="&&"?HLe:BLe);return i.operator=e,i.left=t,i.right=n,i}function _Me(e,t){const n=new Ns(VLe);return n.callee=e,n.arguments=t,n}function xMe(e,t,n){const i=new Ns(WLe);return i.test=e,i.consequent=t,i.alternate=n,i}function g3(e){const t=new Ns(yne);return t.name=e,t}function Yv(e){const t=new Ns(GLe);return t.value=e.value,t.raw=Ve.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function P4(e,t,n){const i=new Ns(YLe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function wMe(e){const t=new Ns(XLe);return t.properties=e,t}function F4(e,t,n){const i=new Ns(ZLe);return i.key=t,i.value=n,i.kind=e,i}function kMe(e,t){const n=new Ns(JLe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ft(e,t){var n,i=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,(r,o)=>(eS(o<i.length,"Message reference must be in range"),i[o]));throw n=new Error(a),n.index=ge,n.description=a,n}function tS(e){e.type===C0&&Ft(e,nMe),e.type===Qh&&Ft(e,KLe),e.type===R0&&Ft(e,QLe),e.type===Dh&&Ft(e,eMe),e.type===Xf&&Ft(e,tMe),Ft(e,$i,e.value)}function ya(e){const t=ur();(t.type!==rr||t.value!==e)&&tS(t)}function hn(e){return Yt.type===rr&&Yt.value===e}function UA(e){return Yt.type===Xf&&Yt.value===e}function $Me(){const e=[];for(ge=Yt.start,ya("[");!hn("]");)hn(",")?(ur(),e.push(null)):(e.push(Ch()),hn("]")||ya(","));return ur(),bMe(e)}function N4(){ge=Yt.start;const e=ur();return e.type===R0||e.type===Qh?(e.octal&&Ft(e,vne),Yv(e)):g3(e.value)}function EMe(){var e,t,n,i;if(ge=Yt.start,e=Yt,e.type===Dh)return n=N4(),ya(":"),i=Ch(),F4("init",n,i);if(e.type===C0||e.type===rr)tS(e);else return t=N4(),ya(":"),i=Ch(),F4("init",t,i)}function SMe(){var e=[],t,n,i,a={},r=String;for(ge=Yt.start,ya("{");!hn("}");)t=EMe(),t.key.type===yne?n=t.key.name:n=r(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(a,i)?Ft({},iMe):a[i]=!0,e.push(t),hn("}")||ya(",");return ya("}"),wMe(e)}function TMe(){ya("(");const e=m3();return ya(")"),e}const AMe={if:1};function OMe(){var e,t,n;if(hn("("))return TMe();if(hn("["))return $Me();if(hn("{"))return SMe();if(e=Yt.type,ge=Yt.start,e===Dh||AMe[Yt.value])n=g3(ur().value);else if(e===R0||e===Qh)Yt.octal&&Ft(Yt,vne),n=Yv(ur());else{if(e===Xf)throw new Error(S_);e===KE?(t=ur(),t.value=t.value==="true",n=Yv(t)):e===QE?(t=ur(),t.value=null,n=Yv(t)):hn("/")||hn("/=")?(n=Yv(yMe()),wne()):tS(ur())}return n}function DMe(){const e=[];if(ya("("),!hn(")"))for(;ge<ma&&(e.push(Ch()),!hn(")"));)ya(",");return ya(")"),e}function CMe(){ge=Yt.start;const e=ur();return vMe(e)||tS(e),g3(e.value)}function RMe(){return ya("."),CMe()}function IMe(){ya("[");const e=m3();return ya("]"),e}function PMe(){var e,t,n;for(e=OMe();;)if(hn("."))n=RMe(),e=P4(".",e,n);else if(hn("("))t=DMe(),e=_Me(e,t);else if(hn("["))n=IMe(),e=P4("[",e,n);else break;return e}function L4(){const e=PMe();if(Yt.type===rr&&(hn("++")||hn("--")))throw new Error(S_);return e}function hw(){var e,t;if(Yt.type!==rr&&Yt.type!==Xf)t=L4();else{if(hn("++")||hn("--"))throw new Error(S_);if(hn("+")||hn("-")||hn("~")||hn("!"))e=ur(),t=hw(),t=kMe(e.value,t);else{if(UA("delete")||UA("void")||UA("typeof"))throw new Error(S_);t=L4()}}return t}function M4(e){let t=0;if(e.type!==rr&&e.type!==Xf)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function FMe(){var e,t,n,i,a,r,o,s,l,u;if(e=Yt,l=hw(),i=Yt,a=M4(i),a===0)return l;for(i.prec=a,ur(),t=[e,Yt],o=hw(),r=[l,i,o];(a=M4(Yt))>0;){for(;r.length>2&&a<=r[r.length-2].prec;)o=r.pop(),s=r.pop().value,l=r.pop(),t.pop(),n=I4(s,l,o),r.push(n);i=ur(),i.prec=a,r.push(i),t.push(Yt),n=hw(),r.push(n)}for(u=r.length-1,n=r[u],t.pop();u>1;)t.pop(),n=I4(r[u-1].value,r[u-2],n),u-=2;return n}function Ch(){var e,t,n;return e=FMe(),hn("?")&&(ur(),t=Ch(),ya(":"),n=Ch(),e=xMe(e,t,n)),e}function m3(){const e=Ch();if(hn(","))throw new Error(S_);return e}function NMe(e){Ve=e,ge=0,ma=Ve.length,Yt=null,wne();const t=m3();if(Yt.type!==C0)throw new Error("Unexpect token after expression.");return t}function IR(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...IR(e.object)),t.push(...IR(e.property))),t)}function kne(e){return e.object.type==="MemberExpression"?kne(e.object):e.object.name==="datum"}function $ne(e){const t=NMe(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&kne(i)&&n.add(IR(i).slice(1).join("."))}),n}class Qm extends Zt{clone(){return new Qm(null,this.model,nt(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=O$(this.model,this.filter,this),this._dependentFields=$ne(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function LMe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let a=0;for(const r of t){const o=bn(r.name),s=r.select,l=Ne(s)?s:s.type,u=Fe(s)?nt(s):{type:l},d=i[l];for(const v in d)v==="fields"||v==="encodings"||(v==="mark"&&(u.mark={...d.mark,...u.mark}),(u[v]===void 0||u[v]===!0)&&(u[v]=nt(d[v]??u[v])));const c=n[o]={...u,name:o,type:l,init:r.value,bind:r.bind,events:Ne(u.on)?qf(u.on,"scope"):Le(nt(u.on))};if(bl(c)&&(a++,a>1)){delete n[o];continue}const g=nt(r);for(const v of JE)v.defined(c)&&v.parse&&v.parse(e,c,g)}return a>1&&Ee(GRe),n}function Ene(e,t,n,i="datum"){const a=Ne(t)?t:t.param,r=bn(a),o=Oe(r+Oh);let s;try{s=e.getSelectionComponent(r,a)}catch{return`!!${r}`}if(s.project.timeUnit){const g=n??e.component.data.raw,v=s.project.timeUnit.clone();g.parent?v.insertAsParentOf(g):g.parent=v}const l=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=s.resolve==="global"?")":`, ${Oe(s.resolve)})`,d=`${l}${o}, ${i}${u}`,c=`length(data(${o}))`;return t.empty===!1?`${c} && ${d}`:`!${c} || ${d}`}function Sne(e,t,n){const i=bn(t),a=n.encoding;let r=n.field,o;try{o=e.getSelectionComponent(i,t)}catch{return i}if(!a&&!r)r=o.project.items[0].field,o.project.items.length>1&&Ee(HRe(r));else if(a&&!r){const s=o.project.items.filter(l=>l.channel===a);!s.length||s.length>1?(r=o.project.items[0].field,Ee(YRe(s,a,n,r))):r=s[0].field}return`${o.name}[${Oe(No(r))}]`}function MMe(e,t){for(const[n,i]of Ef(e.component.selection??{})){const a=e.getName(`lookup_${n}`);e.component.data.outputNodes[a]=i.materialized=new vr(new Qm(t,e,{param:n}),a,An.Lookup,e.component.data.outputNodeRefCounts)}}function O$(e,t,n){return wb(t,i=>Ne(i)?i:iPe(i)?Ene(e,i,n):Dee(i))}function zMe(e,t){if(e)return ye(e)&&!Pd(e)?e.map(n=>YM(n,t)).join(", "):e}function BA(e,t,n,i){var a,r;e.encode??(e.encode={}),(a=e.encode)[t]??(a[t]={}),(r=e.encode[t]).update??(r.update={}),e.encode[t].update[n]=i}function Xv(e,t,n,i={header:!1}){var c,g;const{disable:a,orient:r,scale:o,labelExpr:s,title:l,zindex:u,...d}=e.combine();if(!a){for(const v in d){const b=v,x=lFe[b],k=d[b];if(x&&x!==t&&x!=="both")delete d[b];else if(O0(k)){const{condition:w,...E}=k,T=Le(w),O=r4[b];if(O){const{vgProp:D,part:P}=O,R=[...T.map(M=>{const{test:q,...H}=M;return{test:O$(null,q),...H}}),E];BA(d,P,D,R),delete d[b]}else if(O===null){const D={signal:T.map(P=>{const{test:R,...M}=P;return`${O$(null,R)} ? ${BB(M)} : `}).join("")+BB(E)};d[b]=D}}else if(We(k)){const w=r4[b];if(w){const{vgProp:E,part:T}=w;BA(d,T,E,k),delete d[b]}}xt(["labelAlign","labelBaseline"],b)&&d[b]===null&&delete d[b]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:v}=d.encode;d.encode={...v?{grid:v}:{}},Qt(d.encode)&&delete d.encode}return{scale:o,orient:r,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Gn(u,0)}}else{if(!i.header&&e.mainExtracted)return;if(s!==void 0){let b=s;(g=(c=d.encode)==null?void 0:c.labels)!=null&&g.update&&We(d.encode.labels.update.text)&&(b=xh(s,"datum.label",d.encode.labels.update.text.signal)),BA(d,"labels","text",{signal:b})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const b of ste)e.hasAxisPart(b)||delete d.encode[b];Qt(d.encode)&&delete d.encode}const v=zMe(l,n);return{scale:o,orient:r,grid:!1,...v?{title:v}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Gn(u,0)}}}}function Tne(e){const{axes:t}=e.component,n=[];for(const i of nd)if(t[i]){for(const a of t[i])if(!a.get("disable")&&!a.get("gridScale")){const r=i==="x"?"height":"width",o=e.getSizeSignalRef(r).signal;r!==o&&n.push({name:r,update:o})}}return n}function qMe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(a=>Xv(a,"grid",t)),...i.map(a=>Xv(a,"grid",t)),...n.map(a=>Xv(a,"main",t)),...i.map(a=>Xv(a,"main",t))].filter(a=>a)}function z4(e,t,n,i){return Object.assign.apply(null,[{},...e.map(a=>{if(a==="axisOrient"){const r=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...ke(o),...ke(s)]),u={};for(const d of l.values())u[d]={signal:`${i.signal} === "${r}" ? ${fs(o[d])} : ${fs(s[d])}`};return u}return t[a]})])}function jMe(e,t,n,i){const a=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Pee(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],r=e==="x"?"axisX":"axisY",o=We(n)?"axisOrient":`axis${v0(n)}`,s=[...a,...a.map(u=>r+u.substr(4))],l=["axis",o,r];return{vlOnlyAxisConfig:z4(s,i,e,n),vgAxisConfig:z4(l,i,e,n),axisConfigStyle:UMe([...l,...s],i)}}function UMe(e,t){var i;const n=[{}];for(const a of e){let r=(i=t[a])==null?void 0:i.style;if(r){r=Le(r);for(const o of r)n.push(t.style[o])}}return Object.assign.apply(null,n)}function PR(e,t,n,i={}){var r;const a=lee(e,n,t);if(a!==void 0)return{configFrom:"style",configValue:a};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((r=i[o])==null?void 0:r[e])!==void 0)return{configFrom:o,configValue:i[o][e]};return{}}const q4={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??BMe(n,e),gridScale:({model:e,channel:t})=>VMe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||One(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||Ane(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??GMe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??HMe(t.type,n,Te(t)&&!!t.timeUnit,Te(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:a})=>{const r=e==="x"?"width":e==="y"?"height":void 0,o=r?t.getSizeSignalRef(r):void 0;return n.tickCount??XMe({fieldOrDatumDef:i,scaleType:a,size:o,values:n.values})},tickMinStep:ZMe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=Dne(t,n);if(i!==void 0)return i;const a=t.typedFieldDef(n),r=n==="x"?"x2":"y2",o=t.fieldDef(r);return dee(a?[i4(a)]:[],Te(o)?[i4(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>JMe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??KMe(n,t)};function BMe(e,t){return!Ti(e)&&Te(t)&&!ln(t==null?void 0:t.bin)&&!Ni(t==null?void 0:t.bin)}function VMe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function WMe(e,t,n,i,a){const r=t==null?void 0:t.labelAngle;if(r!==void 0)return We(r)?r:k_(r);{const{configValue:o}=PR("labelAngle",i,t==null?void 0:t.style,a);return o!==void 0?k_(o):n===_n&&xt([NM,FM],e.type)&&!(Te(e)&&e.timeUnit)?270:void 0}}function FR(e){return`(((${e.signal} % 360) + 360) % 360)`}function Ane(e,t,n,i){if(e!==void 0)if(n==="x"){if(We(e)){const a=FR(e),r=We(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${a} && ${a} < 135) || (225 < ${a} && ${a} < 315) ? "middle" :(${a} <= 45 || 315 <= ${a}) === ${r} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(We(t)){const a=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${a} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(We(e)){const a=FR(e),r=We(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${a} <= 45 || 315 <= ${a} || (135 <= ${a} && ${a} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${a} && ${a} <= 135) === ${r} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(We(t)){const a=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${a} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function One(e,t,n){if(e===void 0)return;const i=n==="x",a=i?0:90,r=i?"bottom":"left";if(We(e)){const o=FR(e),s=We(t)?`(${t.signal} === "${r}")`:t===r;return{signal:`(${a?`(${o} + 90)`:o} % 180 === 0) ? ${i?null:'"center"'} :(${a} < ${o} && ${o} < ${180+a}) === ${s} ? "left" : "right"`}}if((e+a)%180===0)return i?null:"center";if(We(t)){const o=a<e&&e<180+a?"===":"!==";return{signal:`${`${t.signal} ${o} "${r}"`} ? "left" : "right"`}}return(a<e&&e<180+a)==(t===r)?"left":"right"}function GMe(e,t){if(t==="x"&&xt(["quantitative","temporal"],e))return!0}function HMe(e,t,n,i){if(n&&!Fe(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function YMe(e){return e==="x"?"bottom":"left"}function XMe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var a;if(!i&&!Ti(t)&&t!=="log"){if(Te(e)){if(ln(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&xt(["month","hours","day","quarter"],(a=Si(e.timeUnit))==null?void 0:a.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function ZMe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Te(t)){const{timeUnit:n}=t;if(n){const i=Tee(n);if(i)return{signal:i}}}}function Dne(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),a=e.fieldDef(n),r=i?i.title:void 0,o=a?a.title:void 0;if(r&&o)return fee(r,o);if(r)return r;if(o)return o;if(r!==void 0)return r;if(o!==void 0)return o}function JMe(e,t){const n=e.values;if(ye(n))return ote(t,n);if(We(n))return n}function KMe(e,t){return e==="rect"&&x$(t)?1:0}class _m extends Zt{clone(){return new _m(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=$ne(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,a)=>{if(Kh(i)&&Zee(i.sort)){const{field:r,timeUnit:o}=i,s=i.sort,l=s.map((u,d)=>`${Dee({field:r,timeUnit:o,equal:u})} ? ${d} : `).join("")+s.length;t=new _m(t,{calculate:l,as:xm(i,a,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${St(this.transform)}`}}function xm(e,t,n){return Ie(e,{prefix:t,suffix:"sort_index",...n})}function nS(e,t){return xt(["top","bottom"],t)?"column":xt(["left","right"],t)||e==="row"?"row":"column"}function wm(e,t,n,i){const a=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Gn((t||{})[e],a[e],n.header[e])}function iS(e,t,n,i){const a={};for(const r of e){const o=wm(r,t||{},n,i);o!==void 0&&(a[r]=o)}return a}const y3=["row","column"],v3=["header","footer"];function QMe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,a=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:r,titleAngle:o,titleOrient:s}=iS(["titleAnchor","titleAngle","titleOrient"],a.header,i,t),l=nS(t,s),u=k_(o);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Rne(u,l),...Cne(l,u,r),...Ine(i,a,t,DFe,Ete)}}}function Cne(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=One(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function Rne(e,t){const n=Ane(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function e3e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const a of v3)if(n[a])for(const r of n[a]){const o=n3e(e,t,a,n,r);o!=null&&i.push(o)}return i}function t3e(e,t){const{sort:n}=e;return Ou(n)?{field:Ie(n,{expr:"datum"}),order:n.order??"ascending"}:ye(n)?{field:xm(e,t,{expr:"datum"}),order:"ascending"}:{field:Ie(e,{expr:"datum"}),order:n??"ascending"}}function NR(e,t,n){const{format:i,formatType:a,labelAngle:r,labelAnchor:o,labelOrient:s,labelExpr:l}=iS(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=VM({fieldOrDatumDef:e,format:i,formatType:a,expr:"parent",config:n}).signal,d=nS(t,s);return{text:{signal:l?xh(xh(l,"datum.label",u),"datum.value",Ie(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Rne(r,d),...Cne(d,r,o),...Ine(n,e,t,CFe,Ste)}}function n3e(e,t,n,i,a){if(a){let r=null;const{facetFieldDef:o}=i,s=e.config?e.config:void 0;if(o&&a.labels){const{labelOrient:c}=iS(["labelOrient"],o.header,s,t);(t==="row"&&!xt(["top","bottom"],c)||t==="column"&&!xt(["left","right"],c))&&(r=NR(o,t,s))}const l=Br(e)&&!E0(e.facet),u=a.axes,d=(u==null?void 0:u.length)>0;if(r||d){const c=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:t3e(o,t)}:{},...d&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...r?{title:r}:{},...a.sizeSignal?{encode:{update:{[c]:a.sizeSignal}}}:{},...d?{axes:u}:{}}}}return null}const i3e={column:{start:0,end:1},row:{start:1,end:0}};function a3e(e,t){return i3e[t][e]}function r3e(e,t){const n={};for(const i of Eo){const a=e[i];if(a!=null&&a.facetFieldDef){const{titleAnchor:r,titleOrient:o}=iS(["titleAnchor","titleOrient"],a.facetFieldDef.header,t,i),s=nS(i,o),l=a3e(r,s);l!==void 0&&(n[s]=l)}}return Qt(n)?void 0:n}function Ine(e,t,n,i,a){const r={};for(const o of i){if(!a[o])continue;const s=wm(o,t==null?void 0:t.header,e,n);s!==void 0&&(r[a[o]]=s)}return r}function b3(e){return[...l1(e,"width"),...l1(e,"height"),...l1(e,"childWidth"),...l1(e,"childHeight")]}function l1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const a=e.getSizeSignalRef(t).signal;if(i==="step"){const r=e.getScaleComponent(n);if(r){const o=r.get("type"),s=r.get("range");if(Ti(o)&&Xh(s)){const l=e.scaleName(n);return Br(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[j4(l,s)]:[j4(l,s),{name:a,update:Pne(l,r,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const r=a.endsWith("width"),o=r?"containerSize()[0]":"containerSize()[1]",s=kR(e.config.view,r?"width":"height"),l=`isFinite(${o}) ? ${o} : ${s}`;return[{name:a,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:a,value:i}]}function j4(e,t){const n=`${e}_step`;return We(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Pne(e,t,n){const i=t.get("type"),a=t.get("padding"),r=Gn(t.get("paddingOuter"),a);let o=t.get("paddingInner");return o=i==="band"?o!==void 0?o:a:1,`bandspace(${n}, ${fs(o)}, ${fs(r)}) * ${e}_step`}function Fne(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Nne(e,t){return ke(e).reduce((n,i)=>({...n,...Km({model:t,channelDef:e[i],vgChannel:i,mainRefFn:a=>cn(a.value),invalidValueRef:void 0})}),{})}function Lne(e,t){if(Br(t))return e==="theta"?"independent":"shared";if(ny(t))return"shared";if(S3(t))return Hn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function _3(e,t){const n=e.scale[t],i=Hn(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&Ee(EIe(t)),"independent"):e[i][t]||"shared"}const o3e={...PFe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Mne=ke(o3e);class s3e extends ad{}const U4={symbols:l3e,gradient:u3e,labels:d3e,entries:f3e};function l3e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:a,legendType:r}){if(r!=="symbol")return;const{markDef:o,encoding:s,config:l,mark:u}=n,d=o.filled&&u!=="trail";let c={...IRe({},n,OPe),...ane(n,{filled:d})};const g=a.get("symbolOpacity")??l.legend.symbolOpacity,v=a.get("symbolFillColor")??l.legend.symbolFillColor,b=a.get("symbolStrokeColor")??l.legend.symbolStrokeColor,x=g===void 0?zne(s.opacity)??o.opacity:void 0;if(c.fill){if(i==="fill"||d&&i===wr)delete c.fill;else if($e(c.fill,"field"))v?delete c.fill:(c.fill=cn(l.legend.symbolBaseFillColor??"black"),c.fillOpacity=cn(x??1));else if(ye(c.fill)){const k=LR(s.fill??s.color)??o.fill??(d&&o.color);k&&(c.fill=cn(k))}}if(c.stroke){if(i==="stroke"||!d&&i===wr)delete c.stroke;else if($e(c.stroke,"field")||b)delete c.stroke;else if(ye(c.stroke)){const k=Gn(LR(s.stroke||s.color),o.stroke,d?o.color:void 0);k&&(c.stroke={value:k})}}if(i!==td){const k=Te(t)&&jne(n,a,t);k?c.opacity=[{test:k,...cn(x??1)},cn(l.legend.unselectedOpacity)]:x&&(c.opacity=cn(x))}return c={...c,...e},Qt(c)?void 0:c}function u3e(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:a,markDef:r,encoding:o}=t;let s={};const u=(i.get("gradientOpacity")??a.legend.gradientOpacity)===void 0?zne(o.opacity)||r.opacity:void 0;return u&&(s.opacity=cn(u)),s={...s,...e},Qt(s)?void 0:s}function d3e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:a}){const r=n.legend(i)||{},o=n.config,s=Te(t)?jne(n,a,t):void 0,l=s?[{test:s,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:d}=r;let c;Th(d)?c=cs({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:d,config:o}):u===void 0&&d===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?c=cs({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Te(t)&&t.timeUnit===void 0&&(c=cs({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const g={...l?{opacity:l}:{},...c?{text:c}:{},...e};return Qt(g)?void 0:g}function f3e(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function zne(e){return qne(e,(t,n)=>Math.max(t,n.value))}function LR(e){return qne(e,(t,n)=>Gn(t,n.value))}function qne(e,t){if(ZPe(e))return Le(e.condition).reduce(t,e.value);if($s(e))return e.value}function jne(e,t,n){const i=t.get("selections");if(!(i!=null&&i.length))return;const a=Oe(n.field);return i.map(r=>`(!length(data(${Oe(bn(r)+Oh)})) || (${r}[${a}] && indexof(${r}[${a}], datum.value) >= 0))`).join(" || ")}const B4={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:a}=t;return Hee(e,e.type,i,a,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return Yee(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??v3e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??b3e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??h3e(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Eg(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if($g(n)&&dl(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>c3e(t,e)};function c3e(e,t){const n=e.values;if(ye(n))return ote(t,n);if(We(n))return n}function h3e(e,t,n,i){if(t!=="shape"){const a=LR(n)??i;if(a)return a}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function p3e(e){const{legend:t}=e;return Gn(t.type,g3e(e))}function g3e({channel:e,timeUnit:t,scaleType:n}){if($g(e)){if(xt(["quarter","month","day"],t))return"symbol";if(dl(n))return"gradient"}return"symbol"}function m3e({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??y3e(n,t)}function y3e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function v3e({legendConfig:e,model:t,direction:n,orient:i,scaleType:a}){const{gradientHorizontalMaxLength:r,gradientHorizontalMinLength:o,gradientVerticalMaxLength:s,gradientVerticalMinLength:l}=e;if(dl(a))return n==="horizontal"?i==="top"||i==="bottom"?V4(t,"width",o,r):o:V4(t,"height",l,s)}function V4(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function b3e(e){if(xt(["quantile","threshold","log","symlog"],e))return"greedy"}function Une(e){const t=En(e)?_3e(e):$3e(e);return e.component.legends=t,t}function _3e(e){const{encoding:t}=e,n={};for(const i of[wr,...Ate]){const a=oi(t[i]);!a||!e.getScaleComponent(i)||i===kr&&Te(a)&&a.type===Jm||(n[i]=k3e(e,i))}return n}function x3e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function w3e(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(i==null?void 0:i.title))return!0}return e===(n||{})[t]}function k3e(e,t){var O;let n=e.legend(t);const{markDef:i,encoding:a,config:r}=e,o=r.legend,s=new s3e({},x3e(e,t));kLe(e,t,s);const l=n!==void 0?!n:o.disable;if(s.set("disable",l,n!==void 0),l)return s;n=n||{};const u=e.getScaleComponent(t).get("type"),d=oi(a[t]),c=Te(d)?(O=Si(d.timeUnit))==null?void 0:O.unit:void 0,g=n.orient||r.legend.orient||"right",v=p3e({legend:n,channel:t,timeUnit:c,scaleType:u}),b=m3e({legend:n,legendType:v,orient:g,legendConfig:o}),x={legend:n,channel:t,model:e,markDef:i,encoding:a,fieldOrDatumDef:d,legendConfig:o,config:r,scaleType:u,orient:g,legendType:v,direction:b};for(const D of Mne){if(v==="gradient"&&D.startsWith("symbol")||v==="symbol"&&D.startsWith("gradient"))continue;const P=D in B4?B4[D](x):n[D];if(P!==void 0){const R=w3e(P,D,n,e.fieldDef(t));(R||r.legend[D]===void 0)&&s.set(D,P,R)}}const k=(n==null?void 0:n.encoding)??{},w=s.get("selections"),E={},T={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:s,legendType:v};for(const D of["labels","legend","title","symbols","gradient","entries"]){const P=Nne(k[D]??{},e),R=D in U4?U4[D](P,T):P;R!==void 0&&!Qt(R)&&(E[D]={...w!=null&&w.length&&Te(d)?{name:`${bn(d.field)}_legend_${D}`}:{},...w!=null&&w.length?{interactive:!!w}:{},update:R})}return Qt(E)||s.set("encode",E,!!(n!=null&&n.encoding)),s}function $3e(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){Une(i);for(const a of ke(i.component.legends))n.legend[a]=_3(e.component.resolve,a),n.legend[a]==="shared"&&(t[a]=Bne(t[a],i.component.legends[a]),t[a]||(n.legend[a]="independent",delete t[a]))}for(const i of ke(t))for(const a of e.children)a.component.legends[i]&&n.legend[i]==="shared"&&delete a.component.legends[i];return t}function Bne(e,t){var r,o,s,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let a=!1;for(const u of Mne){const d=Af(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(c,g)=>{switch(u){case"symbolType":return E3e(c,g);case"title":return cee(c,g);case"type":return a=!0,Dr("symbol")}return HE(c,g,u,"legend")});e.setWithExplicit(u,d)}return a&&((o=(r=e.implicit)==null?void 0:r.encode)!=null&&o.gradient&&m$(e.implicit,["encode","gradient"]),(l=(s=e.explicit)==null?void 0:s.encode)!=null&&l.gradient&&m$(e.explicit,["encode","gradient"])),e}function E3e(e,t){return t.value==="circle"?t:e}function S3e(e,t,n,i){var a,r;e.encode??(e.encode={}),(a=e.encode)[t]??(a[t]={}),(r=e.encode[t]).update??(r.update={}),e.encode[t].update[n]=i}function Vne(e){const t=e.component.legends,n={};for(const a of ke(t)){const r=e.getScaleComponent(a),o=en(r.get("domains"));if(n[o])for(const s of n[o])Bne(s,t[a])||n[o].push(t[a]);else n[o]=[t[a].clone()]}return Gi(n).flat().map(a=>T3e(a,e.config)).filter(a=>a!==void 0)}function T3e(e,t){var o,s,l;const{disable:n,labelExpr:i,selections:a,...r}=e.combine();if(!n){if(t.aria===!1&&r.aria==null&&(r.aria=!1),(o=r.encode)!=null&&o.symbols){const u=r.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!r.stroke&&(u.stroke={value:"transparent"});for(const d of Ate)r[d]&&delete u[d]}if(r.title||delete r.title,i!==void 0){let u=i;(l=(s=r.encode)==null?void 0:s.labels)!=null&&l.update&&We(r.encode.labels.update.text)&&(u=xh(i,"datum.label",r.encode.labels.update.text.signal)),S3e(r,"labels","text",{signal:u})}return r}}function A3e(e){return ny(e)||S3(e)?O3e(e):Wne(e)}function O3e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Wne(e))}function Wne(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const a={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},r=t.data.reduce((o,s)=>{const l=We(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return xt(o,l)||o.push(l),o},[]);if(r.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:a,fit:{signal:r.length>1?`[${r.join(", ")}]`:r[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const D3e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Gne extends ad{constructor(t,n,i,a){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=a,this.merged=!1}get isFit(){return!!this.data}}function Hne(e){e.component.projection=En(e)?C3e(e):P3e(e)}function C3e(e){if(e.hasProjection){const t=Mi(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,a=n?R3e(e):void 0,r=new Gne(e.projectionName(!0),{...Mi(e.config.projection),...t},i,a);return r.get("type")||r.set("type","equalEarth",!1),r}}function R3e(e){const t=[],{encoding:n}=e;for(const i of[[Ps,Is],[Lo,Fs]])(oi(n[i[0]])||oi(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(kr)&&e.typedFieldDef(kr).type===Jm&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(An.Main)),t}function I3e(e,t){const n=lM(D3e,a=>!!(!Me(e.explicit,a)&&!Me(t.explicit,a)||Me(e.explicit,a)&&Me(t.explicit,a)&&Mr(e.get(a),t.get(a))));if(Mr(e.size,t.size)){if(n)return e;if(Mr(e.explicit,{}))return t;if(Mr(t.explicit,{}))return e}return null}function P3e(e){if(e.children.length===0)return;let t;for(const i of e.children)Hne(i);const n=lM(e.children,i=>{const a=i.component.projection;if(a)if(t){const r=I3e(t,a);return r&&(t=r),!!r}else return t=a,!0;else return!0});if(t&&n){const i=e.projectionName(!0),a=new Gne(i,t.specifiedProjection,t.size,nt(t.data));for(const r of e.children){const o=r.component.projection;o&&(o.isFit&&a.data.push(...r.component.projection.data),r.renameProjection(o.get("name"),i),o.merged=!0)}return a}}function F3e(e,t,n,i){if(A0(t,n)){const a=En(e)?e.axis(n)??e.legend(n)??{}:{},r=Ie(t,{expr:"datum"}),o=Ie(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ie(t,{binSuffix:"range",forAs:!0}),formula:$0(r,o,a.format,a.formatType,i)}}return{}}function Yne(e,t){return`${aee(e)}_${t}`}function N3e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function x3(e,t,n){const i=jE(n,void 0)??{},a=Yne(i,t);return e.getName(`${a}_bins`)}function L3e(e){return"as"in e}function W4(e,t,n){let i,a;L3e(e)?i=Ne(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[Ie(e,{forAs:!0}),Ie(e,{binSuffix:"end",forAs:!0})];const r={...jE(t,void 0)},o=Yne(r,e.field),{signal:s,extentSignal:l}=N3e(n,o);if(DE(r.extent)){const d=r.extent;a=Sne(n,d.param,d),delete r.extent}const u={bin:r,field:e.field,as:[i],...s?{signal:s}:{},...l?{extentSignal:l}:{},...a?{span:a}:{}};return{key:o,binComponent:u}}class _l extends Zt{clone(){return new _l(null,nt(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((a,r,o)=>{if(Ga(r)&&ln(r.bin)){const{key:s,binComponent:l}=W4(r,r.bin,n);a[s]={...l,...a[s],...F3e(n,r,o,n.config)}}return a},{});return Qt(i)?null:new _l(t,i)}static makeFromTransform(t,n,i){const{key:a,binComponent:r}=W4(n,n.bin,i);return new _l(t,{[a]:r})}merge(t,n){for(const i of ke(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=ul([...this.bins[i].as,...t.bins[i].as],St)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(Gi(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Gi(this.bins).map(t=>t.field))}hash(){return`Bin ${St(this.bins)}`}assemble(){return Gi(this.bins).flatMap(t=>{const n=[],[i,...a]=t.as,{extent:r,...o}=t.bin,s={type:"bin",field:No(t.field),as:i,signal:t.signal,...DE(r)?{extent:null}:{extent:r},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!r&&t.extentSignal&&(n.push({type:"extent",field:No(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(const l of a)for(let u=0;u<2;u++)n.push({type:"formula",expr:Ie({field:i[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function M3e(e,t,n,i){var r;const a=En(i)?i.encoding[ql(t)]:void 0;if(Ga(n)&&En(i)&&Kee(n,a,i.markDef,i.config)){e.add(Ie(n,{})),e.add(Ie(n,{suffix:"end"}));const{mark:o,markDef:s,config:l}=i,u=Tf({fieldDef:n,markDef:s,config:l});$_(o)&&u!==.5&&Hn(t)&&(e.add(Ie(n,{suffix:YE})),e.add(Ie(n,{suffix:XE}))),n.bin&&A0(n,t)&&e.add(Ie(n,{binSuffix:"range"}))}else if(XQ(t)){const o=YQ(t);e.add(i.getName(o))}else e.add(Ie(n));return Kh(n)&&mPe((r=n.scale)==null?void 0:r.range)&&e.add(n.scale.range.field),e}function z3e(e,t){for(const n of ke(t)){const i=t[n];for(const a of ke(i))n in e?e[n][a]=new Set([...e[n][a]??[],...i[a]]):e[n]={[a]:i[a]}}}class ms extends Zt{clone(){return new ms(null,new Set(this.dimensions),nt(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(o=>{o.aggregate&&(i=!0)});const a={},r=new Set;return!i||(n.forEachFieldDef((o,s)=>{const{aggregate:l,field:u}=o;if(l)if(l==="count")a["*"]??(a["*"]={}),a["*"].count=new Set([Ie(o,{forAs:!0})]);else{if(Vu(l)||Hf(l)){const d=Vu(l)?"argmin":"argmax",c=l[d];a[c]??(a[c]={}),a[c][d]=new Set([Ie({op:d,field:c},{forAs:!0})])}else a[u]??(a[u]={}),a[u][l]=new Set([Ie(o,{forAs:!0})]);jl(s)&&n.scaleDomain(s)==="unaggregated"&&(a[u]??(a[u]={}),a[u].min=new Set([Ie({field:u,aggregate:"min"},{forAs:!0})]),a[u].max=new Set([Ie({field:u,aggregate:"max"},{forAs:!0})]))}else M3e(r,s,o,n)}),r.size+ke(a).length===0)?null:new ms(t,r,a)}static makeFromTransform(t,n){var i;const a=new Set,r={};for(const o of n.aggregate){const{op:s,field:l,as:u}=o;s&&(s==="count"?(r["*"]??(r["*"]={}),r["*"].count=new Set([u||Ie(o,{forAs:!0})])):(r[l]??(r[l]={}),(i=r[l])[s]??(i[s]=new Set),r[l][s].add(u||Ie(o,{forAs:!0}))))}for(const o of n.groupby??[])a.add(o);return a.size+ke(r).length===0?null:new ms(t,a,r)}merge(t){return qQ(this.dimensions,t.dimensions)?(z3e(this.measures,t.measures),!0):(jIe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ke(this.measures)])}producedFields(){const t=new Set;for(const n of ke(this.measures))for(const i of ke(this.measures[n])){const a=this.measures[n][i];a.size===0?t.add(`${i}_${n}`):a.forEach(t.add,t)}return t}hash(){return`Aggregate ${St({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const r of ke(this.measures))for(const o of ke(this.measures[r]))for(const s of this.measures[r][o])i.push(s),t.push(o),n.push(r==="*"?null:No(r));return{type:"aggregate",groupby:[...this.dimensions].map(No),ops:t,fields:n,as:i}}}class ey extends Zt{constructor(t,n,i,a){super(t),this.model=n,this.name=i,this.data=a;for(const r of Eo){const o=n.facet[r];if(o){const{bin:s,sort:l}=o;this[r]={name:n.getName(`${r}_domain`),fields:[Ie(o),...ln(s)?[Ie(o,{binSuffix:"end"})]:[]],...Ou(l)?{sortField:l}:ye(l)?{sortIndexField:xm(o,r)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Eo)this[n]&&(t+=` ${n.charAt(0)}:${St(this[n])}`);return t}get fields(){var n;const t=[];for(const i of Eo)(n=this[i])!=null&&n.fields&&t.push(...this[i].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Eo)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of nd){const i=this.childModel.component.scales[n];if(i&&!i.merged){const a=i.get("type"),r=i.get("range");if(Ti(a)&&Xh(r)){const o=aS(this.childModel,n),s=E3(o);s?t[n]=s:Ee(wM(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const a={row:"y",column:"x",facet:void 0}[t],r=[],o=[],s=[];a&&i&&i[a]&&(n?(r.push(`distinct_${i[a]}`),o.push("max")):(r.push(i[a]),o.push("distinct")),s.push(`distinct_${i[a]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:d=ME,field:c}=l;r.push(c),o.push(d),s.push(Ie(l,{forAs:!0}))}else u&&(r.push(u),o.push("max"),s.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...r.length?{fields:r,ops:o,as:s}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,a=[],r={};for(const u of y3){for(const d of v3){const c=(i[u]&&i[u][d])??[];for(const g of c)if(((l=g.axes)==null?void 0:l.length)>0){r[u]=!0;break}}if(r[u]){const d=`length(data("${this.facet.name}"))`,c=u==="row"?n?{signal:`ceil(${d} / ${n})`}:1:n?{signal:`min(${d}, ${n})`}:{signal:d};a.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:c}]})}}const{row:o,column:s}=r;return(o||s)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,t)),a}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:a,row:r,facet:o}=this;if(a&&r&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const s=[].concat(i.x??[],i.y??[]),l=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:l}]})}for(const s of[Au,Tu])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,i));if(o){const s=this.assembleFacetHeaderData(i);s&&t.push(...s)}return t}}function G4(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function q3e(e,t){const n=fM(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=G4(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=G4(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return Ee(ZRe(t)),null}function j3e(e){const t={};return fw(e.filter,n=>{if(Oee(n)){let i=null;AM(n)?i=Fr(n.equal):DM(n)?i=Fr(n.lte):OM(n)?i=Fr(n.lt):CM(n)?i=Fr(n.gt):RM(n)?i=Fr(n.gte):IM(n)?i=n.range[0]:PM(n)&&(i=(n.oneOf??n.in)[0]),i&&(Zh(i)?t[n.field]="date":Lt(i)?t[n.field]="number":Ne(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function U3e(e){const t={};function n(i){ym(i)?t[i.field]="date":i.type==="quantitative"&&$Re(i.aggregate)?t[i.field]="number":fm(i.field)>1?i.field in t||(t[i.field]="flatten"):Kh(i)&&Ou(i.sort)&&fm(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((En(e)||Br(e))&&e.forEachFieldDef((i,a)=>{if(Ga(i))n(i);else{const r=Hh(a),o=e.fieldDef(r);n({...i,type:o.type})}}),En(e)){const{mark:i,markDef:a,encoding:r}=e;if(Yf(i)&&!e.encoding.order){const o=a.orient==="horizontal"?"y":"x",s=r[o];Te(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function B3e(e){const t={};if(En(e)&&e.component.selection)for(const n of ke(e.component.selection)){const i=e.component.selection[n];for(const a of i.project.items)!a.channel&&fm(a.field)>1&&(t[a.field]="flatten")}return t}class da extends Zt{clone(){return new da(null,nt(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${St(this._parse)}`}static makeExplicit(t,n,i){var o;let a={};const r=n.data;return!ff(r)&&((o=r==null?void 0:r.format)!=null&&o.parse)&&(a=r.format.parse),this.makeWithAncestors(t,a,{},i)}static makeWithAncestors(t,n,i,a){for(const s of ke(i)){const l=a.getWithExplicit(s);l.value!==void 0&&(l.explicit||l.value===i[s]||l.value==="derived"||i[s]==="flatten"?delete i[s]:Ee(XB(s,i[s],l.value)))}for(const s of ke(n)){const l=a.get(s);l!==void 0&&(l===n[s]?delete n[s]:Ee(XB(s,n[s],l)))}const r=new ad(n,i);a.copyAll(r);const o={};for(const s of ke(r.combine())){const l=r.get(s);l!==null&&(o[s]=l)}return ke(o).length===0||a.parseNothing?null:new da(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ke(this._parse)){const i=this._parse[n];fm(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(ke(this._parse))}dependentFields(){return new Set(ke(this._parse))}assembleTransforms(t=!1){return ke(this._parse).filter(n=>t?fm(n)>1:!0).map(n=>{const i=q3e(n,this._parse[n]);return i?{type:"formula",expr:i,as:Xm(n)}:null}).filter(n=>n!==null)}}class Of extends Zt{clone(){return new Of(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ss])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ss}}}class P0 extends Zt{clone(){return new P0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${St(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class F0 extends Zt{clone(){return new F0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${St(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Rh extends Zt{constructor(t){super(null),t??(t={name:"source"});let n;if(ff(t)||(n=t.format?{...yr(t.format,["parse"])}:{}),E_(t))this._data={values:t.values};else if(vm(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];xt(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else Gte(t)?this._data={values:[{type:"Sphere"}]}:(Vte(t)||ff(t))&&(this._data={});this._generator=ff(t),t.name&&(this._name=t.name),n&&!Qt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var H4=function(e,t,n,i,a){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?a.call(e,n):a?a.value=n:t.set(e,n),n},V3e=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},Zv;function w3(e){return e instanceof Rh||e instanceof P0||e instanceof F0}class k3{constructor(){Zv.set(this,void 0),H4(this,Zv,!1,"f")}setModified(){H4(this,Zv,!0,"f")}get modifiedFlag(){return V3e(this,Zv,"f")}}Zv=new WeakMap;class ep extends k3{getNodeDepths(t,n,i){i.set(t,n);for(const a of t.children)this.getNodeDepths(a,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((a,r)=>r[1]-a[1]);for(const a of i)this.run(a[0]);return this.modifiedFlag}}class $3 extends k3{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class W3e extends $3{mergeNodes(t,n){const i=n.shift();for(const a of n)t.removeChild(a),a.parent=i,a.remove()}run(t){const n=t.children.map(a=>a.hash()),i={};for(let a=0;a<n.length;a++)i[n[a]]===void 0?i[n[a]]=[t.children[a]]:i[n[a]].push(t.children[a]);for(const a of ke(i))i[a].length>1&&(this.setModified(),this.mergeNodes(t,i[a]))}}class G3e extends $3{constructor(t){super(),this.requiresSelectionId=t&&h3(t)}run(t){t instanceof Of&&(this.requiresSelectionId&&(w3(t.parent)||t.parent instanceof ms||t.parent instanceof da)||(this.setModified(),t.remove()))}}class H3e extends k3{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof vl&&(i=t.producedFields(),uM(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const a of t.children)this.run(a,new Set([...n,...i]))}}class Y3e extends $3{constructor(){super()}run(t){t instanceof vr&&!t.isRequired()&&(this.setModified(),t.remove())}}class X3e extends ep{run(t){if(!w3(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof da)if(t instanceof da)this.setModified(),t.merge(n);else{if(dM(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Z3e extends ep{run(t){const n=[...t.children],i=t.children.filter(a=>a instanceof da);if(t.numChildren()>1&&i.length>=1){const a={},r=new Set;for(const o of i){const s=o.parse;for(const l of ke(s))l in a?a[l]!==s[l]&&r.add(l):a[l]=s[l]}for(const o of r)delete a[o];if(!Qt(a)){this.setModified();const o=new da(t,a);for(const s of n){if(s instanceof da)for(const l of ke(a))delete s.parse[l];t.removeChild(s),s.parent=o,s instanceof da&&ke(s.parse).length===0&&s.remove()}}}}}class J3e extends ep{run(t){t instanceof vr||t.numChildren()>0||t instanceof ey||t instanceof Rh||(this.setModified(),t.remove())}}class K3e extends ep{run(t){const n=t.children.filter(a=>a instanceof vl),i=n.pop();for(const a of n)this.setModified(),i.merge(a)}}class Q3e extends ep{run(t){const n=t.children.filter(a=>a instanceof ms),i={};for(const a of n){const r=St(a.groupBy);r in i||(i[r]=[]),i[r].push(a)}for(const a of ke(i)){const r=i[a];if(r.length>1){const o=r.pop();for(const s of r)o.merge(s)&&(t.removeChild(s),s.parent=o,s.remove(),this.setModified())}}}}class eze extends ep{constructor(t){super(),this.model=t}run(t){const n=!(w3(t)||t instanceof Qm||t instanceof da||t instanceof Of),i=[],a=[];for(const r of t.children)r instanceof _l&&(n&&!dM(t.producedFields(),r.dependentFields())?i.push(r):a.push(r));if(i.length>0){const r=i.pop();for(const o of i)r.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof _l?t.merge(r,this.model.renameSignal.bind(this.model)):r.swapWithParent()}if(a.length>1){const r=a.pop();for(const o of a)r.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class tze extends ep{run(t){const n=[...t.children];if(!dm(n,o=>o instanceof vr)||t.numChildren()<=1)return;const a=[];let r;for(const o of n)if(o instanceof vr){let s=o;for(;s.numChildren()===1;){const[l]=s.children;if(l instanceof vr)s=l;else break}a.push(...s.children),r?(t.removeChild(o),o.parent=r.parent,r.parent.removeChild(r),r.parent=s,this.setModified()):r=s}else a.push(o);if(a.length){this.setModified();for(const o of a)o.parent.removeChild(o),o.parent=r}}}class tp extends Zt{clone(){return new tp(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ul(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Ie(t)}hash(){return`JoinAggregateTransform ${St(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const r of this.transform.joinaggregate)n.push(r.op),i.push(this.getDefaultName(r)),t.push(r.field===void 0?null:r.field);const a=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...a!==void 0?{groupby:a}:{}}}}class km extends Zt{clone(){return new km(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:a,markDef:r}=n,{marks:o,scales:s}=i;if(o==="include-invalid-values"&&s==="include-invalid-values")return null;const l=n.reduceFieldDef((u,d,c)=>{const g=jl(c)&&n.getScaleComponent(c);if(g){const v=g.get("type"),{aggregate:b}=d,x=jM({scaleChannel:c,markDef:r,config:a,scaleType:v,isCountAggregate:OE(b)});x!=="show"&&x!=="always-valid"&&(u[d.field]=d)}return u},{});return ke(l).length?new km(t,l):null}dependentFields(){return new Set(ke(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${St(this.filter)}`}assemble(){const t=ke(this.filter).reduce((n,i)=>{const a=this.filter[i],r=Ie(a,{expr:"datum"});return a!==null&&(a.type==="temporal"?n.push(`(isDate(${r}) || (${MR(r)}))`):a.type==="quantitative"&&n.push(MR(r))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function MR(e){return`isValid(${e}) && isFinite(+${e})`}function nze(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,a=Ie(i);return a&&t.push(a),t},[])}function ize(e){return ye(e)&&e.every(t=>Ne(t))&&e.length>1}class Cu extends Zt{clone(){return new Cu(null,nt(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:a,as:r,offset:o="zero"}=n,s=[],l=[];if(n.sort!==void 0)for(const c of n.sort)s.push(c.field),l.push(Gn(c.order,"ascending"));const u={field:s,order:l};let d;return ize(r)?d=r:Ne(r)?d=[r,`${r}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new Cu(t,{dimensionFieldDefs:[],stackField:i,groupby:a,offset:o,sort:u,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:a}=n;if(!i)return null;const{groupbyChannels:r,fieldChannel:o,offset:s,impute:l}=i,u=r.map(v=>{const b=a[v];return Es(b)}).filter(v=>!!v),d=nze(n),c=n.encoding.order;let g;if(ye(c)||Te(c))g=uee(c);else{const v=Qee(c)?c.sort:o==="y"?"descending":"ascending";g=d.reduce((b,x)=>(b.field.includes(x)||(b.field.push(x),b.order.push(v)),b),{field:[],order:[]})}return new Cu(t,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:d,sort:g,offset:s,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${St(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(a=>a.bin?n?[Ie(a,{binSuffix:"mid"})]:[Ie(a,{}),Ie(a,{binSuffix:"end"})]:[Ie(a)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:a,stackby:r,sort:o,offset:s,impute:l,as:u}=this._stack;if(l)for(const d of i){const{bandPosition:c=.5,bin:g}=d;if(g){const v=Ie(d,{expr:"datum"}),b=Ie(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${MR(v)} ? ${c}*${v}+${1-c}*${b} : ${v}`,as:Ie(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:a,groupby:[...r,...n],key:Ie(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:a,sort:o,as:u,offset:s}),t}}class ty extends Zt{clone(){return new ty(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ul(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Ie(t)}hash(){return`WindowTransform ${St(this.transform)}`}assemble(){const t=[],n=[],i=[],a=[];for(const c of this.transform.window)n.push(c.op),i.push(this.getDefaultName(c)),a.push(c.param===void 0?null:c.param),t.push(c.field===void 0?null:c.field);const r=this.transform.frame,o=this.transform.groupby;if(r&&r[0]===null&&r[1]===null&&n.every(c=>_M(c)))return{type:"joinaggregate",as:i,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const s=[],l=[];if(this.transform.sort!==void 0)for(const c of this.transform.sort)s.push(c.field),l.push(c.order??"ascending");const u={field:s,order:l},d=this.transform.ignorePeers;return{type:"window",params:a,as:i,ops:n,fields:t,sort:u,...d!==void 0?{ignorePeers:d}:{},...o!==void 0?{groupby:o}:{},...r!==void 0?{frame:r}:{}}}}function aze(e){function t(n){if(!(n instanceof ey)){const i=n.clone();if(i instanceof vr){const a=qR+i.getSource();i.setSource(a),e.model.component.data.outputNodes[a]=i}else(i instanceof ms||i instanceof Cu||i instanceof ty||i instanceof tp)&&i.addDimensions(e.fields);for(const a of n.children.flatMap(t))a.parent=i;return[i]}return n.children.flatMap(t)}return t}function zR(e){if(e instanceof ey)if(e.numChildren()===1&&!(e.children[0]instanceof vr)){const t=e.children[0];(t instanceof ms||t instanceof Cu||t instanceof ty||t instanceof tp)&&t.addDimensions(e.fields),t.swapWithParent(),zR(e)}else{const t=e.model.component.data.main;Xne(t);const n=aze(e),i=e.children.map(n).flat();for(const a of i)a.parent=t}else e.children.map(zR)}function Xne(e){if(e instanceof vr&&e.type===An.Main&&e.numChildren()===1){const t=e.children[0];t instanceof ey||(t.swapWithParent(),Xne(e))}}const qR="scale_",u1=5;function jR(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!jR(t.children))return!1}return!0}function Yo(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function Y4(e,t,n){let i=e.sources,a=!1;return a=Yo(new Y3e,i)||a,a=Yo(new G3e(t),i)||a,i=i.filter(r=>r.numChildren()>0),a=Yo(new J3e,i)||a,i=i.filter(r=>r.numChildren()>0),n||(a=Yo(new X3e,i)||a,a=Yo(new eze(t),i)||a,a=Yo(new H3e,i)||a,a=Yo(new Z3e,i)||a,a=Yo(new Q3e,i)||a,a=Yo(new K3e,i)||a,a=Yo(new W3e,i)||a,a=Yo(new tze,i)||a),e.sources=i,a}function rze(e,t){jR(e.sources);let n=0,i=0;for(let a=0;a<u1&&Y4(e,t,!0);a++)n++;e.sources.map(zR);for(let a=0;a<u1&&Y4(e,t,!1);a++)i++;jR(e.sources),Math.max(n,i)===u1&&Ee(`Maximum optimization runs(${u1}) reached.`)}class yi{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new yi(()=>t(n))}}function Zne(e){En(e)?oze(e):sze(e)}function oze(e){const t=e.component.scales;for(const n of ke(t)){const i=uze(e,n);if(t[n].setWithExplicit("domains",i),fze(e,n),e.component.data.isFaceted){let r=e;for(;!Br(r)&&r.parent;)r=r.parent;if(r.component.resolve.scale[n]==="shared")for(const s of i.value)xu(s)&&(s.data=qR+s.data.replace(qR,""))}}}function sze(e){for(const n of e.children)Zne(n);const t=e.component.scales;for(const n of ke(t)){let i,a=null;for(const r of e.children){const o=r.component.scales[n];if(o){i===void 0?i=o.getWithExplicit("domains"):i=Af(i,o.getWithExplicit("domains"),"domains","scale",UR);const s=o.get("selectionExtent");a&&s&&a.param!==s.param&&Ee(BRe),a=s}}t[n].setWithExplicit("domains",i),a&&t[n].set("selectionExtent",a,!0)}}function lze(e,t,n,i){if(e==="unaggregated"){const{valid:a,reason:r}=X4(t,n);if(!a){Ee(r);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:a}=X4(t,n);if(a)return"unaggregated"}return e}function uze(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,a=lze(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return a!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:a}),t==="x"&&oi(i.x2)?oi(i.x)?Af(Sd(n,a,e,"x"),Sd(n,a,e,"x2"),"domain","scale",UR):Sd(n,a,e,"x2"):t==="y"&&oi(i.y2)?oi(i.y)?Af(Sd(n,a,e,"y"),Sd(n,a,e,"y2"),"domain","scale",UR):Sd(n,a,e,"y2"):Sd(n,a,e,t)}function dze(e,t,n){return e.map(i=>({signal:`{data: ${UE(i,{timeUnit:n,type:t})}}`}))}function VA(e,t,n){var a;const i=(a=Si(n))==null?void 0:a.unit;return t==="temporal"||i?dze(e,t,i):[e]}function Sd(e,t,n,i){const{encoding:a,markDef:r,mark:o,config:s,stack:l}=n,u=oi(a[i]),{type:d}=u,c=u.timeUnit,g=HNe({invalid:Al("invalid",r,s),isPath:Yf(o)});if(gPe(t)){const x=Sd(e,void 0,n,i),k=VA(t.unionWith,d,c);return el([...k,...x.value])}else{if(We(t))return el([t]);if(t&&t!=="unaggregated"&&!Nee(t))return el(VA(t,d,c))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return Dr([[0,1]]);const x=n.requestDataName(g);return Dr([{data:x,field:n.vgField(i,{suffix:"start"})},{data:x,field:n.vgField(i,{suffix:"end"})}])}const v=jl(i)&&Te(u)?cze(n,i,e):void 0;if(Ul(u)){const x=VA([u.datum],d,c);return Dr(x)}const b=u;if(t==="unaggregated"){const{field:x}=u;return Dr([{data:n.requestDataName(g),field:Ie({field:x,aggregate:"min"})},{data:n.requestDataName(g),field:Ie({field:x,aggregate:"max"})}])}else if(ln(b.bin)){if(Ti(e))return Dr(e==="bin-ordinal"?[]:[{data:w_(v)?n.requestDataName(g):n.requestDataName(An.Raw),field:n.vgField(i,A0(b,i)?{binSuffix:"range"}:{}),sort:v===!0||!Fe(v)?{field:n.vgField(i,{}),op:"min"}:v}]);{const{bin:x}=b;if(ln(x)){const k=x3(n,b.field,x);return Dr([new yi(()=>{const w=n.getSignalName(k);return`[${w}.start, ${w}.stop]`})])}else return Dr([{data:n.requestDataName(g),field:n.vgField(i,{})}])}}else if(b.timeUnit&&xt(["time","utc"],e)){const x=a[ql(i)];if(Kee(b,x,r,s)){const k=n.requestDataName(g),w=Tf({fieldDef:b,fieldDef2:x,markDef:r,config:s}),E=$_(o)&&w!==.5&&Hn(i);return Dr([{data:k,field:n.vgField(i,E?{suffix:YE}:{})},{data:k,field:n.vgField(i,{suffix:E?XE:"end"})}])}}return Dr(v?[{data:w_(v)?n.requestDataName(g):n.requestDataName(An.Raw),field:n.vgField(i),sort:v}]:[{data:n.requestDataName(g),field:n.vgField(i)}])}function WA(e,t){const{op:n,field:i,order:a}=e;return{op:n??(t?"sum":ME),...i?{field:No(i)}:{},...a?{order:a}:{}}}function fze(e,t){var s;const n=e.component.scales[t],i=e.specifiedScales[t].domain,a=(s=e.fieldDef(t))==null?void 0:s.bin,r=Nee(i)?i:void 0,o=Yh(a)&&DE(a.extent)?a.extent:void 0;(r||o)&&n.set("selectionExtent",r??o,!0)}function cze(e,t,n){if(!Ti(n))return;const i=e.fieldDef(t),a=i.sort;if(Zee(a))return{op:"min",field:xm(i,t),order:"ascending"};const{stack:r}=e,o=r?new Set([...r.groupbyFields,...r.stackBy.map(s=>s.fieldDef.field)]):void 0;if(Ou(a)){const s=r&&!o.has(a.field);return WA(a,s)}else if(HPe(a)){const{encoding:s,order:l}=a,u=e.fieldDef(s),{aggregate:d,field:c}=u,g=r&&!o.has(c);if(Vu(d)||Hf(d))return WA({field:Ie(u),order:l},g);if(_M(d)||!d)return WA({op:d,field:c,order:l},g)}else{if(a==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(xt(["ascending",void 0],a))return!0}}function X4(e,t){const{aggregate:n,type:i}=e;return n?Ne(n)&&!SRe.has(n)?{valid:!1,reason:vIe(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:bIe(e)}:{valid:!0}:{valid:!1,reason:yIe(e)}}function UR(e,t,n,i){return e.explicit&&t.explicit&&Ee($Ie(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function hze(e){const t=ul(e.map(o=>{if(xu(o)){const{sort:s,...l}=o;return l}return o}),St),n=ul(e.map(o=>{if(xu(o)){const s=o.sort;return s!==void 0&&!w_(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(o=>o!==void 0),St);if(t.length===0)return;if(t.length===1){const o=e[0];if(xu(o)&&n.length>0){let s=n[0];if(n.length>1){Ee(JB);const l=n.filter(u=>Fe(u)&&"op"in u&&u.op!=="min");n.every(u=>Fe(u)&&"op"in u)&&l.length===1?s=l[0]:s=!0}else if(Fe(s)&&"field"in s){const l=s.field;o.field===l&&(s=s.order?{order:s.order}:!0)}return{...o,sort:s}}return o}const i=ul(n.map(o=>w_(o)||!("op"in o)||Ne(o.op)&&Me(wRe,o.op)?o:(Ee(SIe(o)),!0)),St);let a;i.length===1?a=i[0]:i.length>1&&(Ee(JB),a=!0);const r=ul(e.map(o=>xu(o)?o.data:null),o=>o);return r.length===1&&r[0]!==null?{data:r[0],fields:t.map(s=>s.field),...a?{sort:a}:{}}:{fields:t,...a?{sort:a}:{}}}function E3(e){if(xu(e)&&Ne(e.field))return e.field;if(TRe(e)){let t;for(const n of e.fields)if(xu(n)&&Ne(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ee(TIe),t}return Ee(AIe),t}else if(ARe(e)){Ee(OIe);const t=e.fields[0];return Ne(t)?t:void 0}}function aS(e,t){const i=e.component.scales[t].get("domains").map(a=>(xu(a)&&(a.data=e.lookupDataSource(a.data)),a));return hze(i)}function Jne(e){return ny(e)||S3(e)?e.children.reduce((t,n)=>t.concat(Jne(n)),Z4(e)):Z4(e)}function Z4(e){return ke(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const a=i.combine(),{name:r,type:o,selectionExtent:s,domains:l,range:u,reverse:d,...c}=a,g=pze(a.range,r,n,e),v=aS(e,n),b=s?aLe(e,s,i,v):null;return t.push({name:r,type:o,...v?{domain:v}:{},...b?{domainRaw:b}:{},range:g,...d!==void 0?{reverse:d}:{},...c}),t},[])}function pze(e,t,n,i){if(Hn(n)){if(Xh(e))return{step:{signal:`${t}_step`}}}else if(Fe(e)&&xu(e))return{...e,data:i.lookupDataSource(e.data)};return e}class Kne extends ad{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(xt([zi.LOG,zi.TIME,zi.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&xt([zi.LINEAR,zi.SQRT,zi.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let a=!1,r=!1,o=!1;for(const s of i){if(ye(s)){const l=s[0],u=s[s.length-1];if(Lt(l)&&Lt(u))if(l<=0&&u>=0){a=!0;continue}else{r=!0;continue}}o=!0}if(a)return"definitely";if(r&&!o)return"definitely-not"}return"maybe"}}const gze=["range","scheme"];function mze(e){const t=e.component.scales;for(const n of bM){const i=t[n];if(!i)continue;const a=yze(n,e);i.setWithExplicit("range",a)}}function J4(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:i,field:a}=n,r=$r(t),o=e.getName(r);if(Fe(i)&&i.binned&&i.step!==void 0)return new yi(()=>{const s=e.scaleName(t),l=`(domain("${s}")[1] - domain("${s}")[0]) / ${i.step}`;return`${e.getSignalName(o)} / (${l})`});if(ln(i)){const s=x3(e,a,i);return new yi(()=>{const l=e.getSignalName(s),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(o)} / (${u})`})}}}function yze(e,t){const n=t.specifiedScales[e],{size:i}=t,r=t.getScaleComponent(e).get("type");for(const c of gze)if(n[c]!==void 0){const g=_R(r,c),v=Lee(e,c);if(!g)Ee(mee(r,c,e));else if(v)Ee(v);else switch(c){case"range":{const b=n.range;if(ye(b)){if(Hn(e))return el(b.map(x=>{if(x==="width"||x==="height"){const k=t.getName(x),w=t.getSignalName.bind(t);return yi.fromName(w,k)}return x}))}else if(Fe(b))return el({data:t.requestDataName(An.Main),field:b.field,sort:{op:"min",field:t.vgField(e)}});return el(b)}case"scheme":return el(vze(n[c]))}}const o=e===_n||e==="xOffset"?"width":"height",s=i[o];if(Dl(s)){if(Hn(e))if(Ti(r)){const c=eie(s,t,e);if(c)return el({step:c})}else Ee(yee(o));else if(x0(e)){const c=e===jf?"x":"y";if(t.getScaleComponent(c).get("type")==="band"){const b=tie(s,r);if(b)return el(b)}}}const{rangeMin:l,rangeMax:u}=n,d=bze(e,t);return(l!==void 0||u!==void 0)&&_R(r,"rangeMin")&&ye(d)&&d.length===2?el([l??d[0],u??d[1]]):Dr(d)}function vze(e){return pPe(e)?{scheme:e.name,...yr(e,["name"])}:{scheme:e}}function Qne(e,t,n,{center:i}={}){const a=$r(e),r=t.getName(a),o=t.getSignalName.bind(t);return e===Oi&&ks(n)?i?[yi.fromName(s=>`${o(s)}/2`,r),yi.fromName(s=>`-${o(s)}/2`,r)]:[yi.fromName(o,r),0]:i?[yi.fromName(s=>`-${o(s)}/2`,r),yi.fromName(s=>`${o(s)}/2`,r)]:[0,yi.fromName(o,r)]}function bze(e,t){const{size:n,config:i,mark:a,encoding:r}=t,{type:o}=oi(r[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:d}=t.specifiedScales[e];switch(e){case _n:case Oi:{if(xt(["point","band"],l)){const c=nie(e,n,i.view);if(Dl(c))return{step:eie(c,t,e)}}return Qne(e,t,l)}case jf:case Zm:return _ze(e,t,l);case ed:{const c=kze(a,i),g=$ze(a,n,t,i);return pm(l)?wze(c,g,xze(l,i,u,e)):[c,g]}case qo:return[0,Math.PI*2];case Gh:return[0,360];case Rs:return[0,new yi(()=>{const c=t.getSignalName(Br(t.parent)?"child_width":"width"),g=t.getSignalName(Br(t.parent)?"child_height":"height");return`min(${c},${g})/2`})];case Uf:return{step:1e3/i.scale.framesPerSecond};case Wf:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Gf:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case kr:return"symbol";case wr:case Ml:case zl:return l==="ordinal"?o==="nominal"?"category":"ordinal":d!==void 0?"diverging":a==="rect"||a==="geoshape"?"heatmap":"ramp";case td:case Bf:case Vf:return[i.scale.minOpacity,i.scale.maxOpacity]}}function eie(e,t,n){const{encoding:i}=t,a=t.getScaleComponent(n),r=gM(n),o=i[r];if(Dte({step:e,offsetIsDiscrete:rt(o)&&Cee(o.type)})==="offset"&&dte(i,r)){const l=t.getScaleComponent(r);let d=`domain('${t.scaleName(r)}').length`;if(l.get("type")==="band"){const g=l.get("paddingInner")??l.get("padding")??0,v=l.get("paddingOuter")??l.get("padding")??0;d=`bandspace(${d}, ${g}, ${v})`}const c=a.get("paddingInner")??a.get("padding");return{signal:`${e.step} * ${d} / (1-${RRe(c)})`}}else return e.step}function tie(e,t){if(Dte({step:e,offsetIsDiscrete:Ti(t)})==="offset")return{step:e.step}}function _ze(e,t,n){const i=e===jf?"x":"y",a=t.getScaleComponent(i);if(!a)return Qne(i,t,n,{center:!0});const r=a.get("type"),o=t.scaleName(i),{markDef:s,config:l}=t;if(r==="band"){const u=nie(i,t.size,t.config.view);if(Dl(u)){const d=tie(u,n);if(d)return d}return[0,{signal:`bandwidth('${o}')`}]}else{const u=t.encoding[i];if(Te(u)&&u.timeUnit){const d=Tee(u.timeUnit,b=>`scale('${o}', ${b})`),c=t.config.scale.bandWithNestedOffsetPaddingInner,g=Tf({fieldDef:u,markDef:s,config:l})-.5,v=g!==0?` + ${g}`:"";if(c){const b=We(c)?`${c.signal}/2`+v:`${c/2+g}`,x=We(c)?`(1 - ${c.signal}/2)`+v:`${1-c/2+g}`;return[{signal:`${b} * (${d})`},{signal:`${x} * (${d})`}]}return[0,{signal:d}]}return MQ(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function nie(e,t,n){const i=e===_n?"width":"height",a=t[i];return a||E$(n,i)}function xze(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ye(n)?n.length+1:(Ee(MIe(i)),3)}}function wze(e,t,n){const i=()=>{const a=fs(t),r=fs(e),o=`(${a} - ${r}) / (${n} - 1)`;return`sequence(${r}, ${a} + ${o}, ${o})`};return We(t)?new yi(i):{signal:i()}}function kze(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(CE("size",e))}const K4=.95;function $ze(e,t,n,i){const a={x:J4(n,"x"),y:J4(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const r=Q4(t,a,i.view);return Lt(r)?r-1:new yi(()=>`${r.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const r=Q4(t,a,i.view);return Lt(r)?Math.pow(K4*r,2):new yi(()=>`pow(${K4} * ${r.signal}, 2)`)}}throw new Error(CE("size",e))}function Q4(e,t,n){const i=Dl(e.width)?e.width.step:$R(n,"width"),a=Dl(e.height)?e.height.step:$R(n,"height");return t.x||t.y?new yi(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:a].join(", ")})`):Math.min(i,a)}function iie(e,t){En(e)?Eze(e,t):rie(e,t)}function Eze(e,t){const n=e.component.scales,{config:i,encoding:a,markDef:r,specifiedScales:o}=e;for(const s of ke(n)){const l=o[s],u=n[s],d=e.getScaleComponent(s),c=oi(a[s]),g=l[t],v=d.get("type"),b=d.get("padding"),x=d.get("paddingInner"),k=_R(v,t),w=Lee(s,t);if(g!==void 0&&(k?w&&Ee(w):Ee(mee(v,t,s))),k&&w===void 0)if(g!==void 0){const E=c.timeUnit,T=c.type;switch(t){case"domainMax":case"domainMin":Zh(l[t])||T==="temporal"||E?u.set(t,{signal:UE(l[t],{type:T,timeUnit:E})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const E=$e(e7,t)?e7[t]({model:e,channel:s,fieldOrDatumDef:c,scaleType:v,scalePadding:b,scalePaddingInner:x,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:r,config:i,hasNestedOffsetScale:fte(a,s),hasSecondaryRangeChannel:!!a[ql(s)]}):i.scale[t];E!==void 0&&u.set(t,E,!1)}}}const e7={bins:({model:e,fieldOrDatumDef:t})=>Te(t)?Sze(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Tze(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:a,fieldOrDatumDef:r})=>Aze(e,t,n,i,a,r),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:a})=>Oze(e,t,a.scale,n,i,a.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:a,hasNestedOffsetScale:r})=>Dze(e,t,n.type,i,a.scale,r),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:a,hasNestedOffsetScale:r})=>Cze(e,t,n,i,a.scale,r),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const a=Te(e)?e.sort:void 0;return Rze(t,a,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:a,config:r,hasSecondaryRangeChannel:o})=>Ize(e,t,n,i,a,r.scale,o)};function aie(e){En(e)?mze(e):rie(e,"range")}function rie(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?aie(i):iie(i,t);for(const i of ke(n)){let a;for(const r of e.children){const o=r.component.scales[i];if(o){const s=o.getWithExplicit(t);a=Af(a,s,t,"scale",Bte((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[i].setWithExplicit(t,a)}}function Sze(e,t){const n=t.bin;if(ln(n)){const i=x3(e,t.field,n);return new yi(()=>e.getSignalName(i))}else if(Ni(n)&&Yh(n)&&n.step!==void 0)return{step:n.step}}function Tze(e,t){if(xt([wr,Ml,zl],e)&&t!=="nominal")return"hcl"}function Aze(e,t,n,i,a,r){var o;if(!((o=Es(r))!=null&&o.bin||ye(n)||a!=null||i!=null||xt([zi.TIME,zi.UTC],e)))return Hn(t)?!0:void 0}function Oze(e,t,n,i,a,r){if(Hn(e)){if(dl(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:s}=a;if(o==="bar"&&!(Te(i)&&(i.bin||i.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return r.continuousBandSize}if(t===zi.POINT)return n.pointPadding}}function Dze(e,t,n,i,a,r=!1){if(e===void 0){if(Hn(t)){const{bandPaddingInner:o,barBandPaddingInner:s,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:d}=a;return r?d:Gn(o,n==="bar"?s:n==="tick"?u:l)}else if(x0(t)&&i===zi.BAND)return a.offsetBandPaddingInner}}function Cze(e,t,n,i,a,r=!1){if(e===void 0){if(Hn(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:s}=a;if(r)return s;if(n===zi.BAND)return Gn(o,We(i)?{signal:`${i.signal}/2`}:i/2)}else if(x0(t)){if(n===zi.POINT)return .5;if(n===zi.BAND)return a.offsetBandPaddingOuter}}}function Rze(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return ks(e)&&t==="descending"?We(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(ks(e)&&t==="descending")return!0}function Ize(e,t,n,i,a,r,o){if(!!n&&n!=="unaggregated"&&ks(a)){if(ye(n)){const l=n[0],u=n[n.length-1];if(Lt(l)&&l<=0&&Lt(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!pm(a))return!0;if(!(Te(t)&&t.bin)&&xt([...nd,...hRe],e)){const{orient:l,type:u}=i;return xt(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:xt(["bar","area"],u)&&!o?!0:r==null?void 0:r.zero}return!1}function Pze(e,t,n,i,a=!1){const r=Fze(t,n,i,a),{type:o}=e;return jl(t)?o!==void 0?xPe(t,o)?Te(n)&&!_Pe(o,n.type)?(Ee(wIe(o,r)),r):o:(Ee(xIe(t,o,r)),r):r:null}function Fze(e,t,n,i){var a;switch(t.type){case"nominal":case"ordinal":{if($g(e)||DA(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ee(CA(e,"ordinal")),"ordinal";if(OA(e))return"band";if(Hn(e)||x0(e)){if(xt(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in vM)return"band";const r=n[$r(e)];return Sh(r)||mm(t)&&((a=t.axis)!=null&&a.tickBand)?"band":"point"}case"temporal":return $g(e)?"time":DA(e)==="discrete"?(Ee(CA(e,"temporal")),"ordinal"):Te(t)&&t.timeUnit&&Si(t.timeUnit).utc?"utc":OA(e)?"band":"time";case"quantitative":return $g(e)?Te(t)&&ln(t.bin)?"bin-ordinal":"linear":DA(e)==="discrete"?(Ee(CA(e,"quantitative")),"ordinal"):OA(e)?"band":"linear";case"geojson":return}throw new Error(pee(t.type))}function Nze(e,{ignoreRange:t}={}){oie(e),Zne(e);for(const n of bPe)iie(e,n);t||aie(e)}function oie(e){En(e)?e.component.scales=Lze(e):e.component.scales=zze(e)}function Lze(e){const{encoding:t,mark:n,markDef:i}=e,a={};for(const r of bM){const o=oi(t[r]);if(o&&n===qee&&r===kr&&o.type===Jm)continue;let s=o&&o.scale;if(o&&s!==null&&s!==!1){s??(s={});const l=fte(t,r),u=Pze(s,r,o,i,l);a[r]=new Kne(e.scaleName(`${r}`,!0),{value:u,explicit:s.type===u})}}return a}const Mze=Bte((e,t)=>QB(e)-QB(t));function zze(e){var t;const n=e.component.scales={},i={},a=e.component.resolve;for(const r of e.children){oie(r);for(const o of ke(r.component.scales))if((t=a.scale)[o]??(t[o]=Lne(o,e)),a.scale[o]==="shared"){const s=i[o],l=r.component.scales[o].getWithExplicit("type");s?uPe(s.value,l.value)?i[o]=Af(s,l,"type","scale",Mze):(a.scale[o]="independent",delete i[o]):i[o]=l}}for(const r of ke(i)){const o=e.scaleName(r,!0),s=i[r];n[r]=new Kne(o,s);for(const l of e.children){const u=l.component.scales[r];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return n}class GA{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function En(e){return(e==null?void 0:e.type)==="unit"}function Br(e){return(e==null?void 0:e.type)==="facet"}function S3(e){return(e==null?void 0:e.type)==="concat"}function ny(e){return(e==null?void 0:e.type)==="layer"}class T3{constructor(t,n,i,a,r,o,s){this.type=n,this.parent=i,this.config=r,this.parent=i,this.config=r,this.view=Mi(s),this.name=t.name??a,this.title=Pd(t.title)?{text:t.title}:t.title?Mi(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new GA,this.projectionNameMap=i?i.projectionNameMap:new GA,this.signalNameMap=i?i.signalNameMap:new GA,this.data=t.data,this.description=t.description,this.transforms=FNe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:zFe(t,n,r),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:zE(t)||(i==null?void 0:i.component.data.isFaceted)&&t.data===void 0},layoutSize:new ad,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?nt(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Nze(this)}parseProjection(){Hne(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Une(this)}assembleEncodeFromView(t){const{style:n,...i}=t,a={};for(const r of ke(i)){const o=i[r];o!==void 0&&(a[r]=cn(o))}return a}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=cn(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Qt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:a}=this,r=r3e(i.layoutHeaders,a);return{padding:t,...this.assembleDefaultLayout(),...n,...r?{titleBand:r}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Eo)t[i].title&&n.push(QMe(this,i));for(const i of y3)n=n.concat(e3e(this,i));return n}assembleAxes(){return qMe(this.component.axes,this.config)}assembleLegends(){return Vne(this)}assembleProjections(){return A3e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...ree(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return xt(["unit","layer"],this.type)?xt(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),Qt(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const a=!this.parent||Br(this.parent)?Jne(this):[];a.length>0&&(n.scales=a);const r=this.assembleAxes();r.length>0&&(n.axes=r);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return bn((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(An[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(Br(this.parent)){const n=Fne(t),i=AE(n),a=this.component.scales[i];if(a&&!a.merged){const r=a.get("type"),o=a.get("range");if(Ti(r)&&Xh(o)){const s=a.get("name"),l=aS(this,i),u=E3(l);if(u){const d=Ie({aggregate:"distinct",field:u},{expr:"datum"});return{signal:Pne(s,a,d)}}else return Ee(wM(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(JQ(t)&&jl(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(LRe(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class sie extends T3{vgField(t,n={}){const i=this.fieldDef(t);if(i)return Ie(i,n)}reduceFieldDef(t,n){return pFe(this.getMapping(),(i,a,r)=>{const o=Es(a);return o?t(i,o,r):i},n)}forEachFieldDef(t,n){ZM(this.getMapping(),(i,a)=>{const r=Es(i);r&&t(r,a)},n)}}class rS extends Zt{clone(){return new rS(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nt(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const a=this.transform.resolve??"shared";this.transform.resolve=a}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${St(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class oS extends Zt{clone(){return new oS(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nt(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${St(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class sS extends Zt{clone(){return new sS(this.parent,nt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nt(n);const{flatten:i,as:a=[]}=this.transform;this.transform.as=i.map((r,o)=>a[o]??r)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${St(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class lS extends Zt{clone(){return new lS(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nt(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${St(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Tg extends Zt{clone(){return new Tg(null,nt(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const a of[[Ps,Is],[Lo,Fs]]){const r=a.map(o=>{const s=oi(n.encoding[o]);return Te(s)?s.field:Ul(s)?{expr:`${s.datum}`}:$s(s)?{expr:`${s.value}`}:void 0});(r[0]||r[1])&&(t=new Tg(t,r,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(kr)){const a=n.typedFieldDef(kr);a.type===Jm&&(t=new Tg(t,null,a.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,a){super(t),this.fields=n,this.geojson=i,this.signal=a}dependentFields(){const t=(this.fields??[]).filter(Ne);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${St(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class A_ extends Zt{clone(){return new A_(null,this.projection,nt(this.fields),nt(this.as))}constructor(t,n,i,a){super(t),this.projection=n,this.fields=i,this.as=a}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Ps,Is],[Lo,Fs]]){const a=i.map(o=>{const s=oi(n.encoding[o]);return Te(s)?s.field:Ul(s)?{expr:`${s.datum}`}:$s(s)?{expr:`${s.value}`}:void 0}),r=i[0]===Lo?"2":"";(a[0]||a[1])&&(t=new A_(t,n.projectionName(),a,[n.getName(`x${r}`),n.getName(`y${r}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Ne))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${St(this.fields)} ${St(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class th extends Zt{clone(){return new th(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:a}=t;return{signal:`sequence(${[n,i,...a?[a]:[]].join(",")})`}}static makeFromTransform(t,n){return new th(t,n)}static makeFromEncoding(t,n){const i=n.encoding,a=i.x,r=i.y;if(Te(a)&&Te(r)){const o=a.impute?a:r.impute?r:void 0;if(o===void 0)return;const s=a.impute?r:r.impute?a:void 0,{method:l,value:u,frame:d,keyvals:c}=o.impute,g=pte(n.mark,i);return new th(t,{impute:o.field,key:s.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...d?{frame:d}:{},...c!==void 0?{keyvals:c}:{},...g.length?{groupby:g}:{}})}return null}hash(){return`Impute ${St(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:a,groupby:r,value:o,frame:s=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:mNe(i)?this.processSequence(i):i}:{},method:"value",...r?{groupby:r}:{},value:!a||a==="value"?o:null};if(a&&a!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[a],fields:[t],frame:s,ignorePeers:!1,...r?{groupby:r}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,d]}else return[l]}}class uS extends Zt{clone(){return new uS(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nt(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${St(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class O_ extends Zt{clone(){return new O_(null,nt(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,a){const r=n.component.data.sources,{from:o}=i;let s=null;if(yNe(o)){let l=die(o.data,r);l||(l=new Rh(o.data),r.push(l));const u=n.getName(`lookup_${a}`);s=new vr(l,u,An.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=s}else if(vNe(o)){const l=o.param;i={as:l,...i};let u;try{u=n.getSelectionComponent(bn(l),l)}catch{throw new Error(jRe(l))}if(s=u.materialized,!s)throw new Error(URe(l))}return new O_(t,i,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Le(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${St({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Le(this.transform.as)}:{}};else{let n=this.transform.as;Ne(n)||(Ee(QRe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class dS extends Zt{clone(){return new dS(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nt(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${St(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class fS extends Zt{clone(){return new fS(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nt(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${St(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class cS extends Zt{clone(){return new cS(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ul((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${St(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:a,op:r}=this.transform;return{type:"pivot",field:t,value:n,...a!==void 0?{limit:a}:{},...r!==void 0?{op:r}:{},...i!==void 0?{groupby:i}:{}}}}class hS extends Zt{clone(){return new hS(null,nt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${St(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function lie(e){let t=0;function n(i,a){if(i instanceof Rh&&!i.isGenerator&&!vm(i.data)&&(e.push(a),a={name:null,source:a.name,transform:[]}),i instanceof da&&(i.parent instanceof Rh&&!a.source?(a.format={...a.format,parse:i.assembleFormatParse()},a.transform.push(...i.assembleTransforms(!0))):a.transform.push(...i.assembleTransforms())),i instanceof ey){a.name||(a.name=`data_${t++}`),!a.source||a.transform.length>0?(e.push(a),i.data=a.name):i.data=a.source,e.push(...i.assemble());return}switch((i instanceof P0||i instanceof F0||i instanceof km||i instanceof Qm||i instanceof _m||i instanceof A_||i instanceof ms||i instanceof O_||i instanceof ty||i instanceof tp||i instanceof lS||i instanceof sS||i instanceof rS||i instanceof uS||i instanceof dS||i instanceof fS||i instanceof Of||i instanceof hS||i instanceof cS||i instanceof oS)&&a.transform.push(i.assemble()),(i instanceof _l||i instanceof vl||i instanceof th||i instanceof Cu||i instanceof Tg)&&a.transform.push(...i.assemble()),i instanceof vr&&(a.source&&a.transform.length===0?i.setSource(a.source):i.parent instanceof vr?i.setSource(a.name):(a.name||(a.name=`data_${t++}`),i.setSource(a.name),i.numChildren()===1&&(e.push(a),a={name:null,source:a.name,transform:[]}))),i.numChildren()){case 0:i instanceof vr&&(!a.source||a.transform.length>0)&&e.push(a);break;case 1:n(i.children[0],a);break;default:{a.name||(a.name=`data_${t++}`);let r=a.name;!a.source||a.transform.length>0?e.push(a):r=a.source;for(const o of i.children)n(o,{name:null,source:r,transform:[]});break}}}return n}function qze(e){const t=[],n=lie(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function jze(e,t){const n=[],i=lie(n);let a=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${a++}`);const s=o.assemble();i(o,s)}for(const o of n)o.transform.length===0&&delete o.transform;let r=0;for(const[o,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(r++,0,n.splice(o,1)[0]);for(const o of n)for(const s of o.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Uze(e){return e==="top"||e==="left"||We(e)?"header":"footer"}function Bze(e){for(const t of Eo)Vze(e,t);t7(e,"x"),t7(e,"y")}function Vze(e,t){var o;const{facet:n,config:i,child:a,component:r}=e;if(e.channelHasField(t)){const s=n[t],l=wm("title",null,i,t);let u=Eg(s,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});a.component.layoutHeaders[t].title&&(u=ye(u)?u.join(", "):u,u+=` / ${a.component.layoutHeaders[t].title}`,a.component.layoutHeaders[t].title=null);const d=wm("labelOrient",s.header,i,t),c=s.header!==null?Gn((o=s.header)==null?void 0:o.labels,i.header.labels,!0):!1,g=xt(["bottom","right"],d)?"footer":"header";r.layoutHeaders[t]={title:s.header!==null?u:null,facetFieldDef:s,[g]:t==="facet"?[]:[uie(e,t,c)]}}}function uie(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function t7(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:a}=e.component;if(a.axis[t]=_3(a,t),a.axis[t]==="shared"){const r=t==="x"?"column":"row",o=i[r];for(const s of n.component.axes[t]){const l=Uze(s.get("orient"));o[l]??(o[l]=[uie(e,r,!1)]);const u=Xv(s,"main",e.config,{header:!0});u&&o[l][0].axes.push(u),s.mainExtracted=!0}}}}function Wze(e){A3(e),D$(e,"width"),D$(e,"height")}function Gze(e){A3(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";D$(e,t),D$(e,n)}function A3(e){for(const t of e.children)t.parseLayoutSize()}function D$(e,t){const n=Fne(t),i=AE(n),a=e.component.resolve,r=e.component.layoutSize;let o;for(const s of e.children){const l=s.component.layoutSize.getWithExplicit(n),u=a.scale[i]??Lne(i,e);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=Af(o,l,n,"")}else o=l}if(o){for(const s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);r.setWithExplicit(t,o)}else r.setWithExplicit(t,{explicit:!1,value:void 0})}function Hze(e){const{size:t,component:n}=e;for(const i of nd){const a=$r(i);if(t[a]){const r=t[a];n.layoutSize.set(a,Dl(r)?"step":r,!0)}else{const r=Yze(e,a);n.layoutSize.set(a,r,!1)}}}function Yze(e,t){const n=t==="width"?"x":"y",i=e.config,a=e.getScaleComponent(n);if(a){const r=a.get("type"),o=a.get("range");if(Ti(r)){const s=E$(i.view,t);return Xh(o)||Dl(s)?"step":s}else return kR(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return kR(i.view,t);{const r=E$(i.view,t);return Dl(r)?r.step:r}}}function BR(e,t,n){return Ie(t,{suffix:`by_${Ie(e)}`,...n})}class Eb extends sie{constructor(t,n,i,a){super(t,"facet",n,i,a,t.resolve),this.child=I3(t.spec,this,this.getName("child"),void 0,a),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!E0(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ke(t),i={};for(const a of n){if(![Tu,Au].includes(a)){Ee(CE(a,"facet"));break}const r=t[a];if(r.field===void 0){Ee(vR(r,a));break}i[a]=this.initFacetFieldDef(r,a)}return i}initFacetFieldDef(t,n){const i=XM(t,n);return i.header?i.header=Mi(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return $e(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=pS(this),this.child.parseData()}parseLayoutSize(){A3(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>bl(t))&&$M(kM)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Bze(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Eo)for(const i of v3){const a=this.component.layoutHeaders[n],r=a[i],{facetFieldDef:o}=a;if(o){const s=wm("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(s)){const l=nS(n,s);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(r!=null&&r[0]){const s=n==="row"?"height":"width",l=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[l]??(t[l]={}),t[l][n]=.5),a.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let a="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(a="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:a}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Eb))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Eb?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ie(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof Eb){if(this.child.channelHasField("column")){const a=Ie(this.child.facet.column);t.push(a),n.push("distinct"),i.push(`distinct_${a}`)}}else for(const a of nd){const r=this.child.component.scales[a];if(r&&!r.merged){const o=r.get("type"),s=r.get("range");if(Ti(o)&&Xh(s)){const l=aS(this.child,a),u=E3(l);u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):Ee(wM(a))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:a}=this.facet,{fields:r,ops:o,as:s}=this.getCardinalityAggregateForChild(),l=[];for(const d of Eo){const c=this.facet[d];if(c){l.push(Ie(c));const{bin:g,sort:v}=c;if(ln(g)&&l.push(Ie(c,{binSuffix:"end"})),Ou(v)){const{field:b,op:x=ME}=v,k=BR(c,v);i&&a?(r.push(k),o.push("max"),s.push(k)):(r.push(b),o.push(x),s.push(k))}else if(ye(v)){const b=xm(c,d);r.push(b),o.push("max"),s.push(b)}}}const u=!!i&&!!a;return{name:t,data:n,groupby:l,...u||r.length>0?{aggregate:{...u?{cross:u}:{},...r.length?{fields:r,ops:o,as:s}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Ou(i.sort)?[BR(i,i.sort,{expr:"datum"})]:ye(i.sort)?[xm(i,t,{expr:"datum"})]:[Ie(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:a}=i;return[(Ou(a)?a.order:!ye(a)&&a)||"ascending"]}return[]}assembleLabelTitle(){var a;const{facet:t,config:n}=this;if(t.facet)return NR(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of y3)if(t[r]){const o=wm("labelOrient",(a=t[r])==null?void 0:a.header,n,r);if(i[r].includes(o))return NR(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=qze(n),a=t.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...r?{title:r}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Eo.map(l=>this.facetSortFields(l)).flat(),order:Eo.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...a?{encode:{update:a}}:{},...t.assembleGroup(eLe(this,[]))}]}getMapping(){return this.facet}}function Xze(e,t){const{row:n,column:i}=t;if(n&&i){let a=null;for(const r of[n,i])if(Ou(r.sort)){const{field:o,op:s=ME}=r.sort;e=a=new tp(e,{joinaggregate:[{op:s,field:o,as:BR(r,r.sort,{forAs:!0})}],groupby:[Ie(r)]})}return a}return null}function die(e,t){var n,i,a,r;for(const o of t){const s=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(i=s.format)==null?void 0:i.feature;if(l&&u)continue;const d=(a=e.format)==null?void 0:a.feature;if((d||u)&&d!==u)continue;const c=(r=s.format)==null?void 0:r.mesh;if(!((l||c)&&l!==c)){if(E_(e)&&E_(s)){if(Mr(e.values,s.values))return o}else if(vm(e)&&vm(s)){if(e.url===s.url)return o}else if(Vte(e)&&e.name===o.dataName)return o}}return null}function Zze(e,t){if(e.data||!e.parent){if(e.data===null){const i=new Rh({values:[]});return t.push(i),i}const n=die(e.data,t);if(n)return ff(e.data)||(n.data.format=zQ({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Rh(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Jze(e,t,n){let i=0;for(const a of t.transforms){let r,o;if(ANe(a))o=e=new _m(e,a),r="derived";else if(s3(a)){const s=j3e(a);o=e=da.makeWithAncestors(e,{},s,n)??e,e=new Qm(e,t,a.filter)}else if(zte(a))o=e=_l.makeFromTransform(e,a,t),r="number";else if(DNe(a))r="date",n.getWithExplicit(a.field).value===void 0&&(e=new da(e,{[a.field]:r}),n.set(a.field,r,!1)),o=e=vl.makeFromTransform(e,a);else if(CNe(a))o=e=ms.makeFromTransform(e,a),r="number",h3(t)&&(e=new Of(e));else if(Mte(a))o=e=O_.make(e,t,a,i++),r="derived";else if(ENe(a))o=e=new ty(e,a),r="number";else if(SNe(a))o=e=new tp(e,a),r="number";else if(RNe(a))o=e=Cu.makeFromTransform(e,a),r="derived";else if(INe(a))o=e=new lS(e,a),r="derived";else if(PNe(a))o=e=new oS(e,a),r="derived";else if(TNe(a))o=e=new sS(e,a),r="derived";else if(bNe(a))o=e=new cS(e,a),r="derived";else if($Ne(a))e=new hS(e,a);else if(ONe(a))o=e=th.makeFromTransform(e,a),r="derived";else if(_Ne(a))o=e=new rS(e,a),r="derived";else if(xNe(a))o=e=new dS(e,a),r="derived";else if(wNe(a))o=e=new fS(e,a),r="derived";else if(kNe(a))o=e=new uS(e,a),r="derived";else{Ee(KRe(a));continue}if(o&&r!==void 0)for(const s of o.producedFields()??[])n.set(s,r,!1)}return e}function pS(e){var k;let t=Zze(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,a=e.data,o=!(a&&(ff(a)||vm(a)||E_(a)))&&e.parent?e.parent.component.data.ancestorParse.clone():new GNe;ff(a)?(Wte(a)?t=new F0(t,a.sequence):l3(a)&&(t=new P0(t,a.graticule)),o.parseNothing=!0):((k=a==null?void 0:a.format)==null?void 0:k.parse)===null&&(o.parseNothing=!0),t=da.makeExplicit(t,e,o)??t,t=new Of(t);const s=e.parent&&ny(e.parent);(En(e)||Br(e))&&s&&(t=_l.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Jze(t,e,o));const l=B3e(e),u=U3e(e);t=da.makeWithAncestors(t,{},{...l,...u},o)??t,En(e)&&(t=Tg.parseAll(t,e),t=A_.parseAll(t,e)),(En(e)||Br(e))&&(s||(t=_l.makeFromEncoding(t,e)??t),t=vl.makeFromEncoding(t,e)??t,t=_m.parseAllForSortIndex(t,e));const d=t=d1(An.Raw,e,t);if(En(e)){const w=ms.makeFromEncoding(t,e);w&&(t=w,h3(e)&&(t=new Of(t))),t=th.makeFromEncoding(t,e)??t,t=Cu.makeFromEncoding(t,e)??t}let c,g;if(En(e)){const{markDef:w,mark:E,config:T}=e,O=Kt("invalid",w,T),{marks:D,scales:P}=g=Hte({invalid:O,isPath:Yf(E)});D!==P&&P==="include-invalid-values"&&(c=t=d1(An.PreFilterInvalid,e,t)),D==="exclude-invalid-values"&&(t=km.make(t,e,g)??t)}const v=t=d1(An.Main,e,t);let b;if(En(e)&&g){const{marks:w,scales:E}=g;w==="include-invalid-values"&&E==="exclude-invalid-values"&&(t=km.make(t,e,g)??t,b=t=d1(An.PostFilterInvalid,e,t))}En(e)&&MMe(e,v);let x=null;if(Br(e)){const w=e.getName("facet");t=Xze(t,e.facet)??t,x=new ey(t,e,w,v.getSource()),n[w]=x}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:v,facetRoot:x,ancestorParse:o,preFilterInvalid:c,postFilterInvalid:b}}function d1(e,t,n){const{outputNodes:i,outputNodeRefCounts:a}=t.component.data,r=t.getDataName(e),o=new vr(n,r,e,a);return i[r]=o,o}class Kze extends T3{constructor(t,n,i,a){var r,o,s,l;super(t,"concat",n,i,a,t.resolve),(((o=(r=t.resolve)==null?void 0:r.axis)==null?void 0:o.x)==="shared"||((l=(s=t.resolve)==null?void 0:s.axis)==null?void 0:l.y)==="shared")&&Ee(XRe),this.children=this.getChildren(t).map((u,d)=>I3(u,this,this.getName(`concat_${d}`),void 0,a))}parseData(){this.component.data=pS(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ke(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>bl(t))&&$M(kM)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return WE(t)?t.vconcat:r3(t)?t.hconcat:t.concat}parseLayoutSize(){Gze(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=b3(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),a=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...a?{encode:{update:a}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Qze(e){return e===!1||e===null}const e5e={disable:1,gridScale:1,scale:1,...lte,labelExpr:1,encode:1},fie=ke(e5e);class O3 extends ad{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new O3(nt(this.explicit),nt(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Qze(this.get(t))}hasOrientSignalRef(){return We(this.explicit.orient)}}function t5e(e,t,n){const{encoding:i,config:a}=e,r=oi(i[t])??oi(i[ql(t)]),o=e.axis(t)||{},{format:s,formatType:l}=o;if(Th(l))return{text:cs({fieldOrDatumDef:r,field:"datum.value",format:s,formatType:l,config:a}),...n};if(s===void 0&&l===void 0&&a.customFormatTypes){if(gm(r)==="quantitative"){if(mm(r)&&r.stack==="normalize"&&a.normalizedNumberFormatType)return{text:cs({fieldOrDatumDef:r,field:"datum.value",format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,config:a}),...n};if(a.numberFormatType)return{text:cs({fieldOrDatumDef:r,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}),...n}}if(gm(r)==="temporal"&&a.timeFormatType&&Te(r)&&!r.timeUnit)return{text:cs({fieldOrDatumDef:r,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a}),...n}}return n}function n5e(e){return nd.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[u5e(n,e)]),t),{})}const i5e={bottom:"top",top:"bottom",left:"right",right:"left"};function a5e(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const a of e.children){a.parseAxesAndHeaders();for(const r of ke(a.component.axes))n.axis[r]=_3(e.component.resolve,r),n.axis[r]==="shared"&&(t[r]=r5e(t[r],a.component.axes[r]),t[r]||(n.axis[r]="independent",delete t[r]))}for(const a of nd){for(const r of e.children)if(r.component.axes[a]){if(n.axis[a]==="independent"){t[a]=(t[a]??[]).concat(r.component.axes[a]);for(const o of r.component.axes[a]){const{value:s,explicit:l}=o.getWithExplicit("orient");if(!We(s)){if(i[s]>0&&!l){const u=i5e[s];i[s]>i[u]&&o.set("orient",u,!1)}i[s]++}}}delete r.component.axes[a]}if(n.axis[a]==="independent"&&t[a]&&t[a].length>1)for(const[r,o]of(t[a]||[]).entries())r>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function r5e(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const a=e[i],r=t[i];if(!!a!=!!r)return;if(a&&r){const o=a.getWithExplicit("orient"),s=r.getWithExplicit("orient");if(o.explicit&&s.explicit&&o.value!==s.value)return;e[i]=o5e(a,r)}}}else return t.map(n=>n.clone());return e}function o5e(e,t){for(const n of fie){const i=Af(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(a,r)=>{switch(n){case"title":return cee(a,r);case"gridScale":return{explicit:a.explicit,value:Gn(a.value,r.value)}}return HE(a,r,n,"axis")});e.setWithExplicit(n,i)}return e}function s5e(e,t,n,i,a){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(We(n.labelAngle)?n.labelAngle:k_(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Dne(i,a))return!0}return e===n[t]}const l5e=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function u5e(e,t){var w,E;let n=t.axis(e);const i=new O3,a=oi(t.encoding[e]),{mark:r,config:o}=t,s=(n==null?void 0:n.orient)||((w=o[e==="x"?"axisX":"axisY"])==null?void 0:w.orient)||((E=o.axis)==null?void 0:E.orient)||YMe(e),l=t.getScaleComponent(e).get("type"),u=jMe(e,l,s,t.config),d=n!==void 0?!n:PR("disable",o.style,n==null?void 0:n.style,u).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const c=WMe(a,n,e,o.style,u),g=Yee(n.formatType,a,l),v=Hee(a,a.type,n.format,n.formatType,o,!0),b={fieldOrDatumDef:a,axis:n,channel:e,model:t,scaleType:l,orient:s,labelAngle:c,format:v,formatType:g,mark:r,config:o};for(const T of fie){const O=T in q4?q4[T](b):o4(T)?n[T]:void 0,D=O!==void 0,P=s5e(O,T,n,t,e);if(D&&P)i.set(T,O,P);else{const{configValue:R=void 0,configFrom:M=void 0}=o4(T)&&T!=="values"?PR(T,o.style,n.style,u):{},q=R!==void 0;D&&!q?i.set(T,O,P):(M!=="vgAxisConfig"||l5e.has(T)&&q||O0(R)||We(R))&&i.set(T,R,!1)}}const x=n.encoding??{},k=ste.reduce((T,O)=>{if(!i.hasAxisPart(O))return T;const D=Nne(x[O]??{},t),P=O==="labels"?t5e(t,e,D):D;return P!==void 0&&!Qt(P)&&(T[O]={update:P}),T},{});return Qt(k)||i.set("encode",k,!!n.encoding||n.labelAngle!==void 0),i}function d5e({encoding:e,size:t}){for(const n of nd){const i=$r(n);Dl(t[i])&&Yd(e[n])&&(delete t[i],Ee(yee(i)))}return t}const f5e={vgMark:"arc",encodeEntry:e=>({...jo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...qa("x",e,{defaultPos:"mid"}),...qa("y",e,{defaultPos:"mid"}),...Wu(e,"radius"),...Wu(e,"theta")})},c5e={vgMark:"area",encodeEntry:e=>({...jo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...S$("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...S$("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...c3(e)})},h5e={vgMark:"rect",encodeEntry:e=>({...jo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wu(e,"x"),...Wu(e,"y")})},p5e={vgMark:"shape",encodeEntry:e=>({...jo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Te(n)&&n.type===Jm?{field:Ie(n,{expr:"datum"})}:{}}]}},g5e={vgMark:"image",encodeEntry:e=>({...jo(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Wu(e,"x"),...Wu(e,"y"),...d3(e,"url")})},m5e={vgMark:"line",encodeEntry:e=>({...jo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...qa("x",e,{defaultPos:"mid"}),...qa("y",e,{defaultPos:"mid"}),...ji("size",e,{vgChannel:"strokeWidth"}),...c3(e)})},y5e={vgMark:"trail",encodeEntry:e=>({...jo(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...qa("x",e,{defaultPos:"mid"}),...qa("y",e,{defaultPos:"mid"}),...ji("size",e),...c3(e)})};function D3(e,t){const{config:n}=e;return{...jo(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...qa("x",e,{defaultPos:"mid"}),...qa("y",e,{defaultPos:"mid"}),...ji("size",e),...ji("angle",e),...v5e(e,n,t)}}function v5e(e,t,n){return n?{shape:{value:n}}:ji("shape",e)}const b5e={vgMark:"symbol",encodeEntry:e=>D3(e)},_5e={vgMark:"symbol",encodeEntry:e=>D3(e,"circle")},x5e={vgMark:"symbol",encodeEntry:e=>D3(e,"square")},w5e={vgMark:"rect",encodeEntry:e=>({...jo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wu(e,"x"),...Wu(e,"y")})},k5e={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...jo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...S$("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...S$("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...ji("size",e,{vgChannel:"strokeWidth"})}}},$5e={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...jo(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...qa("x",e,{defaultPos:"mid"}),...qa("y",e,{defaultPos:"mid"}),...d3(e),...ji("size",e,{vgChannel:"fontSize"}),...ji("angle",e),...O4("align",E5e(e.markDef,n,t)),...O4("baseline",S5e(e.markDef,n,t)),...qa("radius",e,{defaultPos:null}),...qa("theta",e,{defaultPos:null})}}};function E5e(e,t,n){if(Kt("align",e,n)===void 0)return"center"}function S5e(e,t,n){if(Kt("baseline",e,n)===void 0)return"middle"}const T5e={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,a=i==="horizontal"?"x":"y",r=i==="horizontal"?"y":"x",o=i==="horizontal"?"height":"width";return{...jo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wu(e,a),...qa(r,e,{defaultPos:"mid",vgChannel:r==="y"?"yc":"xc"}),[o]:cn(Kt("thickness",n,t))}}},f1={arc:f5e,area:c5e,bar:h5e,circle:_5e,geoshape:p5e,image:g5e,line:m5e,point:b5e,rect:w5e,rule:k5e,square:x5e,text:$5e,tick:T5e,trail:y5e};function A5e(e){if(xt([NE,PE,EPe],e.mark)){const t=pte(e.mark,e.encoding);if(t.length>0)return O5e(e,t)}else if(e.mark===FE){const t=mR.some(n=>Kt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return D5e(e)}return C3(e)}const n7="faceted_path_";function O5e(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:n7+e.requestDataName(An.Main),data:e.requestDataName(An.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:C3(e,{fromPrefix:n7})}]}const i7="stack_group_";function D5e(e){var u;const[t]=C3(e,{fromPrefix:i7}),n=e.scaleName(e.stack.fieldChannel),i=(d={})=>e.vgField(e.stack.fieldChannel,d),a=(d,c)=>{const g=[i({prefix:"min",suffix:"start",expr:c}),i({prefix:"max",suffix:"start",expr:c}),i({prefix:"min",suffix:"end",expr:c}),i({prefix:"max",suffix:"end",expr:c})];return`${d}(${g.map(v=>`scale('${n}',${v})`).join(",")})`};let r,o;e.stack.fieldChannel==="x"?(r={...um(t.encode.update,["y","yc","y2","height",...mR]),x:{signal:a("min","datum")},x2:{signal:a("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...yr(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(r={...um(t.encode.update,["x","xc","x2","width"]),y:{signal:a("min","datum")},y2:{signal:a("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...yr(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const d of mR){const c=Al(d,e.markDef,e.config);t.encode.update[d]?(r[d]=t.encode.update[d],delete t.encode.update[d]):c&&(r[d]=cn(c)),c&&(t.encode.update[d]={value:0})}const s=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const d of e.stack.groupbyChannels){const c=e.fieldDef(d),g=Ie(c);g&&s.push(g),(c!=null&&c.bin||c!=null&&c.timeUnit)&&s.push(Ie(c,{binSuffix:"end"}))}return r=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((d,c)=>{if(t.encode.update[c])return{...d,[c]:t.encode.update[c]};{const g=Al(c,e.markDef,e.config);return g!==void 0?{...d,[c]:cn(g)}:d}},r),r.stroke&&(r.strokeForeground={value:!0},r.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(An.Main),name:i7+e.requestDataName(An.Main),groupby:s,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:r},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function C5e(e){const{encoding:t,stack:n,mark:i,markDef:a,config:r}=e,o=t.order;if(!(!ye(o)&&$s(o)&&pR(o.value)||!o&&pR(Kt("order",a,r)))){if((ye(o)||Te(o))&&!n)return uee(o,{expr:"datum"});if(Yf(i)){const s=a.orient==="horizontal"?"y":"x",l=t[s];if(Te(l))return{field:s}}}}function C3(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:a,config:r}=e,o=Gn(i.clip,R5e(e),I5e(e)),s=see(i),l=a.key,u=C5e(e),d=P5e(e),c=Kt("aria",i,r),g=f1[n].postEncodingTransform?f1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:f1[n].vgMark,...o?{clip:o}:{},...s?{style:s}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...d||{},...c===!1?{aria:c}:{},from:{data:t.fromPrefix+e.requestDataName(An.Main)},encode:{update:f1[n].encodeEntry(e)},...g?{transform:g}:{}}]}function R5e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function I5e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function P5e(e){if(!e.component.selection)return null;const t=ke(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=ke(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class cie extends sie{constructor(t,n,i,a={},r){super(t,"unit",n,i,r,void 0,l4(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=u=>{var d,c,g;return(d=u.from)!=null&&d.data&&(u.from.data=this.lookupDataSource(u.from.data),"time"in this.encoding&&(u.from.data=u.from.data+Xte)),(g=(c=u.from)==null?void 0:c.facet)!=null&&g.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u};const o=Ol(t.mark)?{...t.mark}:{type:t.mark},s=o.type;o.filled===void 0&&(o.filled=lNe(o,r,{graticule:t.data&&l3(t.data)}));const l=this.encoding=cFe(t.encoding||{},s,o.filled,r);this.markDef=Fte(o,l,r),this.size=d5e({encoding:l,size:l4(t)?{...a,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:a}),this.stack=Pte(this.markDef,l),this.specifiedScales=this.initScales(s,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>i3(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===qee,i=t&&aRe.some(a=>rt(t[a]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return bM.reduce((i,a)=>{const r=oi(n[a]);return r&&(i[a]=this.initScale(r.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,a=Mi(t);return ye(n)&&(a.domain=n.map(Fr)),ye(i)&&(a.range=i.map(Fr)),a}initAxes(t){return nd.reduce((n,i)=>{const a=t[i];if(rt(a)||i===_n&&rt(t.x2)||i===Oi&&rt(t.y2)){const r=rt(a)?a.axis:void 0;n[i]=r&&this.initAxis({...r})}return n},{})}initAxis(t){const n=ke(t),i={};for(const a of n){const r=t[a];i[a]=O0(r)?oee(r):Fr(r)}return i}initLegends(t){return gRe.reduce((n,i)=>{const a=oi(t[i]);if(a&&yRe(i)){const r=a.legend;n[i]=r&&Mi(r)}return n},{})}parseData(){this.component.data=pS(this)}parseLayoutSize(){Hze(this)}parseSelections(){this.component.selection=LMe(this,this.selection)}parseMarkGroup(){this.component.mark=A5e(this)}parseAxesAndHeaders(){this.component.axes=n5e(this)}assembleSelectionTopLevelSignals(t){return tLe(this,t)}assembleSignals(){return[...Tne(this),...QNe(this,[])]}assembleSelectionData(t){return nLe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return b3(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!ny(this.parent))&&(t=Qte(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Qc(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Es(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ga(n)?n:null}}class R3 extends T3{constructor(t,n,i,a,r){super(t,"layer",n,i,r,t.resolve,t.view);const o={...a,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((s,l)=>{if(GE(s))return new R3(s,this,this.getName(`layer_${l}`),o,r);if(id(s))return new cie(s,this,this.getName(`layer_${l}`),o,r);throw new Error(xM(s))})}parseData(){this.component.data=pS(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Wze(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ke(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>bl(t))&&$M(kM)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){a5e(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Tne(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),b3(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const a of Le(i.assembleGroupStyle()))t.add(a);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return iLe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Vne(this))}}function I3(e,t,n,i,a){if(zE(e))return new Eb(e,t,n,a);if(GE(e))return new R3(e,t,n,i,a);if(id(e))return new cie(e,t,n,i,a);if(NFe(e))return new Kze(e,t,n,a);throw new Error(xM(e))}function F5e(e,t={}){t.logger&&zIe(t.logger),t.fieldTitle&&ate(t.fieldTitle);try{const n=Ite(Nm(t.config,e.config)),i=Ute(e,n),a=I3(i,null,"",void 0,n);return a.parse(),rze(a.component.data,a),{spec:L5e(a,N5e(e,i.autosize,n,a),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&qIe(),t.fieldTitle&&iFe()}}function N5e(e,t,n,i){const a=i.component.layoutSize.get("width"),r=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Ne(t)&&(t={type:t}),a&&r&&BNe(t.type)){if(a==="step"&&r==="step")Ee(GB()),t.type="pad";else if(a==="step"||r==="step"){const o=a==="step"?"width":"height";Ee(GB(AE(o)));const s=o==="width"?"height":"width";t.type=VNe(s)}}return{...ke(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},..._4(n,!1),..._4(e,!0)}}function L5e(e,t,n={},i){const a=e.config?ZFe(e.config):void 0,r=jze(e.component.data,n),o=e.assembleSelectionData(r),s=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(b=>(b.name==="width"||b.name==="height")&&b.value!==void 0?(t[b.name]=+b.value,!1):!0);const{params:g,...v}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...v,...l?{title:l}:{},...u?{style:u}:{},...d?{encode:{update:d}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...Ote(g)]),...a?{config:a}:{},...i?{usermeta:i}:{}}}const M5e=KCe.version,z5e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:fm,accessPathWithDatum:fM,accessWithDatumToUnescapedPath:Gt,compile:F5e,contains:xt,deepEqual:Mr,deleteNestedProperty:m$,duplicate:nt,entries:Ef,every:lM,fieldIntersection:dM,flatAccessWithDatum:jQ,getFirstDefined:Gn,hasIntersection:uM,hasProperty:$e,hash:St,internalField:VQ,isBoolean:w_,isEmpty:Qt,isEqual:eRe,isInternalField:WQ,isNullOrFalse:pR,isNumeric:wE,keys:ke,logicalExpr:wb,mergeDeep:zQ,never:MQ,normalize:Ute,normalizeAngle:k_,omit:yr,pick:um,prefixGenerator:gR,removePathFromField:Xm,replaceAll:xh,replacePathInField:No,resetIdCounter:nRe,setEqual:qQ,some:dm,stringify:en,titleCase:v0,unique:ul,uniqueId:BQ,vals:Gi,varName:bn,version:M5e},Symbol.toStringTag,{value:"Module"}));function hie(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var q5e="2.15.0",j5e={version:q5e};const Mp="#fff",a7="#888",U5e={background:"#333",view:{stroke:a7},title:{color:Mp,subtitleColor:Mp},style:{"guide-label":{fill:Mp},"guide-title":{fill:Mp}},axis:{domainColor:Mp,gridColor:a7,tickColor:Mp}},vc="#4572a7",B5e={background:"#fff",arc:{fill:vc},area:{fill:vc},line:{stroke:vc,strokeWidth:2},path:{stroke:vc},rect:{fill:vc},shape:{stroke:vc},symbol:{fill:vc,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},bc="#30a2da",HA="#cbcbcb",V5e="#999",W5e="#333",r7="#f0f0f0",o7="#333",G5e={arc:{fill:bc},area:{fill:bc},axis:{domainColor:HA,grid:!0,gridColor:HA,gridWidth:1,labelColor:V5e,labelFontSize:10,titleColor:W5e,tickColor:HA,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:r7,group:{fill:r7},legend:{labelColor:o7,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:o7,titleFontSize:14,titlePadding:10},line:{stroke:bc,strokeWidth:2},path:{stroke:bc,strokeWidth:.5},rect:{fill:bc},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:bc},bar:{binSpacing:2,fill:bc,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},_c="#000",H5e={group:{fill:"#e5e5e5"},arc:{fill:_c},area:{fill:_c},line:{stroke:_c},path:{stroke:_c},rect:{fill:_c},shape:{stroke:_c},symbol:{fill:_c,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Y5e=22,X5e="normal",s7="Benton Gothic, sans-serif",l7=11.5,Z5e="normal",xc="#82c6df",YA="Benton Gothic Bold, sans-serif",u7="normal",d7=13,fv={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},J5e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:YA,fontSize:Y5e,fontWeight:X5e},arc:{fill:xc},area:{fill:xc},line:{stroke:xc,strokeWidth:2},path:{stroke:xc},rect:{fill:xc},shape:{stroke:xc},symbol:{fill:xc,size:30},axis:{labelFont:s7,labelFontSize:l7,labelFontWeight:Z5e,titleFont:YA,titleFontSize:d7,titleFontWeight:u7},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:s7,labelFontSize:l7,symbolType:"square",titleFont:YA,titleFontSize:d7,titleFontWeight:u7},range:{category:fv["category-6"],diverging:fv["fireandice-6"],heatmap:fv["fire-7"],ordinal:fv["fire-7"],ramp:fv["fire-7"]}},wc="#ab5787",c1="#979797",K5e={background:"#f9f9f9",arc:{fill:wc},area:{fill:wc},line:{stroke:wc},path:{stroke:wc},rect:{fill:wc},shape:{stroke:wc},symbol:{fill:wc,size:30},axis:{domainColor:c1,domainWidth:.5,gridWidth:.2,labelColor:c1,tickColor:c1,tickWidth:.2,titleColor:c1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},kc="#3e5c69",Q5e={background:"#fff",arc:{fill:kc},area:{fill:kc},line:{stroke:kc},path:{stroke:kc},rect:{fill:kc},shape:{stroke:kc},symbol:{fill:kc},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},fo="#1696d2",f7="#000000",eqe="#FFFFFF",h1="Lato",XA="Lato",tqe="Lato",nqe="#DEDDDD",iqe=18,cv={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},aqe={background:eqe,title:{anchor:"start",fontSize:iqe,font:h1},axisX:{domain:!0,domainColor:f7,domainWidth:1,grid:!1,labelFontSize:12,labelFont:XA,labelAngle:0,tickColor:f7,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:h1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:nqe,gridWidth:1,labelFontSize:12,labelFont:XA,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:h1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:XA,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:h1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:cv["six-groups-cat-1"],diverging:cv["diverging-colors"],heatmap:cv["diverging-colors"],ordinal:cv["six-groups-seq"],ramp:cv["shades-blue"]},area:{fill:fo},rect:{fill:fo},line:{color:fo,stroke:fo,strokeWidth:5},trail:{color:fo,stroke:fo,strokeWidth:0,size:1},path:{stroke:fo,strokeWidth:.5},point:{filled:!0},text:{font:tqe,color:fo,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:fo,stroke:null}},arc:{fill:fo},shape:{stroke:fo},symbol:{fill:fo,size:30}},$c="#3366CC",c7="#ccc",p1="Arial, sans-serif",rqe={arc:{fill:$c},area:{fill:$c},path:{stroke:$c},rect:{fill:$c},shape:{stroke:$c},symbol:{stroke:$c},circle:{fill:$c},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:p1,fontSize:12},"guide-title":{font:p1,fontSize:12},"group-title":{font:p1,fontSize:12}},title:{font:p1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:c7,tickColor:c7,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},P3=e=>e*(1/3+1),h7=P3(9),p7=P3(10),g7=P3(12),hv="Segoe UI",m7="wf_standard-font, helvetica, arial, sans-serif",y7="#252423",pv="#605E5C",v7="transparent",oqe="#C8C6C4",Jo="#118DFF",sqe="#12239E",lqe="#E66C37",uqe="#6B007B",dqe="#E044A7",fqe="#744EC2",cqe="#D9B300",hqe="#D64550",pie=Jo,gie="#DEEFFF",b7=[gie,pie],pqe=[gie,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",pie],gqe={view:{stroke:v7},background:v7,font:hv,header:{titleFont:m7,titleFontSize:g7,titleColor:y7,labelFont:hv,labelFontSize:p7,labelColor:pv},axis:{ticks:!1,grid:!1,domain:!1,labelColor:pv,labelFontSize:h7,titleFont:m7,titleColor:y7,titleFontSize:g7,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:oqe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Jo},line:{stroke:Jo,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:hv,fontSize:h7,fill:pv},arc:{fill:Jo},area:{fill:Jo,line:!0,opacity:.6},path:{stroke:Jo},rect:{fill:Jo},point:{fill:Jo,filled:!0,size:75},shape:{stroke:Jo},symbol:{fill:Jo,strokeWidth:1.5,size:50},legend:{titleFont:hv,titleFontWeight:"bold",titleColor:pv,labelFont:hv,labelFontSize:p7,labelColor:pv,symbolType:"circle",symbolSize:75},range:{category:[Jo,sqe,lqe,uqe,dqe,fqe,cqe,hqe],diverging:b7,heatmap:b7,ordinal:pqe}},ZA='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',mqe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',JA=400,g1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},yqe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],vqe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function gS({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=g1.gridBg[e],a=g1.textPrimary[e],r=g1.textSecondary[e],o=n==="dark"?yqe:vqe,s=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:i,stroke:i},group:{fill:i},title:{color:a,anchor:"start",dy:-15,fontSize:16,font:ZA,fontWeight:600},axis:{labelColor:r,labelFontSize:12,labelFont:mqe,labelFontWeight:JA,titleColor:a,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:g1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:ZA,fill:r,fontWeight:JA},"guide-title":{font:ZA,fill:r,fontWeight:JA}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const bqe=gS({theme:"white",background:"#ffffff"}),_qe=gS({theme:"g10",background:"#f4f4f4"}),xqe=gS({theme:"g90",background:"#262626"}),wqe=gS({theme:"g100",background:"#161616"}),kqe=j5e.version,$qe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:_qe,carbong100:wqe,carbong90:xqe,carbonwhite:bqe,dark:U5e,excel:B5e,fivethirtyeight:G5e,ggplot2:H5e,googlecharts:rqe,latimes:J5e,powerbi:gqe,quartz:K5e,urbaninstitute:aqe,version:kqe,vox:Q5e},Symbol.toStringTag,{value:"Module"}));function Eqe(e,t,n,i){if(ye(e))return`[${e.map(a=>t(Ne(a)?a:_7(a,n))).join(", ")}]`;if(Fe(e)){let a="";const{title:r,image:o,...s}=e;r&&(a+=`<h2>${t(r)}</h2>`),o&&(a+=`<img src="${new URL(t(o),i||location.href).href}">`);const l=Object.keys(s);if(l.length>0){a+="<table>";for(const u of l){let d=s[u];d!==void 0&&(Fe(d)&&(d=_7(d,n)),a+=`<tr><td class="key">${t(u)}</td><td class="value">${t(d)}</td></tr>`)}a+="</table>"}return a||"{}"}return t(e)}function Sqe(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const a=t.indexOf(this)+1;return t.length=a,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function _7(e,t){return JSON.stringify(e,Sqe(t))}var Tqe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const mie="vg-tooltip-element",Aqe={offsetX:10,offsetY:10,id:mie,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Oqe,maxDepth:2,formatTooltip:Eqe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function Oqe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Dqe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Tqe.toString().replace(mie,e)}function yie(e,t,{offsetX:n,offsetY:i}){const a=vie({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),r=["bottom-right","bottom-left","top-right","top-left"];for(const o of r)if(bie(a[o],t))return a[o];return a["top-left"]}function Cqe(e,t,n,i,a){const{position:r,offsetX:o,offsetY:s}=a,l=e._el.getBoundingClientRect(),u=e._origin,d=Rqe(l,u,n),c=vie(d,i,o,s),g=Array.isArray(r)?r:[r];for(const v of g)if(bie(c[v],i)&&!Iqe(t,c[v],i))return c[v];return yie(t,i,a)}function Rqe(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let a=e.left+t[0]+i.x1,r=e.top+t[1]+i.y1,o=n;for(;o.mark.group;)o=o.mark.group,a+=o.x??0,r+=o.y??0;const s=i.x2-i.x1,l=i.y2-i.y1;return{x1:a,x2:a+s,y1:r,y2:r+l}}function vie(e,t,n,i){const a=(e.x1+e.x2)/2,r=(e.y1+e.y2)/2,o=e.x1-t.width-n,s=a-t.width/2,l=e.x2+n,u=e.y1-t.height-i,d=r-t.height/2,c=e.y2+i;return{top:{x:s,y:u},bottom:{x:s,y:c},left:{x:o,y:d},right:{x:l,y:d},"top-left":{x:o,y:u},"top-right":{x:l,y:u},"bottom-left":{x:o,y:c},"bottom-right":{x:l,y:c}}}function bie(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function Iqe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class Pqe{constructor(t){this.options={...Aqe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=Dqe(n);const a=document.head;a.childNodes.length>0?a.insertBefore(i,a.childNodes[0]):a.appendChild(i)}}tooltipHandler(t,n,i,a){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),a==null||a===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(a,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:r,y:o}=this.options.anchor==="mark"?Cqe(t,n,i,this.el.getBoundingClientRect(),this.options):yie(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${o}px`,this.el.style.left=`${r}px`}}var KA={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Fqe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var r in a)a.hasOwnProperty(r)&&(i[r]=a[r])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nqe=Object.prototype.hasOwnProperty;function VR(e,t){return Nqe.call(e,t)}function WR(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var a in e)VR(e,a)&&i.push(a);return i}function zr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function GR(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Dc(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function _ie(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function HR(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(HR(e[t]))return!0}else if(typeof e=="object"){for(var i=WR(e),a=i.length,r=0;r<a;r++)if(HR(e[i[r]]))return!0}}return!1}function x7(e,t){var n=[e];for(var i in t){var a=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof a<"u"&&n.push(i+": "+a)}return n.join(`
`)}var xie=function(e){Fqe(t,e);function t(n,i,a,r,o){var s=this.constructor,l=e.call(this,x7(n,{name:i,index:a,operation:r,tree:o}))||this;return l.name=i,l.index=a,l.operation=r,l.tree=o,Object.setPrototypeOf(l,s.prototype),l.message=x7(n,{name:i,index:a,operation:r,tree:o}),l}return t}(Error),Nn=xie,Lqe=zr,dg={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=C$(n,this.path);i&&(i=zr(i));var a=nh(n,{op:"remove",path:this.from}).removed;return nh(n,{op:"add",path:this.path,value:a}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=C$(n,this.from);return nh(n,{op:"add",path:this.path,value:zr(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:D_(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Mqe={add:function(e,t,n){return GR(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:dg.move,copy:dg.copy,test:dg.test,_get:dg._get};function C$(e,t){if(t=="")return e;var n={op:"_get",path:t};return nh(e,n),n.value}function nh(e,t,n,i,a,r){if(n===void 0&&(n=!1),i===void 0&&(i=!0),a===void 0&&(a=!0),r===void 0&&(r=0),n&&(typeof n=="function"?n(t,0,e,t.path):R$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=C$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=D_(e,t.value),o.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Nn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,t,e);return o}}else{i||(e=zr(e));var s=t.path||"",l=s.split("/"),u=e,d=1,c=l.length,g=void 0,v=void 0,b=void 0;for(typeof n=="function"?b=n:b=R$;;){if(v=l[d],v&&v.indexOf("~")!=-1&&(v=_ie(v)),a&&(v=="__proto__"||v=="prototype"&&d>0&&l[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&g===void 0&&(u[v]===void 0?g=l.slice(0,d).join("/"):d==c-1&&(g=t.path),g!==void 0&&b(t,0,e,g)),d++,Array.isArray(u)){if(v==="-")v=u.length;else{if(n&&!GR(v))throw new Nn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",r,t,e);GR(v)&&(v=~~v)}if(d>=c){if(n&&t.op==="add"&&v>u.length)throw new Nn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",r,t,e);var o=Mqe[t.op].call(t,u,v,e);if(o.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return o}}else if(d>=c){var o=dg[t.op].call(t,u,v,e);if(o.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return o}if(u=u[v],n&&d<c&&(!u||typeof u!="object"))throw new Nn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",r,t,e)}}}function mS(e,t,n,i,a){if(i===void 0&&(i=!0),a===void 0&&(a=!0),n&&!Array.isArray(t))throw new Nn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=zr(e));for(var r=new Array(t.length),o=0,s=t.length;o<s;o++)r[o]=nh(e,t[o],n,!0,a,o),e=r[o].newDocument;return r.newDocument=e,r}function zqe(e,t,n){var i=nh(e,t);if(i.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function R$(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Nn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(dg[e.op]){if(typeof e.path!="string")throw new Nn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Nn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Nn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Nn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&HR(e.value))throw new Nn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var a=e.path.split("/").length,r=i.split("/").length;if(a!==r+1&&a!==r)throw new Nn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Nn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},s=wie([o],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new Nn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Nn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function wie(e,t,n){try{if(!Array.isArray(e))throw new Nn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)mS(zr(t),zr(e),n||!0);else{n=n||R$;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(a){if(a instanceof Nn)return a;throw a}}function D_(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),a,r,o;if(n&&i){if(r=e.length,r!=t.length)return!1;for(a=r;a--!==0;)if(!D_(e[a],t[a]))return!1;return!0}if(n!=i)return!1;var s=Object.keys(e);if(r=s.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!t.hasOwnProperty(s[a]))return!1;for(a=r;a--!==0;)if(o=s[a],!D_(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}var qqe=Object.freeze({__proto__:null,JsonPatchError:Nn,_areEquals:D_,applyOperation:nh,applyPatch:mS,applyReducer:zqe,deepClone:Lqe,getValueByPointer:C$,validate:wie,validator:R$});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var F3=new WeakMap,jqe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Uqe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Bqe(e){return F3.get(e)}function Vqe(e,t){return e.observers.get(t)}function Wqe(e,t){e.observers.delete(t.callback)}function Gqe(e,t){t.unobserve()}function Hqe(e,t){var n=[],i,a=Bqe(e);if(!a)a=new jqe(e),F3.set(e,a);else{var r=Vqe(a,t);i=r&&r.observer}if(i)return i;if(i={},a.value=zr(e),t){i.callback=t,i.next=null;var o=function(){YR(i)},s=function(){clearTimeout(i.next),i.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return i.patches=n,i.object=e,i.unobserve=function(){YR(i),clearTimeout(i.next),Wqe(a,i),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},a.observers.set(t,new Uqe(t,i)),i}function YR(e,t){t===void 0&&(t=!1);var n=F3.get(e.object);N3(n.value,e.object,e.patches,"",t),e.patches.length&&mS(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function N3(e,t,n,i,a){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var r=WR(t),o=WR(e),s=!1,l=o.length-1;l>=0;l--){var u=o[l],d=e[u];if(VR(t,u)&&!(t[u]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var c=t[u];typeof d=="object"&&d!=null&&typeof c=="object"&&c!=null&&Array.isArray(d)===Array.isArray(c)?N3(d,c,n,i+"/"+Dc(u),a):d!==c&&(a&&n.push({op:"test",path:i+"/"+Dc(u),value:zr(d)}),n.push({op:"replace",path:i+"/"+Dc(u),value:zr(c)}))}else Array.isArray(e)===Array.isArray(t)?(a&&n.push({op:"test",path:i+"/"+Dc(u),value:zr(d)}),n.push({op:"remove",path:i+"/"+Dc(u)}),s=!0):(a&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!s&&r.length==o.length))for(var l=0;l<r.length;l++){var u=r[l];!VR(e,u)&&t[u]!==void 0&&n.push({op:"add",path:i+"/"+Dc(u),value:zr(t[u])})}}}function Yqe(e,t,n){n===void 0&&(n=!1);var i=[];return N3(e,t,i,"",n),i}var Xqe=Object.freeze({__proto__:null,compare:Yqe,generate:YR,observe:Hqe,unobserve:Gqe});Object.assign({},qqe,Xqe,{JsonPatchError:xie,deepClone:zr,escapePathComponent:Dc,unescapePathComponent:_ie});function Zqe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var QA,w7;function Jqe(){if(w7)return QA;w7=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const r=this.map.keys().next().value;this.delete(r)}this.map.set(n,i)}return this}}return QA=e,QA}var eO,k7;function L3(){if(k7)return eO;k7=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return eO=i=>i?typeof i!="object"?e:i:t,eO}var m1={exports:{}},tO,$7;function M3(){if($7)return tO;$7=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,a=t-6;return tO={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:a,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},tO}var nO,E7;function yS(){return E7||(E7=1,nO=typeof process=="object"&&KA&&KA.NODE_DEBUG&&/\bsemver\b/i.test(KA.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),nO}var S7;function z3(){return S7||(S7=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:a}=M3(),r=yS();t=e.exports={};const o=t.re=[],s=t.safeRe=[],l=t.src=[],u=t.t={};let d=0;const c="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",a],[c,i]],v=x=>{for(const[k,w]of g)x=x.split(`${k}*`).join(`${k}{0,${w}}`).split(`${k}+`).join(`${k}{1,${w}}`);return x},b=(x,k,w)=>{const E=v(k),T=d++;r(x,T,k),u[x]=T,l[T]=k,o[T]=new RegExp(k,w?"g":void 0),s[T]=new RegExp(E,w?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${c}*`),b("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),b("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${c}+`),b("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),b("FULL",`^${l[u.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),b("LOOSE",`^${l[u.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),b("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",l[u.COERCE],!0),b("COERCERTLFULL",l[u.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(m1,m1.exports)),m1.exports}var iO,T7;function Kqe(){if(T7)return iO;T7=1;const e=/^[0-9]+$/,t=(i,a)=>{const r=e.test(i),o=e.test(a);return r&&o&&(i=+i,a=+a),i===a?0:r&&!o?-1:o&&!r?1:i<a?-1:1};return iO={compareIdentifiers:t,rcompareIdentifiers:(i,a)=>t(a,i)},iO}var aO,A7;function q3(){if(A7)return aO;A7=1;const e=yS(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=M3(),{safeRe:i,t:a}=z3(),r=L3(),{compareIdentifiers:o}=Kqe();class s{constructor(u,d){if(d=r(d),u instanceof s){if(u.loose===!!d.loose&&u.includePrerelease===!!d.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const c=u.trim().match(d.loose?i[a.LOOSE]:i[a.FULL]);if(!c)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(g=>{if(/^[0-9]+$/.test(g)){const v=+g;if(v>=0&&v<n)return v}return g}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof s)){if(typeof u=="string"&&u===this.version)return 0;u=new s(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof s||(u=new s(u,this.options)),o(this.major,u.major)||o(this.minor,u.minor)||o(this.patch,u.patch)}comparePre(u){if(u instanceof s||(u=new s(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let d=0;do{const c=this.prerelease[d],g=u.prerelease[d];if(e("prerelease compare",d,c,g),c===void 0&&g===void 0)return 0;if(g===void 0)return 1;if(c===void 0)return-1;if(c===g)continue;return o(c,g)}while(++d)}compareBuild(u){u instanceof s||(u=new s(u,this.options));let d=0;do{const c=this.build[d],g=u.build[d];if(e("build compare",d,c,g),c===void 0&&g===void 0)return 0;if(g===void 0)return 1;if(c===void 0)return-1;if(c===g)continue;return o(c,g)}while(++d)}inc(u,d,c){switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,c);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,c);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,c),this.inc("pre",d,c);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,c),this.inc("pre",d,c);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const g=Number(c)?1:0;if(!d&&c===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[g];else{let v=this.prerelease.length;for(;--v>=0;)typeof this.prerelease[v]=="number"&&(this.prerelease[v]++,v=-2);if(v===-1){if(d===this.prerelease.join(".")&&c===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(g)}}if(d){let v=[d,g];c===!1&&(v=[d]),o(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=v):this.prerelease=v}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return aO=s,aO}var rO,O7;function iy(){if(O7)return rO;O7=1;const e=q3();return rO=(n,i,a)=>new e(n,a).compare(new e(i,a)),rO}var oO,D7;function Qqe(){if(D7)return oO;D7=1;const e=iy();return oO=(n,i,a)=>e(n,i,a)===0,oO}var sO,C7;function e9e(){if(C7)return sO;C7=1;const e=iy();return sO=(n,i,a)=>e(n,i,a)!==0,sO}var lO,R7;function t9e(){if(R7)return lO;R7=1;const e=iy();return lO=(n,i,a)=>e(n,i,a)>0,lO}var uO,I7;function n9e(){if(I7)return uO;I7=1;const e=iy();return uO=(n,i,a)=>e(n,i,a)>=0,uO}var dO,P7;function i9e(){if(P7)return dO;P7=1;const e=iy();return dO=(n,i,a)=>e(n,i,a)<0,dO}var fO,F7;function a9e(){if(F7)return fO;F7=1;const e=iy();return fO=(n,i,a)=>e(n,i,a)<=0,fO}var cO,N7;function r9e(){if(N7)return cO;N7=1;const e=Qqe(),t=e9e(),n=t9e(),i=n9e(),a=i9e(),r=a9e();return cO=(s,l,u,d)=>{switch(l){case"===":return typeof s=="object"&&(s=s.version),typeof u=="object"&&(u=u.version),s===u;case"!==":return typeof s=="object"&&(s=s.version),typeof u=="object"&&(u=u.version),s!==u;case"":case"=":case"==":return e(s,u,d);case"!=":return t(s,u,d);case">":return n(s,u,d);case">=":return i(s,u,d);case"<":return a(s,u,d);case"<=":return r(s,u,d);default:throw new TypeError(`Invalid operator: ${l}`)}},cO}var hO,L7;function o9e(){if(L7)return hO;L7=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,c){if(c=n(c),d instanceof t){if(d.loose===!!c.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,c),this.options=c,this.loose=!!c.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const c=this.options.loose?i[a.COMPARATORLOOSE]:i[a.COMPARATOR],g=d.match(c);if(!g)throw new TypeError(`Invalid comparator: ${d}`);this.operator=g[1]!==void 0?g[1]:"",this.operator==="="&&(this.operator=""),g[2]?this.semver=new s(g[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new s(d,this.options)}catch{return!1}return r(d,this.operator,this.semver,this.options)}intersects(d,c){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,c).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,c).test(d.semver):(c=n(c),c.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!c.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||r(this.semver,"<",d.semver,c)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||r(this.semver,">",d.semver,c)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}hO=t;const n=L3(),{safeRe:i,t:a}=z3(),r=r9e(),o=yS(),s=q3(),l=kie();return hO}var pO,M7;function kie(){if(M7)return pO;M7=1;const e=/\s+/g;class t{constructor(j,K){if(K=a(K),j instanceof t)return j.loose===!!K.loose&&j.includePrerelease===!!K.includePrerelease?j:new t(j.raw,K);if(j instanceof r)return this.raw=j.value,this.set=[[j]],this.formatted=void 0,this;if(this.options=K,this.loose=!!K.loose,this.includePrerelease=!!K.includePrerelease,this.raw=j.trim().replace(e," "),this.set=this.raw.split("||").map(se=>this.parseRange(se.trim())).filter(se=>se.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const se=this.set[0];if(this.set=this.set.filter(ee=>!x(ee[0])),this.set.length===0)this.set=[se];else if(this.set.length>1){for(const ee of this.set)if(ee.length===1&&k(ee[0])){this.set=[ee];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let j=0;j<this.set.length;j++){j>0&&(this.formatted+="||");const K=this.set[j];for(let se=0;se<K.length;se++)se>0&&(this.formatted+=" "),this.formatted+=K[se].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(j){const se=((this.options.includePrerelease&&v)|(this.options.loose&&b))+":"+j,ee=i.get(se);if(ee)return ee;const oe=this.options.loose,Y=oe?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];j=j.replace(Y,Q(this.options.includePrerelease)),o("hyphen replace",j),j=j.replace(l[u.COMPARATORTRIM],d),o("comparator trim",j),j=j.replace(l[u.TILDETRIM],c),o("tilde trim",j),j=j.replace(l[u.CARETTRIM],g),o("caret trim",j);let Z=j.split(" ").map(X=>E(X,this.options)).join(" ").split(/\s+/).map(X=>z(X,this.options));oe&&(Z=Z.filter(X=>(o("loose invalid filter",X,this.options),!!X.match(l[u.COMPARATORLOOSE])))),o("range list",Z);const ae=new Map,ne=Z.map(X=>new r(X,this.options));for(const X of ne){if(x(X))return[X];ae.set(X.value,X)}ae.size>1&&ae.has("")&&ae.delete("");const U=[...ae.values()];return i.set(se,U),U}intersects(j,K){if(!(j instanceof t))throw new TypeError("a Range is required");return this.set.some(se=>w(se,K)&&j.set.some(ee=>w(ee,K)&&se.every(oe=>ee.every(Y=>oe.intersects(Y,K)))))}test(j){if(!j)return!1;if(typeof j=="string")try{j=new s(j,this.options)}catch{return!1}for(let K=0;K<this.set.length;K++)if(te(this.set[K],j,this.options))return!0;return!1}}pO=t;const n=Jqe(),i=new n,a=L3(),r=o9e(),o=yS(),s=q3(),{safeRe:l,t:u,comparatorTrimReplace:d,tildeTrimReplace:c,caretTrimReplace:g}=z3(),{FLAG_INCLUDE_PRERELEASE:v,FLAG_LOOSE:b}=M3(),x=W=>W.value==="<0.0.0-0",k=W=>W.value==="",w=(W,j)=>{let K=!0;const se=W.slice();let ee=se.pop();for(;K&&se.length;)K=se.every(oe=>ee.intersects(oe,j)),ee=se.pop();return K},E=(W,j)=>(o("comp",W,j),W=P(W,j),o("caret",W),W=O(W,j),o("tildes",W),W=M(W,j),o("xrange",W),W=H(W,j),o("stars",W),W),T=W=>!W||W.toLowerCase()==="x"||W==="*",O=(W,j)=>W.trim().split(/\s+/).map(K=>D(K,j)).join(" "),D=(W,j)=>{const K=j.loose?l[u.TILDELOOSE]:l[u.TILDE];return W.replace(K,(se,ee,oe,Y,Z)=>{o("tilde",W,se,ee,oe,Y,Z);let ae;return T(ee)?ae="":T(oe)?ae=`>=${ee}.0.0 <${+ee+1}.0.0-0`:T(Y)?ae=`>=${ee}.${oe}.0 <${ee}.${+oe+1}.0-0`:Z?(o("replaceTilde pr",Z),ae=`>=${ee}.${oe}.${Y}-${Z} <${ee}.${+oe+1}.0-0`):ae=`>=${ee}.${oe}.${Y} <${ee}.${+oe+1}.0-0`,o("tilde return",ae),ae})},P=(W,j)=>W.trim().split(/\s+/).map(K=>R(K,j)).join(" "),R=(W,j)=>{o("caret",W,j);const K=j.loose?l[u.CARETLOOSE]:l[u.CARET],se=j.includePrerelease?"-0":"";return W.replace(K,(ee,oe,Y,Z,ae)=>{o("caret",W,ee,oe,Y,Z,ae);let ne;return T(oe)?ne="":T(Y)?ne=`>=${oe}.0.0${se} <${+oe+1}.0.0-0`:T(Z)?oe==="0"?ne=`>=${oe}.${Y}.0${se} <${oe}.${+Y+1}.0-0`:ne=`>=${oe}.${Y}.0${se} <${+oe+1}.0.0-0`:ae?(o("replaceCaret pr",ae),oe==="0"?Y==="0"?ne=`>=${oe}.${Y}.${Z}-${ae} <${oe}.${Y}.${+Z+1}-0`:ne=`>=${oe}.${Y}.${Z}-${ae} <${oe}.${+Y+1}.0-0`:ne=`>=${oe}.${Y}.${Z}-${ae} <${+oe+1}.0.0-0`):(o("no pr"),oe==="0"?Y==="0"?ne=`>=${oe}.${Y}.${Z}${se} <${oe}.${Y}.${+Z+1}-0`:ne=`>=${oe}.${Y}.${Z}${se} <${oe}.${+Y+1}.0-0`:ne=`>=${oe}.${Y}.${Z} <${+oe+1}.0.0-0`),o("caret return",ne),ne})},M=(W,j)=>(o("replaceXRanges",W,j),W.split(/\s+/).map(K=>q(K,j)).join(" ")),q=(W,j)=>{W=W.trim();const K=j.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return W.replace(K,(se,ee,oe,Y,Z,ae)=>{o("xRange",W,se,ee,oe,Y,Z,ae);const ne=T(oe),U=ne||T(Y),X=U||T(Z),ue=X;return ee==="="&&ue&&(ee=""),ae=j.includePrerelease?"-0":"",ne?ee===">"||ee==="<"?se="<0.0.0-0":se="*":ee&&ue?(U&&(Y=0),Z=0,ee===">"?(ee=">=",U?(oe=+oe+1,Y=0,Z=0):(Y=+Y+1,Z=0)):ee==="<="&&(ee="<",U?oe=+oe+1:Y=+Y+1),ee==="<"&&(ae="-0"),se=`${ee+oe}.${Y}.${Z}${ae}`):U?se=`>=${oe}.0.0${ae} <${+oe+1}.0.0-0`:X&&(se=`>=${oe}.${Y}.0${ae} <${oe}.${+Y+1}.0-0`),o("xRange return",se),se})},H=(W,j)=>(o("replaceStars",W,j),W.trim().replace(l[u.STAR],"")),z=(W,j)=>(o("replaceGTE0",W,j),W.trim().replace(l[j.includePrerelease?u.GTE0PRE:u.GTE0],"")),Q=W=>(j,K,se,ee,oe,Y,Z,ae,ne,U,X,ue)=>(T(se)?K="":T(ee)?K=`>=${se}.0.0${W?"-0":""}`:T(oe)?K=`>=${se}.${ee}.0${W?"-0":""}`:Y?K=`>=${K}`:K=`>=${K}${W?"-0":""}`,T(ne)?ae="":T(U)?ae=`<${+ne+1}.0.0-0`:T(X)?ae=`<${ne}.${+U+1}.0-0`:ue?ae=`<=${ne}.${U}.${X}-${ue}`:W?ae=`<${ne}.${U}.${+X+1}-0`:ae=`<=${ae}`,`${K} ${ae}`.trim()),te=(W,j,K)=>{for(let se=0;se<W.length;se++)if(!W[se].test(j))return!1;if(j.prerelease.length&&!K.includePrerelease){for(let se=0;se<W.length;se++)if(o(W[se].semver),W[se].semver!==r.ANY&&W[se].semver.prerelease.length>0){const ee=W[se].semver;if(ee.major===j.major&&ee.minor===j.minor&&ee.patch===j.patch)return!0}return!1}return!0};return pO}var gO,z7;function s9e(){if(z7)return gO;z7=1;const e=kie();return gO=(n,i,a)=>{try{i=new e(i,a)}catch{return!1}return i.test(n)},gO}var l9e=s9e(),$ie=Zqe(l9e);function u9e(e,t,n){const i=e.open(t),a=250,{origin:r}=new URL(t);let o=40;function s(u){u.source===i&&(o=0,e.removeEventListener("message",s,!1))}e.addEventListener("message",s,!1);function l(){o<=0||(i.postMessage(n,r),setTimeout(l,a),o-=1)}setTimeout(l,a)}var d9e=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Eie(e,...t){for(const n of t)f9e(e,n);return e}function f9e(e,t){for(const n of Object.keys(t))Lm(e,n,t[n],!0)}const Ks=qCe;let C_=z5e;const y1=typeof window<"u"?window:void 0;var m6;C_===void 0&&((m6=y1==null?void 0:y1.vl)!=null&&m6.compile)&&(C_=y1.vl);const c9e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},h9e={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Jv={vega:"Vega","vega-lite":"Vega-Lite"},I$={vega:Ks.version,"vega-lite":C_?C_.version:"not available"},p9e={vega:e=>e,"vega-lite":(e,t)=>C_.compile(e,{config:t}).spec},g9e=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,m9e="chart-wrapper";function y9e(e){return typeof e=="function"}function q7(e,t,n,i){const a=`<html><head>${t}</head><body><pre><code class="json">`,r=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(a+e+r),o.document.title=`${Jv[i]} JSON Source`}function v9e(e,t){if(e.$schema){const n=hie(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Jv[n.library]}, but mode argument sets ${Jv[t]??t}.`);const i=n.library;return $ie(I$[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Jv[i]} ${n.version}, but the current version of ${Jv[i]} is v${I$[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Sie(e){return!!(e&&"load"in e)}function j7(e){return Sie(e)?e:Ks.loader(e)}function b9e(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Ne(t.defaultStyle)&&(t.defaultStyle=!1),t}async function _9e(e,t,n={}){let i,a;Ne(t)?(a=j7(n.loader),i=JSON.parse(await a.load(t))):i=t;const r=b9e(i),o=r.loader;(!a||o)&&(a=j7(n.loader??o));const s=await U7(r,a),l=await U7(n,a),u={...Eie(l,s),config:Nm(l.config??{},s.config??{})};return await w9e(e,i,u,a)}async function U7(e,t){const n=Ne(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=Ne(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function x9e(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function w9e(e,t,n={},i){const a=n.theme?Nm($qe[n.theme],n.config??{}):n.config,r=Mf(n.actions)?n.actions:Eie({},c9e,n.actions??{}),o={...h9e,...n.i18n},s=n.renderer??"canvas",l=n.logLevel??Ks.Warn,u=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const D="vega-embed-style",{root:P,rootContainer:R}=x9e(d);if(!P.getElementById(D)){const M=document.createElement("style");M.id=D,M.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?d9e.toString():n.defaultStyle,R.appendChild(M)}}const c=v9e(t,n.mode);let g=p9e[c](t,a);if(c==="vega-lite"&&g.$schema){const D=hie(g.$schema);$ie(I$.vega,`^${D.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${D.version}, but current version is v${I$.vega}.`)}d.classList.add("vega-embed"),r&&d.classList.add("has-actions"),d.innerHTML="";let v=d;if(r){const D=document.createElement("div");D.classList.add(m9e),d.appendChild(D),v=D}const b=n.patch;if(b&&(g=b instanceof Function?b(g):mS(g,b,!0,!1).newDocument),n.formatLocale&&Ks.formatLocale(n.formatLocale),n.timeFormatLocale&&Ks.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const D in n.expressionFunctions){const P=n.expressionFunctions[D];"fn"in P?Ks.expressionFunction(D,P.fn,P.visitor):P instanceof Function&&Ks.expressionFunction(D,P)}const{ast:x}=n,k=Ks.parse(g,c==="vega-lite"?{}:a,{ast:x}),w=new(n.viewClass||Ks.View)(k,{loader:i,logLevel:l,renderer:s,...x?{expr:Ks.expressionInterpreter??n.expr??ZCe}:{}});if(w.addSignalListener("autosize",(D,P)=>{const{type:R}=P;R=="fit-x"?(v.classList.add("fit-x"),v.classList.remove("fit-y")):R=="fit-y"?(v.classList.remove("fit-x"),v.classList.add("fit-y")):R=="fit"?v.classList.add("fit-x","fit-y"):v.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:D,tooltip:P}=n,R=D&&!Sie(D)?D==null?void 0:D.baseURL:void 0,M=y9e(P)?P:new Pqe({baseURL:R,...P===!0?{}:P}).call;w.tooltip(M)}let{hover:E}=n;if(E===void 0&&(E=c==="vega"),E){const{hoverSet:D,updateSet:P}=typeof E=="boolean"?{}:E;w.hover(D,P)}n&&(n.width!=null&&w.width(n.width),n.height!=null&&w.height(n.height),n.padding!=null&&w.padding(n.padding)),await w.initialize(v,n.bind).runAsync();let T;if(r!==!1){let D=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const R=document.createElement("details");R.title=o.CLICK_TO_VIEW_ACTIONS,d.append(R),D=R;const M=document.createElement("summary");M.innerHTML=g9e,R.append(M),T=q=>{R.contains(q.target)||R.removeAttribute("open")},document.addEventListener("click",T)}const P=document.createElement("div");if(D.append(P),P.classList.add("vega-actions"),r===!0||r.export!==!1){for(const R of["svg","png"])if(r===!0||r.export===!0||r.export[R]){const M=o[`${R.toUpperCase()}_ACTION`],q=document.createElement("a"),H=Fe(n.scaleFactor)?n.scaleFactor[R]:n.scaleFactor;q.text=M,q.href="#",q.target="_blank",q.download=`${u}.${R}`,q.addEventListener("mousedown",async function(z){z.preventDefault();const Q=await w.toImageURL(R,H);this.href=Q}),P.append(q)}}if(r===!0||r.source!==!1){const R=document.createElement("a");R.text=o.SOURCE_ACTION,R.href="#",R.addEventListener("click",function(M){q7(VT(t),n.sourceHeader??"",n.sourceFooter??"",c),M.preventDefault()}),P.append(R)}if(c==="vega-lite"&&(r===!0||r.compiled!==!1)){const R=document.createElement("a");R.text=o.COMPILED_ACTION,R.href="#",R.addEventListener("click",function(M){q7(VT(g),n.sourceHeader??"",n.sourceFooter??"","vega"),M.preventDefault()}),P.append(R)}if(r===!0||r.editor!==!1){const R=n.editorUrl??"https://vega.github.io/editor/",M=document.createElement("a");M.text=o.EDITOR_ACTION,M.href="#",M.addEventListener("click",function(q){u9e(window,R,{config:a,mode:b?"vega":c,renderer:s,spec:VT(b?g:t)}),q.preventDefault()}),P.append(M)}}function O(){T&&document.removeEventListener("click",T),w.finalize()}return{view:w,spec:t,vgSpec:g,finalize:O,embedOptions:n}}async function k9e(e,t,n){const i=t.unit.chart,a=250,r=150,o=n.getPanes().overlayPane;let s=0;t.unit.orientation==="perpendicular"&&(s=90),e.edges.forEach(async l=>{const u=l.attributes,d=Object.entries(u||{}).map(([P,R])=>({category:P,value:R}));let c=l.bearing;if(c=(c%360+360)%360,c<180){const P={lat:l.point0.lat,lon:l.point0.lon};l.point0.lat=l.point1.lat,l.point0.lon=l.point1.lon,l.point1.lat=P.lat,l.point1.lon=P.lon,c=(c-180+360)%360}l.bearing=c;const g=l.bearing%180,v=Math.abs(g-90)<45;let b,x;t.unit.orientation==="parallel"?v?(b=-100,x=0):(b=-180,x=20):t.unit.orientation==="perpendicular"&&(b=-200,x=25);let[k,w]=[n.latLngToLayerPoint([l.point0.lat,l.point0.lon]),n.latLngToLayerPoint([l.point1.lat,l.point1.lon])];const E={x:(k.x+w.x)/2,y:(k.y+w.y)/2};let T=l.bearing+90+s;const O="t"+(E.x+E.y+"").replace(".","").replace("-","")+"svg",D=`translate(${E.x-a/2+b},${E.y-r/2+x}) rotate(${T},${a/2},${r/2})`;await P$({pane:o,chartSpec:i,dataValues:d,id:O,transform:D}),n.on("move zoom",async()=>{[k,w]=[n.latLngToLayerPoint([l.point0.lat,l.point0.lon]),n.latLngToLayerPoint([l.point1.lat,l.point1.lon])];const P={x:(k.x+w.x)/2,y:(k.y+w.y)/2},R=`translate(${P.x-a/2+b},${P.y-r/2+x}) rotate(${T},${a/2},${r/2})`;await P$({pane:o,chartSpec:i,dataValues:d,id:O,transform:R})})})}async function $9e(e,t,n){const i=t.unit.chart,a=150,r=150,o=n.getPanes().overlayPane;e.forEach(async s=>{const l=Object.entries(s.attributes).filter(([g])=>g!=="lat"&&g!=="lon").map(([g,v])=>({category:g,value:v})),u=n.latLngToLayerPoint([s.lat,s.lon]),d="t"+(s.lat+s.lon+"").replace(".","").replace("-","")+"svg",c=`translate(${u.x-a/2},${u.y-r/2})`;await P$({pane:o,chartSpec:i,dataValues:l,id:d,transform:c}),n.on("move zoom",async()=>{const g=n.latLngToLayerPoint([s.lat,s.lon]),v=`translate(${g.x-a/2},${g.y-r/2})`;await P$({pane:o,chartSpec:i,dataValues:l,id:d,transform:v})})})}async function P$({pane:e,chartSpec:t,dataValues:n,id:i,transform:a}){var d;const r=JSON.parse(JSON.stringify(t));r.data={values:n};const o=document.createElement("div");o.id=`vg-temp-${i}`,o.style.position="absolute",o.style.visibility="hidden",document.body.appendChild(o);const l=(await _9e(`#${o.id}`,r,{renderer:"svg",actions:!1})).view._el.querySelector("svg");if(!l){document.body.removeChild(o);return}const u=yg(e).select(`#${i}`);u.empty()?(d=yg(e).append("svg").attr("class","vega-lite-svg").attr("id",i).attr("width",l.getAttribute("width")||150).attr("height",l.getAttribute("height")||150).attr("transform",a).node())==null||d.appendChild(l.cloneNode(!0)):u.attr("transform",a)}const E9e=({parsedSpec:e})=>{var x,k,w,E;const t=gi.useRef(null),n=gi.useRef(null),i=gi.useRef([]),[a,r]=gi.useState(null),[o,s]=gi.useState(((k=(x=e[0])==null?void 0:x.zoom)==null?void 0:k[0])??17),[l,u]=gi.useState(0),[d,c]=gi.useState(null),g=gi.useRef({left:0,right:0});gi.useEffect(()=>{var D,P;const T=(P=(D=e[0])==null?void 0:D.query)==null?void 0:P.address;let O=!1;return(async()=>{if(T)try{const M=await(await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(T)}&format=json&limit=1`)).json();!O&&M&&M.length>0&&c({lat:parseFloat(M[0].lat),lon:parseFloat(M[0].lon)})}catch(R){O||console.error("Error geocoding address:",R)}else c(null)})(),()=>{O=!0}},[(E=(w=e[0])==null?void 0:w.query)==null?void 0:E.address]),gi.useEffect(()=>{let T=!1,O=null;return(async()=>{const D=await pk(e[0].data.physical.path);T||(O=oye(t.current,D[0].point0.lat,D[0].point0.lon,o),O.createPane("mimicStreetPane"),O.getPane("mimicStreetPane").style.zIndex="350",r(O))})(),()=>{T=!0,O&&O.remove()}},[]),gi.useEffect(()=>{if(a)return(async()=>{var T,O;n.current&&(a.removeLayer(n.current),n.current=null),a.getPane("mimicStreetPane")||(a.createPane("mimicStreetPane"),a.getPane("mimicStreetPane").style.zIndex="450");try{const D=await pk(e[0].data.physical.path);if(D){const R={type:"FeatureCollection",features:D.map(M=>({type:"Feature",geometry:{type:"LineString",coordinates:[[M.point0.lon,M.point0.lat],[M.point1.lon,M.point1.lat]]},properties:{Bearing:M.bearing,Length:M.length}}))};n.current=ub.geoJSON(R,{pane:"mimicStreetPane",style:{color:((O=(T=e[0])==null?void 0:T.map)==null?void 0:O.streetColor)||"#d3d3d6",weight:0,opacity:.8}}).addTo(a)}}catch(D){console.error("Failed to load mimic street GeoJSON:",D)}})(),()=>{n.current&&a&&(a.removeLayer(n.current),n.current=null)}},[a,e]),gi.useEffect(()=>{var T,O;if(a){g.current.left=0,g.current.right=0,((O=(T=e[0])==null?void 0:T.map)==null?void 0:O.streetWidth)!==void 0&&u(e[0].map.streetWidth),tq(".vega-lite-svg").remove(),a.off("move zoom"),u(0),i.current.forEach(D=>{D.options&&D.options.pane==="mimicStreetPane"||a.removeLayer(D)}),i.current=[];for(let D=0;D<e.length;D++){const P=e[D];P.unit.type==="segment"?v(a,P,i,g):P.unit.type==="node"&&b(a,P,i)}return()=>{tq(".vega-lite-svg").remove(),a.off("move zoom"),i.current.forEach(D=>{a.hasLayer(D)&&a.removeLayer(D)}),i.current=[]}}},[a,e]),gi.useEffect(()=>{n.current&&n.current.eachLayer(T=>{var P,R,M,q,H,z;const O=(R=(P=e[0])==null?void 0:P.map)==null?void 0:R.streetWidth;let D=!0;if(d){const Q=hr([d.lon,d.lat]),te=Im(T.feature.geometry.coordinates);Jme(Q,te,{units:"meters"})>Number((q=(M=e[0])==null?void 0:M.query)==null?void 0:q.radius)&&(D=!1)}T.setStyle({color:((z=(H=e[0])==null?void 0:H.map)==null?void 0:z.streetColor)||"#d3d3d6",weight:D?l:O,opacity:.8})})},[l,e,d]);const v=async(T,O,D,P)=>{try{let R=function(){const W=sye(T)*(O.unit.alignment==="left"?P.current.left:P.current.right),j=bye(Q.edges,O.unit,Q,te,W,O.relation.type,T);_ye(O.unit.method,z,j)};const M=O.unit.alignment==="center"?"overlayPane":`${O.unit.alignment}-${O.unit.orientation}`;aye(T,M),yg(T.getPanes()[M]).selectAll("svg").remove();const q=ub.svg({pane:M}).addTo(T);q.layerGroup=O.unit.alignment;const z=yg(T.getPanes()[M]).select("svg").selectAll("g.leaflet-zoom-hide").data([null]).join("g").attr("class","leaflet-zoom-hide");O.unit.alignment==="left"&&P.current.left++,console.log("alignmentCountersRef.current.left",P.current.left),O.unit.alignment==="right"&&P.current.right++,console.log("alignmentCountersRef.current.right",P.current.right);const{processedEdges:Q,thematicData:te}=await mye(O);O.unit.chart?await k9e(Q,O,T):(R(),rye(T,R),D.current.push(q))}catch(R){console.error(`Error rendering segment layer for ${O.data.physical.path}:`,R)}},b=async(T,O,D)=>{try{const{nodesList:P,thematicData:R}=await yye(O),M=ub.svg().addTo(T),q=yg(T.getPanes().overlayPane).select("svg").append("g").attr("class","leaflet-zoom-hide");async function H(){q.selectAll("*").remove(),O.unit.chart?await $9e(P,O,T):xye(P,q,O.unit,R.attributeStats,T)}return await H(),T.on("moveend",H),T.on("zoomend",H),M.onRemove=()=>{T.off("moveend",H),T.off("zoomend",H)},D.current.push(M),M}catch(P){console.error(`Error rendering node layer for ${O.data.physical.path}:`,P)}};return Li.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[Li.jsx("div",{ref:t,id:"map",style:{height:"100%",width:"100%"}}),Li.jsx("div",{id:"vis",style:{visibility:"hidden",position:"absolute",top:0,left:0,zIndex:-1}}),Li.jsxs("div",{style:{position:"absolute",right:"20px",top:"5%",zIndex:500,background:"rgba(255,255,255,0.8)",padding:"10px",borderRadius:"5px"},children:[Li.jsxs("label",{htmlFor:"widthSlider",children:["Street Width: ",l]}),Li.jsx("br",{}),Li.jsx("input",{id:"widthSlider",type:"range",min:"0",max:"100",value:l,onChange:T=>u(Number(T.target.value))})]})]})};function Tie(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var XR={exports:{}},Aie={},ys={},$m={},N0={},mt={},R_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(E){if(super(),!e.IDENTIFIER.test(E))throw new Error("CodeGen: name must be a valid identifier");this.str=E}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class i extends t{constructor(E){super(),this._items=typeof E=="string"?[E]:E}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const E=this._items[0];return E===""||E==='""'}get str(){var E;return(E=this._str)!==null&&E!==void 0?E:this._str=this._items.reduce((T,O)=>`${T}${O}`,"")}get names(){var E;return(E=this._names)!==null&&E!==void 0?E:this._names=this._items.reduce((T,O)=>(O instanceof n&&(T[O.str]=(T[O.str]||0)+1),T),{})}}e._Code=i,e.nil=new i("");function a(w,...E){const T=[w[0]];let O=0;for(;O<E.length;)s(T,E[O]),T.push(w[++O]);return new i(T)}e._=a;const r=new i("+");function o(w,...E){const T=[v(w[0])];let O=0;for(;O<E.length;)T.push(r),s(T,E[O]),T.push(r,v(w[++O]));return l(T),new i(T)}e.str=o;function s(w,E){E instanceof i?w.push(...E._items):E instanceof n?w.push(E):w.push(c(E))}e.addCodeArg=s;function l(w){let E=1;for(;E<w.length-1;){if(w[E]===r){const T=u(w[E-1],w[E+1]);if(T!==void 0){w.splice(E-1,3,T);continue}w[E++]="+"}E++}}function u(w,E){if(E==='""')return w;if(w==='""')return E;if(typeof w=="string")return E instanceof n||w[w.length-1]!=='"'?void 0:typeof E!="string"?`${w.slice(0,-1)}${E}"`:E[0]==='"'?w.slice(0,-1)+E.slice(1):void 0;if(typeof E=="string"&&E[0]==='"'&&!(w instanceof n))return`"${w}${E.slice(1)}`}function d(w,E){return E.emptyStr()?w:w.emptyStr()?E:o`${w}${E}`}e.strConcat=d;function c(w){return typeof w=="number"||typeof w=="boolean"||w===null?w:v(Array.isArray(w)?w.join(","):w)}function g(w){return new i(v(w))}e.stringify=g;function v(w){return JSON.stringify(w).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=v;function b(w){return typeof w=="string"&&e.IDENTIFIER.test(w)?new i(`.${w}`):a`[${w}]`}e.getProperty=b;function x(w){if(typeof w=="string"&&e.IDENTIFIER.test(w))return new i(`${w}`);throw new Error(`CodeGen: invalid export name: ${w}, use explicit $id name mapping`)}e.getEsmExportName=x;function k(w){return new i(w.toString())}e.regexpCode=k})(R_);var ZR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=R_;class n extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var i;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(i||(e.UsedValueState=i={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class a{constructor({prefixes:u,parent:d}={}){this._names={},this._prefixes=u,this._parent=d}toName(u){return u instanceof t.Name?u:this.name(u)}name(u){return new t.Name(this._newName(u))}_newName(u){const d=this._names[u]||this._nameGroup(u);return`${u}${d.index++}`}_nameGroup(u){var d,c;if(!((c=(d=this._parent)===null||d===void 0?void 0:d._prefixes)===null||c===void 0)&&c.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}e.Scope=a;class r extends t.Name{constructor(u,d){super(d),this.prefix=u}setValue(u,{property:d,itemIndex:c}){this.value=u,this.scopePath=(0,t._)`.${new t.Name(d)}[${c}]`}}e.ValueScopeName=r;const o=(0,t._)`\n`;class s extends a{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?o:t.nil}}get(){return this._scope}name(u){return new r(u,this._newName(u))}value(u,d){var c;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const g=this.toName(u),{prefix:v}=g,b=(c=d.key)!==null&&c!==void 0?c:d.ref;let x=this._values[v];if(x){const E=x.get(b);if(E)return E}else x=this._values[v]=new Map;x.set(b,g);const k=this._scope[v]||(this._scope[v]=[]),w=k.length;return k[w]=d.ref,g.setValue(d,{property:v,itemIndex:w}),g}getValue(u,d){const c=this._values[u];if(c)return c.get(d)}scopeRefs(u,d=this._values){return this._reduceValues(d,c=>{if(c.scopePath===void 0)throw new Error(`CodeGen: name "${c}" has no value`);return(0,t._)`${u}${c.scopePath}`})}scopeCode(u=this._values,d,c){return this._reduceValues(u,g=>{if(g.value===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return g.value.code},d,c)}_reduceValues(u,d,c={},g){let v=t.nil;for(const b in u){const x=u[b];if(!x)continue;const k=c[b]=c[b]||new Map;x.forEach(w=>{if(k.has(w))return;k.set(w,i.Started);let E=d(w);if(E){const T=this.opts.es5?e.varKinds.var:e.varKinds.const;v=(0,t._)`${v}${T} ${w} = ${E};${this.opts._n}`}else if(E=g==null?void 0:g(w))v=(0,t._)`${v}${E}${this.opts._n}`;else throw new n(w);k.set(w,i.Completed)})}return v}}e.ValueScope=s})(ZR);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=R_,n=ZR;var i=R_;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return i.Name}});var a=ZR;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class r{optimizeNodes(){return this}optimizeNames(U,X){return this}}class o extends r{constructor(U,X,ue){super(),this.varKind=U,this.name=X,this.rhs=ue}render({es5:U,_n:X}){const ue=U?n.varKinds.var:this.varKind,Ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ue} ${this.name}${Ce};`+X}optimizeNames(U,X){if(U[this.name.str])return this.rhs&&(this.rhs=W(this.rhs,U,X)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class s extends r{constructor(U,X,ue){super(),this.lhs=U,this.rhs=X,this.sideEffects=ue}render({_n:U}){return`${this.lhs} = ${this.rhs};`+U}optimizeNames(U,X){if(!(this.lhs instanceof t.Name&&!U[this.lhs.str]&&!this.sideEffects))return this.rhs=W(this.rhs,U,X),this}get names(){const U=this.lhs instanceof t.Name?{}:{...this.lhs.names};return te(U,this.rhs)}}class l extends s{constructor(U,X,ue,Ce){super(U,ue,Ce),this.op=X}render({_n:U}){return`${this.lhs} ${this.op}= ${this.rhs};`+U}}class u extends r{constructor(U){super(),this.label=U,this.names={}}render({_n:U}){return`${this.label}:`+U}}class d extends r{constructor(U){super(),this.label=U,this.names={}}render({_n:U}){return`break${this.label?` ${this.label}`:""};`+U}}class c extends r{constructor(U){super(),this.error=U}render({_n:U}){return`throw ${this.error};`+U}get names(){return this.error.names}}class g extends r{constructor(U){super(),this.code=U}render({_n:U}){return`${this.code};`+U}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(U,X){return this.code=W(this.code,U,X),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class v extends r{constructor(U=[]){super(),this.nodes=U}render(U){return this.nodes.reduce((X,ue)=>X+ue.render(U),"")}optimizeNodes(){const{nodes:U}=this;let X=U.length;for(;X--;){const ue=U[X].optimizeNodes();Array.isArray(ue)?U.splice(X,1,...ue):ue?U[X]=ue:U.splice(X,1)}return U.length>0?this:void 0}optimizeNames(U,X){const{nodes:ue}=this;let Ce=ue.length;for(;Ce--;){const ie=ue[Ce];ie.optimizeNames(U,X)||(j(U,ie.names),ue.splice(Ce,1))}return ue.length>0?this:void 0}get names(){return this.nodes.reduce((U,X)=>Q(U,X.names),{})}}class b extends v{render(U){return"{"+U._n+super.render(U)+"}"+U._n}}class x extends v{}class k extends b{}k.kind="else";class w extends b{constructor(U,X){super(X),this.condition=U}render(U){let X=`if(${this.condition})`+super.render(U);return this.else&&(X+="else "+this.else.render(U)),X}optimizeNodes(){super.optimizeNodes();const U=this.condition;if(U===!0)return this.nodes;let X=this.else;if(X){const ue=X.optimizeNodes();X=this.else=Array.isArray(ue)?new k(ue):ue}if(X)return U===!1?X instanceof w?X:X.nodes:this.nodes.length?this:new w(K(U),X instanceof w?[X]:X.nodes);if(!(U===!1||!this.nodes.length))return this}optimizeNames(U,X){var ue;if(this.else=(ue=this.else)===null||ue===void 0?void 0:ue.optimizeNames(U,X),!!(super.optimizeNames(U,X)||this.else))return this.condition=W(this.condition,U,X),this}get names(){const U=super.names;return te(U,this.condition),this.else&&Q(U,this.else.names),U}}w.kind="if";class E extends b{}E.kind="for";class T extends E{constructor(U){super(),this.iteration=U}render(U){return`for(${this.iteration})`+super.render(U)}optimizeNames(U,X){if(super.optimizeNames(U,X))return this.iteration=W(this.iteration,U,X),this}get names(){return Q(super.names,this.iteration.names)}}class O extends E{constructor(U,X,ue,Ce){super(),this.varKind=U,this.name=X,this.from=ue,this.to=Ce}render(U){const X=U.es5?n.varKinds.var:this.varKind,{name:ue,from:Ce,to:ie}=this;return`for(${X} ${ue}=${Ce}; ${ue}<${ie}; ${ue}++)`+super.render(U)}get names(){const U=te(super.names,this.from);return te(U,this.to)}}class D extends E{constructor(U,X,ue,Ce){super(),this.loop=U,this.varKind=X,this.name=ue,this.iterable=Ce}render(U){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(U)}optimizeNames(U,X){if(super.optimizeNames(U,X))return this.iterable=W(this.iterable,U,X),this}get names(){return Q(super.names,this.iterable.names)}}class P extends b{constructor(U,X,ue){super(),this.name=U,this.args=X,this.async=ue}render(U){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(U)}}P.kind="func";class R extends v{render(U){return"return "+super.render(U)}}R.kind="return";class M extends b{render(U){let X="try"+super.render(U);return this.catch&&(X+=this.catch.render(U)),this.finally&&(X+=this.finally.render(U)),X}optimizeNodes(){var U,X;return super.optimizeNodes(),(U=this.catch)===null||U===void 0||U.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(U,X){var ue,Ce;return super.optimizeNames(U,X),(ue=this.catch)===null||ue===void 0||ue.optimizeNames(U,X),(Ce=this.finally)===null||Ce===void 0||Ce.optimizeNames(U,X),this}get names(){const U=super.names;return this.catch&&Q(U,this.catch.names),this.finally&&Q(U,this.finally.names),U}}class q extends b{constructor(U){super(),this.error=U}render(U){return`catch(${this.error})`+super.render(U)}}q.kind="catch";class H extends b{render(U){return"finally"+super.render(U)}}H.kind="finally";class z{constructor(U,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?`
`:""},this._extScope=U,this._scope=new n.Scope({parent:U}),this._nodes=[new x]}toString(){return this._root.render(this.opts)}name(U){return this._scope.name(U)}scopeName(U){return this._extScope.name(U)}scopeValue(U,X){const ue=this._extScope.value(U,X);return(this._values[ue.prefix]||(this._values[ue.prefix]=new Set)).add(ue),ue}getScopeValue(U,X){return this._extScope.getValue(U,X)}scopeRefs(U){return this._extScope.scopeRefs(U,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(U,X,ue,Ce){const ie=this._scope.toName(X);return ue!==void 0&&Ce&&(this._constants[ie.str]=ue),this._leafNode(new o(U,ie,ue)),ie}const(U,X,ue){return this._def(n.varKinds.const,U,X,ue)}let(U,X,ue){return this._def(n.varKinds.let,U,X,ue)}var(U,X,ue){return this._def(n.varKinds.var,U,X,ue)}assign(U,X,ue){return this._leafNode(new s(U,X,ue))}add(U,X){return this._leafNode(new l(U,e.operators.ADD,X))}code(U){return typeof U=="function"?U():U!==t.nil&&this._leafNode(new g(U)),this}object(...U){const X=["{"];for(const[ue,Ce]of U)X.length>1&&X.push(","),X.push(ue),(ue!==Ce||this.opts.es5)&&(X.push(":"),(0,t.addCodeArg)(X,Ce));return X.push("}"),new t._Code(X)}if(U,X,ue){if(this._blockNode(new w(U)),X&&ue)this.code(X).else().code(ue).endIf();else if(X)this.code(X).endIf();else if(ue)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(U){return this._elseNode(new w(U))}else(){return this._elseNode(new k)}endIf(){return this._endBlockNode(w,k)}_for(U,X){return this._blockNode(U),X&&this.code(X).endFor(),this}for(U,X){return this._for(new T(U),X)}forRange(U,X,ue,Ce,ie=this.opts.es5?n.varKinds.var:n.varKinds.let){const _e=this._scope.toName(U);return this._for(new O(ie,_e,X,ue),()=>Ce(_e))}forOf(U,X,ue,Ce=n.varKinds.const){const ie=this._scope.toName(U);if(this.opts.es5){const _e=X instanceof t.Name?X:this.var("_arr",X);return this.forRange("_i",0,(0,t._)`${_e}.length`,xe=>{this.var(ie,(0,t._)`${_e}[${xe}]`),ue(ie)})}return this._for(new D("of",Ce,ie,X),()=>ue(ie))}forIn(U,X,ue,Ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(U,(0,t._)`Object.keys(${X})`,ue);const ie=this._scope.toName(U);return this._for(new D("in",Ce,ie,X),()=>ue(ie))}endFor(){return this._endBlockNode(E)}label(U){return this._leafNode(new u(U))}break(U){return this._leafNode(new d(U))}return(U){const X=new R;if(this._blockNode(X),this.code(U),X.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(U,X,ue){if(!X&&!ue)throw new Error('CodeGen: "try" without "catch" and "finally"');const Ce=new M;if(this._blockNode(Ce),this.code(U),X){const ie=this.name("e");this._currNode=Ce.catch=new q(ie),X(ie)}return ue&&(this._currNode=Ce.finally=new H,this.code(ue)),this._endBlockNode(q,H)}throw(U){return this._leafNode(new c(U))}block(U,X){return this._blockStarts.push(this._nodes.length),U&&this.code(U).endBlock(X),this}endBlock(U){const X=this._blockStarts.pop();if(X===void 0)throw new Error("CodeGen: not in self-balancing block");const ue=this._nodes.length-X;if(ue<0||U!==void 0&&ue!==U)throw new Error(`CodeGen: wrong number of nodes: ${ue} vs ${U} expected`);return this._nodes.length=X,this}func(U,X=t.nil,ue,Ce){return this._blockNode(new P(U,X,ue)),Ce&&this.code(Ce).endFunc(),this}endFunc(){return this._endBlockNode(P)}optimize(U=1){for(;U-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(U){return this._currNode.nodes.push(U),this}_blockNode(U){this._currNode.nodes.push(U),this._nodes.push(U)}_endBlockNode(U,X){const ue=this._currNode;if(ue instanceof U||X&&ue instanceof X)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${X?`${U.kind}/${X.kind}`:U.kind}"`)}_elseNode(U){const X=this._currNode;if(!(X instanceof w))throw new Error('CodeGen: "else" without "if"');return this._currNode=X.else=U,this}get _root(){return this._nodes[0]}get _currNode(){const U=this._nodes;return U[U.length-1]}set _currNode(U){const X=this._nodes;X[X.length-1]=U}}e.CodeGen=z;function Q(ne,U){for(const X in U)ne[X]=(ne[X]||0)+(U[X]||0);return ne}function te(ne,U){return U instanceof t._CodeOrName?Q(ne,U.names):ne}function W(ne,U,X){if(ne instanceof t.Name)return ue(ne);if(!Ce(ne))return ne;return new t._Code(ne._items.reduce((ie,_e)=>(_e instanceof t.Name&&(_e=ue(_e)),_e instanceof t._Code?ie.push(..._e._items):ie.push(_e),ie),[]));function ue(ie){const _e=X[ie.str];return _e===void 0||U[ie.str]!==1?ie:(delete U[ie.str],_e)}function Ce(ie){return ie instanceof t._Code&&ie._items.some(_e=>_e instanceof t.Name&&U[_e.str]===1&&X[_e.str]!==void 0)}}function j(ne,U){for(const X in U)ne[X]=(ne[X]||0)-(U[X]||0)}function K(ne){return typeof ne=="boolean"||typeof ne=="number"||ne===null?!ne:(0,t._)`!${ae(ne)}`}e.not=K;const se=Z(e.operators.AND);function ee(...ne){return ne.reduce(se)}e.and=ee;const oe=Z(e.operators.OR);function Y(...ne){return ne.reduce(oe)}e.or=Y;function Z(ne){return(U,X)=>U===t.nil?X:X===t.nil?U:(0,t._)`${ae(U)} ${ne} ${ae(X)}`}function ae(ne){return ne instanceof t.Name?ne:(0,t._)`(${ne})`}})(mt);var qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.checkStrictMode=qe.getErrorPath=qe.Type=qe.useFunc=qe.setEvaluated=qe.evaluatedPropsToName=qe.mergeEvaluated=qe.eachItem=qe.unescapeJsonPointer=qe.escapeJsonPointer=qe.escapeFragment=qe.unescapeFragment=qe.schemaRefOrVal=qe.schemaHasRulesButRef=qe.schemaHasRules=qe.checkUnknownRules=qe.alwaysValidSchema=qe.toHash=void 0;const nn=mt,S9e=R_;function T9e(e){const t={};for(const n of e)t[n]=!0;return t}qe.toHash=T9e;function A9e(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Oie(e,t),!Die(t,e.self.RULES.all))}qe.alwaysValidSchema=A9e;function Oie(e,t=e.schema){const{opts:n,self:i}=e;if(!n.strictSchema||typeof t=="boolean")return;const a=i.RULES.keywords;for(const r in t)a[r]||Iie(e,`unknown keyword: "${r}"`)}qe.checkUnknownRules=Oie;function Die(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}qe.schemaHasRules=Die;function O9e(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}qe.schemaHasRulesButRef=O9e;function D9e({topSchemaRef:e,schemaPath:t},n,i,a){if(!a){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,nn._)`${n}`}return(0,nn._)`${e}${t}${(0,nn.getProperty)(i)}`}qe.schemaRefOrVal=D9e;function C9e(e){return Cie(decodeURIComponent(e))}qe.unescapeFragment=C9e;function R9e(e){return encodeURIComponent(j3(e))}qe.escapeFragment=R9e;function j3(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}qe.escapeJsonPointer=j3;function Cie(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}qe.unescapeJsonPointer=Cie;function I9e(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}qe.eachItem=I9e;function B7({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:i}){return(a,r,o,s)=>{const l=o===void 0?r:o instanceof nn.Name?(r instanceof nn.Name?e(a,r,o):t(a,r,o),o):r instanceof nn.Name?(t(a,o,r),r):n(r,o);return s===nn.Name&&!(l instanceof nn.Name)?i(a,l):l}}qe.mergeEvaluated={props:B7({mergeNames:(e,t,n)=>e.if((0,nn._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,nn._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,nn._)`${n} || {}`).code((0,nn._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,nn._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,nn._)`${n} || {}`),U3(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Rie}),items:B7({mergeNames:(e,t,n)=>e.if((0,nn._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,nn._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,nn._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,nn._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Rie(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,nn._)`{}`);return t!==void 0&&U3(e,n,t),n}qe.evaluatedPropsToName=Rie;function U3(e,t,n){Object.keys(n).forEach(i=>e.assign((0,nn._)`${t}${(0,nn.getProperty)(i)}`,!0))}qe.setEvaluated=U3;const V7={};function P9e(e,t){return e.scopeValue("func",{ref:t,code:V7[t.code]||(V7[t.code]=new S9e._Code(t.code))})}qe.useFunc=P9e;var JR;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(JR||(qe.Type=JR={}));function F9e(e,t,n){if(e instanceof nn.Name){const i=t===JR.Num;return n?i?(0,nn._)`"[" + ${e} + "]"`:(0,nn._)`"['" + ${e} + "']"`:i?(0,nn._)`"/" + ${e}`:(0,nn._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,nn.getProperty)(e).toString():"/"+j3(e)}qe.getErrorPath=F9e;function Iie(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}qe.checkStrictMode=Iie;var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});const na=mt,N9e={data:new na.Name("data"),valCxt:new na.Name("valCxt"),instancePath:new na.Name("instancePath"),parentData:new na.Name("parentData"),parentDataProperty:new na.Name("parentDataProperty"),rootData:new na.Name("rootData"),dynamicAnchors:new na.Name("dynamicAnchors"),vErrors:new na.Name("vErrors"),errors:new na.Name("errors"),this:new na.Name("this"),self:new na.Name("self"),scope:new na.Name("scope"),json:new na.Name("json"),jsonPos:new na.Name("jsonPos"),jsonLen:new na.Name("jsonLen"),jsonPart:new na.Name("jsonPart")};Vl.default=N9e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=mt,n=qe,i=Vl;e.keywordError={message:({keyword:k})=>(0,t.str)`must pass "${k}" keyword validation`},e.keyword$DataError={message:({keyword:k,schemaType:w})=>w?(0,t.str)`"${k}" keyword must be ${w} ($data)`:(0,t.str)`"${k}" keyword is invalid ($data)`};function a(k,w=e.keywordError,E,T){const{it:O}=k,{gen:D,compositeRule:P,allErrors:R}=O,M=c(k,w,E);T??(P||R)?l(D,M):u(O,(0,t._)`[${M}]`)}e.reportError=a;function r(k,w=e.keywordError,E){const{it:T}=k,{gen:O,compositeRule:D,allErrors:P}=T,R=c(k,w,E);l(O,R),D||P||u(T,i.default.vErrors)}e.reportExtraError=r;function o(k,w){k.assign(i.default.errors,w),k.if((0,t._)`${i.default.vErrors} !== null`,()=>k.if(w,()=>k.assign((0,t._)`${i.default.vErrors}.length`,w),()=>k.assign(i.default.vErrors,null)))}e.resetErrorsCount=o;function s({gen:k,keyword:w,schemaValue:E,data:T,errsCount:O,it:D}){if(O===void 0)throw new Error("ajv implementation error");const P=k.name("err");k.forRange("i",O,i.default.errors,R=>{k.const(P,(0,t._)`${i.default.vErrors}[${R}]`),k.if((0,t._)`${P}.instancePath === undefined`,()=>k.assign((0,t._)`${P}.instancePath`,(0,t.strConcat)(i.default.instancePath,D.errorPath))),k.assign((0,t._)`${P}.schemaPath`,(0,t.str)`${D.errSchemaPath}/${w}`),D.opts.verbose&&(k.assign((0,t._)`${P}.schema`,E),k.assign((0,t._)`${P}.data`,T))})}e.extendErrors=s;function l(k,w){const E=k.const("err",w);k.if((0,t._)`${i.default.vErrors} === null`,()=>k.assign(i.default.vErrors,(0,t._)`[${E}]`),(0,t._)`${i.default.vErrors}.push(${E})`),k.code((0,t._)`${i.default.errors}++`)}function u(k,w){const{gen:E,validateName:T,schemaEnv:O}=k;O.$async?E.throw((0,t._)`new ${k.ValidationError}(${w})`):(E.assign((0,t._)`${T}.errors`,w),E.return(!1))}const d={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function c(k,w,E){const{createErrors:T}=k.it;return T===!1?(0,t._)`{}`:g(k,w,E)}function g(k,w,E={}){const{gen:T,it:O}=k,D=[v(O,E),b(k,E)];return x(k,w,D),T.object(...D)}function v({errorPath:k},{instancePath:w}){const E=w?(0,t.str)`${k}${(0,n.getErrorPath)(w,n.Type.Str)}`:k;return[i.default.instancePath,(0,t.strConcat)(i.default.instancePath,E)]}function b({keyword:k,it:{errSchemaPath:w}},{schemaPath:E,parentSchema:T}){let O=T?w:(0,t.str)`${w}/${k}`;return E&&(O=(0,t.str)`${O}${(0,n.getErrorPath)(E,n.Type.Str)}`),[d.schemaPath,O]}function x(k,{params:w,message:E},T){const{keyword:O,data:D,schemaValue:P,it:R}=k,{opts:M,propertyName:q,topSchemaRef:H,schemaPath:z}=R;T.push([d.keyword,O],[d.params,typeof w=="function"?w(k):w||(0,t._)`{}`]),M.messages&&T.push([d.message,typeof E=="function"?E(k):E]),M.verbose&&T.push([d.schema,P],[d.parentSchema,(0,t._)`${H}${z}`],[i.default.data,D]),q&&T.push([d.propertyName,q])}})(N0);Object.defineProperty($m,"__esModule",{value:!0});$m.boolOrEmptySchema=$m.topBoolOrEmptySchema=void 0;const L9e=N0,M9e=mt,z9e=Vl,q9e={message:"boolean schema is false"};function j9e(e){const{gen:t,schema:n,validateName:i}=e;n===!1?Pie(e,!1):typeof n=="object"&&n.$async===!0?t.return(z9e.default.data):(t.assign((0,M9e._)`${i}.errors`,null),t.return(!0))}$m.topBoolOrEmptySchema=j9e;function U9e(e,t){const{gen:n,schema:i}=e;i===!1?(n.var(t,!1),Pie(e)):n.var(t,!0)}$m.boolOrEmptySchema=U9e;function Pie(e,t){const{gen:n,data:i}=e,a={gen:n,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,L9e.reportError)(a,q9e,void 0,t)}var ti={},Ih={};Object.defineProperty(Ih,"__esModule",{value:!0});Ih.getRules=Ih.isJSONType=void 0;const B9e=["string","number","integer","boolean","null","object","array"],V9e=new Set(B9e);function W9e(e){return typeof e=="string"&&V9e.has(e)}Ih.isJSONType=W9e;function G9e(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Ih.getRules=G9e;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.shouldUseRule=Ru.shouldUseGroup=Ru.schemaHasRulesForType=void 0;function H9e({schema:e,self:t},n){const i=t.RULES.types[n];return i&&i!==!0&&Fie(e,i)}Ru.schemaHasRulesForType=H9e;function Fie(e,t){return t.rules.some(n=>Nie(e,n))}Ru.shouldUseGroup=Fie;function Nie(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(i=>e[i]!==void 0))}Ru.shouldUseRule=Nie;Object.defineProperty(ti,"__esModule",{value:!0});ti.reportTypeError=ti.checkDataTypes=ti.checkDataType=ti.coerceAndCheckDataType=ti.getJSONTypes=ti.getSchemaTypes=ti.DataType=void 0;const Y9e=Ih,X9e=Ru,Z9e=N0,ht=mt,Lie=qe;var Ag;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Ag||(ti.DataType=Ag={}));function J9e(e){const t=Mie(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ti.getSchemaTypes=J9e;function Mie(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Y9e.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ti.getJSONTypes=Mie;function K9e(e,t){const{gen:n,data:i,opts:a}=e,r=Q9e(t,a.coerceTypes),o=t.length>0&&!(r.length===0&&t.length===1&&(0,X9e.schemaHasRulesForType)(e,t[0]));if(o){const s=B3(t,i,a.strictNumbers,Ag.Wrong);n.if(s,()=>{r.length?eje(e,t,r):V3(e)})}return o}ti.coerceAndCheckDataType=K9e;const zie=new Set(["string","number","integer","boolean","null"]);function Q9e(e,t){return t?e.filter(n=>zie.has(n)||t==="array"&&n==="array"):[]}function eje(e,t,n){const{gen:i,data:a,opts:r}=e,o=i.let("dataType",(0,ht._)`typeof ${a}`),s=i.let("coerced",(0,ht._)`undefined`);r.coerceTypes==="array"&&i.if((0,ht._)`${o} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>i.assign(a,(0,ht._)`${a}[0]`).assign(o,(0,ht._)`typeof ${a}`).if(B3(t,a,r.strictNumbers),()=>i.assign(s,a))),i.if((0,ht._)`${s} !== undefined`);for(const u of n)(zie.has(u)||u==="array"&&r.coerceTypes==="array")&&l(u);i.else(),V3(e),i.endIf(),i.if((0,ht._)`${s} !== undefined`,()=>{i.assign(a,s),tje(e,s)});function l(u){switch(u){case"string":i.elseIf((0,ht._)`${o} == "number" || ${o} == "boolean"`).assign(s,(0,ht._)`"" + ${a}`).elseIf((0,ht._)`${a} === null`).assign(s,(0,ht._)`""`);return;case"number":i.elseIf((0,ht._)`${o} == "boolean" || ${a} === null
              || (${o} == "string" && ${a} && ${a} == +${a})`).assign(s,(0,ht._)`+${a}`);return;case"integer":i.elseIf((0,ht._)`${o} === "boolean" || ${a} === null
              || (${o} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(s,(0,ht._)`+${a}`);return;case"boolean":i.elseIf((0,ht._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(s,!1).elseIf((0,ht._)`${a} === "true" || ${a} === 1`).assign(s,!0);return;case"null":i.elseIf((0,ht._)`${a} === "" || ${a} === 0 || ${a} === false`),i.assign(s,null);return;case"array":i.elseIf((0,ht._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${a} === null`).assign(s,(0,ht._)`[${a}]`)}}}function tje({gen:e,parentData:t,parentDataProperty:n},i){e.if((0,ht._)`${t} !== undefined`,()=>e.assign((0,ht._)`${t}[${n}]`,i))}function KR(e,t,n,i=Ag.Correct){const a=i===Ag.Correct?ht.operators.EQ:ht.operators.NEQ;let r;switch(e){case"null":return(0,ht._)`${t} ${a} null`;case"array":r=(0,ht._)`Array.isArray(${t})`;break;case"object":r=(0,ht._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":r=o((0,ht._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":r=o();break;default:return(0,ht._)`typeof ${t} ${a} ${e}`}return i===Ag.Correct?r:(0,ht.not)(r);function o(s=ht.nil){return(0,ht.and)((0,ht._)`typeof ${t} == "number"`,s,n?(0,ht._)`isFinite(${t})`:ht.nil)}}ti.checkDataType=KR;function B3(e,t,n,i){if(e.length===1)return KR(e[0],t,n,i);let a;const r=(0,Lie.toHash)(e);if(r.array&&r.object){const o=(0,ht._)`typeof ${t} != "object"`;a=r.null?o:(0,ht._)`!${t} || ${o}`,delete r.null,delete r.array,delete r.object}else a=ht.nil;r.number&&delete r.integer;for(const o in r)a=(0,ht.and)(a,KR(o,t,n,i));return a}ti.checkDataTypes=B3;const nje={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,ht._)`{type: ${e}}`:(0,ht._)`{type: ${t}}`};function V3(e){const t=ije(e);(0,Z9e.reportError)(t,nje)}ti.reportTypeError=V3;function ije(e){const{gen:t,data:n,schema:i}=e,a=(0,Lie.schemaRefOrVal)(e,i,"type");return{gen:t,keyword:"type",data:n,schema:i.type,schemaCode:a,schemaValue:a,parentSchema:i,params:{},it:e}}var vS={};Object.defineProperty(vS,"__esModule",{value:!0});vS.assignDefaults=void 0;const zp=mt,aje=qe;function rje(e,t){const{properties:n,items:i}=e.schema;if(t==="object"&&n)for(const a in n)W7(e,a,n[a].default);else t==="array"&&Array.isArray(i)&&i.forEach((a,r)=>W7(e,r,a.default))}vS.assignDefaults=rje;function W7(e,t,n){const{gen:i,compositeRule:a,data:r,opts:o}=e;if(n===void 0)return;const s=(0,zp._)`${r}${(0,zp.getProperty)(t)}`;if(a){(0,aje.checkStrictMode)(e,`default is ignored for: ${s}`);return}let l=(0,zp._)`${s} === undefined`;o.useDefaults==="empty"&&(l=(0,zp._)`${l} || ${s} === null || ${s} === ""`),i.if(l,(0,zp._)`${s} = ${(0,zp.stringify)(n)}`)}var fl={},bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.validateUnion=bt.validateArray=bt.usePattern=bt.callValidateCode=bt.schemaProperties=bt.allSchemaProperties=bt.noPropertyInData=bt.propertyInData=bt.isOwnProperty=bt.hasPropFunc=bt.reportMissingProp=bt.checkMissingProp=bt.checkReportMissingProp=void 0;const pn=mt,W3=qe,wd=Vl,oje=qe;function sje(e,t){const{gen:n,data:i,it:a}=e;n.if(H3(n,i,t,a.opts.ownProperties),()=>{e.setParams({missingProperty:(0,pn._)`${t}`},!0),e.error()})}bt.checkReportMissingProp=sje;function lje({gen:e,data:t,it:{opts:n}},i,a){return(0,pn.or)(...i.map(r=>(0,pn.and)(H3(e,t,r,n.ownProperties),(0,pn._)`${a} = ${r}`)))}bt.checkMissingProp=lje;function uje(e,t){e.setParams({missingProperty:t},!0),e.error()}bt.reportMissingProp=uje;function qie(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,pn._)`Object.prototype.hasOwnProperty`})}bt.hasPropFunc=qie;function G3(e,t,n){return(0,pn._)`${qie(e)}.call(${t}, ${n})`}bt.isOwnProperty=G3;function dje(e,t,n,i){const a=(0,pn._)`${t}${(0,pn.getProperty)(n)} !== undefined`;return i?(0,pn._)`${a} && ${G3(e,t,n)}`:a}bt.propertyInData=dje;function H3(e,t,n,i){const a=(0,pn._)`${t}${(0,pn.getProperty)(n)} === undefined`;return i?(0,pn.or)(a,(0,pn.not)(G3(e,t,n))):a}bt.noPropertyInData=H3;function jie(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}bt.allSchemaProperties=jie;function fje(e,t){return jie(t).filter(n=>!(0,W3.alwaysValidSchema)(e,t[n]))}bt.schemaProperties=fje;function cje({schemaCode:e,data:t,it:{gen:n,topSchemaRef:i,schemaPath:a,errorPath:r},it:o},s,l,u){const d=u?(0,pn._)`${e}, ${t}, ${i}${a}`:t,c=[[wd.default.instancePath,(0,pn.strConcat)(wd.default.instancePath,r)],[wd.default.parentData,o.parentData],[wd.default.parentDataProperty,o.parentDataProperty],[wd.default.rootData,wd.default.rootData]];o.opts.dynamicRef&&c.push([wd.default.dynamicAnchors,wd.default.dynamicAnchors]);const g=(0,pn._)`${d}, ${n.object(...c)}`;return l!==pn.nil?(0,pn._)`${s}.call(${l}, ${g})`:(0,pn._)`${s}(${g})`}bt.callValidateCode=cje;const hje=(0,pn._)`new RegExp`;function pje({gen:e,it:{opts:t}},n){const i=t.unicodeRegExp?"u":"",{regExp:a}=t.code,r=a(n,i);return e.scopeValue("pattern",{key:r.toString(),ref:r,code:(0,pn._)`${a.code==="new RegExp"?hje:(0,oje.useFunc)(e,a)}(${n}, ${i})`})}bt.usePattern=pje;function gje(e){const{gen:t,data:n,keyword:i,it:a}=e,r=t.name("valid");if(a.allErrors){const s=t.let("valid",!0);return o(()=>t.assign(s,!1)),s}return t.var(r,!0),o(()=>t.break()),r;function o(s){const l=t.const("len",(0,pn._)`${n}.length`);t.forRange("i",0,l,u=>{e.subschema({keyword:i,dataProp:u,dataPropType:W3.Type.Num},r),t.if((0,pn.not)(r),s)})}}bt.validateArray=gje;function mje(e){const{gen:t,schema:n,keyword:i,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(s=>(0,W3.alwaysValidSchema)(a,s))&&!a.opts.unevaluated)return;const r=t.let("valid",!1),o=t.name("_valid");t.block(()=>n.forEach((s,l)=>{const u=e.subschema({keyword:i,schemaProp:l,compositeRule:!0},o);t.assign(r,(0,pn._)`${r} || ${o}`),e.mergeValidEvaluated(u,o)||t.if((0,pn.not)(r))})),e.result(r,()=>e.reset(),()=>e.error(!0))}bt.validateUnion=mje;Object.defineProperty(fl,"__esModule",{value:!0});fl.validateKeywordUsage=fl.validSchemaType=fl.funcKeywordCode=fl.macroKeywordCode=void 0;const Ia=mt,Nc=Vl,yje=bt,vje=N0;function bje(e,t){const{gen:n,keyword:i,schema:a,parentSchema:r,it:o}=e,s=t.macro.call(o.self,a,r,o),l=Uie(n,i,s);o.opts.validateSchema!==!1&&o.self.validateSchema(s,!0);const u=n.name("valid");e.subschema({schema:s,schemaPath:Ia.nil,errSchemaPath:`${o.errSchemaPath}/${i}`,topSchemaRef:l,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}fl.macroKeywordCode=bje;function _je(e,t){var n;const{gen:i,keyword:a,schema:r,parentSchema:o,$data:s,it:l}=e;wje(l,t);const u=!s&&t.compile?t.compile.call(l.self,r,o,l):t.validate,d=Uie(i,a,u),c=i.let("valid");e.block$data(c,g),e.ok((n=t.valid)!==null&&n!==void 0?n:c);function g(){if(t.errors===!1)x(),t.modifying&&G7(e),k(()=>e.error());else{const w=t.async?v():b();t.modifying&&G7(e),k(()=>xje(e,w))}}function v(){const w=i.let("ruleErrs",null);return i.try(()=>x((0,Ia._)`await `),E=>i.assign(c,!1).if((0,Ia._)`${E} instanceof ${l.ValidationError}`,()=>i.assign(w,(0,Ia._)`${E}.errors`),()=>i.throw(E))),w}function b(){const w=(0,Ia._)`${d}.errors`;return i.assign(w,null),x(Ia.nil),w}function x(w=t.async?(0,Ia._)`await `:Ia.nil){const E=l.opts.passContext?Nc.default.this:Nc.default.self,T=!("compile"in t&&!s||t.schema===!1);i.assign(c,(0,Ia._)`${w}${(0,yje.callValidateCode)(e,d,E,T)}`,t.modifying)}function k(w){var E;i.if((0,Ia.not)((E=t.valid)!==null&&E!==void 0?E:c),w)}}fl.funcKeywordCode=_je;function G7(e){const{gen:t,data:n,it:i}=e;t.if(i.parentData,()=>t.assign(n,(0,Ia._)`${i.parentData}[${i.parentDataProperty}]`))}function xje(e,t){const{gen:n}=e;n.if((0,Ia._)`Array.isArray(${t})`,()=>{n.assign(Nc.default.vErrors,(0,Ia._)`${Nc.default.vErrors} === null ? ${t} : ${Nc.default.vErrors}.concat(${t})`).assign(Nc.default.errors,(0,Ia._)`${Nc.default.vErrors}.length`),(0,vje.extendErrors)(e)},()=>e.error())}function wje({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Uie(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Ia.stringify)(n)})}function kje(e,t,n=!1){return!t.length||t.some(i=>i==="array"?Array.isArray(e):i==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==i||n&&typeof e>"u")}fl.validSchemaType=kje;function $je({schema:e,opts:t,self:n,errSchemaPath:i},a,r){if(Array.isArray(a.keyword)?!a.keyword.includes(r):a.keyword!==r)throw new Error("ajv implementation error");const o=a.dependencies;if(o!=null&&o.some(s=>!Object.prototype.hasOwnProperty.call(e,s)))throw new Error(`parent schema must have dependencies of ${r}: ${o.join(",")}`);if(a.validateSchema&&!a.validateSchema(e[r])){const s=`keyword "${r}" value is invalid at path "${i}": `+n.errorsText(a.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(s);else throw new Error(s)}}fl.validateKeywordUsage=$je;var cf={};Object.defineProperty(cf,"__esModule",{value:!0});cf.extendSubschemaMode=cf.extendSubschemaData=cf.getSubschema=void 0;const ol=mt,Bie=qe;function Eje(e,{keyword:t,schemaProp:n,schema:i,schemaPath:a,errSchemaPath:r,topSchemaRef:o}){if(t!==void 0&&i!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const s=e.schema[t];return n===void 0?{schema:s,schemaPath:(0,ol._)`${e.schemaPath}${(0,ol.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:s[n],schemaPath:(0,ol._)`${e.schemaPath}${(0,ol.getProperty)(t)}${(0,ol.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Bie.escapeFragment)(n)}`}}if(i!==void 0){if(a===void 0||r===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:a,topSchemaRef:o,errSchemaPath:r}}throw new Error('either "keyword" or "schema" must be passed')}cf.getSubschema=Eje;function Sje(e,t,{dataProp:n,dataPropType:i,data:a,dataTypes:r,propertyName:o}){if(a!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:s}=t;if(n!==void 0){const{errorPath:u,dataPathArr:d,opts:c}=t,g=s.let("data",(0,ol._)`${t.data}${(0,ol.getProperty)(n)}`,!0);l(g),e.errorPath=(0,ol.str)`${u}${(0,Bie.getErrorPath)(n,i,c.jsPropertySyntax)}`,e.parentDataProperty=(0,ol._)`${n}`,e.dataPathArr=[...d,e.parentDataProperty]}if(a!==void 0){const u=a instanceof ol.Name?a:s.let("data",a,!0);l(u),o!==void 0&&(e.propertyName=o)}r&&(e.dataTypes=r);function l(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}cf.extendSubschemaData=Sje;function Tje(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:i,createErrors:a,allErrors:r}){i!==void 0&&(e.compositeRule=i),a!==void 0&&(e.createErrors=a),r!==void 0&&(e.allErrors=r),e.jtdDiscriminator=t,e.jtdMetadata=n}cf.extendSubschemaMode=Tje;var qi={},Vie=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,a,r;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(a=i;a--!==0;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(r=Object.keys(t),i=r.length,i!==Object.keys(n).length)return!1;for(a=i;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,r[a]))return!1;for(a=i;a--!==0;){var o=r[a];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n},Wie={exports:{}},Xd=Wie.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var i=typeof n=="function"?n:n.pre||function(){},a=n.post||function(){};pw(t,i,a,e,"",e)};Xd.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Xd.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Xd.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Xd.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function pw(e,t,n,i,a,r,o,s,l,u){if(i&&typeof i=="object"&&!Array.isArray(i)){t(i,a,r,o,s,l,u);for(var d in i){var c=i[d];if(Array.isArray(c)){if(d in Xd.arrayKeywords)for(var g=0;g<c.length;g++)pw(e,t,n,c[g],a+"/"+d+"/"+g,r,a,d,i,g)}else if(d in Xd.propsKeywords){if(c&&typeof c=="object")for(var v in c)pw(e,t,n,c[v],a+"/"+d+"/"+Aje(v),r,a,d,i,v)}else(d in Xd.keywords||e.allKeys&&!(d in Xd.skipKeywords))&&pw(e,t,n,c,a+"/"+d,r,a,d,i)}n(i,a,r,o,s,l,u)}}function Aje(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var Oje=Wie.exports;Object.defineProperty(qi,"__esModule",{value:!0});qi.getSchemaRefs=qi.resolveUrl=qi.normalizeId=qi._getFullPath=qi.getFullPath=qi.inlineRef=void 0;const Dje=qe,Cje=Vie,Rje=Oje,Ije=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Pje(e,t=!0){return typeof e=="boolean"?!0:t===!0?!QR(e):t?Gie(e)<=t:!1}qi.inlineRef=Pje;const Fje=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function QR(e){for(const t in e){if(Fje.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(QR)||typeof n=="object"&&QR(n))return!0}return!1}function Gie(e){let t=0;for(const n in e)if(n==="$ref"||(t++,!Ije.has(n)&&(typeof e[n]=="object"&&(0,Dje.eachItem)(e[n],i=>t+=Gie(i)),t===1/0)))return 1/0;return t}function Hie(e,t="",n){n!==!1&&(t=Og(t));const i=e.parse(t);return Yie(e,i)}qi.getFullPath=Hie;function Yie(e,t){return e.serialize(t).split("#")[0]+"#"}qi._getFullPath=Yie;const Nje=/#\/?$/;function Og(e){return e?e.replace(Nje,""):""}qi.normalizeId=Og;function Lje(e,t,n){return n=Og(n),e.resolve(t,n)}qi.resolveUrl=Lje;const Mje=/^[a-z_][-a-z0-9._]*$/i;function zje(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:i}=this.opts,a=Og(e[n]||t),r={"":a},o=Hie(i,a,!1),s={},l=new Set;return Rje(e,{allKeys:!0},(c,g,v,b)=>{if(b===void 0)return;const x=o+g;let k=r[b];typeof c[n]=="string"&&(k=w.call(this,c[n])),E.call(this,c.$anchor),E.call(this,c.$dynamicAnchor),r[g]=k;function w(T){const O=this.opts.uriResolver.resolve;if(T=Og(k?O(k,T):T),l.has(T))throw d(T);l.add(T);let D=this.refs[T];return typeof D=="string"&&(D=this.refs[D]),typeof D=="object"?u(c,D.schema,T):T!==Og(x)&&(T[0]==="#"?(u(c,s[T],T),s[T]=c):this.refs[T]=x),T}function E(T){if(typeof T=="string"){if(!Mje.test(T))throw new Error(`invalid anchor "${T}"`);w.call(this,`#${T}`)}}}),s;function u(c,g,v){if(g!==void 0&&!Cje(c,g))throw d(v)}function d(c){return new Error(`reference "${c}" resolves to more than one schema`)}}qi.getSchemaRefs=zje;Object.defineProperty(ys,"__esModule",{value:!0});ys.getData=ys.KeywordCxt=ys.validateFunctionCode=void 0;const Xie=$m,H7=ti,Y3=Ru,F$=ti,qje=vS,Sb=fl,mO=cf,He=mt,it=Vl,jje=qi,Iu=qe,gv=N0;function Uje(e){if(Kie(e)&&(Qie(e),Jie(e))){Wje(e);return}Zie(e,()=>(0,Xie.topBoolOrEmptySchema)(e))}ys.validateFunctionCode=Uje;function Zie({gen:e,validateName:t,schema:n,schemaEnv:i,opts:a},r){a.code.es5?e.func(t,(0,He._)`${it.default.data}, ${it.default.valCxt}`,i.$async,()=>{e.code((0,He._)`"use strict"; ${Y7(n,a)}`),Vje(e,a),e.code(r)}):e.func(t,(0,He._)`${it.default.data}, ${Bje(a)}`,i.$async,()=>e.code(Y7(n,a)).code(r))}function Bje(e){return(0,He._)`{${it.default.instancePath}="", ${it.default.parentData}, ${it.default.parentDataProperty}, ${it.default.rootData}=${it.default.data}${e.dynamicRef?(0,He._)`, ${it.default.dynamicAnchors}={}`:He.nil}}={}`}function Vje(e,t){e.if(it.default.valCxt,()=>{e.var(it.default.instancePath,(0,He._)`${it.default.valCxt}.${it.default.instancePath}`),e.var(it.default.parentData,(0,He._)`${it.default.valCxt}.${it.default.parentData}`),e.var(it.default.parentDataProperty,(0,He._)`${it.default.valCxt}.${it.default.parentDataProperty}`),e.var(it.default.rootData,(0,He._)`${it.default.valCxt}.${it.default.rootData}`),t.dynamicRef&&e.var(it.default.dynamicAnchors,(0,He._)`${it.default.valCxt}.${it.default.dynamicAnchors}`)},()=>{e.var(it.default.instancePath,(0,He._)`""`),e.var(it.default.parentData,(0,He._)`undefined`),e.var(it.default.parentDataProperty,(0,He._)`undefined`),e.var(it.default.rootData,it.default.data),t.dynamicRef&&e.var(it.default.dynamicAnchors,(0,He._)`{}`)})}function Wje(e){const{schema:t,opts:n,gen:i}=e;Zie(e,()=>{n.$comment&&t.$comment&&tae(e),Zje(e),i.let(it.default.vErrors,null),i.let(it.default.errors,0),n.unevaluated&&Gje(e),eae(e),Qje(e)})}function Gje(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,He._)`${n}.evaluated`),t.if((0,He._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,He._)`${e.evaluated}.props`,(0,He._)`undefined`)),t.if((0,He._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,He._)`${e.evaluated}.items`,(0,He._)`undefined`))}function Y7(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,He._)`/*# sourceURL=${n} */`:He.nil}function Hje(e,t){if(Kie(e)&&(Qie(e),Jie(e))){Yje(e,t);return}(0,Xie.boolOrEmptySchema)(e,t)}function Jie({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function Kie(e){return typeof e.schema!="boolean"}function Yje(e,t){const{schema:n,gen:i,opts:a}=e;a.$comment&&n.$comment&&tae(e),Jje(e),Kje(e);const r=i.const("_errs",it.default.errors);eae(e,r),i.var(t,(0,He._)`${r} === ${it.default.errors}`)}function Qie(e){(0,Iu.checkUnknownRules)(e),Xje(e)}function eae(e,t){if(e.opts.jtd)return X7(e,[],!1,t);const n=(0,H7.getSchemaTypes)(e.schema),i=(0,H7.coerceAndCheckDataType)(e,n);X7(e,n,!i,t)}function Xje(e){const{schema:t,errSchemaPath:n,opts:i,self:a}=e;t.$ref&&i.ignoreKeywordsWithRef&&(0,Iu.schemaHasRulesButRef)(t,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function Zje(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Iu.checkStrictMode)(e,"default is ignored in the schema root")}function Jje(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,jje.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Kje(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function tae({gen:e,schemaEnv:t,schema:n,errSchemaPath:i,opts:a}){const r=n.$comment;if(a.$comment===!0)e.code((0,He._)`${it.default.self}.logger.log(${r})`);else if(typeof a.$comment=="function"){const o=(0,He.str)`${i}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code((0,He._)`${it.default.self}.opts.$comment(${r}, ${o}, ${s}.schema)`)}}function Qje(e){const{gen:t,schemaEnv:n,validateName:i,ValidationError:a,opts:r}=e;n.$async?t.if((0,He._)`${it.default.errors} === 0`,()=>t.return(it.default.data),()=>t.throw((0,He._)`new ${a}(${it.default.vErrors})`)):(t.assign((0,He._)`${i}.errors`,it.default.vErrors),r.unevaluated&&eUe(e),t.return((0,He._)`${it.default.errors} === 0`))}function eUe({gen:e,evaluated:t,props:n,items:i}){n instanceof He.Name&&e.assign((0,He._)`${t}.props`,n),i instanceof He.Name&&e.assign((0,He._)`${t}.items`,i)}function X7(e,t,n,i){const{gen:a,schema:r,data:o,allErrors:s,opts:l,self:u}=e,{RULES:d}=u;if(r.$ref&&(l.ignoreKeywordsWithRef||!(0,Iu.schemaHasRulesButRef)(r,d))){a.block(()=>aae(e,"$ref",d.all.$ref.definition));return}l.jtd||tUe(e,t),a.block(()=>{for(const g of d.rules)c(g);c(d.post)});function c(g){(0,Y3.shouldUseGroup)(r,g)&&(g.type?(a.if((0,F$.checkDataType)(g.type,o,l.strictNumbers)),Z7(e,g),t.length===1&&t[0]===g.type&&n&&(a.else(),(0,F$.reportTypeError)(e)),a.endIf()):Z7(e,g),s||a.if((0,He._)`${it.default.errors} === ${i||0}`))}}function Z7(e,t){const{gen:n,schema:i,opts:{useDefaults:a}}=e;a&&(0,qje.assignDefaults)(e,t.type),n.block(()=>{for(const r of t.rules)(0,Y3.shouldUseRule)(i,r)&&aae(e,r.keyword,r.definition,t.type)})}function tUe(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(nUe(e,t),e.opts.allowUnionTypes||iUe(e,t),aUe(e,e.dataTypes))}function nUe(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{nae(e.dataTypes,n)||X3(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),oUe(e,t)}}function iUe(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&X3(e,"use allowUnionTypes to allow union type keyword")}function aUe(e,t){const n=e.self.RULES.all;for(const i in n){const a=n[i];if(typeof a=="object"&&(0,Y3.shouldUseRule)(e.schema,a)){const{type:r}=a.definition;r.length&&!r.some(o=>rUe(t,o))&&X3(e,`missing type "${r.join(",")}" for keyword "${i}"`)}}}function rUe(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function nae(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function oUe(e,t){const n=[];for(const i of e.dataTypes)nae(t,i)?n.push(i):t.includes("integer")&&i==="number"&&n.push("integer");e.dataTypes=n}function X3(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Iu.checkStrictMode)(e,t,e.opts.strictTypes)}class iae{constructor(t,n,i){if((0,Sb.validateKeywordUsage)(t,n,i),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=i,this.data=t.data,this.schema=t.schema[i],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Iu.schemaRefOrVal)(t,this.schema,i,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",rae(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Sb.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${i} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",it.default.errors))}result(t,n,i){this.failResult((0,He.not)(t),n,i)}failResult(t,n,i){this.gen.if(t),i?i():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,He.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,He._)`${n} !== undefined && (${(0,He.or)(this.invalid$data(),t)})`)}error(t,n,i){if(n){this.setParams(n),this._error(t,i),this.setParams({});return}this._error(t,i)}_error(t,n){(t?gv.reportExtraError:gv.reportError)(this,this.def.error,n)}$dataError(){(0,gv.reportError)(this,this.def.$dataError||gv.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,gv.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,i=He.nil){this.gen.block(()=>{this.check$data(t,i),n()})}check$data(t=He.nil,n=He.nil){if(!this.$data)return;const{gen:i,schemaCode:a,schemaType:r,def:o}=this;i.if((0,He.or)((0,He._)`${a} === undefined`,n)),t!==He.nil&&i.assign(t,!0),(r.length||o.validateSchema)&&(i.elseIf(this.invalid$data()),this.$dataError(),t!==He.nil&&i.assign(t,!1)),i.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:i,def:a,it:r}=this;return(0,He.or)(o(),s());function o(){if(i.length){if(!(n instanceof He.Name))throw new Error("ajv implementation error");const l=Array.isArray(i)?i:[i];return(0,He._)`${(0,F$.checkDataTypes)(l,n,r.opts.strictNumbers,F$.DataType.Wrong)}`}return He.nil}function s(){if(a.validateSchema){const l=t.scopeValue("validate$data",{ref:a.validateSchema});return(0,He._)`!${l}(${n})`}return He.nil}}subschema(t,n){const i=(0,mO.getSubschema)(this.it,t);(0,mO.extendSubschemaData)(i,this.it,t),(0,mO.extendSubschemaMode)(i,t);const a={...this.it,...i,items:void 0,props:void 0};return Hje(a,n),a}mergeEvaluated(t,n){const{it:i,gen:a}=this;i.opts.unevaluated&&(i.props!==!0&&t.props!==void 0&&(i.props=Iu.mergeEvaluated.props(a,t.props,i.props,n)),i.items!==!0&&t.items!==void 0&&(i.items=Iu.mergeEvaluated.items(a,t.items,i.items,n)))}mergeValidEvaluated(t,n){const{it:i,gen:a}=this;if(i.opts.unevaluated&&(i.props!==!0||i.items!==!0))return a.if(n,()=>this.mergeEvaluated(t,He.Name)),!0}}ys.KeywordCxt=iae;function aae(e,t,n,i){const a=new iae(e,n,t);"code"in n?n.code(a,i):a.$data&&n.validate?(0,Sb.funcKeywordCode)(a,n):"macro"in n?(0,Sb.macroKeywordCode)(a,n):(n.compile||n.validate)&&(0,Sb.funcKeywordCode)(a,n)}const sUe=/^\/(?:[^~]|~0|~1)*$/,lUe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function rae(e,{dataLevel:t,dataNames:n,dataPathArr:i}){let a,r;if(e==="")return it.default.rootData;if(e[0]==="/"){if(!sUe.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);a=e,r=it.default.rootData}else{const u=lUe.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);const d=+u[1];if(a=u[2],a==="#"){if(d>=t)throw new Error(l("property/index",d));return i[t-d]}if(d>t)throw new Error(l("data",d));if(r=n[t-d],!a)return r}let o=r;const s=a.split("/");for(const u of s)u&&(r=(0,He._)`${r}${(0,He.getProperty)((0,Iu.unescapeJsonPointer)(u))}`,o=(0,He._)`${o} && ${r}`);return o;function l(u,d){return`Cannot access ${u} ${d} levels up, current level is ${t}`}}ys.getData=rae;var L0={};Object.defineProperty(L0,"__esModule",{value:!0});class uUe extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}L0.default=uUe;var ay={};Object.defineProperty(ay,"__esModule",{value:!0});const yO=qi;class dUe extends Error{constructor(t,n,i,a){super(a||`can't resolve reference ${i} from id ${n}`),this.missingRef=(0,yO.resolveUrl)(t,n,i),this.missingSchema=(0,yO.normalizeId)((0,yO.getFullPath)(t,this.missingRef))}}ay.default=dUe;var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.resolveSchema=dr.getCompilingSchema=dr.resolveRef=dr.compileSchema=dr.SchemaEnv=void 0;const Xo=mt,fUe=L0,Ec=Vl,ss=qi,J7=qe,cUe=ys;class bS{constructor(t){var n;this.refs={},this.dynamicAnchors={};let i;typeof t.schema=="object"&&(i=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,ss.normalizeId)(i==null?void 0:i[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=i==null?void 0:i.$async,this.refs={}}}dr.SchemaEnv=bS;function Z3(e){const t=oae.call(this,e);if(t)return t;const n=(0,ss.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:i,lines:a}=this.opts.code,{ownProperties:r}=this.opts,o=new Xo.CodeGen(this.scope,{es5:i,lines:a,ownProperties:r});let s;e.$async&&(s=o.scopeValue("Error",{ref:fUe.default,code:(0,Xo._)`require("ajv/dist/runtime/validation_error").default`}));const l=o.scopeName("validate");e.validateName=l;const u={gen:o,allErrors:this.opts.allErrors,data:Ec.default.data,parentData:Ec.default.parentData,parentDataProperty:Ec.default.parentDataProperty,dataNames:[Ec.default.data],dataPathArr:[Xo.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Xo.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:s,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Xo.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Xo._)`""`,opts:this.opts,self:this};let d;try{this._compilations.add(e),(0,cUe.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);const c=o.toString();d=`${o.scopeRefs(Ec.default.scope)}return ${c}`,this.opts.code.process&&(d=this.opts.code.process(d,e));const g=new Function(`${Ec.default.self}`,`${Ec.default.scope}`,d)(this,this.scope.get());if(this.scope.value(l,{ref:g}),g.errors=null,g.schema=e.schema,g.schemaEnv=e,e.$async&&(g.$async=!0),this.opts.code.source===!0&&(g.source={validateName:l,validateCode:c,scopeValues:o._values}),this.opts.unevaluated){const{props:v,items:b}=u;g.evaluated={props:v instanceof Xo.Name?void 0:v,items:b instanceof Xo.Name?void 0:b,dynamicProps:v instanceof Xo.Name,dynamicItems:b instanceof Xo.Name},g.source&&(g.source.evaluated=(0,Xo.stringify)(g.evaluated))}return e.validate=g,e}catch(c){throw delete e.validate,delete e.validateName,d&&this.logger.error("Error compiling schema, function code:",d),c}finally{this._compilations.delete(e)}}dr.compileSchema=Z3;function hUe(e,t,n){var i;n=(0,ss.resolveUrl)(this.opts.uriResolver,t,n);const a=e.refs[n];if(a)return a;let r=mUe.call(this,e,n);if(r===void 0){const o=(i=e.localRefs)===null||i===void 0?void 0:i[n],{schemaId:s}=this.opts;o&&(r=new bS({schema:o,schemaId:s,root:e,baseId:t}))}if(r!==void 0)return e.refs[n]=pUe.call(this,r)}dr.resolveRef=hUe;function pUe(e){return(0,ss.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Z3.call(this,e)}function oae(e){for(const t of this._compilations)if(gUe(t,e))return t}dr.getCompilingSchema=oae;function gUe(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function mUe(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||_S.call(this,e,t)}function _S(e,t){const n=this.opts.uriResolver.parse(t),i=(0,ss._getFullPath)(this.opts.uriResolver,n);let a=(0,ss.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&i===a)return vO.call(this,n,e);const r=(0,ss.normalizeId)(i),o=this.refs[r]||this.schemas[r];if(typeof o=="string"){const s=_S.call(this,e,o);return typeof(s==null?void 0:s.schema)!="object"?void 0:vO.call(this,n,s)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||Z3.call(this,o),r===(0,ss.normalizeId)(t)){const{schema:s}=o,{schemaId:l}=this.opts,u=s[l];return u&&(a=(0,ss.resolveUrl)(this.opts.uriResolver,a,u)),new bS({schema:s,schemaId:l,root:e,baseId:a})}return vO.call(this,n,o)}}dr.resolveSchema=_S;const yUe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function vO(e,{baseId:t,schema:n,root:i}){var a;if(((a=e.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(const s of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const l=n[(0,J7.unescapeFragment)(s)];if(l===void 0)return;n=l;const u=typeof n=="object"&&n[this.opts.schemaId];!yUe.has(s)&&u&&(t=(0,ss.resolveUrl)(this.opts.uriResolver,t,u))}let r;if(typeof n!="boolean"&&n.$ref&&!(0,J7.schemaHasRulesButRef)(n,this.RULES)){const s=(0,ss.resolveUrl)(this.opts.uriResolver,t,n.$ref);r=_S.call(this,i,s)}const{schemaId:o}=this.opts;if(r=r||new bS({schema:n,schemaId:o,root:i,baseId:t}),r.schema!==r.root.schema)return r}const vUe="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",bUe="Meta-schema for $data reference (JSON AnySchema extension proposal)",_Ue="object",xUe=["$data"],wUe={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},kUe=!1,$Ue={$id:vUe,description:bUe,type:_Ue,required:xUe,properties:wUe,additionalProperties:kUe};var J3={},xS={exports:{}};const EUe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var SUe={HEX:EUe};const{HEX:TUe}=SUe,AUe=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function sae(e){if(uae(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(AUe)||[],[n]=t;return n?{host:DUe(n,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function K7(e,t=!1){let n="",i=!0;for(const a of e){if(TUe[a]===void 0)return;a!=="0"&&i===!0&&(i=!1),i||(n+=a)}return t&&n.length===0&&(n="0"),n}function OUe(e){let t=0;const n={error:!1,address:"",zone:""},i=[],a=[];let r=!1,o=!1,s=!1;function l(){if(a.length){if(r===!1){const u=K7(a);if(u!==void 0)i.push(u);else return n.error=!0,!1}a.length=0}return!0}for(let u=0;u<e.length;u++){const d=e[u];if(!(d==="["||d==="]"))if(d===":"){if(o===!0&&(s=!0),!l())break;if(t++,i.push(":"),t>7){n.error=!0;break}u-1>=0&&e[u-1]===":"&&(o=!0);continue}else if(d==="%"){if(!l())break;r=!0}else{a.push(d);continue}}return a.length&&(r?n.zone=a.join(""):s?i.push(a.join("")):i.push(K7(a))),n.address=i.join(""),n}function lae(e){if(uae(e,":")<2)return{host:e,isIPV6:!1};const t=OUe(e);if(t.error)return{host:e,isIPV6:!1};{let n=t.address,i=t.address;return t.zone&&(n+="%"+t.zone,i+="%25"+t.zone),{host:n,escapedHost:i,isIPV6:!0}}}function DUe(e,t){let n="",i=!0;const a=e.length;for(let r=0;r<a;r++){const o=e[r];o==="0"&&i?(r+1<=a&&e[r+1]===t||r+1===a)&&(n+=o,i=!1):(o===t?i=!0:i=!1,n+=o)}return n}function uae(e,t){let n=0;for(let i=0;i<e.length;i++)e[i]===t&&n++;return n}const Q7=/^\.\.?\//u,e6=/^\/\.(?:\/|$)/u,t6=/^\/\.\.(?:\/|$)/u,CUe=/^\/?(?:.|\n)*?(?=\/|$)/u;function RUe(e){const t=[];for(;e.length;)if(e.match(Q7))e=e.replace(Q7,"");else if(e.match(e6))e=e.replace(e6,"/");else if(e.match(t6))e=e.replace(t6,"/"),t.pop();else if(e==="."||e==="..")e="";else{const n=e.match(CUe);if(n){const i=n[0];e=e.slice(i.length),t.push(i)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function IUe(e,t){const n=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=n(e.scheme)),e.userinfo!==void 0&&(e.userinfo=n(e.userinfo)),e.host!==void 0&&(e.host=n(e.host)),e.path!==void 0&&(e.path=n(e.path)),e.query!==void 0&&(e.query=n(e.query)),e.fragment!==void 0&&(e.fragment=n(e.fragment)),e}function PUe(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let n=unescape(e.host);const i=sae(n);if(i.isIPV4)n=i.host;else{const a=lae(i.host);a.isIPV6===!0?n=`[${a.escapedHost}]`:n=e.host}t.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var FUe={recomposeAuthority:PUe,normalizeComponentEncoding:IUe,removeDotSegments:RUe,normalizeIPv4:sae,normalizeIPv6:lae};const NUe=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,LUe=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function dae(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function fae(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function cae(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function MUe(e){return e.secure=dae(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function zUe(e){if((e.port===(dae(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}function qUe(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(LUe);if(n){const i=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const a=`${i}:${t.nid||e.nid}`,r=K3[a];e.path=void 0,r&&(e=r.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function jUe(e,t){const n=t.scheme||e.scheme||"urn",i=e.nid.toLowerCase(),a=`${n}:${t.nid||i}`,r=K3[a];r&&(e=r.serialize(e,t));const o=e,s=e.nss;return o.path=`${i||t.nid}:${s}`,t.skipEscape=!0,o}function UUe(e,t){const n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!NUe.test(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function BUe(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const hae={scheme:"http",domainHost:!0,parse:fae,serialize:cae},VUe={scheme:"https",domainHost:hae.domainHost,parse:fae,serialize:cae},gw={scheme:"ws",domainHost:!0,parse:MUe,serialize:zUe},WUe={scheme:"wss",domainHost:gw.domainHost,parse:gw.parse,serialize:gw.serialize},GUe={scheme:"urn",parse:qUe,serialize:jUe,skipNormalize:!0},HUe={scheme:"urn:uuid",parse:UUe,serialize:BUe,skipNormalize:!0},K3={http:hae,https:VUe,ws:gw,wss:WUe,urn:GUe,"urn:uuid":HUe};var YUe=K3;const{normalizeIPv6:XUe,normalizeIPv4:ZUe,removeDotSegments:Kv,recomposeAuthority:JUe,normalizeComponentEncoding:v1}=FUe,Q3=YUe;function KUe(e,t){return typeof e=="string"?e=cl(Hu(e,t),t):typeof e=="object"&&(e=Hu(cl(e,t),t)),e}function QUe(e,t,n){const i=Object.assign({scheme:"null"},n),a=pae(Hu(e,i),Hu(t,i),i,!0);return cl(a,{...i,skipEscape:!0})}function pae(e,t,n,i){const a={};return i||(e=Hu(cl(e,n),n),t=Hu(cl(t,n),n)),n=n||{},!n.tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=Kv(t.path||""),a.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=Kv(t.path||""),a.query=t.query):(t.path?(t.path.charAt(0)==="/"?a.path=Kv(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?a.path="/"+t.path:e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path,a.path=Kv(a.path)),a.query=t.query):(a.path=e.path,t.query!==void 0?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function eBe(e,t,n){return typeof e=="string"?(e=unescape(e),e=cl(v1(Hu(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=cl(v1(e,!0),{...n,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=cl(v1(Hu(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=cl(v1(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function cl(e,t){const n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},i=Object.assign({},t),a=[],r=Q3[(i.scheme||n.scheme||"").toLowerCase()];r&&r.serialize&&r.serialize(n,i),n.path!==void 0&&(i.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),i.reference!=="suffix"&&n.scheme&&a.push(n.scheme,":");const o=JUe(n);if(o!==void 0&&(i.reference!=="suffix"&&a.push("//"),a.push(o),n.path&&n.path.charAt(0)!=="/"&&a.push("/")),n.path!==void 0){let s=n.path;!i.absolutePath&&(!r||!r.absolutePath)&&(s=Kv(s)),o===void 0&&(s=s.replace(/^\/\//u,"/%2F")),a.push(s)}return n.query!==void 0&&a.push("?",n.query),n.fragment!==void 0&&a.push("#",n.fragment),a.join("")}const tBe=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function nBe(e){let t=0;for(let n=0,i=e.length;n<i;++n)if(t=e.charCodeAt(n),t>126||tBe[t])return!0;return!1}const iBe=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Hu(e,t){const n=Object.assign({},t),i={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},a=e.indexOf("%")!==-1;let r=!1;n.reference==="suffix"&&(e=(n.scheme?n.scheme+":":"")+"//"+e);const o=e.match(iBe);if(o){if(i.scheme=o[1],i.userinfo=o[3],i.host=o[4],i.port=parseInt(o[5],10),i.path=o[6]||"",i.query=o[7],i.fragment=o[8],isNaN(i.port)&&(i.port=o[5]),i.host){const l=ZUe(i.host);if(l.isIPV4===!1){const u=XUe(l.host);i.host=u.host.toLowerCase(),r=u.isIPV6}else i.host=l.host,r=!0}i.scheme===void 0&&i.userinfo===void 0&&i.host===void 0&&i.port===void 0&&i.query===void 0&&!i.path?i.reference="same-document":i.scheme===void 0?i.reference="relative":i.fragment===void 0?i.reference="absolute":i.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==i.reference&&(i.error=i.error||"URI is not a "+n.reference+" reference.");const s=Q3[(n.scheme||i.scheme||"").toLowerCase()];if(!n.unicodeSupport&&(!s||!s.unicodeSupport)&&i.host&&(n.domainHost||s&&s.domainHost)&&r===!1&&nBe(i.host))try{i.host=URL.domainToASCII(i.host.toLowerCase())}catch(l){i.error=i.error||"Host's domain name can not be converted to ASCII: "+l}(!s||s&&!s.skipNormalize)&&(a&&i.scheme!==void 0&&(i.scheme=unescape(i.scheme)),a&&i.host!==void 0&&(i.host=unescape(i.host)),i.path&&(i.path=escape(unescape(i.path))),i.fragment&&(i.fragment=encodeURI(decodeURIComponent(i.fragment)))),s&&s.parse&&s.parse(i,n)}else i.error=i.error||"URI can not be parsed.";return i}const ez={SCHEMES:Q3,normalize:KUe,resolve:QUe,resolveComponents:pae,equal:eBe,serialize:cl,parse:Hu};xS.exports=ez;xS.exports.default=ez;xS.exports.fastUri=ez;var aBe=xS.exports;Object.defineProperty(J3,"__esModule",{value:!0});const gae=aBe;gae.code='require("ajv/dist/runtime/uri").default';J3.default=gae;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ys;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=mt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const i=L0,a=ay,r=Ih,o=dr,s=mt,l=qi,u=ti,d=qe,c=$Ue,g=J3,v=(Y,Z)=>new RegExp(Y,Z);v.code="new RegExp";const b=["removeAdditional","useDefaults","coerceTypes"],x=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),k={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},w={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},E=200;function T(Y){var Z,ae,ne,U,X,ue,Ce,ie,_e,xe,ve,G,kt,pt,Rt,Jt,Cn,wa,Se,Wl,Ls,Ja,rd,tt,Uo;const Ka=Y.strict,Ms=(Z=Y.code)===null||Z===void 0?void 0:Z.optimize,Je=Ms===!0||Ms===void 0?1:Ms||0,od=(ne=(ae=Y.code)===null||ae===void 0?void 0:ae.regExp)!==null&&ne!==void 0?ne:v,yt=(U=Y.uriResolver)!==null&&U!==void 0?U:g.default;return{strictSchema:(ue=(X=Y.strictSchema)!==null&&X!==void 0?X:Ka)!==null&&ue!==void 0?ue:!0,strictNumbers:(ie=(Ce=Y.strictNumbers)!==null&&Ce!==void 0?Ce:Ka)!==null&&ie!==void 0?ie:!0,strictTypes:(xe=(_e=Y.strictTypes)!==null&&_e!==void 0?_e:Ka)!==null&&xe!==void 0?xe:"log",strictTuples:(G=(ve=Y.strictTuples)!==null&&ve!==void 0?ve:Ka)!==null&&G!==void 0?G:"log",strictRequired:(pt=(kt=Y.strictRequired)!==null&&kt!==void 0?kt:Ka)!==null&&pt!==void 0?pt:!1,code:Y.code?{...Y.code,optimize:Je,regExp:od}:{optimize:Je,regExp:od},loopRequired:(Rt=Y.loopRequired)!==null&&Rt!==void 0?Rt:E,loopEnum:(Jt=Y.loopEnum)!==null&&Jt!==void 0?Jt:E,meta:(Cn=Y.meta)!==null&&Cn!==void 0?Cn:!0,messages:(wa=Y.messages)!==null&&wa!==void 0?wa:!0,inlineRefs:(Se=Y.inlineRefs)!==null&&Se!==void 0?Se:!0,schemaId:(Wl=Y.schemaId)!==null&&Wl!==void 0?Wl:"$id",addUsedSchema:(Ls=Y.addUsedSchema)!==null&&Ls!==void 0?Ls:!0,validateSchema:(Ja=Y.validateSchema)!==null&&Ja!==void 0?Ja:!0,validateFormats:(rd=Y.validateFormats)!==null&&rd!==void 0?rd:!0,unicodeRegExp:(tt=Y.unicodeRegExp)!==null&&tt!==void 0?tt:!0,int32range:(Uo=Y.int32range)!==null&&Uo!==void 0?Uo:!0,uriResolver:yt}}class O{constructor(Z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,Z=this.opts={...Z,...T(Z)};const{es5:ae,lines:ne}=this.opts.code;this.scope=new s.ValueScope({scope:{},prefixes:x,es5:ae,lines:ne}),this.logger=Q(Z.logger);const U=Z.validateFormats;Z.validateFormats=!1,this.RULES=(0,r.getRules)(),D.call(this,k,Z,"NOT SUPPORTED"),D.call(this,w,Z,"DEPRECATED","warn"),this._metaOpts=H.call(this),Z.formats&&M.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),Z.keywords&&q.call(this,Z.keywords),typeof Z.meta=="object"&&this.addMetaSchema(Z.meta),R.call(this),Z.validateFormats=U}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:Z,meta:ae,schemaId:ne}=this.opts;let U=c;ne==="id"&&(U={...c},U.id=U.$id,delete U.$id),ae&&Z&&this.addMetaSchema(U,U[ne],!1)}defaultMeta(){const{meta:Z,schemaId:ae}=this.opts;return this.opts.defaultMeta=typeof Z=="object"?Z[ae]||Z:void 0}validate(Z,ae){let ne;if(typeof Z=="string"){if(ne=this.getSchema(Z),!ne)throw new Error(`no schema with key or ref "${Z}"`)}else ne=this.compile(Z);const U=ne(ae);return"$async"in ne||(this.errors=ne.errors),U}compile(Z,ae){const ne=this._addSchema(Z,ae);return ne.validate||this._compileSchemaEnv(ne)}compileAsync(Z,ae){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ne}=this.opts;return U.call(this,Z,ae);async function U(xe,ve){await X.call(this,xe.$schema);const G=this._addSchema(xe,ve);return G.validate||ue.call(this,G)}async function X(xe){xe&&!this.getSchema(xe)&&await U.call(this,{$ref:xe},!0)}async function ue(xe){try{return this._compileSchemaEnv(xe)}catch(ve){if(!(ve instanceof a.default))throw ve;return Ce.call(this,ve),await ie.call(this,ve.missingSchema),ue.call(this,xe)}}function Ce({missingSchema:xe,missingRef:ve}){if(this.refs[xe])throw new Error(`AnySchema ${xe} is loaded but ${ve} cannot be resolved`)}async function ie(xe){const ve=await _e.call(this,xe);this.refs[xe]||await X.call(this,ve.$schema),this.refs[xe]||this.addSchema(ve,xe,ae)}async function _e(xe){const ve=this._loading[xe];if(ve)return ve;try{return await(this._loading[xe]=ne(xe))}finally{delete this._loading[xe]}}}addSchema(Z,ae,ne,U=this.opts.validateSchema){if(Array.isArray(Z)){for(const ue of Z)this.addSchema(ue,void 0,ne,U);return this}let X;if(typeof Z=="object"){const{schemaId:ue}=this.opts;if(X=Z[ue],X!==void 0&&typeof X!="string")throw new Error(`schema ${ue} must be string`)}return ae=(0,l.normalizeId)(ae||X),this._checkUnique(ae),this.schemas[ae]=this._addSchema(Z,ne,ae,U,!0),this}addMetaSchema(Z,ae,ne=this.opts.validateSchema){return this.addSchema(Z,ae,!0,ne),this}validateSchema(Z,ae){if(typeof Z=="boolean")return!0;let ne;if(ne=Z.$schema,ne!==void 0&&typeof ne!="string")throw new Error("$schema must be a string");if(ne=ne||this.opts.defaultMeta||this.defaultMeta(),!ne)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const U=this.validate(ne,Z);if(!U&&ae){const X="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(X);else throw new Error(X)}return U}getSchema(Z){let ae;for(;typeof(ae=P.call(this,Z))=="string";)Z=ae;if(ae===void 0){const{schemaId:ne}=this.opts,U=new o.SchemaEnv({schema:{},schemaId:ne});if(ae=o.resolveSchema.call(this,U,Z),!ae)return;this.refs[Z]=ae}return ae.validate||this._compileSchemaEnv(ae)}removeSchema(Z){if(Z instanceof RegExp)return this._removeAllSchemas(this.schemas,Z),this._removeAllSchemas(this.refs,Z),this;switch(typeof Z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const ae=P.call(this,Z);return typeof ae=="object"&&this._cache.delete(ae.schema),delete this.schemas[Z],delete this.refs[Z],this}case"object":{const ae=Z;this._cache.delete(ae);let ne=Z[this.opts.schemaId];return ne&&(ne=(0,l.normalizeId)(ne),delete this.schemas[ne],delete this.refs[ne]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(Z){for(const ae of Z)this.addKeyword(ae);return this}addKeyword(Z,ae){let ne;if(typeof Z=="string")ne=Z,typeof ae=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),ae.keyword=ne);else if(typeof Z=="object"&&ae===void 0){if(ae=Z,ne=ae.keyword,Array.isArray(ne)&&!ne.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(W.call(this,ne,ae),!ae)return(0,d.eachItem)(ne,X=>j.call(this,X)),this;se.call(this,ae);const U={...ae,type:(0,u.getJSONTypes)(ae.type),schemaType:(0,u.getJSONTypes)(ae.schemaType)};return(0,d.eachItem)(ne,U.type.length===0?X=>j.call(this,X,U):X=>U.type.forEach(ue=>j.call(this,X,U,ue))),this}getKeyword(Z){const ae=this.RULES.all[Z];return typeof ae=="object"?ae.definition:!!ae}removeKeyword(Z){const{RULES:ae}=this;delete ae.keywords[Z],delete ae.all[Z];for(const ne of ae.rules){const U=ne.rules.findIndex(X=>X.keyword===Z);U>=0&&ne.rules.splice(U,1)}return this}addFormat(Z,ae){return typeof ae=="string"&&(ae=new RegExp(ae)),this.formats[Z]=ae,this}errorsText(Z=this.errors,{separator:ae=", ",dataVar:ne="data"}={}){return!Z||Z.length===0?"No errors":Z.map(U=>`${ne}${U.instancePath} ${U.message}`).reduce((U,X)=>U+ae+X)}$dataMetaSchema(Z,ae){const ne=this.RULES.all;Z=JSON.parse(JSON.stringify(Z));for(const U of ae){const X=U.split("/").slice(1);let ue=Z;for(const Ce of X)ue=ue[Ce];for(const Ce in ne){const ie=ne[Ce];if(typeof ie!="object")continue;const{$data:_e}=ie.definition,xe=ue[Ce];_e&&xe&&(ue[Ce]=oe(xe))}}return Z}_removeAllSchemas(Z,ae){for(const ne in Z){const U=Z[ne];(!ae||ae.test(ne))&&(typeof U=="string"?delete Z[ne]:U&&!U.meta&&(this._cache.delete(U.schema),delete Z[ne]))}}_addSchema(Z,ae,ne,U=this.opts.validateSchema,X=this.opts.addUsedSchema){let ue;const{schemaId:Ce}=this.opts;if(typeof Z=="object")ue=Z[Ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof Z!="boolean")throw new Error("schema must be object or boolean")}let ie=this._cache.get(Z);if(ie!==void 0)return ie;ne=(0,l.normalizeId)(ue||ne);const _e=l.getSchemaRefs.call(this,Z,ne);return ie=new o.SchemaEnv({schema:Z,schemaId:Ce,meta:ae,baseId:ne,localRefs:_e}),this._cache.set(ie.schema,ie),X&&!ne.startsWith("#")&&(ne&&this._checkUnique(ne),this.refs[ne]=ie),U&&this.validateSchema(Z,!0),ie}_checkUnique(Z){if(this.schemas[Z]||this.refs[Z])throw new Error(`schema with key or id "${Z}" already exists`)}_compileSchemaEnv(Z){if(Z.meta?this._compileMetaSchema(Z):o.compileSchema.call(this,Z),!Z.validate)throw new Error("ajv implementation error");return Z.validate}_compileMetaSchema(Z){const ae=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,Z)}finally{this.opts=ae}}}O.ValidationError=i.default,O.MissingRefError=a.default,e.default=O;function D(Y,Z,ae,ne="error"){for(const U in Y){const X=U;X in Z&&this.logger[ne](`${ae}: option ${U}. ${Y[X]}`)}}function P(Y){return Y=(0,l.normalizeId)(Y),this.schemas[Y]||this.refs[Y]}function R(){const Y=this.opts.schemas;if(Y)if(Array.isArray(Y))this.addSchema(Y);else for(const Z in Y)this.addSchema(Y[Z],Z)}function M(){for(const Y in this.opts.formats){const Z=this.opts.formats[Y];Z&&this.addFormat(Y,Z)}}function q(Y){if(Array.isArray(Y)){this.addVocabulary(Y);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const Z in Y){const ae=Y[Z];ae.keyword||(ae.keyword=Z),this.addKeyword(ae)}}function H(){const Y={...this.opts};for(const Z of b)delete Y[Z];return Y}const z={log(){},warn(){},error(){}};function Q(Y){if(Y===!1)return z;if(Y===void 0)return console;if(Y.log&&Y.warn&&Y.error)return Y;throw new Error("logger must implement log, warn and error methods")}const te=/^[a-z_$][a-z0-9_$:-]*$/i;function W(Y,Z){const{RULES:ae}=this;if((0,d.eachItem)(Y,ne=>{if(ae.keywords[ne])throw new Error(`Keyword ${ne} is already defined`);if(!te.test(ne))throw new Error(`Keyword ${ne} has invalid name`)}),!!Z&&Z.$data&&!("code"in Z||"validate"in Z))throw new Error('$data keyword must have "code" or "validate" function')}function j(Y,Z,ae){var ne;const U=Z==null?void 0:Z.post;if(ae&&U)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:X}=this;let ue=U?X.post:X.rules.find(({type:ie})=>ie===ae);if(ue||(ue={type:ae,rules:[]},X.rules.push(ue)),X.keywords[Y]=!0,!Z)return;const Ce={keyword:Y,definition:{...Z,type:(0,u.getJSONTypes)(Z.type),schemaType:(0,u.getJSONTypes)(Z.schemaType)}};Z.before?K.call(this,ue,Ce,Z.before):ue.rules.push(Ce),X.all[Y]=Ce,(ne=Z.implements)===null||ne===void 0||ne.forEach(ie=>this.addKeyword(ie))}function K(Y,Z,ae){const ne=Y.rules.findIndex(U=>U.keyword===ae);ne>=0?Y.rules.splice(ne,0,Z):(Y.rules.push(Z),this.logger.warn(`rule ${ae} is not defined`))}function se(Y){let{metaSchema:Z}=Y;Z!==void 0&&(Y.$data&&this.opts.$data&&(Z=oe(Z)),Y.validateSchema=this.compile(Z,!0))}const ee={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function oe(Y){return{anyOf:[Y,ee]}}})(Aie);var tz={},nz={},iz={};Object.defineProperty(iz,"__esModule",{value:!0});const rBe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};iz.default=rBe;var Ph={};Object.defineProperty(Ph,"__esModule",{value:!0});Ph.callRef=Ph.getValidate=void 0;const oBe=ay,n6=bt,ir=mt,qp=Vl,i6=dr,b1=qe,sBe={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:i}=e,{baseId:a,schemaEnv:r,validateName:o,opts:s,self:l}=i,{root:u}=r;if((n==="#"||n==="#/")&&a===u.baseId)return c();const d=i6.resolveRef.call(l,u,a,n);if(d===void 0)throw new oBe.default(i.opts.uriResolver,a,n);if(d instanceof i6.SchemaEnv)return g(d);return v(d);function c(){if(r===u)return mw(e,o,r,r.$async);const b=t.scopeValue("root",{ref:u});return mw(e,(0,ir._)`${b}.validate`,u,u.$async)}function g(b){const x=mae(e,b);mw(e,x,b,b.$async)}function v(b){const x=t.scopeValue("schema",s.code.source===!0?{ref:b,code:(0,ir.stringify)(b)}:{ref:b}),k=t.name("valid"),w=e.subschema({schema:b,dataTypes:[],schemaPath:ir.nil,topSchemaRef:x,errSchemaPath:n},k);e.mergeEvaluated(w),e.ok(k)}}};function mae(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,ir._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Ph.getValidate=mae;function mw(e,t,n,i){const{gen:a,it:r}=e,{allErrors:o,schemaEnv:s,opts:l}=r,u=l.passContext?qp.default.this:ir.nil;i?d():c();function d(){if(!s.$async)throw new Error("async schema referenced by sync schema");const b=a.let("valid");a.try(()=>{a.code((0,ir._)`await ${(0,n6.callValidateCode)(e,t,u)}`),v(t),o||a.assign(b,!0)},x=>{a.if((0,ir._)`!(${x} instanceof ${r.ValidationError})`,()=>a.throw(x)),g(x),o||a.assign(b,!1)}),e.ok(b)}function c(){e.result((0,n6.callValidateCode)(e,t,u),()=>v(t),()=>g(t))}function g(b){const x=(0,ir._)`${b}.errors`;a.assign(qp.default.vErrors,(0,ir._)`${qp.default.vErrors} === null ? ${x} : ${qp.default.vErrors}.concat(${x})`),a.assign(qp.default.errors,(0,ir._)`${qp.default.vErrors}.length`)}function v(b){var x;if(!r.opts.unevaluated)return;const k=(x=n==null?void 0:n.validate)===null||x===void 0?void 0:x.evaluated;if(r.props!==!0)if(k&&!k.dynamicProps)k.props!==void 0&&(r.props=b1.mergeEvaluated.props(a,k.props,r.props));else{const w=a.var("props",(0,ir._)`${b}.evaluated.props`);r.props=b1.mergeEvaluated.props(a,w,r.props,ir.Name)}if(r.items!==!0)if(k&&!k.dynamicItems)k.items!==void 0&&(r.items=b1.mergeEvaluated.items(a,k.items,r.items));else{const w=a.var("items",(0,ir._)`${b}.evaluated.items`);r.items=b1.mergeEvaluated.items(a,w,r.items,ir.Name)}}}Ph.callRef=mw;Ph.default=sBe;Object.defineProperty(nz,"__esModule",{value:!0});const lBe=iz,uBe=Ph,dBe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",lBe.default,uBe.default];nz.default=dBe;var az={},rz={};Object.defineProperty(rz,"__esModule",{value:!0});const N$=mt,kd=N$.operators,L$={maximum:{okStr:"<=",ok:kd.LTE,fail:kd.GT},minimum:{okStr:">=",ok:kd.GTE,fail:kd.LT},exclusiveMaximum:{okStr:"<",ok:kd.LT,fail:kd.GTE},exclusiveMinimum:{okStr:">",ok:kd.GT,fail:kd.LTE}},fBe={message:({keyword:e,schemaCode:t})=>(0,N$.str)`must be ${L$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,N$._)`{comparison: ${L$[e].okStr}, limit: ${t}}`},cBe={keyword:Object.keys(L$),type:"number",schemaType:"number",$data:!0,error:fBe,code(e){const{keyword:t,data:n,schemaCode:i}=e;e.fail$data((0,N$._)`${n} ${L$[t].fail} ${i} || isNaN(${n})`)}};rz.default=cBe;var oz={};Object.defineProperty(oz,"__esModule",{value:!0});const Tb=mt,hBe={message:({schemaCode:e})=>(0,Tb.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Tb._)`{multipleOf: ${e}}`},pBe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:hBe,code(e){const{gen:t,data:n,schemaCode:i,it:a}=e,r=a.opts.multipleOfPrecision,o=t.let("res"),s=r?(0,Tb._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${r}`:(0,Tb._)`${o} !== parseInt(${o})`;e.fail$data((0,Tb._)`(${i} === 0 || (${o} = ${n}/${i}, ${s}))`)}};oz.default=pBe;var sz={},lz={};Object.defineProperty(lz,"__esModule",{value:!0});function yae(e){const t=e.length;let n=0,i=0,a;for(;i<t;)n++,a=e.charCodeAt(i++),a>=55296&&a<=56319&&i<t&&(a=e.charCodeAt(i),(a&64512)===56320&&i++);return n}lz.default=yae;yae.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(sz,"__esModule",{value:!0});const Lc=mt,gBe=qe,mBe=lz,yBe={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Lc.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Lc._)`{limit: ${e}}`},vBe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:yBe,code(e){const{keyword:t,data:n,schemaCode:i,it:a}=e,r=t==="maxLength"?Lc.operators.GT:Lc.operators.LT,o=a.opts.unicode===!1?(0,Lc._)`${n}.length`:(0,Lc._)`${(0,gBe.useFunc)(e.gen,mBe.default)}(${n})`;e.fail$data((0,Lc._)`${o} ${r} ${i}`)}};sz.default=vBe;var uz={};Object.defineProperty(uz,"__esModule",{value:!0});const bBe=bt,M$=mt,_Be={message:({schemaCode:e})=>(0,M$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,M$._)`{pattern: ${e}}`},xBe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:_Be,code(e){const{data:t,$data:n,schema:i,schemaCode:a,it:r}=e,o=r.opts.unicodeRegExp?"u":"",s=n?(0,M$._)`(new RegExp(${a}, ${o}))`:(0,bBe.usePattern)(e,i);e.fail$data((0,M$._)`!${s}.test(${t})`)}};uz.default=xBe;var dz={};Object.defineProperty(dz,"__esModule",{value:!0});const Ab=mt,wBe={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,Ab.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,Ab._)`{limit: ${e}}`},kBe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:wBe,code(e){const{keyword:t,data:n,schemaCode:i}=e,a=t==="maxProperties"?Ab.operators.GT:Ab.operators.LT;e.fail$data((0,Ab._)`Object.keys(${n}).length ${a} ${i}`)}};dz.default=kBe;var fz={};Object.defineProperty(fz,"__esModule",{value:!0});const mv=bt,Ob=mt,$Be=qe,EBe={message:({params:{missingProperty:e}})=>(0,Ob.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Ob._)`{missingProperty: ${e}}`},SBe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:EBe,code(e){const{gen:t,schema:n,schemaCode:i,data:a,$data:r,it:o}=e,{opts:s}=o;if(!r&&n.length===0)return;const l=n.length>=s.loopRequired;if(o.allErrors?u():d(),s.strictRequired){const v=e.parentSchema.properties,{definedProperties:b}=e.it;for(const x of n)if((v==null?void 0:v[x])===void 0&&!b.has(x)){const k=o.schemaEnv.baseId+o.errSchemaPath,w=`required property "${x}" is not defined at "${k}" (strictRequired)`;(0,$Be.checkStrictMode)(o,w,o.opts.strictRequired)}}function u(){if(l||r)e.block$data(Ob.nil,c);else for(const v of n)(0,mv.checkReportMissingProp)(e,v)}function d(){const v=t.let("missing");if(l||r){const b=t.let("valid",!0);e.block$data(b,()=>g(v,b)),e.ok(b)}else t.if((0,mv.checkMissingProp)(e,n,v)),(0,mv.reportMissingProp)(e,v),t.else()}function c(){t.forOf("prop",i,v=>{e.setParams({missingProperty:v}),t.if((0,mv.noPropertyInData)(t,a,v,s.ownProperties),()=>e.error())})}function g(v,b){e.setParams({missingProperty:v}),t.forOf(v,i,()=>{t.assign(b,(0,mv.propertyInData)(t,a,v,s.ownProperties)),t.if((0,Ob.not)(b),()=>{e.error(),t.break()})},Ob.nil)}}};fz.default=SBe;var cz={};Object.defineProperty(cz,"__esModule",{value:!0});const Db=mt,TBe={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Db.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Db._)`{limit: ${e}}`},ABe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:TBe,code(e){const{keyword:t,data:n,schemaCode:i}=e,a=t==="maxItems"?Db.operators.GT:Db.operators.LT;e.fail$data((0,Db._)`${n}.length ${a} ${i}`)}};cz.default=ABe;var hz={},M0={};Object.defineProperty(M0,"__esModule",{value:!0});const vae=Vie;vae.code='require("ajv/dist/runtime/equal").default';M0.default=vae;Object.defineProperty(hz,"__esModule",{value:!0});const bO=ti,Pi=mt,OBe=qe,DBe=M0,CBe={message:({params:{i:e,j:t}})=>(0,Pi.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Pi._)`{i: ${e}, j: ${t}}`},RBe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:CBe,code(e){const{gen:t,data:n,$data:i,schema:a,parentSchema:r,schemaCode:o,it:s}=e;if(!i&&!a)return;const l=t.let("valid"),u=r.items?(0,bO.getSchemaTypes)(r.items):[];e.block$data(l,d,(0,Pi._)`${o} === false`),e.ok(l);function d(){const b=t.let("i",(0,Pi._)`${n}.length`),x=t.let("j");e.setParams({i:b,j:x}),t.assign(l,!0),t.if((0,Pi._)`${b} > 1`,()=>(c()?g:v)(b,x))}function c(){return u.length>0&&!u.some(b=>b==="object"||b==="array")}function g(b,x){const k=t.name("item"),w=(0,bO.checkDataTypes)(u,k,s.opts.strictNumbers,bO.DataType.Wrong),E=t.const("indices",(0,Pi._)`{}`);t.for((0,Pi._)`;${b}--;`,()=>{t.let(k,(0,Pi._)`${n}[${b}]`),t.if(w,(0,Pi._)`continue`),u.length>1&&t.if((0,Pi._)`typeof ${k} == "string"`,(0,Pi._)`${k} += "_"`),t.if((0,Pi._)`typeof ${E}[${k}] == "number"`,()=>{t.assign(x,(0,Pi._)`${E}[${k}]`),e.error(),t.assign(l,!1).break()}).code((0,Pi._)`${E}[${k}] = ${b}`)})}function v(b,x){const k=(0,OBe.useFunc)(t,DBe.default),w=t.name("outer");t.label(w).for((0,Pi._)`;${b}--;`,()=>t.for((0,Pi._)`${x} = ${b}; ${x}--;`,()=>t.if((0,Pi._)`${k}(${n}[${b}], ${n}[${x}])`,()=>{e.error(),t.assign(l,!1).break(w)})))}}};hz.default=RBe;var pz={};Object.defineProperty(pz,"__esModule",{value:!0});const eI=mt,IBe=qe,PBe=M0,FBe={message:"must be equal to constant",params:({schemaCode:e})=>(0,eI._)`{allowedValue: ${e}}`},NBe={keyword:"const",$data:!0,error:FBe,code(e){const{gen:t,data:n,$data:i,schemaCode:a,schema:r}=e;i||r&&typeof r=="object"?e.fail$data((0,eI._)`!${(0,IBe.useFunc)(t,PBe.default)}(${n}, ${a})`):e.fail((0,eI._)`${r} !== ${n}`)}};pz.default=NBe;var gz={};Object.defineProperty(gz,"__esModule",{value:!0});const Qv=mt,LBe=qe,MBe=M0,zBe={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Qv._)`{allowedValues: ${e}}`},qBe={keyword:"enum",schemaType:"array",$data:!0,error:zBe,code(e){const{gen:t,data:n,$data:i,schema:a,schemaCode:r,it:o}=e;if(!i&&a.length===0)throw new Error("enum must have non-empty array");const s=a.length>=o.opts.loopEnum;let l;const u=()=>l??(l=(0,LBe.useFunc)(t,MBe.default));let d;if(s||i)d=t.let("valid"),e.block$data(d,c);else{if(!Array.isArray(a))throw new Error("ajv implementation error");const v=t.const("vSchema",r);d=(0,Qv.or)(...a.map((b,x)=>g(v,x)))}e.pass(d);function c(){t.assign(d,!1),t.forOf("v",r,v=>t.if((0,Qv._)`${u()}(${n}, ${v})`,()=>t.assign(d,!0).break()))}function g(v,b){const x=a[b];return typeof x=="object"&&x!==null?(0,Qv._)`${u()}(${n}, ${v}[${b}])`:(0,Qv._)`${n} === ${x}`}}};gz.default=qBe;Object.defineProperty(az,"__esModule",{value:!0});const jBe=rz,UBe=oz,BBe=sz,VBe=uz,WBe=dz,GBe=fz,HBe=cz,YBe=hz,XBe=pz,ZBe=gz,JBe=[jBe.default,UBe.default,BBe.default,VBe.default,WBe.default,GBe.default,HBe.default,YBe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},XBe.default,ZBe.default];az.default=JBe;var mz={},ry={};Object.defineProperty(ry,"__esModule",{value:!0});ry.validateAdditionalItems=void 0;const Mc=mt,tI=qe,KBe={message:({params:{len:e}})=>(0,Mc.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Mc._)`{limit: ${e}}`},QBe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:KBe,code(e){const{parentSchema:t,it:n}=e,{items:i}=t;if(!Array.isArray(i)){(0,tI.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}bae(e,i)}};function bae(e,t){const{gen:n,schema:i,data:a,keyword:r,it:o}=e;o.items=!0;const s=n.const("len",(0,Mc._)`${a}.length`);if(i===!1)e.setParams({len:t.length}),e.pass((0,Mc._)`${s} <= ${t.length}`);else if(typeof i=="object"&&!(0,tI.alwaysValidSchema)(o,i)){const u=n.var("valid",(0,Mc._)`${s} <= ${t.length}`);n.if((0,Mc.not)(u),()=>l(u)),e.ok(u)}function l(u){n.forRange("i",t.length,s,d=>{e.subschema({keyword:r,dataProp:d,dataPropType:tI.Type.Num},u),o.allErrors||n.if((0,Mc.not)(u),()=>n.break())})}}ry.validateAdditionalItems=bae;ry.default=QBe;var yz={},oy={};Object.defineProperty(oy,"__esModule",{value:!0});oy.validateTuple=void 0;const a6=mt,yw=qe,e4e=bt,t4e={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return _ae(e,"additionalItems",t);n.items=!0,!(0,yw.alwaysValidSchema)(n,t)&&e.ok((0,e4e.validateArray)(e))}};function _ae(e,t,n=e.schema){const{gen:i,parentSchema:a,data:r,keyword:o,it:s}=e;d(a),s.opts.unevaluated&&n.length&&s.items!==!0&&(s.items=yw.mergeEvaluated.items(i,n.length,s.items));const l=i.name("valid"),u=i.const("len",(0,a6._)`${r}.length`);n.forEach((c,g)=>{(0,yw.alwaysValidSchema)(s,c)||(i.if((0,a6._)`${u} > ${g}`,()=>e.subschema({keyword:o,schemaProp:g,dataProp:g},l)),e.ok(l))});function d(c){const{opts:g,errSchemaPath:v}=s,b=n.length,x=b===c.minItems&&(b===c.maxItems||c[t]===!1);if(g.strictTuples&&!x){const k=`"${o}" is ${b}-tuple, but minItems or maxItems/${t} are not specified or different at path "${v}"`;(0,yw.checkStrictMode)(s,k,g.strictTuples)}}}oy.validateTuple=_ae;oy.default=t4e;Object.defineProperty(yz,"__esModule",{value:!0});const n4e=oy,i4e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,n4e.validateTuple)(e,"items")};yz.default=i4e;var vz={};Object.defineProperty(vz,"__esModule",{value:!0});const r6=mt,a4e=qe,r4e=bt,o4e=ry,s4e={message:({params:{len:e}})=>(0,r6.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,r6._)`{limit: ${e}}`},l4e={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:s4e,code(e){const{schema:t,parentSchema:n,it:i}=e,{prefixItems:a}=n;i.items=!0,!(0,a4e.alwaysValidSchema)(i,t)&&(a?(0,o4e.validateAdditionalItems)(e,a):e.ok((0,r4e.validateArray)(e)))}};vz.default=l4e;var bz={};Object.defineProperty(bz,"__esModule",{value:!0});const ho=mt,_1=qe,u4e={message:({params:{min:e,max:t}})=>t===void 0?(0,ho.str)`must contain at least ${e} valid item(s)`:(0,ho.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,ho._)`{minContains: ${e}}`:(0,ho._)`{minContains: ${e}, maxContains: ${t}}`},d4e={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:u4e,code(e){const{gen:t,schema:n,parentSchema:i,data:a,it:r}=e;let o,s;const{minContains:l,maxContains:u}=i;r.opts.next?(o=l===void 0?1:l,s=u):o=1;const d=t.const("len",(0,ho._)`${a}.length`);if(e.setParams({min:o,max:s}),s===void 0&&o===0){(0,_1.checkStrictMode)(r,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(s!==void 0&&o>s){(0,_1.checkStrictMode)(r,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,_1.alwaysValidSchema)(r,n)){let x=(0,ho._)`${d} >= ${o}`;s!==void 0&&(x=(0,ho._)`${x} && ${d} <= ${s}`),e.pass(x);return}r.items=!0;const c=t.name("valid");s===void 0&&o===1?v(c,()=>t.if(c,()=>t.break())):o===0?(t.let(c,!0),s!==void 0&&t.if((0,ho._)`${a}.length > 0`,g)):(t.let(c,!1),g()),e.result(c,()=>e.reset());function g(){const x=t.name("_valid"),k=t.let("count",0);v(x,()=>t.if(x,()=>b(k)))}function v(x,k){t.forRange("i",0,d,w=>{e.subschema({keyword:"contains",dataProp:w,dataPropType:_1.Type.Num,compositeRule:!0},x),k()})}function b(x){t.code((0,ho._)`${x}++`),s===void 0?t.if((0,ho._)`${x} >= ${o}`,()=>t.assign(c,!0).break()):(t.if((0,ho._)`${x} > ${s}`,()=>t.assign(c,!1).break()),o===1?t.assign(c,!0):t.if((0,ho._)`${x} >= ${o}`,()=>t.assign(c,!0)))}}};bz.default=d4e;var xae={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=mt,n=qe,i=bt;e.error={message:({params:{property:l,depsCount:u,deps:d}})=>{const c=u===1?"property":"properties";return(0,t.str)`must have ${c} ${d} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:d,missingProperty:c}})=>(0,t._)`{property: ${l},
    missingProperty: ${c},
    depsCount: ${u},
    deps: ${d}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[u,d]=r(l);o(l,u),s(l,d)}};function r({schema:l}){const u={},d={};for(const c in l){if(c==="__proto__")continue;const g=Array.isArray(l[c])?u:d;g[c]=l[c]}return[u,d]}function o(l,u=l.schema){const{gen:d,data:c,it:g}=l;if(Object.keys(u).length===0)return;const v=d.let("missing");for(const b in u){const x=u[b];if(x.length===0)continue;const k=(0,i.propertyInData)(d,c,b,g.opts.ownProperties);l.setParams({property:b,depsCount:x.length,deps:x.join(", ")}),g.allErrors?d.if(k,()=>{for(const w of x)(0,i.checkReportMissingProp)(l,w)}):(d.if((0,t._)`${k} && (${(0,i.checkMissingProp)(l,x,v)})`),(0,i.reportMissingProp)(l,v),d.else())}}e.validatePropertyDeps=o;function s(l,u=l.schema){const{gen:d,data:c,keyword:g,it:v}=l,b=d.name("valid");for(const x in u)(0,n.alwaysValidSchema)(v,u[x])||(d.if((0,i.propertyInData)(d,c,x,v.opts.ownProperties),()=>{const k=l.subschema({keyword:g,schemaProp:x},b);l.mergeValidEvaluated(k,b)},()=>d.var(b,!0)),l.ok(b))}e.validateSchemaDeps=s,e.default=a})(xae);var _z={};Object.defineProperty(_z,"__esModule",{value:!0});const wae=mt,f4e=qe,c4e={message:"property name must be valid",params:({params:e})=>(0,wae._)`{propertyName: ${e.propertyName}}`},h4e={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:c4e,code(e){const{gen:t,schema:n,data:i,it:a}=e;if((0,f4e.alwaysValidSchema)(a,n))return;const r=t.name("valid");t.forIn("key",i,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},r),t.if((0,wae.not)(r),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(r)}};_z.default=h4e;var wS={};Object.defineProperty(wS,"__esModule",{value:!0});const x1=bt,Ko=mt,p4e=Vl,w1=qe,g4e={message:"must NOT have additional properties",params:({params:e})=>(0,Ko._)`{additionalProperty: ${e.additionalProperty}}`},m4e={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:g4e,code(e){const{gen:t,schema:n,parentSchema:i,data:a,errsCount:r,it:o}=e;if(!r)throw new Error("ajv implementation error");const{allErrors:s,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,w1.alwaysValidSchema)(o,n))return;const u=(0,x1.allSchemaProperties)(i.properties),d=(0,x1.allSchemaProperties)(i.patternProperties);c(),e.ok((0,Ko._)`${r} === ${p4e.default.errors}`);function c(){t.forIn("key",a,k=>{!u.length&&!d.length?b(k):t.if(g(k),()=>b(k))})}function g(k){let w;if(u.length>8){const E=(0,w1.schemaRefOrVal)(o,i.properties,"properties");w=(0,x1.isOwnProperty)(t,E,k)}else u.length?w=(0,Ko.or)(...u.map(E=>(0,Ko._)`${k} === ${E}`)):w=Ko.nil;return d.length&&(w=(0,Ko.or)(w,...d.map(E=>(0,Ko._)`${(0,x1.usePattern)(e,E)}.test(${k})`))),(0,Ko.not)(w)}function v(k){t.code((0,Ko._)`delete ${a}[${k}]`)}function b(k){if(l.removeAdditional==="all"||l.removeAdditional&&n===!1){v(k);return}if(n===!1){e.setParams({additionalProperty:k}),e.error(),s||t.break();return}if(typeof n=="object"&&!(0,w1.alwaysValidSchema)(o,n)){const w=t.name("valid");l.removeAdditional==="failing"?(x(k,w,!1),t.if((0,Ko.not)(w),()=>{e.reset(),v(k)})):(x(k,w),s||t.if((0,Ko.not)(w),()=>t.break()))}}function x(k,w,E){const T={keyword:"additionalProperties",dataProp:k,dataPropType:w1.Type.Str};E===!1&&Object.assign(T,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(T,w)}}};wS.default=m4e;var xz={};Object.defineProperty(xz,"__esModule",{value:!0});const y4e=ys,o6=bt,_O=qe,s6=wS,v4e={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:i,data:a,it:r}=e;r.opts.removeAdditional==="all"&&i.additionalProperties===void 0&&s6.default.code(new y4e.KeywordCxt(r,s6.default,"additionalProperties"));const o=(0,o6.allSchemaProperties)(n);for(const c of o)r.definedProperties.add(c);r.opts.unevaluated&&o.length&&r.props!==!0&&(r.props=_O.mergeEvaluated.props(t,(0,_O.toHash)(o),r.props));const s=o.filter(c=>!(0,_O.alwaysValidSchema)(r,n[c]));if(s.length===0)return;const l=t.name("valid");for(const c of s)u(c)?d(c):(t.if((0,o6.propertyInData)(t,a,c,r.opts.ownProperties)),d(c),r.allErrors||t.else().var(l,!0),t.endIf()),e.it.definedProperties.add(c),e.ok(l);function u(c){return r.opts.useDefaults&&!r.compositeRule&&n[c].default!==void 0}function d(c){e.subschema({keyword:"properties",schemaProp:c,dataProp:c},l)}}};xz.default=v4e;var wz={};Object.defineProperty(wz,"__esModule",{value:!0});const l6=bt,k1=mt,u6=qe,d6=qe,b4e={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:i,parentSchema:a,it:r}=e,{opts:o}=r,s=(0,l6.allSchemaProperties)(n),l=s.filter(x=>(0,u6.alwaysValidSchema)(r,n[x]));if(s.length===0||l.length===s.length&&(!r.opts.unevaluated||r.props===!0))return;const u=o.strictSchema&&!o.allowMatchingProperties&&a.properties,d=t.name("valid");r.props!==!0&&!(r.props instanceof k1.Name)&&(r.props=(0,d6.evaluatedPropsToName)(t,r.props));const{props:c}=r;g();function g(){for(const x of s)u&&v(x),r.allErrors?b(x):(t.var(d,!0),b(x),t.if(d))}function v(x){for(const k in u)new RegExp(x).test(k)&&(0,u6.checkStrictMode)(r,`property ${k} matches pattern ${x} (use allowMatchingProperties)`)}function b(x){t.forIn("key",i,k=>{t.if((0,k1._)`${(0,l6.usePattern)(e,x)}.test(${k})`,()=>{const w=l.includes(x);w||e.subschema({keyword:"patternProperties",schemaProp:x,dataProp:k,dataPropType:d6.Type.Str},d),r.opts.unevaluated&&c!==!0?t.assign((0,k1._)`${c}[${k}]`,!0):!w&&!r.allErrors&&t.if((0,k1.not)(d),()=>t.break())})})}}};wz.default=b4e;var kz={};Object.defineProperty(kz,"__esModule",{value:!0});const _4e=qe,x4e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:i}=e;if((0,_4e.alwaysValidSchema)(i,n)){e.fail();return}const a=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),e.failResult(a,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};kz.default=x4e;var $z={};Object.defineProperty($z,"__esModule",{value:!0});const w4e=bt,k4e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:w4e.validateUnion,error:{message:"must match a schema in anyOf"}};$z.default=k4e;var Ez={};Object.defineProperty(Ez,"__esModule",{value:!0});const vw=mt,$4e=qe,E4e={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,vw._)`{passingSchemas: ${e.passing}}`},S4e={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:E4e,code(e){const{gen:t,schema:n,parentSchema:i,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(a.opts.discriminator&&i.discriminator)return;const r=n,o=t.let("valid",!1),s=t.let("passing",null),l=t.name("_valid");e.setParams({passing:s}),t.block(u),e.result(o,()=>e.reset(),()=>e.error(!0));function u(){r.forEach((d,c)=>{let g;(0,$4e.alwaysValidSchema)(a,d)?t.var(l,!0):g=e.subschema({keyword:"oneOf",schemaProp:c,compositeRule:!0},l),c>0&&t.if((0,vw._)`${l} && ${o}`).assign(o,!1).assign(s,(0,vw._)`[${s}, ${c}]`).else(),t.if(l,()=>{t.assign(o,!0),t.assign(s,c),g&&e.mergeEvaluated(g,vw.Name)})})}}};Ez.default=S4e;var Sz={};Object.defineProperty(Sz,"__esModule",{value:!0});const T4e=qe,A4e={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const a=t.name("valid");n.forEach((r,o)=>{if((0,T4e.alwaysValidSchema)(i,r))return;const s=e.subschema({keyword:"allOf",schemaProp:o},a);e.ok(a),e.mergeEvaluated(s)})}};Sz.default=A4e;var Tz={};Object.defineProperty(Tz,"__esModule",{value:!0});const z$=mt,kae=qe,O4e={message:({params:e})=>(0,z$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,z$._)`{failingKeyword: ${e.ifClause}}`},D4e={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:O4e,code(e){const{gen:t,parentSchema:n,it:i}=e;n.then===void 0&&n.else===void 0&&(0,kae.checkStrictMode)(i,'"if" without "then" and "else" is ignored');const a=f6(i,"then"),r=f6(i,"else");if(!a&&!r)return;const o=t.let("valid",!0),s=t.name("_valid");if(l(),e.reset(),a&&r){const d=t.let("ifClause");e.setParams({ifClause:d}),t.if(s,u("then",d),u("else",d))}else a?t.if(s,u("then")):t.if((0,z$.not)(s),u("else"));e.pass(o,()=>e.error(!0));function l(){const d=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},s);e.mergeEvaluated(d)}function u(d,c){return()=>{const g=e.subschema({keyword:d},s);t.assign(o,s),e.mergeValidEvaluated(g,o),c?t.assign(c,(0,z$._)`${d}`):e.setParams({ifClause:d})}}}};function f6(e,t){const n=e.schema[t];return n!==void 0&&!(0,kae.alwaysValidSchema)(e,n)}Tz.default=D4e;var Az={};Object.defineProperty(Az,"__esModule",{value:!0});const C4e=qe,R4e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,C4e.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Az.default=R4e;Object.defineProperty(mz,"__esModule",{value:!0});const I4e=ry,P4e=yz,F4e=oy,N4e=vz,L4e=bz,M4e=xae,z4e=_z,q4e=wS,j4e=xz,U4e=wz,B4e=kz,V4e=$z,W4e=Ez,G4e=Sz,H4e=Tz,Y4e=Az;function X4e(e=!1){const t=[B4e.default,V4e.default,W4e.default,G4e.default,H4e.default,Y4e.default,z4e.default,q4e.default,M4e.default,j4e.default,U4e.default];return e?t.push(P4e.default,N4e.default):t.push(I4e.default,F4e.default),t.push(L4e.default),t}mz.default=X4e;var Oz={},Dz={};Object.defineProperty(Dz,"__esModule",{value:!0});const Un=mt,Z4e={message:({schemaCode:e})=>(0,Un.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Un._)`{format: ${e}}`},J4e={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Z4e,code(e,t){const{gen:n,data:i,$data:a,schema:r,schemaCode:o,it:s}=e,{opts:l,errSchemaPath:u,schemaEnv:d,self:c}=s;if(!l.validateFormats)return;a?g():v();function g(){const b=n.scopeValue("formats",{ref:c.formats,code:l.code.formats}),x=n.const("fDef",(0,Un._)`${b}[${o}]`),k=n.let("fType"),w=n.let("format");n.if((0,Un._)`typeof ${x} == "object" && !(${x} instanceof RegExp)`,()=>n.assign(k,(0,Un._)`${x}.type || "string"`).assign(w,(0,Un._)`${x}.validate`),()=>n.assign(k,(0,Un._)`"string"`).assign(w,x)),e.fail$data((0,Un.or)(E(),T()));function E(){return l.strictSchema===!1?Un.nil:(0,Un._)`${o} && !${w}`}function T(){const O=d.$async?(0,Un._)`(${x}.async ? await ${w}(${i}) : ${w}(${i}))`:(0,Un._)`${w}(${i})`,D=(0,Un._)`(typeof ${w} == "function" ? ${O} : ${w}.test(${i}))`;return(0,Un._)`${w} && ${w} !== true && ${k} === ${t} && !${D}`}}function v(){const b=c.formats[r];if(!b){E();return}if(b===!0)return;const[x,k,w]=T(b);x===t&&e.pass(O());function E(){if(l.strictSchema===!1){c.logger.warn(D());return}throw new Error(D());function D(){return`unknown format "${r}" ignored in schema at path "${u}"`}}function T(D){const P=D instanceof RegExp?(0,Un.regexpCode)(D):l.code.formats?(0,Un._)`${l.code.formats}${(0,Un.getProperty)(r)}`:void 0,R=n.scopeValue("formats",{key:r,ref:D,code:P});return typeof D=="object"&&!(D instanceof RegExp)?[D.type||"string",D.validate,(0,Un._)`${R}.validate`]:["string",D,R]}function O(){if(typeof b=="object"&&!(b instanceof RegExp)&&b.async){if(!d.$async)throw new Error("async format in sync schema");return(0,Un._)`await ${w}(${i})`}return typeof k=="function"?(0,Un._)`${w}(${i})`:(0,Un._)`${w}.test(${i})`}}}};Dz.default=J4e;Object.defineProperty(Oz,"__esModule",{value:!0});const K4e=Dz,Q4e=[K4e.default];Oz.default=Q4e;var Em={};Object.defineProperty(Em,"__esModule",{value:!0});Em.contentVocabulary=Em.metadataVocabulary=void 0;Em.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Em.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(tz,"__esModule",{value:!0});const e7e=nz,t7e=az,n7e=mz,i7e=Oz,c6=Em,a7e=[e7e.default,t7e.default,(0,n7e.default)(),i7e.default,c6.metadataVocabulary,c6.contentVocabulary];tz.default=a7e;var Cz={},kS={};Object.defineProperty(kS,"__esModule",{value:!0});kS.DiscrError=void 0;var h6;(function(e){e.Tag="tag",e.Mapping="mapping"})(h6||(kS.DiscrError=h6={}));Object.defineProperty(Cz,"__esModule",{value:!0});const Wp=mt,nI=kS,p6=dr,r7e=ay,o7e=qe,s7e={message:({params:{discrError:e,tagName:t}})=>e===nI.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,Wp._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},l7e={keyword:"discriminator",type:"object",schemaType:"object",error:s7e,code(e){const{gen:t,data:n,schema:i,parentSchema:a,it:r}=e,{oneOf:o}=a;if(!r.opts.discriminator)throw new Error("discriminator: requires discriminator option");const s=i.propertyName;if(typeof s!="string")throw new Error("discriminator: requires propertyName");if(i.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const l=t.let("valid",!1),u=t.const("tag",(0,Wp._)`${n}${(0,Wp.getProperty)(s)}`);t.if((0,Wp._)`typeof ${u} == "string"`,()=>d(),()=>e.error(!1,{discrError:nI.DiscrError.Tag,tag:u,tagName:s})),e.ok(l);function d(){const v=g();t.if(!1);for(const b in v)t.elseIf((0,Wp._)`${u} === ${b}`),t.assign(l,c(v[b]));t.else(),e.error(!1,{discrError:nI.DiscrError.Mapping,tag:u,tagName:s}),t.endIf()}function c(v){const b=t.name("valid"),x=e.subschema({keyword:"oneOf",schemaProp:v},b);return e.mergeEvaluated(x,Wp.Name),b}function g(){var v;const b={},x=w(a);let k=!0;for(let O=0;O<o.length;O++){let D=o[O];if(D!=null&&D.$ref&&!(0,o7e.schemaHasRulesButRef)(D,r.self.RULES)){const R=D.$ref;if(D=p6.resolveRef.call(r.self,r.schemaEnv.root,r.baseId,R),D instanceof p6.SchemaEnv&&(D=D.schema),D===void 0)throw new r7e.default(r.opts.uriResolver,r.baseId,R)}const P=(v=D==null?void 0:D.properties)===null||v===void 0?void 0:v[s];if(typeof P!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${s}"`);k=k&&(x||w(D)),E(P,O)}if(!k)throw new Error(`discriminator: "${s}" must be required`);return b;function w({required:O}){return Array.isArray(O)&&O.includes(s)}function E(O,D){if(O.const)T(O.const,D);else if(O.enum)for(const P of O.enum)T(P,D);else throw new Error(`discriminator: "properties/${s}" must have "const" or "enum"`)}function T(O,D){if(typeof O!="string"||O in b)throw new Error(`discriminator: "${s}" values must be unique strings`);b[O]=D}}}};Cz.default=l7e;const u7e="http://json-schema.org/draft-07/schema#",d7e="http://json-schema.org/draft-07/schema#",f7e="Core schema meta-schema",c7e={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},h7e=["object","boolean"],p7e={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},g7e={$schema:u7e,$id:d7e,title:f7e,definitions:c7e,type:h7e,properties:p7e,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Aie,i=tz,a=Cz,r=g7e,o=["/properties"],s="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),i.default.forEach(b=>this.addVocabulary(b)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const b=this.opts.$data?this.$dataMetaSchema(r,o):r;this.addMetaSchema(b,s,!1),this.refs["http://json-schema.org/schema"]=s}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(s)?s:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=ys;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var d=mt;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var c=L0;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return c.default}});var g=ay;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return g.default}})})(XR,XR.exports);var $ae=XR.exports;const m7e=Tie($ae);var iI={exports:{}},Eae={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(z,Q){return{validate:z,compare:Q}}e.fullFormats={date:t(r,o),time:t(l(!0),u),"date-time":t(g(!0),v),"iso-time":t(l(),d),"iso-date-time":t(g(),b),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:w,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:H,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:T,int32:{type:"number",validate:P},int64:{type:"number",validate:R},float:{type:"number",validate:M},double:{type:"number",validate:M},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,v),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,d),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,b),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function n(z){return z%4===0&&(z%100!==0||z%400===0)}const i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31];function r(z){const Q=i.exec(z);if(!Q)return!1;const te=+Q[1],W=+Q[2],j=+Q[3];return W>=1&&W<=12&&j>=1&&j<=(W===2&&n(te)?29:a[W])}function o(z,Q){if(z&&Q)return z>Q?1:z<Q?-1:0}const s=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function l(z){return function(Q){const te=s.exec(Q);if(!te)return!1;const W=+te[1],j=+te[2],K=+te[3],se=te[4],ee=te[5]==="-"?-1:1,oe=+(te[6]||0),Y=+(te[7]||0);if(oe>23||Y>59||z&&!se)return!1;if(W<=23&&j<=59&&K<60)return!0;const Z=j-Y*ee,ae=W-oe*ee-(Z<0?1:0);return(ae===23||ae===-1)&&(Z===59||Z===-1)&&K<61}}function u(z,Q){if(!(z&&Q))return;const te=new Date("2020-01-01T"+z).valueOf(),W=new Date("2020-01-01T"+Q).valueOf();if(te&&W)return te-W}function d(z,Q){if(!(z&&Q))return;const te=s.exec(z),W=s.exec(Q);if(te&&W)return z=te[1]+te[2]+te[3],Q=W[1]+W[2]+W[3],z>Q?1:z<Q?-1:0}const c=/t|\s/i;function g(z){const Q=l(z);return function(te){const W=te.split(c);return W.length===2&&r(W[0])&&Q(W[1])}}function v(z,Q){if(!(z&&Q))return;const te=new Date(z).valueOf(),W=new Date(Q).valueOf();if(te&&W)return te-W}function b(z,Q){if(!(z&&Q))return;const[te,W]=z.split(c),[j,K]=Q.split(c),se=o(te,j);if(se!==void 0)return se||u(W,K)}const x=/\/|:/,k=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function w(z){return x.test(z)&&k.test(z)}const E=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function T(z){return E.lastIndex=0,E.test(z)}const O=-2147483648,D=2**31-1;function P(z){return Number.isInteger(z)&&z<=D&&z>=O}function R(z){return Number.isInteger(z)}function M(){return!0}const q=/[^\\]\\Z/;function H(z){if(q.test(z))return!1;try{return new RegExp(z),!0}catch{return!1}}})(Eae);var Sae={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=$ae,n=mt,i=n.operators,a={formatMaximum:{okStr:"<=",ok:i.LTE,fail:i.GT},formatMinimum:{okStr:">=",ok:i.GTE,fail:i.LT},formatExclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},formatExclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},r={message:({keyword:s,schemaCode:l})=>(0,n.str)`should be ${a[s].okStr} ${l}`,params:({keyword:s,schemaCode:l})=>(0,n._)`{comparison: ${a[s].okStr}, limit: ${l}}`};e.formatLimitDefinition={keyword:Object.keys(a),type:"string",schemaType:"string",$data:!0,error:r,code(s){const{gen:l,data:u,schemaCode:d,keyword:c,it:g}=s,{opts:v,self:b}=g;if(!v.validateFormats)return;const x=new t.KeywordCxt(g,b.RULES.all.format.definition,"format");x.$data?k():w();function k(){const T=l.scopeValue("formats",{ref:b.formats,code:v.code.formats}),O=l.const("fmt",(0,n._)`${T}[${x.schemaCode}]`);s.fail$data((0,n.or)((0,n._)`typeof ${O} != "object"`,(0,n._)`${O} instanceof RegExp`,(0,n._)`typeof ${O}.compare != "function"`,E(O)))}function w(){const T=x.schema,O=b.formats[T];if(!O||O===!0)return;if(typeof O!="object"||O instanceof RegExp||typeof O.compare!="function")throw new Error(`"${c}": format "${T}" does not define "compare" function`);const D=l.scopeValue("formats",{key:T,ref:O,code:v.code.formats?(0,n._)`${v.code.formats}${(0,n.getProperty)(T)}`:void 0});s.fail$data(E(D))}function E(T){return(0,n._)`${T}.compare(${u}, ${d}) ${a[c].fail} 0`}},dependencies:["format"]};const o=s=>(s.addKeyword(e.formatLimitDefinition),s);e.default=o})(Sae);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=Eae,i=Sae,a=mt,r=new a.Name("fullFormats"),o=new a.Name("fastFormats"),s=(u,d={keywords:!0})=>{if(Array.isArray(d))return l(u,d,n.fullFormats,r),u;const[c,g]=d.mode==="fast"?[n.fastFormats,o]:[n.fullFormats,r],v=d.formats||n.formatNames;return l(u,v,c,g),d.keywords&&(0,i.default)(u),u};s.get=(u,d="full")=>{const c=(d==="fast"?n.fastFormats:n.fullFormats)[u];if(!c)throw new Error(`Unknown format "${u}"`);return c};function l(u,d,c,g){var v,b;(v=(b=u.opts.code).formats)!==null&&v!==void 0||(b.formats=(0,a._)`require("ajv-formats/dist/formats").${g}`);for(const x of d)u.addFormat(x,c[x])}e.exports=t=s,Object.defineProperty(t,"__esModule",{value:!0}),t.default=s})(iI,iI.exports);var y7e=iI.exports;const v7e=Tie(y7e),b7e="http://json-schema.org/draft-07/schema#",_7e="ParsedSpec Array",x7e="An array of specifications for different layers.",w7e="array",k7e={type:"object",properties:{unit:{type:"object",description:"Defines the unit of analysis and its associated rendering properties.",properties:{type:{type:"string",description:"The unit of analysis (e.g., 'segment', 'node', 'point').",enum:["segment","node","point"],default:"segment"},density:{oneOf:[{type:"string"},{type:"number",minimum:0,maximum:200},{type:"null"}],description:"Density of each segment (in units per 200 meters).",default:null},method:{type:"string",description:"The rendering method (e.g., 'line', 'rect', 'matrix'').",enum:["line","rect","matrix"],default:"line"},opacity:{oneOf:[{type:"string"},{type:"number",minimum:0,maximum:1}],description:"Opacity, can be a number (0-1) or a string (field name).",default:1},color:{type:"string",description:"Color (e.g., 'red', '#HEXCODE'). Can also be a field name.",default:"#FF0000"},dash:{type:"string",description:"Style of line.",nullable:!0},squiggle:{type:"string",description:"Style of line.",nullable:!0},width:{oneOf:[{type:"string"},{type:"number",minimum:0}],description:"Width for lines. Can be a number or a string (field name).",default:1},height:{oneOf:[{type:"string"},{type:"number",minimum:0}],description:"Height for lines. Can be a number or a string (field name).",default:1},chart:{description:"Optional Vega-Lite chart specification.",oneOf:[{$ref:"https://vega.github.io/schema/vega-lite/v5.json"},{type:"null"}]},rows:{type:"number",description:"Row parameter for methods like 'matrix'.",nullable:!0},columns:{type:"number",description:"Column parameter for methods like 'matrix'.",nullable:!0},orientation:{type:"string",description:"Orientation for rendering (e.g., 'parallel', 'perpendicular').",enum:["parallel","perpendicular"],default:"parallel"},alignment:{type:"string",description:"Alignment for rendering (e.g., 'left', 'center', 'right').",enum:["left","center","right"],default:"center"}},additionalProperties:!1},data:{type:"object",description:"Paths to physical and thematic data layers.",properties:{physical:{type:"object",description:"Configuration for the physical layer data (e.g., GeoJSON file).",properties:{path:{type:"string",description:"Path to the physical layer data file."}},required:["path"],additionalProperties:!1},thematic:{type:"object",description:"Configuration for the thematic layer data (e.g., CSV file for points).",properties:{path:{type:"string",description:"Path to the thematic layer data file."},latColumn:{type:"string",description:"Name of the latitude column in the thematic data.",default:"lat"},lonColumn:{type:"string",description:"Name of the longitude column in the thematic data.",default:"lon"}},required:["path"],additionalProperties:!1}},additionalProperties:!1},relation:{type:"object",description:"Spatial relation and aggregation parameters.",properties:{spatial:{type:"string",description:"Type of spatial relation for data aggregation ('buffer', 'nn', 'contains').",enum:["buffer","nn","contains"],default:"buffer"},value:{type:"number",description:"Value associated with the spatial relation (e.g., buffer distance).",default:5},type:{type:"string",description:"Type of aggregation ('sum', 'mean', 'min', 'max').",enum:["sum","mean","min","max"],default:"mean"}},additionalProperties:!1},zoom:{type:"array",description:"The zoom level range for the map, specified as a [minimum_zoom, maximum_zoom] array.",minItems:2,maxItems:2,items:{type:"number",description:"A single zoom level, typically an integer.",minimum:0,maximum:22},default:[18,18],examples:[[0,22],[5,15],[18,18]]},map:{type:"object",description:"Map styling properties.",properties:{streetColor:{type:"string",description:"Color for streets on the map.",nullable:!0},streetWidth:{type:"number",description:"Width for streets on the map.",minimum:0,nullable:!0}},additionalProperties:!1},query:{type:"object",description:"Parameters for a spatial query.",properties:{address:{type:"string",description:"Address for a spatial query.",nullable:!0},radius:{type:"number",description:"Radius for a spatial query.",minimum:0,nullable:!0}},additionalProperties:!1}},additionalProperties:!1},$7e={$schema:b7e,title:_7e,description:x7e,type:w7e,items:k7e},E7e="#/definitions/TopLevelSpec",S7e="http://json-schema.org/draft-07/schema#",T7e={Aggregate:{anyOf:[{$ref:"#/definitions/NonArgAggregateOp"},{$ref:"#/definitions/ArgmaxDef"},{$ref:"#/definitions/ArgminDef"}]},AggregateOp:{enum:["argmax","argmin","average","count","distinct","max","mean","median","min","missing","product","q1","q3","ci0","ci1","stderr","stdev","stdevp","sum","valid","values","variance","variancep","exponential","exponentialb"],type:"string"},AggregateTransform:{additionalProperties:!1,properties:{aggregate:{description:"Array of objects that define fields to aggregate.",items:{$ref:"#/definitions/AggregatedFieldDef"},type:"array"},groupby:{description:"The data fields to group by. If not specified, a single group containing all data objects will be used.",items:{$ref:"#/definitions/FieldName"},type:"array"}},required:["aggregate"],type:"object"},AggregatedFieldDef:{additionalProperties:!1,properties:{as:{$ref:"#/definitions/FieldName",description:"The output field names to use for each aggregated field."},field:{$ref:"#/definitions/FieldName",description:'The data field for which to compute aggregate function. This is required for all aggregation operations except `"count"`.'},op:{$ref:"#/definitions/AggregateOp",description:'The aggregation operation to apply to the fields (e.g., `"sum"`, `"average"`, or `"count"`). See the [full list of supported aggregation operations](https://vega.github.io/vega-lite/docs/aggregate.html#ops) for more information.'}},required:["op","as"],type:"object"},Align:{enum:["left","center","right"],type:"string"},AllSortString:{anyOf:[{$ref:"#/definitions/SortOrder"},{$ref:"#/definitions/SortByChannel"},{$ref:"#/definitions/SortByChannelDesc"}]},AnyMark:{anyOf:[{$ref:"#/definitions/CompositeMark"},{$ref:"#/definitions/CompositeMarkDef"},{$ref:"#/definitions/Mark"},{$ref:"#/definitions/MarkDef"}]},AnyMarkConfig:{anyOf:[{$ref:"#/definitions/MarkConfig"},{$ref:"#/definitions/AreaConfig"},{$ref:"#/definitions/BarConfig"},{$ref:"#/definitions/RectConfig"},{$ref:"#/definitions/LineConfig"},{$ref:"#/definitions/TickConfig"}]},AreaConfig:{additionalProperties:!1,properties:{align:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:'The horizontal alignment of the text or ranged marks (area, bar, image, rect, rule). One of `"left"`, `"right"`, `"center"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},angle:{anyOf:[{description:"The rotation angle of the text, in degrees.",maximum:360,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG element, removing the mark item from the ARIA accessibility tree.',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},ariaRole:{anyOf:[{description:'Sets the type of user interface element of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "role" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},ariaRoleDescription:{anyOf:[{description:'A human-readable, author-localized description for the role of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "aria-roledescription" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},aspect:{anyOf:[{description:"Whether to keep aspect ratio of image marks.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},baseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'For text marks, the vertical text baseline. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, `"line-bottom"`, or an expression reference that provides one of the valid values. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `lineHeight` rather than `fontSize` alone.\n\nFor range marks, the vertical alignment of the marks. One of `"top"`, `"middle"`, `"bottom"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},blend:{anyOf:[{$ref:"#/definitions/Blend",description:'The color blend mode for drawing an item on its current background. Any valid [CSS mix-blend-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode) value can be used.\n\n__Default value: `"source-over"`'},{$ref:"#/definitions/ExprRef"}]},color:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{$ref:"#/definitions/ExprRef"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'},cornerRadius:{anyOf:[{description:"The radius in pixels of rounded rectangles or arcs' corners.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' top right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' top left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cursor:{anyOf:[{$ref:"#/definitions/Cursor",description:"The mouse cursor used over the mark. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used."},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute).',type:"string"},{$ref:"#/definitions/ExprRef"}]},dir:{anyOf:[{$ref:"#/definitions/TextDirection",description:'The direction of the text. One of `"ltr"` (left-to-right) or `"rtl"` (right-to-left). This property determines on which side is truncated in response to the limit parameter.\n\n__Default value:__ `"ltr"`'},{$ref:"#/definitions/ExprRef"}]},dx:{anyOf:[{description:"The horizontal offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},dy:{anyOf:[{description:"The vertical offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},ellipsis:{anyOf:[{description:'The ellipsis string for text truncated in response to the limit parameter.\n\n__Default value:__ `""`',type:"string"},{$ref:"#/definitions/ExprRef"}]},endAngle:{anyOf:[{description:"The end angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},fill:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default fill color. This property has higher precedence than `config.color`. Set to `null` to remove fill.\n\n__Default value:__ (None)"},fillOpacity:{anyOf:[{description:"The fill opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},filled:{description:"Whether the mark's color should be used as fill color instead of stroke color.\n\n__Default value:__ `false` for all `point`, `line`, and `rule` marks as well as `geoshape` marks for [`graticule`](https://vega.github.io/vega-lite/docs/data.html#graticule) data sources; otherwise, `true`.\n\n__Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).",type:"boolean"},font:{anyOf:[{description:'The typeface to set the text in (e.g., `"Helvetica Neue"`).',type:"string"},{$ref:"#/definitions/ExprRef"}]},fontSize:{anyOf:[{description:"The font size, in pixels.\n\n__Default value:__ `11`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},fontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:'The font style (e.g., `"italic"`).'},{$ref:"#/definitions/ExprRef"}]},fontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'The font weight. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},height:{anyOf:[{description:"Height of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},href:{anyOf:[{$ref:"#/definitions/URI",description:"A URL to load upon mouse click. If defined, the mark acts as a hyperlink."},{$ref:"#/definitions/ExprRef"}]},innerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The inner radius in pixels of arc marks. `innerRadius` is an alias for `radius2`.\n\n__Default value:__ `0`",minimum:0},interpolate:{anyOf:[{$ref:"#/definitions/Interpolate",description:'The line interpolation method to use for line and area marks. One of the following:\n- `"linear"`: piecewise linear segments, as in a polyline.\n- `"linear-closed"`: close the linear segments to form a polygon.\n- `"step"`: alternate between horizontal and vertical segments, as in a step function.\n- `"step-before"`: alternate between vertical and horizontal segments, as in a step function.\n- `"step-after"`: alternate between horizontal and vertical segments, as in a step function.\n- `"basis"`: a B-spline, with control point duplication on the ends.\n- `"basis-open"`: an open B-spline; may not intersect the start or end.\n- `"basis-closed"`: a closed B-spline, as in a loop.\n- `"cardinal"`: a Cardinal spline, with control point duplication on the ends.\n- `"cardinal-open"`: an open Cardinal spline; may not intersect the start or end, but will intersect other control points.\n- `"cardinal-closed"`: a closed Cardinal spline, as in a loop.\n- `"bundle"`: equivalent to basis, except the tension parameter is used to straighten the spline.\n- `"monotone"`: cubic interpolation that preserves monotonicity in y.'},{$ref:"#/definitions/ExprRef"}]},invalid:{anyOf:[{$ref:"#/definitions/MarkInvalidDataMode"},{type:"null"}],description:'Invalid data mode, which defines how the marks and corresponding scales should represent invalid values (`null` and `NaN` in continuous scales *without* defined output for invalid values).\n\n- `"filter"`  *Exclude* all invalid values from the visualization\'s *marks* and *scales*. For path marks (for line, area, trail), this option will create paths that connect valid points, as if the data rows with invalid values do not exist.\n\n- `"break-paths-filter-domains"`  Break path marks (for line, area, trail) at invalid values.  For non-path marks, this is equivalent to `"filter"`. All *scale* domains will *exclude* these filtered data points.\n\n- `"break-paths-show-domains"`  Break paths (for line, area, trail) at invalid values.  Hide invalid values for non-path marks. All *scale* domains will *include* these filtered data points (for both path and non-path marks).\n\n- `"show"` or `null`  Show all data points in the marks and scale domains. Each scale will use the output for invalid values defined in `config.scale.invalid` or, if unspecified, by default invalid values will produce the same visual values as zero (if the scale includes zero) or the minimum value (if the scale does not include zero).\n\n- `"break-paths-show-path-domains"` (default)  This is equivalent to `"break-paths-show-domains"` for path-based marks (line/area/trail) and `"filter"` for non-path marks.\n\n__Note__: If any channel\'s scale has an output for invalid values defined in `config.scale.invalid`, all values for the scales will be considered "valid" since they can produce a reasonable output for the scales. Thus, fields for such channels will not be filtered and will not cause path breaks.'},limit:{anyOf:[{description:"The maximum length of the text mark in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0` -- indicating no limit",type:"number"},{$ref:"#/definitions/ExprRef"}]},line:{anyOf:[{type:"boolean"},{$ref:"#/definitions/OverlayMarkDef"}],description:"A flag for overlaying line on top of area marks, or an object defining the properties of the overlayed lines.\n\n- If this value is an empty object (`{}`) or `true`, lines with default properties will be used.\n\n- If this value is `false`, no lines would be automatically added to area marks.\n\n__Default value:__ `false`."},lineBreak:{anyOf:[{description:"A delimiter, such as a newline character, upon which to break text strings into multiple lines. This property is ignored if the text is array-valued.",type:"string"},{$ref:"#/definitions/ExprRef"}]},lineHeight:{anyOf:[{description:"The line height in pixels (the spacing between subsequent lines of text) for multi-line text marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},opacity:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The overall opacity (value between [0,1]).\n\n__Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.",maximum:1,minimum:0},order:{description:"For line and trail marks, this `order` property can be set to `null` or `false` to make the lines use the original order in the data sources.",type:["null","boolean"]},orient:{$ref:"#/definitions/Orientation",description:`The orientation of a non-stacked bar, tick, area, and line charts. The value is either horizontal (default) or vertical.
- For bar, rule and tick, this determines whether the size of the bar and tick should be applied to x or y dimension.
- For area, this property determines the orient property of the Vega output.
- For line and trail marks, this property determines the sort order of the points in the line if \`config.sortLineBy\` is not specified. For stacked charts, this is always determined by the orientation of the stack; therefore explicitly specified value will be ignored.`},outerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The outer radius in pixels of arc marks. `outerRadius` is an alias for `radius`.\n\n__Default value:__ `0`",minimum:0},padAngle:{anyOf:[{description:"The angular padding applied to sides of the arc, in radians.",type:"number"},{$ref:"#/definitions/ExprRef"}]},point:{anyOf:[{type:"boolean"},{$ref:"#/definitions/OverlayMarkDef"},{const:"transparent",type:"string"}],description:'A flag for overlaying points on top of line or area marks, or an object defining the properties of the overlayed points.\n\n- If this property is `"transparent"`, transparent points will be used (for enhancing tooltips and selections).\n\n- If this property is an empty object (`{}`) or `true`, filled points with default properties will be used.\n\n- If this property is `false`, no points would be automatically added to line or area marks.\n\n__Default value:__ `false`.'},radius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"For arc mark, the primary (outer) radius in pixels.\n\nFor text marks, polar coordinate radial offset, in pixels, of the text from the origin determined by the `x` and `y` properties.\n\n__Default value:__ `min(plot_width, plot_height)/2`",minimum:0},radius2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The secondary (inner) radius in pixels of arc marks.\n\n__Default value:__ `0`",minimum:0},shape:{anyOf:[{anyOf:[{$ref:"#/definitions/SymbolShape"},{type:"string"}],description:'Shape of the point marks. Supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- the line symbol `"stroke"`\n- centered directional shapes `"arrow"`, `"wedge"`, or `"triangle"`\n- a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) (For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.)\n\n__Default value:__ `"circle"`'},{$ref:"#/definitions/ExprRef"}]},size:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default size for marks.\n- For `point`/`circle`/`square`, this represents the pixel area of the marks. Note that this value sets the area of the symbol; the side lengths will increase with the square root of this value.\n- For `bar`, this represents the band size of the bar, in pixels.\n- For `text`, this represents the font size, in pixels.\n\n__Default value:__\n- `30` for point, circle, square marks; width/height's `step`\n- `2` for bar marks with discrete dimensions;\n- `5` for bar marks with continuous dimensions;\n- `11` for text marks.",minimum:0},smooth:{anyOf:[{description:"A boolean flag (default true) indicating if the image should be smoothed when resized. If false, individual pixels should be scaled directly rather than interpolated with smoothing. For SVG rendering, this option may not work in some browsers due to lack of standardization.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},startAngle:{anyOf:[{description:"The start angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},stroke:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default stroke color. This property has higher precedence than `config.color`. Set to `null` to remove stroke.\n\n__Default value:__ (None)"},strokeCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for line ending style. One of `"butt"`, `"round"`, or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},strokeDash:{anyOf:[{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},strokeDashOffset:{anyOf:[{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeJoin:{anyOf:[{$ref:"#/definitions/StrokeJoin",description:'The stroke line join method. One of `"miter"`, `"round"` or `"bevel"`.\n\n__Default value:__ `"miter"`'},{$ref:"#/definitions/ExprRef"}]},strokeMiterLimit:{anyOf:[{description:"The miter limit at which to bevel a line join.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOffset:{anyOf:[{description:"The offset in pixels at which to draw the group stroke and fill. If unspecified, the default behavior is to dynamically offset stroked groups such that 1 pixel stroke widths align with the pixel grid.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOpacity:{anyOf:[{description:"The stroke opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeWidth:{anyOf:[{description:"The stroke width, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},tension:{anyOf:[{description:"Depending on the interpolation type, sets the tension parameter (for line and area marks).",type:"number"},{$ref:"#/definitions/ExprRef"}]},text:{anyOf:[{$ref:"#/definitions/Text",description:"Placeholder text if the `text` channel is not specified"},{$ref:"#/definitions/ExprRef"}]},theta:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:`- For arc marks, the arc length in radians if theta2 is not specified, otherwise the start arc angle. (A value of 0 indicates up or north, increasing values proceed clockwise.)

- For text marks, polar coordinate angle in radians.`,maximum:360,minimum:0},theta2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The end angle of arc marks in radians. A value of 0 indicates up or north, increasing values proceed clockwise."},time:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}]},timeUnitBandPosition:{description:"Default relative band position for a time unit. If set to `0`, the marks will be positioned at the beginning of the time unit band step. If set to `0.5`, the marks will be positioned in the middle of the time unit band step.",type:"number"},timeUnitBandSize:{description:"Default relative band size for a time unit. If set to `1`, the bandwidth of the marks will be equal to the time unit band step. If set to `0.5`, bandwidth of the marks will be half of the time unit band step.",type:"number"},tooltip:{anyOf:[{type:"number"},{type:"string"},{type:"boolean"},{$ref:"#/definitions/TooltipContent"},{$ref:"#/definitions/ExprRef"},{type:"null"}],description:'The tooltip text string to show upon mouse hover or an object defining which fields should the tooltip be derived from.\n\n- If `tooltip` is `true` or `{"content": "encoding"}`, then all fields from `encoding` will be used.\n- If `tooltip` is `{"content": "data"}`, then all fields that appear in the highlighted data point will be used.\n- If set to `null` or `false`, then no tooltip will be used.\n\nSee the [`tooltip`](https://vega.github.io/vega-lite/docs/tooltip.html) documentation for a detailed discussion about tooltip  in Vega-Lite.\n\n__Default value:__ `null`'},url:{anyOf:[{$ref:"#/definitions/URI",description:"The URL of the image file for image marks."},{$ref:"#/definitions/ExprRef"}]},width:{anyOf:[{description:"Width of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},x:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X coordinates of the marks, or width of horizontal `"bar"` and `"area"` without specified `x2` or `width`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},y:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y coordinates of the marks, or height of vertical `"bar"` and `"area"` without specified `y2` or `height`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'}},type:"object"},ArgmaxDef:{additionalProperties:!1,properties:{argmax:{$ref:"#/definitions/FieldName"}},required:["argmax"],type:"object"},ArgminDef:{additionalProperties:!1,properties:{argmin:{$ref:"#/definitions/FieldName"}},required:["argmin"],type:"object"},AutoSizeParams:{additionalProperties:!1,properties:{contains:{description:'Determines how size calculation should be performed, one of `"content"` or `"padding"`. The default setting (`"content"`) interprets the width and height settings as the data rectangle (plotting) dimensions, to which padding is then added. In contrast, the `"padding"` setting includes the padding within the view size calculations, such that the width and height settings indicate the **total** intended size of the view.\n\n__Default value__: `"content"`',enum:["content","padding"],type:"string"},resize:{description:"A boolean flag indicating if autosize layout should be re-calculated on every view update.\n\n__Default value__: `false`",type:"boolean"},type:{$ref:"#/definitions/AutosizeType",description:'The sizing format type. One of `"pad"`, `"fit"`, `"fit-x"`, `"fit-y"`,  or `"none"`. See the [autosize type](https://vega.github.io/vega-lite/docs/size.html#autosize) documentation for descriptions of each.\n\n__Default value__: `"pad"`'}},type:"object"},AutosizeType:{enum:["pad","none","fit","fit-x","fit-y"],type:"string"},Axis:{additionalProperties:!1,properties:{aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG group, removing the axis from the ARIA accessibility tree.\n\n__Default value:__ `true`',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},bandPosition:{anyOf:[{description:"An interpolation fraction indicating where, for `band` scales, axis ticks should be positioned. A value of `0` places ticks at the left edge of their bands. A value of `0.5` places ticks in the middle of their bands.\n\n __Default value:__ `0.5`",type:"number"},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of this axis for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If the `aria` property is true, for SVG output the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute) will be set to this description. If the description is unspecified it will be automatically generated.',type:"string"},{$ref:"#/definitions/ExprRef"}]},domain:{description:"A boolean flag indicating if the domain (the axis baseline) should be included as part of the axis.\n\n__Default value:__ `true`",type:"boolean"},domainCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for the domain line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},domainColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:'Color of axis domain line.\n\n__Default value:__ `"gray"`.'},{$ref:"#/definitions/ExprRef"}]},domainDash:{anyOf:[{description:"An array of alternating [stroke, space] lengths for dashed domain lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},domainDashOffset:{anyOf:[{description:"The pixel offset at which to start drawing with the domain dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},domainOpacity:{anyOf:[{description:"Opacity of the axis domain line.",type:"number"},{$ref:"#/definitions/ExprRef"}]},domainWidth:{anyOf:[{description:"Stroke width of axis domain line\n\n__Default value:__ `1`",type:"number"},{$ref:"#/definitions/ExprRef"}]},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},grid:{description:"A boolean flag indicating if grid lines should be included as part of the axis\n\n__Default value:__ `true` for [continuous scales](https://vega.github.io/vega-lite/docs/scale.html#continuous) that are not binned; otherwise, `false`.",type:"boolean"},gridCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for grid lines\' ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},gridColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:'Color of gridlines.\n\n__Default value:__ `"lightGray"`.'},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisColor"}]},gridDash:{anyOf:[{description:"An array of alternating [stroke, space] lengths for dashed grid lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumberArray"}]},gridDashOffset:{anyOf:[{description:"The pixel offset at which to start drawing with the grid dash array.",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},gridOpacity:{anyOf:[{description:"The stroke opacity of grid (value between [0,1])\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},gridWidth:{anyOf:[{description:"The grid width, in pixels.\n\n__Default value:__ `1`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},labelAlign:{anyOf:[{$ref:"#/definitions/Align",description:"Horizontal text alignment of axis tick labels, overriding the default setting for the current axis orientation."},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisLabelAlign"}]},labelAngle:{anyOf:[{description:"The rotation angle of the axis labels.\n\n__Default value:__ `-90` for nominal and ordinal fields; `0` otherwise.",maximum:360,minimum:-360,type:"number"},{$ref:"#/definitions/ExprRef"}]},labelBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline",description:'Vertical text baseline of axis tick labels, overriding the default setting for the current axis orientation. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the *lineHeight* rather than *fontSize* alone.'},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisLabelBaseline"}]},labelBound:{anyOf:[{description:"Indicates if labels should be hidden if they exceed the axis range. If `false` (the default) no bounds overlap analysis is performed. If `true`, labels will be hidden if they exceed the axis range by more than 1 pixel. If this property is a number, it specifies the pixel tolerance: the maximum amount by which a label bounding box may exceed the axis range.\n\n__Default value:__ `false`.",type:["number","boolean"]},{$ref:"#/definitions/ExprRef"}]},labelColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"The color of the tick label, can be in hex color code or regular color name."},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisColor"}]},labelExpr:{description:"[Vega expression](https://vega.github.io/vega/docs/expressions/) for customizing labels.\n\n__Note:__ The label text and value can be assessed via the `label` and `value` properties of the axis's backing `datum` object.",type:"string"},labelFlush:{description:"Indicates if the first and last axis labels should be aligned flush with the scale range. Flush alignment for a horizontal axis will left-align the first label and right-align the last label. For vertical axes, bottom and top text baselines are applied instead. If this property is a number, it also indicates the number of pixels by which to offset the first and last labels; for example, a value of 2 will flush-align the first and last labels and also push them 2 pixels outward from the center of the axis. The additional adjustment can sometimes help the labels better visually group with corresponding axis ticks.\n\n__Default value:__ `true` for axis of a continuous x-scale. Otherwise, `false`.",type:["boolean","number"]},labelFlushOffset:{anyOf:[{description:"Indicates the number of pixels by which to offset flush-adjusted labels. For example, a value of `2` will push flush-adjusted labels 2 pixels outward from the center of the axis. Offsets can help the labels better visually group with corresponding axis ticks.\n\n__Default value:__ `0`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},labelFont:{anyOf:[{description:"The font of the tick label.",type:"string"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisString"}]},labelFontSize:{anyOf:[{description:"The font size of the label, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},labelFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"Font style of the title."},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisLabelFontStyle"}]},labelFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:"Font weight of axis tick labels."},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisLabelFontWeight"}]},labelLimit:{anyOf:[{description:"Maximum allowed pixel width of axis tick labels.\n\n__Default value:__ `180`",type:"number"},{$ref:"#/definitions/ExprRef"}]},labelLineHeight:{anyOf:[{description:'Line height in pixels for multi-line label text or label text with `"line-top"` or `"line-bottom"` baseline.',type:"number"},{$ref:"#/definitions/ExprRef"}]},labelOffset:{anyOf:[{description:"Position offset in pixels to apply to labels, in addition to tickOffset.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},labelOpacity:{anyOf:[{description:"The opacity of the labels.",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},labelOverlap:{anyOf:[{$ref:"#/definitions/LabelOverlap"},{$ref:"#/definitions/ExprRef"}],description:'The strategy to use for resolving overlap of axis labels. If `false` (the default), no overlap reduction is attempted. If set to `true` or `"parity"`, a strategy of removing every other label is used (this works well for standard linear axes). If set to `"greedy"`, a linear scan of the labels is performed, removing any labels that overlaps with the last visible label (this often works better for log-scaled axes).\n\n__Default value:__ `true` for non-nominal fields with non-log scales; `"greedy"` for log scales; otherwise `false`.'},labelPadding:{anyOf:[{description:"The padding in pixels between labels and ticks.\n\n__Default value:__ `2`",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},labelSeparation:{anyOf:[{description:"The minimum separation that must be between label bounding boxes for them to be considered non-overlapping (default `0`). This property is ignored if *labelOverlap* resolution is not enabled.",type:"number"},{$ref:"#/definitions/ExprRef"}]},labels:{description:"A boolean flag indicating if labels should be included as part of the axis.\n\n__Default value:__ `true`.",type:"boolean"},maxExtent:{anyOf:[{description:"The maximum extent in pixels that axis ticks and labels should use. This determines a maximum offset value for axis titles.\n\n__Default value:__ `undefined`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},minExtent:{anyOf:[{description:"The minimum extent in pixels that axis ticks and labels should use. This determines a minimum offset value for axis titles.\n\n__Default value:__ `30` for y-axis; `undefined` for x-axis.",type:"number"},{$ref:"#/definitions/ExprRef"}]},offset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The offset, in pixels, by which to displace the axis from the edge of the enclosing group or data rectangle.\n\n__Default value:__ derived from the [axis config](https://vega.github.io/vega-lite/docs/config.html#facet-scale-config)'s `offset` (`0` by default)"},orient:{anyOf:[{$ref:"#/definitions/AxisOrient"},{$ref:"#/definitions/ExprRef"}],description:'The orientation of the axis. One of `"top"`, `"bottom"`, `"left"` or `"right"`. The orientation can be used to further specialize the axis type (e.g., a y-axis oriented towards the right edge of the chart).\n\n__Default value:__ `"bottom"` for x-axes and `"left"` for y-axes.'},position:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The anchor position of the axis in pixels. For x-axes with top or bottom orientation, this sets the axis group x coordinate. For y-axes with left or right orientation, this sets the axis group y coordinate.\n\n__Default value__: `0`"},style:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:'A string or array of strings indicating the name of custom styles to apply to the axis. A style is a named collection of axis property defined within the [style configuration](https://vega.github.io/vega-lite/docs/mark.html#style-config). If style is an array, later styles will override earlier styles.\n\n__Default value:__ (none) __Note:__ Any specified style will augment the default style. For example, an x-axis mark with `"style": "foo"` will use `config.axisX` and `config.style.foo` (the specified style `"foo"` has higher precedence).'},tickBand:{anyOf:[{description:'For band scales, indicates if ticks and grid lines should be placed at the `"center"` of a band (default) or at the band `"extent"`s to indicate intervals',enum:["center","extent"],type:"string"},{$ref:"#/definitions/ExprRef"}]},tickCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for the tick lines\' ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},tickColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:`The color of the axis's tick.

__Default value:__ \`"gray"\``},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisColor"}]},tickCount:{anyOf:[{type:"number"},{$ref:"#/definitions/TimeInterval"},{$ref:"#/definitions/TimeIntervalStep"},{$ref:"#/definitions/ExprRef"}],description:'A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are "nice" (multiples of 2, 5, 10) and lie within the underlying scale\'s range.\n\nFor scales of type `"time"` or `"utc"`, the tick count can instead be a time interval specifier. Legal string values are `"millisecond"`, `"second"`, `"minute"`, `"hour"`, `"day"`, `"week"`, `"month"`, and `"year"`. Alternatively, an object-valued interval specifier of the form `{"interval": "month", "step": 3}` includes a desired number of interval steps. Here, ticks are generated for each quarter (Jan, Apr, Jul, Oct) boundary.\n\n__Default value__: Determine using a formula `ceil(width/40)` for x and `ceil(height/40)` for y.',minimum:0},tickDash:{anyOf:[{description:"An array of alternating [stroke, space] lengths for dashed tick mark lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumberArray"}]},tickDashOffset:{anyOf:[{description:"The pixel offset at which to start drawing with the tick mark dash array.",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},tickExtra:{description:'Boolean flag indicating if an extra axis tick should be added for the initial position of the axis. This flag is useful for styling axes for `band` scales such that ticks are placed on band boundaries rather in the middle of a band. Use in conjunction with `"bandPosition": 1` and an axis `"padding"` value of `0`.',type:"boolean"},tickMinStep:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The minimum desired step between axis ticks, in terms of scale domain values. For example, a value of `1` indicates that ticks should not be less than 1 unit apart. If `tickMinStep` is specified, the `tickCount` value will be adjusted, if necessary, to enforce the minimum step value."},tickOffset:{anyOf:[{description:"Position offset in pixels to apply to ticks, labels, and gridlines.",type:"number"},{$ref:"#/definitions/ExprRef"}]},tickOpacity:{anyOf:[{description:"Opacity of the ticks.",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},tickRound:{description:"Boolean flag indicating if pixel position values should be rounded to the nearest integer.\n\n__Default value:__ `true`",type:"boolean"},tickSize:{anyOf:[{description:"The size in pixels of axis ticks.\n\n__Default value:__ `5`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},tickWidth:{anyOf:[{description:"The width, in pixels, of ticks.\n\n__Default value:__ `1`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},ticks:{description:"Boolean value that determines whether the axis should include ticks.\n\n__Default value:__ `true`",type:"boolean"},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},titleAlign:{anyOf:[{$ref:"#/definitions/Align",description:"Horizontal text alignment of axis titles."},{$ref:"#/definitions/ExprRef"}]},titleAnchor:{anyOf:[{$ref:"#/definitions/TitleAnchor",description:"Text anchor position for placing axis titles."},{$ref:"#/definitions/ExprRef"}]},titleAngle:{anyOf:[{description:"Angle in degrees of axis titles.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titleBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline",description:'Vertical text baseline for axis titles. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the *lineHeight* rather than *fontSize* alone.'},{$ref:"#/definitions/ExprRef"}]},titleColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Color of the title, can be in hex color code or regular color name."},{$ref:"#/definitions/ExprRef"}]},titleFont:{anyOf:[{description:'Font of the title. (e.g., `"Helvetica Neue"`).',type:"string"},{$ref:"#/definitions/ExprRef"}]},titleFontSize:{anyOf:[{description:"Font size of the title.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},titleFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"Font style of the title."},{$ref:"#/definitions/ExprRef"}]},titleFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'Font weight of the title. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},titleLimit:{anyOf:[{description:"Maximum allowed pixel width of axis titles.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},titleLineHeight:{anyOf:[{description:'Line height in pixels for multi-line title text or title text with `"line-top"` or `"line-bottom"` baseline.',type:"number"},{$ref:"#/definitions/ExprRef"}]},titleOpacity:{anyOf:[{description:"Opacity of the axis title.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titlePadding:{anyOf:[{description:"The padding, in pixels, between title and axis.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titleX:{anyOf:[{description:"X-coordinate of the axis title relative to the axis group.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titleY:{anyOf:[{description:"Y-coordinate of the axis title relative to the axis group.",type:"number"},{$ref:"#/definitions/ExprRef"}]},translate:{anyOf:[{description:"Coordinate space translation offset for axis layout. By default, axes are translated by a 0.5 pixel offset for both the x and y coordinates in order to align stroked lines with the pixel grid. However, for vector graphics output these pixel-specific adjustments may be undesirable, in which case translate can be changed (for example, to zero).\n\n__Default value:__ `0.5`",type:"number"},{$ref:"#/definitions/ExprRef"}]},values:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"},{items:{$ref:"#/definitions/DateTime"},type:"array"},{$ref:"#/definitions/ExprRef"}],description:"Explicitly set the visible axis tick values."},zindex:{description:"A non-negative integer indicating the z-index of the axis. If zindex is 0, axes should be drawn behind all chart elements. To put them in front, set `zindex` to `1` or more.\n\n__Default value:__ `0` (behind the marks).",minimum:0,type:"number"}},type:"object"},AxisConfig:{additionalProperties:!1,properties:{aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG group, removing the axis from the ARIA accessibility tree.\n\n__Default value:__ `true`',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},bandPosition:{anyOf:[{description:"An interpolation fraction indicating where, for `band` scales, axis ticks should be positioned. A value of `0` places ticks at the left edge of their bands. A value of `0.5` places ticks in the middle of their bands.\n\n __Default value:__ `0.5`",type:"number"},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of this axis for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If the `aria` property is true, for SVG output the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute) will be set to this description. If the description is unspecified it will be automatically generated.',type:"string"},{$ref:"#/definitions/ExprRef"}]},disable:{description:"Disable axis by default.",type:"boolean"},domain:{description:"A boolean flag indicating if the domain (the axis baseline) should be included as part of the axis.\n\n__Default value:__ `true`",type:"boolean"},domainCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for the domain line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},domainColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:'Color of axis domain line.\n\n__Default value:__ `"gray"`.'},{$ref:"#/definitions/ExprRef"}]},domainDash:{anyOf:[{description:"An array of alternating [stroke, space] lengths for dashed domain lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},domainDashOffset:{anyOf:[{description:"The pixel offset at which to start drawing with the domain dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},domainOpacity:{anyOf:[{description:"Opacity of the axis domain line.",type:"number"},{$ref:"#/definitions/ExprRef"}]},domainWidth:{anyOf:[{description:"Stroke width of axis domain line\n\n__Default value:__ `1`",type:"number"},{$ref:"#/definitions/ExprRef"}]},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},grid:{description:"A boolean flag indicating if grid lines should be included as part of the axis\n\n__Default value:__ `true` for [continuous scales](https://vega.github.io/vega-lite/docs/scale.html#continuous) that are not binned; otherwise, `false`.",type:"boolean"},gridCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for grid lines\' ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},gridColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:'Color of gridlines.\n\n__Default value:__ `"lightGray"`.'},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisColor"}]},gridDash:{anyOf:[{description:"An array of alternating [stroke, space] lengths for dashed grid lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumberArray"}]},gridDashOffset:{anyOf:[{description:"The pixel offset at which to start drawing with the grid dash array.",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},gridOpacity:{anyOf:[{description:"The stroke opacity of grid (value between [0,1])\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},gridWidth:{anyOf:[{description:"The grid width, in pixels.\n\n__Default value:__ `1`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},labelAlign:{anyOf:[{$ref:"#/definitions/Align",description:"Horizontal text alignment of axis tick labels, overriding the default setting for the current axis orientation."},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisLabelAlign"}]},labelAngle:{anyOf:[{description:"The rotation angle of the axis labels.\n\n__Default value:__ `-90` for nominal and ordinal fields; `0` otherwise.",maximum:360,minimum:-360,type:"number"},{$ref:"#/definitions/ExprRef"}]},labelBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline",description:'Vertical text baseline of axis tick labels, overriding the default setting for the current axis orientation. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the *lineHeight* rather than *fontSize* alone.'},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisLabelBaseline"}]},labelBound:{anyOf:[{description:"Indicates if labels should be hidden if they exceed the axis range. If `false` (the default) no bounds overlap analysis is performed. If `true`, labels will be hidden if they exceed the axis range by more than 1 pixel. If this property is a number, it specifies the pixel tolerance: the maximum amount by which a label bounding box may exceed the axis range.\n\n__Default value:__ `false`.",type:["number","boolean"]},{$ref:"#/definitions/ExprRef"}]},labelColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"The color of the tick label, can be in hex color code or regular color name."},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisColor"}]},labelExpr:{description:"[Vega expression](https://vega.github.io/vega/docs/expressions/) for customizing labels.\n\n__Note:__ The label text and value can be assessed via the `label` and `value` properties of the axis's backing `datum` object.",type:"string"},labelFlush:{description:"Indicates if the first and last axis labels should be aligned flush with the scale range. Flush alignment for a horizontal axis will left-align the first label and right-align the last label. For vertical axes, bottom and top text baselines are applied instead. If this property is a number, it also indicates the number of pixels by which to offset the first and last labels; for example, a value of 2 will flush-align the first and last labels and also push them 2 pixels outward from the center of the axis. The additional adjustment can sometimes help the labels better visually group with corresponding axis ticks.\n\n__Default value:__ `true` for axis of a continuous x-scale. Otherwise, `false`.",type:["boolean","number"]},labelFlushOffset:{anyOf:[{description:"Indicates the number of pixels by which to offset flush-adjusted labels. For example, a value of `2` will push flush-adjusted labels 2 pixels outward from the center of the axis. Offsets can help the labels better visually group with corresponding axis ticks.\n\n__Default value:__ `0`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},labelFont:{anyOf:[{description:"The font of the tick label.",type:"string"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisString"}]},labelFontSize:{anyOf:[{description:"The font size of the label, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},labelFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"Font style of the title."},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisLabelFontStyle"}]},labelFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:"Font weight of axis tick labels."},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisLabelFontWeight"}]},labelLimit:{anyOf:[{description:"Maximum allowed pixel width of axis tick labels.\n\n__Default value:__ `180`",type:"number"},{$ref:"#/definitions/ExprRef"}]},labelLineHeight:{anyOf:[{description:'Line height in pixels for multi-line label text or label text with `"line-top"` or `"line-bottom"` baseline.',type:"number"},{$ref:"#/definitions/ExprRef"}]},labelOffset:{anyOf:[{description:"Position offset in pixels to apply to labels, in addition to tickOffset.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},labelOpacity:{anyOf:[{description:"The opacity of the labels.",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},labelOverlap:{anyOf:[{$ref:"#/definitions/LabelOverlap"},{$ref:"#/definitions/ExprRef"}],description:'The strategy to use for resolving overlap of axis labels. If `false` (the default), no overlap reduction is attempted. If set to `true` or `"parity"`, a strategy of removing every other label is used (this works well for standard linear axes). If set to `"greedy"`, a linear scan of the labels is performed, removing any labels that overlaps with the last visible label (this often works better for log-scaled axes).\n\n__Default value:__ `true` for non-nominal fields with non-log scales; `"greedy"` for log scales; otherwise `false`.'},labelPadding:{anyOf:[{description:"The padding in pixels between labels and ticks.\n\n__Default value:__ `2`",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},labelSeparation:{anyOf:[{description:"The minimum separation that must be between label bounding boxes for them to be considered non-overlapping (default `0`). This property is ignored if *labelOverlap* resolution is not enabled.",type:"number"},{$ref:"#/definitions/ExprRef"}]},labels:{description:"A boolean flag indicating if labels should be included as part of the axis.\n\n__Default value:__ `true`.",type:"boolean"},maxExtent:{anyOf:[{description:"The maximum extent in pixels that axis ticks and labels should use. This determines a maximum offset value for axis titles.\n\n__Default value:__ `undefined`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},minExtent:{anyOf:[{description:"The minimum extent in pixels that axis ticks and labels should use. This determines a minimum offset value for axis titles.\n\n__Default value:__ `30` for y-axis; `undefined` for x-axis.",type:"number"},{$ref:"#/definitions/ExprRef"}]},offset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The offset, in pixels, by which to displace the axis from the edge of the enclosing group or data rectangle.\n\n__Default value:__ derived from the [axis config](https://vega.github.io/vega-lite/docs/config.html#facet-scale-config)'s `offset` (`0` by default)"},orient:{anyOf:[{$ref:"#/definitions/AxisOrient"},{$ref:"#/definitions/ExprRef"}],description:'The orientation of the axis. One of `"top"`, `"bottom"`, `"left"` or `"right"`. The orientation can be used to further specialize the axis type (e.g., a y-axis oriented towards the right edge of the chart).\n\n__Default value:__ `"bottom"` for x-axes and `"left"` for y-axes.'},position:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The anchor position of the axis in pixels. For x-axes with top or bottom orientation, this sets the axis group x coordinate. For y-axes with left or right orientation, this sets the axis group y coordinate.\n\n__Default value__: `0`"},style:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:'A string or array of strings indicating the name of custom styles to apply to the axis. A style is a named collection of axis property defined within the [style configuration](https://vega.github.io/vega-lite/docs/mark.html#style-config). If style is an array, later styles will override earlier styles.\n\n__Default value:__ (none) __Note:__ Any specified style will augment the default style. For example, an x-axis mark with `"style": "foo"` will use `config.axisX` and `config.style.foo` (the specified style `"foo"` has higher precedence).'},tickBand:{anyOf:[{description:'For band scales, indicates if ticks and grid lines should be placed at the `"center"` of a band (default) or at the band `"extent"`s to indicate intervals',enum:["center","extent"],type:"string"},{$ref:"#/definitions/ExprRef"}]},tickCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for the tick lines\' ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},tickColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:`The color of the axis's tick.

__Default value:__ \`"gray"\``},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisColor"}]},tickCount:{anyOf:[{type:"number"},{$ref:"#/definitions/TimeInterval"},{$ref:"#/definitions/TimeIntervalStep"},{$ref:"#/definitions/ExprRef"}],description:'A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are "nice" (multiples of 2, 5, 10) and lie within the underlying scale\'s range.\n\nFor scales of type `"time"` or `"utc"`, the tick count can instead be a time interval specifier. Legal string values are `"millisecond"`, `"second"`, `"minute"`, `"hour"`, `"day"`, `"week"`, `"month"`, and `"year"`. Alternatively, an object-valued interval specifier of the form `{"interval": "month", "step": 3}` includes a desired number of interval steps. Here, ticks are generated for each quarter (Jan, Apr, Jul, Oct) boundary.\n\n__Default value__: Determine using a formula `ceil(width/40)` for x and `ceil(height/40)` for y.',minimum:0},tickDash:{anyOf:[{description:"An array of alternating [stroke, space] lengths for dashed tick mark lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumberArray"}]},tickDashOffset:{anyOf:[{description:"The pixel offset at which to start drawing with the tick mark dash array.",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},tickExtra:{description:'Boolean flag indicating if an extra axis tick should be added for the initial position of the axis. This flag is useful for styling axes for `band` scales such that ticks are placed on band boundaries rather in the middle of a band. Use in conjunction with `"bandPosition": 1` and an axis `"padding"` value of `0`.',type:"boolean"},tickMinStep:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The minimum desired step between axis ticks, in terms of scale domain values. For example, a value of `1` indicates that ticks should not be less than 1 unit apart. If `tickMinStep` is specified, the `tickCount` value will be adjusted, if necessary, to enforce the minimum step value."},tickOffset:{anyOf:[{description:"Position offset in pixels to apply to ticks, labels, and gridlines.",type:"number"},{$ref:"#/definitions/ExprRef"}]},tickOpacity:{anyOf:[{description:"Opacity of the ticks.",type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},tickRound:{description:"Boolean flag indicating if pixel position values should be rounded to the nearest integer.\n\n__Default value:__ `true`",type:"boolean"},tickSize:{anyOf:[{description:"The size in pixels of axis ticks.\n\n__Default value:__ `5`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},tickWidth:{anyOf:[{description:"The width, in pixels, of ticks.\n\n__Default value:__ `1`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ConditionalAxisNumber"}]},ticks:{description:"Boolean value that determines whether the axis should include ticks.\n\n__Default value:__ `true`",type:"boolean"},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},titleAlign:{anyOf:[{$ref:"#/definitions/Align",description:"Horizontal text alignment of axis titles."},{$ref:"#/definitions/ExprRef"}]},titleAnchor:{anyOf:[{$ref:"#/definitions/TitleAnchor",description:"Text anchor position for placing axis titles."},{$ref:"#/definitions/ExprRef"}]},titleAngle:{anyOf:[{description:"Angle in degrees of axis titles.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titleBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline",description:'Vertical text baseline for axis titles. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the *lineHeight* rather than *fontSize* alone.'},{$ref:"#/definitions/ExprRef"}]},titleColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Color of the title, can be in hex color code or regular color name."},{$ref:"#/definitions/ExprRef"}]},titleFont:{anyOf:[{description:'Font of the title. (e.g., `"Helvetica Neue"`).',type:"string"},{$ref:"#/definitions/ExprRef"}]},titleFontSize:{anyOf:[{description:"Font size of the title.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},titleFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"Font style of the title."},{$ref:"#/definitions/ExprRef"}]},titleFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'Font weight of the title. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},titleLimit:{anyOf:[{description:"Maximum allowed pixel width of axis titles.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},titleLineHeight:{anyOf:[{description:'Line height in pixels for multi-line title text or title text with `"line-top"` or `"line-bottom"` baseline.',type:"number"},{$ref:"#/definitions/ExprRef"}]},titleOpacity:{anyOf:[{description:"Opacity of the axis title.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titlePadding:{anyOf:[{description:"The padding, in pixels, between title and axis.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titleX:{anyOf:[{description:"X-coordinate of the axis title relative to the axis group.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titleY:{anyOf:[{description:"Y-coordinate of the axis title relative to the axis group.",type:"number"},{$ref:"#/definitions/ExprRef"}]},translate:{anyOf:[{description:"Coordinate space translation offset for axis layout. By default, axes are translated by a 0.5 pixel offset for both the x and y coordinates in order to align stroked lines with the pixel grid. However, for vector graphics output these pixel-specific adjustments may be undesirable, in which case translate can be changed (for example, to zero).\n\n__Default value:__ `0.5`",type:"number"},{$ref:"#/definitions/ExprRef"}]},values:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"},{items:{$ref:"#/definitions/DateTime"},type:"array"},{$ref:"#/definitions/ExprRef"}],description:"Explicitly set the visible axis tick values."},zindex:{description:"A non-negative integer indicating the z-index of the axis. If zindex is 0, axes should be drawn behind all chart elements. To put them in front, set `zindex` to `1` or more.\n\n__Default value:__ `0` (behind the marks).",minimum:0,type:"number"}},type:"object"},AxisOrient:{enum:["top","bottom","left","right"],type:"string"},AxisResolveMap:{additionalProperties:!1,properties:{x:{$ref:"#/definitions/ResolveMode"},y:{$ref:"#/definitions/ResolveMode"}},type:"object"},BBox:{anyOf:[{items:{type:"number"},maxItems:4,minItems:4,type:"array"},{items:{type:"number"},maxItems:6,minItems:6,type:"array"}],description:"Bounding box https://tools.ietf.org/html/rfc7946#section-5"},BarConfig:{additionalProperties:!1,properties:{align:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:'The horizontal alignment of the text or ranged marks (area, bar, image, rect, rule). One of `"left"`, `"right"`, `"center"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},angle:{anyOf:[{description:"The rotation angle of the text, in degrees.",maximum:360,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG element, removing the mark item from the ARIA accessibility tree.',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},ariaRole:{anyOf:[{description:'Sets the type of user interface element of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "role" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},ariaRoleDescription:{anyOf:[{description:'A human-readable, author-localized description for the role of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "aria-roledescription" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},aspect:{anyOf:[{description:"Whether to keep aspect ratio of image marks.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},baseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'For text marks, the vertical text baseline. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, `"line-bottom"`, or an expression reference that provides one of the valid values. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `lineHeight` rather than `fontSize` alone.\n\nFor range marks, the vertical alignment of the marks. One of `"top"`, `"middle"`, `"bottom"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},binSpacing:{description:"Offset between bars for binned field. The ideal value for this is either 0 (preferred by statisticians) or 1 (Vega-Lite default, D3 example style).\n\n__Default value:__ `1`",minimum:0,type:"number"},blend:{anyOf:[{$ref:"#/definitions/Blend",description:'The color blend mode for drawing an item on its current background. Any valid [CSS mix-blend-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode) value can be used.\n\n__Default value: `"source-over"`'},{$ref:"#/definitions/ExprRef"}]},color:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{$ref:"#/definitions/ExprRef"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'},continuousBandSize:{description:"The default size of the bars on continuous scales.\n\n__Default value:__ `5`",minimum:0,type:"number"},cornerRadius:{anyOf:[{description:"The radius in pixels of rounded rectangles or arcs' corners.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusEnd:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:`- For vertical bars, top-left and top-right corner radius.

- For horizontal bars, top-right and bottom-right corner radius.`},cornerRadiusTopLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' top right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' top left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cursor:{anyOf:[{$ref:"#/definitions/Cursor",description:"The mouse cursor used over the mark. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used."},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute).',type:"string"},{$ref:"#/definitions/ExprRef"}]},dir:{anyOf:[{$ref:"#/definitions/TextDirection",description:'The direction of the text. One of `"ltr"` (left-to-right) or `"rtl"` (right-to-left). This property determines on which side is truncated in response to the limit parameter.\n\n__Default value:__ `"ltr"`'},{$ref:"#/definitions/ExprRef"}]},discreteBandSize:{anyOf:[{type:"number"},{$ref:"#/definitions/RelativeBandSize"}],description:"The default size of the bars with discrete dimensions. If unspecified, the default size is  `step-2`, which provides 2 pixel offset between bars.",minimum:0},dx:{anyOf:[{description:"The horizontal offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},dy:{anyOf:[{description:"The vertical offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},ellipsis:{anyOf:[{description:'The ellipsis string for text truncated in response to the limit parameter.\n\n__Default value:__ `""`',type:"string"},{$ref:"#/definitions/ExprRef"}]},endAngle:{anyOf:[{description:"The end angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},fill:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default fill color. This property has higher precedence than `config.color`. Set to `null` to remove fill.\n\n__Default value:__ (None)"},fillOpacity:{anyOf:[{description:"The fill opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},filled:{description:"Whether the mark's color should be used as fill color instead of stroke color.\n\n__Default value:__ `false` for all `point`, `line`, and `rule` marks as well as `geoshape` marks for [`graticule`](https://vega.github.io/vega-lite/docs/data.html#graticule) data sources; otherwise, `true`.\n\n__Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).",type:"boolean"},font:{anyOf:[{description:'The typeface to set the text in (e.g., `"Helvetica Neue"`).',type:"string"},{$ref:"#/definitions/ExprRef"}]},fontSize:{anyOf:[{description:"The font size, in pixels.\n\n__Default value:__ `11`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},fontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:'The font style (e.g., `"italic"`).'},{$ref:"#/definitions/ExprRef"}]},fontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'The font weight. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},height:{anyOf:[{description:"Height of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},href:{anyOf:[{$ref:"#/definitions/URI",description:"A URL to load upon mouse click. If defined, the mark acts as a hyperlink."},{$ref:"#/definitions/ExprRef"}]},innerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The inner radius in pixels of arc marks. `innerRadius` is an alias for `radius2`.\n\n__Default value:__ `0`",minimum:0},interpolate:{anyOf:[{$ref:"#/definitions/Interpolate",description:'The line interpolation method to use for line and area marks. One of the following:\n- `"linear"`: piecewise linear segments, as in a polyline.\n- `"linear-closed"`: close the linear segments to form a polygon.\n- `"step"`: alternate between horizontal and vertical segments, as in a step function.\n- `"step-before"`: alternate between vertical and horizontal segments, as in a step function.\n- `"step-after"`: alternate between horizontal and vertical segments, as in a step function.\n- `"basis"`: a B-spline, with control point duplication on the ends.\n- `"basis-open"`: an open B-spline; may not intersect the start or end.\n- `"basis-closed"`: a closed B-spline, as in a loop.\n- `"cardinal"`: a Cardinal spline, with control point duplication on the ends.\n- `"cardinal-open"`: an open Cardinal spline; may not intersect the start or end, but will intersect other control points.\n- `"cardinal-closed"`: a closed Cardinal spline, as in a loop.\n- `"bundle"`: equivalent to basis, except the tension parameter is used to straighten the spline.\n- `"monotone"`: cubic interpolation that preserves monotonicity in y.'},{$ref:"#/definitions/ExprRef"}]},invalid:{anyOf:[{$ref:"#/definitions/MarkInvalidDataMode"},{type:"null"}],description:'Invalid data mode, which defines how the marks and corresponding scales should represent invalid values (`null` and `NaN` in continuous scales *without* defined output for invalid values).\n\n- `"filter"`  *Exclude* all invalid values from the visualization\'s *marks* and *scales*. For path marks (for line, area, trail), this option will create paths that connect valid points, as if the data rows with invalid values do not exist.\n\n- `"break-paths-filter-domains"`  Break path marks (for line, area, trail) at invalid values.  For non-path marks, this is equivalent to `"filter"`. All *scale* domains will *exclude* these filtered data points.\n\n- `"break-paths-show-domains"`  Break paths (for line, area, trail) at invalid values.  Hide invalid values for non-path marks. All *scale* domains will *include* these filtered data points (for both path and non-path marks).\n\n- `"show"` or `null`  Show all data points in the marks and scale domains. Each scale will use the output for invalid values defined in `config.scale.invalid` or, if unspecified, by default invalid values will produce the same visual values as zero (if the scale includes zero) or the minimum value (if the scale does not include zero).\n\n- `"break-paths-show-path-domains"` (default)  This is equivalent to `"break-paths-show-domains"` for path-based marks (line/area/trail) and `"filter"` for non-path marks.\n\n__Note__: If any channel\'s scale has an output for invalid values defined in `config.scale.invalid`, all values for the scales will be considered "valid" since they can produce a reasonable output for the scales. Thus, fields for such channels will not be filtered and will not cause path breaks.'},limit:{anyOf:[{description:"The maximum length of the text mark in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0` -- indicating no limit",type:"number"},{$ref:"#/definitions/ExprRef"}]},lineBreak:{anyOf:[{description:"A delimiter, such as a newline character, upon which to break text strings into multiple lines. This property is ignored if the text is array-valued.",type:"string"},{$ref:"#/definitions/ExprRef"}]},lineHeight:{anyOf:[{description:"The line height in pixels (the spacing between subsequent lines of text) for multi-line text marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},minBandSize:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The minimum band size for bar and rectangle marks. __Default value:__ `0.25`"},opacity:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The overall opacity (value between [0,1]).\n\n__Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.",maximum:1,minimum:0},order:{description:"For line and trail marks, this `order` property can be set to `null` or `false` to make the lines use the original order in the data sources.",type:["null","boolean"]},orient:{$ref:"#/definitions/Orientation",description:`The orientation of a non-stacked bar, tick, area, and line charts. The value is either horizontal (default) or vertical.
- For bar, rule and tick, this determines whether the size of the bar and tick should be applied to x or y dimension.
- For area, this property determines the orient property of the Vega output.
- For line and trail marks, this property determines the sort order of the points in the line if \`config.sortLineBy\` is not specified. For stacked charts, this is always determined by the orientation of the stack; therefore explicitly specified value will be ignored.`},outerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The outer radius in pixels of arc marks. `outerRadius` is an alias for `radius`.\n\n__Default value:__ `0`",minimum:0},padAngle:{anyOf:[{description:"The angular padding applied to sides of the arc, in radians.",type:"number"},{$ref:"#/definitions/ExprRef"}]},radius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"For arc mark, the primary (outer) radius in pixels.\n\nFor text marks, polar coordinate radial offset, in pixels, of the text from the origin determined by the `x` and `y` properties.\n\n__Default value:__ `min(plot_width, plot_height)/2`",minimum:0},radius2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The secondary (inner) radius in pixels of arc marks.\n\n__Default value:__ `0`",minimum:0},shape:{anyOf:[{anyOf:[{$ref:"#/definitions/SymbolShape"},{type:"string"}],description:'Shape of the point marks. Supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- the line symbol `"stroke"`\n- centered directional shapes `"arrow"`, `"wedge"`, or `"triangle"`\n- a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) (For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.)\n\n__Default value:__ `"circle"`'},{$ref:"#/definitions/ExprRef"}]},size:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default size for marks.\n- For `point`/`circle`/`square`, this represents the pixel area of the marks. Note that this value sets the area of the symbol; the side lengths will increase with the square root of this value.\n- For `bar`, this represents the band size of the bar, in pixels.\n- For `text`, this represents the font size, in pixels.\n\n__Default value:__\n- `30` for point, circle, square marks; width/height's `step`\n- `2` for bar marks with discrete dimensions;\n- `5` for bar marks with continuous dimensions;\n- `11` for text marks.",minimum:0},smooth:{anyOf:[{description:"A boolean flag (default true) indicating if the image should be smoothed when resized. If false, individual pixels should be scaled directly rather than interpolated with smoothing. For SVG rendering, this option may not work in some browsers due to lack of standardization.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},startAngle:{anyOf:[{description:"The start angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},stroke:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default stroke color. This property has higher precedence than `config.color`. Set to `null` to remove stroke.\n\n__Default value:__ (None)"},strokeCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for line ending style. One of `"butt"`, `"round"`, or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},strokeDash:{anyOf:[{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},strokeDashOffset:{anyOf:[{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeJoin:{anyOf:[{$ref:"#/definitions/StrokeJoin",description:'The stroke line join method. One of `"miter"`, `"round"` or `"bevel"`.\n\n__Default value:__ `"miter"`'},{$ref:"#/definitions/ExprRef"}]},strokeMiterLimit:{anyOf:[{description:"The miter limit at which to bevel a line join.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOffset:{anyOf:[{description:"The offset in pixels at which to draw the group stroke and fill. If unspecified, the default behavior is to dynamically offset stroked groups such that 1 pixel stroke widths align with the pixel grid.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOpacity:{anyOf:[{description:"The stroke opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeWidth:{anyOf:[{description:"The stroke width, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},tension:{anyOf:[{description:"Depending on the interpolation type, sets the tension parameter (for line and area marks).",type:"number"},{$ref:"#/definitions/ExprRef"}]},text:{anyOf:[{$ref:"#/definitions/Text",description:"Placeholder text if the `text` channel is not specified"},{$ref:"#/definitions/ExprRef"}]},theta:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:`- For arc marks, the arc length in radians if theta2 is not specified, otherwise the start arc angle. (A value of 0 indicates up or north, increasing values proceed clockwise.)

- For text marks, polar coordinate angle in radians.`,maximum:360,minimum:0},theta2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The end angle of arc marks in radians. A value of 0 indicates up or north, increasing values proceed clockwise."},time:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}]},timeUnitBandPosition:{description:"Default relative band position for a time unit. If set to `0`, the marks will be positioned at the beginning of the time unit band step. If set to `0.5`, the marks will be positioned in the middle of the time unit band step.",type:"number"},timeUnitBandSize:{description:"Default relative band size for a time unit. If set to `1`, the bandwidth of the marks will be equal to the time unit band step. If set to `0.5`, bandwidth of the marks will be half of the time unit band step.",type:"number"},tooltip:{anyOf:[{type:"number"},{type:"string"},{type:"boolean"},{$ref:"#/definitions/TooltipContent"},{$ref:"#/definitions/ExprRef"},{type:"null"}],description:'The tooltip text string to show upon mouse hover or an object defining which fields should the tooltip be derived from.\n\n- If `tooltip` is `true` or `{"content": "encoding"}`, then all fields from `encoding` will be used.\n- If `tooltip` is `{"content": "data"}`, then all fields that appear in the highlighted data point will be used.\n- If set to `null` or `false`, then no tooltip will be used.\n\nSee the [`tooltip`](https://vega.github.io/vega-lite/docs/tooltip.html) documentation for a detailed discussion about tooltip  in Vega-Lite.\n\n__Default value:__ `null`'},url:{anyOf:[{$ref:"#/definitions/URI",description:"The URL of the image file for image marks."},{$ref:"#/definitions/ExprRef"}]},width:{anyOf:[{description:"Width of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},x:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X coordinates of the marks, or width of horizontal `"bar"` and `"area"` without specified `x2` or `width`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},y:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y coordinates of the marks, or height of vertical `"bar"` and `"area"` without specified `y2` or `height`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'}},type:"object"},BaseTitleNoValueRefs:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/Align",description:'Horizontal text alignment for title text. One of `"left"`, `"center"`, or `"right"`.'},anchor:{anyOf:[{$ref:"#/definitions/TitleAnchor",description:'The anchor position for placing the title and subtitle text. One of `"start"`, `"middle"`, or `"end"`. For example, with an orientation of top these anchor positions map to a left-, center-, or right-aligned title.'},{$ref:"#/definitions/ExprRef"}]},angle:{anyOf:[{description:"Angle in degrees of title and subtitle text.",type:"number"},{$ref:"#/definitions/ExprRef"}]},aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG group, removing the title from the ARIA accessibility tree.\n\n__Default value:__ `true`',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},baseline:{$ref:"#/definitions/TextBaseline",description:'Vertical text baseline for title and subtitle text. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the *lineHeight* rather than *fontSize* alone.'},color:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Text color for title text."},{$ref:"#/definitions/ExprRef"}]},dx:{anyOf:[{description:"Delta offset for title and subtitle text x-coordinate.",type:"number"},{$ref:"#/definitions/ExprRef"}]},dy:{anyOf:[{description:"Delta offset for title and subtitle text y-coordinate.",type:"number"},{$ref:"#/definitions/ExprRef"}]},font:{anyOf:[{description:"Font name for title text.",type:"string"},{$ref:"#/definitions/ExprRef"}]},fontSize:{anyOf:[{description:"Font size in pixels for title text.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},fontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"Font style for title text."},{$ref:"#/definitions/ExprRef"}]},fontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'Font weight for title text. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},frame:{anyOf:[{anyOf:[{$ref:"#/definitions/TitleFrame"},{type:"string"}],description:'The reference frame for the anchor position, one of `"bounds"` (to anchor relative to the full bounding box) or `"group"` (to anchor relative to the group width or height).'},{$ref:"#/definitions/ExprRef"}]},limit:{anyOf:[{description:"The maximum allowed length in pixels of title and subtitle text.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},lineHeight:{anyOf:[{description:'Line height in pixels for multi-line title text or title text with `"line-top"` or `"line-bottom"` baseline.',type:"number"},{$ref:"#/definitions/ExprRef"}]},offset:{anyOf:[{description:"The orthogonal offset in pixels by which to displace the title group from its position along the edge of the chart.",type:"number"},{$ref:"#/definitions/ExprRef"}]},orient:{anyOf:[{$ref:"#/definitions/TitleOrient",description:'Default title orientation (`"top"`, `"bottom"`, `"left"`, or `"right"`)'},{$ref:"#/definitions/ExprRef"}]},subtitleColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Text color for subtitle text."},{$ref:"#/definitions/ExprRef"}]},subtitleFont:{anyOf:[{description:"Font name for subtitle text.",type:"string"},{$ref:"#/definitions/ExprRef"}]},subtitleFontSize:{anyOf:[{description:"Font size in pixels for subtitle text.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},subtitleFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"Font style for subtitle text."},{$ref:"#/definitions/ExprRef"}]},subtitleFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'Font weight for subtitle text. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},subtitleLineHeight:{anyOf:[{description:"Line height in pixels for multi-line subtitle text.",type:"number"},{$ref:"#/definitions/ExprRef"}]},subtitlePadding:{anyOf:[{description:"The padding in pixels between title and subtitle text.",type:"number"},{$ref:"#/definitions/ExprRef"}]},zindex:{anyOf:[{description:"The integer z-index indicating the layering of the title group relative to other axis, mark, and legend groups.\n\n__Default value:__ `0`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]}},type:"object"},Baseline:{enum:["top","middle","bottom"],type:"string"},BinExtent:{anyOf:[{items:{type:"number"},maxItems:2,minItems:2,type:"array"},{$ref:"#/definitions/ParameterExtent"}]},BinParams:{additionalProperties:!1,description:"Binning properties or boolean flag for determining whether to bin data or not.",properties:{anchor:{description:`A value in the binned domain at which to anchor the bins, shifting the bin boundaries if necessary to ensure that a boundary aligns with the anchor value.

__Default value:__ the minimum bin extent value`,type:"number"},base:{description:"The number base to use for automatic bin determination (default is base 10).\n\n__Default value:__ `10`",type:"number"},binned:{description:"When set to `true`, Vega-Lite treats the input data as already binned.",type:"boolean"},divide:{description:"Scale factors indicating allowable subdivisions. The default value is [5, 2], which indicates that for base 10 numbers (the default base), the method may consider dividing bin sizes by 5 and/or 2. For example, for an initial step size of 10, the method can check if bin sizes of 2 (= 10/5), 5 (= 10/2), or 1 (= 10/(5*2)) might also satisfy the given constraints.\n\n__Default value:__ `[5, 2]`",items:{type:"number"},maxItems:2,minItems:1,type:"array"},extent:{$ref:"#/definitions/BinExtent",description:"A two-element (`[min, max]`) array indicating the range of desired bin values."},maxbins:{description:"Maximum number of bins.\n\n__Default value:__ `6` for `row`, `column` and `shape` channels; `10` for other channels",minimum:2,type:"number"},minstep:{description:"A minimum allowable step size (particularly useful for integer values).",type:"number"},nice:{description:"If true, attempts to make the bin boundaries use human-friendly boundaries, such as multiples of ten.\n\n__Default value:__ `true`",type:"boolean"},step:{description:`An exact step size to use between bins.

__Note:__ If provided, options such as maxbins will be ignored.`,type:"number"},steps:{description:"An array of allowable step sizes to choose from.",items:{type:"number"},minItems:1,type:"array"}},type:"object"},BinTransform:{additionalProperties:!1,properties:{as:{anyOf:[{$ref:"#/definitions/FieldName"},{items:{$ref:"#/definitions/FieldName"},type:"array"}],description:'The output fields at which to write the start and end bin values. This can be either a string or an array of strings with two elements denoting the name for the fields for bin start and bin end respectively. If a single string (e.g., `"val"`) is provided, the end field will be `"val_end"`.'},bin:{anyOf:[{const:!0,type:"boolean"},{$ref:"#/definitions/BinParams"}],description:"An object indicating bin properties, or simply `true` for using default bin parameters."},field:{$ref:"#/definitions/FieldName",description:"The data field to bin."}},required:["bin","field","as"],type:"object"},BindCheckbox:{additionalProperties:!1,properties:{debounce:{description:"If defined, delays event handling until the specified milliseconds have elapsed since the last event was fired.",type:"number"},element:{$ref:"#/definitions/Element",description:"An optional CSS selector string indicating the parent element to which the input element should be added. By default, all input elements are added within the parent container of the Vega view."},input:{const:"checkbox",type:"string"},name:{description:"By default, the signal name is used to label input elements. This `name` property can be used instead to specify a custom label for the bound signal.",type:"string"}},required:["input"],type:"object"},BindDirect:{additionalProperties:!1,properties:{debounce:{description:"If defined, delays event handling until the specified milliseconds have elapsed since the last event was fired.",type:"number"},element:{anyOf:[{$ref:"#/definitions/Element"},{additionalProperties:!1,type:"object"}],description:"An input element that exposes a _value_ property and supports the [EventTarget](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget) interface, or a CSS selector string to such an element. When the element updates and dispatches an event, the _value_ property will be used as the new, bound signal value. When the signal updates independent of the element, the _value_ property will be set to the signal value and a new event will be dispatched on the element."},event:{description:'The event (default `"input"`) to listen for to track changes on the external element.',type:"string"}},required:["element"],type:"object"},BindInput:{additionalProperties:!1,properties:{autocomplete:{description:"A hint for form autofill. See the [HTML autocomplete attribute](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete) for additional information.",type:"string"},debounce:{description:"If defined, delays event handling until the specified milliseconds have elapsed since the last event was fired.",type:"number"},element:{$ref:"#/definitions/Element",description:"An optional CSS selector string indicating the parent element to which the input element should be added. By default, all input elements are added within the parent container of the Vega view."},input:{description:'The type of input element to use. The valid values are `"checkbox"`, `"radio"`, `"range"`, `"select"`, and any other legal [HTML form input type](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input).',type:"string"},name:{description:"By default, the signal name is used to label input elements. This `name` property can be used instead to specify a custom label for the bound signal.",type:"string"},placeholder:{description:"Text that appears in the form control when it has no value set.",type:"string"}},type:"object"},BindRadioSelect:{additionalProperties:!1,properties:{debounce:{description:"If defined, delays event handling until the specified milliseconds have elapsed since the last event was fired.",type:"number"},element:{$ref:"#/definitions/Element",description:"An optional CSS selector string indicating the parent element to which the input element should be added. By default, all input elements are added within the parent container of the Vega view."},input:{enum:["radio","select"],type:"string"},labels:{description:"An array of label strings to represent the `options` values. If unspecified, the `options` value will be coerced to a string and used as the label.",items:{type:"string"},type:"array"},name:{description:"By default, the signal name is used to label input elements. This `name` property can be used instead to specify a custom label for the bound signal.",type:"string"},options:{description:"An array of options to select from.",items:{},type:"array"}},required:["input","options"],type:"object"},BindRange:{additionalProperties:!1,properties:{debounce:{description:"If defined, delays event handling until the specified milliseconds have elapsed since the last event was fired.",type:"number"},element:{$ref:"#/definitions/Element",description:"An optional CSS selector string indicating the parent element to which the input element should be added. By default, all input elements are added within the parent container of the Vega view."},input:{const:"range",type:"string"},max:{description:"Sets the maximum slider value. Defaults to the larger of the signal value and `100`.",type:"number"},min:{description:"Sets the minimum slider value. Defaults to the smaller of the signal value and `0`.",type:"number"},name:{description:"By default, the signal name is used to label input elements. This `name` property can be used instead to specify a custom label for the bound signal.",type:"string"},step:{description:"Sets the minimum slider increment. If undefined, the step size will be automatically determined based on the `min` and `max` values.",type:"number"}},required:["input"],type:"object"},Binding:{anyOf:[{$ref:"#/definitions/BindCheckbox"},{$ref:"#/definitions/BindRadioSelect"},{$ref:"#/definitions/BindRange"},{$ref:"#/definitions/BindInput"},{$ref:"#/definitions/BindDirect"}]},BinnedTimeUnit:{enum:["binnedyear","binnedyearquarter","binnedyearquartermonth","binnedyearmonth","binnedyearmonthdate","binnedyearmonthdatehours","binnedyearmonthdatehoursminutes","binnedyearmonthdatehoursminutesseconds","binnedyearweek","binnedyearweekday","binnedyearweekdayhours","binnedyearweekdayhoursminutes","binnedyearweekdayhoursminutesseconds","binnedyeardayofyear","binnedutcyear","binnedutcyearquarter","binnedutcyearquartermonth","binnedutcyearmonth","binnedutcyearmonthdate","binnedutcyearmonthdatehours","binnedutcyearmonthdatehoursminutes","binnedutcyearmonthdatehoursminutesseconds","binnedutcyearweek","binnedutcyearweekday","binnedutcyearweekdayhours","binnedutcyearweekdayhoursminutes","binnedutcyearweekdayhoursminutesseconds","binnedutcyeardayofyear"],type:"string"},Blend:{enum:[null,"multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],type:["null","string"]},BoxPlot:{const:"boxplot",type:"string"},BoxPlotConfig:{additionalProperties:!1,properties:{box:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},extent:{anyOf:[{const:"min-max",type:"string"},{type:"number"}],description:'The extent of the whiskers. Available options include:\n- `"min-max"`: min and max are the lower and upper whiskers respectively.\n- A number representing multiple of the interquartile range. This number will be multiplied by the IQR to determine whisker boundary, which spans from the smallest data to the largest data within the range _[Q1 - k * IQR, Q3 + k * IQR]_ where _Q1_ and _Q3_ are the first and third quartiles while _IQR_ is the interquartile range (_Q3-Q1_).\n\n__Default value:__ `1.5`.'},median:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},outliers:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},rule:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},size:{description:"Size of the box and median tick of a box plot",type:"number"},ticks:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]}},type:"object"},BoxPlotDef:{additionalProperties:!1,properties:{box:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},clip:{description:"Whether a composite mark be clipped to the enclosing groups width and height.",type:"boolean"},color:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{$ref:"#/definitions/ExprRef"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'},extent:{anyOf:[{const:"min-max",type:"string"},{type:"number"}],description:'The extent of the whiskers. Available options include:\n- `"min-max"`: min and max are the lower and upper whiskers respectively.\n- A number representing multiple of the interquartile range. This number will be multiplied by the IQR to determine whisker boundary, which spans from the smallest data to the largest data within the range _[Q1 - k * IQR, Q3 + k * IQR]_ where _Q1_ and _Q3_ are the first and third quartiles while _IQR_ is the interquartile range (_Q3-Q1_).\n\n__Default value:__ `1.5`.'},invalid:{anyOf:[{$ref:"#/definitions/MarkInvalidDataMode"},{type:"null"}],description:'Invalid data mode, which defines how the marks and corresponding scales should represent invalid values (`null` and `NaN` in continuous scales *without* defined output for invalid values).\n\n- `"filter"`  *Exclude* all invalid values from the visualization\'s *marks* and *scales*. For path marks (for line, area, trail), this option will create paths that connect valid points, as if the data rows with invalid values do not exist.\n\n- `"break-paths-filter-domains"`  Break path marks (for line, area, trail) at invalid values.  For non-path marks, this is equivalent to `"filter"`. All *scale* domains will *exclude* these filtered data points.\n\n- `"break-paths-show-domains"`  Break paths (for line, area, trail) at invalid values.  Hide invalid values for non-path marks. All *scale* domains will *include* these filtered data points (for both path and non-path marks).\n\n- `"show"` or `null`  Show all data points in the marks and scale domains. Each scale will use the output for invalid values defined in `config.scale.invalid` or, if unspecified, by default invalid values will produce the same visual values as zero (if the scale includes zero) or the minimum value (if the scale does not include zero).\n\n- `"break-paths-show-path-domains"` (default)  This is equivalent to `"break-paths-show-domains"` for path-based marks (line/area/trail) and `"filter"` for non-path marks.\n\n__Note__: If any channel\'s scale has an output for invalid values defined in `config.scale.invalid`, all values for the scales will be considered "valid" since they can produce a reasonable output for the scales. Thus, fields for such channels will not be filtered and will not cause path breaks.'},median:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},opacity:{description:"The opacity (value between [0,1]) of the mark.",maximum:1,minimum:0,type:"number"},orient:{$ref:"#/definitions/Orientation",description:'Orientation of the box plot. This is normally automatically determined based on types of fields on x and y channels. However, an explicit `orient` be specified when the orientation is ambiguous.\n\n__Default value:__ `"vertical"`.'},outliers:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},rule:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},size:{description:"Size of the box and median tick of a box plot",type:"number"},ticks:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},type:{$ref:"#/definitions/BoxPlot",description:'The mark type. This could a primitive mark type (one of `"bar"`, `"circle"`, `"square"`, `"tick"`, `"line"`, `"area"`, `"point"`, `"geoshape"`, `"rule"`, and `"text"`) or a composite mark type (`"boxplot"`, `"errorband"`, `"errorbar"`).'}},required:["type"],type:"object"},BrushConfig:{additionalProperties:!1,properties:{cursor:{$ref:"#/definitions/Cursor",description:"The mouse cursor used over the interval mark. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used."},fill:{$ref:"#/definitions/Color",description:'The fill color of the interval mark.\n\n__Default value:__ `"#333333"`'},fillOpacity:{description:"The fill opacity of the interval mark (a value between `0` and `1`).\n\n__Default value:__ `0.125`",type:"number"},stroke:{$ref:"#/definitions/Color",description:'The stroke color of the interval mark.\n\n__Default value:__ `"#ffffff"`'},strokeDash:{description:"An array of alternating stroke and space lengths, for creating dashed or dotted lines.",items:{type:"number"},type:"array"},strokeDashOffset:{description:"The offset (in pixels) with which to begin drawing the stroke dash array.",type:"number"},strokeOpacity:{description:"The stroke opacity of the interval mark (a value between `0` and `1`).",type:"number"},strokeWidth:{description:"The stroke width of the interval mark.",type:"number"}},type:"object"},CalculateTransform:{additionalProperties:!1,properties:{as:{$ref:"#/definitions/FieldName",description:"The field for storing the computed formula value."},calculate:{description:"A [expression](https://vega.github.io/vega-lite/docs/types.html#expression) string. Use the variable `datum` to refer to the current data object.",type:"string"}},required:["calculate","as"],type:"object"},Categorical:{enum:["accent","category10","category20","category20b","category20c","dark2","paired","pastel1","pastel2","set1","set2","set3","tableau10","tableau20","observable10"],type:"string"},Color:{anyOf:[{$ref:"#/definitions/ColorName"},{$ref:"#/definitions/HexColor"},{type:"string"}]},ColorDef:{$ref:"#/definitions/MarkPropDef<(Gradient|string|null)>"},ColorName:{enum:["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","rebeccapurple"],type:"string"},ColorScheme:{anyOf:[{$ref:"#/definitions/Categorical"},{$ref:"#/definitions/SequentialSingleHue"},{$ref:"#/definitions/SequentialMultiHue"},{$ref:"#/definitions/Diverging"},{$ref:"#/definitions/Cyclical"}]},Encoding:{additionalProperties:!1,properties:{angle:{$ref:"#/definitions/NumericMarkPropDef",description:"Rotation angle of point and text marks."},color:{$ref:"#/definitions/ColorDef",description:'Color of the marks  either fill or stroke color based on  the `filled` property of mark definition. By default, `color` represents fill color for `"area"`, `"bar"`, `"tick"`, `"text"`, `"trail"`, `"circle"`, and `"square"` / stroke color for `"line"` and `"point"`.\n\n__Default value:__ If undefined, the default color depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)\'s `color` property.\n\n_Note:_ 1) For fine-grained control over both fill and stroke colors of the marks, please use the `fill` and `stroke` channels. The `fill` or `stroke` encodings have higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified. 2) See the scale documentation for more information about customizing [color scheme](https://vega.github.io/vega-lite/docs/scale.html#scheme).'},description:{anyOf:[{$ref:"#/definitions/StringFieldDefWithCondition"},{$ref:"#/definitions/StringValueDefWithCondition"}],description:'A text description of this mark for ARIA accessibility (SVG output only). For SVG output the `"aria-label"` attribute will be set to this description.'},detail:{anyOf:[{$ref:"#/definitions/FieldDefWithoutScale"},{items:{$ref:"#/definitions/FieldDefWithoutScale"},type:"array"}],description:"Additional levels of detail for grouping data in aggregate views and in line, trail, and area marks without mapping data to a specific visual channel."},fill:{$ref:"#/definitions/ColorDef",description:"Fill color of the marks. __Default value:__ If undefined, the default color depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `color` property.\n\n_Note:_ The `fill` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},fillOpacity:{$ref:"#/definitions/NumericMarkPropDef",description:"Fill opacity of the marks.\n\n__Default value:__ If undefined, the default opacity depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `fillOpacity` property."},href:{anyOf:[{$ref:"#/definitions/StringFieldDefWithCondition"},{$ref:"#/definitions/StringValueDefWithCondition"}],description:"A URL to load upon mouse click."},key:{$ref:"#/definitions/FieldDefWithoutScale",description:"A data field to use as a unique key for data binding. When a visualizations data is updated, the key value will be used to match data elements to existing mark instances. Use a key channel to enable object constancy for transitions over dynamic data."},latitude:{$ref:"#/definitions/LatLongDef",description:"Latitude position of geographically projected marks."},latitude2:{$ref:"#/definitions/Position2Def",description:'Latitude-2 position for geographically projected ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.'},longitude:{$ref:"#/definitions/LatLongDef",description:"Longitude position of geographically projected marks."},longitude2:{$ref:"#/definitions/Position2Def",description:'Longitude-2 position for geographically projected ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.'},opacity:{$ref:"#/definitions/NumericMarkPropDef",description:"Opacity of the marks.\n\n__Default value:__ If undefined, the default opacity depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `opacity` property."},order:{anyOf:[{$ref:"#/definitions/OrderFieldDef"},{items:{$ref:"#/definitions/OrderFieldDef"},type:"array"},{$ref:"#/definitions/OrderValueDef"},{$ref:"#/definitions/OrderOnlyDef"}],description:'Order of the marks.\n- For stacked marks, this `order` channel encodes [stack order](https://vega.github.io/vega-lite/docs/stack.html#order).\n- For line and trail marks, this `order` channel encodes order of data points in the lines. This can be useful for creating [a connected scatterplot](https://vega.github.io/vega-lite/examples/connected_scatterplot.html). Setting `order` to `{"value": null}` makes the line marks use the original order in the data sources.\n- Otherwise, this `order` channel encodes layer order of the marks.\n\n__Note__: In aggregate plots, `order` field should be `aggregate`d to avoid creating additional aggregation grouping.'},radius:{$ref:"#/definitions/PolarDef",description:"The outer radius in pixels of arc marks."},radius2:{$ref:"#/definitions/Position2Def",description:"The inner radius in pixels of arc marks."},shape:{$ref:"#/definitions/ShapeDef",description:'Shape of the mark.\n\n1. For `point` marks the supported values include:   - plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.   - the line symbol `"stroke"`   - centered directional shapes `"arrow"`, `"wedge"`, or `"triangle"`   - a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) (For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.)\n\n2. For `geoshape` marks it should be a field definition of the geojson data\n\n__Default value:__ If undefined, the default shape depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#point-config)\'s `shape` property. (`"circle"` if unset.)'},size:{$ref:"#/definitions/NumericMarkPropDef",description:'Size of the mark.\n- For `"point"`, `"square"` and `"circle"`,  the symbol size, or pixel area of the mark.\n- For `"bar"` and `"tick"`  the bar and tick\'s size.\n- For `"text"`  the text\'s font size.\n- Size is unsupported for `"line"`, `"area"`, and `"rect"`. (Use `"trail"` instead of line with varying size)'},stroke:{$ref:"#/definitions/ColorDef",description:"Stroke color of the marks. __Default value:__ If undefined, the default color depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `color` property.\n\n_Note:_ The `stroke` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},strokeDash:{$ref:"#/definitions/NumericArrayMarkPropDef",description:"Stroke dash of the marks.\n\n__Default value:__ `[1,0]` (No dash)."},strokeOpacity:{$ref:"#/definitions/NumericMarkPropDef",description:"Stroke opacity of the marks.\n\n__Default value:__ If undefined, the default opacity depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `strokeOpacity` property."},strokeWidth:{$ref:"#/definitions/NumericMarkPropDef",description:"Stroke width of the marks.\n\n__Default value:__ If undefined, the default stroke width depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `strokeWidth` property."},text:{$ref:"#/definitions/TextDef",description:"Text of the `text` mark."},theta:{$ref:"#/definitions/PolarDef",description:`- For arc marks, the arc length in radians if theta2 is not specified, otherwise the start arc angle. (A value of 0 indicates up or north, increasing values proceed clockwise.)

- For text marks, polar coordinate angle in radians.`},theta2:{$ref:"#/definitions/Position2Def",description:"The end angle of arc marks in radians. A value of 0 indicates up or north, increasing values proceed clockwise."},time:{$ref:"#/definitions/TimeDef"},tooltip:{anyOf:[{$ref:"#/definitions/StringFieldDefWithCondition"},{$ref:"#/definitions/StringValueDefWithCondition"},{items:{$ref:"#/definitions/StringFieldDef"},type:"array"},{type:"null"}],description:"The tooltip text to show upon mouse hover. Specifying `tooltip` encoding overrides [the `tooltip` property in the mark definition](https://vega.github.io/vega-lite/docs/mark.html#mark-def).\n\nSee the [`tooltip`](https://vega.github.io/vega-lite/docs/tooltip.html) documentation for a detailed discussion about tooltip in Vega-Lite."},url:{anyOf:[{$ref:"#/definitions/StringFieldDefWithCondition"},{$ref:"#/definitions/StringValueDefWithCondition"}],description:"The URL of an image mark."},x:{$ref:"#/definitions/PositionDef",description:'X coordinates of the marks, or width of horizontal `"bar"` and `"area"` without specified `x2` or `width`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2:{$ref:"#/definitions/Position2Def",description:'X2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},xError:{anyOf:[{$ref:"#/definitions/SecondaryFieldDef"},{$ref:"#/definitions/ValueDef<number>"}],description:'Error value of x coordinates for error specified `"errorbar"` and `"errorband"`.'},xError2:{anyOf:[{$ref:"#/definitions/SecondaryFieldDef"},{$ref:"#/definitions/ValueDef<number>"}],description:'Secondary error value of x coordinates for error specified `"errorbar"` and `"errorband"`.'},xOffset:{$ref:"#/definitions/OffsetDef",description:"Offset of x-position of the marks"},y:{$ref:"#/definitions/PositionDef",description:'Y coordinates of the marks, or height of vertical `"bar"` and `"area"` without specified `y2` or `height`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2:{$ref:"#/definitions/Position2Def",description:'Y2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},yError:{anyOf:[{$ref:"#/definitions/SecondaryFieldDef"},{$ref:"#/definitions/ValueDef<number>"}],description:'Error value of y coordinates for error specified `"errorbar"` and `"errorband"`.'},yError2:{anyOf:[{$ref:"#/definitions/SecondaryFieldDef"},{$ref:"#/definitions/ValueDef<number>"}],description:'Secondary error value of y coordinates for error specified `"errorbar"` and `"errorband"`.'},yOffset:{$ref:"#/definitions/OffsetDef",description:"Offset of y-position of the marks"}},type:"object"},CompositeMark:{anyOf:[{$ref:"#/definitions/BoxPlot"},{$ref:"#/definitions/ErrorBar"},{$ref:"#/definitions/ErrorBand"}]},CompositeMarkDef:{anyOf:[{$ref:"#/definitions/BoxPlotDef"},{$ref:"#/definitions/ErrorBarDef"},{$ref:"#/definitions/ErrorBandDef"}]},CompositionConfig:{additionalProperties:!1,properties:{columns:{description:"The number of columns to include in the view composition layout.\n\n__Default value__: `undefined` -- An infinite number of columns (a single row) will be assumed. This is equivalent to `hconcat` (for `concat`) and to using the `column` channel (for `facet` and `repeat`).\n\n__Note__:\n\n1) This property is only for:\n- the general (wrappable) `concat` operator (not `hconcat`/`vconcat`)\n- the `facet` and `repeat` operator with one field/repetition definition (without row/column nesting)\n\n2) Setting the `columns` to `1` is equivalent to `vconcat` (for `concat`) and to using the `row` channel (for `facet` and `repeat`).",type:"number"},spacing:{description:"The default spacing in pixels between composed sub-views.\n\n__Default value__: `20`",type:"number"}},type:"object"},ConditionalMarkPropFieldOrDatumDef:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<MarkPropFieldOrDatumDef>"},{$ref:"#/definitions/ConditionalParameter<MarkPropFieldOrDatumDef>"}]},"ConditionalMarkPropFieldOrDatumDef<TypeForShape>":{anyOf:[{$ref:"#/definitions/ConditionalPredicate<MarkPropFieldOrDatumDef<TypeForShape>>"},{$ref:"#/definitions/ConditionalParameter<MarkPropFieldOrDatumDef<TypeForShape>>"}]},ConditionalStringFieldDef:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<StringFieldDef>"},{$ref:"#/definitions/ConditionalParameter<StringFieldDef>"}]},"ConditionalValueDef<(Gradient|string|null|ExprRef)>":{anyOf:[{$ref:"#/definitions/ConditionalPredicate<ValueDef<(Gradient|string|null|ExprRef)>>"},{$ref:"#/definitions/ConditionalParameter<ValueDef<(Gradient|string|null|ExprRef)>>"}]},"ConditionalValueDef<(Text|ExprRef)>":{anyOf:[{$ref:"#/definitions/ConditionalPredicate<ValueDef<(Text|ExprRef)>>"},{$ref:"#/definitions/ConditionalParameter<ValueDef<(Text|ExprRef)>>"}]},"ConditionalValueDef<(number[]|ExprRef)>":{anyOf:[{$ref:"#/definitions/ConditionalPredicate<ValueDef<(number[]|ExprRef)>>"},{$ref:"#/definitions/ConditionalParameter<ValueDef<(number[]|ExprRef)>>"}]},"ConditionalValueDef<(number|ExprRef)>":{anyOf:[{$ref:"#/definitions/ConditionalPredicate<ValueDef<(number|ExprRef)>>"},{$ref:"#/definitions/ConditionalParameter<ValueDef<(number|ExprRef)>>"}]},"ConditionalValueDef<(string|ExprRef)>":{anyOf:[{$ref:"#/definitions/ConditionalPredicate<ValueDef<(string|ExprRef)>>"},{$ref:"#/definitions/ConditionalParameter<ValueDef<(string|ExprRef)>>"}]},"ConditionalValueDef<(string|null|ExprRef)>":{anyOf:[{$ref:"#/definitions/ConditionalPredicate<ValueDef<(string|null|ExprRef)>>"},{$ref:"#/definitions/ConditionalParameter<ValueDef<(string|null|ExprRef)>>"}]},"ConditionalValueDef<number>":{anyOf:[{$ref:"#/definitions/ConditionalPredicate<ValueDef<number>>"},{$ref:"#/definitions/ConditionalParameter<ValueDef<number>>"}]},ConditionalAxisColor:{$ref:"#/definitions/ConditionalAxisProperty<(Color|null)>"},ConditionalAxisLabelAlign:{$ref:"#/definitions/ConditionalAxisProperty<(Align|null)>"},ConditionalAxisLabelBaseline:{$ref:"#/definitions/ConditionalAxisProperty<(TextBaseline|null)>"},ConditionalAxisLabelFontStyle:{$ref:"#/definitions/ConditionalAxisProperty<(FontStyle|null)>"},ConditionalAxisLabelFontWeight:{$ref:"#/definitions/ConditionalAxisProperty<(FontWeight|null)>"},ConditionalAxisNumber:{$ref:"#/definitions/ConditionalAxisProperty<(number|null)>"},ConditionalAxisNumberArray:{$ref:"#/definitions/ConditionalAxisProperty<(number[]|null)>"},"ConditionalAxisProperty<(Align|null)>":{anyOf:[{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(Align|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(Align|null)>|ExprRef)>"},type:"array"}]},value:{anyOf:[{$ref:"#/definitions/Align"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["condition","value"],type:"object"},{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(Align|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(Align|null)>|ExprRef)>"},type:"array"}]},expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"}},required:["condition","expr"],type:"object"}]},"ConditionalAxisProperty<(Color|null)>":{anyOf:[{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(Color|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(Color|null)>|ExprRef)>"},type:"array"}]},value:{anyOf:[{$ref:"#/definitions/Color"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["condition","value"],type:"object"},{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(Color|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(Color|null)>|ExprRef)>"},type:"array"}]},expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"}},required:["condition","expr"],type:"object"}]},"ConditionalAxisProperty<(FontStyle|null)>":{anyOf:[{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(FontStyle|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(FontStyle|null)>|ExprRef)>"},type:"array"}]},value:{anyOf:[{$ref:"#/definitions/FontStyle"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["condition","value"],type:"object"},{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(FontStyle|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(FontStyle|null)>|ExprRef)>"},type:"array"}]},expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"}},required:["condition","expr"],type:"object"}]},"ConditionalAxisProperty<(FontWeight|null)>":{anyOf:[{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(FontWeight|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(FontWeight|null)>|ExprRef)>"},type:"array"}]},value:{anyOf:[{$ref:"#/definitions/FontWeight"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["condition","value"],type:"object"},{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(FontWeight|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(FontWeight|null)>|ExprRef)>"},type:"array"}]},expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"}},required:["condition","expr"],type:"object"}]},"ConditionalAxisProperty<(TextBaseline|null)>":{anyOf:[{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(TextBaseline|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(TextBaseline|null)>|ExprRef)>"},type:"array"}]},value:{anyOf:[{$ref:"#/definitions/TextBaseline"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["condition","value"],type:"object"},{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(TextBaseline|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(TextBaseline|null)>|ExprRef)>"},type:"array"}]},expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"}},required:["condition","expr"],type:"object"}]},"ConditionalAxisProperty<(number[]|null)>":{anyOf:[{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(number[]|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(number[]|null)>|ExprRef)>"},type:"array"}]},value:{anyOf:[{items:{type:"number"},type:"array"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["condition","value"],type:"object"},{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(number[]|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(number[]|null)>|ExprRef)>"},type:"array"}]},expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"}},required:["condition","expr"],type:"object"}]},"ConditionalAxisProperty<(number|null)>":{anyOf:[{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(number|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(number|null)>|ExprRef)>"},type:"array"}]},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:["number","null"]}},required:["condition","value"],type:"object"},{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(number|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(number|null)>|ExprRef)>"},type:"array"}]},expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"}},required:["condition","expr"],type:"object"}]},"ConditionalAxisProperty<(string|null)>":{anyOf:[{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(string|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(string|null)>|ExprRef)>"},type:"array"}]},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:["string","null"]}},required:["condition","value"],type:"object"},{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(string|null)>|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalPredicate<(ValueDef<(string|null)>|ExprRef)>"},type:"array"}]},expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"}},required:["condition","expr"],type:"object"}]},ConditionalAxisString:{$ref:"#/definitions/ConditionalAxisProperty<(string|null)>"},"ConditionalParameter<MarkPropFieldOrDatumDef>":{anyOf:[{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},required:["param"],type:"object"},{additionalProperties:!1,properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},required:["param"],type:"object"}]},"ConditionalParameter<MarkPropFieldOrDatumDef<TypeForShape>>":{anyOf:[{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/TypeForShape",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},required:["param"],type:"object"},{additionalProperties:!1,properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},required:["param"],type:"object"}]},"ConditionalParameter<StringFieldDef>":{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},required:["param"],type:"object"},"ConditionalParameter<ValueDef<(Gradient|string|null|ExprRef)>>":{additionalProperties:!1,properties:{empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},value:{anyOf:[{$ref:"#/definitions/Gradient"},{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["param","value"],type:"object"},"ConditionalParameter<ValueDef<(Text|ExprRef)>>":{additionalProperties:!1,properties:{empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},value:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["param","value"],type:"object"},"ConditionalParameter<ValueDef<(number[]|ExprRef)>>":{additionalProperties:!1,properties:{empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},value:{anyOf:[{items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["param","value"],type:"object"},"ConditionalParameter<ValueDef<(number|ExprRef)>>":{additionalProperties:!1,properties:{empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},value:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["param","value"],type:"object"},"ConditionalParameter<ValueDef<(string|ExprRef)>>":{additionalProperties:!1,properties:{empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},value:{anyOf:[{type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["param","value"],type:"object"},"ConditionalParameter<ValueDef<(string|null|ExprRef)>>":{additionalProperties:!1,properties:{empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},value:{anyOf:[{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["param","value"],type:"object"},"ConditionalParameter<ValueDef<number>>":{additionalProperties:!1,properties:{empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:"number"}},required:["param","value"],type:"object"},"ConditionalPredicate<(ValueDef<(Align|null)>|ExprRef)>":{anyOf:[{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{$ref:"#/definitions/Align"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},{additionalProperties:!1,properties:{expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"}},required:["expr","test"],type:"object"}]},"ConditionalPredicate<(ValueDef<(Color|null)>|ExprRef)>":{anyOf:[{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{$ref:"#/definitions/Color"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},{additionalProperties:!1,properties:{expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"}},required:["expr","test"],type:"object"}]},"ConditionalPredicate<(ValueDef<(FontStyle|null)>|ExprRef)>":{anyOf:[{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{$ref:"#/definitions/FontStyle"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},{additionalProperties:!1,properties:{expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"}},required:["expr","test"],type:"object"}]},"ConditionalPredicate<(ValueDef<(FontWeight|null)>|ExprRef)>":{anyOf:[{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{$ref:"#/definitions/FontWeight"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},{additionalProperties:!1,properties:{expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"}},required:["expr","test"],type:"object"}]},"ConditionalPredicate<(ValueDef<(TextBaseline|null)>|ExprRef)>":{anyOf:[{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{$ref:"#/definitions/TextBaseline"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},{additionalProperties:!1,properties:{expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"}},required:["expr","test"],type:"object"}]},"ConditionalPredicate<(ValueDef<(number[]|null)>|ExprRef)>":{anyOf:[{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{items:{type:"number"},type:"array"},{type:"null"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},{additionalProperties:!1,properties:{expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"}},required:["expr","test"],type:"object"}]},"ConditionalPredicate<(ValueDef<(number|null)>|ExprRef)>":{anyOf:[{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:["number","null"]}},required:["test","value"],type:"object"},{additionalProperties:!1,properties:{expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"}},required:["expr","test"],type:"object"}]},"ConditionalPredicate<(ValueDef<(string|null)>|ExprRef)>":{anyOf:[{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:["string","null"]}},required:["test","value"],type:"object"},{additionalProperties:!1,properties:{expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"}},required:["expr","test"],type:"object"}]},"ConditionalPredicate<MarkPropFieldOrDatumDef>":{anyOf:[{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},required:["test"],type:"object"},{additionalProperties:!1,properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},required:["test"],type:"object"}]},"ConditionalPredicate<MarkPropFieldOrDatumDef<TypeForShape>>":{anyOf:[{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/TypeForShape",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},required:["test"],type:"object"},{additionalProperties:!1,properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},required:["test"],type:"object"}]},"ConditionalPredicate<StringFieldDef>":{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},required:["test"],type:"object"},"ConditionalPredicate<ValueDef<(Gradient|string|null|ExprRef)>>":{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{$ref:"#/definitions/Gradient"},{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},"ConditionalPredicate<ValueDef<(Text|ExprRef)>>":{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},"ConditionalPredicate<ValueDef<(number[]|ExprRef)>>":{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},"ConditionalPredicate<ValueDef<(number|ExprRef)>>":{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},"ConditionalPredicate<ValueDef<(string|ExprRef)>>":{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},"ConditionalPredicate<ValueDef<(string|null|ExprRef)>>":{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{anyOf:[{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["test","value"],type:"object"},"ConditionalPredicate<ValueDef<number>>":{additionalProperties:!1,properties:{test:{$ref:"#/definitions/PredicateComposition",description:"Predicate for triggering the condition"},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:"number"}},required:["test","value"],type:"object"},Config:{additionalProperties:!1,properties:{arc:{$ref:"#/definitions/RectConfig",description:"Arc-specific Config"},area:{$ref:"#/definitions/AreaConfig",description:"Area-Specific Config"},aria:{description:'A boolean flag indicating if ARIA default attributes should be included for marks and guides (SVG output only). If false, the `"aria-hidden"` attribute will be set for all guides, removing them from the ARIA accessibility tree and Vega-Lite will not generate default descriptions for marks.\n\n__Default value:__ `true`.',type:"boolean"},autosize:{anyOf:[{$ref:"#/definitions/AutosizeType"},{$ref:"#/definitions/AutoSizeParams"}],description:'How the visualization size should be determined. If a string, should be one of `"pad"`, `"fit"` or `"none"`. Object values can additionally specify parameters for content sizing and automatic resizing.\n\n__Default value__: `pad`'},axis:{$ref:"#/definitions/AxisConfig",description:"Axis configuration, which determines default properties for all `x` and `y` [axes](https://vega.github.io/vega-lite/docs/axis.html). For a full list of axis configuration options, please see the [corresponding section of the axis documentation](https://vega.github.io/vega-lite/docs/axis.html#config)."},axisBand:{$ref:"#/definitions/AxisConfig",description:'Config for axes with "band" scales.'},axisBottom:{$ref:"#/definitions/AxisConfig",description:"Config for x-axis along the bottom edge of the chart."},axisDiscrete:{$ref:"#/definitions/AxisConfig",description:'Config for axes with "point" or "band" scales.'},axisLeft:{$ref:"#/definitions/AxisConfig",description:"Config for y-axis along the left edge of the chart."},axisPoint:{$ref:"#/definitions/AxisConfig",description:'Config for axes with "point" scales.'},axisQuantitative:{$ref:"#/definitions/AxisConfig",description:"Config for quantitative axes."},axisRight:{$ref:"#/definitions/AxisConfig",description:"Config for y-axis along the right edge of the chart."},axisTemporal:{$ref:"#/definitions/AxisConfig",description:"Config for temporal axes."},axisTop:{$ref:"#/definitions/AxisConfig",description:"Config for x-axis along the top edge of the chart."},axisX:{$ref:"#/definitions/AxisConfig",description:"X-axis specific config."},axisXBand:{$ref:"#/definitions/AxisConfig",description:'Config for x-axes with "band" scales.'},axisXDiscrete:{$ref:"#/definitions/AxisConfig",description:'Config for x-axes with "point" or "band" scales.'},axisXPoint:{$ref:"#/definitions/AxisConfig",description:'Config for x-axes with "point" scales.'},axisXQuantitative:{$ref:"#/definitions/AxisConfig",description:"Config for x-quantitative axes."},axisXTemporal:{$ref:"#/definitions/AxisConfig",description:"Config for x-temporal axes."},axisY:{$ref:"#/definitions/AxisConfig",description:"Y-axis specific config."},axisYBand:{$ref:"#/definitions/AxisConfig",description:'Config for y-axes with "band" scales.'},axisYDiscrete:{$ref:"#/definitions/AxisConfig",description:'Config for y-axes with "point" or "band" scales.'},axisYPoint:{$ref:"#/definitions/AxisConfig",description:'Config for y-axes with "point" scales.'},axisYQuantitative:{$ref:"#/definitions/AxisConfig",description:"Config for y-quantitative axes."},axisYTemporal:{$ref:"#/definitions/AxisConfig",description:"Config for y-temporal axes."},background:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:'CSS color property to use as the background of the entire view.\n\n__Default value:__ `"white"`'},bar:{$ref:"#/definitions/BarConfig",description:"Bar-Specific Config"},boxplot:{$ref:"#/definitions/BoxPlotConfig",description:"Box Config"},circle:{$ref:"#/definitions/MarkConfig",description:"Circle-Specific Config"},concat:{$ref:"#/definitions/CompositionConfig",description:"Default configuration for all concatenation and repeat view composition operators (`concat`, `hconcat`, `vconcat`, and `repeat`)"},countTitle:{description:"Default axis and legend title for count fields.\n\n__Default value:__ `'Count of Records`.",type:"string"},customFormatTypes:{description:"Allow the `formatType` property for text marks and guides to accept a custom formatter function [registered as a Vega expression](https://vega.github.io/vega-lite/usage/compile.html#format-type).",type:"boolean"},errorband:{$ref:"#/definitions/ErrorBandConfig",description:"ErrorBand Config"},errorbar:{$ref:"#/definitions/ErrorBarConfig",description:"ErrorBar Config"},facet:{$ref:"#/definitions/CompositionConfig",description:"Default configuration for the `facet` view composition operator"},fieldTitle:{description:'Defines how Vega-Lite generates title for fields. There are three possible styles:\n- `"verbal"` (Default) - displays function in a verbal style (e.g., "Sum of field", "Year-month of date", "field (binned)").\n- `"function"` - displays function using parentheses and capitalized texts (e.g., "SUM(field)", "YEARMONTH(date)", "BIN(field)").\n- `"plain"` - displays only the field name without functions (e.g., "field", "date", "field").',enum:["verbal","functional","plain"],type:"string"},font:{description:"Default font for all text marks, titles, and labels.",type:"string"},geoshape:{$ref:"#/definitions/MarkConfig",description:"Geoshape-Specific Config"},header:{$ref:"#/definitions/HeaderConfig",description:`Header configuration, which determines default properties for all [headers](https://vega.github.io/vega-lite/docs/header.html).

For a full list of header configuration options, please see the [corresponding section of in the header documentation](https://vega.github.io/vega-lite/docs/header.html#config).`},headerColumn:{$ref:"#/definitions/HeaderConfig",description:`Header configuration, which determines default properties for column [headers](https://vega.github.io/vega-lite/docs/header.html).

For a full list of header configuration options, please see the [corresponding section of in the header documentation](https://vega.github.io/vega-lite/docs/header.html#config).`},headerFacet:{$ref:"#/definitions/HeaderConfig",description:`Header configuration, which determines default properties for non-row/column facet [headers](https://vega.github.io/vega-lite/docs/header.html).

For a full list of header configuration options, please see the [corresponding section of in the header documentation](https://vega.github.io/vega-lite/docs/header.html#config).`},headerRow:{$ref:"#/definitions/HeaderConfig",description:`Header configuration, which determines default properties for row [headers](https://vega.github.io/vega-lite/docs/header.html).

For a full list of header configuration options, please see the [corresponding section of in the header documentation](https://vega.github.io/vega-lite/docs/header.html#config).`},image:{$ref:"#/definitions/RectConfig",description:"Image-specific Config"},legend:{$ref:"#/definitions/LegendConfig",description:"Legend configuration, which determines default properties for all [legends](https://vega.github.io/vega-lite/docs/legend.html). For a full list of legend configuration options, please see the [corresponding section of in the legend documentation](https://vega.github.io/vega-lite/docs/legend.html#config)."},line:{$ref:"#/definitions/LineConfig",description:"Line-Specific Config"},lineBreak:{anyOf:[{type:"string"},{$ref:"#/definitions/ExprRef"}],description:"A delimiter, such as a newline character, upon which to break text strings into multiple lines. This property provides a global default for text marks, which is overridden by mark or style config settings, and by the lineBreak mark encoding channel. If signal-valued, either string or regular expression (regexp) values are valid."},locale:{$ref:"#/definitions/Locale",description:"Locale definitions for string parsing and formatting of number and date values. The locale object should contain `number` and/or `time` properties with [locale definitions](https://vega.github.io/vega/docs/api/locale/). Locale definitions provided in the config block may be overridden by the View constructor locale option."},mark:{$ref:"#/definitions/MarkConfig",description:"Mark Config"},normalizedNumberFormat:{description:'If normalizedNumberFormatType is not specified, D3 number format for axis labels, text marks, and tooltips of normalized stacked fields (fields with `stack: "normalize"`). For example `"s"` for SI units. Use [D3\'s number format pattern](https://github.com/d3/d3-format#locale_format).\n\nIf `config.normalizedNumberFormatType` is specified and `config.customFormatTypes` is `true`, this value will be passed as `format` alongside `datum.value` to the `config.numberFormatType` function. __Default value:__ `%`',type:"string"},normalizedNumberFormatType:{description:"[Custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type) for `config.normalizedNumberFormat`.\n\n__Default value:__ `undefined` -- This is equilvalent to call D3-format, which is exposed as [`format` in Vega-Expression](https://vega.github.io/vega/docs/expressions/#format). __Note:__ You must also set `customFormatTypes` to `true` to use this feature.",type:"string"},numberFormat:{description:'If numberFormatType is not specified, D3 number format for guide labels, text marks, and tooltips of non-normalized fields (fields *without* `stack: "normalize"`). For example `"s"` for SI units. Use [D3\'s number format pattern](https://github.com/d3/d3-format#locale_format).\n\nIf `config.numberFormatType` is specified and `config.customFormatTypes` is `true`, this value will be passed as `format` alongside `datum.value` to the `config.numberFormatType` function.',type:"string"},numberFormatType:{description:"[Custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type) for `config.numberFormat`.\n\n__Default value:__ `undefined` -- This is equilvalent to call D3-format, which is exposed as [`format` in Vega-Expression](https://vega.github.io/vega/docs/expressions/#format). __Note:__ You must also set `customFormatTypes` to `true` to use this feature.",type:"string"},padding:{anyOf:[{$ref:"#/definitions/Padding"},{$ref:"#/definitions/ExprRef"}],description:'The default visualization padding, in pixels, from the edge of the visualization canvas to the data rectangle. If a number, specifies padding for all sides. If an object, the value should have the format `{"left": 5, "top": 5, "right": 5, "bottom": 5}` to specify padding for each side of the visualization.\n\n__Default value__: `5`'},params:{description:"Dynamic variables or selections that parameterize a visualization.",items:{$ref:"#/definitions/TopLevelParameter"},type:"array"},point:{$ref:"#/definitions/MarkConfig",description:"Point-Specific Config"},projection:{$ref:"#/definitions/ProjectionConfig",description:"Projection configuration, which determines default properties for all [projections](https://vega.github.io/vega-lite/docs/projection.html). For a full list of projection configuration options, please see the [corresponding section of the projection documentation](https://vega.github.io/vega-lite/docs/projection.html#config)."},range:{$ref:"#/definitions/RangeConfig",description:"An object hash that defines default range arrays or schemes for using with scales. For a full list of scale range configuration options, please see the [corresponding section of the scale documentation](https://vega.github.io/vega-lite/docs/scale.html#config)."},rect:{$ref:"#/definitions/RectConfig",description:"Rect-Specific Config"},rule:{$ref:"#/definitions/MarkConfig",description:"Rule-Specific Config"},scale:{$ref:"#/definitions/ScaleConfig",description:"Scale configuration determines default properties for all [scales](https://vega.github.io/vega-lite/docs/scale.html). For a full list of scale configuration options, please see the [corresponding section of the scale documentation](https://vega.github.io/vega-lite/docs/scale.html#config)."},selection:{$ref:"#/definitions/SelectionConfig",description:"An object hash for defining default properties for each type of selections."},square:{$ref:"#/definitions/MarkConfig",description:"Square-Specific Config"},style:{$ref:"#/definitions/StyleConfigIndex",description:"An object hash that defines key-value mappings to determine default properties for marks with a given [style](https://vega.github.io/vega-lite/docs/mark.html#mark-def). The keys represent styles names; the values have to be valid [mark configuration objects](https://vega.github.io/vega-lite/docs/mark.html#config)."},text:{$ref:"#/definitions/MarkConfig",description:"Text-Specific Config"},tick:{$ref:"#/definitions/TickConfig",description:"Tick-Specific Config"},timeFormat:{description:'Default time format for raw time values (without time units) in text marks, legend labels and header labels.\n\n__Default value:__ `"%b %d, %Y"` __Note:__ Axes automatically determine the format for each label automatically so this config does not affect axes.',type:"string"},timeFormatType:{description:"[Custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type) for `config.timeFormat`.\n\n__Default value:__ `undefined` -- This is equilvalent to call D3-time-format, which is exposed as [`timeFormat` in Vega-Expression](https://vega.github.io/vega/docs/expressions/#timeFormat). __Note:__ You must also set `customFormatTypes` to `true` and there must *not* be a `timeUnit` defined to use this feature.",type:"string"},title:{$ref:"#/definitions/TitleConfig",description:"Title configuration, which determines default properties for all [titles](https://vega.github.io/vega-lite/docs/title.html). For a full list of title configuration options, please see the [corresponding section of the title documentation](https://vega.github.io/vega-lite/docs/title.html#config)."},tooltipFormat:{$ref:"#/definitions/FormatConfig",description:"Define [custom format configuration](https://vega.github.io/vega-lite/docs/config.html#format) for tooltips. If unspecified, default format config will be applied."},trail:{$ref:"#/definitions/LineConfig",description:"Trail-Specific Config"},view:{$ref:"#/definitions/ViewConfig",description:"Default properties for [single view plots](https://vega.github.io/vega-lite/docs/spec.html#single)."}},type:"object"},CsvDataFormat:{additionalProperties:!1,properties:{parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using JavaScript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},type:{description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',enum:["csv","tsv"],type:"string"}},type:"object"},Cursor:{enum:["auto","default","none","context-menu","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","e-resize","n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","zoom-in","zoom-out","grab","grabbing"],type:"string"},Cyclical:{enum:["rainbow","sinebow"],type:"string"},Data:{anyOf:[{$ref:"#/definitions/DataSource"},{$ref:"#/definitions/Generator"}]},DataFormat:{anyOf:[{$ref:"#/definitions/CsvDataFormat"},{$ref:"#/definitions/DsvDataFormat"},{$ref:"#/definitions/JsonDataFormat"},{$ref:"#/definitions/TopoDataFormat"}]},DataSource:{anyOf:[{$ref:"#/definitions/UrlData"},{$ref:"#/definitions/InlineData"},{$ref:"#/definitions/NamedData"}]},Datasets:{$ref:"#/definitions/Dict<InlineDataset>"},DateTime:{additionalProperties:!1,description:"Object for defining datetime in Vega-Lite Filter. If both month and quarter are provided, month has higher precedence. `day` cannot be combined with other date. We accept string for month and day names.",properties:{date:{description:"Integer value representing the date (day of the month) from 1-31.",maximum:31,minimum:1,type:"number"},day:{anyOf:[{$ref:"#/definitions/Day"},{type:"string"}],description:'Value representing the day of a week. This can be one of: (1) integer value -- `1` represents Monday; (2) case-insensitive day name (e.g., `"Monday"`); (3) case-insensitive, 3-character short day name (e.g., `"Mon"`).\n\n**Warning:** A DateTime definition object with `day`** should not be combined with `year`, `quarter`, `month`, or `date`.'},hours:{description:"Integer value representing the hour of a day from 0-23.",maximum:24,minimum:0,type:"number"},milliseconds:{description:"Integer value representing the millisecond segment of time.",maximum:1e3,minimum:0,type:"number"},minutes:{description:"Integer value representing the minute segment of time from 0-59.",maximum:60,minimum:0,type:"number"},month:{anyOf:[{$ref:"#/definitions/Month"},{type:"string"}],description:'One of: (1) integer value representing the month from `1`-`12`. `1` represents January; (2) case-insensitive month name (e.g., `"January"`); (3) case-insensitive, 3-character short month name (e.g., `"Jan"`).'},quarter:{description:"Integer value representing the quarter of the year (from 1-4).",maximum:4,minimum:1,type:"number"},seconds:{description:"Integer value representing the second segment (0-59) of a time value",maximum:60,minimum:0,type:"number"},utc:{description:"A boolean flag indicating if date time is in utc time. If false, the date time is in local time",type:"boolean"},year:{description:"Integer value representing the year.",type:"number"}},type:"object"},DatumDef:{additionalProperties:!1,properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},Day:{maximum:7,minimum:1,type:"number"},DensityTransform:{additionalProperties:!1,properties:{as:{description:'The output fields for the sample value and corresponding density estimate.\n\n__Default value:__ `["value", "density"]`',items:{$ref:"#/definitions/FieldName"},maxItems:2,minItems:2,type:"array"},bandwidth:{description:"The bandwidth (standard deviation) of the Gaussian kernel. If unspecified or set to zero, the bandwidth value is automatically estimated from the input data using Scotts rule.",type:"number"},counts:{description:"A boolean flag indicating if the output values should be probability estimates (false) or smoothed counts (true).\n\n__Default value:__ `false`",type:"boolean"},cumulative:{description:"A boolean flag indicating whether to produce density estimates (false) or cumulative density estimates (true).\n\n__Default value:__ `false`",type:"boolean"},density:{$ref:"#/definitions/FieldName",description:"The data field for which to perform density estimation."},extent:{description:"A [min, max] domain from which to sample the distribution. If unspecified, the extent will be determined by the observed minimum and maximum values of the density value field.",items:{type:"number"},maxItems:2,minItems:2,type:"array"},groupby:{description:"The data fields to group by. If not specified, a single group containing all data objects will be used.",items:{$ref:"#/definitions/FieldName"},type:"array"},maxsteps:{description:"The maximum number of samples to take along the extent domain for plotting the density.\n\n__Default value:__ `200`",type:"number"},minsteps:{description:"The minimum number of samples to take along the extent domain for plotting the density.\n\n__Default value:__ `25`",type:"number"},resolve:{description:'Indicates how parameters for multiple densities should be resolved. If `"independent"`, each density may have its own domain extent and dynamic number of curve sample steps. If `"shared"`, the KDE transform will ensure that all densities are defined over a shared domain and curve steps, enabling stacking.\n\n__Default value:__ `"shared"`',enum:["independent","shared"],type:"string"},steps:{description:"The exact number of samples to take along the extent domain for plotting the density. If specified, overrides both minsteps and maxsteps to set an exact number of uniform samples. Potentially useful in conjunction with a fixed extent to ensure consistent sample points for stacked densities.",type:"number"}},required:["density"],type:"object"},DerivedStream:{additionalProperties:!1,properties:{between:{items:{$ref:"#/definitions/Stream"},type:"array"},consume:{type:"boolean"},debounce:{type:"number"},filter:{anyOf:[{$ref:"#/definitions/Expr"},{items:{$ref:"#/definitions/Expr"},type:"array"}]},markname:{type:"string"},marktype:{$ref:"#/definitions/MarkType"},stream:{$ref:"#/definitions/Stream"},throttle:{type:"number"}},required:["stream"],type:"object"},"Dict<InlineDataset>":{additionalProperties:{$ref:"#/definitions/InlineDataset"},type:"object"},"Dict<SelectionInit>":{additionalProperties:{$ref:"#/definitions/SelectionInit"},type:"object"},"Dict<SelectionInitInterval>":{additionalProperties:{$ref:"#/definitions/SelectionInitInterval"},type:"object"},Dict:{additionalProperties:{},type:"object"},Diverging:{enum:["blueorange","blueorange-3","blueorange-4","blueorange-5","blueorange-6","blueorange-7","blueorange-8","blueorange-9","blueorange-10","blueorange-11","brownbluegreen","brownbluegreen-3","brownbluegreen-4","brownbluegreen-5","brownbluegreen-6","brownbluegreen-7","brownbluegreen-8","brownbluegreen-9","brownbluegreen-10","brownbluegreen-11","purplegreen","purplegreen-3","purplegreen-4","purplegreen-5","purplegreen-6","purplegreen-7","purplegreen-8","purplegreen-9","purplegreen-10","purplegreen-11","pinkyellowgreen","pinkyellowgreen-3","pinkyellowgreen-4","pinkyellowgreen-5","pinkyellowgreen-6","pinkyellowgreen-7","pinkyellowgreen-8","pinkyellowgreen-9","pinkyellowgreen-10","pinkyellowgreen-11","purpleorange","purpleorange-3","purpleorange-4","purpleorange-5","purpleorange-6","purpleorange-7","purpleorange-8","purpleorange-9","purpleorange-10","purpleorange-11","redblue","redblue-3","redblue-4","redblue-5","redblue-6","redblue-7","redblue-8","redblue-9","redblue-10","redblue-11","redgrey","redgrey-3","redgrey-4","redgrey-5","redgrey-6","redgrey-7","redgrey-8","redgrey-9","redgrey-10","redgrey-11","redyellowblue","redyellowblue-3","redyellowblue-4","redyellowblue-5","redyellowblue-6","redyellowblue-7","redyellowblue-8","redyellowblue-9","redyellowblue-10","redyellowblue-11","redyellowgreen","redyellowgreen-3","redyellowgreen-4","redyellowgreen-5","redyellowgreen-6","redyellowgreen-7","redyellowgreen-8","redyellowgreen-9","redyellowgreen-10","redyellowgreen-11","spectral","spectral-3","spectral-4","spectral-5","spectral-6","spectral-7","spectral-8","spectral-9","spectral-10","spectral-11"],type:"string"},DomainUnionWith:{additionalProperties:!1,properties:{unionWith:{description:"Customized domain values to be union with the field's values or explicitly defined domain. Should be an array of valid scale domain values.",items:{anyOf:[{type:"number"},{type:"string"},{type:"boolean"},{$ref:"#/definitions/DateTime"}]},type:"array"}},required:["unionWith"],type:"object"},DsvDataFormat:{additionalProperties:!1,properties:{delimiter:{description:"The delimiter between records. The delimiter must be a single character (i.e., a single 16-bit code unit); so, ASCII delimiters are fine, but emoji delimiters are not.",maxLength:1,minLength:1,type:"string"},parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using JavaScript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},type:{const:"dsv",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',type:"string"}},required:["delimiter"],type:"object"},Element:{type:"string"},EncodingSortField:{additionalProperties:!1,description:"A sort definition for sorting a discrete scale in an encoding field definition.",properties:{field:{$ref:"#/definitions/Field",description:`The data [field](https://vega.github.io/vega-lite/docs/field.html) to sort by.

__Default value:__ If unspecified, defaults to the field specified in the outer data reference.`},op:{$ref:"#/definitions/NonArgAggregateOp",description:'An [aggregate operation](https://vega.github.io/vega-lite/docs/aggregate.html#ops) to perform on the field prior to sorting (e.g., `"count"`, `"mean"` and `"median"`). An aggregation is required when there are multiple values of the sort field for each encoded data field. The input data objects will be aggregated, grouped by the encoded data field.\n\nFor a full list of operations, please see the documentation for [aggregate](https://vega.github.io/vega-lite/docs/aggregate.html#ops).\n\n__Default value:__ `"sum"` for stacked plots. Otherwise, `"min"`.'},order:{anyOf:[{$ref:"#/definitions/SortOrder"},{type:"null"}],description:'The sort order. One of `"ascending"` (default), `"descending"`, or `null` (no not sort).'}},type:"object"},ErrorBand:{const:"errorband",type:"string"},ErrorBandConfig:{additionalProperties:!1,properties:{band:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},borders:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},extent:{$ref:"#/definitions/ErrorBarExtent",description:'The extent of the band. Available options include:\n- `"ci"`: Extend the band to the 95% bootstrapped confidence interval of the mean.\n- `"stderr"`: The size of band are set to the value of standard error, extending from the mean.\n- `"stdev"`: The size of band are set to the value of standard deviation, extending from the mean.\n- `"iqr"`: Extend the band to the q1 and q3.\n\n__Default value:__ `"stderr"`.'},interpolate:{$ref:"#/definitions/Interpolate",description:'The line interpolation method for the error band. One of the following:\n- `"linear"`: piecewise linear segments, as in a polyline.\n- `"linear-closed"`: close the linear segments to form a polygon.\n- `"step"`: a piecewise constant function (a step function) consisting of alternating horizontal and vertical lines. The y-value changes at the midpoint of each pair of adjacent x-values.\n- `"step-before"`: a piecewise constant function (a step function) consisting of alternating horizontal and vertical lines. The y-value changes before the x-value.\n- `"step-after"`: a piecewise constant function (a step function) consisting of alternating horizontal and vertical lines. The y-value changes after the x-value.\n- `"basis"`: a B-spline, with control point duplication on the ends.\n- `"basis-open"`: an open B-spline; may not intersect the start or end.\n- `"basis-closed"`: a closed B-spline, as in a loop.\n- `"cardinal"`: a Cardinal spline, with control point duplication on the ends.\n- `"cardinal-open"`: an open Cardinal spline; may not intersect the start or end, but will intersect other control points.\n- `"cardinal-closed"`: a closed Cardinal spline, as in a loop.\n- `"bundle"`: equivalent to basis, except the tension parameter is used to straighten the spline.\n- `"monotone"`: cubic interpolation that preserves monotonicity in y.'},tension:{description:"The tension parameter for the interpolation type of the error band.",maximum:1,minimum:0,type:"number"}},type:"object"},ErrorBandDef:{additionalProperties:!1,properties:{band:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},borders:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},clip:{description:"Whether a composite mark be clipped to the enclosing groups width and height.",type:"boolean"},color:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{$ref:"#/definitions/ExprRef"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'},extent:{$ref:"#/definitions/ErrorBarExtent",description:'The extent of the band. Available options include:\n- `"ci"`: Extend the band to the 95% bootstrapped confidence interval of the mean.\n- `"stderr"`: The size of band are set to the value of standard error, extending from the mean.\n- `"stdev"`: The size of band are set to the value of standard deviation, extending from the mean.\n- `"iqr"`: Extend the band to the q1 and q3.\n\n__Default value:__ `"stderr"`.'},interpolate:{$ref:"#/definitions/Interpolate",description:'The line interpolation method for the error band. One of the following:\n- `"linear"`: piecewise linear segments, as in a polyline.\n- `"linear-closed"`: close the linear segments to form a polygon.\n- `"step"`: a piecewise constant function (a step function) consisting of alternating horizontal and vertical lines. The y-value changes at the midpoint of each pair of adjacent x-values.\n- `"step-before"`: a piecewise constant function (a step function) consisting of alternating horizontal and vertical lines. The y-value changes before the x-value.\n- `"step-after"`: a piecewise constant function (a step function) consisting of alternating horizontal and vertical lines. The y-value changes after the x-value.\n- `"basis"`: a B-spline, with control point duplication on the ends.\n- `"basis-open"`: an open B-spline; may not intersect the start or end.\n- `"basis-closed"`: a closed B-spline, as in a loop.\n- `"cardinal"`: a Cardinal spline, with control point duplication on the ends.\n- `"cardinal-open"`: an open Cardinal spline; may not intersect the start or end, but will intersect other control points.\n- `"cardinal-closed"`: a closed Cardinal spline, as in a loop.\n- `"bundle"`: equivalent to basis, except the tension parameter is used to straighten the spline.\n- `"monotone"`: cubic interpolation that preserves monotonicity in y.'},opacity:{description:"The opacity (value between [0,1]) of the mark.",maximum:1,minimum:0,type:"number"},orient:{$ref:"#/definitions/Orientation",description:"Orientation of the error band. This is normally automatically determined, but can be specified when the orientation is ambiguous and cannot be automatically determined."},tension:{description:"The tension parameter for the interpolation type of the error band.",maximum:1,minimum:0,type:"number"},type:{$ref:"#/definitions/ErrorBand",description:'The mark type. This could a primitive mark type (one of `"bar"`, `"circle"`, `"square"`, `"tick"`, `"line"`, `"area"`, `"point"`, `"geoshape"`, `"rule"`, and `"text"`) or a composite mark type (`"boxplot"`, `"errorband"`, `"errorbar"`).'}},required:["type"],type:"object"},ErrorBar:{const:"errorbar",type:"string"},ErrorBarConfig:{additionalProperties:!1,properties:{extent:{$ref:"#/definitions/ErrorBarExtent",description:'The extent of the rule. Available options include:\n- `"ci"`: Extend the rule to the 95% bootstrapped confidence interval of the mean.\n- `"stderr"`: The size of rule are set to the value of standard error, extending from the mean.\n- `"stdev"`: The size of rule are set to the value of standard deviation, extending from the mean.\n- `"iqr"`: Extend the rule to the q1 and q3.\n\n__Default value:__ `"stderr"`.'},rule:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},size:{description:"Size of the ticks of an error bar",type:"number"},thickness:{description:"Thickness of the ticks and the bar of an error bar",type:"number"},ticks:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]}},type:"object"},ErrorBarDef:{additionalProperties:!1,properties:{clip:{description:"Whether a composite mark be clipped to the enclosing groups width and height.",type:"boolean"},color:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{$ref:"#/definitions/ExprRef"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'},extent:{$ref:"#/definitions/ErrorBarExtent",description:'The extent of the rule. Available options include:\n- `"ci"`: Extend the rule to the 95% bootstrapped confidence interval of the mean.\n- `"stderr"`: The size of rule are set to the value of standard error, extending from the mean.\n- `"stdev"`: The size of rule are set to the value of standard deviation, extending from the mean.\n- `"iqr"`: Extend the rule to the q1 and q3.\n\n__Default value:__ `"stderr"`.'},opacity:{description:"The opacity (value between [0,1]) of the mark.",maximum:1,minimum:0,type:"number"},orient:{$ref:"#/definitions/Orientation",description:"Orientation of the error bar. This is normally automatically determined, but can be specified when the orientation is ambiguous and cannot be automatically determined."},rule:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},size:{description:"Size of the ticks of an error bar",type:"number"},thickness:{description:"Thickness of the ticks and the bar of an error bar",type:"number"},ticks:{anyOf:[{type:"boolean"},{$ref:"#/definitions/AnyMarkConfig"}]},type:{$ref:"#/definitions/ErrorBar",description:'The mark type. This could a primitive mark type (one of `"bar"`, `"circle"`, `"square"`, `"tick"`, `"line"`, `"area"`, `"point"`, `"geoshape"`, `"rule"`, and `"text"`) or a composite mark type (`"boxplot"`, `"errorband"`, `"errorbar"`).'}},required:["type"],type:"object"},ErrorBarExtent:{enum:["ci","iqr","stderr","stdev"],type:"string"},EventStream:{anyOf:[{additionalProperties:!1,properties:{between:{items:{$ref:"#/definitions/Stream"},type:"array"},consume:{type:"boolean"},debounce:{type:"number"},filter:{anyOf:[{$ref:"#/definitions/Expr"},{items:{$ref:"#/definitions/Expr"},type:"array"}]},markname:{type:"string"},marktype:{$ref:"#/definitions/MarkType"},source:{enum:["view","scope"],type:"string"},throttle:{type:"number"},type:{$ref:"#/definitions/EventType"}},required:["type"],type:"object"},{additionalProperties:!1,properties:{between:{items:{$ref:"#/definitions/Stream"},type:"array"},consume:{type:"boolean"},debounce:{type:"number"},filter:{anyOf:[{$ref:"#/definitions/Expr"},{items:{$ref:"#/definitions/Expr"},type:"array"}]},markname:{type:"string"},marktype:{$ref:"#/definitions/MarkType"},source:{const:"window",type:"string"},throttle:{type:"number"},type:{$ref:"#/definitions/WindowEventType"}},required:["source","type"],type:"object"}]},EventType:{enum:["click","dblclick","dragenter","dragleave","dragover","keydown","keypress","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","pointerdown","pointermove","pointerout","pointerover","pointerup","timer","touchend","touchmove","touchstart","wheel"],type:"string"},Expr:{type:"string"},ExprRef:{additionalProperties:!1,properties:{expr:{description:"Vega expression (which can refer to Vega-Lite parameters).",type:"string"}},required:["expr"],type:"object"},ExtentTransform:{additionalProperties:!1,properties:{extent:{$ref:"#/definitions/FieldName",description:"The field of which to get the extent."},param:{$ref:"#/definitions/ParameterName",description:"The output parameter produced by the extent transform."}},required:["extent","param"],type:"object"},FacetEncodingFieldDef:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},align:{anyOf:[{$ref:"#/definitions/LayoutAlign"},{$ref:"#/definitions/RowCol<LayoutAlign>"}],description:'The alignment to apply to grid rows and columns. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\nAlternatively, an object value of the form `{"row": string, "column": string}` can be used to supply different alignments for rows and columns.\n\n__Default value:__ `"all"`.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{anyOf:[{type:"boolean"},{$ref:"#/definitions/RowCol<boolean>"}],description:'Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\nAn object value of the form `{"row": boolean, "column": boolean}` can be used to supply different centering values for rows and columns.\n\n__Default value:__ `false`'},columns:{description:"The number of columns to include in the view composition layout.\n\n__Default value__: `undefined` -- An infinite number of columns (a single row) will be assumed. This is equivalent to `hconcat` (for `concat`) and to using the `column` channel (for `facet` and `repeat`).\n\n__Note__:\n\n1) This property is only for:\n- the general (wrappable) `concat` operator (not `hconcat`/`vconcat`)\n- the `facet` and `repeat` operator with one field/repetition definition (without row/column nesting)\n\n2) Setting the `columns` to `1` is equivalent to `vconcat` (for `concat`) and to using the `row` channel (for `facet` and `repeat`).",type:"number"},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},header:{anyOf:[{$ref:"#/definitions/Header"},{type:"null"}],description:"An object defining properties of a facet's header."},sort:{anyOf:[{$ref:"#/definitions/SortArray"},{$ref:"#/definitions/SortOrder"},{$ref:"#/definitions/EncodingSortField"},{type:"null"}],description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` is not supported for `row` and `column`.'},spacing:{anyOf:[{type:"number"},{$ref:"#/definitions/RowCol<number>"}],description:'The spacing in pixels between sub-views of the composition operator. An object of the form `{"row": number, "column": number}` can be used to set different spacing values for rows and columns.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},FacetFieldDef:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},header:{anyOf:[{$ref:"#/definitions/Header"},{type:"null"}],description:"An object defining properties of a facet's header."},sort:{anyOf:[{$ref:"#/definitions/SortArray"},{$ref:"#/definitions/SortOrder"},{$ref:"#/definitions/EncodingSortField"},{type:"null"}],description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` is not supported for `row` and `column`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},FacetMapping:{additionalProperties:!1,properties:{column:{$ref:"#/definitions/FacetFieldDef",description:"A field definition for the horizontal facet of trellis plots."},row:{$ref:"#/definitions/FacetFieldDef",description:"A field definition for the vertical facet of trellis plots."}},type:"object"},FacetedEncoding:{additionalProperties:!1,properties:{angle:{$ref:"#/definitions/NumericMarkPropDef",description:"Rotation angle of point and text marks."},color:{$ref:"#/definitions/ColorDef",description:'Color of the marks  either fill or stroke color based on  the `filled` property of mark definition. By default, `color` represents fill color for `"area"`, `"bar"`, `"tick"`, `"text"`, `"trail"`, `"circle"`, and `"square"` / stroke color for `"line"` and `"point"`.\n\n__Default value:__ If undefined, the default color depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)\'s `color` property.\n\n_Note:_ 1) For fine-grained control over both fill and stroke colors of the marks, please use the `fill` and `stroke` channels. The `fill` or `stroke` encodings have higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified. 2) See the scale documentation for more information about customizing [color scheme](https://vega.github.io/vega-lite/docs/scale.html#scheme).'},column:{$ref:"#/definitions/RowColumnEncodingFieldDef",description:"A field definition for the horizontal facet of trellis plots."},description:{anyOf:[{$ref:"#/definitions/StringFieldDefWithCondition"},{$ref:"#/definitions/StringValueDefWithCondition"}],description:'A text description of this mark for ARIA accessibility (SVG output only). For SVG output the `"aria-label"` attribute will be set to this description.'},detail:{anyOf:[{$ref:"#/definitions/FieldDefWithoutScale"},{items:{$ref:"#/definitions/FieldDefWithoutScale"},type:"array"}],description:"Additional levels of detail for grouping data in aggregate views and in line, trail, and area marks without mapping data to a specific visual channel."},facet:{$ref:"#/definitions/FacetEncodingFieldDef",description:"A field definition for the (flexible) facet of trellis plots.\n\nIf either `row` or `column` is specified, this channel will be ignored."},fill:{$ref:"#/definitions/ColorDef",description:"Fill color of the marks. __Default value:__ If undefined, the default color depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `color` property.\n\n_Note:_ The `fill` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},fillOpacity:{$ref:"#/definitions/NumericMarkPropDef",description:"Fill opacity of the marks.\n\n__Default value:__ If undefined, the default opacity depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `fillOpacity` property."},href:{anyOf:[{$ref:"#/definitions/StringFieldDefWithCondition"},{$ref:"#/definitions/StringValueDefWithCondition"}],description:"A URL to load upon mouse click."},key:{$ref:"#/definitions/FieldDefWithoutScale",description:"A data field to use as a unique key for data binding. When a visualizations data is updated, the key value will be used to match data elements to existing mark instances. Use a key channel to enable object constancy for transitions over dynamic data."},latitude:{$ref:"#/definitions/LatLongDef",description:"Latitude position of geographically projected marks."},latitude2:{$ref:"#/definitions/Position2Def",description:'Latitude-2 position for geographically projected ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.'},longitude:{$ref:"#/definitions/LatLongDef",description:"Longitude position of geographically projected marks."},longitude2:{$ref:"#/definitions/Position2Def",description:'Longitude-2 position for geographically projected ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.'},opacity:{$ref:"#/definitions/NumericMarkPropDef",description:"Opacity of the marks.\n\n__Default value:__ If undefined, the default opacity depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `opacity` property."},order:{anyOf:[{$ref:"#/definitions/OrderFieldDef"},{items:{$ref:"#/definitions/OrderFieldDef"},type:"array"},{$ref:"#/definitions/OrderValueDef"},{$ref:"#/definitions/OrderOnlyDef"}],description:'Order of the marks.\n- For stacked marks, this `order` channel encodes [stack order](https://vega.github.io/vega-lite/docs/stack.html#order).\n- For line and trail marks, this `order` channel encodes order of data points in the lines. This can be useful for creating [a connected scatterplot](https://vega.github.io/vega-lite/examples/connected_scatterplot.html). Setting `order` to `{"value": null}` makes the line marks use the original order in the data sources.\n- Otherwise, this `order` channel encodes layer order of the marks.\n\n__Note__: In aggregate plots, `order` field should be `aggregate`d to avoid creating additional aggregation grouping.'},radius:{$ref:"#/definitions/PolarDef",description:"The outer radius in pixels of arc marks."},radius2:{$ref:"#/definitions/Position2Def",description:"The inner radius in pixels of arc marks."},row:{$ref:"#/definitions/RowColumnEncodingFieldDef",description:"A field definition for the vertical facet of trellis plots."},shape:{$ref:"#/definitions/ShapeDef",description:'Shape of the mark.\n\n1. For `point` marks the supported values include:   - plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.   - the line symbol `"stroke"`   - centered directional shapes `"arrow"`, `"wedge"`, or `"triangle"`   - a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) (For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.)\n\n2. For `geoshape` marks it should be a field definition of the geojson data\n\n__Default value:__ If undefined, the default shape depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#point-config)\'s `shape` property. (`"circle"` if unset.)'},size:{$ref:"#/definitions/NumericMarkPropDef",description:'Size of the mark.\n- For `"point"`, `"square"` and `"circle"`,  the symbol size, or pixel area of the mark.\n- For `"bar"` and `"tick"`  the bar and tick\'s size.\n- For `"text"`  the text\'s font size.\n- Size is unsupported for `"line"`, `"area"`, and `"rect"`. (Use `"trail"` instead of line with varying size)'},stroke:{$ref:"#/definitions/ColorDef",description:"Stroke color of the marks. __Default value:__ If undefined, the default color depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `color` property.\n\n_Note:_ The `stroke` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},strokeDash:{$ref:"#/definitions/NumericArrayMarkPropDef",description:"Stroke dash of the marks.\n\n__Default value:__ `[1,0]` (No dash)."},strokeOpacity:{$ref:"#/definitions/NumericMarkPropDef",description:"Stroke opacity of the marks.\n\n__Default value:__ If undefined, the default opacity depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `strokeOpacity` property."},strokeWidth:{$ref:"#/definitions/NumericMarkPropDef",description:"Stroke width of the marks.\n\n__Default value:__ If undefined, the default stroke width depends on [mark config](https://vega.github.io/vega-lite/docs/config.html#mark-config)'s `strokeWidth` property."},text:{$ref:"#/definitions/TextDef",description:"Text of the `text` mark."},theta:{$ref:"#/definitions/PolarDef",description:`- For arc marks, the arc length in radians if theta2 is not specified, otherwise the start arc angle. (A value of 0 indicates up or north, increasing values proceed clockwise.)

- For text marks, polar coordinate angle in radians.`},theta2:{$ref:"#/definitions/Position2Def",description:"The end angle of arc marks in radians. A value of 0 indicates up or north, increasing values proceed clockwise."},time:{$ref:"#/definitions/TimeDef"},tooltip:{anyOf:[{$ref:"#/definitions/StringFieldDefWithCondition"},{$ref:"#/definitions/StringValueDefWithCondition"},{items:{$ref:"#/definitions/StringFieldDef"},type:"array"},{type:"null"}],description:"The tooltip text to show upon mouse hover. Specifying `tooltip` encoding overrides [the `tooltip` property in the mark definition](https://vega.github.io/vega-lite/docs/mark.html#mark-def).\n\nSee the [`tooltip`](https://vega.github.io/vega-lite/docs/tooltip.html) documentation for a detailed discussion about tooltip in Vega-Lite."},url:{anyOf:[{$ref:"#/definitions/StringFieldDefWithCondition"},{$ref:"#/definitions/StringValueDefWithCondition"}],description:"The URL of an image mark."},x:{$ref:"#/definitions/PositionDef",description:'X coordinates of the marks, or width of horizontal `"bar"` and `"area"` without specified `x2` or `width`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2:{$ref:"#/definitions/Position2Def",description:'X2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},xError:{anyOf:[{$ref:"#/definitions/SecondaryFieldDef"},{$ref:"#/definitions/ValueDef<number>"}],description:'Error value of x coordinates for error specified `"errorbar"` and `"errorband"`.'},xError2:{anyOf:[{$ref:"#/definitions/SecondaryFieldDef"},{$ref:"#/definitions/ValueDef<number>"}],description:'Secondary error value of x coordinates for error specified `"errorbar"` and `"errorband"`.'},xOffset:{$ref:"#/definitions/OffsetDef",description:"Offset of x-position of the marks"},y:{$ref:"#/definitions/PositionDef",description:'Y coordinates of the marks, or height of vertical `"bar"` and `"area"` without specified `y2` or `height`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2:{$ref:"#/definitions/Position2Def",description:'Y2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},yError:{anyOf:[{$ref:"#/definitions/SecondaryFieldDef"},{$ref:"#/definitions/ValueDef<number>"}],description:'Error value of y coordinates for error specified `"errorbar"` and `"errorband"`.'},yError2:{anyOf:[{$ref:"#/definitions/SecondaryFieldDef"},{$ref:"#/definitions/ValueDef<number>"}],description:'Secondary error value of y coordinates for error specified `"errorbar"` and `"errorband"`.'},yOffset:{$ref:"#/definitions/OffsetDef",description:"Offset of y-position of the marks"}},type:"object"},FacetedUnitSpec:{additionalProperties:!1,description:"Unit spec that can have a composite mark and row or column channels (shorthand for a facet spec).",properties:{align:{anyOf:[{$ref:"#/definitions/LayoutAlign"},{$ref:"#/definitions/RowCol<LayoutAlign>"}],description:'The alignment to apply to grid rows and columns. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\nAlternatively, an object value of the form `{"row": string, "column": string}` can be used to supply different alignments for rows and columns.\n\n__Default value:__ `"all"`.'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{anyOf:[{type:"boolean"},{$ref:"#/definitions/RowCol<boolean>"}],description:'Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\nAn object value of the form `{"row": boolean, "column": boolean}` can be used to supply different centering values for rows and columns.\n\n__Default value:__ `false`'},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},description:{description:"Description of this mark for commenting purpose.",type:"string"},encoding:{$ref:"#/definitions/FacetedEncoding",description:"A key-value mapping between encoding channels and definition of fields."},height:{anyOf:[{type:"number"},{const:"container",type:"string"},{$ref:"#/definitions/Step"}],description:'The height of a visualization.\n\n- For a plot with a continuous y-field, height should be a number.\n- For a plot with either a discrete y-field or no y-field, height can be either a number indicating a fixed height or an object in the form of `{step: number}` defining the height per discrete step. (No y-field is equivalent to having one discrete step.)\n- To enable responsive sizing on height, it should be set to `"container"`.\n\n__Default value:__ Based on `config.view.continuousHeight` for a plot with a continuous y-field and `config.view.discreteHeight` otherwise.\n\n__Note:__ For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the height of a single view and the `"container"` option cannot be used.\n\n__See also:__ [`height`](https://vega.github.io/vega-lite/docs/size.html) documentation.'},mark:{$ref:"#/definitions/AnyMark",description:'A string describing the mark type (one of `"bar"`, `"circle"`, `"square"`, `"tick"`, `"line"`, `"area"`, `"point"`, `"rule"`, `"geoshape"`, and `"text"`) or a [mark definition object](https://vega.github.io/vega-lite/docs/mark.html#mark-def).'},name:{description:"Name of the visualization for later reference.",type:"string"},params:{description:"An array of parameters that may either be simple variables, or more complex selections that map user input to data queries.",items:{$ref:"#/definitions/SelectionParameter"},type:"array"},projection:{$ref:"#/definitions/Projection",description:'An object defining properties of geographic projection, which will be applied to `shape` path for `"geoshape"` marks and to `latitude` and `"longitude"` channels for other marks.'},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{anyOf:[{type:"number"},{$ref:"#/definitions/RowCol<number>"}],description:'The spacing in pixels between sub-views of the composition operator. An object of the form `{"row": number, "column": number}` can be used to set different spacing values for rows and columns.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)'},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},view:{$ref:"#/definitions/ViewBackground",description:`An object defining the view background's fill and stroke.

__Default value:__ none (transparent)`},width:{anyOf:[{type:"number"},{const:"container",type:"string"},{$ref:"#/definitions/Step"}],description:'The width of a visualization.\n\n- For a plot with a continuous x-field, width should be a number.\n- For a plot with either a discrete x-field or no x-field, width can be either a number indicating a fixed width or an object in the form of `{step: number}` defining the width per discrete step. (No x-field is equivalent to having one discrete step.)\n- To enable responsive sizing on width, it should be set to `"container"`.\n\n__Default value:__ Based on `config.view.continuousWidth` for a plot with a continuous x-field and `config.view.discreteWidth` otherwise.\n\n__Note:__ For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the width of a single view and the `"container"` option cannot be used.\n\n__See also:__ [`width`](https://vega.github.io/vega-lite/docs/size.html) documentation.'}},required:["mark"],type:"object"},Feature:{additionalProperties:!1,description:"A feature object which contains a geometry and associated properties. https://tools.ietf.org/html/rfc7946#section-3.2",properties:{bbox:{$ref:"#/definitions/BBox",description:"Bounding box of the coordinate range of the object's Geometries, Features, or Feature Collections. https://tools.ietf.org/html/rfc7946#section-5"},geometry:{$ref:"#/definitions/Geometry",description:"The feature's geometry"},id:{description:"A value that uniquely identifies this feature in a https://tools.ietf.org/html/rfc7946#section-3.2.",type:["string","number"]},properties:{$ref:"#/definitions/GeoJsonProperties",description:"Properties associated with this feature."},type:{const:"Feature",description:"Specifies the type of GeoJSON object.",type:"string"}},required:["geometry","properties","type"],type:"object"},"Feature<Geometry,GeoJsonProperties>":{additionalProperties:!1,description:"A feature object which contains a geometry and associated properties. https://tools.ietf.org/html/rfc7946#section-3.2",properties:{bbox:{$ref:"#/definitions/BBox",description:"Bounding box of the coordinate range of the object's Geometries, Features, or Feature Collections. https://tools.ietf.org/html/rfc7946#section-5"},geometry:{$ref:"#/definitions/Geometry",description:"The feature's geometry"},id:{description:"A value that uniquely identifies this feature in a https://tools.ietf.org/html/rfc7946#section-3.2.",type:["string","number"]},properties:{$ref:"#/definitions/GeoJsonProperties",description:"Properties associated with this feature."},type:{const:"Feature",description:"Specifies the type of GeoJSON object.",type:"string"}},required:["geometry","properties","type"],type:"object"},FeatureCollection:{additionalProperties:!1,description:"A collection of feature objects.  https://tools.ietf.org/html/rfc7946#section-3.3",properties:{bbox:{$ref:"#/definitions/BBox",description:"Bounding box of the coordinate range of the object's Geometries, Features, or Feature Collections. https://tools.ietf.org/html/rfc7946#section-5"},features:{items:{$ref:"#/definitions/Feature<Geometry,GeoJsonProperties>"},type:"array"},type:{const:"FeatureCollection",description:"Specifies the type of GeoJSON object.",type:"string"}},required:["features","type"],type:"object"},Field:{anyOf:[{$ref:"#/definitions/FieldName"},{$ref:"#/definitions/RepeatRef"}]},FieldDefWithoutScale:{$ref:"#/definitions/TypedFieldDef",description:'Field Def without scale (and without bin: "binned" support).'},FieldEqualPredicate:{additionalProperties:!1,properties:{equal:{anyOf:[{type:"string"},{type:"number"},{type:"boolean"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"}],description:"The value that the field should be equal to."},field:{$ref:"#/definitions/FieldName",description:"Field to be tested."},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit for the field to be tested."}},required:["equal","field"],type:"object"},FieldGTEPredicate:{additionalProperties:!1,properties:{field:{$ref:"#/definitions/FieldName",description:"Field to be tested."},gte:{anyOf:[{type:"string"},{type:"number"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"}],description:"The value that the field should be greater than or equals to."},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit for the field to be tested."}},required:["field","gte"],type:"object"},FieldGTPredicate:{additionalProperties:!1,properties:{field:{$ref:"#/definitions/FieldName",description:"Field to be tested."},gt:{anyOf:[{type:"string"},{type:"number"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"}],description:"The value that the field should be greater than."},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit for the field to be tested."}},required:["field","gt"],type:"object"},FieldLTEPredicate:{additionalProperties:!1,properties:{field:{$ref:"#/definitions/FieldName",description:"Field to be tested."},lte:{anyOf:[{type:"string"},{type:"number"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"}],description:"The value that the field should be less than or equals to."},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit for the field to be tested."}},required:["field","lte"],type:"object"},FieldLTPredicate:{additionalProperties:!1,properties:{field:{$ref:"#/definitions/FieldName",description:"Field to be tested."},lt:{anyOf:[{type:"string"},{type:"number"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"}],description:"The value that the field should be less than."},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit for the field to be tested."}},required:["field","lt"],type:"object"},FieldName:{type:"string"},FieldOneOfPredicate:{additionalProperties:!1,properties:{field:{$ref:"#/definitions/FieldName",description:"Field to be tested."},oneOf:{anyOf:[{items:{type:"string"},type:"array"},{items:{type:"number"},type:"array"},{items:{type:"boolean"},type:"array"},{items:{$ref:"#/definitions/DateTime"},type:"array"}],description:"A set of values that the `field`'s value should be a member of, for a data item included in the filtered data."},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit for the field to be tested."}},required:["field","oneOf"],type:"object"},"FieldOrDatumDefWithCondition<DatumDef,(Gradient|string|null)>":{additionalProperties:!1,description:"A FieldDef with Condition<ValueDef> {   condition: {value: ...},   field: ...,   ... }",properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},"FieldOrDatumDefWithCondition<DatumDef,(string|null)>":{additionalProperties:!1,description:"A FieldDef with Condition<ValueDef> {   condition: {value: ...},   field: ...,   ... }",properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},"FieldOrDatumDefWithCondition<DatumDef,number>":{additionalProperties:!1,description:"A FieldDef with Condition<ValueDef> {   condition: {value: ...},   field: ...,   ... }",properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},"FieldOrDatumDefWithCondition<DatumDef,number[]>":{additionalProperties:!1,description:"A FieldDef with Condition<ValueDef> {   condition: {value: ...},   field: ...,   ... }",properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(number[]|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number[]|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},"FieldOrDatumDefWithCondition<MarkPropFieldDef,(Gradient|string|null)>":{additionalProperties:!1,description:"A FieldDef with Condition<ValueDef> {   condition: {value: ...},   field: ...,   ... }",properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},"FieldOrDatumDefWithCondition<MarkPropFieldDef,number>":{additionalProperties:!1,description:"A FieldDef with Condition<ValueDef> {   condition: {value: ...},   field: ...,   ... }",properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},"FieldOrDatumDefWithCondition<MarkPropFieldDef,number[]>":{additionalProperties:!1,description:"A FieldDef with Condition<ValueDef> {   condition: {value: ...},   field: ...,   ... }",properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(number[]|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number[]|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},"FieldOrDatumDefWithCondition<MarkPropFieldDef<TypeForShape>,(string|null)>":{additionalProperties:!1,description:"A FieldDef with Condition<ValueDef> {   condition: {value: ...},   field: ...,   ... }",properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/TypeForShape",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},"FieldOrDatumDefWithCondition<StringDatumDef,Text>":{additionalProperties:!1,description:"A FieldDef with Condition<ValueDef> {   condition: {value: ...},   field: ...,   ... }",properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(Text|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Text|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},"FieldOrDatumDefWithCondition<StringFieldDef,Text>":{additionalProperties:!1,description:"A FieldDef with Condition<ValueDef> {   condition: {value: ...},   field: ...,   ... }",properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(Text|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Text|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},"FieldOrDatumDefWithCondition<StringFieldDef,string>":{additionalProperties:!1,description:"A FieldDef with Condition<ValueDef> {   condition: {value: ...},   field: ...,   ... }",properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(string|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},FieldRange:{additionalProperties:!1,properties:{field:{type:"string"}},required:["field"],type:"object"},FieldRangePredicate:{additionalProperties:!1,properties:{field:{$ref:"#/definitions/FieldName",description:"Field to be tested."},range:{anyOf:[{items:{anyOf:[{type:"number"},{$ref:"#/definitions/DateTime"},{type:"null"},{$ref:"#/definitions/ExprRef"}]},type:"array"},{$ref:"#/definitions/ExprRef"}],description:"An array of inclusive minimum and maximum values for a field value of a data item to be included in the filtered data.",maxItems:2,minItems:2},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit for the field to be tested."}},required:["field","range"],type:"object"},FieldValidPredicate:{additionalProperties:!1,properties:{field:{$ref:"#/definitions/FieldName",description:"Field to be tested."},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit for the field to be tested."},valid:{description:"If set to true the field's value has to be valid, meaning both not `null` and not [`NaN`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN).",type:"boolean"}},required:["field","valid"],type:"object"},FilterTransform:{additionalProperties:!1,properties:{filter:{$ref:"#/definitions/PredicateComposition",description:'The `filter` property must be a predication definition, which can take one of the following forms:\n\n1) an [expression](https://vega.github.io/vega-lite/docs/types.html#expression) string, where `datum` can be used to refer to the current data object. For example, `{filter: "datum.b2 > 60"}` would make the output data includes only items that have values in the field `b2` over 60.\n\n2) one of the [field predicates](https://vega.github.io/vega-lite/docs/predicate.html#field-predicate): [`equal`](https://vega.github.io/vega-lite/docs/predicate.html#field-equal-predicate), [`lt`](https://vega.github.io/vega-lite/docs/predicate.html#lt-predicate), [`lte`](https://vega.github.io/vega-lite/docs/predicate.html#lte-predicate), [`gt`](https://vega.github.io/vega-lite/docs/predicate.html#gt-predicate), [`gte`](https://vega.github.io/vega-lite/docs/predicate.html#gte-predicate), [`range`](https://vega.github.io/vega-lite/docs/predicate.html#range-predicate), [`oneOf`](https://vega.github.io/vega-lite/docs/predicate.html#one-of-predicate), or [`valid`](https://vega.github.io/vega-lite/docs/predicate.html#valid-predicate),\n\n3) a [selection predicate](https://vega.github.io/vega-lite/docs/predicate.html#selection-predicate), which define the names of a selection that the data point should belong to (or a logical composition of selections).\n\n4) a [logical composition](https://vega.github.io/vega-lite/docs/predicate.html#composition) of (1), (2), or (3).'}},required:["filter"],type:"object"},Fit:{anyOf:[{$ref:"#/definitions/GeoJsonFeature"},{$ref:"#/definitions/GeoJsonFeatureCollection"},{items:{$ref:"#/definitions/GeoJsonFeature"},type:"array"}]},FlattenTransform:{additionalProperties:!1,properties:{as:{description:`The output field names for extracted array values.

__Default value:__ The field name of the corresponding array field`,items:{$ref:"#/definitions/FieldName"},type:"array"},flatten:{description:"An array of one or more data fields containing arrays to flatten. If multiple fields are specified, their array values should have a parallel structure, ideally with the same length. If the lengths of parallel arrays do not match, the longest array will be used with `null` values added for missing entries.",items:{$ref:"#/definitions/FieldName"},type:"array"}},required:["flatten"],type:"object"},FoldTransform:{additionalProperties:!1,properties:{as:{description:'The output field names for the key and value properties produced by the fold transform. __Default value:__ `["key", "value"]`',items:{$ref:"#/definitions/FieldName"},maxItems:2,minItems:2,type:"array"},fold:{description:"An array of data fields indicating the properties to fold.",items:{$ref:"#/definitions/FieldName"},type:"array"}},required:["fold"],type:"object"},FontStyle:{type:"string"},FontWeight:{enum:["normal","bold","lighter","bolder",100,200,300,400,500,600,700,800,900],type:["string","number"]},FormatConfig:{additionalProperties:!1,properties:{normalizedNumberFormat:{description:'If normalizedNumberFormatType is not specified, D3 number format for axis labels, text marks, and tooltips of normalized stacked fields (fields with `stack: "normalize"`). For example `"s"` for SI units. Use [D3\'s number format pattern](https://github.com/d3/d3-format#locale_format).\n\nIf `config.normalizedNumberFormatType` is specified and `config.customFormatTypes` is `true`, this value will be passed as `format` alongside `datum.value` to the `config.numberFormatType` function. __Default value:__ `%`',type:"string"},normalizedNumberFormatType:{description:"[Custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type) for `config.normalizedNumberFormat`.\n\n__Default value:__ `undefined` -- This is equilvalent to call D3-format, which is exposed as [`format` in Vega-Expression](https://vega.github.io/vega/docs/expressions/#format). __Note:__ You must also set `customFormatTypes` to `true` to use this feature.",type:"string"},numberFormat:{description:'If numberFormatType is not specified, D3 number format for guide labels, text marks, and tooltips of non-normalized fields (fields *without* `stack: "normalize"`). For example `"s"` for SI units. Use [D3\'s number format pattern](https://github.com/d3/d3-format#locale_format).\n\nIf `config.numberFormatType` is specified and `config.customFormatTypes` is `true`, this value will be passed as `format` alongside `datum.value` to the `config.numberFormatType` function.',type:"string"},numberFormatType:{description:"[Custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type) for `config.numberFormat`.\n\n__Default value:__ `undefined` -- This is equilvalent to call D3-format, which is exposed as [`format` in Vega-Expression](https://vega.github.io/vega/docs/expressions/#format). __Note:__ You must also set `customFormatTypes` to `true` to use this feature.",type:"string"},timeFormat:{description:'Default time format for raw time values (without time units) in text marks, legend labels and header labels.\n\n__Default value:__ `"%b %d, %Y"` __Note:__ Axes automatically determine the format for each label automatically so this config does not affect axes.',type:"string"},timeFormatType:{description:"[Custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type) for `config.timeFormat`.\n\n__Default value:__ `undefined` -- This is equilvalent to call D3-time-format, which is exposed as [`timeFormat` in Vega-Expression](https://vega.github.io/vega/docs/expressions/#timeFormat). __Note:__ You must also set `customFormatTypes` to `true` and there must *not* be a `timeUnit` defined to use this feature.",type:"string"}},type:"object"},Generator:{anyOf:[{$ref:"#/definitions/SequenceGenerator"},{$ref:"#/definitions/SphereGenerator"},{$ref:"#/definitions/GraticuleGenerator"}]},"ConcatSpec<GenericSpec>":{additionalProperties:!1,description:"Base interface for a generalized concatenation specification.",properties:{align:{anyOf:[{$ref:"#/definitions/LayoutAlign"},{$ref:"#/definitions/RowCol<LayoutAlign>"}],description:'The alignment to apply to grid rows and columns. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\nAlternatively, an object value of the form `{"row": string, "column": string}` can be used to supply different alignments for rows and columns.\n\n__Default value:__ `"all"`.'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{anyOf:[{type:"boolean"},{$ref:"#/definitions/RowCol<boolean>"}],description:'Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\nAn object value of the form `{"row": boolean, "column": boolean}` can be used to supply different centering values for rows and columns.\n\n__Default value:__ `false`'},columns:{description:"The number of columns to include in the view composition layout.\n\n__Default value__: `undefined` -- An infinite number of columns (a single row) will be assumed. This is equivalent to `hconcat` (for `concat`) and to using the `column` channel (for `facet` and `repeat`).\n\n__Note__:\n\n1) This property is only for:\n- the general (wrappable) `concat` operator (not `hconcat`/`vconcat`)\n- the `facet` and `repeat` operator with one field/repetition definition (without row/column nesting)\n\n2) Setting the `columns` to `1` is equivalent to `vconcat` (for `concat`) and to using the `row` channel (for `facet` and `repeat`).",type:"number"},concat:{description:"A list of views to be concatenated.",items:{$ref:"#/definitions/Spec"},type:"array"},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},description:{description:"Description of this mark for commenting purpose.",type:"string"},name:{description:"Name of the visualization for later reference.",type:"string"},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{anyOf:[{type:"number"},{$ref:"#/definitions/RowCol<number>"}],description:'The spacing in pixels between sub-views of the composition operator. An object of the form `{"row": number, "column": number}` can be used to set different spacing values for rows and columns.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)'},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"}},required:["concat"],type:"object"},FacetSpec:{additionalProperties:!1,description:"Base interface for a facet specification.",properties:{align:{anyOf:[{$ref:"#/definitions/LayoutAlign"},{$ref:"#/definitions/RowCol<LayoutAlign>"}],description:'The alignment to apply to grid rows and columns. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\nAlternatively, an object value of the form `{"row": string, "column": string}` can be used to supply different alignments for rows and columns.\n\n__Default value:__ `"all"`.'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{anyOf:[{type:"boolean"},{$ref:"#/definitions/RowCol<boolean>"}],description:'Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\nAn object value of the form `{"row": boolean, "column": boolean}` can be used to supply different centering values for rows and columns.\n\n__Default value:__ `false`'},columns:{description:"The number of columns to include in the view composition layout.\n\n__Default value__: `undefined` -- An infinite number of columns (a single row) will be assumed. This is equivalent to `hconcat` (for `concat`) and to using the `column` channel (for `facet` and `repeat`).\n\n__Note__:\n\n1) This property is only for:\n- the general (wrappable) `concat` operator (not `hconcat`/`vconcat`)\n- the `facet` and `repeat` operator with one field/repetition definition (without row/column nesting)\n\n2) Setting the `columns` to `1` is equivalent to `vconcat` (for `concat`) and to using the `row` channel (for `facet` and `repeat`).",type:"number"},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},description:{description:"Description of this mark for commenting purpose.",type:"string"},facet:{anyOf:[{$ref:"#/definitions/FacetFieldDef"},{$ref:"#/definitions/FacetMapping"}],description:"Definition for how to facet the data. One of: 1) [a field definition for faceting the plot by one field](https://vega.github.io/vega-lite/docs/facet.html#field-def) 2) [An object that maps `row` and `column` channels to their field definitions](https://vega.github.io/vega-lite/docs/facet.html#mapping)"},name:{description:"Name of the visualization for later reference.",type:"string"},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{anyOf:[{type:"number"},{$ref:"#/definitions/RowCol<number>"}],description:'The spacing in pixels between sub-views of the composition operator. An object of the form `{"row": number, "column": number}` can be used to set different spacing values for rows and columns.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)'},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/FacetedUnitSpec"}],description:"A specification of the view that gets faceted."},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"}},required:["facet","spec"],type:"object"},"HConcatSpec<GenericSpec>":{additionalProperties:!1,description:"Base interface for a horizontal concatenation specification.",properties:{bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{description:"Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\n__Default value:__ `false`",type:"boolean"},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},description:{description:"Description of this mark for commenting purpose.",type:"string"},hconcat:{description:"A list of views to be concatenated and put into a row.",items:{$ref:"#/definitions/Spec"},type:"array"},name:{description:"Name of the visualization for later reference.",type:"string"},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{description:"The spacing in pixels between sub-views of the concat operator.\n\n__Default value__: `10`",type:"number"},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"}},required:["hconcat"],type:"object"},Spec:{anyOf:[{$ref:"#/definitions/FacetedUnitSpec"},{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/RepeatSpec"},{$ref:"#/definitions/FacetSpec"},{$ref:"#/definitions/ConcatSpec<GenericSpec>"},{$ref:"#/definitions/VConcatSpec<GenericSpec>"},{$ref:"#/definitions/HConcatSpec<GenericSpec>"}],description:"Any specification in Vega-Lite."},"GenericUnitSpec<Encoding,AnyMark>":{additionalProperties:!1,description:"Base interface for a unit (single-view) specification.",properties:{data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},description:{description:"Description of this mark for commenting purpose.",type:"string"},encoding:{$ref:"#/definitions/Encoding",description:"A key-value mapping between encoding channels and definition of fields."},mark:{$ref:"#/definitions/AnyMark",description:'A string describing the mark type (one of `"bar"`, `"circle"`, `"square"`, `"tick"`, `"line"`, `"area"`, `"point"`, `"rule"`, `"geoshape"`, and `"text"`) or a [mark definition object](https://vega.github.io/vega-lite/docs/mark.html#mark-def).'},name:{description:"Name of the visualization for later reference.",type:"string"},params:{description:"An array of parameters that may either be simple variables, or more complex selections that map user input to data queries.",items:{$ref:"#/definitions/SelectionParameter"},type:"array"},projection:{$ref:"#/definitions/Projection",description:'An object defining properties of geographic projection, which will be applied to `shape` path for `"geoshape"` marks and to `latitude` and `"longitude"` channels for other marks.'},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"}},required:["mark"],type:"object"},"VConcatSpec<GenericSpec>":{additionalProperties:!1,description:"Base interface for a vertical concatenation specification.",properties:{bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{description:"Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\n__Default value:__ `false`",type:"boolean"},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},description:{description:"Description of this mark for commenting purpose.",type:"string"},name:{description:"Name of the visualization for later reference.",type:"string"},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{description:"The spacing in pixels between sub-views of the concat operator.\n\n__Default value__: `10`",type:"number"},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},vconcat:{description:"A list of views to be concatenated and put into a column.",items:{$ref:"#/definitions/Spec"},type:"array"}},required:["vconcat"],type:"object"},GeoJsonFeature:{$ref:"#/definitions/Feature"},GeoJsonFeatureCollection:{$ref:"#/definitions/FeatureCollection"},GeoJsonProperties:{anyOf:[{type:"object"},{type:"null"}]},Geometry:{anyOf:[{$ref:"#/definitions/Point"},{$ref:"#/definitions/MultiPoint"},{$ref:"#/definitions/LineString"},{$ref:"#/definitions/MultiLineString"},{$ref:"#/definitions/Polygon"},{$ref:"#/definitions/MultiPolygon"},{$ref:"#/definitions/GeometryCollection"}],description:"Union of geometry objects. https://tools.ietf.org/html/rfc7946#section-3"},GeometryCollection:{additionalProperties:!1,description:"Geometry Collection https://tools.ietf.org/html/rfc7946#section-3.1.8",properties:{bbox:{$ref:"#/definitions/BBox",description:"Bounding box of the coordinate range of the object's Geometries, Features, or Feature Collections. https://tools.ietf.org/html/rfc7946#section-5"},geometries:{items:{$ref:"#/definitions/Geometry"},type:"array"},type:{const:"GeometryCollection",description:"Specifies the type of GeoJSON object.",type:"string"}},required:["geometries","type"],type:"object"},Gradient:{anyOf:[{$ref:"#/definitions/LinearGradient"},{$ref:"#/definitions/RadialGradient"}]},GradientStop:{additionalProperties:!1,properties:{color:{$ref:"#/definitions/Color",description:"The color value at this point in the gradient."},offset:{description:"The offset fraction for the color stop, indicating its position within the gradient.",type:"number"}},required:["offset","color"],type:"object"},GraticuleGenerator:{additionalProperties:!1,properties:{graticule:{anyOf:[{const:!0,type:"boolean"},{$ref:"#/definitions/GraticuleParams"}],description:"Generate graticule GeoJSON data for geographic reference lines."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"}},required:["graticule"],type:"object"},GraticuleParams:{additionalProperties:!1,properties:{extent:{$ref:"#/definitions/Vector2<Vector2<number>>",description:"Sets both the major and minor extents to the same values."},extentMajor:{$ref:"#/definitions/Vector2<Vector2<number>>",description:"The major extent of the graticule as a two-element array of coordinates."},extentMinor:{$ref:"#/definitions/Vector2<Vector2<number>>",description:"The minor extent of the graticule as a two-element array of coordinates."},precision:{description:"The precision of the graticule in degrees.\n\n__Default value:__ `2.5`",type:"number"},step:{$ref:"#/definitions/Vector2<number>",description:"Sets both the major and minor step angles to the same values."},stepMajor:{$ref:"#/definitions/Vector2<number>",description:`The major step angles of the graticule.


__Default value:__ \`[90, 360]\``},stepMinor:{$ref:"#/definitions/Vector2<number>",description:"The minor step angles of the graticule.\n\n__Default value:__ `[10, 10]`"}},type:"object"},Header:{additionalProperties:!1,description:"Headers of row / column channels for faceted plots.",properties:{format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},labelAlign:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:'Horizontal text alignment of header labels. One of `"left"`, `"center"`, or `"right"`.'},labelAnchor:{$ref:"#/definitions/TitleAnchor",description:'The anchor position for placing the labels. One of `"start"`, `"middle"`, or `"end"`. For example, with a label orientation of top these anchor positions map to a left-, center-, or right-aligned label.'},labelAngle:{description:"The rotation angle of the header labels.\n\n__Default value:__ `0` for column header, `-90` for row header.",maximum:360,minimum:-360,type:"number"},labelBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'The vertical text baseline for the header labels. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `titleLineHeight` rather than `titleFontSize` alone.'},labelColor:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:"The color of the header label, can be in hex color code or regular color name."},labelExpr:{description:"[Vega expression](https://vega.github.io/vega/docs/expressions/) for customizing labels.\n\n__Note:__ The label text and value can be assessed via the `label` and `value` properties of the header's backing `datum` object.",type:"string"},labelFont:{anyOf:[{type:"string"},{$ref:"#/definitions/ExprRef"}],description:"The font of the header label."},labelFontSize:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The font size of the header label, in pixels.",minimum:0},labelFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle"},{$ref:"#/definitions/ExprRef"}],description:"The font style of the header label."},labelFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight"},{$ref:"#/definitions/ExprRef"}],description:"The font weight of the header label."},labelLimit:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The maximum length of the header label in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0`, indicating no limit"},labelLineHeight:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'Line height in pixels for multi-line header labels or title text with `"line-top"` or `"line-bottom"` baseline.'},labelOrient:{$ref:"#/definitions/Orient",description:'The orientation of the header label. One of `"top"`, `"bottom"`, `"left"` or `"right"`.'},labelPadding:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The padding, in pixel, between facet header's label and the plot.\n\n__Default value:__ `10`"},labels:{description:"A boolean flag indicating if labels should be included as part of the header.\n\n__Default value:__ `true`.",type:"boolean"},orient:{$ref:"#/definitions/Orient",description:"Shortcut for setting both labelOrient and titleOrient."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},titleAlign:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:"Horizontal text alignment (to the anchor) of header titles."},titleAnchor:{$ref:"#/definitions/TitleAnchor",description:'The anchor position for placing the title. One of `"start"`, `"middle"`, or `"end"`. For example, with an orientation of top these anchor positions map to a left-, center-, or right-aligned title.'},titleAngle:{description:"The rotation angle of the header title.\n\n__Default value:__ `0`.",maximum:360,minimum:-360,type:"number"},titleBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'The vertical text baseline for the header title. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `titleLineHeight` rather than `titleFontSize` alone.\n\n__Default value:__ `"middle"`'},titleColor:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:"Color of the header title, can be in hex color code or regular color name."},titleFont:{anyOf:[{type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Font of the header title. (e.g., `"Helvetica Neue"`).'},titleFontSize:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Font size of the header title.",minimum:0},titleFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle"},{$ref:"#/definitions/ExprRef"}],description:"The font style of the header title."},titleFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight"},{$ref:"#/definitions/ExprRef"}],description:'Font weight of the header title. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},titleLimit:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The maximum length of the header title in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0`, indicating no limit"},titleLineHeight:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'Line height in pixels for multi-line header title text or title text with `"line-top"` or `"line-bottom"` baseline.'},titleOrient:{$ref:"#/definitions/Orient",description:'The orientation of the header title. One of `"top"`, `"bottom"`, `"left"` or `"right"`.'},titlePadding:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The padding, in pixel, between facet header's title and the label.\n\n__Default value:__ `10`"}},type:"object"},HeaderConfig:{additionalProperties:!1,properties:{format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},labelAlign:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:'Horizontal text alignment of header labels. One of `"left"`, `"center"`, or `"right"`.'},labelAnchor:{$ref:"#/definitions/TitleAnchor",description:'The anchor position for placing the labels. One of `"start"`, `"middle"`, or `"end"`. For example, with a label orientation of top these anchor positions map to a left-, center-, or right-aligned label.'},labelAngle:{description:"The rotation angle of the header labels.\n\n__Default value:__ `0` for column header, `-90` for row header.",maximum:360,minimum:-360,type:"number"},labelBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'The vertical text baseline for the header labels. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `titleLineHeight` rather than `titleFontSize` alone.'},labelColor:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:"The color of the header label, can be in hex color code or regular color name."},labelExpr:{description:"[Vega expression](https://vega.github.io/vega/docs/expressions/) for customizing labels.\n\n__Note:__ The label text and value can be assessed via the `label` and `value` properties of the header's backing `datum` object.",type:"string"},labelFont:{anyOf:[{type:"string"},{$ref:"#/definitions/ExprRef"}],description:"The font of the header label."},labelFontSize:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The font size of the header label, in pixels.",minimum:0},labelFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle"},{$ref:"#/definitions/ExprRef"}],description:"The font style of the header label."},labelFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight"},{$ref:"#/definitions/ExprRef"}],description:"The font weight of the header label."},labelLimit:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The maximum length of the header label in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0`, indicating no limit"},labelLineHeight:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'Line height in pixels for multi-line header labels or title text with `"line-top"` or `"line-bottom"` baseline.'},labelOrient:{$ref:"#/definitions/Orient",description:'The orientation of the header label. One of `"top"`, `"bottom"`, `"left"` or `"right"`.'},labelPadding:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The padding, in pixel, between facet header's label and the plot.\n\n__Default value:__ `10`"},labels:{description:"A boolean flag indicating if labels should be included as part of the header.\n\n__Default value:__ `true`.",type:"boolean"},orient:{$ref:"#/definitions/Orient",description:"Shortcut for setting both labelOrient and titleOrient."},title:{description:"Set to null to disable title for the axis, legend, or header.",type:"null"},titleAlign:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:"Horizontal text alignment (to the anchor) of header titles."},titleAnchor:{$ref:"#/definitions/TitleAnchor",description:'The anchor position for placing the title. One of `"start"`, `"middle"`, or `"end"`. For example, with an orientation of top these anchor positions map to a left-, center-, or right-aligned title.'},titleAngle:{description:"The rotation angle of the header title.\n\n__Default value:__ `0`.",maximum:360,minimum:-360,type:"number"},titleBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'The vertical text baseline for the header title. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `titleLineHeight` rather than `titleFontSize` alone.\n\n__Default value:__ `"middle"`'},titleColor:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:"Color of the header title, can be in hex color code or regular color name."},titleFont:{anyOf:[{type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Font of the header title. (e.g., `"Helvetica Neue"`).'},titleFontSize:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Font size of the header title.",minimum:0},titleFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle"},{$ref:"#/definitions/ExprRef"}],description:"The font style of the header title."},titleFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight"},{$ref:"#/definitions/ExprRef"}],description:'Font weight of the header title. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},titleLimit:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The maximum length of the header title in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0`, indicating no limit"},titleLineHeight:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'Line height in pixels for multi-line header title text or title text with `"line-top"` or `"line-bottom"` baseline.'},titleOrient:{$ref:"#/definitions/Orient",description:'The orientation of the header title. One of `"top"`, `"bottom"`, `"left"` or `"right"`.'},titlePadding:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The padding, in pixel, between facet header's title and the label.\n\n__Default value:__ `10`"}},type:"object"},HexColor:{format:"color-hex",type:"string"},ImputeMethod:{enum:["value","median","max","min","mean"],type:"string"},ImputeParams:{additionalProperties:!1,properties:{frame:{description:"A frame specification as a two-element array used to control the window over which the specified method is applied. The array entries should either be a number indicating the offset from the current data object, or null to indicate unbounded rows preceding or following the current data object. For example, the value `[-5, 5]` indicates that the window should include five objects preceding and five objects following the current object.\n\n__Default value:__:  `[null, null]` indicating that the window includes all objects.",items:{type:["null","number"]},maxItems:2,minItems:2,type:"array"},keyvals:{anyOf:[{items:{},type:"array"},{$ref:"#/definitions/ImputeSequence"}],description:"Defines the key values that should be considered for imputation. An array of key values or an object defining a [number sequence](https://vega.github.io/vega-lite/docs/impute.html#sequence-def).\n\nIf provided, this will be used in addition to the key values observed within the input data. If not provided, the values will be derived from all unique values of the `key` field. For `impute` in `encoding`, the key field is the x-field if the y-field is imputed, or vice versa.\n\nIf there is no impute grouping, this property _must_ be specified."},method:{$ref:"#/definitions/ImputeMethod",description:'The imputation method to use for the field value of imputed data objects. One of `"value"`, `"mean"`, `"median"`, `"max"` or `"min"`.\n\n__Default value:__  `"value"`'},value:{description:'The field value to use when the imputation `method` is `"value"`.'}},type:"object"},ImputeSequence:{additionalProperties:!1,properties:{start:{description:"The starting value of the sequence. __Default value:__ `0`",type:"number"},step:{description:"The step value between sequence entries. __Default value:__ `1` or `-1` if `stop < start`",type:"number"},stop:{description:"The ending value(exclusive) of the sequence.",type:"number"}},required:["stop"],type:"object"},ImputeTransform:{additionalProperties:!1,properties:{frame:{description:"A frame specification as a two-element array used to control the window over which the specified method is applied. The array entries should either be a number indicating the offset from the current data object, or null to indicate unbounded rows preceding or following the current data object. For example, the value `[-5, 5]` indicates that the window should include five objects preceding and five objects following the current object.\n\n__Default value:__:  `[null, null]` indicating that the window includes all objects.",items:{type:["null","number"]},maxItems:2,minItems:2,type:"array"},groupby:{description:"An optional array of fields by which to group the values. Imputation will then be performed on a per-group basis.",items:{$ref:"#/definitions/FieldName"},type:"array"},impute:{$ref:"#/definitions/FieldName",description:"The data field for which the missing values should be imputed."},key:{$ref:"#/definitions/FieldName",description:"A key field that uniquely identifies data objects within a group. Missing key values (those occurring in the data but not in the current group) will be imputed."},keyvals:{anyOf:[{items:{},type:"array"},{$ref:"#/definitions/ImputeSequence"}],description:"Defines the key values that should be considered for imputation. An array of key values or an object defining a [number sequence](https://vega.github.io/vega-lite/docs/impute.html#sequence-def).\n\nIf provided, this will be used in addition to the key values observed within the input data. If not provided, the values will be derived from all unique values of the `key` field. For `impute` in `encoding`, the key field is the x-field if the y-field is imputed, or vice versa.\n\nIf there is no impute grouping, this property _must_ be specified."},method:{$ref:"#/definitions/ImputeMethod",description:'The imputation method to use for the field value of imputed data objects. One of `"value"`, `"mean"`, `"median"`, `"max"` or `"min"`.\n\n__Default value:__  `"value"`'},value:{description:'The field value to use when the imputation `method` is `"value"`.'}},required:["impute","key"],type:"object"},InlineData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},values:{$ref:"#/definitions/InlineDataset",description:"The full data set, included inline. This can be an array of objects or primitive values, an object, or a string. Arrays of primitive values are ingested as objects with a `data` property. Strings are parsed according to the specified format type."}},required:["values"],type:"object"},InlineDataset:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"},{items:{type:"object"},type:"array"},{type:"string"},{type:"object"}]},Interpolate:{enum:["basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","catmull-rom","linear","linear-closed","monotone","natural","step","step-before","step-after"],type:"string"},IntervalSelectionConfig:{additionalProperties:!1,properties:{clear:{anyOf:[{$ref:"#/definitions/Stream"},{type:"string"},{type:"boolean"}],description:"Clears the selection, emptying it of all values. This property can be a [Event Stream](https://vega.github.io/vega/docs/event-streams/) or `false` to disable clear.\n\n__Default value:__ `dblclick`.\n\n__See also:__ [`clear` examples ](https://vega.github.io/vega-lite/docs/selection.html#clear) in the documentation."},encodings:{description:"An array of encoding channels. The corresponding data field values must match for a data tuple to fall within the selection.\n\n__See also:__ The [projection with `encodings` and `fields` section](https://vega.github.io/vega-lite/docs/selection.html#project) in the documentation.",items:{$ref:"#/definitions/SingleDefUnitChannel"},type:"array"},fields:{description:"An array of field names whose values must match for a data tuple to fall within the selection.\n\n__See also:__ The [projection with `encodings` and `fields` section](https://vega.github.io/vega-lite/docs/selection.html#project) in the documentation.",items:{$ref:"#/definitions/FieldName"},type:"array"},mark:{$ref:"#/definitions/BrushConfig",description:"An interval selection also adds a rectangle mark to depict the extents of the interval. The `mark` property can be used to customize the appearance of the mark.\n\n__See also:__ [`mark` examples](https://vega.github.io/vega-lite/docs/selection.html#mark) in the documentation."},on:{anyOf:[{$ref:"#/definitions/Stream"},{type:"string"}],description:"A [Vega event stream](https://vega.github.io/vega/docs/event-streams/) (object or selector) that triggers the selection. For interval selections, the event stream must specify a [start and end](https://vega.github.io/vega/docs/event-streams/#between-filters).\n\n__See also:__ [`on` examples](https://vega.github.io/vega-lite/docs/selection.html#on) in the documentation."},resolve:{$ref:"#/definitions/SelectionResolution",description:'With layered and multi-view displays, a strategy that determines how selections\' data queries are resolved when applied in a filter transform, conditional encoding rule, or scale domain.\n\nOne of:\n- `"global"` -- only one brush exists for the entire SPLOM. When the user begins to drag, any previous brushes are cleared, and a new one is constructed.\n- `"union"` -- each cell contains its own brush, and points are highlighted if they lie within _any_ of these individual brushes.\n- `"intersect"` -- each cell contains its own brush, and points are highlighted only if they fall within _all_ of these individual brushes.\n\n__Default value:__ `global`.\n\n__See also:__ [`resolve` examples](https://vega.github.io/vega-lite/docs/selection.html#resolve) in the documentation.'},translate:{description:"When truthy, allows a user to interactively move an interval selection back-and-forth. Can be `true`, `false` (to disable panning), or a [Vega event stream definition](https://vega.github.io/vega/docs/event-streams/) which must include a start and end event to trigger continuous panning. Discrete panning (e.g., pressing the left/right arrow keys) will be supported in future versions.\n\n__Default value:__ `true`, which corresponds to `[pointerdown, window:pointerup] > window:pointermove!`. This default allows users to clicks and drags within an interval selection to reposition it.\n\n__See also:__ [`translate` examples](https://vega.github.io/vega-lite/docs/selection.html#translate) in the documentation.",type:["string","boolean"]},type:{const:"interval",description:'Determines the default event processing and data query for the selection. Vega-Lite currently supports two selection types:\n\n- `"point"` -- to select multiple discrete data values; the first value is selected on `click` and additional values toggled on shift-click.\n- `"interval"` -- to select a continuous range of data values on `drag`.',type:"string"},zoom:{description:"When truthy, allows a user to interactively resize an interval selection. Can be `true`, `false` (to disable zooming), or a [Vega event stream definition](https://vega.github.io/vega/docs/event-streams/). Currently, only `wheel` events are supported, but custom event streams can still be used to specify filters, debouncing, and throttling. Future versions will expand the set of events that can trigger this transformation.\n\n__Default value:__ `true`, which corresponds to `wheel!`. This default allows users to use the mouse wheel to resize an interval selection.\n\n__See also:__ [`zoom` examples](https://vega.github.io/vega-lite/docs/selection.html#zoom) in the documentation.",type:["string","boolean"]}},required:["type"],type:"object"},IntervalSelectionConfigWithoutType:{additionalProperties:!1,properties:{clear:{anyOf:[{$ref:"#/definitions/Stream"},{type:"string"},{type:"boolean"}],description:"Clears the selection, emptying it of all values. This property can be a [Event Stream](https://vega.github.io/vega/docs/event-streams/) or `false` to disable clear.\n\n__Default value:__ `dblclick`.\n\n__See also:__ [`clear` examples ](https://vega.github.io/vega-lite/docs/selection.html#clear) in the documentation."},encodings:{description:"An array of encoding channels. The corresponding data field values must match for a data tuple to fall within the selection.\n\n__See also:__ The [projection with `encodings` and `fields` section](https://vega.github.io/vega-lite/docs/selection.html#project) in the documentation.",items:{$ref:"#/definitions/SingleDefUnitChannel"},type:"array"},fields:{description:"An array of field names whose values must match for a data tuple to fall within the selection.\n\n__See also:__ The [projection with `encodings` and `fields` section](https://vega.github.io/vega-lite/docs/selection.html#project) in the documentation.",items:{$ref:"#/definitions/FieldName"},type:"array"},mark:{$ref:"#/definitions/BrushConfig",description:"An interval selection also adds a rectangle mark to depict the extents of the interval. The `mark` property can be used to customize the appearance of the mark.\n\n__See also:__ [`mark` examples](https://vega.github.io/vega-lite/docs/selection.html#mark) in the documentation."},on:{anyOf:[{$ref:"#/definitions/Stream"},{type:"string"}],description:"A [Vega event stream](https://vega.github.io/vega/docs/event-streams/) (object or selector) that triggers the selection. For interval selections, the event stream must specify a [start and end](https://vega.github.io/vega/docs/event-streams/#between-filters).\n\n__See also:__ [`on` examples](https://vega.github.io/vega-lite/docs/selection.html#on) in the documentation."},resolve:{$ref:"#/definitions/SelectionResolution",description:'With layered and multi-view displays, a strategy that determines how selections\' data queries are resolved when applied in a filter transform, conditional encoding rule, or scale domain.\n\nOne of:\n- `"global"` -- only one brush exists for the entire SPLOM. When the user begins to drag, any previous brushes are cleared, and a new one is constructed.\n- `"union"` -- each cell contains its own brush, and points are highlighted if they lie within _any_ of these individual brushes.\n- `"intersect"` -- each cell contains its own brush, and points are highlighted only if they fall within _all_ of these individual brushes.\n\n__Default value:__ `global`.\n\n__See also:__ [`resolve` examples](https://vega.github.io/vega-lite/docs/selection.html#resolve) in the documentation.'},translate:{description:"When truthy, allows a user to interactively move an interval selection back-and-forth. Can be `true`, `false` (to disable panning), or a [Vega event stream definition](https://vega.github.io/vega/docs/event-streams/) which must include a start and end event to trigger continuous panning. Discrete panning (e.g., pressing the left/right arrow keys) will be supported in future versions.\n\n__Default value:__ `true`, which corresponds to `[pointerdown, window:pointerup] > window:pointermove!`. This default allows users to clicks and drags within an interval selection to reposition it.\n\n__See also:__ [`translate` examples](https://vega.github.io/vega-lite/docs/selection.html#translate) in the documentation.",type:["string","boolean"]},zoom:{description:"When truthy, allows a user to interactively resize an interval selection. Can be `true`, `false` (to disable zooming), or a [Vega event stream definition](https://vega.github.io/vega/docs/event-streams/). Currently, only `wheel` events are supported, but custom event streams can still be used to specify filters, debouncing, and throttling. Future versions will expand the set of events that can trigger this transformation.\n\n__Default value:__ `true`, which corresponds to `wheel!`. This default allows users to use the mouse wheel to resize an interval selection.\n\n__See also:__ [`zoom` examples](https://vega.github.io/vega-lite/docs/selection.html#zoom) in the documentation.",type:["string","boolean"]}},type:"object"},JoinAggregateFieldDef:{additionalProperties:!1,properties:{as:{$ref:"#/definitions/FieldName",description:"The output name for the join aggregate operation."},field:{$ref:"#/definitions/FieldName",description:'The data field for which to compute the aggregate function. This can be omitted for functions that do not operate over a field such as `"count"`.'},op:{$ref:"#/definitions/AggregateOp",description:'The aggregation operation to apply (e.g., `"sum"`, `"average"` or `"count"`). See the list of all supported operations [here](https://vega.github.io/vega-lite/docs/aggregate.html#ops).'}},required:["op","as"],type:"object"},JoinAggregateTransform:{additionalProperties:!1,properties:{groupby:{description:"The data fields for partitioning the data objects into separate groups. If unspecified, all data points will be in a single group.",items:{$ref:"#/definitions/FieldName"},type:"array"},joinaggregate:{description:"The definition of the fields in the join aggregate, and what calculations to use.",items:{$ref:"#/definitions/JoinAggregateFieldDef"},type:"array"}},required:["joinaggregate"],type:"object"},JsonDataFormat:{additionalProperties:!1,properties:{parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using JavaScript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},property:{description:'The JSON property containing the desired data. This parameter can be used when the loaded JSON file may have surrounding structure or meta-data. For example `"property": "values.features"` is equivalent to retrieving `json.values.features` from the loaded JSON object.',type:"string"},type:{const:"json",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',type:"string"}},type:"object"},LabelOverlap:{anyOf:[{type:"boolean"},{const:"parity",type:"string"},{const:"greedy",type:"string"}]},LatLongDef:{anyOf:[{$ref:"#/definitions/LatLongFieldDef"},{$ref:"#/definitions/DatumDef"}]},LatLongFieldDef:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{const:"quantitative",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.',type:"string"}},type:"object"},LayerRepeatMapping:{additionalProperties:!1,properties:{column:{description:"An array of fields to be repeated horizontally.",items:{type:"string"},type:"array"},layer:{description:"An array of fields to be repeated as layers.",items:{type:"string"},type:"array"},row:{description:"An array of fields to be repeated vertically.",items:{type:"string"},type:"array"}},required:["layer"],type:"object"},LayerRepeatSpec:{additionalProperties:!1,properties:{align:{anyOf:[{$ref:"#/definitions/LayoutAlign"},{$ref:"#/definitions/RowCol<LayoutAlign>"}],description:'The alignment to apply to grid rows and columns. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\nAlternatively, an object value of the form `{"row": string, "column": string}` can be used to supply different alignments for rows and columns.\n\n__Default value:__ `"all"`.'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{anyOf:[{type:"boolean"},{$ref:"#/definitions/RowCol<boolean>"}],description:'Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\nAn object value of the form `{"row": boolean, "column": boolean}` can be used to supply different centering values for rows and columns.\n\n__Default value:__ `false`'},columns:{description:"The number of columns to include in the view composition layout.\n\n__Default value__: `undefined` -- An infinite number of columns (a single row) will be assumed. This is equivalent to `hconcat` (for `concat`) and to using the `column` channel (for `facet` and `repeat`).\n\n__Note__:\n\n1) This property is only for:\n- the general (wrappable) `concat` operator (not `hconcat`/`vconcat`)\n- the `facet` and `repeat` operator with one field/repetition definition (without row/column nesting)\n\n2) Setting the `columns` to `1` is equivalent to `vconcat` (for `concat`) and to using the `row` channel (for `facet` and `repeat`).",type:"number"},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},description:{description:"Description of this mark for commenting purpose.",type:"string"},name:{description:"Name of the visualization for later reference.",type:"string"},repeat:{$ref:"#/definitions/LayerRepeatMapping",description:'Definition for fields to be repeated. One of: 1) An array of fields to be repeated. If `"repeat"` is an array, the field can be referred to as `{"repeat": "repeat"}`. The repeated views are laid out in a wrapped row. You can set the number of columns to control the wrapping. 2) An object that maps `"row"` and/or `"column"` to the listed fields to be repeated along the particular orientations. The objects `{"repeat": "row"}` and `{"repeat": "column"}` can be used to refer to the repeated field respectively.'},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{anyOf:[{type:"number"},{$ref:"#/definitions/RowCol<number>"}],description:'The spacing in pixels between sub-views of the composition operator. An object of the form `{"row": number, "column": number}` can be used to set different spacing values for rows and columns.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)'},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpecWithFrame"}],description:"A specification of the view that gets repeated."},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"}},required:["repeat","spec"],type:"object"},LayerSpec:{additionalProperties:!1,description:"A full layered plot specification, which may contains `encoding` and `projection` properties that will be applied to underlying unit (single-view) specifications.",properties:{data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},description:{description:"Description of this mark for commenting purpose.",type:"string"},encoding:{$ref:"#/definitions/SharedEncoding",description:"A shared key-value mapping between encoding channels and definition of fields in the underlying layers."},height:{anyOf:[{type:"number"},{const:"container",type:"string"},{$ref:"#/definitions/Step"}],description:'The height of a visualization.\n\n- For a plot with a continuous y-field, height should be a number.\n- For a plot with either a discrete y-field or no y-field, height can be either a number indicating a fixed height or an object in the form of `{step: number}` defining the height per discrete step. (No y-field is equivalent to having one discrete step.)\n- To enable responsive sizing on height, it should be set to `"container"`.\n\n__Default value:__ Based on `config.view.continuousHeight` for a plot with a continuous y-field and `config.view.discreteHeight` otherwise.\n\n__Note:__ For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the height of a single view and the `"container"` option cannot be used.\n\n__See also:__ [`height`](https://vega.github.io/vega-lite/docs/size.html) documentation.'},layer:{description:"Layer or single view specifications to be layered.\n\n__Note__: Specifications inside `layer` cannot use `row` and `column` channels as layering facet specifications is not allowed. Instead, use the [facet operator](https://vega.github.io/vega-lite/docs/facet.html) and place a layer inside a facet.",items:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},type:"array"},name:{description:"Name of the visualization for later reference.",type:"string"},projection:{$ref:"#/definitions/Projection",description:"An object defining properties of the geographic projection shared by underlying layers."},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},view:{$ref:"#/definitions/ViewBackground",description:`An object defining the view background's fill and stroke.

__Default value:__ none (transparent)`},width:{anyOf:[{type:"number"},{const:"container",type:"string"},{$ref:"#/definitions/Step"}],description:'The width of a visualization.\n\n- For a plot with a continuous x-field, width should be a number.\n- For a plot with either a discrete x-field or no x-field, width can be either a number indicating a fixed width or an object in the form of `{step: number}` defining the width per discrete step. (No x-field is equivalent to having one discrete step.)\n- To enable responsive sizing on width, it should be set to `"container"`.\n\n__Default value:__ Based on `config.view.continuousWidth` for a plot with a continuous x-field and `config.view.discreteWidth` otherwise.\n\n__Note:__ For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the width of a single view and the `"container"` option cannot be used.\n\n__See also:__ [`width`](https://vega.github.io/vega-lite/docs/size.html) documentation.'}},required:["layer"],type:"object"},LayoutAlign:{enum:["all","each","none"],type:"string"},Legend:{additionalProperties:!1,description:"Properties of a legend or boolean flag for determining whether to show it.",properties:{aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG group, removing the legend from the ARIA accessibility tree.\n\n__Default value:__ `true`',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},clipHeight:{anyOf:[{description:"The height in pixels to clip symbol legend entries and limit their size.",type:"number"},{$ref:"#/definitions/ExprRef"}]},columnPadding:{anyOf:[{description:"The horizontal padding in pixels between symbol legend entries.\n\n__Default value:__ `10`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},columns:{anyOf:[{description:"The number of columns in which to arrange symbol legend entries. A value of `0` or lower indicates a single row with one column per entry.",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadius:{anyOf:[{description:"Corner radius for the full legend.",type:"number"},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of this legend for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If the `aria` property is true, for SVG output the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute) will be set to this description. If the description is unspecified it will be automatically generated.',type:"string"},{$ref:"#/definitions/ExprRef"}]},direction:{$ref:"#/definitions/Orientation",description:'The direction of the legend, one of `"vertical"` or `"horizontal"`.\n\n__Default value:__\n- For top-/bottom-`orient`ed legends, `"horizontal"`\n- For left-/right-`orient`ed legends, `"vertical"`\n- For top/bottom-left/right-`orient`ed legends, `"horizontal"` for gradient legends and `"vertical"` for symbol legends.'},fillColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Background fill color for the full legend."},{$ref:"#/definitions/ExprRef"}]},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},gradientLength:{anyOf:[{description:"The length in pixels of the primary axis of a color gradient. This value corresponds to the height of a vertical gradient or the width of a horizontal gradient.\n\n__Default value:__ `200`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},gradientOpacity:{anyOf:[{description:"Opacity of the color gradient.",type:"number"},{$ref:"#/definitions/ExprRef"}]},gradientStrokeColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:'The color of the gradient stroke, can be in hex color code or regular color name.\n\n__Default value:__ `"lightGray"`.'},{$ref:"#/definitions/ExprRef"}]},gradientStrokeWidth:{anyOf:[{description:"The width of the gradient stroke, in pixels.\n\n__Default value:__ `0`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},gradientThickness:{anyOf:[{description:"The thickness in pixels of the color gradient. This value corresponds to the width of a vertical gradient or the height of a horizontal gradient.\n\n__Default value:__ `16`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},gridAlign:{anyOf:[{$ref:"#/definitions/LayoutAlign",description:'The alignment to apply to symbol legends rows and columns. The supported string values are `"all"`, `"each"` (the default), and `none`. For more information, see the [grid layout documentation](https://vega.github.io/vega/docs/layout).\n\n__Default value:__ `"each"`.'},{$ref:"#/definitions/ExprRef"}]},labelAlign:{anyOf:[{$ref:"#/definitions/Align",description:"The alignment of the legend label, can be left, center, or right."},{$ref:"#/definitions/ExprRef"}]},labelBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline",description:'The position of the baseline of legend label, can be `"top"`, `"middle"`, `"bottom"`, or `"alphabetic"`.\n\n__Default value:__ `"middle"`.'},{$ref:"#/definitions/ExprRef"}]},labelColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"The color of the legend label, can be in hex color code or regular color name."},{$ref:"#/definitions/ExprRef"}]},labelExpr:{description:"[Vega expression](https://vega.github.io/vega/docs/expressions/) for customizing labels.\n\n__Note:__ The label text and value can be assessed via the `label` and `value` properties of the legend's backing `datum` object.",type:"string"},labelFont:{anyOf:[{description:"The font of the legend label.",type:"string"},{$ref:"#/definitions/ExprRef"}]},labelFontSize:{anyOf:[{description:"The font size of legend label.\n\n__Default value:__ `10`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},labelFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"The font style of legend label."},{$ref:"#/definitions/ExprRef"}]},labelFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:"The font weight of legend label."},{$ref:"#/definitions/ExprRef"}]},labelLimit:{anyOf:[{description:"Maximum allowed pixel width of legend tick labels.\n\n__Default value:__ `160`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},labelOffset:{anyOf:[{description:"The offset of the legend label.\n\n__Default value:__ `4`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},labelOpacity:{anyOf:[{description:"Opacity of labels.",type:"number"},{$ref:"#/definitions/ExprRef"}]},labelOverlap:{anyOf:[{$ref:"#/definitions/LabelOverlap",description:'The strategy to use for resolving overlap of labels in gradient legends. If `false`, no overlap reduction is attempted. If set to `true` (default) or `"parity"`, a strategy of removing every other label is used. If set to `"greedy"`, a linear scan of the labels is performed, removing any label that overlaps with the last visible label (this often works better for log-scaled axes).\n\n__Default value:__ `true`.'},{$ref:"#/definitions/ExprRef"}]},labelPadding:{anyOf:[{description:"Padding in pixels between the legend and legend labels.",type:"number"},{$ref:"#/definitions/ExprRef"}]},labelSeparation:{anyOf:[{description:"The minimum separation that must be between label bounding boxes for them to be considered non-overlapping (default `0`). This property is ignored if *labelOverlap* resolution is not enabled.",type:"number"},{$ref:"#/definitions/ExprRef"}]},legendX:{anyOf:[{description:'Custom x-position for legend with orient "none".',type:"number"},{$ref:"#/definitions/ExprRef"}]},legendY:{anyOf:[{description:'Custom y-position for legend with orient "none".',type:"number"},{$ref:"#/definitions/ExprRef"}]},offset:{anyOf:[{description:"The offset in pixels by which to displace the legend from the data rectangle and axes.\n\n__Default value:__ `18`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},orient:{$ref:"#/definitions/LegendOrient",description:'The orientation of the legend, which determines how the legend is positioned within the scene. One of `"left"`, `"right"`, `"top"`, `"bottom"`, `"top-left"`, `"top-right"`, `"bottom-left"`, `"bottom-right"`, `"none"`.\n\n__Default value:__ `"right"`'},padding:{anyOf:[{description:"The padding between the border and content of the legend group.\n\n__Default value:__ `0`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},rowPadding:{anyOf:[{description:"The vertical padding in pixels between symbol legend entries.\n\n__Default value:__ `2`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Border stroke color for the full legend."},{$ref:"#/definitions/ExprRef"}]},symbolDash:{anyOf:[{description:"An array of alternating [stroke, space] lengths for dashed symbol strokes.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},symbolDashOffset:{anyOf:[{description:"The pixel offset at which to start drawing with the symbol stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolFillColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"The color of the legend symbol,"},{$ref:"#/definitions/ExprRef"}]},symbolLimit:{anyOf:[{description:"The maximum number of allowed entries for a symbol legend. Additional entries will be dropped.",type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolOffset:{anyOf:[{description:"Horizontal pixel offset for legend symbols.\n\n__Default value:__ `0`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolOpacity:{anyOf:[{description:"Opacity of the legend symbols.",type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolSize:{anyOf:[{description:"The size of the legend symbol, in pixels.\n\n__Default value:__ `100`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolStrokeColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Stroke color for legend symbols."},{$ref:"#/definitions/ExprRef"}]},symbolStrokeWidth:{anyOf:[{description:"The width of the symbol's stroke.\n\n__Default value:__ `1.5`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolType:{anyOf:[{$ref:"#/definitions/SymbolShape",description:'The symbol shape. One of the plotting shapes `circle` (default), `square`, `cross`, `diamond`, `triangle-up`, `triangle-down`, `triangle-right`, or `triangle-left`, the line symbol `stroke`, or one of the centered directional shapes `arrow`, `wedge`, or `triangle`. Alternatively, a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) can be provided. For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.\n\n__Default value:__ `"circle"`.'},{$ref:"#/definitions/ExprRef"}]},tickCount:{anyOf:[{$ref:"#/definitions/TickCount",description:"The desired number of tick values for quantitative legends."},{$ref:"#/definitions/ExprRef"}]},tickMinStep:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The minimum desired step between legend ticks, in terms of scale domain values. For example, a value of `1` indicates that ticks should not be less than 1 unit apart. If `tickMinStep` is specified, the `tickCount` value will be adjusted, if necessary, to enforce the minimum step value.\n\n__Default value__: `undefined`"},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},titleAlign:{anyOf:[{$ref:"#/definitions/Align",description:'Horizontal text alignment for legend titles.\n\n__Default value:__ `"left"`.'},{$ref:"#/definitions/ExprRef"}]},titleAnchor:{anyOf:[{$ref:"#/definitions/TitleAnchor",description:"Text anchor position for placing legend titles."},{$ref:"#/definitions/ExprRef"}]},titleBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline",description:'Vertical text baseline for legend titles.  One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the *lineHeight* rather than *fontSize* alone.\n\n__Default value:__ `"top"`.'},{$ref:"#/definitions/ExprRef"}]},titleColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"The color of the legend title, can be in hex color code or regular color name."},{$ref:"#/definitions/ExprRef"}]},titleFont:{anyOf:[{description:"The font of the legend title.",type:"string"},{$ref:"#/definitions/ExprRef"}]},titleFontSize:{anyOf:[{description:"The font size of the legend title.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titleFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"The font style of the legend title."},{$ref:"#/definitions/ExprRef"}]},titleFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'The font weight of the legend title. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},titleLimit:{anyOf:[{description:"Maximum allowed pixel width of legend titles.\n\n__Default value:__ `180`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},titleLineHeight:{anyOf:[{description:'Line height in pixels for multi-line title text or title text with `"line-top"` or `"line-bottom"` baseline.',type:"number"},{$ref:"#/definitions/ExprRef"}]},titleOpacity:{anyOf:[{description:"Opacity of the legend title.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titleOrient:{anyOf:[{$ref:"#/definitions/Orient",description:"Orientation of the legend title."},{$ref:"#/definitions/ExprRef"}]},titlePadding:{anyOf:[{description:"The padding, in pixels, between title and legend.\n\n__Default value:__ `5`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},type:{description:'The type of the legend. Use `"symbol"` to create a discrete legend and `"gradient"` for a continuous color gradient.\n\n__Default value:__ `"gradient"` for non-binned quantitative fields and temporal fields; `"symbol"` otherwise.',enum:["symbol","gradient"],type:"string"},values:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"},{items:{$ref:"#/definitions/DateTime"},type:"array"},{$ref:"#/definitions/ExprRef"}],description:"Explicitly set the visible legend values."},zindex:{description:"A non-negative integer indicating the z-index of the legend. If zindex is 0, legend should be drawn behind all chart elements. To put them in front, use zindex = 1.",minimum:0,type:"number"}},type:"object"},LegendBinding:{anyOf:[{const:"legend",type:"string"},{$ref:"#/definitions/LegendStreamBinding"}]},LegendConfig:{additionalProperties:!1,properties:{aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG group, removing the legend from the ARIA accessibility tree.\n\n__Default value:__ `true`',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},clipHeight:{anyOf:[{description:"The height in pixels to clip symbol legend entries and limit their size.",type:"number"},{$ref:"#/definitions/ExprRef"}]},columnPadding:{anyOf:[{description:"The horizontal padding in pixels between symbol legend entries.\n\n__Default value:__ `10`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},columns:{anyOf:[{description:"The number of columns in which to arrange symbol legend entries. A value of `0` or lower indicates a single row with one column per entry.",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadius:{anyOf:[{description:"Corner radius for the full legend.",type:"number"},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of this legend for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If the `aria` property is true, for SVG output the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute) will be set to this description. If the description is unspecified it will be automatically generated.',type:"string"},{$ref:"#/definitions/ExprRef"}]},direction:{$ref:"#/definitions/Orientation",description:'The direction of the legend, one of `"vertical"` or `"horizontal"`.\n\n__Default value:__\n- For top-/bottom-`orient`ed legends, `"horizontal"`\n- For left-/right-`orient`ed legends, `"vertical"`\n- For top/bottom-left/right-`orient`ed legends, `"horizontal"` for gradient legends and `"vertical"` for symbol legends.'},disable:{description:"Disable legend by default",type:"boolean"},fillColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Background fill color for the full legend."},{$ref:"#/definitions/ExprRef"}]},gradientDirection:{anyOf:[{$ref:"#/definitions/Orientation",description:'The default direction (`"horizontal"` or `"vertical"`) for gradient legends.\n\n__Default value:__ `"vertical"`.'},{$ref:"#/definitions/ExprRef"}]},gradientHorizontalMaxLength:{description:"Max legend length for a horizontal gradient when `config.legend.gradientLength` is undefined.\n\n__Default value:__ `200`",type:"number"},gradientHorizontalMinLength:{description:"Min legend length for a horizontal gradient when `config.legend.gradientLength` is undefined.\n\n__Default value:__ `100`",type:"number"},gradientLabelLimit:{anyOf:[{description:"The maximum allowed length in pixels of color ramp gradient labels.",type:"number"},{$ref:"#/definitions/ExprRef"}]},gradientLabelOffset:{anyOf:[{description:"Vertical offset in pixels for color ramp gradient labels.\n\n__Default value:__ `2`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},gradientLength:{anyOf:[{description:"The length in pixels of the primary axis of a color gradient. This value corresponds to the height of a vertical gradient or the width of a horizontal gradient.\n\n__Default value:__ `200`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},gradientOpacity:{anyOf:[{description:"Opacity of the color gradient.",type:"number"},{$ref:"#/definitions/ExprRef"}]},gradientStrokeColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:'The color of the gradient stroke, can be in hex color code or regular color name.\n\n__Default value:__ `"lightGray"`.'},{$ref:"#/definitions/ExprRef"}]},gradientStrokeWidth:{anyOf:[{description:"The width of the gradient stroke, in pixels.\n\n__Default value:__ `0`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},gradientThickness:{anyOf:[{description:"The thickness in pixels of the color gradient. This value corresponds to the width of a vertical gradient or the height of a horizontal gradient.\n\n__Default value:__ `16`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},gradientVerticalMaxLength:{description:"Max legend length for a vertical gradient when `config.legend.gradientLength` is undefined.\n\n__Default value:__ `200`",type:"number"},gradientVerticalMinLength:{description:"Min legend length for a vertical gradient when `config.legend.gradientLength` is undefined.\n\n__Default value:__ `100`",type:"number"},gridAlign:{anyOf:[{$ref:"#/definitions/LayoutAlign",description:'The alignment to apply to symbol legends rows and columns. The supported string values are `"all"`, `"each"` (the default), and `none`. For more information, see the [grid layout documentation](https://vega.github.io/vega/docs/layout).\n\n__Default value:__ `"each"`.'},{$ref:"#/definitions/ExprRef"}]},labelAlign:{anyOf:[{$ref:"#/definitions/Align",description:"The alignment of the legend label, can be left, center, or right."},{$ref:"#/definitions/ExprRef"}]},labelBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline",description:'The position of the baseline of legend label, can be `"top"`, `"middle"`, `"bottom"`, or `"alphabetic"`.\n\n__Default value:__ `"middle"`.'},{$ref:"#/definitions/ExprRef"}]},labelColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"The color of the legend label, can be in hex color code or regular color name."},{$ref:"#/definitions/ExprRef"}]},labelFont:{anyOf:[{description:"The font of the legend label.",type:"string"},{$ref:"#/definitions/ExprRef"}]},labelFontSize:{anyOf:[{description:"The font size of legend label.\n\n__Default value:__ `10`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},labelFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"The font style of legend label."},{$ref:"#/definitions/ExprRef"}]},labelFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:"The font weight of legend label."},{$ref:"#/definitions/ExprRef"}]},labelLimit:{anyOf:[{description:"Maximum allowed pixel width of legend tick labels.\n\n__Default value:__ `160`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},labelOffset:{anyOf:[{description:"The offset of the legend label.\n\n__Default value:__ `4`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},labelOpacity:{anyOf:[{description:"Opacity of labels.",type:"number"},{$ref:"#/definitions/ExprRef"}]},labelOverlap:{anyOf:[{$ref:"#/definitions/LabelOverlap"},{$ref:"#/definitions/ExprRef"}],description:'The strategy to use for resolving overlap of labels in gradient legends. If `false`, no overlap reduction is attempted. If set to `true` or `"parity"`, a strategy of removing every other label is used. If set to `"greedy"`, a linear scan of the labels is performed, removing any label that overlaps with the last visible label (this often works better for log-scaled axes).\n\n__Default value:__ `"greedy"` for `log scales otherwise `true`.'},labelPadding:{anyOf:[{description:"Padding in pixels between the legend and legend labels.",type:"number"},{$ref:"#/definitions/ExprRef"}]},labelSeparation:{anyOf:[{description:"The minimum separation that must be between label bounding boxes for them to be considered non-overlapping (default `0`). This property is ignored if *labelOverlap* resolution is not enabled.",type:"number"},{$ref:"#/definitions/ExprRef"}]},layout:{$ref:"#/definitions/ExprRef"},legendX:{anyOf:[{description:'Custom x-position for legend with orient "none".',type:"number"},{$ref:"#/definitions/ExprRef"}]},legendY:{anyOf:[{description:'Custom y-position for legend with orient "none".',type:"number"},{$ref:"#/definitions/ExprRef"}]},offset:{anyOf:[{description:"The offset in pixels by which to displace the legend from the data rectangle and axes.\n\n__Default value:__ `18`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},orient:{$ref:"#/definitions/LegendOrient",description:'The orientation of the legend, which determines how the legend is positioned within the scene. One of `"left"`, `"right"`, `"top"`, `"bottom"`, `"top-left"`, `"top-right"`, `"bottom-left"`, `"bottom-right"`, `"none"`.\n\n__Default value:__ `"right"`'},padding:{anyOf:[{description:"The padding between the border and content of the legend group.\n\n__Default value:__ `0`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},rowPadding:{anyOf:[{description:"The vertical padding in pixels between symbol legend entries.\n\n__Default value:__ `2`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Border stroke color for the full legend."},{$ref:"#/definitions/ExprRef"}]},strokeDash:{anyOf:[{description:"Border stroke dash pattern for the full legend.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},strokeWidth:{anyOf:[{description:"Border stroke width for the full legend.",type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolBaseFillColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:'Default fill color for legend symbols. Only applied if there is no `"fill"` scale color encoding for the legend.\n\n__Default value:__ `"transparent"`.'},{$ref:"#/definitions/ExprRef"}]},symbolBaseStrokeColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:'Default stroke color for legend symbols. Only applied if there is no `"fill"` scale color encoding for the legend.\n\n__Default value:__ `"gray"`.'},{$ref:"#/definitions/ExprRef"}]},symbolDash:{anyOf:[{description:"An array of alternating [stroke, space] lengths for dashed symbol strokes.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},symbolDashOffset:{anyOf:[{description:"The pixel offset at which to start drawing with the symbol stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolDirection:{anyOf:[{$ref:"#/definitions/Orientation",description:'The default direction (`"horizontal"` or `"vertical"`) for symbol legends.\n\n__Default value:__ `"vertical"`.'},{$ref:"#/definitions/ExprRef"}]},symbolFillColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"The color of the legend symbol,"},{$ref:"#/definitions/ExprRef"}]},symbolLimit:{anyOf:[{description:"The maximum number of allowed entries for a symbol legend. Additional entries will be dropped.",type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolOffset:{anyOf:[{description:"Horizontal pixel offset for legend symbols.\n\n__Default value:__ `0`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolOpacity:{anyOf:[{description:"Opacity of the legend symbols.",type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolSize:{anyOf:[{description:"The size of the legend symbol, in pixels.\n\n__Default value:__ `100`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolStrokeColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Stroke color for legend symbols."},{$ref:"#/definitions/ExprRef"}]},symbolStrokeWidth:{anyOf:[{description:"The width of the symbol's stroke.\n\n__Default value:__ `1.5`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},symbolType:{anyOf:[{$ref:"#/definitions/SymbolShape",description:'The symbol shape. One of the plotting shapes `circle` (default), `square`, `cross`, `diamond`, `triangle-up`, `triangle-down`, `triangle-right`, or `triangle-left`, the line symbol `stroke`, or one of the centered directional shapes `arrow`, `wedge`, or `triangle`. Alternatively, a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) can be provided. For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.\n\n__Default value:__ `"circle"`.'},{$ref:"#/definitions/ExprRef"}]},tickCount:{anyOf:[{$ref:"#/definitions/TickCount",description:"The desired number of tick values for quantitative legends."},{$ref:"#/definitions/ExprRef"}]},title:{description:"Set to null to disable title for the axis, legend, or header.",type:"null"},titleAlign:{anyOf:[{$ref:"#/definitions/Align",description:'Horizontal text alignment for legend titles.\n\n__Default value:__ `"left"`.'},{$ref:"#/definitions/ExprRef"}]},titleAnchor:{anyOf:[{$ref:"#/definitions/TitleAnchor",description:"Text anchor position for placing legend titles."},{$ref:"#/definitions/ExprRef"}]},titleBaseline:{anyOf:[{$ref:"#/definitions/TextBaseline",description:'Vertical text baseline for legend titles.  One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the *lineHeight* rather than *fontSize* alone.\n\n__Default value:__ `"top"`.'},{$ref:"#/definitions/ExprRef"}]},titleColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"The color of the legend title, can be in hex color code or regular color name."},{$ref:"#/definitions/ExprRef"}]},titleFont:{anyOf:[{description:"The font of the legend title.",type:"string"},{$ref:"#/definitions/ExprRef"}]},titleFontSize:{anyOf:[{description:"The font size of the legend title.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titleFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"The font style of the legend title."},{$ref:"#/definitions/ExprRef"}]},titleFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'The font weight of the legend title. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},titleLimit:{anyOf:[{description:"Maximum allowed pixel width of legend titles.\n\n__Default value:__ `180`.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},titleLineHeight:{anyOf:[{description:'Line height in pixels for multi-line title text or title text with `"line-top"` or `"line-bottom"` baseline.',type:"number"},{$ref:"#/definitions/ExprRef"}]},titleOpacity:{anyOf:[{description:"Opacity of the legend title.",type:"number"},{$ref:"#/definitions/ExprRef"}]},titleOrient:{anyOf:[{$ref:"#/definitions/Orient",description:"Orientation of the legend title."},{$ref:"#/definitions/ExprRef"}]},titlePadding:{anyOf:[{description:"The padding, in pixels, between title and legend.\n\n__Default value:__ `5`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},unselectedOpacity:{description:`The opacity of unselected legend entries.

__Default value:__ 0.35.`,type:"number"},zindex:{anyOf:[{description:"The integer z-index indicating the layering of the legend group relative to other axis, mark, and legend groups.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]}},type:"object"},LegendOrient:{enum:["none","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],type:"string"},LegendResolveMap:{additionalProperties:!1,properties:{angle:{$ref:"#/definitions/ResolveMode"},color:{$ref:"#/definitions/ResolveMode"},fill:{$ref:"#/definitions/ResolveMode"},fillOpacity:{$ref:"#/definitions/ResolveMode"},opacity:{$ref:"#/definitions/ResolveMode"},shape:{$ref:"#/definitions/ResolveMode"},size:{$ref:"#/definitions/ResolveMode"},stroke:{$ref:"#/definitions/ResolveMode"},strokeDash:{$ref:"#/definitions/ResolveMode"},strokeOpacity:{$ref:"#/definitions/ResolveMode"},strokeWidth:{$ref:"#/definitions/ResolveMode"},time:{$ref:"#/definitions/ResolveMode"}},type:"object"},LegendStreamBinding:{additionalProperties:!1,properties:{legend:{anyOf:[{type:"string"},{$ref:"#/definitions/Stream"}]}},required:["legend"],type:"object"},LineConfig:{additionalProperties:!1,properties:{align:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:'The horizontal alignment of the text or ranged marks (area, bar, image, rect, rule). One of `"left"`, `"right"`, `"center"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},angle:{anyOf:[{description:"The rotation angle of the text, in degrees.",maximum:360,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG element, removing the mark item from the ARIA accessibility tree.',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},ariaRole:{anyOf:[{description:'Sets the type of user interface element of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "role" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},ariaRoleDescription:{anyOf:[{description:'A human-readable, author-localized description for the role of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "aria-roledescription" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},aspect:{anyOf:[{description:"Whether to keep aspect ratio of image marks.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},baseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'For text marks, the vertical text baseline. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, `"line-bottom"`, or an expression reference that provides one of the valid values. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `lineHeight` rather than `fontSize` alone.\n\nFor range marks, the vertical alignment of the marks. One of `"top"`, `"middle"`, `"bottom"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},blend:{anyOf:[{$ref:"#/definitions/Blend",description:'The color blend mode for drawing an item on its current background. Any valid [CSS mix-blend-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode) value can be used.\n\n__Default value: `"source-over"`'},{$ref:"#/definitions/ExprRef"}]},color:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{$ref:"#/definitions/ExprRef"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'},cornerRadius:{anyOf:[{description:"The radius in pixels of rounded rectangles or arcs' corners.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' top right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' top left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cursor:{anyOf:[{$ref:"#/definitions/Cursor",description:"The mouse cursor used over the mark. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used."},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute).',type:"string"},{$ref:"#/definitions/ExprRef"}]},dir:{anyOf:[{$ref:"#/definitions/TextDirection",description:'The direction of the text. One of `"ltr"` (left-to-right) or `"rtl"` (right-to-left). This property determines on which side is truncated in response to the limit parameter.\n\n__Default value:__ `"ltr"`'},{$ref:"#/definitions/ExprRef"}]},dx:{anyOf:[{description:"The horizontal offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},dy:{anyOf:[{description:"The vertical offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},ellipsis:{anyOf:[{description:'The ellipsis string for text truncated in response to the limit parameter.\n\n__Default value:__ `""`',type:"string"},{$ref:"#/definitions/ExprRef"}]},endAngle:{anyOf:[{description:"The end angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},fill:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default fill color. This property has higher precedence than `config.color`. Set to `null` to remove fill.\n\n__Default value:__ (None)"},fillOpacity:{anyOf:[{description:"The fill opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},filled:{description:"Whether the mark's color should be used as fill color instead of stroke color.\n\n__Default value:__ `false` for all `point`, `line`, and `rule` marks as well as `geoshape` marks for [`graticule`](https://vega.github.io/vega-lite/docs/data.html#graticule) data sources; otherwise, `true`.\n\n__Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).",type:"boolean"},font:{anyOf:[{description:'The typeface to set the text in (e.g., `"Helvetica Neue"`).',type:"string"},{$ref:"#/definitions/ExprRef"}]},fontSize:{anyOf:[{description:"The font size, in pixels.\n\n__Default value:__ `11`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},fontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:'The font style (e.g., `"italic"`).'},{$ref:"#/definitions/ExprRef"}]},fontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'The font weight. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},height:{anyOf:[{description:"Height of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},href:{anyOf:[{$ref:"#/definitions/URI",description:"A URL to load upon mouse click. If defined, the mark acts as a hyperlink."},{$ref:"#/definitions/ExprRef"}]},innerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The inner radius in pixels of arc marks. `innerRadius` is an alias for `radius2`.\n\n__Default value:__ `0`",minimum:0},interpolate:{anyOf:[{$ref:"#/definitions/Interpolate",description:'The line interpolation method to use for line and area marks. One of the following:\n- `"linear"`: piecewise linear segments, as in a polyline.\n- `"linear-closed"`: close the linear segments to form a polygon.\n- `"step"`: alternate between horizontal and vertical segments, as in a step function.\n- `"step-before"`: alternate between vertical and horizontal segments, as in a step function.\n- `"step-after"`: alternate between horizontal and vertical segments, as in a step function.\n- `"basis"`: a B-spline, with control point duplication on the ends.\n- `"basis-open"`: an open B-spline; may not intersect the start or end.\n- `"basis-closed"`: a closed B-spline, as in a loop.\n- `"cardinal"`: a Cardinal spline, with control point duplication on the ends.\n- `"cardinal-open"`: an open Cardinal spline; may not intersect the start or end, but will intersect other control points.\n- `"cardinal-closed"`: a closed Cardinal spline, as in a loop.\n- `"bundle"`: equivalent to basis, except the tension parameter is used to straighten the spline.\n- `"monotone"`: cubic interpolation that preserves monotonicity in y.'},{$ref:"#/definitions/ExprRef"}]},invalid:{anyOf:[{$ref:"#/definitions/MarkInvalidDataMode"},{type:"null"}],description:'Invalid data mode, which defines how the marks and corresponding scales should represent invalid values (`null` and `NaN` in continuous scales *without* defined output for invalid values).\n\n- `"filter"`  *Exclude* all invalid values from the visualization\'s *marks* and *scales*. For path marks (for line, area, trail), this option will create paths that connect valid points, as if the data rows with invalid values do not exist.\n\n- `"break-paths-filter-domains"`  Break path marks (for line, area, trail) at invalid values.  For non-path marks, this is equivalent to `"filter"`. All *scale* domains will *exclude* these filtered data points.\n\n- `"break-paths-show-domains"`  Break paths (for line, area, trail) at invalid values.  Hide invalid values for non-path marks. All *scale* domains will *include* these filtered data points (for both path and non-path marks).\n\n- `"show"` or `null`  Show all data points in the marks and scale domains. Each scale will use the output for invalid values defined in `config.scale.invalid` or, if unspecified, by default invalid values will produce the same visual values as zero (if the scale includes zero) or the minimum value (if the scale does not include zero).\n\n- `"break-paths-show-path-domains"` (default)  This is equivalent to `"break-paths-show-domains"` for path-based marks (line/area/trail) and `"filter"` for non-path marks.\n\n__Note__: If any channel\'s scale has an output for invalid values defined in `config.scale.invalid`, all values for the scales will be considered "valid" since they can produce a reasonable output for the scales. Thus, fields for such channels will not be filtered and will not cause path breaks.'},limit:{anyOf:[{description:"The maximum length of the text mark in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0` -- indicating no limit",type:"number"},{$ref:"#/definitions/ExprRef"}]},lineBreak:{anyOf:[{description:"A delimiter, such as a newline character, upon which to break text strings into multiple lines. This property is ignored if the text is array-valued.",type:"string"},{$ref:"#/definitions/ExprRef"}]},lineHeight:{anyOf:[{description:"The line height in pixels (the spacing between subsequent lines of text) for multi-line text marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},opacity:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The overall opacity (value between [0,1]).\n\n__Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.",maximum:1,minimum:0},order:{description:"For line and trail marks, this `order` property can be set to `null` or `false` to make the lines use the original order in the data sources.",type:["null","boolean"]},orient:{$ref:"#/definitions/Orientation",description:`The orientation of a non-stacked bar, tick, area, and line charts. The value is either horizontal (default) or vertical.
- For bar, rule and tick, this determines whether the size of the bar and tick should be applied to x or y dimension.
- For area, this property determines the orient property of the Vega output.
- For line and trail marks, this property determines the sort order of the points in the line if \`config.sortLineBy\` is not specified. For stacked charts, this is always determined by the orientation of the stack; therefore explicitly specified value will be ignored.`},outerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The outer radius in pixels of arc marks. `outerRadius` is an alias for `radius`.\n\n__Default value:__ `0`",minimum:0},padAngle:{anyOf:[{description:"The angular padding applied to sides of the arc, in radians.",type:"number"},{$ref:"#/definitions/ExprRef"}]},point:{anyOf:[{type:"boolean"},{$ref:"#/definitions/OverlayMarkDef"},{const:"transparent",type:"string"}],description:'A flag for overlaying points on top of line or area marks, or an object defining the properties of the overlayed points.\n\n- If this property is `"transparent"`, transparent points will be used (for enhancing tooltips and selections).\n\n- If this property is an empty object (`{}`) or `true`, filled points with default properties will be used.\n\n- If this property is `false`, no points would be automatically added to line or area marks.\n\n__Default value:__ `false`.'},radius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"For arc mark, the primary (outer) radius in pixels.\n\nFor text marks, polar coordinate radial offset, in pixels, of the text from the origin determined by the `x` and `y` properties.\n\n__Default value:__ `min(plot_width, plot_height)/2`",minimum:0},radius2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The secondary (inner) radius in pixels of arc marks.\n\n__Default value:__ `0`",minimum:0},shape:{anyOf:[{anyOf:[{$ref:"#/definitions/SymbolShape"},{type:"string"}],description:'Shape of the point marks. Supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- the line symbol `"stroke"`\n- centered directional shapes `"arrow"`, `"wedge"`, or `"triangle"`\n- a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) (For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.)\n\n__Default value:__ `"circle"`'},{$ref:"#/definitions/ExprRef"}]},size:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default size for marks.\n- For `point`/`circle`/`square`, this represents the pixel area of the marks. Note that this value sets the area of the symbol; the side lengths will increase with the square root of this value.\n- For `bar`, this represents the band size of the bar, in pixels.\n- For `text`, this represents the font size, in pixels.\n\n__Default value:__\n- `30` for point, circle, square marks; width/height's `step`\n- `2` for bar marks with discrete dimensions;\n- `5` for bar marks with continuous dimensions;\n- `11` for text marks.",minimum:0},smooth:{anyOf:[{description:"A boolean flag (default true) indicating if the image should be smoothed when resized. If false, individual pixels should be scaled directly rather than interpolated with smoothing. For SVG rendering, this option may not work in some browsers due to lack of standardization.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},startAngle:{anyOf:[{description:"The start angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},stroke:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default stroke color. This property has higher precedence than `config.color`. Set to `null` to remove stroke.\n\n__Default value:__ (None)"},strokeCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for line ending style. One of `"butt"`, `"round"`, or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},strokeDash:{anyOf:[{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},strokeDashOffset:{anyOf:[{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeJoin:{anyOf:[{$ref:"#/definitions/StrokeJoin",description:'The stroke line join method. One of `"miter"`, `"round"` or `"bevel"`.\n\n__Default value:__ `"miter"`'},{$ref:"#/definitions/ExprRef"}]},strokeMiterLimit:{anyOf:[{description:"The miter limit at which to bevel a line join.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOffset:{anyOf:[{description:"The offset in pixels at which to draw the group stroke and fill. If unspecified, the default behavior is to dynamically offset stroked groups such that 1 pixel stroke widths align with the pixel grid.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOpacity:{anyOf:[{description:"The stroke opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeWidth:{anyOf:[{description:"The stroke width, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},tension:{anyOf:[{description:"Depending on the interpolation type, sets the tension parameter (for line and area marks).",type:"number"},{$ref:"#/definitions/ExprRef"}]},text:{anyOf:[{$ref:"#/definitions/Text",description:"Placeholder text if the `text` channel is not specified"},{$ref:"#/definitions/ExprRef"}]},theta:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:`- For arc marks, the arc length in radians if theta2 is not specified, otherwise the start arc angle. (A value of 0 indicates up or north, increasing values proceed clockwise.)

- For text marks, polar coordinate angle in radians.`,maximum:360,minimum:0},theta2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The end angle of arc marks in radians. A value of 0 indicates up or north, increasing values proceed clockwise."},time:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}]},timeUnitBandPosition:{description:"Default relative band position for a time unit. If set to `0`, the marks will be positioned at the beginning of the time unit band step. If set to `0.5`, the marks will be positioned in the middle of the time unit band step.",type:"number"},timeUnitBandSize:{description:"Default relative band size for a time unit. If set to `1`, the bandwidth of the marks will be equal to the time unit band step. If set to `0.5`, bandwidth of the marks will be half of the time unit band step.",type:"number"},tooltip:{anyOf:[{type:"number"},{type:"string"},{type:"boolean"},{$ref:"#/definitions/TooltipContent"},{$ref:"#/definitions/ExprRef"},{type:"null"}],description:'The tooltip text string to show upon mouse hover or an object defining which fields should the tooltip be derived from.\n\n- If `tooltip` is `true` or `{"content": "encoding"}`, then all fields from `encoding` will be used.\n- If `tooltip` is `{"content": "data"}`, then all fields that appear in the highlighted data point will be used.\n- If set to `null` or `false`, then no tooltip will be used.\n\nSee the [`tooltip`](https://vega.github.io/vega-lite/docs/tooltip.html) documentation for a detailed discussion about tooltip  in Vega-Lite.\n\n__Default value:__ `null`'},url:{anyOf:[{$ref:"#/definitions/URI",description:"The URL of the image file for image marks."},{$ref:"#/definitions/ExprRef"}]},width:{anyOf:[{description:"Width of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},x:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X coordinates of the marks, or width of horizontal `"bar"` and `"area"` without specified `x2` or `width`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},y:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y coordinates of the marks, or height of vertical `"bar"` and `"area"` without specified `y2` or `height`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'}},type:"object"},LineString:{additionalProperties:!1,description:"LineString geometry object. https://tools.ietf.org/html/rfc7946#section-3.1.4",properties:{bbox:{$ref:"#/definitions/BBox",description:"Bounding box of the coordinate range of the object's Geometries, Features, or Feature Collections. https://tools.ietf.org/html/rfc7946#section-5"},coordinates:{items:{$ref:"#/definitions/Position"},type:"array"},type:{const:"LineString",description:"Specifies the type of GeoJSON object.",type:"string"}},required:["coordinates","type"],type:"object"},LinearGradient:{additionalProperties:!1,properties:{gradient:{const:"linear",description:'The type of gradient. Use `"linear"` for a linear gradient.',type:"string"},id:{type:"string"},stops:{description:"An array of gradient stops defining the gradient color sequence.",items:{$ref:"#/definitions/GradientStop"},type:"array"},x1:{description:"The starting x-coordinate, in normalized [0, 1] coordinates, of the linear gradient.\n\n__Default value:__ `0`",type:"number"},x2:{description:"The ending x-coordinate, in normalized [0, 1] coordinates, of the linear gradient.\n\n__Default value:__ `1`",type:"number"},y1:{description:"The starting y-coordinate, in normalized [0, 1] coordinates, of the linear gradient.\n\n__Default value:__ `0`",type:"number"},y2:{description:"The ending y-coordinate, in normalized [0, 1] coordinates, of the linear gradient.\n\n__Default value:__ `0`",type:"number"}},required:["gradient","stops"],type:"object"},LocalMultiTimeUnit:{enum:["yearquarter","yearquartermonth","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","yearweek","yearweekday","yearweekdayhours","yearweekdayhoursminutes","yearweekdayhoursminutesseconds","yeardayofyear","quartermonth","monthdate","monthdatehours","monthdatehoursminutes","monthdatehoursminutesseconds","weekday","weekdayhours","weekdayhoursminutes","weekdayhoursminutesseconds","dayhours","dayhoursminutes","dayhoursminutesseconds","hoursminutes","hoursminutesseconds","minutesseconds","secondsmilliseconds"],type:"string"},LocalSingleTimeUnit:{enum:["year","quarter","month","week","day","dayofyear","date","hours","minutes","seconds","milliseconds"],type:"string"},Locale:{additionalProperties:!1,properties:{number:{$ref:"#/definitions/NumberLocale"},time:{$ref:"#/definitions/TimeLocale"}},type:"object"},LoessTransform:{additionalProperties:!1,properties:{as:{description:`The output field names for the smoothed points generated by the loess transform.

__Default value:__ The field names of the input x and y values.`,items:{$ref:"#/definitions/FieldName"},maxItems:2,minItems:2,type:"array"},bandwidth:{description:"A bandwidth parameter in the range `[0, 1]` that determines the amount of smoothing.\n\n__Default value:__ `0.3`",type:"number"},groupby:{description:"The data fields to group by. If not specified, a single group containing all data objects will be used.",items:{$ref:"#/definitions/FieldName"},type:"array"},loess:{$ref:"#/definitions/FieldName",description:"The data field of the dependent variable to smooth."},on:{$ref:"#/definitions/FieldName",description:"The data field of the independent variable to use a predictor."}},required:["loess","on"],type:"object"},"LogicalAnd<Predicate>":{additionalProperties:!1,properties:{and:{items:{$ref:"#/definitions/PredicateComposition"},type:"array"}},required:["and"],type:"object"},PredicateComposition:{anyOf:[{$ref:"#/definitions/LogicalNot<Predicate>"},{$ref:"#/definitions/LogicalAnd<Predicate>"},{$ref:"#/definitions/LogicalOr<Predicate>"},{$ref:"#/definitions/Predicate"}]},"LogicalNot<Predicate>":{additionalProperties:!1,properties:{not:{$ref:"#/definitions/PredicateComposition"}},required:["not"],type:"object"},"LogicalOr<Predicate>":{additionalProperties:!1,properties:{or:{items:{$ref:"#/definitions/PredicateComposition"},type:"array"}},required:["or"],type:"object"},LookupData:{additionalProperties:!1,properties:{data:{$ref:"#/definitions/Data",description:"Secondary data source to lookup in."},fields:{description:"Fields in foreign data or selection to lookup. If not specified, the entire object is queried.",items:{$ref:"#/definitions/FieldName"},type:"array"},key:{$ref:"#/definitions/FieldName",description:"Key in data to lookup."}},required:["data","key"],type:"object"},LookupSelection:{additionalProperties:!1,properties:{fields:{description:"Fields in foreign data or selection to lookup. If not specified, the entire object is queried.",items:{$ref:"#/definitions/FieldName"},type:"array"},key:{$ref:"#/definitions/FieldName",description:"Key in data to lookup."},param:{$ref:"#/definitions/ParameterName",description:"Selection parameter name to look up."}},required:["key","param"],type:"object"},LookupTransform:{additionalProperties:!1,properties:{as:{anyOf:[{$ref:"#/definitions/FieldName"},{items:{$ref:"#/definitions/FieldName"},type:"array"}],description:"The output fields on which to store the looked up data values.\n\nFor data lookups, this property may be left blank if `from.fields` has been specified (those field names will be used); if `from.fields` has not been specified, `as` must be a string.\n\nFor selection lookups, this property is optional: if unspecified, looked up values will be stored under a property named for the selection; and if specified, it must correspond to `from.fields`."},default:{description:"The default value to use if lookup fails.\n\n__Default value:__ `null`"},from:{anyOf:[{$ref:"#/definitions/LookupData"},{$ref:"#/definitions/LookupSelection"}],description:"Data source or selection for secondary data reference."},lookup:{description:"Key in primary data source.",type:"string"}},required:["lookup","from"],type:"object"},Mark:{description:"All types of primitive marks.",enum:["arc","area","bar","image","line","point","rect","rule","text","tick","trail","circle","square","geoshape"],type:"string"},MarkConfig:{additionalProperties:!1,properties:{align:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:'The horizontal alignment of the text or ranged marks (area, bar, image, rect, rule). One of `"left"`, `"right"`, `"center"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},angle:{anyOf:[{description:"The rotation angle of the text, in degrees.",maximum:360,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG element, removing the mark item from the ARIA accessibility tree.',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},ariaRole:{anyOf:[{description:'Sets the type of user interface element of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "role" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},ariaRoleDescription:{anyOf:[{description:'A human-readable, author-localized description for the role of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "aria-roledescription" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},aspect:{anyOf:[{description:"Whether to keep aspect ratio of image marks.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},baseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'For text marks, the vertical text baseline. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, `"line-bottom"`, or an expression reference that provides one of the valid values. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `lineHeight` rather than `fontSize` alone.\n\nFor range marks, the vertical alignment of the marks. One of `"top"`, `"middle"`, `"bottom"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},blend:{anyOf:[{$ref:"#/definitions/Blend",description:'The color blend mode for drawing an item on its current background. Any valid [CSS mix-blend-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode) value can be used.\n\n__Default value: `"source-over"`'},{$ref:"#/definitions/ExprRef"}]},color:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{$ref:"#/definitions/ExprRef"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'},cornerRadius:{anyOf:[{description:"The radius in pixels of rounded rectangles or arcs' corners.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' top right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' top left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cursor:{anyOf:[{$ref:"#/definitions/Cursor",description:"The mouse cursor used over the mark. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used."},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute).',type:"string"},{$ref:"#/definitions/ExprRef"}]},dir:{anyOf:[{$ref:"#/definitions/TextDirection",description:'The direction of the text. One of `"ltr"` (left-to-right) or `"rtl"` (right-to-left). This property determines on which side is truncated in response to the limit parameter.\n\n__Default value:__ `"ltr"`'},{$ref:"#/definitions/ExprRef"}]},dx:{anyOf:[{description:"The horizontal offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},dy:{anyOf:[{description:"The vertical offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},ellipsis:{anyOf:[{description:'The ellipsis string for text truncated in response to the limit parameter.\n\n__Default value:__ `""`',type:"string"},{$ref:"#/definitions/ExprRef"}]},endAngle:{anyOf:[{description:"The end angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},fill:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default fill color. This property has higher precedence than `config.color`. Set to `null` to remove fill.\n\n__Default value:__ (None)"},fillOpacity:{anyOf:[{description:"The fill opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},filled:{description:"Whether the mark's color should be used as fill color instead of stroke color.\n\n__Default value:__ `false` for all `point`, `line`, and `rule` marks as well as `geoshape` marks for [`graticule`](https://vega.github.io/vega-lite/docs/data.html#graticule) data sources; otherwise, `true`.\n\n__Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).",type:"boolean"},font:{anyOf:[{description:'The typeface to set the text in (e.g., `"Helvetica Neue"`).',type:"string"},{$ref:"#/definitions/ExprRef"}]},fontSize:{anyOf:[{description:"The font size, in pixels.\n\n__Default value:__ `11`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},fontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:'The font style (e.g., `"italic"`).'},{$ref:"#/definitions/ExprRef"}]},fontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'The font weight. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},height:{anyOf:[{description:"Height of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},href:{anyOf:[{$ref:"#/definitions/URI",description:"A URL to load upon mouse click. If defined, the mark acts as a hyperlink."},{$ref:"#/definitions/ExprRef"}]},innerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The inner radius in pixels of arc marks. `innerRadius` is an alias for `radius2`.\n\n__Default value:__ `0`",minimum:0},interpolate:{anyOf:[{$ref:"#/definitions/Interpolate",description:'The line interpolation method to use for line and area marks. One of the following:\n- `"linear"`: piecewise linear segments, as in a polyline.\n- `"linear-closed"`: close the linear segments to form a polygon.\n- `"step"`: alternate between horizontal and vertical segments, as in a step function.\n- `"step-before"`: alternate between vertical and horizontal segments, as in a step function.\n- `"step-after"`: alternate between horizontal and vertical segments, as in a step function.\n- `"basis"`: a B-spline, with control point duplication on the ends.\n- `"basis-open"`: an open B-spline; may not intersect the start or end.\n- `"basis-closed"`: a closed B-spline, as in a loop.\n- `"cardinal"`: a Cardinal spline, with control point duplication on the ends.\n- `"cardinal-open"`: an open Cardinal spline; may not intersect the start or end, but will intersect other control points.\n- `"cardinal-closed"`: a closed Cardinal spline, as in a loop.\n- `"bundle"`: equivalent to basis, except the tension parameter is used to straighten the spline.\n- `"monotone"`: cubic interpolation that preserves monotonicity in y.'},{$ref:"#/definitions/ExprRef"}]},invalid:{anyOf:[{$ref:"#/definitions/MarkInvalidDataMode"},{type:"null"}],description:'Invalid data mode, which defines how the marks and corresponding scales should represent invalid values (`null` and `NaN` in continuous scales *without* defined output for invalid values).\n\n- `"filter"`  *Exclude* all invalid values from the visualization\'s *marks* and *scales*. For path marks (for line, area, trail), this option will create paths that connect valid points, as if the data rows with invalid values do not exist.\n\n- `"break-paths-filter-domains"`  Break path marks (for line, area, trail) at invalid values.  For non-path marks, this is equivalent to `"filter"`. All *scale* domains will *exclude* these filtered data points.\n\n- `"break-paths-show-domains"`  Break paths (for line, area, trail) at invalid values.  Hide invalid values for non-path marks. All *scale* domains will *include* these filtered data points (for both path and non-path marks).\n\n- `"show"` or `null`  Show all data points in the marks and scale domains. Each scale will use the output for invalid values defined in `config.scale.invalid` or, if unspecified, by default invalid values will produce the same visual values as zero (if the scale includes zero) or the minimum value (if the scale does not include zero).\n\n- `"break-paths-show-path-domains"` (default)  This is equivalent to `"break-paths-show-domains"` for path-based marks (line/area/trail) and `"filter"` for non-path marks.\n\n__Note__: If any channel\'s scale has an output for invalid values defined in `config.scale.invalid`, all values for the scales will be considered "valid" since they can produce a reasonable output for the scales. Thus, fields for such channels will not be filtered and will not cause path breaks.'},limit:{anyOf:[{description:"The maximum length of the text mark in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0` -- indicating no limit",type:"number"},{$ref:"#/definitions/ExprRef"}]},lineBreak:{anyOf:[{description:"A delimiter, such as a newline character, upon which to break text strings into multiple lines. This property is ignored if the text is array-valued.",type:"string"},{$ref:"#/definitions/ExprRef"}]},lineHeight:{anyOf:[{description:"The line height in pixels (the spacing between subsequent lines of text) for multi-line text marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},opacity:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The overall opacity (value between [0,1]).\n\n__Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.",maximum:1,minimum:0},order:{description:"For line and trail marks, this `order` property can be set to `null` or `false` to make the lines use the original order in the data sources.",type:["null","boolean"]},orient:{$ref:"#/definitions/Orientation",description:`The orientation of a non-stacked bar, tick, area, and line charts. The value is either horizontal (default) or vertical.
- For bar, rule and tick, this determines whether the size of the bar and tick should be applied to x or y dimension.
- For area, this property determines the orient property of the Vega output.
- For line and trail marks, this property determines the sort order of the points in the line if \`config.sortLineBy\` is not specified. For stacked charts, this is always determined by the orientation of the stack; therefore explicitly specified value will be ignored.`},outerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The outer radius in pixels of arc marks. `outerRadius` is an alias for `radius`.\n\n__Default value:__ `0`",minimum:0},padAngle:{anyOf:[{description:"The angular padding applied to sides of the arc, in radians.",type:"number"},{$ref:"#/definitions/ExprRef"}]},radius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"For arc mark, the primary (outer) radius in pixels.\n\nFor text marks, polar coordinate radial offset, in pixels, of the text from the origin determined by the `x` and `y` properties.\n\n__Default value:__ `min(plot_width, plot_height)/2`",minimum:0},radius2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The secondary (inner) radius in pixels of arc marks.\n\n__Default value:__ `0`",minimum:0},shape:{anyOf:[{anyOf:[{$ref:"#/definitions/SymbolShape"},{type:"string"}],description:'Shape of the point marks. Supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- the line symbol `"stroke"`\n- centered directional shapes `"arrow"`, `"wedge"`, or `"triangle"`\n- a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) (For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.)\n\n__Default value:__ `"circle"`'},{$ref:"#/definitions/ExprRef"}]},size:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default size for marks.\n- For `point`/`circle`/`square`, this represents the pixel area of the marks. Note that this value sets the area of the symbol; the side lengths will increase with the square root of this value.\n- For `bar`, this represents the band size of the bar, in pixels.\n- For `text`, this represents the font size, in pixels.\n\n__Default value:__\n- `30` for point, circle, square marks; width/height's `step`\n- `2` for bar marks with discrete dimensions;\n- `5` for bar marks with continuous dimensions;\n- `11` for text marks.",minimum:0},smooth:{anyOf:[{description:"A boolean flag (default true) indicating if the image should be smoothed when resized. If false, individual pixels should be scaled directly rather than interpolated with smoothing. For SVG rendering, this option may not work in some browsers due to lack of standardization.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},startAngle:{anyOf:[{description:"The start angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},stroke:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default stroke color. This property has higher precedence than `config.color`. Set to `null` to remove stroke.\n\n__Default value:__ (None)"},strokeCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for line ending style. One of `"butt"`, `"round"`, or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},strokeDash:{anyOf:[{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},strokeDashOffset:{anyOf:[{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeJoin:{anyOf:[{$ref:"#/definitions/StrokeJoin",description:'The stroke line join method. One of `"miter"`, `"round"` or `"bevel"`.\n\n__Default value:__ `"miter"`'},{$ref:"#/definitions/ExprRef"}]},strokeMiterLimit:{anyOf:[{description:"The miter limit at which to bevel a line join.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOffset:{anyOf:[{description:"The offset in pixels at which to draw the group stroke and fill. If unspecified, the default behavior is to dynamically offset stroked groups such that 1 pixel stroke widths align with the pixel grid.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOpacity:{anyOf:[{description:"The stroke opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeWidth:{anyOf:[{description:"The stroke width, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},tension:{anyOf:[{description:"Depending on the interpolation type, sets the tension parameter (for line and area marks).",type:"number"},{$ref:"#/definitions/ExprRef"}]},text:{anyOf:[{$ref:"#/definitions/Text",description:"Placeholder text if the `text` channel is not specified"},{$ref:"#/definitions/ExprRef"}]},theta:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:`- For arc marks, the arc length in radians if theta2 is not specified, otherwise the start arc angle. (A value of 0 indicates up or north, increasing values proceed clockwise.)

- For text marks, polar coordinate angle in radians.`,maximum:360,minimum:0},theta2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The end angle of arc marks in radians. A value of 0 indicates up or north, increasing values proceed clockwise."},time:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}]},timeUnitBandPosition:{description:"Default relative band position for a time unit. If set to `0`, the marks will be positioned at the beginning of the time unit band step. If set to `0.5`, the marks will be positioned in the middle of the time unit band step.",type:"number"},timeUnitBandSize:{description:"Default relative band size for a time unit. If set to `1`, the bandwidth of the marks will be equal to the time unit band step. If set to `0.5`, bandwidth of the marks will be half of the time unit band step.",type:"number"},tooltip:{anyOf:[{type:"number"},{type:"string"},{type:"boolean"},{$ref:"#/definitions/TooltipContent"},{$ref:"#/definitions/ExprRef"},{type:"null"}],description:'The tooltip text string to show upon mouse hover or an object defining which fields should the tooltip be derived from.\n\n- If `tooltip` is `true` or `{"content": "encoding"}`, then all fields from `encoding` will be used.\n- If `tooltip` is `{"content": "data"}`, then all fields that appear in the highlighted data point will be used.\n- If set to `null` or `false`, then no tooltip will be used.\n\nSee the [`tooltip`](https://vega.github.io/vega-lite/docs/tooltip.html) documentation for a detailed discussion about tooltip  in Vega-Lite.\n\n__Default value:__ `null`'},url:{anyOf:[{$ref:"#/definitions/URI",description:"The URL of the image file for image marks."},{$ref:"#/definitions/ExprRef"}]},width:{anyOf:[{description:"Width of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},x:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X coordinates of the marks, or width of horizontal `"bar"` and `"area"` without specified `x2` or `width`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},y:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y coordinates of the marks, or height of vertical `"bar"` and `"area"` without specified `y2` or `height`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'}},type:"object"},MarkDef:{additionalProperties:!1,properties:{align:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:'The horizontal alignment of the text or ranged marks (area, bar, image, rect, rule). One of `"left"`, `"right"`, `"center"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},angle:{anyOf:[{description:"The rotation angle of the text, in degrees.",maximum:360,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG element, removing the mark item from the ARIA accessibility tree.',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},ariaRole:{anyOf:[{description:'Sets the type of user interface element of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "role" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},ariaRoleDescription:{anyOf:[{description:'A human-readable, author-localized description for the role of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "aria-roledescription" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},aspect:{anyOf:[{description:"Whether to keep aspect ratio of image marks.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},bandSize:{description:`The width of the ticks.

__Default value:__  3/4 of step (width step for horizontal ticks and height step for vertical ticks).`,minimum:0,type:"number"},baseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'For text marks, the vertical text baseline. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, `"line-bottom"`, or an expression reference that provides one of the valid values. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `lineHeight` rather than `fontSize` alone.\n\nFor range marks, the vertical alignment of the marks. One of `"top"`, `"middle"`, `"bottom"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},binSpacing:{description:"Offset between bars for binned field. The ideal value for this is either 0 (preferred by statisticians) or 1 (Vega-Lite default, D3 example style).\n\n__Default value:__ `1`",minimum:0,type:"number"},blend:{anyOf:[{$ref:"#/definitions/Blend",description:'The color blend mode for drawing an item on its current background. Any valid [CSS mix-blend-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode) value can be used.\n\n__Default value: `"source-over"`'},{$ref:"#/definitions/ExprRef"}]},clip:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ExprRef"}],description:"Whether a mark be clipped to the enclosing groups width and height."},color:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{$ref:"#/definitions/ExprRef"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'},continuousBandSize:{description:"The default size of the bars on continuous scales.\n\n__Default value:__ `5`",minimum:0,type:"number"},cornerRadius:{anyOf:[{description:"The radius in pixels of rounded rectangles or arcs' corners.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusEnd:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:`- For vertical bars, top-left and top-right corner radius.

- For horizontal bars, top-right and bottom-right corner radius.`},cornerRadiusTopLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' top right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' top left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cursor:{anyOf:[{$ref:"#/definitions/Cursor",description:"The mouse cursor used over the mark. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used."},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute).',type:"string"},{$ref:"#/definitions/ExprRef"}]},dir:{anyOf:[{$ref:"#/definitions/TextDirection",description:'The direction of the text. One of `"ltr"` (left-to-right) or `"rtl"` (right-to-left). This property determines on which side is truncated in response to the limit parameter.\n\n__Default value:__ `"ltr"`'},{$ref:"#/definitions/ExprRef"}]},discreteBandSize:{anyOf:[{type:"number"},{$ref:"#/definitions/RelativeBandSize"}],description:"The default size of the bars with discrete dimensions. If unspecified, the default size is  `step-2`, which provides 2 pixel offset between bars.",minimum:0},dx:{anyOf:[{description:"The horizontal offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},dy:{anyOf:[{description:"The vertical offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},ellipsis:{anyOf:[{description:'The ellipsis string for text truncated in response to the limit parameter.\n\n__Default value:__ `""`',type:"string"},{$ref:"#/definitions/ExprRef"}]},fill:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default fill color. This property has higher precedence than `config.color`. Set to `null` to remove fill.\n\n__Default value:__ (None)"},fillOpacity:{anyOf:[{description:"The fill opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},filled:{description:"Whether the mark's color should be used as fill color instead of stroke color.\n\n__Default value:__ `false` for all `point`, `line`, and `rule` marks as well as `geoshape` marks for [`graticule`](https://vega.github.io/vega-lite/docs/data.html#graticule) data sources; otherwise, `true`.\n\n__Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).",type:"boolean"},font:{anyOf:[{description:'The typeface to set the text in (e.g., `"Helvetica Neue"`).',type:"string"},{$ref:"#/definitions/ExprRef"}]},fontSize:{anyOf:[{description:"The font size, in pixels.\n\n__Default value:__ `11`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},fontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:'The font style (e.g., `"italic"`).'},{$ref:"#/definitions/ExprRef"}]},fontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'The font weight. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},height:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RelativeBandSize"}],description:`Height of the marks.  One of:

- A number representing a fixed pixel height.

- A relative band size definition.  For example, \`{band: 0.5}\` represents half of the band`},href:{anyOf:[{$ref:"#/definitions/URI",description:"A URL to load upon mouse click. If defined, the mark acts as a hyperlink."},{$ref:"#/definitions/ExprRef"}]},innerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The inner radius in pixels of arc marks. `innerRadius` is an alias for `radius2`.\n\n__Default value:__ `0`",minimum:0},interpolate:{anyOf:[{$ref:"#/definitions/Interpolate",description:'The line interpolation method to use for line and area marks. One of the following:\n- `"linear"`: piecewise linear segments, as in a polyline.\n- `"linear-closed"`: close the linear segments to form a polygon.\n- `"step"`: alternate between horizontal and vertical segments, as in a step function.\n- `"step-before"`: alternate between vertical and horizontal segments, as in a step function.\n- `"step-after"`: alternate between horizontal and vertical segments, as in a step function.\n- `"basis"`: a B-spline, with control point duplication on the ends.\n- `"basis-open"`: an open B-spline; may not intersect the start or end.\n- `"basis-closed"`: a closed B-spline, as in a loop.\n- `"cardinal"`: a Cardinal spline, with control point duplication on the ends.\n- `"cardinal-open"`: an open Cardinal spline; may not intersect the start or end, but will intersect other control points.\n- `"cardinal-closed"`: a closed Cardinal spline, as in a loop.\n- `"bundle"`: equivalent to basis, except the tension parameter is used to straighten the spline.\n- `"monotone"`: cubic interpolation that preserves monotonicity in y.'},{$ref:"#/definitions/ExprRef"}]},invalid:{anyOf:[{$ref:"#/definitions/MarkInvalidDataMode"},{type:"null"}],description:'Invalid data mode, which defines how the marks and corresponding scales should represent invalid values (`null` and `NaN` in continuous scales *without* defined output for invalid values).\n\n- `"filter"`  *Exclude* all invalid values from the visualization\'s *marks* and *scales*. For path marks (for line, area, trail), this option will create paths that connect valid points, as if the data rows with invalid values do not exist.\n\n- `"break-paths-filter-domains"`  Break path marks (for line, area, trail) at invalid values.  For non-path marks, this is equivalent to `"filter"`. All *scale* domains will *exclude* these filtered data points.\n\n- `"break-paths-show-domains"`  Break paths (for line, area, trail) at invalid values.  Hide invalid values for non-path marks. All *scale* domains will *include* these filtered data points (for both path and non-path marks).\n\n- `"show"` or `null`  Show all data points in the marks and scale domains. Each scale will use the output for invalid values defined in `config.scale.invalid` or, if unspecified, by default invalid values will produce the same visual values as zero (if the scale includes zero) or the minimum value (if the scale does not include zero).\n\n- `"break-paths-show-path-domains"` (default)  This is equivalent to `"break-paths-show-domains"` for path-based marks (line/area/trail) and `"filter"` for non-path marks.\n\n__Note__: If any channel\'s scale has an output for invalid values defined in `config.scale.invalid`, all values for the scales will be considered "valid" since they can produce a reasonable output for the scales. Thus, fields for such channels will not be filtered and will not cause path breaks.'},limit:{anyOf:[{description:"The maximum length of the text mark in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0` -- indicating no limit",type:"number"},{$ref:"#/definitions/ExprRef"}]},line:{anyOf:[{type:"boolean"},{$ref:"#/definitions/OverlayMarkDef"}],description:"A flag for overlaying line on top of area marks, or an object defining the properties of the overlayed lines.\n\n- If this value is an empty object (`{}`) or `true`, lines with default properties will be used.\n\n- If this value is `false`, no lines would be automatically added to area marks.\n\n__Default value:__ `false`."},lineBreak:{anyOf:[{description:"A delimiter, such as a newline character, upon which to break text strings into multiple lines. This property is ignored if the text is array-valued.",type:"string"},{$ref:"#/definitions/ExprRef"}]},lineHeight:{anyOf:[{description:"The line height in pixels (the spacing between subsequent lines of text) for multi-line text marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},minBandSize:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The minimum band size for bar and rectangle marks. __Default value:__ `0.25`"},opacity:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The overall opacity (value between [0,1]).\n\n__Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.",maximum:1,minimum:0},order:{description:"For line and trail marks, this `order` property can be set to `null` or `false` to make the lines use the original order in the data sources.",type:["null","boolean"]},orient:{$ref:"#/definitions/Orientation",description:`The orientation of a non-stacked bar, tick, area, and line charts. The value is either horizontal (default) or vertical.
- For bar, rule and tick, this determines whether the size of the bar and tick should be applied to x or y dimension.
- For area, this property determines the orient property of the Vega output.
- For line and trail marks, this property determines the sort order of the points in the line if \`config.sortLineBy\` is not specified. For stacked charts, this is always determined by the orientation of the stack; therefore explicitly specified value will be ignored.`},outerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The outer radius in pixels of arc marks. `outerRadius` is an alias for `radius`.\n\n__Default value:__ `0`",minimum:0},padAngle:{anyOf:[{description:"The angular padding applied to sides of the arc, in radians.",type:"number"},{$ref:"#/definitions/ExprRef"}]},point:{anyOf:[{type:"boolean"},{$ref:"#/definitions/OverlayMarkDef"},{const:"transparent",type:"string"}],description:'A flag for overlaying points on top of line or area marks, or an object defining the properties of the overlayed points.\n\n- If this property is `"transparent"`, transparent points will be used (for enhancing tooltips and selections).\n\n- If this property is an empty object (`{}`) or `true`, filled points with default properties will be used.\n\n- If this property is `false`, no points would be automatically added to line or area marks.\n\n__Default value:__ `false`.'},radius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"For arc mark, the primary (outer) radius in pixels.\n\nFor text marks, polar coordinate radial offset, in pixels, of the text from the origin determined by the `x` and `y` properties.\n\n__Default value:__ `min(plot_width, plot_height)/2`",minimum:0},radius2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The secondary (inner) radius in pixels of arc marks.\n\n__Default value:__ `0`",minimum:0},radius2Offset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for radius2."},radiusOffset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for radius."},shape:{anyOf:[{anyOf:[{$ref:"#/definitions/SymbolShape"},{type:"string"}],description:'Shape of the point marks. Supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- the line symbol `"stroke"`\n- centered directional shapes `"arrow"`, `"wedge"`, or `"triangle"`\n- a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) (For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.)\n\n__Default value:__ `"circle"`'},{$ref:"#/definitions/ExprRef"}]},size:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default size for marks.\n- For `point`/`circle`/`square`, this represents the pixel area of the marks. Note that this value sets the area of the symbol; the side lengths will increase with the square root of this value.\n- For `bar`, this represents the band size of the bar, in pixels.\n- For `text`, this represents the font size, in pixels.\n\n__Default value:__\n- `30` for point, circle, square marks; width/height's `step`\n- `2` for bar marks with discrete dimensions;\n- `5` for bar marks with continuous dimensions;\n- `11` for text marks.",minimum:0},smooth:{anyOf:[{description:"A boolean flag (default true) indicating if the image should be smoothed when resized. If false, individual pixels should be scaled directly rather than interpolated with smoothing. For SVG rendering, this option may not work in some browsers due to lack of standardization.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},stroke:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default stroke color. This property has higher precedence than `config.color`. Set to `null` to remove stroke.\n\n__Default value:__ (None)"},strokeCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for line ending style. One of `"butt"`, `"round"`, or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},strokeDash:{anyOf:[{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},strokeDashOffset:{anyOf:[{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeJoin:{anyOf:[{$ref:"#/definitions/StrokeJoin",description:'The stroke line join method. One of `"miter"`, `"round"` or `"bevel"`.\n\n__Default value:__ `"miter"`'},{$ref:"#/definitions/ExprRef"}]},strokeMiterLimit:{anyOf:[{description:"The miter limit at which to bevel a line join.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOffset:{anyOf:[{description:"The offset in pixels at which to draw the group stroke and fill. If unspecified, the default behavior is to dynamically offset stroked groups such that 1 pixel stroke widths align with the pixel grid.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOpacity:{anyOf:[{description:"The stroke opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeWidth:{anyOf:[{description:"The stroke width, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},style:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:'A string or array of strings indicating the name of custom styles to apply to the mark. A style is a named collection of mark property defaults defined within the [style configuration](https://vega.github.io/vega-lite/docs/mark.html#style-config). If style is an array, later styles will override earlier styles. Any [mark properties](https://vega.github.io/vega-lite/docs/encoding.html#mark-prop) explicitly defined within the `encoding` will override a style default.\n\n__Default value:__ The mark\'s name. For example, a bar mark will have style `"bar"` by default. __Note:__ Any specified style will augment the default style. For example, a bar mark with `"style": "foo"` will receive from `config.style.bar` and `config.style.foo` (the specified style `"foo"` has higher precedence).'},tension:{anyOf:[{description:"Depending on the interpolation type, sets the tension parameter (for line and area marks).",type:"number"},{$ref:"#/definitions/ExprRef"}]},text:{anyOf:[{$ref:"#/definitions/Text",description:"Placeholder text if the `text` channel is not specified"},{$ref:"#/definitions/ExprRef"}]},theta:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:`- For arc marks, the arc length in radians if theta2 is not specified, otherwise the start arc angle. (A value of 0 indicates up or north, increasing values proceed clockwise.)

- For text marks, polar coordinate angle in radians.`,maximum:360,minimum:0},theta2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The end angle of arc marks in radians. A value of 0 indicates up or north, increasing values proceed clockwise."},theta2Offset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for theta2."},thetaOffset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for theta."},thickness:{description:"Thickness of the tick mark.\n\n__Default value:__  `1`",minimum:0,type:"number"},time:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}]},timeUnitBandPosition:{description:"Default relative band position for a time unit. If set to `0`, the marks will be positioned at the beginning of the time unit band step. If set to `0.5`, the marks will be positioned in the middle of the time unit band step.",type:"number"},timeUnitBandSize:{description:"Default relative band size for a time unit. If set to `1`, the bandwidth of the marks will be equal to the time unit band step. If set to `0.5`, bandwidth of the marks will be half of the time unit band step.",type:"number"},tooltip:{anyOf:[{type:"number"},{type:"string"},{type:"boolean"},{$ref:"#/definitions/TooltipContent"},{$ref:"#/definitions/ExprRef"},{type:"null"}],description:'The tooltip text string to show upon mouse hover or an object defining which fields should the tooltip be derived from.\n\n- If `tooltip` is `true` or `{"content": "encoding"}`, then all fields from `encoding` will be used.\n- If `tooltip` is `{"content": "data"}`, then all fields that appear in the highlighted data point will be used.\n- If set to `null` or `false`, then no tooltip will be used.\n\nSee the [`tooltip`](https://vega.github.io/vega-lite/docs/tooltip.html) documentation for a detailed discussion about tooltip  in Vega-Lite.\n\n__Default value:__ `null`'},type:{$ref:"#/definitions/Mark",description:'The mark type. This could a primitive mark type (one of `"bar"`, `"circle"`, `"square"`, `"tick"`, `"line"`, `"area"`, `"point"`, `"geoshape"`, `"rule"`, and `"text"`) or a composite mark type (`"boxplot"`, `"errorband"`, `"errorbar"`).'},url:{anyOf:[{$ref:"#/definitions/URI",description:"The URL of the image file for image marks."},{$ref:"#/definitions/ExprRef"}]},width:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RelativeBandSize"}],description:`Width of the marks.  One of:

- A number representing a fixed pixel width.

- A relative band size definition.  For example, \`{band: 0.5}\` represents half of the band.`},x:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X coordinates of the marks, or width of horizontal `"bar"` and `"area"` without specified `x2` or `width`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2Offset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for x2-position."},xOffset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for x-position."},y:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y coordinates of the marks, or height of vertical `"bar"` and `"area"` without specified `y2` or `height`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2Offset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for y2-position."},yOffset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for y-position."}},required:["type"],type:"object"},MarkInvalidDataMode:{enum:["filter","break-paths-filter-domains","break-paths-show-domains","break-paths-show-path-domains","show"],type:"string"},"MarkPropDef<(Gradient|string|null)>":{anyOf:[{$ref:"#/definitions/FieldOrDatumDefWithCondition<MarkPropFieldDef,(Gradient|string|null)>"},{$ref:"#/definitions/FieldOrDatumDefWithCondition<DatumDef,(Gradient|string|null)>"},{$ref:"#/definitions/ValueDefWithCondition<MarkPropFieldOrDatumDef,(Gradient|string|null)>"}]},"MarkPropDef<(string|null),TypeForShape>":{anyOf:[{$ref:"#/definitions/FieldOrDatumDefWithCondition<MarkPropFieldDef<TypeForShape>,(string|null)>"},{$ref:"#/definitions/FieldOrDatumDefWithCondition<DatumDef,(string|null)>"},{$ref:"#/definitions/ValueDefWithCondition<MarkPropFieldOrDatumDef<TypeForShape>,(string|null)>"}]},"MarkPropDef<number>":{anyOf:[{$ref:"#/definitions/FieldOrDatumDefWithCondition<MarkPropFieldDef,number>"},{$ref:"#/definitions/FieldOrDatumDefWithCondition<DatumDef,number>"},{$ref:"#/definitions/ValueDefWithCondition<MarkPropFieldOrDatumDef,number>"}]},"MarkPropDef<number[]>":{anyOf:[{$ref:"#/definitions/FieldOrDatumDefWithCondition<MarkPropFieldDef,number[]>"},{$ref:"#/definitions/FieldOrDatumDefWithCondition<DatumDef,number[]>"},{$ref:"#/definitions/ValueDefWithCondition<MarkPropFieldOrDatumDef,number[]>"}]},MarkType:{enum:["arc","area","image","group","line","path","rect","rule","shape","symbol","text","trail"],type:"string"},MergedStream:{additionalProperties:!1,properties:{between:{items:{$ref:"#/definitions/Stream"},type:"array"},consume:{type:"boolean"},debounce:{type:"number"},filter:{anyOf:[{$ref:"#/definitions/Expr"},{items:{$ref:"#/definitions/Expr"},type:"array"}]},markname:{type:"string"},marktype:{$ref:"#/definitions/MarkType"},merge:{items:{$ref:"#/definitions/Stream"},type:"array"},throttle:{type:"number"}},required:["merge"],type:"object"},Month:{maximum:12,minimum:1,type:"number"},MultiLineString:{additionalProperties:!1,description:"MultiLineString geometry object. https://tools.ietf.org/html/rfc7946#section-3.1.5",properties:{bbox:{$ref:"#/definitions/BBox",description:"Bounding box of the coordinate range of the object's Geometries, Features, or Feature Collections. https://tools.ietf.org/html/rfc7946#section-5"},coordinates:{items:{items:{$ref:"#/definitions/Position"},type:"array"},type:"array"},type:{const:"MultiLineString",description:"Specifies the type of GeoJSON object.",type:"string"}},required:["coordinates","type"],type:"object"},MultiPoint:{additionalProperties:!1,description:"MultiPoint geometry object.  https://tools.ietf.org/html/rfc7946#section-3.1.3",properties:{bbox:{$ref:"#/definitions/BBox",description:"Bounding box of the coordinate range of the object's Geometries, Features, or Feature Collections. https://tools.ietf.org/html/rfc7946#section-5"},coordinates:{items:{$ref:"#/definitions/Position"},type:"array"},type:{const:"MultiPoint",description:"Specifies the type of GeoJSON object.",type:"string"}},required:["coordinates","type"],type:"object"},MultiPolygon:{additionalProperties:!1,description:"MultiPolygon geometry object. https://tools.ietf.org/html/rfc7946#section-3.1.7",properties:{bbox:{$ref:"#/definitions/BBox",description:"Bounding box of the coordinate range of the object's Geometries, Features, or Feature Collections. https://tools.ietf.org/html/rfc7946#section-5"},coordinates:{items:{items:{items:{$ref:"#/definitions/Position"},type:"array"},type:"array"},type:"array"},type:{const:"MultiPolygon",description:"Specifies the type of GeoJSON object.",type:"string"}},required:["coordinates","type"],type:"object"},MultiTimeUnit:{anyOf:[{$ref:"#/definitions/LocalMultiTimeUnit"},{$ref:"#/definitions/UtcMultiTimeUnit"}]},NamedData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:`Provide a placeholder name and bind data at runtime.

New data may change the layout but Vega does not always resize the chart. To update the layout when the data updates, set [autosize](https://vega.github.io/vega-lite/docs/size.html#autosize) or explicitly use [view.resize](https://vega.github.io/vega/docs/api/view/#view_resize).`,type:"string"}},required:["name"],type:"object"},NonArgAggregateOp:{enum:["average","count","distinct","max","mean","median","min","missing","product","q1","q3","ci0","ci1","stderr","stdev","stdevp","sum","valid","values","variance","variancep","exponential","exponentialb"],type:"string"},NonLayerRepeatSpec:{additionalProperties:!1,description:"Base interface for a repeat specification.",properties:{align:{anyOf:[{$ref:"#/definitions/LayoutAlign"},{$ref:"#/definitions/RowCol<LayoutAlign>"}],description:'The alignment to apply to grid rows and columns. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\nAlternatively, an object value of the form `{"row": string, "column": string}` can be used to supply different alignments for rows and columns.\n\n__Default value:__ `"all"`.'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{anyOf:[{type:"boolean"},{$ref:"#/definitions/RowCol<boolean>"}],description:'Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\nAn object value of the form `{"row": boolean, "column": boolean}` can be used to supply different centering values for rows and columns.\n\n__Default value:__ `false`'},columns:{description:"The number of columns to include in the view composition layout.\n\n__Default value__: `undefined` -- An infinite number of columns (a single row) will be assumed. This is equivalent to `hconcat` (for `concat`) and to using the `column` channel (for `facet` and `repeat`).\n\n__Note__:\n\n1) This property is only for:\n- the general (wrappable) `concat` operator (not `hconcat`/`vconcat`)\n- the `facet` and `repeat` operator with one field/repetition definition (without row/column nesting)\n\n2) Setting the `columns` to `1` is equivalent to `vconcat` (for `concat`) and to using the `row` channel (for `facet` and `repeat`).",type:"number"},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},description:{description:"Description of this mark for commenting purpose.",type:"string"},name:{description:"Name of the visualization for later reference.",type:"string"},repeat:{anyOf:[{items:{type:"string"},type:"array"},{$ref:"#/definitions/RepeatMapping"}],description:'Definition for fields to be repeated. One of: 1) An array of fields to be repeated. If `"repeat"` is an array, the field can be referred to as `{"repeat": "repeat"}`. The repeated views are laid out in a wrapped row. You can set the number of columns to control the wrapping. 2) An object that maps `"row"` and/or `"column"` to the listed fields to be repeated along the particular orientations. The objects `{"repeat": "row"}` and `{"repeat": "column"}` can be used to refer to the repeated field respectively.'},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{anyOf:[{type:"number"},{$ref:"#/definitions/RowCol<number>"}],description:'The spacing in pixels between sub-views of the composition operator. An object of the form `{"row": number, "column": number}` can be used to set different spacing values for rows and columns.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)'},spec:{$ref:"#/definitions/NonNormalizedSpec",description:"A specification of the view that gets repeated."},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"}},required:["repeat","spec"],type:"object"},NonNormalizedSpec:{$ref:"#/definitions/Spec"},NumberLocale:{additionalProperties:!1,description:"Locale definition for formatting numbers.",properties:{currency:{$ref:"#/definitions/Vector2<string>",description:'The currency prefix and suffix (e.g., ["$", ""]).'},decimal:{description:'The decimal point (e.g., ".").',type:"string"},grouping:{description:"The array of group sizes (e.g., [3]), cycled as needed.",items:{type:"number"},type:"array"},minus:{description:'The minus sign (defaults to hyphen-minus, "-").',type:"string"},nan:{description:'The not-a-number value (defaults to "NaN").',type:"string"},numerals:{$ref:"#/definitions/Vector10<string>",description:"An array of ten strings to replace the numerals 0-9."},percent:{description:'The percent sign (defaults to "%").',type:"string"},thousands:{description:'The group separator (e.g., ",").',type:"string"}},required:["decimal","thousands","grouping","currency"],type:"object"},NumericArrayMarkPropDef:{$ref:"#/definitions/MarkPropDef<number[]>"},NumericMarkPropDef:{$ref:"#/definitions/MarkPropDef<number>"},OffsetDef:{anyOf:[{$ref:"#/definitions/ScaleFieldDef"},{$ref:"#/definitions/ScaleDatumDef"},{$ref:"#/definitions/ValueDef<number>"}]},OrderFieldDef:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},sort:{$ref:"#/definitions/SortOrder",description:'The sort order. One of `"ascending"` (default) or `"descending"`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},OrderOnlyDef:{additionalProperties:!1,properties:{sort:{$ref:"#/definitions/SortOrder",description:'The sort order. One of `"ascending"` (default) or `"descending"`.'}},type:"object"},OrderValueDef:{additionalProperties:!1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalValueDef<number>"},{items:{$ref:"#/definitions/ConditionalValueDef<number>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},value:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["value"],type:"object"},Orient:{enum:["left","right","top","bottom"],type:"string"},Orientation:{enum:["horizontal","vertical"],type:"string"},OverlayMarkDef:{additionalProperties:!1,properties:{align:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:'The horizontal alignment of the text or ranged marks (area, bar, image, rect, rule). One of `"left"`, `"right"`, `"center"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},angle:{anyOf:[{description:"The rotation angle of the text, in degrees.",maximum:360,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG element, removing the mark item from the ARIA accessibility tree.',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},ariaRole:{anyOf:[{description:'Sets the type of user interface element of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "role" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},ariaRoleDescription:{anyOf:[{description:'A human-readable, author-localized description for the role of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "aria-roledescription" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},aspect:{anyOf:[{description:"Whether to keep aspect ratio of image marks.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},baseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'For text marks, the vertical text baseline. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, `"line-bottom"`, or an expression reference that provides one of the valid values. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `lineHeight` rather than `fontSize` alone.\n\nFor range marks, the vertical alignment of the marks. One of `"top"`, `"middle"`, `"bottom"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},blend:{anyOf:[{$ref:"#/definitions/Blend",description:'The color blend mode for drawing an item on its current background. Any valid [CSS mix-blend-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode) value can be used.\n\n__Default value: `"source-over"`'},{$ref:"#/definitions/ExprRef"}]},clip:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ExprRef"}],description:"Whether a mark be clipped to the enclosing groups width and height."},color:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{$ref:"#/definitions/ExprRef"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'},cornerRadius:{anyOf:[{description:"The radius in pixels of rounded rectangles or arcs' corners.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' top right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' top left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cursor:{anyOf:[{$ref:"#/definitions/Cursor",description:"The mouse cursor used over the mark. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used."},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute).',type:"string"},{$ref:"#/definitions/ExprRef"}]},dir:{anyOf:[{$ref:"#/definitions/TextDirection",description:'The direction of the text. One of `"ltr"` (left-to-right) or `"rtl"` (right-to-left). This property determines on which side is truncated in response to the limit parameter.\n\n__Default value:__ `"ltr"`'},{$ref:"#/definitions/ExprRef"}]},dx:{anyOf:[{description:"The horizontal offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},dy:{anyOf:[{description:"The vertical offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},ellipsis:{anyOf:[{description:'The ellipsis string for text truncated in response to the limit parameter.\n\n__Default value:__ `""`',type:"string"},{$ref:"#/definitions/ExprRef"}]},endAngle:{anyOf:[{description:"The end angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},fill:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default fill color. This property has higher precedence than `config.color`. Set to `null` to remove fill.\n\n__Default value:__ (None)"},fillOpacity:{anyOf:[{description:"The fill opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},filled:{description:"Whether the mark's color should be used as fill color instead of stroke color.\n\n__Default value:__ `false` for all `point`, `line`, and `rule` marks as well as `geoshape` marks for [`graticule`](https://vega.github.io/vega-lite/docs/data.html#graticule) data sources; otherwise, `true`.\n\n__Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).",type:"boolean"},font:{anyOf:[{description:'The typeface to set the text in (e.g., `"Helvetica Neue"`).',type:"string"},{$ref:"#/definitions/ExprRef"}]},fontSize:{anyOf:[{description:"The font size, in pixels.\n\n__Default value:__ `11`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},fontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:'The font style (e.g., `"italic"`).'},{$ref:"#/definitions/ExprRef"}]},fontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'The font weight. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},height:{anyOf:[{description:"Height of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},href:{anyOf:[{$ref:"#/definitions/URI",description:"A URL to load upon mouse click. If defined, the mark acts as a hyperlink."},{$ref:"#/definitions/ExprRef"}]},innerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The inner radius in pixels of arc marks. `innerRadius` is an alias for `radius2`.\n\n__Default value:__ `0`",minimum:0},interpolate:{anyOf:[{$ref:"#/definitions/Interpolate",description:'The line interpolation method to use for line and area marks. One of the following:\n- `"linear"`: piecewise linear segments, as in a polyline.\n- `"linear-closed"`: close the linear segments to form a polygon.\n- `"step"`: alternate between horizontal and vertical segments, as in a step function.\n- `"step-before"`: alternate between vertical and horizontal segments, as in a step function.\n- `"step-after"`: alternate between horizontal and vertical segments, as in a step function.\n- `"basis"`: a B-spline, with control point duplication on the ends.\n- `"basis-open"`: an open B-spline; may not intersect the start or end.\n- `"basis-closed"`: a closed B-spline, as in a loop.\n- `"cardinal"`: a Cardinal spline, with control point duplication on the ends.\n- `"cardinal-open"`: an open Cardinal spline; may not intersect the start or end, but will intersect other control points.\n- `"cardinal-closed"`: a closed Cardinal spline, as in a loop.\n- `"bundle"`: equivalent to basis, except the tension parameter is used to straighten the spline.\n- `"monotone"`: cubic interpolation that preserves monotonicity in y.'},{$ref:"#/definitions/ExprRef"}]},invalid:{anyOf:[{$ref:"#/definitions/MarkInvalidDataMode"},{type:"null"}],description:'Invalid data mode, which defines how the marks and corresponding scales should represent invalid values (`null` and `NaN` in continuous scales *without* defined output for invalid values).\n\n- `"filter"`  *Exclude* all invalid values from the visualization\'s *marks* and *scales*. For path marks (for line, area, trail), this option will create paths that connect valid points, as if the data rows with invalid values do not exist.\n\n- `"break-paths-filter-domains"`  Break path marks (for line, area, trail) at invalid values.  For non-path marks, this is equivalent to `"filter"`. All *scale* domains will *exclude* these filtered data points.\n\n- `"break-paths-show-domains"`  Break paths (for line, area, trail) at invalid values.  Hide invalid values for non-path marks. All *scale* domains will *include* these filtered data points (for both path and non-path marks).\n\n- `"show"` or `null`  Show all data points in the marks and scale domains. Each scale will use the output for invalid values defined in `config.scale.invalid` or, if unspecified, by default invalid values will produce the same visual values as zero (if the scale includes zero) or the minimum value (if the scale does not include zero).\n\n- `"break-paths-show-path-domains"` (default)  This is equivalent to `"break-paths-show-domains"` for path-based marks (line/area/trail) and `"filter"` for non-path marks.\n\n__Note__: If any channel\'s scale has an output for invalid values defined in `config.scale.invalid`, all values for the scales will be considered "valid" since they can produce a reasonable output for the scales. Thus, fields for such channels will not be filtered and will not cause path breaks.'},limit:{anyOf:[{description:"The maximum length of the text mark in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0` -- indicating no limit",type:"number"},{$ref:"#/definitions/ExprRef"}]},lineBreak:{anyOf:[{description:"A delimiter, such as a newline character, upon which to break text strings into multiple lines. This property is ignored if the text is array-valued.",type:"string"},{$ref:"#/definitions/ExprRef"}]},lineHeight:{anyOf:[{description:"The line height in pixels (the spacing between subsequent lines of text) for multi-line text marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},opacity:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The overall opacity (value between [0,1]).\n\n__Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.",maximum:1,minimum:0},order:{description:"For line and trail marks, this `order` property can be set to `null` or `false` to make the lines use the original order in the data sources.",type:["null","boolean"]},orient:{$ref:"#/definitions/Orientation",description:`The orientation of a non-stacked bar, tick, area, and line charts. The value is either horizontal (default) or vertical.
- For bar, rule and tick, this determines whether the size of the bar and tick should be applied to x or y dimension.
- For area, this property determines the orient property of the Vega output.
- For line and trail marks, this property determines the sort order of the points in the line if \`config.sortLineBy\` is not specified. For stacked charts, this is always determined by the orientation of the stack; therefore explicitly specified value will be ignored.`},outerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The outer radius in pixels of arc marks. `outerRadius` is an alias for `radius`.\n\n__Default value:__ `0`",minimum:0},padAngle:{anyOf:[{description:"The angular padding applied to sides of the arc, in radians.",type:"number"},{$ref:"#/definitions/ExprRef"}]},radius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"For arc mark, the primary (outer) radius in pixels.\n\nFor text marks, polar coordinate radial offset, in pixels, of the text from the origin determined by the `x` and `y` properties.\n\n__Default value:__ `min(plot_width, plot_height)/2`",minimum:0},radius2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The secondary (inner) radius in pixels of arc marks.\n\n__Default value:__ `0`",minimum:0},radius2Offset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for radius2."},radiusOffset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for radius."},shape:{anyOf:[{anyOf:[{$ref:"#/definitions/SymbolShape"},{type:"string"}],description:'Shape of the point marks. Supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- the line symbol `"stroke"`\n- centered directional shapes `"arrow"`, `"wedge"`, or `"triangle"`\n- a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) (For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.)\n\n__Default value:__ `"circle"`'},{$ref:"#/definitions/ExprRef"}]},size:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default size for marks.\n- For `point`/`circle`/`square`, this represents the pixel area of the marks. Note that this value sets the area of the symbol; the side lengths will increase with the square root of this value.\n- For `bar`, this represents the band size of the bar, in pixels.\n- For `text`, this represents the font size, in pixels.\n\n__Default value:__\n- `30` for point, circle, square marks; width/height's `step`\n- `2` for bar marks with discrete dimensions;\n- `5` for bar marks with continuous dimensions;\n- `11` for text marks.",minimum:0},smooth:{anyOf:[{description:"A boolean flag (default true) indicating if the image should be smoothed when resized. If false, individual pixels should be scaled directly rather than interpolated with smoothing. For SVG rendering, this option may not work in some browsers due to lack of standardization.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},startAngle:{anyOf:[{description:"The start angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},stroke:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default stroke color. This property has higher precedence than `config.color`. Set to `null` to remove stroke.\n\n__Default value:__ (None)"},strokeCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for line ending style. One of `"butt"`, `"round"`, or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},strokeDash:{anyOf:[{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},strokeDashOffset:{anyOf:[{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeJoin:{anyOf:[{$ref:"#/definitions/StrokeJoin",description:'The stroke line join method. One of `"miter"`, `"round"` or `"bevel"`.\n\n__Default value:__ `"miter"`'},{$ref:"#/definitions/ExprRef"}]},strokeMiterLimit:{anyOf:[{description:"The miter limit at which to bevel a line join.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOffset:{anyOf:[{description:"The offset in pixels at which to draw the group stroke and fill. If unspecified, the default behavior is to dynamically offset stroked groups such that 1 pixel stroke widths align with the pixel grid.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOpacity:{anyOf:[{description:"The stroke opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeWidth:{anyOf:[{description:"The stroke width, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},style:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:'A string or array of strings indicating the name of custom styles to apply to the mark. A style is a named collection of mark property defaults defined within the [style configuration](https://vega.github.io/vega-lite/docs/mark.html#style-config). If style is an array, later styles will override earlier styles. Any [mark properties](https://vega.github.io/vega-lite/docs/encoding.html#mark-prop) explicitly defined within the `encoding` will override a style default.\n\n__Default value:__ The mark\'s name. For example, a bar mark will have style `"bar"` by default. __Note:__ Any specified style will augment the default style. For example, a bar mark with `"style": "foo"` will receive from `config.style.bar` and `config.style.foo` (the specified style `"foo"` has higher precedence).'},tension:{anyOf:[{description:"Depending on the interpolation type, sets the tension parameter (for line and area marks).",type:"number"},{$ref:"#/definitions/ExprRef"}]},text:{anyOf:[{$ref:"#/definitions/Text",description:"Placeholder text if the `text` channel is not specified"},{$ref:"#/definitions/ExprRef"}]},theta:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:`- For arc marks, the arc length in radians if theta2 is not specified, otherwise the start arc angle. (A value of 0 indicates up or north, increasing values proceed clockwise.)

- For text marks, polar coordinate angle in radians.`,maximum:360,minimum:0},theta2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The end angle of arc marks in radians. A value of 0 indicates up or north, increasing values proceed clockwise."},theta2Offset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for theta2."},thetaOffset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for theta."},time:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}]},timeUnitBandPosition:{description:"Default relative band position for a time unit. If set to `0`, the marks will be positioned at the beginning of the time unit band step. If set to `0.5`, the marks will be positioned in the middle of the time unit band step.",type:"number"},timeUnitBandSize:{description:"Default relative band size for a time unit. If set to `1`, the bandwidth of the marks will be equal to the time unit band step. If set to `0.5`, bandwidth of the marks will be half of the time unit band step.",type:"number"},tooltip:{anyOf:[{type:"number"},{type:"string"},{type:"boolean"},{$ref:"#/definitions/TooltipContent"},{$ref:"#/definitions/ExprRef"},{type:"null"}],description:'The tooltip text string to show upon mouse hover or an object defining which fields should the tooltip be derived from.\n\n- If `tooltip` is `true` or `{"content": "encoding"}`, then all fields from `encoding` will be used.\n- If `tooltip` is `{"content": "data"}`, then all fields that appear in the highlighted data point will be used.\n- If set to `null` or `false`, then no tooltip will be used.\n\nSee the [`tooltip`](https://vega.github.io/vega-lite/docs/tooltip.html) documentation for a detailed discussion about tooltip  in Vega-Lite.\n\n__Default value:__ `null`'},url:{anyOf:[{$ref:"#/definitions/URI",description:"The URL of the image file for image marks."},{$ref:"#/definitions/ExprRef"}]},width:{anyOf:[{description:"Width of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},x:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X coordinates of the marks, or width of horizontal `"bar"` and `"area"` without specified `x2` or `width`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2Offset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for x2-position."},xOffset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for x-position."},y:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y coordinates of the marks, or height of vertical `"bar"` and `"area"` without specified `y2` or `height`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2Offset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for y2-position."},yOffset:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Offset for y-position."}},type:"object"},Padding:{anyOf:[{type:"number"},{additionalProperties:!1,properties:{bottom:{type:"number"},left:{type:"number"},right:{type:"number"},top:{type:"number"}},type:"object"}],minimum:0},ParameterExtent:{anyOf:[{additionalProperties:!1,properties:{field:{$ref:"#/definitions/FieldName",description:"If a selection parameter is specified, the field name to extract selected values for when the selection is [projected](https://vega.github.io/vega-lite/docs/selection.html#project) over multiple fields or encodings."},param:{$ref:"#/definitions/ParameterName",description:"The name of a parameter."}},required:["param"],type:"object"},{additionalProperties:!1,properties:{encoding:{$ref:"#/definitions/SingleDefUnitChannel",description:"If a selection parameter is specified, the encoding channel to extract selected values for when a selection is [projected](https://vega.github.io/vega-lite/docs/selection.html#project) over multiple fields or encodings."},param:{$ref:"#/definitions/ParameterName",description:"The name of a parameter."}},required:["param"],type:"object"}]},ParameterName:{type:"string"},ParameterPredicate:{additionalProperties:!1,properties:{empty:{description:"For selection parameters, the predicate of empty selections returns true by default. Override this behavior, by setting this property `empty: false`.",type:"boolean"},param:{$ref:"#/definitions/ParameterName",description:"Filter using a parameter name."}},required:["param"],type:"object"},Parse:{additionalProperties:{$ref:"#/definitions/ParseValue"},type:"object"},ParseValue:{type:["string","null"]},PivotTransform:{additionalProperties:!1,properties:{groupby:{description:"The optional data fields to group by. If not specified, a single group containing all data objects will be used.",items:{$ref:"#/definitions/FieldName"},type:"array"},limit:{description:"An optional parameter indicating the maximum number of pivoted fields to generate. The default (`0`) applies no limit. The pivoted `pivot` names are sorted in ascending order prior to enforcing the limit. __Default value:__ `0`",type:"number"},op:{$ref:"#/definitions/AggregateOp",description:"The aggregation operation to apply to grouped `value` field values. __Default value:__ `sum`"},pivot:{$ref:"#/definitions/FieldName",description:"The data field to pivot on. The unique values of this field become new field names in the output stream."},value:{$ref:"#/definitions/FieldName",description:"The data field to populate pivoted fields. The aggregate values of this field become the values of the new pivoted fields."}},required:["pivot","value"],type:"object"},Point:{additionalProperties:!1,description:"Point geometry object. https://tools.ietf.org/html/rfc7946#section-3.1.2",properties:{bbox:{$ref:"#/definitions/BBox",description:"Bounding box of the coordinate range of the object's Geometries, Features, or Feature Collections. https://tools.ietf.org/html/rfc7946#section-5"},coordinates:{$ref:"#/definitions/Position"},type:{const:"Point",description:"Specifies the type of GeoJSON object.",type:"string"}},required:["coordinates","type"],type:"object"},PointSelectionConfig:{additionalProperties:!1,properties:{clear:{anyOf:[{$ref:"#/definitions/Stream"},{type:"string"},{type:"boolean"}],description:"Clears the selection, emptying it of all values. This property can be a [Event Stream](https://vega.github.io/vega/docs/event-streams/) or `false` to disable clear.\n\n__Default value:__ `dblclick`.\n\n__See also:__ [`clear` examples ](https://vega.github.io/vega-lite/docs/selection.html#clear) in the documentation."},encodings:{description:"An array of encoding channels. The corresponding data field values must match for a data tuple to fall within the selection.\n\n__See also:__ The [projection with `encodings` and `fields` section](https://vega.github.io/vega-lite/docs/selection.html#project) in the documentation.",items:{$ref:"#/definitions/SingleDefUnitChannel"},type:"array"},fields:{description:"An array of field names whose values must match for a data tuple to fall within the selection.\n\n__See also:__ The [projection with `encodings` and `fields` section](https://vega.github.io/vega-lite/docs/selection.html#project) in the documentation.",items:{$ref:"#/definitions/FieldName"},type:"array"},nearest:{description:"When true, an invisible voronoi diagram is computed to accelerate discrete selection. The data value _nearest_ the mouse cursor is added to the selection.\n\n__Default value:__ `false`, which means that data values must be interacted with directly (e.g., clicked on) to be added to the selection.\n\n__See also:__ [`nearest` examples](https://vega.github.io/vega-lite/docs/selection.html#nearest) documentation.",type:"boolean"},on:{anyOf:[{$ref:"#/definitions/Stream"},{type:"string"}],description:"A [Vega event stream](https://vega.github.io/vega/docs/event-streams/) (object or selector) that triggers the selection. For interval selections, the event stream must specify a [start and end](https://vega.github.io/vega/docs/event-streams/#between-filters).\n\n__See also:__ [`on` examples](https://vega.github.io/vega-lite/docs/selection.html#on) in the documentation."},resolve:{$ref:"#/definitions/SelectionResolution",description:'With layered and multi-view displays, a strategy that determines how selections\' data queries are resolved when applied in a filter transform, conditional encoding rule, or scale domain.\n\nOne of:\n- `"global"` -- only one brush exists for the entire SPLOM. When the user begins to drag, any previous brushes are cleared, and a new one is constructed.\n- `"union"` -- each cell contains its own brush, and points are highlighted if they lie within _any_ of these individual brushes.\n- `"intersect"` -- each cell contains its own brush, and points are highlighted only if they fall within _all_ of these individual brushes.\n\n__Default value:__ `global`.\n\n__See also:__ [`resolve` examples](https://vega.github.io/vega-lite/docs/selection.html#resolve) in the documentation.'},toggle:{description:'Controls whether data values should be toggled (inserted or removed from a point selection) or only ever inserted into point selections.\n\nOne of:\n- `true` -- the default behavior, which corresponds to `"event.shiftKey"`.  As a result, data values are toggled when the user interacts with the shift-key pressed.\n- `false` -- disables toggling behaviour; the selection will only ever contain a single data value corresponding to the most recent interaction.\n- A [Vega expression](https://vega.github.io/vega/docs/expressions/) which is re-evaluated as the user interacts. If the expression evaluates to `true`, the data value is toggled into or out of the point selection. If the expression evaluates to `false`, the point selection is first cleared, and the data value is then inserted. For example, setting the value to the Vega expression `"true"` will toggle data values without the user pressing the shift-key.\n\n__Default value:__ `true`\n\n__See also:__ [`toggle` examples](https://vega.github.io/vega-lite/docs/selection.html#toggle) in the documentation.',type:["string","boolean"]},type:{const:"point",description:'Determines the default event processing and data query for the selection. Vega-Lite currently supports two selection types:\n\n- `"point"` -- to select multiple discrete data values; the first value is selected on `click` and additional values toggled on shift-click.\n- `"interval"` -- to select a continuous range of data values on `drag`.',type:"string"}},required:["type"],type:"object"},PointSelectionConfigWithoutType:{additionalProperties:!1,properties:{clear:{anyOf:[{$ref:"#/definitions/Stream"},{type:"string"},{type:"boolean"}],description:"Clears the selection, emptying it of all values. This property can be a [Event Stream](https://vega.github.io/vega/docs/event-streams/) or `false` to disable clear.\n\n__Default value:__ `dblclick`.\n\n__See also:__ [`clear` examples ](https://vega.github.io/vega-lite/docs/selection.html#clear) in the documentation."},encodings:{description:"An array of encoding channels. The corresponding data field values must match for a data tuple to fall within the selection.\n\n__See also:__ The [projection with `encodings` and `fields` section](https://vega.github.io/vega-lite/docs/selection.html#project) in the documentation.",items:{$ref:"#/definitions/SingleDefUnitChannel"},type:"array"},fields:{description:"An array of field names whose values must match for a data tuple to fall within the selection.\n\n__See also:__ The [projection with `encodings` and `fields` section](https://vega.github.io/vega-lite/docs/selection.html#project) in the documentation.",items:{$ref:"#/definitions/FieldName"},type:"array"},nearest:{description:"When true, an invisible voronoi diagram is computed to accelerate discrete selection. The data value _nearest_ the mouse cursor is added to the selection.\n\n__Default value:__ `false`, which means that data values must be interacted with directly (e.g., clicked on) to be added to the selection.\n\n__See also:__ [`nearest` examples](https://vega.github.io/vega-lite/docs/selection.html#nearest) documentation.",type:"boolean"},on:{anyOf:[{$ref:"#/definitions/Stream"},{type:"string"}],description:"A [Vega event stream](https://vega.github.io/vega/docs/event-streams/) (object or selector) that triggers the selection. For interval selections, the event stream must specify a [start and end](https://vega.github.io/vega/docs/event-streams/#between-filters).\n\n__See also:__ [`on` examples](https://vega.github.io/vega-lite/docs/selection.html#on) in the documentation."},resolve:{$ref:"#/definitions/SelectionResolution",description:'With layered and multi-view displays, a strategy that determines how selections\' data queries are resolved when applied in a filter transform, conditional encoding rule, or scale domain.\n\nOne of:\n- `"global"` -- only one brush exists for the entire SPLOM. When the user begins to drag, any previous brushes are cleared, and a new one is constructed.\n- `"union"` -- each cell contains its own brush, and points are highlighted if they lie within _any_ of these individual brushes.\n- `"intersect"` -- each cell contains its own brush, and points are highlighted only if they fall within _all_ of these individual brushes.\n\n__Default value:__ `global`.\n\n__See also:__ [`resolve` examples](https://vega.github.io/vega-lite/docs/selection.html#resolve) in the documentation.'},toggle:{description:'Controls whether data values should be toggled (inserted or removed from a point selection) or only ever inserted into point selections.\n\nOne of:\n- `true` -- the default behavior, which corresponds to `"event.shiftKey"`.  As a result, data values are toggled when the user interacts with the shift-key pressed.\n- `false` -- disables toggling behaviour; the selection will only ever contain a single data value corresponding to the most recent interaction.\n- A [Vega expression](https://vega.github.io/vega/docs/expressions/) which is re-evaluated as the user interacts. If the expression evaluates to `true`, the data value is toggled into or out of the point selection. If the expression evaluates to `false`, the point selection is first cleared, and the data value is then inserted. For example, setting the value to the Vega expression `"true"` will toggle data values without the user pressing the shift-key.\n\n__Default value:__ `true`\n\n__See also:__ [`toggle` examples](https://vega.github.io/vega-lite/docs/selection.html#toggle) in the documentation.',type:["string","boolean"]}},type:"object"},PolarDef:{anyOf:[{$ref:"#/definitions/PositionFieldDefBase"},{$ref:"#/definitions/PositionDatumDefBase"},{$ref:"#/definitions/PositionValueDef"}]},Polygon:{additionalProperties:!1,description:"Polygon geometry object. https://tools.ietf.org/html/rfc7946#section-3.1.6",properties:{bbox:{$ref:"#/definitions/BBox",description:"Bounding box of the coordinate range of the object's Geometries, Features, or Feature Collections. https://tools.ietf.org/html/rfc7946#section-5"},coordinates:{items:{items:{$ref:"#/definitions/Position"},type:"array"},type:"array"},type:{const:"Polygon",description:"Specifies the type of GeoJSON object.",type:"string"}},required:["coordinates","type"],type:"object"},Position:{description:"A Position is an array of coordinates. https://tools.ietf.org/html/rfc7946#section-3.1.1 Array should contain between two and three elements. The previous GeoJSON specification allowed more elements (e.g., which could be used to represent M values), but the current specification only allows X, Y, and (optionally) Z to be defined.",items:{type:"number"},type:"array"},Position2Def:{anyOf:[{$ref:"#/definitions/SecondaryFieldDef"},{$ref:"#/definitions/DatumDef"},{$ref:"#/definitions/PositionValueDef"}]},PositionDatumDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},impute:{anyOf:[{$ref:"#/definitions/ImputeParams"},{type:"null"}],description:"An object defining the properties of the Impute Operation to be applied. The field value of the other positional channel is taken as `key` of the `Impute` Operation. The field of the `color` channel if specified is used as `groupby` of the `Impute` Operation.\n\n__See also:__ [`impute`](https://vega.github.io/vega-lite/docs/impute.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},stack:{anyOf:[{$ref:"#/definitions/StackOffset"},{type:"null"},{type:"boolean"}],description:'Type of stacking offset if the field should be stacked. `stack` is only applicable for `x`, `y`, `theta`, and `radius` channels with continuous domains. For example, `stack` of `y` can be used to customize stacking for a vertical bar chart.\n\n`stack` can be one of the following values:\n- `"zero"` or `true`: stacking with baseline offset at zero value of the scale (for creating typical stacked [bar](https://vega.github.io/vega-lite/docs/stack.html#bar) and [area](https://vega.github.io/vega-lite/docs/stack.html#area) chart).\n- `"normalize"` - stacking with normalized domain (for creating [normalized stacked bar and area charts](https://vega.github.io/vega-lite/docs/stack.html#normalized) and pie charts [with percentage tooltip](https://vega.github.io/vega-lite/docs/arc.html#tooltip)). <br/>\n-`"center"` - stacking with center baseline (for [streamgraph](https://vega.github.io/vega-lite/docs/stack.html#streamgraph)).\n- `null` or `false` - No-stacking. This will produce layered [bar](https://vega.github.io/vega-lite/docs/stack.html#layered-bar-chart) and area chart.\n\n__Default value:__ `zero` for plots with all of the following conditions are true: (1) the mark is `bar`, `area`, or `arc`; (2) the stacked measure channel (x or y) has a linear scale; (3) At least one of non-position channels mapped to an unaggregated field that is different from x and y. Otherwise, `null` by default.\n\n__See also:__ [`stack`](https://vega.github.io/vega-lite/docs/stack.html) documentation.'},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},PositionDatumDefBase:{additionalProperties:!1,properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},stack:{anyOf:[{$ref:"#/definitions/StackOffset"},{type:"null"},{type:"boolean"}],description:'Type of stacking offset if the field should be stacked. `stack` is only applicable for `x`, `y`, `theta`, and `radius` channels with continuous domains. For example, `stack` of `y` can be used to customize stacking for a vertical bar chart.\n\n`stack` can be one of the following values:\n- `"zero"` or `true`: stacking with baseline offset at zero value of the scale (for creating typical stacked [bar](https://vega.github.io/vega-lite/docs/stack.html#bar) and [area](https://vega.github.io/vega-lite/docs/stack.html#area) chart).\n- `"normalize"` - stacking with normalized domain (for creating [normalized stacked bar and area charts](https://vega.github.io/vega-lite/docs/stack.html#normalized) and pie charts [with percentage tooltip](https://vega.github.io/vega-lite/docs/arc.html#tooltip)). <br/>\n-`"center"` - stacking with center baseline (for [streamgraph](https://vega.github.io/vega-lite/docs/stack.html#streamgraph)).\n- `null` or `false` - No-stacking. This will produce layered [bar](https://vega.github.io/vega-lite/docs/stack.html#layered-bar-chart) and area chart.\n\n__Default value:__ `zero` for plots with all of the following conditions are true: (1) the mark is `bar`, `area`, or `arc`; (2) the stacked measure channel (x or y) has a linear scale; (3) At least one of non-position channels mapped to an unaggregated field that is different from x and y. Otherwise, `null` by default.\n\n__See also:__ [`stack`](https://vega.github.io/vega-lite/docs/stack.html) documentation.'},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},PositionDef:{anyOf:[{$ref:"#/definitions/PositionFieldDef"},{$ref:"#/definitions/PositionDatumDef"},{$ref:"#/definitions/PositionValueDef"}]},PositionFieldDef:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},impute:{anyOf:[{$ref:"#/definitions/ImputeParams"},{type:"null"}],description:"An object defining the properties of the Impute Operation to be applied. The field value of the other positional channel is taken as `key` of the `Impute` Operation. The field of the `color` channel if specified is used as `groupby` of the `Impute` Operation.\n\n__See also:__ [`impute`](https://vega.github.io/vega-lite/docs/impute.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},stack:{anyOf:[{$ref:"#/definitions/StackOffset"},{type:"null"},{type:"boolean"}],description:'Type of stacking offset if the field should be stacked. `stack` is only applicable for `x`, `y`, `theta`, and `radius` channels with continuous domains. For example, `stack` of `y` can be used to customize stacking for a vertical bar chart.\n\n`stack` can be one of the following values:\n- `"zero"` or `true`: stacking with baseline offset at zero value of the scale (for creating typical stacked [bar](https://vega.github.io/vega-lite/docs/stack.html#bar) and [area](https://vega.github.io/vega-lite/docs/stack.html#area) chart).\n- `"normalize"` - stacking with normalized domain (for creating [normalized stacked bar and area charts](https://vega.github.io/vega-lite/docs/stack.html#normalized) and pie charts [with percentage tooltip](https://vega.github.io/vega-lite/docs/arc.html#tooltip)). <br/>\n-`"center"` - stacking with center baseline (for [streamgraph](https://vega.github.io/vega-lite/docs/stack.html#streamgraph)).\n- `null` or `false` - No-stacking. This will produce layered [bar](https://vega.github.io/vega-lite/docs/stack.html#layered-bar-chart) and area chart.\n\n__Default value:__ `zero` for plots with all of the following conditions are true: (1) the mark is `bar`, `area`, or `arc`; (2) the stacked measure channel (x or y) has a linear scale; (3) At least one of non-position channels mapped to an unaggregated field that is different from x and y. Otherwise, `null` by default.\n\n__See also:__ [`stack`](https://vega.github.io/vega-lite/docs/stack.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},PositionFieldDefBase:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},stack:{anyOf:[{$ref:"#/definitions/StackOffset"},{type:"null"},{type:"boolean"}],description:'Type of stacking offset if the field should be stacked. `stack` is only applicable for `x`, `y`, `theta`, and `radius` channels with continuous domains. For example, `stack` of `y` can be used to customize stacking for a vertical bar chart.\n\n`stack` can be one of the following values:\n- `"zero"` or `true`: stacking with baseline offset at zero value of the scale (for creating typical stacked [bar](https://vega.github.io/vega-lite/docs/stack.html#bar) and [area](https://vega.github.io/vega-lite/docs/stack.html#area) chart).\n- `"normalize"` - stacking with normalized domain (for creating [normalized stacked bar and area charts](https://vega.github.io/vega-lite/docs/stack.html#normalized) and pie charts [with percentage tooltip](https://vega.github.io/vega-lite/docs/arc.html#tooltip)). <br/>\n-`"center"` - stacking with center baseline (for [streamgraph](https://vega.github.io/vega-lite/docs/stack.html#streamgraph)).\n- `null` or `false` - No-stacking. This will produce layered [bar](https://vega.github.io/vega-lite/docs/stack.html#layered-bar-chart) and area chart.\n\n__Default value:__ `zero` for plots with all of the following conditions are true: (1) the mark is `bar`, `area`, or `arc`; (2) the stacked measure channel (x or y) has a linear scale; (3) At least one of non-position channels mapped to an unaggregated field that is different from x and y. Otherwise, `null` by default.\n\n__See also:__ [`stack`](https://vega.github.io/vega-lite/docs/stack.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},PositionValueDef:{$ref:'#/definitions/ValueDef<(number|"width"|"height"|ExprRef)>'},Predicate:{anyOf:[{$ref:"#/definitions/FieldEqualPredicate"},{$ref:"#/definitions/FieldRangePredicate"},{$ref:"#/definitions/FieldOneOfPredicate"},{$ref:"#/definitions/FieldLTPredicate"},{$ref:"#/definitions/FieldGTPredicate"},{$ref:"#/definitions/FieldLTEPredicate"},{$ref:"#/definitions/FieldGTEPredicate"},{$ref:"#/definitions/FieldValidPredicate"},{$ref:"#/definitions/ParameterPredicate"},{type:"string"}]},PrimitiveValue:{type:["number","string","boolean","null"]},Projection:{additionalProperties:!1,properties:{center:{anyOf:[{$ref:"#/definitions/Vector2<number>",description:"The projection's center, a two-element array of longitude and latitude in degrees.\n\n__Default value:__ `[0, 0]`"},{$ref:"#/definitions/ExprRef"}]},clipAngle:{anyOf:[{description:"The projection's clipping circle radius to the specified angle in degrees. If `null`, switches to [antimeridian](http://bl.ocks.org/mbostock/3788999) cutting rather than small-circle clipping.",type:"number"},{$ref:"#/definitions/ExprRef"}]},clipExtent:{anyOf:[{$ref:"#/definitions/Vector2<Vector2<number>>",description:"The projection's viewport clip extent to the specified bounds in pixels. The extent bounds are specified as an array `[[x0, y0], [x1, y1]]`, where `x0` is the left-side of the viewport, `y0` is the top, `x1` is the right and `y1` is the bottom. If `null`, no viewport clipping is performed."},{$ref:"#/definitions/ExprRef"}]},coefficient:{anyOf:[{description:"The coefficient parameter for the `hammer` projection.\n\n__Default value:__ `2`",type:"number"},{$ref:"#/definitions/ExprRef"}]},distance:{anyOf:[{description:"For the `satellite` projection, the distance from the center of the sphere to the point of view, as a proportion of the spheres radius. The recommended maximum clip angle for a given `distance` is acos(1 / distance) converted to degrees. If tilt is also applied, then more conservative clipping may be necessary.\n\n__Default value:__ `2.0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},extent:{anyOf:[{$ref:"#/definitions/Vector2<Vector2<number>>"},{$ref:"#/definitions/ExprRef"}]},fit:{anyOf:[{$ref:"#/definitions/Fit"},{items:{$ref:"#/definitions/Fit"},type:"array"},{$ref:"#/definitions/ExprRef"}]},fraction:{anyOf:[{description:"The fraction parameter for the `bottomley` projection.\n\n__Default value:__ `0.5`, corresponding to a sin() where  = /6.",type:"number"},{$ref:"#/definitions/ExprRef"}]},lobes:{anyOf:[{description:"The number of lobes in projections that support multi-lobe views: `berghaus`, `gingery`, or `healpix`. The default value varies based on the projection type.",type:"number"},{$ref:"#/definitions/ExprRef"}]},parallel:{anyOf:[{description:"The parallel parameter for projections that support it: `armadillo`, `bonne`, `craig`, `cylindricalEqualArea`, `cylindricalStereographic`, `hammerRetroazimuthal`, `loximuthal`, or `rectangularPolyconic`. The default value varies based on the projection type.",type:"number"},{$ref:"#/definitions/ExprRef"}]},parallels:{anyOf:[{description:"For conic projections, the [two standard parallels](https://en.wikipedia.org/wiki/Map_projection#Conic) that define the map layout. The default depends on the specific conic projection used.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},pointRadius:{anyOf:[{description:"The default radius (in pixels) to use when drawing GeoJSON `Point` and `MultiPoint` geometries. This parameter sets a constant default value. To modify the point radius in response to data, see the corresponding parameter of the GeoPath and GeoShape transforms.\n\n__Default value:__ `4.5`",type:"number"},{$ref:"#/definitions/ExprRef"}]},precision:{anyOf:[{description:"The threshold for the projection's [adaptive resampling](http://bl.ocks.org/mbostock/3795544) to the specified value in pixels. This value corresponds to the [DouglasPeucker distance](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm). If precision is not specified, returns the projection's current resampling precision which defaults to `0.5  0.70710`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},radius:{anyOf:[{description:"The radius parameter for the `airy` or `gingery` projection. The default value varies based on the projection type.",type:"number"},{$ref:"#/definitions/ExprRef"}]},ratio:{anyOf:[{description:"The ratio parameter for the `hill`, `hufnagel`, or `wagner` projections. The default value varies based on the projection type.",type:"number"},{$ref:"#/definitions/ExprRef"}]},reflectX:{anyOf:[{description:"Sets whether or not the x-dimension is reflected (negated) in the output.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},reflectY:{anyOf:[{description:"Sets whether or not the y-dimension is reflected (negated) in the output.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},rotate:{anyOf:[{anyOf:[{$ref:"#/definitions/Vector2<number>"},{$ref:"#/definitions/Vector3<number>"}],description:"The projection's three-axis rotation to the specified angles, which must be a two- or three-element array of numbers [`lambda`, `phi`, `gamma`] specifying the rotation angles in degrees about each spherical axis. (These correspond to yaw, pitch and roll.)\n\n__Default value:__ `[0, 0, 0]`"},{$ref:"#/definitions/ExprRef"}]},scale:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The projections scale (zoom) factor, overriding automatic fitting. The default scale is projection-specific. The scale factor corresponds linearly to the distance between projected points; however, scale factor values are not equivalent across projections."},size:{anyOf:[{$ref:"#/definitions/Vector2<number>",description:"Used in conjunction with fit, provides the width and height in pixels of the area to which the projection should be automatically fit."},{$ref:"#/definitions/ExprRef"}]},spacing:{anyOf:[{description:"The spacing parameter for the `lagrange` projection.\n\n__Default value:__ `0.5`",type:"number"},{$ref:"#/definitions/ExprRef"}]},tilt:{anyOf:[{description:"The tilt angle (in degrees) for the `satellite` projection.\n\n__Default value:__ `0`.",type:"number"},{$ref:"#/definitions/ExprRef"}]},translate:{anyOf:[{$ref:"#/definitions/Vector2<number>"},{$ref:"#/definitions/ExprRef"}],description:"The projections translation offset as a two-element array `[tx, ty]`."},type:{anyOf:[{$ref:"#/definitions/ProjectionType"},{$ref:"#/definitions/ExprRef"}],description:'The cartographic projection to use. This value is case-insensitive, for example `"albers"` and `"Albers"` indicate the same projection type. You can find all valid projection types [in the documentation](https://vega.github.io/vega-lite/docs/projection.html#projection-types).\n\n__Default value:__ `equalEarth`'}},type:"object"},ProjectionConfig:{$ref:"#/definitions/Projection",description:"Any property of Projection can be in config"},ProjectionType:{enum:["albers","albersUsa","azimuthalEqualArea","azimuthalEquidistant","conicConformal","conicEqualArea","conicEquidistant","equalEarth","equirectangular","gnomonic","identity","mercator","naturalEarth1","orthographic","stereographic","transverseMercator"],type:"string"},QuantileTransform:{additionalProperties:!1,properties:{as:{description:'The output field names for the probability and quantile values.\n\n__Default value:__ `["prob", "value"]`',items:{$ref:"#/definitions/FieldName"},maxItems:2,minItems:2,type:"array"},groupby:{description:"The data fields to group by. If not specified, a single group containing all data objects will be used.",items:{$ref:"#/definitions/FieldName"},type:"array"},probs:{description:"An array of probabilities in the range (0, 1) for which to compute quantile values. If not specified, the *step* parameter will be used.",items:{type:"number"},type:"array"},quantile:{$ref:"#/definitions/FieldName",description:"The data field for which to perform quantile estimation."},step:{description:"A probability step size (default 0.01) for sampling quantile values. All values from one-half the step size up to 1 (exclusive) will be sampled. This parameter is only used if the *probs* parameter is not provided.",type:"number"}},required:["quantile"],type:"object"},RadialGradient:{additionalProperties:!1,properties:{gradient:{const:"radial",description:'The type of gradient. Use `"radial"` for a radial gradient.',type:"string"},id:{type:"string"},r1:{description:"The radius length, in normalized [0, 1] coordinates, of the inner circle for the gradient.\n\n__Default value:__ `0`",type:"number"},r2:{description:"The radius length, in normalized [0, 1] coordinates, of the outer circle for the gradient.\n\n__Default value:__ `0.5`",type:"number"},stops:{description:"An array of gradient stops defining the gradient color sequence.",items:{$ref:"#/definitions/GradientStop"},type:"array"},x1:{description:"The x-coordinate, in normalized [0, 1] coordinates, for the center of the inner circle for the gradient.\n\n__Default value:__ `0.5`",type:"number"},x2:{description:"The x-coordinate, in normalized [0, 1] coordinates, for the center of the outer circle for the gradient.\n\n__Default value:__ `0.5`",type:"number"},y1:{description:"The y-coordinate, in normalized [0, 1] coordinates, for the center of the inner circle for the gradient.\n\n__Default value:__ `0.5`",type:"number"},y2:{description:"The y-coordinate, in normalized [0, 1] coordinates, for the center of the outer circle for the gradient.\n\n__Default value:__ `0.5`",type:"number"}},required:["gradient","stops"],type:"object"},RangeConfig:{additionalProperties:{anyOf:[{$ref:"#/definitions/RangeScheme"},{type:"array"}]},properties:{category:{anyOf:[{$ref:"#/definitions/RangeScheme"},{items:{$ref:"#/definitions/Color"},type:"array"}],description:"Default [color scheme](https://vega.github.io/vega/docs/schemes/) for categorical data."},diverging:{anyOf:[{$ref:"#/definitions/RangeScheme"},{items:{$ref:"#/definitions/Color"},type:"array"}],description:"Default [color scheme](https://vega.github.io/vega/docs/schemes/) for diverging quantitative ramps."},heatmap:{anyOf:[{$ref:"#/definitions/RangeScheme"},{items:{$ref:"#/definitions/Color"},type:"array"}],description:"Default [color scheme](https://vega.github.io/vega/docs/schemes/) for quantitative heatmaps."},ordinal:{anyOf:[{$ref:"#/definitions/RangeScheme"},{items:{$ref:"#/definitions/Color"},type:"array"}],description:"Default [color scheme](https://vega.github.io/vega/docs/schemes/) for rank-ordered data."},ramp:{anyOf:[{$ref:"#/definitions/RangeScheme"},{items:{$ref:"#/definitions/Color"},type:"array"}],description:"Default [color scheme](https://vega.github.io/vega/docs/schemes/) for sequential quantitative ramps."},symbol:{description:"Array of [symbol](https://vega.github.io/vega/docs/marks/symbol/) names or paths for the default shape palette.",items:{$ref:"#/definitions/SymbolShape"},type:"array"}},type:"object"},RangeEnum:{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"],type:"string"},RangeRaw:{items:{anyOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/definitions/RangeRawArray"}]},type:"array"},RangeRawArray:{items:{type:"number"},type:"array"},RangeScheme:{anyOf:[{$ref:"#/definitions/RangeEnum"},{$ref:"#/definitions/RangeRaw"},{additionalProperties:!1,properties:{count:{type:"number"},extent:{items:{type:"number"},type:"array"},scheme:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"},{$ref:"#/definitions/ColorScheme"}]}},required:["scheme"],type:"object"}]},RectConfig:{additionalProperties:!1,properties:{align:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:'The horizontal alignment of the text or ranged marks (area, bar, image, rect, rule). One of `"left"`, `"right"`, `"center"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},angle:{anyOf:[{description:"The rotation angle of the text, in degrees.",maximum:360,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG element, removing the mark item from the ARIA accessibility tree.',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},ariaRole:{anyOf:[{description:'Sets the type of user interface element of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "role" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},ariaRoleDescription:{anyOf:[{description:'A human-readable, author-localized description for the role of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "aria-roledescription" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},aspect:{anyOf:[{description:"Whether to keep aspect ratio of image marks.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},baseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'For text marks, the vertical text baseline. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, `"line-bottom"`, or an expression reference that provides one of the valid values. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `lineHeight` rather than `fontSize` alone.\n\nFor range marks, the vertical alignment of the marks. One of `"top"`, `"middle"`, `"bottom"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},binSpacing:{description:"Offset between bars for binned field. The ideal value for this is either 0 (preferred by statisticians) or 1 (Vega-Lite default, D3 example style).\n\n__Default value:__ `1`",minimum:0,type:"number"},blend:{anyOf:[{$ref:"#/definitions/Blend",description:'The color blend mode for drawing an item on its current background. Any valid [CSS mix-blend-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode) value can be used.\n\n__Default value: `"source-over"`'},{$ref:"#/definitions/ExprRef"}]},color:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{$ref:"#/definitions/ExprRef"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'},continuousBandSize:{description:"The default size of the bars on continuous scales.\n\n__Default value:__ `5`",minimum:0,type:"number"},cornerRadius:{anyOf:[{description:"The radius in pixels of rounded rectangles or arcs' corners.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' top right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' top left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cursor:{anyOf:[{$ref:"#/definitions/Cursor",description:"The mouse cursor used over the mark. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used."},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute).',type:"string"},{$ref:"#/definitions/ExprRef"}]},dir:{anyOf:[{$ref:"#/definitions/TextDirection",description:'The direction of the text. One of `"ltr"` (left-to-right) or `"rtl"` (right-to-left). This property determines on which side is truncated in response to the limit parameter.\n\n__Default value:__ `"ltr"`'},{$ref:"#/definitions/ExprRef"}]},discreteBandSize:{anyOf:[{type:"number"},{$ref:"#/definitions/RelativeBandSize"}],description:"The default size of the bars with discrete dimensions. If unspecified, the default size is  `step-2`, which provides 2 pixel offset between bars.",minimum:0},dx:{anyOf:[{description:"The horizontal offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},dy:{anyOf:[{description:"The vertical offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},ellipsis:{anyOf:[{description:'The ellipsis string for text truncated in response to the limit parameter.\n\n__Default value:__ `""`',type:"string"},{$ref:"#/definitions/ExprRef"}]},endAngle:{anyOf:[{description:"The end angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},fill:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default fill color. This property has higher precedence than `config.color`. Set to `null` to remove fill.\n\n__Default value:__ (None)"},fillOpacity:{anyOf:[{description:"The fill opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},filled:{description:"Whether the mark's color should be used as fill color instead of stroke color.\n\n__Default value:__ `false` for all `point`, `line`, and `rule` marks as well as `geoshape` marks for [`graticule`](https://vega.github.io/vega-lite/docs/data.html#graticule) data sources; otherwise, `true`.\n\n__Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).",type:"boolean"},font:{anyOf:[{description:'The typeface to set the text in (e.g., `"Helvetica Neue"`).',type:"string"},{$ref:"#/definitions/ExprRef"}]},fontSize:{anyOf:[{description:"The font size, in pixels.\n\n__Default value:__ `11`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},fontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:'The font style (e.g., `"italic"`).'},{$ref:"#/definitions/ExprRef"}]},fontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'The font weight. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},height:{anyOf:[{description:"Height of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},href:{anyOf:[{$ref:"#/definitions/URI",description:"A URL to load upon mouse click. If defined, the mark acts as a hyperlink."},{$ref:"#/definitions/ExprRef"}]},innerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The inner radius in pixels of arc marks. `innerRadius` is an alias for `radius2`.\n\n__Default value:__ `0`",minimum:0},interpolate:{anyOf:[{$ref:"#/definitions/Interpolate",description:'The line interpolation method to use for line and area marks. One of the following:\n- `"linear"`: piecewise linear segments, as in a polyline.\n- `"linear-closed"`: close the linear segments to form a polygon.\n- `"step"`: alternate between horizontal and vertical segments, as in a step function.\n- `"step-before"`: alternate between vertical and horizontal segments, as in a step function.\n- `"step-after"`: alternate between horizontal and vertical segments, as in a step function.\n- `"basis"`: a B-spline, with control point duplication on the ends.\n- `"basis-open"`: an open B-spline; may not intersect the start or end.\n- `"basis-closed"`: a closed B-spline, as in a loop.\n- `"cardinal"`: a Cardinal spline, with control point duplication on the ends.\n- `"cardinal-open"`: an open Cardinal spline; may not intersect the start or end, but will intersect other control points.\n- `"cardinal-closed"`: a closed Cardinal spline, as in a loop.\n- `"bundle"`: equivalent to basis, except the tension parameter is used to straighten the spline.\n- `"monotone"`: cubic interpolation that preserves monotonicity in y.'},{$ref:"#/definitions/ExprRef"}]},invalid:{anyOf:[{$ref:"#/definitions/MarkInvalidDataMode"},{type:"null"}],description:'Invalid data mode, which defines how the marks and corresponding scales should represent invalid values (`null` and `NaN` in continuous scales *without* defined output for invalid values).\n\n- `"filter"`  *Exclude* all invalid values from the visualization\'s *marks* and *scales*. For path marks (for line, area, trail), this option will create paths that connect valid points, as if the data rows with invalid values do not exist.\n\n- `"break-paths-filter-domains"`  Break path marks (for line, area, trail) at invalid values.  For non-path marks, this is equivalent to `"filter"`. All *scale* domains will *exclude* these filtered data points.\n\n- `"break-paths-show-domains"`  Break paths (for line, area, trail) at invalid values.  Hide invalid values for non-path marks. All *scale* domains will *include* these filtered data points (for both path and non-path marks).\n\n- `"show"` or `null`  Show all data points in the marks and scale domains. Each scale will use the output for invalid values defined in `config.scale.invalid` or, if unspecified, by default invalid values will produce the same visual values as zero (if the scale includes zero) or the minimum value (if the scale does not include zero).\n\n- `"break-paths-show-path-domains"` (default)  This is equivalent to `"break-paths-show-domains"` for path-based marks (line/area/trail) and `"filter"` for non-path marks.\n\n__Note__: If any channel\'s scale has an output for invalid values defined in `config.scale.invalid`, all values for the scales will be considered "valid" since they can produce a reasonable output for the scales. Thus, fields for such channels will not be filtered and will not cause path breaks.'},limit:{anyOf:[{description:"The maximum length of the text mark in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0` -- indicating no limit",type:"number"},{$ref:"#/definitions/ExprRef"}]},lineBreak:{anyOf:[{description:"A delimiter, such as a newline character, upon which to break text strings into multiple lines. This property is ignored if the text is array-valued.",type:"string"},{$ref:"#/definitions/ExprRef"}]},lineHeight:{anyOf:[{description:"The line height in pixels (the spacing between subsequent lines of text) for multi-line text marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},minBandSize:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The minimum band size for bar and rectangle marks. __Default value:__ `0.25`"},opacity:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The overall opacity (value between [0,1]).\n\n__Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.",maximum:1,minimum:0},order:{description:"For line and trail marks, this `order` property can be set to `null` or `false` to make the lines use the original order in the data sources.",type:["null","boolean"]},orient:{$ref:"#/definitions/Orientation",description:`The orientation of a non-stacked bar, tick, area, and line charts. The value is either horizontal (default) or vertical.
- For bar, rule and tick, this determines whether the size of the bar and tick should be applied to x or y dimension.
- For area, this property determines the orient property of the Vega output.
- For line and trail marks, this property determines the sort order of the points in the line if \`config.sortLineBy\` is not specified. For stacked charts, this is always determined by the orientation of the stack; therefore explicitly specified value will be ignored.`},outerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The outer radius in pixels of arc marks. `outerRadius` is an alias for `radius`.\n\n__Default value:__ `0`",minimum:0},padAngle:{anyOf:[{description:"The angular padding applied to sides of the arc, in radians.",type:"number"},{$ref:"#/definitions/ExprRef"}]},radius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"For arc mark, the primary (outer) radius in pixels.\n\nFor text marks, polar coordinate radial offset, in pixels, of the text from the origin determined by the `x` and `y` properties.\n\n__Default value:__ `min(plot_width, plot_height)/2`",minimum:0},radius2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The secondary (inner) radius in pixels of arc marks.\n\n__Default value:__ `0`",minimum:0},shape:{anyOf:[{anyOf:[{$ref:"#/definitions/SymbolShape"},{type:"string"}],description:'Shape of the point marks. Supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- the line symbol `"stroke"`\n- centered directional shapes `"arrow"`, `"wedge"`, or `"triangle"`\n- a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) (For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.)\n\n__Default value:__ `"circle"`'},{$ref:"#/definitions/ExprRef"}]},size:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default size for marks.\n- For `point`/`circle`/`square`, this represents the pixel area of the marks. Note that this value sets the area of the symbol; the side lengths will increase with the square root of this value.\n- For `bar`, this represents the band size of the bar, in pixels.\n- For `text`, this represents the font size, in pixels.\n\n__Default value:__\n- `30` for point, circle, square marks; width/height's `step`\n- `2` for bar marks with discrete dimensions;\n- `5` for bar marks with continuous dimensions;\n- `11` for text marks.",minimum:0},smooth:{anyOf:[{description:"A boolean flag (default true) indicating if the image should be smoothed when resized. If false, individual pixels should be scaled directly rather than interpolated with smoothing. For SVG rendering, this option may not work in some browsers due to lack of standardization.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},startAngle:{anyOf:[{description:"The start angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},stroke:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default stroke color. This property has higher precedence than `config.color`. Set to `null` to remove stroke.\n\n__Default value:__ (None)"},strokeCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for line ending style. One of `"butt"`, `"round"`, or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},strokeDash:{anyOf:[{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},strokeDashOffset:{anyOf:[{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeJoin:{anyOf:[{$ref:"#/definitions/StrokeJoin",description:'The stroke line join method. One of `"miter"`, `"round"` or `"bevel"`.\n\n__Default value:__ `"miter"`'},{$ref:"#/definitions/ExprRef"}]},strokeMiterLimit:{anyOf:[{description:"The miter limit at which to bevel a line join.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOffset:{anyOf:[{description:"The offset in pixels at which to draw the group stroke and fill. If unspecified, the default behavior is to dynamically offset stroked groups such that 1 pixel stroke widths align with the pixel grid.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOpacity:{anyOf:[{description:"The stroke opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeWidth:{anyOf:[{description:"The stroke width, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},tension:{anyOf:[{description:"Depending on the interpolation type, sets the tension parameter (for line and area marks).",type:"number"},{$ref:"#/definitions/ExprRef"}]},text:{anyOf:[{$ref:"#/definitions/Text",description:"Placeholder text if the `text` channel is not specified"},{$ref:"#/definitions/ExprRef"}]},theta:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:`- For arc marks, the arc length in radians if theta2 is not specified, otherwise the start arc angle. (A value of 0 indicates up or north, increasing values proceed clockwise.)

- For text marks, polar coordinate angle in radians.`,maximum:360,minimum:0},theta2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The end angle of arc marks in radians. A value of 0 indicates up or north, increasing values proceed clockwise."},time:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}]},timeUnitBandPosition:{description:"Default relative band position for a time unit. If set to `0`, the marks will be positioned at the beginning of the time unit band step. If set to `0.5`, the marks will be positioned in the middle of the time unit band step.",type:"number"},timeUnitBandSize:{description:"Default relative band size for a time unit. If set to `1`, the bandwidth of the marks will be equal to the time unit band step. If set to `0.5`, bandwidth of the marks will be half of the time unit band step.",type:"number"},tooltip:{anyOf:[{type:"number"},{type:"string"},{type:"boolean"},{$ref:"#/definitions/TooltipContent"},{$ref:"#/definitions/ExprRef"},{type:"null"}],description:'The tooltip text string to show upon mouse hover or an object defining which fields should the tooltip be derived from.\n\n- If `tooltip` is `true` or `{"content": "encoding"}`, then all fields from `encoding` will be used.\n- If `tooltip` is `{"content": "data"}`, then all fields that appear in the highlighted data point will be used.\n- If set to `null` or `false`, then no tooltip will be used.\n\nSee the [`tooltip`](https://vega.github.io/vega-lite/docs/tooltip.html) documentation for a detailed discussion about tooltip  in Vega-Lite.\n\n__Default value:__ `null`'},url:{anyOf:[{$ref:"#/definitions/URI",description:"The URL of the image file for image marks."},{$ref:"#/definitions/ExprRef"}]},width:{anyOf:[{description:"Width of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},x:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X coordinates of the marks, or width of horizontal `"bar"` and `"area"` without specified `x2` or `width`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},y:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y coordinates of the marks, or height of vertical `"bar"` and `"area"` without specified `y2` or `height`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'}},type:"object"},RegressionTransform:{additionalProperties:!1,properties:{as:{description:`The output field names for the smoothed points generated by the regression transform.

__Default value:__ The field names of the input x and y values.`,items:{$ref:"#/definitions/FieldName"},maxItems:2,minItems:2,type:"array"},extent:{description:"A [min, max] domain over the independent (x) field for the starting and ending points of the generated trend line.",items:{type:"number"},maxItems:2,minItems:2,type:"array"},groupby:{description:"The data fields to group by. If not specified, a single group containing all data objects will be used.",items:{$ref:"#/definitions/FieldName"},type:"array"},method:{description:'The functional form of the regression model. One of `"linear"`, `"log"`, `"exp"`, `"pow"`, `"quad"`, or `"poly"`.\n\n__Default value:__ `"linear"`',enum:["linear","log","exp","pow","quad","poly"],type:"string"},on:{$ref:"#/definitions/FieldName",description:"The data field of the independent variable to use a predictor."},order:{description:"The polynomial order (number of coefficients) for the 'poly' method.\n\n__Default value:__ `3`",type:"number"},params:{description:"A boolean flag indicating if the transform should return the regression model parameters (one object per group), rather than trend line points. The resulting objects include a `coef` array of fitted coefficient values (starting with the intercept term and then including terms of increasing order) and an `rSquared` value (indicating the total variance explained by the model).\n\n__Default value:__ `false`",type:"boolean"},regression:{$ref:"#/definitions/FieldName",description:"The data field of the dependent variable to predict."}},required:["regression","on"],type:"object"},RelativeBandSize:{additionalProperties:!1,properties:{band:{description:"The relative band size.  For example `0.5` means half of the band scale's band width.",type:"number"}},required:["band"],type:"object"},RepeatMapping:{additionalProperties:!1,properties:{column:{description:"An array of fields to be repeated horizontally.",items:{type:"string"},type:"array"},row:{description:"An array of fields to be repeated vertically.",items:{type:"string"},type:"array"}},type:"object"},RepeatRef:{additionalProperties:!1,description:"Reference to a repeated value.",properties:{repeat:{enum:["row","column","repeat","layer"],type:"string"}},required:["repeat"],type:"object"},RepeatSpec:{anyOf:[{$ref:"#/definitions/NonLayerRepeatSpec"},{$ref:"#/definitions/LayerRepeatSpec"}]},Resolve:{additionalProperties:!1,description:'Defines how scales, axes, and legends from different specs should be combined. Resolve is a mapping from `scale`, `axis`, and `legend` to a mapping from channels to resolutions. Scales and guides can be resolved to be `"independent"` or `"shared"`.',properties:{axis:{$ref:"#/definitions/AxisResolveMap"},legend:{$ref:"#/definitions/LegendResolveMap"},scale:{$ref:"#/definitions/ScaleResolveMap"}},type:"object"},ResolveMode:{enum:["independent","shared"],type:"string"},"RowCol<LayoutAlign>":{additionalProperties:!1,properties:{column:{$ref:"#/definitions/LayoutAlign"},row:{$ref:"#/definitions/LayoutAlign"}},type:"object"},"RowCol<boolean>":{additionalProperties:!1,properties:{column:{type:"boolean"},row:{type:"boolean"}},type:"object"},"RowCol<number>":{additionalProperties:!1,properties:{column:{type:"number"},row:{type:"number"}},type:"object"},RowColumnEncodingFieldDef:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},align:{$ref:"#/definitions/LayoutAlign",description:'The alignment to apply to row/column facet\'s subplot. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\n__Default value:__ `"all"`.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},center:{description:"Boolean flag indicating if facet's subviews should be centered relative to their respective rows or columns.\n\n__Default value:__ `false`",type:"boolean"},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},header:{anyOf:[{$ref:"#/definitions/Header"},{type:"null"}],description:"An object defining properties of a facet's header."},sort:{anyOf:[{$ref:"#/definitions/SortArray"},{$ref:"#/definitions/SortOrder"},{$ref:"#/definitions/EncodingSortField"},{type:"null"}],description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` is not supported for `row` and `column`.'},spacing:{description:'The spacing in pixels between facet\'s sub-views.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)',type:"number"},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},SampleTransform:{additionalProperties:!1,properties:{sample:{description:"The maximum number of data objects to include in the sample.\n\n__Default value:__ `1000`",type:"number"}},required:["sample"],type:"object"},Scale:{additionalProperties:!1,properties:{align:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The alignment of the steps within the scale range.\n\nThis value must lie in the range `[0,1]`. A value of `0.5` indicates that the steps should be centered within the range. A value of `0` or `1` may be used to shift the bands to one side, say to position them adjacent to an axis.\n\n__Default value:__ `0.5`"},base:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The logarithm base of the `log` scale (default `10`)."},bins:{$ref:"#/definitions/ScaleBins",description:`Bin boundaries can be provided to scales as either an explicit array of bin boundaries or as a bin specification object. The legal values are:
- An [array](../types/#Array) literal of bin boundary values. For example, \`[0, 5, 10, 15, 20]\`. The array must include both starting and ending boundaries. The previous example uses five values to indicate a total of four bin intervals: [0-5), [5-10), [10-15), [15-20]. Array literals may include signal references as elements.
- A [bin specification object](https://vega.github.io/vega-lite/docs/scale.html#bins) that indicates the bin _step_ size, and optionally the _start_ and _stop_ boundaries.
- An array of bin boundaries over the scale domain. If provided, axes and legends will use the bin boundaries to inform the choice of tick marks and text labels.`},clamp:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ExprRef"}],description:"If `true`, values that exceed the data domain are clamped to either the minimum or maximum range value\n\n__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/config.html#scale-config)'s `clamp` (`true` by default)."},constant:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"A constant determining the slope of the symlog function around zero. Only used for `symlog` scales.\n\n__Default value:__ `1`"},domain:{anyOf:[{items:{anyOf:[{type:"null"},{type:"string"},{type:"number"},{type:"boolean"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"}]},type:"array"},{const:"unaggregated",type:"string"},{$ref:"#/definitions/ParameterExtent"},{$ref:"#/definitions/DomainUnionWith"},{$ref:"#/definitions/ExprRef"}],description:'Customized domain values in the form of constant values or dynamic values driven by a parameter.\n\n1) Constant `domain` for _quantitative_ fields can take one of the following forms:\n\n- A two-element array with minimum and maximum values. To create a diverging scale, this two-element array can be combined with the `domainMid` property.\n- An array with more than two entries, for [Piecewise quantitative scales](https://vega.github.io/vega-lite/docs/scale.html#piecewise).\n- A string value `"unaggregated"`, if the input field is aggregated, to indicate that the domain should include the raw data values prior to the aggregation.\n\n2) Constant `domain` for _temporal_ fields can be a two-element array with minimum and maximum values, in the form of either timestamps or the [DateTime definition objects](https://vega.github.io/vega-lite/docs/types.html#datetime).\n\n3) Constant `domain` for _ordinal_ and _nominal_ fields can be an array that lists valid input values.\n\n4) To combine (union) specified constant domain with the field\'s values, `domain` can be an object with a `unionWith` property that specify constant domain to be combined. For example, `domain: {unionWith: [0, 100]}` for a quantitative scale means that the scale domain always includes `[0, 100]`, but will include other values in the fields beyond `[0, 100]`.\n\n5) Domain can also takes an object defining a field or encoding of a parameter that [interactively determines](https://vega.github.io/vega-lite/docs/selection.html#scale-domains) the scale domain.'},domainMax:{anyOf:[{type:"number"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"}],description:"Sets the maximum value in the scale domain, overriding the `domain` property. This property is only intended for use with scales having continuous domains."},domainMid:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Inserts a single mid-point value into a two-element domain. The mid-point value must lie between the domain minimum and maximum values. This property can be useful for setting a midpoint for [diverging color scales](https://vega.github.io/vega-lite/docs/scale.html#piecewise). The domainMid property is only intended for use with scales supporting continuous, piecewise domains."},domainMin:{anyOf:[{type:"number"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"}],description:"Sets the minimum value in the scale domain, overriding the domain property. This property is only intended for use with scales having continuous domains."},domainRaw:{$ref:"#/definitions/ExprRef",description:"An expression for an array of raw values that, if non-null, directly overrides the _domain_ property. This is useful for supporting interactions such as panning or zooming a scale. The scale may be initially determined using a data-driven domain, then modified in response to user input by setting the rawDomain value."},exponent:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The exponent of the `pow` scale."},interpolate:{anyOf:[{$ref:"#/definitions/ScaleInterpolateEnum"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/ScaleInterpolateParams"}],description:"The interpolation method for range values. By default, a general interpolator for numbers, dates, strings and colors (in HCL space) is used. For color ranges, this property allows interpolation in alternative color spaces. Legal values include `rgb`, `hsl`, `hsl-long`, `lab`, `hcl`, `hcl-long`, `cubehelix` and `cubehelix-long` ('-long' variants use longer paths in polar coordinate spaces). If object-valued, this property accepts an object with a string-valued _type_ property and an optional numeric _gamma_ property applicable to rgb and cubehelix interpolators. For more, see the [d3-interpolate documentation](https://github.com/d3/d3-interpolate).\n\n* __Default value:__ `hcl`"},nice:{anyOf:[{type:"boolean"},{type:"number"},{$ref:"#/definitions/TimeInterval"},{$ref:"#/definitions/TimeIntervalStep"},{$ref:"#/definitions/ExprRef"}],description:'Extending the domain so that it starts and ends on nice round values. This method typically modifies the scales domain, and may only extend the bounds to the nearest round value. Nicing is useful if the domain is computed from data and may be irregular. For example, for a domain of _[0.201479, 0.996679]_, a nice domain might be _[0.2, 1.0]_.\n\nFor quantitative scales such as linear, `nice` can be either a boolean flag or a number. If `nice` is a number, it will represent a desired tick count. This allows greater control over the step size used to extend the bounds, guaranteeing that the returned ticks will exactly cover the domain.\n\nFor temporal fields with time and utc scales, the `nice` value can be a string indicating the desired time interval. Legal values are `"millisecond"`, `"second"`, `"minute"`, `"hour"`, `"day"`, `"week"`, `"month"`, and `"year"`. Alternatively, `time` and `utc` scales can accept an object-valued interval specifier of the form `{"interval": "month", "step": 3}`, which includes a desired number of interval steps. Here, the domain would snap to quarter (Jan, Apr, Jul, Oct) boundaries.\n\n__Default value:__ `true` for unbinned _quantitative_ fields without explicit domain bounds; `false` otherwise.'},padding:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"For _[continuous](https://vega.github.io/vega-lite/docs/scale.html#continuous)_ scales, expands the scale domain to accommodate the specified number of pixels on each of the scale range. The scale range must represent pixels for this parameter to function as intended. Padding adjustment is performedpriorto all other adjustments, including the effects of the`zero`,`nice`,`domainMin`, and`domainMax`properties.\n\nFor _[band](https://vega.github.io/vega-lite/docs/scale.html#band)_ scales, shortcut for setting `paddingInner` and `paddingOuter` to the same value.\n\nFor _[point](https://vega.github.io/vega-lite/docs/scale.html#point)_ scales, alias for `paddingOuter`.\n\n__Default value:__ For _continuous_ scales, derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s `continuousPadding`. For _band and point_ scales, see `paddingInner` and `paddingOuter`. By default, Vega-Lite sets padding such that _width/height = number of unique values * step_.",minimum:0},paddingInner:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:`The inner padding (spacing) within each band step of band scales, as a fraction of the step size. This value must lie in the range [0,1].

For point scale, this property is invalid as point scales do not have internal band widths (only step sizes between bands).

__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s \`bandPaddingInner\`.`,maximum:1,minimum:0},paddingOuter:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The outer padding (spacing) at the ends of the range of band and point scales, as a fraction of the step size. This value must lie in the range [0,1].\n\n__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s `bandPaddingOuter` for band scales and `pointPadding` for point scales. By default, Vega-Lite sets outer padding such that _width/height = number of unique values * step_.",maximum:1,minimum:0},range:{anyOf:[{$ref:"#/definitions/RangeEnum"},{items:{anyOf:[{type:"number"},{type:"string"},{items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},type:"array"},{$ref:"#/definitions/FieldRange"}],description:'The range of the scale. One of:\n\n- A string indicating a [pre-defined named scale range](https://vega.github.io/vega-lite/docs/scale.html#range-config) (e.g., example, `"symbol"`, or `"diverging"`).\n\n- For [continuous scales](https://vega.github.io/vega-lite/docs/scale.html#continuous), two-element array indicating  minimum and maximum values, or an array with more than two entries for specifying a [piecewise scale](https://vega.github.io/vega-lite/docs/scale.html#piecewise).\n\n- For [discrete](https://vega.github.io/vega-lite/docs/scale.html#discrete) and [discretizing](https://vega.github.io/vega-lite/docs/scale.html#discretizing) scales, an array of desired output values or an object with a `field` property representing the range values.  For example, if a field `color` contains CSS color names, we can set `range` to `{field: "color"}`.\n\n__Notes:__\n\n1) For color scales you can also specify a color [`scheme`](https://vega.github.io/vega-lite/docs/scale.html#scheme) instead of `range`.\n\n2) Any directly specified `range` for `x` and `y` channels will be ignored. Range can be customized via the view\'s corresponding [size](https://vega.github.io/vega-lite/docs/size.html) (`width` and `height`).'},rangeMax:{anyOf:[{type:"number"},{type:"string"},{$ref:"#/definitions/ExprRef"}],description:"Sets the maximum value in the scale range, overriding the `range` property or the default range. This property is only intended for use with scales having continuous ranges."},rangeMin:{anyOf:[{type:"number"},{type:"string"},{$ref:"#/definitions/ExprRef"}],description:"Sets the minimum value in the scale range, overriding the `range` property or the default range. This property is only intended for use with scales having continuous ranges."},reverse:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ExprRef"}],description:"If true, reverses the order of the scale range. __Default value:__ `false`."},round:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ExprRef"}],description:"If `true`, rounds numeric output values to integers. This can be helpful for snapping to the pixel grid.\n\n__Default value:__ `false`."},scheme:{anyOf:[{$ref:"#/definitions/ColorScheme"},{$ref:"#/definitions/SchemeParams"},{$ref:"#/definitions/ExprRef"}],description:`A string indicating a color [scheme](https://vega.github.io/vega-lite/docs/scale.html#scheme) name (e.g., \`"category10"\` or \`"blues"\`) or a [scheme parameter object](https://vega.github.io/vega-lite/docs/scale.html#scheme-params).

Discrete color schemes may be used with [discrete](https://vega.github.io/vega-lite/docs/scale.html#discrete) or [discretizing](https://vega.github.io/vega-lite/docs/scale.html#discretizing) scales. Continuous color schemes are intended for use with color scales.

To set a custom scheme, instead set the list of values [as the scale range](https://vega.github.io/vega-lite/docs/scale.html#2-setting-the-range-property-to-an-array-of-valid-css-color-strings).

For the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.`},type:{$ref:"#/definitions/ScaleType",description:'The type of scale. Vega-Lite supports the following categories of scale types:\n\n1) [**Continuous Scales**](https://vega.github.io/vega-lite/docs/scale.html#continuous) -- mapping continuous domains to continuous output ranges ([`"linear"`](https://vega.github.io/vega-lite/docs/scale.html#linear), [`"pow"`](https://vega.github.io/vega-lite/docs/scale.html#pow), [`"sqrt"`](https://vega.github.io/vega-lite/docs/scale.html#sqrt), [`"symlog"`](https://vega.github.io/vega-lite/docs/scale.html#symlog), [`"log"`](https://vega.github.io/vega-lite/docs/scale.html#log), [`"time"`](https://vega.github.io/vega-lite/docs/scale.html#time), [`"utc"`](https://vega.github.io/vega-lite/docs/scale.html#utc).\n\n2) [**Discrete Scales**](https://vega.github.io/vega-lite/docs/scale.html#discrete) -- mapping discrete domains to discrete ([`"ordinal"`](https://vega.github.io/vega-lite/docs/scale.html#ordinal)) or continuous ([`"band"`](https://vega.github.io/vega-lite/docs/scale.html#band) and [`"point"`](https://vega.github.io/vega-lite/docs/scale.html#point)) output ranges.\n\n3) [**Discretizing Scales**](https://vega.github.io/vega-lite/docs/scale.html#discretizing) -- mapping continuous domains to discrete output ranges [`"bin-ordinal"`](https://vega.github.io/vega-lite/docs/scale.html#bin-ordinal), [`"quantile"`](https://vega.github.io/vega-lite/docs/scale.html#quantile), [`"quantize"`](https://vega.github.io/vega-lite/docs/scale.html#quantize) and [`"threshold"`](https://vega.github.io/vega-lite/docs/scale.html#threshold).\n\n__Default value:__ please see the [scale type table](https://vega.github.io/vega-lite/docs/scale.html#type).'},zero:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ExprRef"}],description:"If `true`, ensures that a zero baseline value is included in the scale domain.\n\n__Default value:__ `true` for x and y channels if the quantitative field is not binned and no custom `domain` is provided; `false` otherwise.\n\n__Note:__ Log, time, and utc scales do not support `zero`."}},type:"object"},ScaleBinParams:{additionalProperties:!1,properties:{start:{description:`The starting (lowest-valued) bin boundary.

__Default value:__ The lowest value of the scale domain will be used.`,type:"number"},step:{description:"The step size defining the bin interval width.",type:"number"},stop:{description:`The stopping (highest-valued) bin boundary.

__Default value:__ The highest value of the scale domain will be used.`,type:"number"}},required:["step"],type:"object"},ScaleBins:{anyOf:[{items:{type:"number"},type:"array"},{$ref:"#/definitions/ScaleBinParams"}]},ScaleConfig:{additionalProperties:!1,properties:{animationDuration:{description:"Default animation duration (in seconds) for time encodings, except for [`band`](https://vega.github.io/vega-lite/docs/scale.html#band) scales.\n\n__Default value:__ `5`",type:"number"},bandPaddingInner:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default inner padding for `x` and `y` band scales.\n\n__Default value:__\n- `nestedOffsetPaddingInner` for x/y scales with nested x/y offset scales.\n- `barBandPaddingInner` for bar marks (`0.1` by default)\n- `rectBandPaddingInner` for rect and other marks (`0` by default)",maximum:1,minimum:0},bandPaddingOuter:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default outer padding for `x` and `y` band scales.\n\n__Default value:__ `paddingInner/2` (which makes _width/height = number of unique values * step_)",maximum:1,minimum:0},bandWithNestedOffsetPaddingInner:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default inner padding for `x` and `y` band scales with nested `xOffset` and `yOffset` encoding.\n\n__Default value:__ `0.2`",maximum:1,minimum:0},bandWithNestedOffsetPaddingOuter:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default outer padding for `x` and `y` band scales with nested `xOffset` and `yOffset` encoding.\n\n__Default value:__ `0.2`",maximum:1,minimum:0},barBandPaddingInner:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'Default inner padding for `x` and `y` band-ordinal scales of `"bar"` marks.\n\n__Default value:__ `0.1`',maximum:1,minimum:0},clamp:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ExprRef"}],description:"If true, values that exceed the data domain are clamped to either the minimum or maximum range value"},continuousPadding:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default padding for continuous x/y scales.\n\n__Default:__ The bar width for continuous x-scale of a vertical bar and continuous y-scale of a horizontal bar.; `0` otherwise.",minimum:0},framesPerSecond:{description:"Default framerate (frames per second) for time [`band`](https://vega.github.io/vega-lite/docs/scale.html#band) scales.\n\n__Default value:__ `2`",type:"number"},invalid:{$ref:"#/definitions/ScaleInvalidDataConfig",description:"An object that defines scale outputs per channel for invalid values (nulls and NaNs on a continuous scale).\n- The keys in this object are the scale channels.\n- The values is either `\"zero-or-min\"` (use zero if the scale includes zero or min value otherwise) or a value definition `{value: ...}`.\n\n_Example:_ Setting this `config.scale.invalid` property to `{color: {value: '#aaa'}}` will make the visualization color all invalid values with '#aaa'.\n\nSee [https://vega.github.io/vega-lite/docs/invalid-data.html](Invalid Data Docs) for more details."},maxBandSize:{description:`The default max value for mapping quantitative fields to bar's size/bandSize.

If undefined (default), we will use the axis's size (width or height) - 1.`,minimum:0,type:"number"},maxFontSize:{description:"The default max value for mapping quantitative fields to text's size/fontSize scale.\n\n__Default value:__ `40`",minimum:0,type:"number"},maxOpacity:{description:"Default max opacity for mapping a field to opacity.\n\n__Default value:__ `0.8`",maximum:1,minimum:0,type:"number"},maxSize:{description:"Default max value for point size scale.",minimum:0,type:"number"},maxStrokeWidth:{description:"Default max strokeWidth for the scale of strokeWidth for rule and line marks and of size for trail marks.\n\n__Default value:__ `4`",minimum:0,type:"number"},minBandSize:{description:"The default min value for mapping quantitative fields to bar and tick's size/bandSize scale.\n\n__Default value:__ `2`",minimum:0,type:"number"},minFontSize:{description:"The default min value for mapping quantitative fields to text's size/fontSize scale.\n\n__Default value:__ `8`",minimum:0,type:"number"},minOpacity:{description:"Default minimum opacity for mapping a field to opacity.\n\n__Default value:__ `0.3`",maximum:1,minimum:0,type:"number"},minSize:{description:"Default minimum value for point size scale.\n\n__Default value:__ `9`",minimum:0,type:"number"},minStrokeWidth:{description:"Default minimum strokeWidth for the scale of strokeWidth for rule and line marks and of size for trail marks.\n\n__Default value:__ `1`",minimum:0,type:"number"},offsetBandPaddingInner:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default padding inner for xOffset/yOffset's band scales.\n\n__Default Value:__ `0`"},offsetBandPaddingOuter:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default padding outer for xOffset/yOffset's band scales.\n\n__Default Value:__ `0`"},pointPadding:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default outer padding for `x` and `y` point-ordinal scales.\n\n__Default value:__ `0.5` (which makes _width/height = number of unique values * step_)",maximum:1,minimum:0},quantileCount:{description:"Default range cardinality for [`quantile`](https://vega.github.io/vega-lite/docs/scale.html#quantile) scale.\n\n__Default value:__ `4`",minimum:0,type:"number"},quantizeCount:{description:"Default range cardinality for [`quantize`](https://vega.github.io/vega-lite/docs/scale.html#quantize) scale.\n\n__Default value:__ `4`",minimum:0,type:"number"},rectBandPaddingInner:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'Default inner padding for `x` and `y` band-ordinal scales of `"rect"` marks.\n\n__Default value:__ `0`',maximum:1,minimum:0},round:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ExprRef"}],description:"If true, rounds numeric output values to integers. This can be helpful for snapping to the pixel grid. (Only available for `x`, `y`, and `size` scales.)"},tickBandPaddingInner:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'Default inner padding for `x` and `y` band-ordinal scales of `"tick"` marks.\n\n__Default value:__ `0.25`',maximum:1,minimum:0},useUnaggregatedDomain:{description:'Use the source data range before aggregation as scale domain instead of aggregated data for aggregate axis.\n\nThis is equivalent to setting `domain` to `"unaggregate"` for aggregated _quantitative_ fields by default.\n\nThis property only works with aggregate functions that produce values within the raw data domain (`"mean"`, `"average"`, `"median"`, `"q1"`, `"q3"`, `"min"`, `"max"`). For other aggregations that produce values outside of the raw data domain (e.g. `"count"`, `"sum"`), this property is ignored.\n\n__Default value:__ `false`',type:"boolean"},xReverse:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ExprRef"}],description:"Reverse x-scale by default (useful for right-to-left charts)."},zero:{description:"Default `scale.zero` for [`continuous`](https://vega.github.io/vega-lite/docs/scale.html#continuous) scales except for (1) x/y-scales of non-ranged bar or area charts and (2) size scales.\n\n__Default value:__ `true`",type:"boolean"}},type:"object"},ScaleDatumDef:{additionalProperties:!1,properties:{bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},ScaleFieldDef:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},ScaleInterpolateEnum:{enum:["rgb","lab","hcl","hsl","hsl-long","hcl-long","cubehelix","cubehelix-long"],type:"string"},ScaleInterpolateParams:{additionalProperties:!1,properties:{gamma:{type:"number"},type:{enum:["rgb","cubehelix","cubehelix-long"],type:"string"}},required:["type"],type:"object"},ScaleInvalidDataConfig:{additionalProperties:!1,properties:{angle:{$ref:'#/definitions/ScaleInvalidDataShowAs<"angle">'},color:{$ref:'#/definitions/ScaleInvalidDataShowAs<"color">'},fill:{$ref:'#/definitions/ScaleInvalidDataShowAs<"fill">'},fillOpacity:{$ref:'#/definitions/ScaleInvalidDataShowAs<"fillOpacity">'},opacity:{$ref:'#/definitions/ScaleInvalidDataShowAs<"opacity">'},radius:{$ref:'#/definitions/ScaleInvalidDataShowAs<"radius">'},shape:{$ref:'#/definitions/ScaleInvalidDataShowAs<"shape">'},size:{$ref:'#/definitions/ScaleInvalidDataShowAs<"size">'},stroke:{$ref:'#/definitions/ScaleInvalidDataShowAs<"stroke">'},strokeDash:{$ref:'#/definitions/ScaleInvalidDataShowAs<"strokeDash">'},strokeOpacity:{$ref:'#/definitions/ScaleInvalidDataShowAs<"strokeOpacity">'},strokeWidth:{$ref:'#/definitions/ScaleInvalidDataShowAs<"strokeWidth">'},theta:{$ref:'#/definitions/ScaleInvalidDataShowAs<"theta">'},time:{$ref:'#/definitions/ScaleInvalidDataShowAs<"time">'},x:{$ref:'#/definitions/ScaleInvalidDataShowAs<"x">'},xOffset:{$ref:'#/definitions/ScaleInvalidDataShowAs<"xOffset">'},y:{$ref:'#/definitions/ScaleInvalidDataShowAs<"y">'},yOffset:{$ref:'#/definitions/ScaleInvalidDataShowAs<"yOffset">'}},type:"object"},'ScaleInvalidDataShowAs<"angle">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"angle">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"color">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"color">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"fill">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"fill">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"fillOpacity">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"fillOpacity">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"opacity">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"opacity">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"radius">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"radius">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"shape">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"shape">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"size">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"size">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"stroke">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"stroke">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"strokeDash">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"strokeDash">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"strokeOpacity">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"strokeOpacity">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"strokeWidth">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"strokeWidth">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"theta">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"theta">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"time">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"time">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"x">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"x">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"xOffset">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"xOffset">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"y">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"y">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAs<"yOffset">':{anyOf:[{$ref:'#/definitions/ScaleInvalidDataShowAsValue<"yOffset">'},{const:"zero-or-min",type:"string"}]},'ScaleInvalidDataShowAsValue<"angle">':{additionalProperties:!1,properties:{value:{description:"The rotation angle of the text, in degrees.",maximum:360,minimum:0,type:"number"}},type:"object"},'ScaleInvalidDataShowAsValue<"color">':{additionalProperties:!1,properties:{value:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'}},type:"object"},'ScaleInvalidDataShowAsValue<"fill">':{additionalProperties:!1,properties:{value:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"}],description:"Default fill color. This property has higher precedence than `config.color`. Set to `null` to remove fill.\n\n__Default value:__ (None)"}},type:"object"},'ScaleInvalidDataShowAsValue<"fillOpacity">':{additionalProperties:!1,properties:{value:{description:"The fill opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"}},type:"object"},'ScaleInvalidDataShowAsValue<"opacity">':{additionalProperties:!1,properties:{value:{description:"The overall opacity (value between [0,1]).\n\n__Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.",maximum:1,minimum:0,type:"number"}},type:"object"},'ScaleInvalidDataShowAsValue<"radius">':{additionalProperties:!1,properties:{value:{description:"For arc mark, the primary (outer) radius in pixels.\n\nFor text marks, polar coordinate radial offset, in pixels, of the text from the origin determined by the `x` and `y` properties.\n\n__Default value:__ `min(plot_width, plot_height)/2`",minimum:0,type:"number"}},type:"object"},'ScaleInvalidDataShowAsValue<"shape">':{additionalProperties:!1,properties:{value:{anyOf:[{$ref:"#/definitions/SymbolShape"},{type:"string"}],description:'Shape of the point marks. Supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- the line symbol `"stroke"`\n- centered directional shapes `"arrow"`, `"wedge"`, or `"triangle"`\n- a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) (For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.)\n\n__Default value:__ `"circle"`'}},type:"object"},'ScaleInvalidDataShowAsValue<"size">':{additionalProperties:!1,properties:{value:{description:"Default size for marks.\n- For `point`/`circle`/`square`, this represents the pixel area of the marks. Note that this value sets the area of the symbol; the side lengths will increase with the square root of this value.\n- For `bar`, this represents the band size of the bar, in pixels.\n- For `text`, this represents the font size, in pixels.\n\n__Default value:__\n- `30` for point, circle, square marks; width/height's `step`\n- `2` for bar marks with discrete dimensions;\n- `5` for bar marks with continuous dimensions;\n- `11` for text marks.",minimum:0,type:"number"}},type:"object"},'ScaleInvalidDataShowAsValue<"stroke">':{additionalProperties:!1,properties:{value:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"}],description:"Default stroke color. This property has higher precedence than `config.color`. Set to `null` to remove stroke.\n\n__Default value:__ (None)"}},type:"object"},'ScaleInvalidDataShowAsValue<"strokeDash">':{additionalProperties:!1,properties:{value:{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",items:{type:"number"},type:"array"}},type:"object"},'ScaleInvalidDataShowAsValue<"strokeOpacity">':{additionalProperties:!1,properties:{value:{description:"The stroke opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"}},type:"object"},'ScaleInvalidDataShowAsValue<"strokeWidth">':{additionalProperties:!1,properties:{value:{description:"The stroke width, in pixels.",minimum:0,type:"number"}},type:"object"},'ScaleInvalidDataShowAsValue<"theta">':{additionalProperties:!1,properties:{value:{description:`- For arc marks, the arc length in radians if theta2 is not specified, otherwise the start arc angle. (A value of 0 indicates up or north, increasing values proceed clockwise.)

- For text marks, polar coordinate angle in radians.`,maximum:360,minimum:0,type:"number"}},type:"object"},'ScaleInvalidDataShowAsValue<"time">':{additionalProperties:!1,properties:{value:{type:"number"}},type:"object"},'ScaleInvalidDataShowAsValue<"x">':{additionalProperties:!1,properties:{value:{anyOf:[{type:"number"},{const:"width",type:"string"}],description:'X coordinates of the marks, or width of horizontal `"bar"` and `"area"` without specified `x2` or `width`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'}},type:"object"},'ScaleInvalidDataShowAsValue<"xOffset">':{additionalProperties:!1,properties:{value:{description:"Offset for x-position.",type:"number"}},type:"object"},'ScaleInvalidDataShowAsValue<"y">':{additionalProperties:!1,properties:{value:{anyOf:[{type:"number"},{const:"height",type:"string"}],description:'Y coordinates of the marks, or height of vertical `"bar"` and `"area"` without specified `y2` or `height`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'}},type:"object"},'ScaleInvalidDataShowAsValue<"yOffset">':{additionalProperties:!1,properties:{value:{description:"Offset for y-position.",type:"number"}},type:"object"},ScaleResolveMap:{additionalProperties:!1,properties:{angle:{$ref:"#/definitions/ResolveMode"},color:{$ref:"#/definitions/ResolveMode"},fill:{$ref:"#/definitions/ResolveMode"},fillOpacity:{$ref:"#/definitions/ResolveMode"},opacity:{$ref:"#/definitions/ResolveMode"},radius:{$ref:"#/definitions/ResolveMode"},shape:{$ref:"#/definitions/ResolveMode"},size:{$ref:"#/definitions/ResolveMode"},stroke:{$ref:"#/definitions/ResolveMode"},strokeDash:{$ref:"#/definitions/ResolveMode"},strokeOpacity:{$ref:"#/definitions/ResolveMode"},strokeWidth:{$ref:"#/definitions/ResolveMode"},theta:{$ref:"#/definitions/ResolveMode"},time:{$ref:"#/definitions/ResolveMode"},x:{$ref:"#/definitions/ResolveMode"},xOffset:{$ref:"#/definitions/ResolveMode"},y:{$ref:"#/definitions/ResolveMode"},yOffset:{$ref:"#/definitions/ResolveMode"}},type:"object"},ScaleType:{enum:["linear","log","pow","sqrt","symlog","identity","sequential","time","utc","quantile","quantize","threshold","bin-ordinal","ordinal","point","band"],type:"string"},SchemeParams:{additionalProperties:!1,properties:{count:{description:'The number of colors to use in the scheme. This can be useful for scale types such as `"quantize"`, which use the length of the scale range to determine the number of discrete bins for the scale domain.',type:"number"},extent:{description:"The extent of the color range to use. For example `[0.2, 1]` will rescale the color scheme such that color values in the range _[0, 0.2)_ are excluded from the scheme.",items:{type:"number"},type:"array"},name:{$ref:"#/definitions/ColorScheme",description:'A color scheme name for ordinal scales (e.g., `"category10"` or `"blues"`).\n\nFor the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.'}},required:["name"],type:"object"},SecondaryFieldDef:{additionalProperties:!1,description:"A field definition of a secondary channel that shares a scale with another primary channel. For example, `x2`, `xError` and `xError2` share the same scale with `x`.",properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'}},type:"object"},SelectionConfig:{additionalProperties:!1,properties:{interval:{$ref:"#/definitions/IntervalSelectionConfigWithoutType",description:'The default definition for an [`interval`](https://vega.github.io/vega-lite/docs/parameter.html#select) selection. All properties and transformations for an interval selection definition (except `type`) may be specified here.\n\nFor instance, setting `interval` to `{"translate": false}` disables the ability to move interval selections by default.'},point:{$ref:"#/definitions/PointSelectionConfigWithoutType",description:'The default definition for a [`point`](https://vega.github.io/vega-lite/docs/parameter.html#select) selection. All properties and transformations  for a point selection definition (except `type`) may be specified here.\n\nFor instance, setting `point` to `{"on": "dblclick"}` populates point selections on double-click by default.'}},type:"object"},SelectionInit:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"}]},SelectionInitInterval:{anyOf:[{$ref:"#/definitions/Vector2<boolean>"},{$ref:"#/definitions/Vector2<number>"},{$ref:"#/definitions/Vector2<string>"},{$ref:"#/definitions/Vector2<DateTime>"}]},SelectionInitIntervalMapping:{$ref:"#/definitions/Dict<SelectionInitInterval>"},SelectionInitMapping:{$ref:"#/definitions/Dict<SelectionInit>"},SelectionParameter:{additionalProperties:!1,properties:{bind:{anyOf:[{$ref:"#/definitions/Binding"},{additionalProperties:{$ref:"#/definitions/Binding"},type:"object"},{$ref:"#/definitions/LegendBinding"},{const:"scales",type:"string"}],description:`When set, a selection is populated by input elements (also known as dynamic query widgets) or by interacting with the corresponding legend. Direct manipulation interaction is disabled by default; to re-enable it, set the selection's [\`on\`](https://vega.github.io/vega-lite/docs/selection.html#common-selection-properties) property.

Legend bindings are restricted to selections that only specify a single field or encoding.

Query widget binding takes the form of Vega's [input element binding definition](https://vega.github.io/vega/docs/signals/#bind) or can be a mapping between projected field/encodings and binding definitions.

__See also:__ [\`bind\`](https://vega.github.io/vega-lite/docs/bind.html) documentation.`},name:{$ref:"#/definitions/ParameterName",description:'Required. A unique name for the selection parameter. Selection names should be valid JavaScript identifiers: they should contain only alphanumeric characters (or "$", or "_") and may not start with a digit. Reserved keywords that may not be used as parameter names are "datum", "event", "item", and "parent".'},select:{anyOf:[{$ref:"#/definitions/SelectionType"},{$ref:"#/definitions/PointSelectionConfig"},{$ref:"#/definitions/IntervalSelectionConfig"}],description:'Determines the default event processing and data query for the selection. Vega-Lite currently supports two selection types:\n\n- `"point"` -- to select multiple discrete data values; the first value is selected on `click` and additional values toggled on shift-click.\n- `"interval"` -- to select a continuous range of data values on `drag`.'},value:{anyOf:[{$ref:"#/definitions/SelectionInit"},{items:{$ref:"#/definitions/SelectionInitMapping"},type:"array"},{$ref:"#/definitions/SelectionInitIntervalMapping"}],description:"Initialize the selection with a mapping between [projected channels or field names](https://vega.github.io/vega-lite/docs/selection.html#project) and initial values.\n\n__See also:__ [`init`](https://vega.github.io/vega-lite/docs/value.html) documentation."}},required:["name","select"],type:"object"},SelectionResolution:{enum:["global","union","intersect"],type:"string"},SelectionType:{enum:["point","interval"],type:"string"},SequenceGenerator:{additionalProperties:!1,properties:{name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},sequence:{$ref:"#/definitions/SequenceParams",description:"Generate a sequence of numbers."}},required:["sequence"],type:"object"},SequenceParams:{additionalProperties:!1,properties:{as:{$ref:"#/definitions/FieldName",description:'The name of the generated sequence field.\n\n__Default value:__ `"data"`'},start:{description:"The starting value of the sequence (inclusive).",type:"number"},step:{description:"The step value between sequence entries.\n\n__Default value:__ `1`",type:"number"},stop:{description:"The ending value of the sequence (exclusive).",type:"number"}},required:["start","stop"],type:"object"},SequentialMultiHue:{enum:["turbo","viridis","inferno","magma","plasma","cividis","bluegreen","bluegreen-3","bluegreen-4","bluegreen-5","bluegreen-6","bluegreen-7","bluegreen-8","bluegreen-9","bluepurple","bluepurple-3","bluepurple-4","bluepurple-5","bluepurple-6","bluepurple-7","bluepurple-8","bluepurple-9","goldgreen","goldgreen-3","goldgreen-4","goldgreen-5","goldgreen-6","goldgreen-7","goldgreen-8","goldgreen-9","goldorange","goldorange-3","goldorange-4","goldorange-5","goldorange-6","goldorange-7","goldorange-8","goldorange-9","goldred","goldred-3","goldred-4","goldred-5","goldred-6","goldred-7","goldred-8","goldred-9","greenblue","greenblue-3","greenblue-4","greenblue-5","greenblue-6","greenblue-7","greenblue-8","greenblue-9","orangered","orangered-3","orangered-4","orangered-5","orangered-6","orangered-7","orangered-8","orangered-9","purplebluegreen","purplebluegreen-3","purplebluegreen-4","purplebluegreen-5","purplebluegreen-6","purplebluegreen-7","purplebluegreen-8","purplebluegreen-9","purpleblue","purpleblue-3","purpleblue-4","purpleblue-5","purpleblue-6","purpleblue-7","purpleblue-8","purpleblue-9","purplered","purplered-3","purplered-4","purplered-5","purplered-6","purplered-7","purplered-8","purplered-9","redpurple","redpurple-3","redpurple-4","redpurple-5","redpurple-6","redpurple-7","redpurple-8","redpurple-9","yellowgreenblue","yellowgreenblue-3","yellowgreenblue-4","yellowgreenblue-5","yellowgreenblue-6","yellowgreenblue-7","yellowgreenblue-8","yellowgreenblue-9","yellowgreen","yellowgreen-3","yellowgreen-4","yellowgreen-5","yellowgreen-6","yellowgreen-7","yellowgreen-8","yellowgreen-9","yelloworangebrown","yelloworangebrown-3","yelloworangebrown-4","yelloworangebrown-5","yelloworangebrown-6","yelloworangebrown-7","yelloworangebrown-8","yelloworangebrown-9","yelloworangered","yelloworangered-3","yelloworangered-4","yelloworangered-5","yelloworangered-6","yelloworangered-7","yelloworangered-8","yelloworangered-9","darkblue","darkblue-3","darkblue-4","darkblue-5","darkblue-6","darkblue-7","darkblue-8","darkblue-9","darkgold","darkgold-3","darkgold-4","darkgold-5","darkgold-6","darkgold-7","darkgold-8","darkgold-9","darkgreen","darkgreen-3","darkgreen-4","darkgreen-5","darkgreen-6","darkgreen-7","darkgreen-8","darkgreen-9","darkmulti","darkmulti-3","darkmulti-4","darkmulti-5","darkmulti-6","darkmulti-7","darkmulti-8","darkmulti-9","darkred","darkred-3","darkred-4","darkred-5","darkred-6","darkred-7","darkred-8","darkred-9","lightgreyred","lightgreyred-3","lightgreyred-4","lightgreyred-5","lightgreyred-6","lightgreyred-7","lightgreyred-8","lightgreyred-9","lightgreyteal","lightgreyteal-3","lightgreyteal-4","lightgreyteal-5","lightgreyteal-6","lightgreyteal-7","lightgreyteal-8","lightgreyteal-9","lightmulti","lightmulti-3","lightmulti-4","lightmulti-5","lightmulti-6","lightmulti-7","lightmulti-8","lightmulti-9","lightorange","lightorange-3","lightorange-4","lightorange-5","lightorange-6","lightorange-7","lightorange-8","lightorange-9","lighttealblue","lighttealblue-3","lighttealblue-4","lighttealblue-5","lighttealblue-6","lighttealblue-7","lighttealblue-8","lighttealblue-9"],type:"string"},SequentialSingleHue:{enum:["blues","tealblues","teals","greens","browns","greys","purples","warmgreys","reds","oranges"],type:"string"},ShapeDef:{$ref:"#/definitions/MarkPropDef<(string|null),TypeForShape>"},SharedEncoding:{additionalProperties:!1,properties:{angle:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},color:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{$ref:"#/definitions/Gradient"},{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},description:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(string|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},detail:{anyOf:[{$ref:"#/definitions/FieldDefWithoutScale"},{items:{$ref:"#/definitions/FieldDefWithoutScale"},type:"array"}],description:"Additional levels of detail for grouping data in aggregate views and in line, trail, and area marks without mapping data to a specific visual channel."},fill:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{$ref:"#/definitions/Gradient"},{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},fillOpacity:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},href:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(string|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},key:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},latitude:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{const:"quantitative",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.',type:"string"},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},latitude2:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{const:"width",type:"string"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},longitude:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{const:"quantitative",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.',type:"string"},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},longitude2:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{const:"width",type:"string"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},opacity:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},order:{anyOf:[{$ref:"#/definitions/OrderFieldDef"},{items:{$ref:"#/definitions/OrderFieldDef"},type:"array"},{$ref:"#/definitions/OrderValueDef"},{$ref:"#/definitions/OrderOnlyDef"}],description:'Order of the marks.\n- For stacked marks, this `order` channel encodes [stack order](https://vega.github.io/vega-lite/docs/stack.html#order).\n- For line and trail marks, this `order` channel encodes order of data points in the lines. This can be useful for creating [a connected scatterplot](https://vega.github.io/vega-lite/examples/connected_scatterplot.html). Setting `order` to `{"value": null}` makes the line marks use the original order in the data sources.\n- Otherwise, this `order` channel encodes layer order of the marks.\n\n__Note__: In aggregate plots, `order` field should be `aggregate`d to avoid creating additional aggregation grouping.'},radius:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},stack:{anyOf:[{$ref:"#/definitions/StackOffset"},{type:"null"},{type:"boolean"}],description:'Type of stacking offset if the field should be stacked. `stack` is only applicable for `x`, `y`, `theta`, and `radius` channels with continuous domains. For example, `stack` of `y` can be used to customize stacking for a vertical bar chart.\n\n`stack` can be one of the following values:\n- `"zero"` or `true`: stacking with baseline offset at zero value of the scale (for creating typical stacked [bar](https://vega.github.io/vega-lite/docs/stack.html#bar) and [area](https://vega.github.io/vega-lite/docs/stack.html#area) chart).\n- `"normalize"` - stacking with normalized domain (for creating [normalized stacked bar and area charts](https://vega.github.io/vega-lite/docs/stack.html#normalized) and pie charts [with percentage tooltip](https://vega.github.io/vega-lite/docs/arc.html#tooltip)). <br/>\n-`"center"` - stacking with center baseline (for [streamgraph](https://vega.github.io/vega-lite/docs/stack.html#streamgraph)).\n- `null` or `false` - No-stacking. This will produce layered [bar](https://vega.github.io/vega-lite/docs/stack.html#layered-bar-chart) and area chart.\n\n__Default value:__ `zero` for plots with all of the following conditions are true: (1) the mark is `bar`, `area`, or `arc`; (2) the stacked measure channel (x or y) has a linear scale; (3) At least one of non-position channels mapped to an unaggregated field that is different from x and y. Otherwise, `null` by default.\n\n__See also:__ [`stack`](https://vega.github.io/vega-lite/docs/stack.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{const:"width",type:"string"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},radius2:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{const:"width",type:"string"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},shape:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef<TypeForShape>"},{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/TypeForShape",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},size:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},stroke:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{$ref:"#/definitions/Gradient"},{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},strokeDash:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(number[]|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number[]|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(number[]|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number[]|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},strokeOpacity:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},strokeWidth:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},legend:{anyOf:[{$ref:"#/definitions/Legend"},{type:"null"}],description:"An object defining properties of the legend. If `null`, the legend for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n\n__See also:__ [`legend`](https://vega.github.io/vega-lite/docs/legend.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},text:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(Text|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Text|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalStringFieldDef"},{$ref:"#/definitions/ConditionalValueDef<(Text|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Text|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},theta:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},stack:{anyOf:[{$ref:"#/definitions/StackOffset"},{type:"null"},{type:"boolean"}],description:'Type of stacking offset if the field should be stacked. `stack` is only applicable for `x`, `y`, `theta`, and `radius` channels with continuous domains. For example, `stack` of `y` can be used to customize stacking for a vertical bar chart.\n\n`stack` can be one of the following values:\n- `"zero"` or `true`: stacking with baseline offset at zero value of the scale (for creating typical stacked [bar](https://vega.github.io/vega-lite/docs/stack.html#bar) and [area](https://vega.github.io/vega-lite/docs/stack.html#area) chart).\n- `"normalize"` - stacking with normalized domain (for creating [normalized stacked bar and area charts](https://vega.github.io/vega-lite/docs/stack.html#normalized) and pie charts [with percentage tooltip](https://vega.github.io/vega-lite/docs/arc.html#tooltip)). <br/>\n-`"center"` - stacking with center baseline (for [streamgraph](https://vega.github.io/vega-lite/docs/stack.html#streamgraph)).\n- `null` or `false` - No-stacking. This will produce layered [bar](https://vega.github.io/vega-lite/docs/stack.html#layered-bar-chart) and area chart.\n\n__Default value:__ `zero` for plots with all of the following conditions are true: (1) the mark is `bar`, `area`, or `arc`; (2) the stacked measure channel (x or y) has a linear scale; (3) At least one of non-position channels mapped to an unaggregated field that is different from x and y. Otherwise, `null` by default.\n\n__See also:__ [`stack`](https://vega.github.io/vega-lite/docs/stack.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{const:"width",type:"string"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},theta2:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{const:"width",type:"string"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},time:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},rescale:{type:"boolean"},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},tooltip:{anyOf:[{$ref:"#/definitions/StringFieldDefWithCondition"},{$ref:"#/definitions/StringValueDefWithCondition"},{items:{$ref:"#/definitions/StringFieldDef"},type:"array"},{type:"null"}],description:"The tooltip text to show upon mouse hover. Specifying `tooltip` encoding overrides [the `tooltip` property in the mark definition](https://vega.github.io/vega-lite/docs/mark.html#mark-def).\n\nSee the [`tooltip`](https://vega.github.io/vega-lite/docs/tooltip.html) documentation for a detailed discussion about tooltip in Vega-Lite."},url:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},condition:{anyOf:[{anyOf:[{$ref:"#/definitions/ConditionalValueDef<(string|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|ExprRef)>"},type:"array"}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."}],description:"One or more value definition(s) with [a parameter or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n\n__Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value) since Vega-Lite only allows at most one encoded field per encoding channel."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},x:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},impute:{anyOf:[{$ref:"#/definitions/ImputeParams"},{type:"null"}],description:"An object defining the properties of the Impute Operation to be applied. The field value of the other positional channel is taken as `key` of the `Impute` Operation. The field of the `color` channel if specified is used as `groupby` of the `Impute` Operation.\n\n__See also:__ [`impute`](https://vega.github.io/vega-lite/docs/impute.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},stack:{anyOf:[{$ref:"#/definitions/StackOffset"},{type:"null"},{type:"boolean"}],description:'Type of stacking offset if the field should be stacked. `stack` is only applicable for `x`, `y`, `theta`, and `radius` channels with continuous domains. For example, `stack` of `y` can be used to customize stacking for a vertical bar chart.\n\n`stack` can be one of the following values:\n- `"zero"` or `true`: stacking with baseline offset at zero value of the scale (for creating typical stacked [bar](https://vega.github.io/vega-lite/docs/stack.html#bar) and [area](https://vega.github.io/vega-lite/docs/stack.html#area) chart).\n- `"normalize"` - stacking with normalized domain (for creating [normalized stacked bar and area charts](https://vega.github.io/vega-lite/docs/stack.html#normalized) and pie charts [with percentage tooltip](https://vega.github.io/vega-lite/docs/arc.html#tooltip)). <br/>\n-`"center"` - stacking with center baseline (for [streamgraph](https://vega.github.io/vega-lite/docs/stack.html#streamgraph)).\n- `null` or `false` - No-stacking. This will produce layered [bar](https://vega.github.io/vega-lite/docs/stack.html#layered-bar-chart) and area chart.\n\n__Default value:__ `zero` for plots with all of the following conditions are true: (1) the mark is `bar`, `area`, or `arc`; (2) the stacked measure channel (x or y) has a linear scale; (3) At least one of non-position channels mapped to an unaggregated field that is different from x and y. Otherwise, `null` by default.\n\n__See also:__ [`stack`](https://vega.github.io/vega-lite/docs/stack.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{const:"width",type:"string"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},x2:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{const:"width",type:"string"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},xError:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:"number"}},type:"object"},xError2:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:"number"}},type:"object"},xOffset:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:"number"}},type:"object"},y:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},impute:{anyOf:[{$ref:"#/definitions/ImputeParams"},{type:"null"}],description:"An object defining the properties of the Impute Operation to be applied. The field value of the other positional channel is taken as `key` of the `Impute` Operation. The field of the `color` channel if specified is used as `groupby` of the `Impute` Operation.\n\n__See also:__ [`impute`](https://vega.github.io/vega-lite/docs/impute.html) documentation."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},stack:{anyOf:[{$ref:"#/definitions/StackOffset"},{type:"null"},{type:"boolean"}],description:'Type of stacking offset if the field should be stacked. `stack` is only applicable for `x`, `y`, `theta`, and `radius` channels with continuous domains. For example, `stack` of `y` can be used to customize stacking for a vertical bar chart.\n\n`stack` can be one of the following values:\n- `"zero"` or `true`: stacking with baseline offset at zero value of the scale (for creating typical stacked [bar](https://vega.github.io/vega-lite/docs/stack.html#bar) and [area](https://vega.github.io/vega-lite/docs/stack.html#area) chart).\n- `"normalize"` - stacking with normalized domain (for creating [normalized stacked bar and area charts](https://vega.github.io/vega-lite/docs/stack.html#normalized) and pie charts [with percentage tooltip](https://vega.github.io/vega-lite/docs/arc.html#tooltip)). <br/>\n-`"center"` - stacking with center baseline (for [streamgraph](https://vega.github.io/vega-lite/docs/stack.html#streamgraph)).\n- `null` or `false` - No-stacking. This will produce layered [bar](https://vega.github.io/vega-lite/docs/stack.html#layered-bar-chart) and area chart.\n\n__Default value:__ `zero` for plots with all of the following conditions are true: (1) the mark is `bar`, `area`, or `arc`; (2) the stacked measure channel (x or y) has a linear scale; (3) At least one of non-position channels mapped to an unaggregated field that is different from x and y. Otherwise, `null` by default.\n\n__See also:__ [`stack`](https://vega.github.io/vega-lite/docs/stack.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{const:"width",type:"string"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},y2:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{anyOf:[{type:"number"},{const:"width",type:"string"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},yError:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:"number"}},type:"object"},yError2:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.',type:"null"},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:"number"}},type:"object"},yOffset:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},datum:{anyOf:[{$ref:"#/definitions/PrimitiveValue"},{$ref:"#/definitions/DateTime"},{$ref:"#/definitions/ExprRef"},{$ref:"#/definitions/RepeatRef"}],description:"A constant value in data domain."},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{anyOf:[{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},{$ref:"#/definitions/Type",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}],description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:"number"}},type:"object"}},type:"object"},SingleDefUnitChannel:{enum:["text","shape","x","y","xOffset","yOffset","x2","y2","longitude","latitude","longitude2","latitude2","theta","theta2","radius","radius2","time","color","fill","stroke","opacity","fillOpacity","strokeOpacity","strokeWidth","strokeDash","size","angle","key","href","url","description"],type:"string"},SingleTimeUnit:{anyOf:[{$ref:"#/definitions/LocalSingleTimeUnit"},{$ref:"#/definitions/UtcSingleTimeUnit"}]},Sort:{anyOf:[{$ref:"#/definitions/SortArray"},{$ref:"#/definitions/AllSortString"},{$ref:"#/definitions/EncodingSortField"},{$ref:"#/definitions/SortByEncoding"},{type:"null"}]},SortArray:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"},{items:{$ref:"#/definitions/DateTime"},type:"array"}]},SortByChannel:{enum:["x","y","color","fill","stroke","strokeWidth","size","shape","fillOpacity","strokeOpacity","opacity","text"],type:"string"},SortByChannelDesc:{enum:["-x","-y","-color","-fill","-stroke","-strokeWidth","-size","-shape","-fillOpacity","-strokeOpacity","-opacity","-text"],type:"string"},SortByEncoding:{additionalProperties:!1,properties:{encoding:{$ref:"#/definitions/SortByChannel",description:'The [encoding channel](https://vega.github.io/vega-lite/docs/encoding.html#channels) to sort by (e.g., `"x"`, `"y"`)'},order:{anyOf:[{$ref:"#/definitions/SortOrder"},{type:"null"}],description:'The sort order. One of `"ascending"` (default), `"descending"`, or `null` (no not sort).'}},required:["encoding"],type:"object"},SortField:{additionalProperties:!1,description:"A sort definition for transform",properties:{field:{$ref:"#/definitions/FieldName",description:"The name of the field to sort."},order:{anyOf:[{$ref:"#/definitions/SortOrder"},{type:"null"}],description:'Whether to sort the field in ascending or descending order. One of `"ascending"` (default), `"descending"`, or `null` (no not sort).'}},required:["field"],type:"object"},SortOrder:{enum:["ascending","descending"],type:"string"},SphereGenerator:{additionalProperties:!1,properties:{name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},sphere:{anyOf:[{const:!0,type:"boolean"},{additionalProperties:!1,type:"object"}],description:"Generate sphere GeoJSON data for the full globe."}},required:["sphere"],type:"object"},StackOffset:{enum:["zero","center","normalize"],type:"string"},StackTransform:{additionalProperties:!1,properties:{as:{anyOf:[{$ref:"#/definitions/FieldName"},{items:{$ref:"#/definitions/FieldName"},maxItems:2,minItems:2,type:"array"}],description:'Output field names. This can be either a string or an array of strings with two elements denoting the name for the fields for stack start and stack end respectively. If a single string(e.g., `"val"`) is provided, the end field will be `"val_end"`.'},groupby:{description:"The data fields to group by.",items:{$ref:"#/definitions/FieldName"},type:"array"},offset:{description:'Mode for stacking marks. One of `"zero"` (default), `"center"`, or `"normalize"`. The `"zero"` offset will stack starting at `0`. The `"center"` offset will center the stacks. The `"normalize"` offset will compute percentage values for each stack point, with output values in the range `[0,1]`.\n\n__Default value:__ `"zero"`',enum:["zero","center","normalize"],type:"string"},sort:{description:"Field that determines the order of leaves in the stacked charts.",items:{$ref:"#/definitions/SortField"},type:"array"},stack:{$ref:"#/definitions/FieldName",description:"The field which is stacked."}},required:["stack","groupby","as"],type:"object"},StandardType:{enum:["quantitative","ordinal","temporal","nominal"],type:"string"},Step:{additionalProperties:!1,properties:{for:{$ref:"#/definitions/StepFor",description:"Whether to apply the step to position scale or offset scale when there are both `x` and `xOffset` or both `y` and `yOffset` encodings."},step:{description:"The size (width/height) per discrete step.",type:"number"}},required:["step"],type:"object"},StepFor:{enum:["position","offset"],type:"string"},Stream:{anyOf:[{$ref:"#/definitions/EventStream"},{$ref:"#/definitions/DerivedStream"},{$ref:"#/definitions/MergedStream"}]},StringFieldDef:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},format:{anyOf:[{type:"string"},{$ref:"#/definitions/Dict"}],description:'When used with the default `"number"` and `"time"` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.\n\n- If the format type is `"number"` (e.g., for quantitative fields), this is D3\'s [number format pattern](https://github.com/d3/d3-format#locale_format).\n- If the format type is `"time"` (e.g., for temporal fields), this is D3\'s [time format pattern](https://github.com/d3/d3-time-format#locale_format).\n\nSee the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.\n\nWhen used with a [custom `formatType`](https://vega.github.io/vega-lite/docs/config.html#custom-format-type), this value will be passed as `format` alongside `datum.value` to the registered function.\n\n__Default value:__  Derived from [numberFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for number format and from [timeFormat](https://vega.github.io/vega-lite/docs/config.html#format) config for time format.'},formatType:{description:'The format type for labels. One of `"number"`, `"time"`, or a [registered custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type).\n\n__Default value:__\n- `"time"` for temporal fields and ordinal and nominal fields with `timeUnit`.\n- `"number"` for quantitative fields as well as ordinal and nominal fields without `timeUnit`.',type:"string"},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},StringFieldDefWithCondition:{$ref:"#/definitions/FieldOrDatumDefWithCondition<StringFieldDef,string>"},StringValueDefWithCondition:{$ref:"#/definitions/ValueDefWithCondition<MarkPropFieldOrDatumDef,(string|null)>"},StrokeCap:{enum:["butt","round","square"],type:"string"},StrokeJoin:{enum:["miter","round","bevel"],type:"string"},StyleConfigIndex:{additionalProperties:{anyOf:[{$ref:"#/definitions/AnyMarkConfig"},{$ref:"#/definitions/Axis"}]},properties:{arc:{$ref:"#/definitions/RectConfig",description:"Arc-specific Config"},area:{$ref:"#/definitions/AreaConfig",description:"Area-Specific Config"},bar:{$ref:"#/definitions/BarConfig",description:"Bar-Specific Config"},circle:{$ref:"#/definitions/MarkConfig",description:"Circle-Specific Config"},geoshape:{$ref:"#/definitions/MarkConfig",description:"Geoshape-Specific Config"},"group-subtitle":{$ref:"#/definitions/MarkConfig",description:"Default style for chart subtitles"},"group-title":{$ref:"#/definitions/MarkConfig",description:"Default style for chart titles"},"guide-label":{$ref:"#/definitions/MarkConfig",description:"Default style for axis, legend, and header labels."},"guide-title":{$ref:"#/definitions/MarkConfig",description:"Default style for axis, legend, and header titles."},image:{$ref:"#/definitions/RectConfig",description:"Image-specific Config"},line:{$ref:"#/definitions/LineConfig",description:"Line-Specific Config"},mark:{$ref:"#/definitions/MarkConfig",description:"Mark Config"},point:{$ref:"#/definitions/MarkConfig",description:"Point-Specific Config"},rect:{$ref:"#/definitions/RectConfig",description:"Rect-Specific Config"},rule:{$ref:"#/definitions/MarkConfig",description:"Rule-Specific Config"},square:{$ref:"#/definitions/MarkConfig",description:"Square-Specific Config"},text:{$ref:"#/definitions/MarkConfig",description:"Text-Specific Config"},tick:{$ref:"#/definitions/TickConfig",description:"Tick-Specific Config"},trail:{$ref:"#/definitions/LineConfig",description:"Trail-Specific Config"}},type:"object"},SymbolShape:{type:"string"},Text:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}]},TextBaseline:{anyOf:[{const:"alphabetic",type:"string"},{$ref:"#/definitions/Baseline"},{const:"line-top",type:"string"},{const:"line-bottom",type:"string"}]},TextDef:{anyOf:[{$ref:"#/definitions/FieldOrDatumDefWithCondition<StringFieldDef,Text>"},{$ref:"#/definitions/FieldOrDatumDefWithCondition<StringDatumDef,Text>"},{$ref:"#/definitions/ValueDefWithCondition<StringFieldDef,Text>"}]},TextDirection:{enum:["ltr","rtl"],type:"string"},TickConfig:{additionalProperties:!1,properties:{align:{anyOf:[{$ref:"#/definitions/Align"},{$ref:"#/definitions/ExprRef"}],description:'The horizontal alignment of the text or ranged marks (area, bar, image, rect, rule). One of `"left"`, `"right"`, `"center"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},angle:{anyOf:[{description:"The rotation angle of the text, in degrees.",maximum:360,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG element, removing the mark item from the ARIA accessibility tree.',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},ariaRole:{anyOf:[{description:'Sets the type of user interface element of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "role" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},ariaRoleDescription:{anyOf:[{description:'A human-readable, author-localized description for the role of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the "aria-roledescription" attribute. Warning: this property is experimental and may be changed in the future.',type:"string"},{$ref:"#/definitions/ExprRef"}]},aspect:{anyOf:[{description:"Whether to keep aspect ratio of image marks.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},bandSize:{description:`The width of the ticks.

__Default value:__  3/4 of step (width step for horizontal ticks and height step for vertical ticks).`,minimum:0,type:"number"},baseline:{anyOf:[{$ref:"#/definitions/TextBaseline"},{$ref:"#/definitions/ExprRef"}],description:'For text marks, the vertical text baseline. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, `"line-bottom"`, or an expression reference that provides one of the valid values. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the `lineHeight` rather than `fontSize` alone.\n\nFor range marks, the vertical alignment of the marks. One of `"top"`, `"middle"`, `"bottom"`.\n\n__Note:__ Expression reference is *not* supported for range marks.'},binSpacing:{description:"Offset between bars for binned field. The ideal value for this is either 0 (preferred by statisticians) or 1 (Vega-Lite default, D3 example style).\n\n__Default value:__ `1`",minimum:0,type:"number"},blend:{anyOf:[{$ref:"#/definitions/Blend",description:'The color blend mode for drawing an item on its current background. Any valid [CSS mix-blend-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode) value can be used.\n\n__Default value: `"source-over"`'},{$ref:"#/definitions/ExprRef"}]},color:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{$ref:"#/definitions/ExprRef"}],description:'Default color.\n\n__Default value:__ <span style="color: #4682b4;">&#9632;</span> `"#4682b4"`\n\n__Note:__\n- This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n- The `fill` and `stroke` properties have higher precedence than `color` and will override `color`.'},continuousBandSize:{description:"The default size of the bars on continuous scales.\n\n__Default value:__ `5`",minimum:0,type:"number"},cornerRadius:{anyOf:[{description:"The radius in pixels of rounded rectangles or arcs' corners.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusBottomRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' bottom right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopLeft:{anyOf:[{description:"The radius in pixels of rounded rectangles' top right corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cornerRadiusTopRight:{anyOf:[{description:"The radius in pixels of rounded rectangles' top left corner.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cursor:{anyOf:[{$ref:"#/definitions/Cursor",description:"The mouse cursor used over the mark. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used."},{$ref:"#/definitions/ExprRef"}]},description:{anyOf:[{description:'A text description of the mark item for [ARIA accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) (SVG output only). If specified, this property determines the ["aria-label" attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute).',type:"string"},{$ref:"#/definitions/ExprRef"}]},dir:{anyOf:[{$ref:"#/definitions/TextDirection",description:'The direction of the text. One of `"ltr"` (left-to-right) or `"rtl"` (right-to-left). This property determines on which side is truncated in response to the limit parameter.\n\n__Default value:__ `"ltr"`'},{$ref:"#/definitions/ExprRef"}]},discreteBandSize:{anyOf:[{type:"number"},{$ref:"#/definitions/RelativeBandSize"}],description:"The default size of the bars with discrete dimensions. If unspecified, the default size is  `step-2`, which provides 2 pixel offset between bars.",minimum:0},dx:{anyOf:[{description:"The horizontal offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},dy:{anyOf:[{description:"The vertical offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.",type:"number"},{$ref:"#/definitions/ExprRef"}]},ellipsis:{anyOf:[{description:'The ellipsis string for text truncated in response to the limit parameter.\n\n__Default value:__ `""`',type:"string"},{$ref:"#/definitions/ExprRef"}]},endAngle:{anyOf:[{description:"The end angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},fill:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default fill color. This property has higher precedence than `config.color`. Set to `null` to remove fill.\n\n__Default value:__ (None)"},fillOpacity:{anyOf:[{description:"The fill opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},filled:{description:"Whether the mark's color should be used as fill color instead of stroke color.\n\n__Default value:__ `false` for all `point`, `line`, and `rule` marks as well as `geoshape` marks for [`graticule`](https://vega.github.io/vega-lite/docs/data.html#graticule) data sources; otherwise, `true`.\n\n__Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).",type:"boolean"},font:{anyOf:[{description:'The typeface to set the text in (e.g., `"Helvetica Neue"`).',type:"string"},{$ref:"#/definitions/ExprRef"}]},fontSize:{anyOf:[{description:"The font size, in pixels.\n\n__Default value:__ `11`",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},fontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:'The font style (e.g., `"italic"`).'},{$ref:"#/definitions/ExprRef"}]},fontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'The font weight. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},height:{anyOf:[{description:"Height of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},href:{anyOf:[{$ref:"#/definitions/URI",description:"A URL to load upon mouse click. If defined, the mark acts as a hyperlink."},{$ref:"#/definitions/ExprRef"}]},innerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The inner radius in pixels of arc marks. `innerRadius` is an alias for `radius2`.\n\n__Default value:__ `0`",minimum:0},interpolate:{anyOf:[{$ref:"#/definitions/Interpolate",description:'The line interpolation method to use for line and area marks. One of the following:\n- `"linear"`: piecewise linear segments, as in a polyline.\n- `"linear-closed"`: close the linear segments to form a polygon.\n- `"step"`: alternate between horizontal and vertical segments, as in a step function.\n- `"step-before"`: alternate between vertical and horizontal segments, as in a step function.\n- `"step-after"`: alternate between horizontal and vertical segments, as in a step function.\n- `"basis"`: a B-spline, with control point duplication on the ends.\n- `"basis-open"`: an open B-spline; may not intersect the start or end.\n- `"basis-closed"`: a closed B-spline, as in a loop.\n- `"cardinal"`: a Cardinal spline, with control point duplication on the ends.\n- `"cardinal-open"`: an open Cardinal spline; may not intersect the start or end, but will intersect other control points.\n- `"cardinal-closed"`: a closed Cardinal spline, as in a loop.\n- `"bundle"`: equivalent to basis, except the tension parameter is used to straighten the spline.\n- `"monotone"`: cubic interpolation that preserves monotonicity in y.'},{$ref:"#/definitions/ExprRef"}]},invalid:{anyOf:[{$ref:"#/definitions/MarkInvalidDataMode"},{type:"null"}],description:'Invalid data mode, which defines how the marks and corresponding scales should represent invalid values (`null` and `NaN` in continuous scales *without* defined output for invalid values).\n\n- `"filter"`  *Exclude* all invalid values from the visualization\'s *marks* and *scales*. For path marks (for line, area, trail), this option will create paths that connect valid points, as if the data rows with invalid values do not exist.\n\n- `"break-paths-filter-domains"`  Break path marks (for line, area, trail) at invalid values.  For non-path marks, this is equivalent to `"filter"`. All *scale* domains will *exclude* these filtered data points.\n\n- `"break-paths-show-domains"`  Break paths (for line, area, trail) at invalid values.  Hide invalid values for non-path marks. All *scale* domains will *include* these filtered data points (for both path and non-path marks).\n\n- `"show"` or `null`  Show all data points in the marks and scale domains. Each scale will use the output for invalid values defined in `config.scale.invalid` or, if unspecified, by default invalid values will produce the same visual values as zero (if the scale includes zero) or the minimum value (if the scale does not include zero).\n\n- `"break-paths-show-path-domains"` (default)  This is equivalent to `"break-paths-show-domains"` for path-based marks (line/area/trail) and `"filter"` for non-path marks.\n\n__Note__: If any channel\'s scale has an output for invalid values defined in `config.scale.invalid`, all values for the scales will be considered "valid" since they can produce a reasonable output for the scales. Thus, fields for such channels will not be filtered and will not cause path breaks.'},limit:{anyOf:[{description:"The maximum length of the text mark in pixels. The text value will be automatically truncated if the rendered size exceeds the limit.\n\n__Default value:__ `0` -- indicating no limit",type:"number"},{$ref:"#/definitions/ExprRef"}]},lineBreak:{anyOf:[{description:"A delimiter, such as a newline character, upon which to break text strings into multiple lines. This property is ignored if the text is array-valued.",type:"string"},{$ref:"#/definitions/ExprRef"}]},lineHeight:{anyOf:[{description:"The line height in pixels (the spacing between subsequent lines of text) for multi-line text marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},minBandSize:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The minimum band size for bar and rectangle marks. __Default value:__ `0.25`"},opacity:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The overall opacity (value between [0,1]).\n\n__Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.",maximum:1,minimum:0},order:{description:"For line and trail marks, this `order` property can be set to `null` or `false` to make the lines use the original order in the data sources.",type:["null","boolean"]},orient:{$ref:"#/definitions/Orientation",description:`The orientation of a non-stacked bar, tick, area, and line charts. The value is either horizontal (default) or vertical.
- For bar, rule and tick, this determines whether the size of the bar and tick should be applied to x or y dimension.
- For area, this property determines the orient property of the Vega output.
- For line and trail marks, this property determines the sort order of the points in the line if \`config.sortLineBy\` is not specified. For stacked charts, this is always determined by the orientation of the stack; therefore explicitly specified value will be ignored.`},outerRadius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The outer radius in pixels of arc marks. `outerRadius` is an alias for `radius`.\n\n__Default value:__ `0`",minimum:0},padAngle:{anyOf:[{description:"The angular padding applied to sides of the arc, in radians.",type:"number"},{$ref:"#/definitions/ExprRef"}]},radius:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"For arc mark, the primary (outer) radius in pixels.\n\nFor text marks, polar coordinate radial offset, in pixels, of the text from the origin determined by the `x` and `y` properties.\n\n__Default value:__ `min(plot_width, plot_height)/2`",minimum:0},radius2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The secondary (inner) radius in pixels of arc marks.\n\n__Default value:__ `0`",minimum:0},shape:{anyOf:[{anyOf:[{$ref:"#/definitions/SymbolShape"},{type:"string"}],description:'Shape of the point marks. Supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- the line symbol `"stroke"`\n- centered directional shapes `"arrow"`, `"wedge"`, or `"triangle"`\n- a custom [SVG path string](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths) (For correct sizing, custom shape paths should be defined within a square bounding box with coordinates ranging from -1 to 1 along both the x and y dimensions.)\n\n__Default value:__ `"circle"`'},{$ref:"#/definitions/ExprRef"}]},size:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"Default size for marks.\n- For `point`/`circle`/`square`, this represents the pixel area of the marks. Note that this value sets the area of the symbol; the side lengths will increase with the square root of this value.\n- For `bar`, this represents the band size of the bar, in pixels.\n- For `text`, this represents the font size, in pixels.\n\n__Default value:__\n- `30` for point, circle, square marks; width/height's `step`\n- `2` for bar marks with discrete dimensions;\n- `5` for bar marks with continuous dimensions;\n- `11` for text marks.",minimum:0},smooth:{anyOf:[{description:"A boolean flag (default true) indicating if the image should be smoothed when resized. If false, individual pixels should be scaled directly rather than interpolated with smoothing. For SVG rendering, this option may not work in some browsers due to lack of standardization.",type:"boolean"},{$ref:"#/definitions/ExprRef"}]},startAngle:{anyOf:[{description:"The start angle in radians for arc marks. A value of `0` indicates up (north), increasing values proceed clockwise.",type:"number"},{$ref:"#/definitions/ExprRef"}]},stroke:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/Gradient"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"Default stroke color. This property has higher precedence than `config.color`. Set to `null` to remove stroke.\n\n__Default value:__ (None)"},strokeCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for line ending style. One of `"butt"`, `"round"`, or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},strokeDash:{anyOf:[{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},strokeDashOffset:{anyOf:[{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeJoin:{anyOf:[{$ref:"#/definitions/StrokeJoin",description:'The stroke line join method. One of `"miter"`, `"round"` or `"bevel"`.\n\n__Default value:__ `"miter"`'},{$ref:"#/definitions/ExprRef"}]},strokeMiterLimit:{anyOf:[{description:"The miter limit at which to bevel a line join.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOffset:{anyOf:[{description:"The offset in pixels at which to draw the group stroke and fill. If unspecified, the default behavior is to dynamically offset stroked groups such that 1 pixel stroke widths align with the pixel grid.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOpacity:{anyOf:[{description:"The stroke opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeWidth:{anyOf:[{description:"The stroke width, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},tension:{anyOf:[{description:"Depending on the interpolation type, sets the tension parameter (for line and area marks).",type:"number"},{$ref:"#/definitions/ExprRef"}]},text:{anyOf:[{$ref:"#/definitions/Text",description:"Placeholder text if the `text` channel is not specified"},{$ref:"#/definitions/ExprRef"}]},theta:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:`- For arc marks, the arc length in radians if theta2 is not specified, otherwise the start arc angle. (A value of 0 indicates up or north, increasing values proceed clockwise.)

- For text marks, polar coordinate angle in radians.`,maximum:360,minimum:0},theta2:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The end angle of arc marks in radians. A value of 0 indicates up or north, increasing values proceed clockwise."},thickness:{description:"Thickness of the tick mark.\n\n__Default value:__  `1`",minimum:0,type:"number"},time:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}]},timeUnitBandPosition:{description:"Default relative band position for a time unit. If set to `0`, the marks will be positioned at the beginning of the time unit band step. If set to `0.5`, the marks will be positioned in the middle of the time unit band step.",type:"number"},timeUnitBandSize:{description:"Default relative band size for a time unit. If set to `1`, the bandwidth of the marks will be equal to the time unit band step. If set to `0.5`, bandwidth of the marks will be half of the time unit band step.",type:"number"},tooltip:{anyOf:[{type:"number"},{type:"string"},{type:"boolean"},{$ref:"#/definitions/TooltipContent"},{$ref:"#/definitions/ExprRef"},{type:"null"}],description:'The tooltip text string to show upon mouse hover or an object defining which fields should the tooltip be derived from.\n\n- If `tooltip` is `true` or `{"content": "encoding"}`, then all fields from `encoding` will be used.\n- If `tooltip` is `{"content": "data"}`, then all fields that appear in the highlighted data point will be used.\n- If set to `null` or `false`, then no tooltip will be used.\n\nSee the [`tooltip`](https://vega.github.io/vega-lite/docs/tooltip.html) documentation for a detailed discussion about tooltip  in Vega-Lite.\n\n__Default value:__ `null`'},url:{anyOf:[{$ref:"#/definitions/URI",description:"The URL of the image file for image marks."},{$ref:"#/definitions/ExprRef"}]},width:{anyOf:[{description:"Width of the marks.",type:"number"},{$ref:"#/definitions/ExprRef"}]},x:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X coordinates of the marks, or width of horizontal `"bar"` and `"area"` without specified `x2` or `width`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},x2:{anyOf:[{type:"number"},{const:"width",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'X2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"width"` for the width of the plot.'},y:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y coordinates of the marks, or height of vertical `"bar"` and `"area"` without specified `y2` or `height`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'},y2:{anyOf:[{type:"number"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'Y2 coordinates for ranged `"area"`, `"bar"`, `"rect"`, and  `"rule"`.\n\nThe `value` of this channel can be a number or a string `"height"` for the height of the plot.'}},type:"object"},TickCount:{anyOf:[{type:"number"},{$ref:"#/definitions/TimeInterval"},{$ref:"#/definitions/TimeIntervalStep"}]},TimeDef:{$ref:"#/definitions/TimeFieldDef"},TimeFieldDef:{additionalProperties:!1,properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},rescale:{type:"boolean"},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},sort:{$ref:"#/definitions/Sort",description:'Sort order for the encoded field.\n\nFor continuous fields (quantitative or temporal), `sort` can be either `"ascending"` or `"descending"`.\n\nFor discrete fields, `sort` can be one of the following:\n- `"ascending"` or `"descending"` -- for sorting by the values\' natural order in JavaScript.\n- [A string indicating an encoding channel name to sort by](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) (e.g., `"x"` or `"y"`) with an optional minus prefix for descending sort (e.g., `"-x"` to sort by x-field, descending). This channel string is short-form of [a sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding). For example, `"sort": "-x"` is equivalent to `"sort": {"encoding": "x", "order": "descending"}`.\n- [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n- [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order. For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `"month"` and `"day"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `"Mon"`, `"Tue"`).\n- `null` indicating no sort.\n\n__Default value:__ `"ascending"`\n\n__Note:__ `null` and sorting by another channel is not supported for `row` and `column`.\n\n__See also:__ [`sort`](https://vega.github.io/vega-lite/docs/sort.html) documentation.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},TimeInterval:{enum:["millisecond","second","minute","hour","day","week","month","year"],type:"string"},TimeIntervalStep:{additionalProperties:!1,properties:{interval:{$ref:"#/definitions/TimeInterval"},step:{type:"number"}},required:["interval","step"],type:"object"},TimeLocale:{additionalProperties:!1,description:"Locale definition for formatting dates and times.",properties:{date:{description:'The date (%x) format specifier (e.g., "%m/%d/%Y").',type:"string"},dateTime:{description:'The date and time (%c) format specifier (e.g., "%a %b %e %X %Y").',type:"string"},days:{$ref:"#/definitions/Vector7<string>",description:"The full names of the weekdays, starting with Sunday."},months:{$ref:"#/definitions/Vector12<string>",description:"The full names of the months (starting with January)."},periods:{$ref:"#/definitions/Vector2<string>",description:'The A.M. and P.M. equivalents (e.g., ["AM", "PM"]).'},shortDays:{$ref:"#/definitions/Vector7<string>",description:"The abbreviated names of the weekdays, starting with Sunday."},shortMonths:{$ref:"#/definitions/Vector12<string>",description:"The abbreviated names of the months (starting with January)."},time:{description:'The time (%X) format specifier (e.g., "%H:%M:%S").',type:"string"}},required:["dateTime","date","time","periods","days","shortDays","months","shortMonths"],type:"object"},TimeUnit:{anyOf:[{$ref:"#/definitions/SingleTimeUnit"},{$ref:"#/definitions/MultiTimeUnit"}]},TimeUnitParams:{additionalProperties:!1,description:'Time Unit Params for encoding predicate, which can specified if the data is  already "binned".',properties:{binned:{description:"Whether the data has already been binned to this time unit. If true, Vega-Lite will only format the data, marks, and guides, without applying the timeUnit transform to re-bin the data again.",type:"boolean"},maxbins:{description:"If no `unit` is specified, maxbins is used to infer time units.",type:"number"},step:{description:"The number of steps between bins, in terms of the least significant unit provided.",type:"number"},unit:{$ref:"#/definitions/TimeUnit",description:"Defines how date-time values should be binned."},utc:{description:"True to use UTC timezone. Equivalent to using a `utc` prefixed `TimeUnit`.",type:"boolean"}},type:"object"},TimeUnitTransform:{additionalProperties:!1,properties:{as:{$ref:"#/definitions/FieldName",description:"The output field to write the timeUnit value."},field:{$ref:"#/definitions/FieldName",description:"The data field to apply time unit."},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/TimeUnitTransformParams"}],description:"The timeUnit."}},required:["timeUnit","field","as"],type:"object"},TimeUnitTransformParams:{additionalProperties:!1,properties:{maxbins:{description:"If no `unit` is specified, maxbins is used to infer time units.",type:"number"},step:{description:"The number of steps between bins, in terms of the least significant unit provided.",type:"number"},unit:{$ref:"#/definitions/TimeUnit",description:"Defines how date-time values should be binned."},utc:{description:"True to use UTC timezone. Equivalent to using a `utc` prefixed `TimeUnit`.",type:"boolean"}},type:"object"},TitleAnchor:{enum:[null,"start","middle","end"],type:["null","string"]},TitleConfig:{$ref:"#/definitions/BaseTitleNoValueRefs"},TitleFrame:{enum:["bounds","group"],type:"string"},TitleOrient:{enum:["none","left","right","top","bottom"],type:"string"},TitleParams:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/Align",description:'Horizontal text alignment for title text. One of `"left"`, `"center"`, or `"right"`.'},anchor:{$ref:"#/definitions/TitleAnchor",description:'The anchor position for placing the title. One of `"start"`, `"middle"`, or `"end"`. For example, with an orientation of top these anchor positions map to a left-, center-, or right-aligned title.\n\n__Default value:__ `"middle"` for [single](https://vega.github.io/vega-lite/docs/spec.html) and [layered](https://vega.github.io/vega-lite/docs/layer.html) views. `"start"` for other composite views.\n\n__Note:__ [For now](https://github.com/vega/vega-lite/issues/2875), `anchor` is only customizable only for [single](https://vega.github.io/vega-lite/docs/spec.html) and [layered](https://vega.github.io/vega-lite/docs/layer.html) views. For other composite views, `anchor` is always `"start"`.'},angle:{anyOf:[{description:"Angle in degrees of title and subtitle text.",type:"number"},{$ref:"#/definitions/ExprRef"}]},aria:{anyOf:[{description:'A boolean flag indicating if [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) should be included (SVG output only). If `false`, the "aria-hidden" attribute will be set on the output SVG group, removing the title from the ARIA accessibility tree.\n\n__Default value:__ `true`',type:"boolean"},{$ref:"#/definitions/ExprRef"}]},baseline:{$ref:"#/definitions/TextBaseline",description:'Vertical text baseline for title and subtitle text. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`, `"line-top"`, or `"line-bottom"`. The `"line-top"` and `"line-bottom"` values operate similarly to `"top"` and `"bottom"`, but are calculated relative to the *lineHeight* rather than *fontSize* alone.'},color:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Text color for title text."},{$ref:"#/definitions/ExprRef"}]},dx:{anyOf:[{description:"Delta offset for title and subtitle text x-coordinate.",type:"number"},{$ref:"#/definitions/ExprRef"}]},dy:{anyOf:[{description:"Delta offset for title and subtitle text y-coordinate.",type:"number"},{$ref:"#/definitions/ExprRef"}]},font:{anyOf:[{description:"Font name for title text.",type:"string"},{$ref:"#/definitions/ExprRef"}]},fontSize:{anyOf:[{description:"Font size in pixels for title text.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},fontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"Font style for title text."},{$ref:"#/definitions/ExprRef"}]},fontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'Font weight for title text. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},frame:{anyOf:[{anyOf:[{$ref:"#/definitions/TitleFrame"},{type:"string"}],description:'The reference frame for the anchor position, one of `"bounds"` (to anchor relative to the full bounding box) or `"group"` (to anchor relative to the group width or height).'},{$ref:"#/definitions/ExprRef"}]},limit:{anyOf:[{description:"The maximum allowed length in pixels of title and subtitle text.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},lineHeight:{anyOf:[{description:'Line height in pixels for multi-line title text or title text with `"line-top"` or `"line-bottom"` baseline.',type:"number"},{$ref:"#/definitions/ExprRef"}]},offset:{anyOf:[{description:"The orthogonal offset in pixels by which to displace the title group from its position along the edge of the chart.",type:"number"},{$ref:"#/definitions/ExprRef"}]},orient:{anyOf:[{$ref:"#/definitions/TitleOrient",description:'Default title orientation (`"top"`, `"bottom"`, `"left"`, or `"right"`)'},{$ref:"#/definitions/ExprRef"}]},style:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:'A [mark style property](https://vega.github.io/vega-lite/docs/config.html#style) to apply to the title text mark.\n\n__Default value:__ `"group-title"`.'},subtitle:{$ref:"#/definitions/Text",description:"The subtitle Text."},subtitleColor:{anyOf:[{anyOf:[{type:"null"},{$ref:"#/definitions/Color"}],description:"Text color for subtitle text."},{$ref:"#/definitions/ExprRef"}]},subtitleFont:{anyOf:[{description:"Font name for subtitle text.",type:"string"},{$ref:"#/definitions/ExprRef"}]},subtitleFontSize:{anyOf:[{description:"Font size in pixels for subtitle text.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},subtitleFontStyle:{anyOf:[{$ref:"#/definitions/FontStyle",description:"Font style for subtitle text."},{$ref:"#/definitions/ExprRef"}]},subtitleFontWeight:{anyOf:[{$ref:"#/definitions/FontWeight",description:'Font weight for subtitle text. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},{$ref:"#/definitions/ExprRef"}]},subtitleLineHeight:{anyOf:[{description:"Line height in pixels for multi-line subtitle text.",type:"number"},{$ref:"#/definitions/ExprRef"}]},subtitlePadding:{anyOf:[{description:"The padding in pixels between title and subtitle text.",type:"number"},{$ref:"#/definitions/ExprRef"}]},text:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/ExprRef"}],description:"The title text."},zindex:{description:"The integer z-index indicating the layering of the title group relative to other axis, mark and legend groups.\n\n__Default value:__ `0`.",minimum:0,type:"number"}},required:["text"],type:"object"},TooltipContent:{additionalProperties:!1,properties:{content:{enum:["encoding","data"],type:"string"}},required:["content"],type:"object"},TopLevelConcatSpec:{additionalProperties:!1,properties:{$schema:{description:"URL to [JSON schema](http://json-schema.org/) for a Vega-Lite specification. Unless you have a reason to change this, use `https://vega.github.io/schema/vega-lite/v5.json`. Setting the `$schema` property allows automatic validation and autocomplete in editors that support JSON schema.",format:"uri",type:"string"},align:{anyOf:[{$ref:"#/definitions/LayoutAlign"},{$ref:"#/definitions/RowCol<LayoutAlign>"}],description:'The alignment to apply to grid rows and columns. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\nAlternatively, an object value of the form `{"row": string, "column": string}` can be used to supply different alignments for rows and columns.\n\n__Default value:__ `"all"`.'},autosize:{anyOf:[{$ref:"#/definitions/AutosizeType"},{$ref:"#/definitions/AutoSizeParams"}],description:'How the visualization size should be determined. If a string, should be one of `"pad"`, `"fit"` or `"none"`. Object values can additionally specify parameters for content sizing and automatic resizing.\n\n__Default value__: `pad`'},background:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:'CSS color property to use as the background of the entire view.\n\n__Default value:__ `"white"`'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{anyOf:[{type:"boolean"},{$ref:"#/definitions/RowCol<boolean>"}],description:'Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\nAn object value of the form `{"row": boolean, "column": boolean}` can be used to supply different centering values for rows and columns.\n\n__Default value:__ `false`'},columns:{description:"The number of columns to include in the view composition layout.\n\n__Default value__: `undefined` -- An infinite number of columns (a single row) will be assumed. This is equivalent to `hconcat` (for `concat`) and to using the `column` channel (for `facet` and `repeat`).\n\n__Note__:\n\n1) This property is only for:\n- the general (wrappable) `concat` operator (not `hconcat`/`vconcat`)\n- the `facet` and `repeat` operator with one field/repetition definition (without row/column nesting)\n\n2) Setting the `columns` to `1` is equivalent to `vconcat` (for `concat`) and to using the `row` channel (for `facet` and `repeat`).",type:"number"},concat:{description:"A list of views to be concatenated.",items:{$ref:"#/definitions/NonNormalizedSpec"},type:"array"},config:{$ref:"#/definitions/Config",description:"Vega-Lite configuration object. This property can only be defined at the top-level of a specification."},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},datasets:{$ref:"#/definitions/Datasets",description:"A global data store for named datasets. This is a mapping from names to inline datasets. This can be an array of objects or primitive values or a string. Arrays of primitive values are ingested as objects with a `data` property."},description:{description:"Description of this mark for commenting purpose.",type:"string"},name:{description:"Name of the visualization for later reference.",type:"string"},padding:{anyOf:[{$ref:"#/definitions/Padding"},{$ref:"#/definitions/ExprRef"}],description:'The default visualization padding, in pixels, from the edge of the visualization canvas to the data rectangle. If a number, specifies padding for all sides. If an object, the value should have the format `{"left": 5, "top": 5, "right": 5, "bottom": 5}` to specify padding for each side of the visualization.\n\n__Default value__: `5`'},params:{description:"Dynamic variables or selections that parameterize a visualization.",items:{$ref:"#/definitions/TopLevelParameter"},type:"array"},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{anyOf:[{type:"number"},{$ref:"#/definitions/RowCol<number>"}],description:'The spacing in pixels between sub-views of the composition operator. An object of the form `{"row": number, "column": number}` can be used to set different spacing values for rows and columns.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)'},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},usermeta:{$ref:"#/definitions/Dict",description:"Optional metadata that will be passed to Vega. This object is completely ignored by Vega and Vega-Lite and can be used for custom metadata."}},required:["concat"],type:"object"},TopLevelHConcatSpec:{additionalProperties:!1,properties:{$schema:{description:"URL to [JSON schema](http://json-schema.org/) for a Vega-Lite specification. Unless you have a reason to change this, use `https://vega.github.io/schema/vega-lite/v5.json`. Setting the `$schema` property allows automatic validation and autocomplete in editors that support JSON schema.",format:"uri",type:"string"},autosize:{anyOf:[{$ref:"#/definitions/AutosizeType"},{$ref:"#/definitions/AutoSizeParams"}],description:'How the visualization size should be determined. If a string, should be one of `"pad"`, `"fit"` or `"none"`. Object values can additionally specify parameters for content sizing and automatic resizing.\n\n__Default value__: `pad`'},background:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:'CSS color property to use as the background of the entire view.\n\n__Default value:__ `"white"`'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{description:"Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\n__Default value:__ `false`",type:"boolean"},config:{$ref:"#/definitions/Config",description:"Vega-Lite configuration object. This property can only be defined at the top-level of a specification."},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},datasets:{$ref:"#/definitions/Datasets",description:"A global data store for named datasets. This is a mapping from names to inline datasets. This can be an array of objects or primitive values or a string. Arrays of primitive values are ingested as objects with a `data` property."},description:{description:"Description of this mark for commenting purpose.",type:"string"},hconcat:{description:"A list of views to be concatenated and put into a row.",items:{$ref:"#/definitions/NonNormalizedSpec"},type:"array"},name:{description:"Name of the visualization for later reference.",type:"string"},padding:{anyOf:[{$ref:"#/definitions/Padding"},{$ref:"#/definitions/ExprRef"}],description:'The default visualization padding, in pixels, from the edge of the visualization canvas to the data rectangle. If a number, specifies padding for all sides. If an object, the value should have the format `{"left": 5, "top": 5, "right": 5, "bottom": 5}` to specify padding for each side of the visualization.\n\n__Default value__: `5`'},params:{description:"Dynamic variables or selections that parameterize a visualization.",items:{$ref:"#/definitions/TopLevelParameter"},type:"array"},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{description:"The spacing in pixels between sub-views of the concat operator.\n\n__Default value__: `10`",type:"number"},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},usermeta:{$ref:"#/definitions/Dict",description:"Optional metadata that will be passed to Vega. This object is completely ignored by Vega and Vega-Lite and can be used for custom metadata."}},required:["hconcat"],type:"object"},TopLevelVConcatSpec:{additionalProperties:!1,properties:{$schema:{description:"URL to [JSON schema](http://json-schema.org/) for a Vega-Lite specification. Unless you have a reason to change this, use `https://vega.github.io/schema/vega-lite/v5.json`. Setting the `$schema` property allows automatic validation and autocomplete in editors that support JSON schema.",format:"uri",type:"string"},autosize:{anyOf:[{$ref:"#/definitions/AutosizeType"},{$ref:"#/definitions/AutoSizeParams"}],description:'How the visualization size should be determined. If a string, should be one of `"pad"`, `"fit"` or `"none"`. Object values can additionally specify parameters for content sizing and automatic resizing.\n\n__Default value__: `pad`'},background:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:'CSS color property to use as the background of the entire view.\n\n__Default value:__ `"white"`'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{description:"Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\n__Default value:__ `false`",type:"boolean"},config:{$ref:"#/definitions/Config",description:"Vega-Lite configuration object. This property can only be defined at the top-level of a specification."},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},datasets:{$ref:"#/definitions/Datasets",description:"A global data store for named datasets. This is a mapping from names to inline datasets. This can be an array of objects or primitive values or a string. Arrays of primitive values are ingested as objects with a `data` property."},description:{description:"Description of this mark for commenting purpose.",type:"string"},name:{description:"Name of the visualization for later reference.",type:"string"},padding:{anyOf:[{$ref:"#/definitions/Padding"},{$ref:"#/definitions/ExprRef"}],description:'The default visualization padding, in pixels, from the edge of the visualization canvas to the data rectangle. If a number, specifies padding for all sides. If an object, the value should have the format `{"left": 5, "top": 5, "right": 5, "bottom": 5}` to specify padding for each side of the visualization.\n\n__Default value__: `5`'},params:{description:"Dynamic variables or selections that parameterize a visualization.",items:{$ref:"#/definitions/TopLevelParameter"},type:"array"},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{description:"The spacing in pixels between sub-views of the concat operator.\n\n__Default value__: `10`",type:"number"},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},usermeta:{$ref:"#/definitions/Dict",description:"Optional metadata that will be passed to Vega. This object is completely ignored by Vega and Vega-Lite and can be used for custom metadata."},vconcat:{description:"A list of views to be concatenated and put into a column.",items:{$ref:"#/definitions/NonNormalizedSpec"},type:"array"}},required:["vconcat"],type:"object"},TopLevelLayerSpec:{additionalProperties:!1,properties:{$schema:{description:"URL to [JSON schema](http://json-schema.org/) for a Vega-Lite specification. Unless you have a reason to change this, use `https://vega.github.io/schema/vega-lite/v5.json`. Setting the `$schema` property allows automatic validation and autocomplete in editors that support JSON schema.",format:"uri",type:"string"},autosize:{anyOf:[{$ref:"#/definitions/AutosizeType"},{$ref:"#/definitions/AutoSizeParams"}],description:'How the visualization size should be determined. If a string, should be one of `"pad"`, `"fit"` or `"none"`. Object values can additionally specify parameters for content sizing and automatic resizing.\n\n__Default value__: `pad`'},background:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:'CSS color property to use as the background of the entire view.\n\n__Default value:__ `"white"`'},config:{$ref:"#/definitions/Config",description:"Vega-Lite configuration object. This property can only be defined at the top-level of a specification."},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},datasets:{$ref:"#/definitions/Datasets",description:"A global data store for named datasets. This is a mapping from names to inline datasets. This can be an array of objects or primitive values or a string. Arrays of primitive values are ingested as objects with a `data` property."},description:{description:"Description of this mark for commenting purpose.",type:"string"},encoding:{$ref:"#/definitions/SharedEncoding",description:"A shared key-value mapping between encoding channels and definition of fields in the underlying layers."},height:{anyOf:[{type:"number"},{const:"container",type:"string"},{$ref:"#/definitions/Step"}],description:'The height of a visualization.\n\n- For a plot with a continuous y-field, height should be a number.\n- For a plot with either a discrete y-field or no y-field, height can be either a number indicating a fixed height or an object in the form of `{step: number}` defining the height per discrete step. (No y-field is equivalent to having one discrete step.)\n- To enable responsive sizing on height, it should be set to `"container"`.\n\n__Default value:__ Based on `config.view.continuousHeight` for a plot with a continuous y-field and `config.view.discreteHeight` otherwise.\n\n__Note:__ For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the height of a single view and the `"container"` option cannot be used.\n\n__See also:__ [`height`](https://vega.github.io/vega-lite/docs/size.html) documentation.'},layer:{description:"Layer or single view specifications to be layered.\n\n__Note__: Specifications inside `layer` cannot use `row` and `column` channels as layering facet specifications is not allowed. Instead, use the [facet operator](https://vega.github.io/vega-lite/docs/facet.html) and place a layer inside a facet.",items:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},type:"array"},name:{description:"Name of the visualization for later reference.",type:"string"},padding:{anyOf:[{$ref:"#/definitions/Padding"},{$ref:"#/definitions/ExprRef"}],description:'The default visualization padding, in pixels, from the edge of the visualization canvas to the data rectangle. If a number, specifies padding for all sides. If an object, the value should have the format `{"left": 5, "top": 5, "right": 5, "bottom": 5}` to specify padding for each side of the visualization.\n\n__Default value__: `5`'},params:{description:"Dynamic variables or selections that parameterize a visualization.",items:{$ref:"#/definitions/TopLevelParameter"},type:"array"},projection:{$ref:"#/definitions/Projection",description:"An object defining properties of the geographic projection shared by underlying layers."},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},usermeta:{$ref:"#/definitions/Dict",description:"Optional metadata that will be passed to Vega. This object is completely ignored by Vega and Vega-Lite and can be used for custom metadata."},view:{$ref:"#/definitions/ViewBackground",description:`An object defining the view background's fill and stroke.

__Default value:__ none (transparent)`},width:{anyOf:[{type:"number"},{const:"container",type:"string"},{$ref:"#/definitions/Step"}],description:'The width of a visualization.\n\n- For a plot with a continuous x-field, width should be a number.\n- For a plot with either a discrete x-field or no x-field, width can be either a number indicating a fixed width or an object in the form of `{step: number}` defining the width per discrete step. (No x-field is equivalent to having one discrete step.)\n- To enable responsive sizing on width, it should be set to `"container"`.\n\n__Default value:__ Based on `config.view.continuousWidth` for a plot with a continuous x-field and `config.view.discreteWidth` otherwise.\n\n__Note:__ For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the width of a single view and the `"container"` option cannot be used.\n\n__See also:__ [`width`](https://vega.github.io/vega-lite/docs/size.html) documentation.'}},required:["layer"],type:"object"},TopLevelRepeatSpec:{anyOf:[{additionalProperties:!1,properties:{$schema:{description:"URL to [JSON schema](http://json-schema.org/) for a Vega-Lite specification. Unless you have a reason to change this, use `https://vega.github.io/schema/vega-lite/v5.json`. Setting the `$schema` property allows automatic validation and autocomplete in editors that support JSON schema.",format:"uri",type:"string"},align:{anyOf:[{$ref:"#/definitions/LayoutAlign"},{$ref:"#/definitions/RowCol<LayoutAlign>"}],description:'The alignment to apply to grid rows and columns. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\nAlternatively, an object value of the form `{"row": string, "column": string}` can be used to supply different alignments for rows and columns.\n\n__Default value:__ `"all"`.'},autosize:{anyOf:[{$ref:"#/definitions/AutosizeType"},{$ref:"#/definitions/AutoSizeParams"}],description:'How the visualization size should be determined. If a string, should be one of `"pad"`, `"fit"` or `"none"`. Object values can additionally specify parameters for content sizing and automatic resizing.\n\n__Default value__: `pad`'},background:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:'CSS color property to use as the background of the entire view.\n\n__Default value:__ `"white"`'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{anyOf:[{type:"boolean"},{$ref:"#/definitions/RowCol<boolean>"}],description:'Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\nAn object value of the form `{"row": boolean, "column": boolean}` can be used to supply different centering values for rows and columns.\n\n__Default value:__ `false`'},columns:{description:"The number of columns to include in the view composition layout.\n\n__Default value__: `undefined` -- An infinite number of columns (a single row) will be assumed. This is equivalent to `hconcat` (for `concat`) and to using the `column` channel (for `facet` and `repeat`).\n\n__Note__:\n\n1) This property is only for:\n- the general (wrappable) `concat` operator (not `hconcat`/`vconcat`)\n- the `facet` and `repeat` operator with one field/repetition definition (without row/column nesting)\n\n2) Setting the `columns` to `1` is equivalent to `vconcat` (for `concat`) and to using the `row` channel (for `facet` and `repeat`).",type:"number"},config:{$ref:"#/definitions/Config",description:"Vega-Lite configuration object. This property can only be defined at the top-level of a specification."},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},datasets:{$ref:"#/definitions/Datasets",description:"A global data store for named datasets. This is a mapping from names to inline datasets. This can be an array of objects or primitive values or a string. Arrays of primitive values are ingested as objects with a `data` property."},description:{description:"Description of this mark for commenting purpose.",type:"string"},name:{description:"Name of the visualization for later reference.",type:"string"},padding:{anyOf:[{$ref:"#/definitions/Padding"},{$ref:"#/definitions/ExprRef"}],description:'The default visualization padding, in pixels, from the edge of the visualization canvas to the data rectangle. If a number, specifies padding for all sides. If an object, the value should have the format `{"left": 5, "top": 5, "right": 5, "bottom": 5}` to specify padding for each side of the visualization.\n\n__Default value__: `5`'},params:{description:"Dynamic variables or selections that parameterize a visualization.",items:{$ref:"#/definitions/TopLevelParameter"},type:"array"},repeat:{anyOf:[{items:{type:"string"},type:"array"},{$ref:"#/definitions/RepeatMapping"}],description:'Definition for fields to be repeated. One of: 1) An array of fields to be repeated. If `"repeat"` is an array, the field can be referred to as `{"repeat": "repeat"}`. The repeated views are laid out in a wrapped row. You can set the number of columns to control the wrapping. 2) An object that maps `"row"` and/or `"column"` to the listed fields to be repeated along the particular orientations. The objects `{"repeat": "row"}` and `{"repeat": "column"}` can be used to refer to the repeated field respectively.'},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{anyOf:[{type:"number"},{$ref:"#/definitions/RowCol<number>"}],description:'The spacing in pixels between sub-views of the composition operator. An object of the form `{"row": number, "column": number}` can be used to set different spacing values for rows and columns.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)'},spec:{$ref:"#/definitions/NonNormalizedSpec",description:"A specification of the view that gets repeated."},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},usermeta:{$ref:"#/definitions/Dict",description:"Optional metadata that will be passed to Vega. This object is completely ignored by Vega and Vega-Lite and can be used for custom metadata."}},required:["repeat","spec"],type:"object"},{additionalProperties:!1,properties:{$schema:{description:"URL to [JSON schema](http://json-schema.org/) for a Vega-Lite specification. Unless you have a reason to change this, use `https://vega.github.io/schema/vega-lite/v5.json`. Setting the `$schema` property allows automatic validation and autocomplete in editors that support JSON schema.",format:"uri",type:"string"},align:{anyOf:[{$ref:"#/definitions/LayoutAlign"},{$ref:"#/definitions/RowCol<LayoutAlign>"}],description:'The alignment to apply to grid rows and columns. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\nAlternatively, an object value of the form `{"row": string, "column": string}` can be used to supply different alignments for rows and columns.\n\n__Default value:__ `"all"`.'},autosize:{anyOf:[{$ref:"#/definitions/AutosizeType"},{$ref:"#/definitions/AutoSizeParams"}],description:'How the visualization size should be determined. If a string, should be one of `"pad"`, `"fit"` or `"none"`. Object values can additionally specify parameters for content sizing and automatic resizing.\n\n__Default value__: `pad`'},background:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:'CSS color property to use as the background of the entire view.\n\n__Default value:__ `"white"`'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{anyOf:[{type:"boolean"},{$ref:"#/definitions/RowCol<boolean>"}],description:'Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\nAn object value of the form `{"row": boolean, "column": boolean}` can be used to supply different centering values for rows and columns.\n\n__Default value:__ `false`'},columns:{description:"The number of columns to include in the view composition layout.\n\n__Default value__: `undefined` -- An infinite number of columns (a single row) will be assumed. This is equivalent to `hconcat` (for `concat`) and to using the `column` channel (for `facet` and `repeat`).\n\n__Note__:\n\n1) This property is only for:\n- the general (wrappable) `concat` operator (not `hconcat`/`vconcat`)\n- the `facet` and `repeat` operator with one field/repetition definition (without row/column nesting)\n\n2) Setting the `columns` to `1` is equivalent to `vconcat` (for `concat`) and to using the `row` channel (for `facet` and `repeat`).",type:"number"},config:{$ref:"#/definitions/Config",description:"Vega-Lite configuration object. This property can only be defined at the top-level of a specification."},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},datasets:{$ref:"#/definitions/Datasets",description:"A global data store for named datasets. This is a mapping from names to inline datasets. This can be an array of objects or primitive values or a string. Arrays of primitive values are ingested as objects with a `data` property."},description:{description:"Description of this mark for commenting purpose.",type:"string"},name:{description:"Name of the visualization for later reference.",type:"string"},padding:{anyOf:[{$ref:"#/definitions/Padding"},{$ref:"#/definitions/ExprRef"}],description:'The default visualization padding, in pixels, from the edge of the visualization canvas to the data rectangle. If a number, specifies padding for all sides. If an object, the value should have the format `{"left": 5, "top": 5, "right": 5, "bottom": 5}` to specify padding for each side of the visualization.\n\n__Default value__: `5`'},params:{description:"Dynamic variables or selections that parameterize a visualization.",items:{$ref:"#/definitions/TopLevelParameter"},type:"array"},repeat:{$ref:"#/definitions/LayerRepeatMapping",description:'Definition for fields to be repeated. One of: 1) An array of fields to be repeated. If `"repeat"` is an array, the field can be referred to as `{"repeat": "repeat"}`. The repeated views are laid out in a wrapped row. You can set the number of columns to control the wrapping. 2) An object that maps `"row"` and/or `"column"` to the listed fields to be repeated along the particular orientations. The objects `{"repeat": "row"}` and `{"repeat": "column"}` can be used to refer to the repeated field respectively.'},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{anyOf:[{type:"number"},{$ref:"#/definitions/RowCol<number>"}],description:'The spacing in pixels between sub-views of the composition operator. An object of the form `{"row": number, "column": number}` can be used to set different spacing values for rows and columns.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)'},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpecWithFrame"}],description:"A specification of the view that gets repeated."},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},usermeta:{$ref:"#/definitions/Dict",description:"Optional metadata that will be passed to Vega. This object is completely ignored by Vega and Vega-Lite and can be used for custom metadata."}},required:["repeat","spec"],type:"object"}]},TopLevelFacetSpec:{additionalProperties:!1,properties:{$schema:{description:"URL to [JSON schema](http://json-schema.org/) for a Vega-Lite specification. Unless you have a reason to change this, use `https://vega.github.io/schema/vega-lite/v5.json`. Setting the `$schema` property allows automatic validation and autocomplete in editors that support JSON schema.",format:"uri",type:"string"},align:{anyOf:[{$ref:"#/definitions/LayoutAlign"},{$ref:"#/definitions/RowCol<LayoutAlign>"}],description:'The alignment to apply to grid rows and columns. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\nAlternatively, an object value of the form `{"row": string, "column": string}` can be used to supply different alignments for rows and columns.\n\n__Default value:__ `"all"`.'},autosize:{anyOf:[{$ref:"#/definitions/AutosizeType"},{$ref:"#/definitions/AutoSizeParams"}],description:'How the visualization size should be determined. If a string, should be one of `"pad"`, `"fit"` or `"none"`. Object values can additionally specify parameters for content sizing and automatic resizing.\n\n__Default value__: `pad`'},background:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:'CSS color property to use as the background of the entire view.\n\n__Default value:__ `"white"`'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{anyOf:[{type:"boolean"},{$ref:"#/definitions/RowCol<boolean>"}],description:'Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\nAn object value of the form `{"row": boolean, "column": boolean}` can be used to supply different centering values for rows and columns.\n\n__Default value:__ `false`'},columns:{description:"The number of columns to include in the view composition layout.\n\n__Default value__: `undefined` -- An infinite number of columns (a single row) will be assumed. This is equivalent to `hconcat` (for `concat`) and to using the `column` channel (for `facet` and `repeat`).\n\n__Note__:\n\n1) This property is only for:\n- the general (wrappable) `concat` operator (not `hconcat`/`vconcat`)\n- the `facet` and `repeat` operator with one field/repetition definition (without row/column nesting)\n\n2) Setting the `columns` to `1` is equivalent to `vconcat` (for `concat`) and to using the `row` channel (for `facet` and `repeat`).",type:"number"},config:{$ref:"#/definitions/Config",description:"Vega-Lite configuration object. This property can only be defined at the top-level of a specification."},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},datasets:{$ref:"#/definitions/Datasets",description:"A global data store for named datasets. This is a mapping from names to inline datasets. This can be an array of objects or primitive values or a string. Arrays of primitive values are ingested as objects with a `data` property."},description:{description:"Description of this mark for commenting purpose.",type:"string"},facet:{anyOf:[{$ref:"#/definitions/FacetFieldDef"},{$ref:"#/definitions/FacetMapping"}],description:"Definition for how to facet the data. One of: 1) [a field definition for faceting the plot by one field](https://vega.github.io/vega-lite/docs/facet.html#field-def) 2) [An object that maps `row` and `column` channels to their field definitions](https://vega.github.io/vega-lite/docs/facet.html#mapping)"},name:{description:"Name of the visualization for later reference.",type:"string"},padding:{anyOf:[{$ref:"#/definitions/Padding"},{$ref:"#/definitions/ExprRef"}],description:'The default visualization padding, in pixels, from the edge of the visualization canvas to the data rectangle. If a number, specifies padding for all sides. If an object, the value should have the format `{"left": 5, "top": 5, "right": 5, "bottom": 5}` to specify padding for each side of the visualization.\n\n__Default value__: `5`'},params:{description:"Dynamic variables or selections that parameterize a visualization.",items:{$ref:"#/definitions/TopLevelParameter"},type:"array"},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{anyOf:[{type:"number"},{$ref:"#/definitions/RowCol<number>"}],description:'The spacing in pixels between sub-views of the composition operator. An object of the form `{"row": number, "column": number}` can be used to set different spacing values for rows and columns.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)'},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpecWithFrame"}],description:"A specification of the view that gets faceted."},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},usermeta:{$ref:"#/definitions/Dict",description:"Optional metadata that will be passed to Vega. This object is completely ignored by Vega and Vega-Lite and can be used for custom metadata."}},required:["data","facet","spec"],type:"object"},TopLevelParameter:{anyOf:[{$ref:"#/definitions/VariableParameter"},{$ref:"#/definitions/TopLevelSelectionParameter"}]},TopLevelSelectionParameter:{additionalProperties:!1,properties:{bind:{anyOf:[{$ref:"#/definitions/Binding"},{additionalProperties:{$ref:"#/definitions/Binding"},type:"object"},{$ref:"#/definitions/LegendBinding"},{const:"scales",type:"string"}],description:`When set, a selection is populated by input elements (also known as dynamic query widgets) or by interacting with the corresponding legend. Direct manipulation interaction is disabled by default; to re-enable it, set the selection's [\`on\`](https://vega.github.io/vega-lite/docs/selection.html#common-selection-properties) property.

Legend bindings are restricted to selections that only specify a single field or encoding.

Query widget binding takes the form of Vega's [input element binding definition](https://vega.github.io/vega/docs/signals/#bind) or can be a mapping between projected field/encodings and binding definitions.

__See also:__ [\`bind\`](https://vega.github.io/vega-lite/docs/bind.html) documentation.`},name:{$ref:"#/definitions/ParameterName",description:'Required. A unique name for the selection parameter. Selection names should be valid JavaScript identifiers: they should contain only alphanumeric characters (or "$", or "_") and may not start with a digit. Reserved keywords that may not be used as parameter names are "datum", "event", "item", and "parent".'},select:{anyOf:[{$ref:"#/definitions/SelectionType"},{$ref:"#/definitions/PointSelectionConfig"},{$ref:"#/definitions/IntervalSelectionConfig"}],description:'Determines the default event processing and data query for the selection. Vega-Lite currently supports two selection types:\n\n- `"point"` -- to select multiple discrete data values; the first value is selected on `click` and additional values toggled on shift-click.\n- `"interval"` -- to select a continuous range of data values on `drag`.'},value:{anyOf:[{$ref:"#/definitions/SelectionInit"},{items:{$ref:"#/definitions/SelectionInitMapping"},type:"array"},{$ref:"#/definitions/SelectionInitIntervalMapping"}],description:"Initialize the selection with a mapping between [projected channels or field names](https://vega.github.io/vega-lite/docs/selection.html#project) and initial values.\n\n__See also:__ [`init`](https://vega.github.io/vega-lite/docs/value.html) documentation."},views:{description:"By default, top-level selections are applied to every view in the visualization. If this property is specified, selections will only be applied to views with the given names.",items:{type:"string"},type:"array"}},required:["name","select"],type:"object"},TopLevelSpec:{anyOf:[{$ref:"#/definitions/TopLevelUnitSpec"},{$ref:"#/definitions/TopLevelFacetSpec"},{$ref:"#/definitions/TopLevelLayerSpec"},{$ref:"#/definitions/TopLevelRepeatSpec"},{$ref:"#/definitions/TopLevelConcatSpec"},{$ref:"#/definitions/TopLevelVConcatSpec"},{$ref:"#/definitions/TopLevelHConcatSpec"}],description:"A Vega-Lite top-level specification. This is the root class for all Vega-Lite specifications. (The json schema is generated from this type.)"},TopLevelUnitSpec:{additionalProperties:!1,properties:{$schema:{description:"URL to [JSON schema](http://json-schema.org/) for a Vega-Lite specification. Unless you have a reason to change this, use `https://vega.github.io/schema/vega-lite/v5.json`. Setting the `$schema` property allows automatic validation and autocomplete in editors that support JSON schema.",format:"uri",type:"string"},align:{anyOf:[{$ref:"#/definitions/LayoutAlign"},{$ref:"#/definitions/RowCol<LayoutAlign>"}],description:'The alignment to apply to grid rows and columns. The supported string values are `"all"`, `"each"`, and `"none"`.\n\n- For `"none"`, a flow layout will be used, in which adjacent subviews are simply placed one after the other.\n- For `"each"`, subviews will be aligned into a clean grid structure, but each row or column may be of variable size.\n- For `"all"`, subviews will be aligned and each row or column will be sized identically based on the maximum observed size. String values for this property will be applied to both grid rows and columns.\n\nAlternatively, an object value of the form `{"row": string, "column": string}` can be used to supply different alignments for rows and columns.\n\n__Default value:__ `"all"`.'},autosize:{anyOf:[{$ref:"#/definitions/AutosizeType"},{$ref:"#/definitions/AutoSizeParams"}],description:'How the visualization size should be determined. If a string, should be one of `"pad"`, `"fit"` or `"none"`. Object values can additionally specify parameters for content sizing and automatic resizing.\n\n__Default value__: `pad`'},background:{anyOf:[{$ref:"#/definitions/Color"},{$ref:"#/definitions/ExprRef"}],description:'CSS color property to use as the background of the entire view.\n\n__Default value:__ `"white"`'},bounds:{description:'The bounds calculation method to use for determining the extent of a sub-plot. One of `full` (the default) or `flush`.\n\n- If set to `full`, the entire calculated bounds (including axes, title, and legend) will be used.\n- If set to `flush`, only the specified width and height values for the sub-view will be used. The `flush` setting can be useful when attempting to place sub-plots without axes or legends into a uniform grid structure.\n\n__Default value:__ `"full"`',enum:["full","flush"],type:"string"},center:{anyOf:[{type:"boolean"},{$ref:"#/definitions/RowCol<boolean>"}],description:'Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n\nAn object value of the form `{"row": boolean, "column": boolean}` can be used to supply different centering values for rows and columns.\n\n__Default value:__ `false`'},config:{$ref:"#/definitions/Config",description:"Vega-Lite configuration object. This property can only be defined at the top-level of a specification."},data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},datasets:{$ref:"#/definitions/Datasets",description:"A global data store for named datasets. This is a mapping from names to inline datasets. This can be an array of objects or primitive values or a string. Arrays of primitive values are ingested as objects with a `data` property."},description:{description:"Description of this mark for commenting purpose.",type:"string"},encoding:{$ref:"#/definitions/FacetedEncoding",description:"A key-value mapping between encoding channels and definition of fields."},height:{anyOf:[{type:"number"},{const:"container",type:"string"},{$ref:"#/definitions/Step"}],description:'The height of a visualization.\n\n- For a plot with a continuous y-field, height should be a number.\n- For a plot with either a discrete y-field or no y-field, height can be either a number indicating a fixed height or an object in the form of `{step: number}` defining the height per discrete step. (No y-field is equivalent to having one discrete step.)\n- To enable responsive sizing on height, it should be set to `"container"`.\n\n__Default value:__ Based on `config.view.continuousHeight` for a plot with a continuous y-field and `config.view.discreteHeight` otherwise.\n\n__Note:__ For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the height of a single view and the `"container"` option cannot be used.\n\n__See also:__ [`height`](https://vega.github.io/vega-lite/docs/size.html) documentation.'},mark:{$ref:"#/definitions/AnyMark",description:'A string describing the mark type (one of `"bar"`, `"circle"`, `"square"`, `"tick"`, `"line"`, `"area"`, `"point"`, `"rule"`, `"geoshape"`, and `"text"`) or a [mark definition object](https://vega.github.io/vega-lite/docs/mark.html#mark-def).'},name:{description:"Name of the visualization for later reference.",type:"string"},padding:{anyOf:[{$ref:"#/definitions/Padding"},{$ref:"#/definitions/ExprRef"}],description:'The default visualization padding, in pixels, from the edge of the visualization canvas to the data rectangle. If a number, specifies padding for all sides. If an object, the value should have the format `{"left": 5, "top": 5, "right": 5, "bottom": 5}` to specify padding for each side of the visualization.\n\n__Default value__: `5`'},params:{description:"An array of parameters that may either be simple variables, or more complex selections that map user input to data queries.",items:{$ref:"#/definitions/TopLevelParameter"},type:"array"},projection:{$ref:"#/definitions/Projection",description:'An object defining properties of geographic projection, which will be applied to `shape` path for `"geoshape"` marks and to `latitude` and `"longitude"` channels for other marks.'},resolve:{$ref:"#/definitions/Resolve",description:"Scale, axis, and legend resolutions for view composition specifications."},spacing:{anyOf:[{type:"number"},{$ref:"#/definitions/RowCol<number>"}],description:'The spacing in pixels between sub-views of the composition operator. An object of the form `{"row": number, "column": number}` can be used to set different spacing values for rows and columns.\n\n__Default value__: Depends on `"spacing"` property of [the view composition configuration](https://vega.github.io/vega-lite/docs/config.html#view-config) (`20` by default)'},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},usermeta:{$ref:"#/definitions/Dict",description:"Optional metadata that will be passed to Vega. This object is completely ignored by Vega and Vega-Lite and can be used for custom metadata."},view:{$ref:"#/definitions/ViewBackground",description:`An object defining the view background's fill and stroke.

__Default value:__ none (transparent)`},width:{anyOf:[{type:"number"},{const:"container",type:"string"},{$ref:"#/definitions/Step"}],description:'The width of a visualization.\n\n- For a plot with a continuous x-field, width should be a number.\n- For a plot with either a discrete x-field or no x-field, width can be either a number indicating a fixed width or an object in the form of `{step: number}` defining the width per discrete step. (No x-field is equivalent to having one discrete step.)\n- To enable responsive sizing on width, it should be set to `"container"`.\n\n__Default value:__ Based on `config.view.continuousWidth` for a plot with a continuous x-field and `config.view.discreteWidth` otherwise.\n\n__Note:__ For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the width of a single view and the `"container"` option cannot be used.\n\n__See also:__ [`width`](https://vega.github.io/vega-lite/docs/size.html) documentation.'}},required:["data","mark"],type:"object"},TopoDataFormat:{additionalProperties:!1,properties:{feature:{description:'The name of the TopoJSON object set to convert to a GeoJSON feature collection. For example, in a map of the world, there may be an object set named `"countries"`. Using the feature property, we can extract this set and generate a GeoJSON feature object for each country.',type:"string"},mesh:{description:"The name of the TopoJSON object set to convert to mesh. Similar to the `feature` option, `mesh` extracts a named TopoJSON object set.  Unlike the `feature` option, the corresponding geo data is returned as a single, unified mesh instance, not as individual GeoJSON features. Extracting a mesh is useful for more efficiently drawing borders or other geographic elements that you do not need to associate with specific regions such as individual countries, states or counties.",type:"string"},parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using JavaScript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},type:{const:"topojson",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',type:"string"}},type:"object"},Transform:{anyOf:[{$ref:"#/definitions/AggregateTransform"},{$ref:"#/definitions/BinTransform"},{$ref:"#/definitions/CalculateTransform"},{$ref:"#/definitions/DensityTransform"},{$ref:"#/definitions/ExtentTransform"},{$ref:"#/definitions/FilterTransform"},{$ref:"#/definitions/FlattenTransform"},{$ref:"#/definitions/FoldTransform"},{$ref:"#/definitions/ImputeTransform"},{$ref:"#/definitions/JoinAggregateTransform"},{$ref:"#/definitions/LoessTransform"},{$ref:"#/definitions/LookupTransform"},{$ref:"#/definitions/QuantileTransform"},{$ref:"#/definitions/RegressionTransform"},{$ref:"#/definitions/TimeUnitTransform"},{$ref:"#/definitions/SampleTransform"},{$ref:"#/definitions/StackTransform"},{$ref:"#/definitions/WindowTransform"},{$ref:"#/definitions/PivotTransform"}]},Type:{description:"Data type based on level of measurement",enum:["quantitative","ordinal","temporal","nominal","geojson"],type:"string"},TypeForShape:{enum:["nominal","ordinal","geojson"],type:"string"},TypedFieldDef:{additionalProperties:!1,description:"Definition object for a data field, its type and transformation of an encoding channel.",properties:{aggregate:{$ref:"#/definitions/Aggregate",description:'Aggregation function for the field (e.g., `"mean"`, `"sum"`, `"median"`, `"min"`, `"max"`, `"count"`).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html) documentation.'},bandPosition:{description:"Relative position on a band of a stacked, binned, time unit, or band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},bin:{anyOf:[{type:"boolean"},{$ref:"#/definitions/BinParams"},{const:"binned",type:"string"},{type:"null"}],description:'A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`"binned"`).\n\n- If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html#bin-parameters) will be applied.\n\n- If `"binned"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-Lite.  To adjust the axis ticks based on the bin step, you can also set the axis\'s [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n\n__Default value:__ `false`\n\n__See also:__ [`bin`](https://vega.github.io/vega-lite/docs/bin.html) documentation.'},field:{$ref:"#/definitions/Field",description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.'},timeUnit:{anyOf:[{$ref:"#/definitions/TimeUnit"},{$ref:"#/definitions/BinnedTimeUnit"},{$ref:"#/definitions/TimeUnitParams"}],description:"Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field. or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n\n__Default value:__ `undefined` (None)\n\n__See also:__ [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html) documentation."},title:{anyOf:[{$ref:"#/definitions/Text"},{type:"null"}],description:'A title for the field. If `null`, the title will be removed.\n\n__Default value:__  derived from the field\'s name and transformation function (`aggregate`, `bin` and `timeUnit`). If the field has an aggregate function, the function is displayed as part of the title (e.g., `"Sum of Profit"`). If the field is binned or has a time unit applied, the applied function is shown in parentheses (e.g., `"Profit (binned)"`, `"Transaction Date (year-month)"`). Otherwise, the title is simply the field name.\n\n__Notes__:\n\n1) You can customize the default field title format by providing the [`fieldTitle`](https://vega.github.io/vega-lite/docs/config.html#top-level-config) property in the [config](https://vega.github.io/vega-lite/docs/config.html) or [`fieldTitle` function via the `compile` function\'s options](https://vega.github.io/vega-lite/usage/compile.html#field-title).\n\n2) If both field definition\'s `title` and axis, header, or legend `title` are defined, axis/header/legend title will be used.'},type:{$ref:"#/definitions/StandardType",description:'The type of measurement (`"quantitative"`, `"temporal"`, `"ordinal"`, or `"nominal"`) for the encoded field or constant value (`datum`). It can also be a `"geojson"` type for encoding [\'geoshape\'](https://vega.github.io/vega-lite/docs/geoshape.html).\n\nVega-Lite automatically infers data types in many cases as discussed below. However, type is required for a field if: (1) the field is not nominal and the field encoding has no specified `aggregate` (except `argmin` and `argmax`), `bin`, scale type, custom `sort` order, nor `timeUnit` or (2) if you wish to use an ordinal scale for a field with `bin` or `timeUnit`.\n\n__Default value:__\n\n1) For a data `field`, `"nominal"` is the default data type unless the field encoding has `aggregate`, `channel`, `bin`, scale type, `sort`, or `timeUnit` that satisfies the following criteria:\n- `"quantitative"` is the default type if (1) the encoded field contains `bin` or `aggregate` except `"argmin"` and `"argmax"`, (2) the encoding channel is `latitude` or `longitude` channel or (3) if the specified scale type is [a quantitative scale](https://vega.github.io/vega-lite/docs/scale.html#type).\n- `"temporal"` is the default type if (1) the encoded field contains `timeUnit` or (2) the specified scale type is a time or utc scale\n- `"ordinal"` is the default type if (1) the encoded field contains a [custom `sort` order](https://vega.github.io/vega-lite/docs/sort.html#specifying-custom-sort-order), (2) the specified scale type is an ordinal/point/band scale, or (3) the encoding channel is `order`.\n\n2) For a constant value in data domain (`datum`):\n- `"quantitative"` if the datum is a number\n- `"nominal"` if the datum is a string\n- `"temporal"` if the datum is [a date time object](https://vega.github.io/vega-lite/docs/datetime.html)\n\n__Note:__\n- Data `type` describes the semantics of the data rather than the primitive data types (number, string, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n- Data values for a temporal field can be either a date-time string (e.g., `"2015-03-07 12:32:17"`, `"17:01"`, `"2015-03-16"`. `"2015"`) or a timestamp number (e.g., `1552199579097`).\n- When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `"quantitative"` (for using a linear bin scale) or [`"ordinal"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `"temporal"` (default, for using a temporal scale) or [`"ordinal"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n- When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `"cat"` using `{"aggregate": "distinct", "field": "cat"}`. The `"type"` of the aggregate output is `"quantitative"`.\n- Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they must have exactly the same type as their primary channels (e.g., `x`, `y`).\n\n__See also:__ [`type`](https://vega.github.io/vega-lite/docs/type.html) documentation.'}},type:"object"},URI:{format:"uri-reference",type:"string"},UnitSpec:{$ref:"#/definitions/GenericUnitSpec<Encoding,AnyMark>",description:"A unit specification, which can contain either [primitive marks or composite marks](https://vega.github.io/vega-lite/docs/mark.html#types)."},UnitSpecWithFrame:{additionalProperties:!1,properties:{data:{anyOf:[{$ref:"#/definitions/Data"},{type:"null"}],description:"An object describing the data source. Set to `null` to ignore the parent's data source. If no data is set, it is derived from the parent."},description:{description:"Description of this mark for commenting purpose.",type:"string"},encoding:{$ref:"#/definitions/Encoding",description:"A key-value mapping between encoding channels and definition of fields."},height:{anyOf:[{type:"number"},{const:"container",type:"string"},{$ref:"#/definitions/Step"}],description:'The height of a visualization.\n\n- For a plot with a continuous y-field, height should be a number.\n- For a plot with either a discrete y-field or no y-field, height can be either a number indicating a fixed height or an object in the form of `{step: number}` defining the height per discrete step. (No y-field is equivalent to having one discrete step.)\n- To enable responsive sizing on height, it should be set to `"container"`.\n\n__Default value:__ Based on `config.view.continuousHeight` for a plot with a continuous y-field and `config.view.discreteHeight` otherwise.\n\n__Note:__ For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the height of a single view and the `"container"` option cannot be used.\n\n__See also:__ [`height`](https://vega.github.io/vega-lite/docs/size.html) documentation.'},mark:{$ref:"#/definitions/AnyMark",description:'A string describing the mark type (one of `"bar"`, `"circle"`, `"square"`, `"tick"`, `"line"`, `"area"`, `"point"`, `"rule"`, `"geoshape"`, and `"text"`) or a [mark definition object](https://vega.github.io/vega-lite/docs/mark.html#mark-def).'},name:{description:"Name of the visualization for later reference.",type:"string"},params:{description:"An array of parameters that may either be simple variables, or more complex selections that map user input to data queries.",items:{$ref:"#/definitions/SelectionParameter"},type:"array"},projection:{$ref:"#/definitions/Projection",description:'An object defining properties of geographic projection, which will be applied to `shape` path for `"geoshape"` marks and to `latitude` and `"longitude"` channels for other marks.'},title:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/TitleParams"}],description:"Title for the plot."},transform:{description:"An array of data transformations such as filter and new field calculation.",items:{$ref:"#/definitions/Transform"},type:"array"},view:{$ref:"#/definitions/ViewBackground",description:`An object defining the view background's fill and stroke.

__Default value:__ none (transparent)`},width:{anyOf:[{type:"number"},{const:"container",type:"string"},{$ref:"#/definitions/Step"}],description:'The width of a visualization.\n\n- For a plot with a continuous x-field, width should be a number.\n- For a plot with either a discrete x-field or no x-field, width can be either a number indicating a fixed width or an object in the form of `{step: number}` defining the width per discrete step. (No x-field is equivalent to having one discrete step.)\n- To enable responsive sizing on width, it should be set to `"container"`.\n\n__Default value:__ Based on `config.view.continuousWidth` for a plot with a continuous x-field and `config.view.discreteWidth` otherwise.\n\n__Note:__ For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the width of a single view and the `"container"` option cannot be used.\n\n__See also:__ [`width`](https://vega.github.io/vega-lite/docs/size.html) documentation.'}},required:["mark"],type:"object"},UrlData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},url:{description:"An URL from which to load the data set. Use the `format.type` property to ensure the loaded data is correctly parsed.",type:"string"}},required:["url"],type:"object"},UtcMultiTimeUnit:{enum:["utcyearquarter","utcyearquartermonth","utcyearmonth","utcyearmonthdate","utcyearmonthdatehours","utcyearmonthdatehoursminutes","utcyearmonthdatehoursminutesseconds","utcyearweek","utcyearweekday","utcyearweekdayhours","utcyearweekdayhoursminutes","utcyearweekdayhoursminutesseconds","utcyeardayofyear","utcquartermonth","utcmonthdate","utcmonthdatehours","utcmonthdatehoursminutes","utcmonthdatehoursminutesseconds","utcweekday","utcweekdayhours","utcweekdayhoursminutes","utcweekdayhoursminutesseconds","utcdayhours","utcdayhoursminutes","utcdayhoursminutesseconds","utchoursminutes","utchoursminutesseconds","utcminutesseconds","utcsecondsmilliseconds"],type:"string"},UtcSingleTimeUnit:{enum:["utcyear","utcquarter","utcmonth","utcweek","utcday","utcdayofyear","utcdate","utchours","utcminutes","utcseconds","utcmilliseconds"],type:"string"},'ValueDef<(number|"width"|"height"|ExprRef)>':{additionalProperties:!1,description:"Definition object for a constant value (primitive value or gradient definition) of an encoding channel.",properties:{value:{anyOf:[{type:"number"},{const:"width",type:"string"},{const:"height",type:"string"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},required:["value"],type:"object"},"ValueDef<number>":{additionalProperties:!1,description:"Definition object for a constant value (primitive value or gradient definition) of an encoding channel.",properties:{value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).',type:"number"}},required:["value"],type:"object"},"ValueDefWithCondition<MarkPropFieldOrDatumDef,(Gradient|string|null)>":{additionalProperties:!1,minProperties:1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Gradient|string|null|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."},value:{anyOf:[{$ref:"#/definitions/Gradient"},{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},"ValueDefWithCondition<MarkPropFieldOrDatumDef,(string|null)>":{additionalProperties:!1,minProperties:1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."},value:{anyOf:[{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},"ValueDefWithCondition<MarkPropFieldOrDatumDef,number>":{additionalProperties:!1,minProperties:1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."},value:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},"ValueDefWithCondition<MarkPropFieldOrDatumDef,number[]>":{additionalProperties:!1,minProperties:1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef"},{$ref:"#/definitions/ConditionalValueDef<(number[]|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(number[]|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."},value:{anyOf:[{items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},"ValueDefWithCondition<MarkPropFieldOrDatumDef<TypeForShape>,(string|null)>":{additionalProperties:!1,minProperties:1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalMarkPropFieldOrDatumDef<TypeForShape>"},{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(string|null|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."},value:{anyOf:[{type:"string"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},"ValueDefWithCondition<StringFieldDef,Text>":{additionalProperties:!1,minProperties:1,properties:{condition:{anyOf:[{$ref:"#/definitions/ConditionalStringFieldDef"},{$ref:"#/definitions/ConditionalValueDef<(Text|ExprRef)>"},{items:{$ref:"#/definitions/ConditionalValueDef<(Text|ExprRef)>"},type:"array"}],description:"A field definition or one or more value definition(s) with a parameter predicate."},value:{anyOf:[{$ref:"#/definitions/Text"},{$ref:"#/definitions/ExprRef"}],description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"` / [gradient definition](https://vega.github.io/vega-lite/docs/types.html#gradient) for color, values between `0` to `1` for opacity).'}},type:"object"},VariableParameter:{additionalProperties:!1,properties:{bind:{$ref:"#/definitions/Binding",description:"Binds the parameter to an external input element such as a slider, selection list or radio button group."},expr:{$ref:"#/definitions/Expr",description:"An expression for the value of the parameter. This expression may include other parameters, in which case the parameter will automatically update in response to upstream parameter changes."},name:{$ref:"#/definitions/ParameterName",description:'A unique name for the variable parameter. Parameter names should be valid JavaScript identifiers: they should contain only alphanumeric characters (or "$", or "_") and may not start with a digit. Reserved keywords that may not be used as parameter names are "datum", "event", "item", and "parent".'},react:{description:"A boolean flag (default `true`) indicating if the update expression should be automatically re-evaluated when any upstream signal dependencies update. If `false`, the update expression will not register any dependencies on other signals, even for initialization.\n\n __Default value:__ `true`",type:"boolean"},value:{description:"The [initial value](http://vega.github.io/vega-lite/docs/value.html) of the parameter.\n\n__Default value:__ `undefined`"}},required:["name"],type:"object"},"Vector10<string>":{items:{type:"string"},maxItems:10,minItems:10,type:"array"},"Vector12<string>":{items:{type:"string"},maxItems:12,minItems:12,type:"array"},"Vector2<DateTime>":{items:{$ref:"#/definitions/DateTime"},maxItems:2,minItems:2,type:"array"},"Vector2<Vector2<number>>":{items:{$ref:"#/definitions/Vector2<number>"},maxItems:2,minItems:2,type:"array"},"Vector2<boolean>":{items:{type:"boolean"},maxItems:2,minItems:2,type:"array"},"Vector2<number>":{items:{type:"number"},maxItems:2,minItems:2,type:"array"},"Vector2<string>":{items:{type:"string"},maxItems:2,minItems:2,type:"array"},"Vector3<number>":{items:{type:"number"},maxItems:3,minItems:3,type:"array"},"Vector7<string>":{items:{type:"string"},maxItems:7,minItems:7,type:"array"},ViewBackground:{additionalProperties:!1,properties:{cornerRadius:{anyOf:[{description:"The radius in pixels of rounded rectangles or arcs' corners.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cursor:{$ref:"#/definitions/Cursor",description:"The mouse cursor used over the view. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used."},fill:{anyOf:[{$ref:"#/definitions/Color"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"The fill color.\n\n__Default value:__ `undefined`"},fillOpacity:{anyOf:[{description:"The fill opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},opacity:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The overall opacity (value between [0,1]).\n\n__Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.",maximum:1,minimum:0},stroke:{anyOf:[{$ref:"#/definitions/Color"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'The stroke color.\n\n__Default value:__ `"#ddd"`'},strokeCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for line ending style. One of `"butt"`, `"round"`, or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},strokeDash:{anyOf:[{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},strokeDashOffset:{anyOf:[{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeJoin:{anyOf:[{$ref:"#/definitions/StrokeJoin",description:'The stroke line join method. One of `"miter"`, `"round"` or `"bevel"`.\n\n__Default value:__ `"miter"`'},{$ref:"#/definitions/ExprRef"}]},strokeMiterLimit:{anyOf:[{description:"The miter limit at which to bevel a line join.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOpacity:{anyOf:[{description:"The stroke opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeWidth:{anyOf:[{description:"The stroke width, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},style:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:'A string or array of strings indicating the name of custom styles to apply to the view background. A style is a named collection of mark property defaults defined within the [style configuration](https://vega.github.io/vega-lite/docs/mark.html#style-config). If style is an array, later styles will override earlier styles.\n\n__Default value:__ `"cell"` __Note:__ Any specified view background properties will augment the default style.'}},type:"object"},ViewConfig:{additionalProperties:!1,properties:{clip:{description:"Whether the view should be clipped.",type:"boolean"},continuousHeight:{description:"The default height when the plot has a continuous y-field for x or latitude, or has arc marks.\n\n__Default value:__ `200`",type:"number"},continuousWidth:{description:"The default width when the plot has a continuous field for x or longitude, or has arc marks.\n\n__Default value:__ `200`",type:"number"},cornerRadius:{anyOf:[{description:"The radius in pixels of rounded rectangles or arcs' corners.\n\n__Default value:__ `0`",type:"number"},{$ref:"#/definitions/ExprRef"}]},cursor:{$ref:"#/definitions/Cursor",description:"The mouse cursor used over the view. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used."},discreteHeight:{anyOf:[{type:"number"},{additionalProperties:!1,properties:{step:{type:"number"}},required:["step"],type:"object"}],description:"The default height when the plot has non arc marks and either a discrete y-field or no y-field. The height can be either a number indicating a fixed height or an object in the form of `{step: number}` defining the height per discrete step.\n\n__Default value:__ a step size based on `config.view.step`."},discreteWidth:{anyOf:[{type:"number"},{additionalProperties:!1,properties:{step:{type:"number"}},required:["step"],type:"object"}],description:"The default width when the plot has non-arc marks and either a discrete x-field or no x-field. The width can be either a number indicating a fixed width or an object in the form of `{step: number}` defining the width per discrete step.\n\n__Default value:__ a step size based on `config.view.step`."},fill:{anyOf:[{$ref:"#/definitions/Color"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:"The fill color.\n\n__Default value:__ `undefined`"},fillOpacity:{anyOf:[{description:"The fill opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},opacity:{anyOf:[{type:"number"},{$ref:"#/definitions/ExprRef"}],description:"The overall opacity (value between [0,1]).\n\n__Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.",maximum:1,minimum:0},step:{description:"Default step size for x-/y- discrete fields.",type:"number"},stroke:{anyOf:[{$ref:"#/definitions/Color"},{type:"null"},{$ref:"#/definitions/ExprRef"}],description:'The stroke color.\n\n__Default value:__ `"#ddd"`'},strokeCap:{anyOf:[{$ref:"#/definitions/StrokeCap",description:'The stroke cap for line ending style. One of `"butt"`, `"round"`, or `"square"`.\n\n__Default value:__ `"butt"`'},{$ref:"#/definitions/ExprRef"}]},strokeDash:{anyOf:[{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",items:{type:"number"},type:"array"},{$ref:"#/definitions/ExprRef"}]},strokeDashOffset:{anyOf:[{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeJoin:{anyOf:[{$ref:"#/definitions/StrokeJoin",description:'The stroke line join method. One of `"miter"`, `"round"` or `"bevel"`.\n\n__Default value:__ `"miter"`'},{$ref:"#/definitions/ExprRef"}]},strokeMiterLimit:{anyOf:[{description:"The miter limit at which to bevel a line join.",type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeOpacity:{anyOf:[{description:"The stroke opacity (value between [0,1]).\n\n__Default value:__ `1`",maximum:1,minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]},strokeWidth:{anyOf:[{description:"The stroke width, in pixels.",minimum:0,type:"number"},{$ref:"#/definitions/ExprRef"}]}},type:"object"},WindowEventType:{anyOf:[{$ref:"#/definitions/EventType"},{type:"string"}]},WindowFieldDef:{additionalProperties:!1,properties:{as:{$ref:"#/definitions/FieldName",description:"The output name for the window operation."},field:{$ref:"#/definitions/FieldName",description:'The data field for which to compute the aggregate or window function. This can be omitted for window functions that do not operate over a field such as `"count"`, `"rank"`, `"dense_rank"`.'},op:{anyOf:[{$ref:"#/definitions/AggregateOp"},{$ref:"#/definitions/WindowOnlyOp"}],description:'The window or aggregation operation to apply within a window (e.g., `"rank"`, `"lead"`, `"sum"`, `"average"` or `"count"`). See the list of all supported operations [here](https://vega.github.io/vega-lite/docs/window.html#ops).'},param:{description:`Parameter values for the window functions. Parameter values can be omitted for operations that do not accept a parameter.

See the list of all supported operations and their parameters [here](https://vega.github.io/vega-lite/docs/transforms/window.html).`,type:"number"}},required:["op","as"],type:"object"},WindowOnlyOp:{enum:["row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value"],type:"string"},WindowTransform:{additionalProperties:!1,properties:{frame:{description:"A frame specification as a two-element array indicating how the sliding window should proceed. The array entries should either be a number indicating the offset from the current data object, or null to indicate unbounded rows preceding or following the current data object. The default value is `[null, 0]`, indicating that the sliding window includes the current object and all preceding objects. The value `[-5, 5]` indicates that the window should include five objects preceding and five objects following the current object. Finally, `[null, null]` indicates that the window frame should always include all data objects. If you this frame and want to assign the same value to add objects, you can use the simpler [join aggregate transform](https://vega.github.io/vega-lite/docs/joinaggregate.html). The only operators affected are the aggregation operations and the `first_value`, `last_value`, and `nth_value` window operations. The other window operations are not affected by this.\n\n__Default value:__:  `[null, 0]` (includes the current object and all preceding objects)",items:{type:["null","number"]},type:"array"},groupby:{description:"The data fields for partitioning the data objects into separate windows. If unspecified, all data points will be in a single window.",items:{$ref:"#/definitions/FieldName"},type:"array"},ignorePeers:{description:"Indicates if the sliding window frame should ignore peer values (data that are considered identical by the sort criteria). The default is false, causing the window frame to expand to include all peer values. If set to true, the window frame will be defined by offset values only. This setting only affects those operations that depend on the window frame, namely aggregation operations and the first_value, last_value, and nth_value window operations.\n\n__Default value:__ `false`",type:"boolean"},sort:{description:'A sort field definition for sorting data objects within a window. If two data objects are considered equal by the comparator, they are considered "peer" values of equal rank. If sort is not specified, the order is undefined: data objects are processed in the order they are observed and none are considered peers (the ignorePeers parameter is ignored and treated as if set to `true`).',items:{$ref:"#/definitions/SortField"},type:"array"},window:{description:"The definition of the fields in the window, and what calculations to use.",items:{$ref:"#/definitions/WindowFieldDef"},type:"array"}},required:["window"],type:"object"}},A7e={$ref:E7e,$schema:S7e,definitions:T7e},$S=new m7e({allErrors:!0,useDefaults:!0,strict:!1});v7e($S);$S.addFormat("color-hex",e=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e));const g6="https://vega.github.io/schema/vega-lite/v5.json";try{$S.addSchema(A7e,g6),console.log(`Vega-Lite Schema (${g6}) added to AJV successfully.`)}catch(e){throw console.error("Failed to add Vega-Lite schema to AJV:",e),new Error("Failed to configure AJV with Vega-Lite schema.")}let aI;try{aI=$S.compile($7e),console.log("Main Schema compiled successfully.")}catch(e){throw console.error("Main Schema compilation failed:",e),new Error("Failed to compile JSON schema.")}function O7e(e){const t=JSON.parse(e),n=Array.isArray(t)?t:[t];if(console.log(n),!aI(n))return console.error("Top-level JSON schema validation errors:",aI.errors),[];const i=[];for(const a of n){const r=a;r&&i.push(r)}return i}const D7e=()=>{const[e,t]=gi.useState([]),n=i=>{const a=O7e(i);a.length>0&&(console.log("Specification:",a[0]),t(a))};return Li.jsxs("div",{className:"grid-container",children:[Li.jsx("div",{className:"grid-item editor",children:Li.jsx(dse,{onApply:n})}),Li.jsx("div",{className:"grid-item visualization",children:e.length>0&&Li.jsx(E9e,{parsedSpec:e})})]})};CV(document.getElementById("root")).render(Li.jsx(gi.StrictMode,{children:Li.jsx(D7e,{})}));
//# sourceMappingURL=index-tJLJE7dC.js.map
